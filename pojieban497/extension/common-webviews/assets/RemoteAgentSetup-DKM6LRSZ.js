var Cn=Object.defineProperty;var Sn=(r,t,n)=>t in r?Cn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n;var at=(r,t,n)=>Sn(r,typeof t!="symbol"?t+"":t,n);import{S as ot,i as rt,s as ct,f as et,a as zt,H as Gt,w as Tt,x as Ht,y as Ot,e as b,g as xt,z as Vt,h as qt,n as z,j as Rt,J as X,D as C,X as P,N as it,b as _,c as y,d as k,K as j,L as J,M as Y,u as m,q as O,t as f,r as V,I as $e,T as Lt,E as x,F as R,G as L,a0 as T,a2 as K,am as Dt,a6 as Bt,a8 as me,Z as bt,_ as _t,$ as yt,V as vt,ag as Pt,a4 as ee,ac as pn,ai as Wt,a9 as jt,ab as Bn,a5 as Re,ar as Jt,A as Mt,al as Ct,ah as St,ak as kn,ae as $n,af as Yt}from"./SpinnerAugment-CCR7AGk-.js";import{C as ne}from"./CalloutAugment-D1eOn47Z.js";import{D as pt,z as Fn,B as Ut,T as Un,e as In}from"./index-DaLJ_QUV.js";import{f as Zt}from"./index-BHzmr0EY.js";import{B as Kt}from"./ButtonAugment-JhlUwgSi.js";import{B as Pn,A as mn,a as ae,b as ie}from"./main-panel-BzWETrLY.js";import{C as dn,G as de,M as fe,R as fn,T as Nn}from"./mcp-logo-CwhjBp6K.js";import{d as Le,T as It,a as gn}from"./TextTooltipAugment-QVDAcl-O.js";import{aV as hn}from"./AugmentMessage-DFC62z0i.js";import{e as Qt,u as wn,o as vn,I as se}from"./IconButtonAugment-CVWbWfwx.js";import{C as En}from"./CopyButton-COVKPqeG.js";import{R as oe}from"./chat-context-CfYmajw8.js";import{A as Dn}from"./chevron-down-Di3C5ykp.js";import{T as bn}from"./terminal-CqA-6nrc.js";import{P as Mn}from"./pen-to-square-CrZjDplM.js";import{T as _n}from"./Keybindings-BZOppcAY.js";import{R as Ae}from"./types-DDm27S8B.js";import{E as zn}from"./exclamation-triangle-CGK58Qw5.js";import{T as Gn}from"./StatusIndicator-CIXxye0K.js";import"./message-broker-D_dlQCzo.js";import"./async-messaging-BnYTstSc.js";import"./CardAugment-Cjl8BxE0.js";import"./BaseTextInput-BomIiYnE.js";import"./sound-model-Hh6Xs8ht.js";import"./design-system-init-B0YNj4mb.js";import"./ra-diff-ops-model-CfFedGkc.js";import"./diff-utils-C44al88x.js";import"./LanguageIcon-7PvQ76S5.js";import"./preload-helper-Dv6uf1Os.js";import"./index-DJGUS2rb.js";import"./index-B60hMJvm.js";import"./IconFilePath-C7r3gamb.js";import"./next-edit-types-904A5ehg.js";import"./await_block-B-Au3vut.js";import"./file-paths-BhRi9crS.js";import"./folder-opened-D6WrI8wv.js";import"./check-whOCP5so.js";import"./Filespan-Dq3a1CK8.js";import"./CollapseButtonAugment-DvFOUTxy.js";import"./ellipsis-DUJFhkV3.js";import"./keypress-DD1aQVr0.js";import"./MaterialIcon-BiH6zpoH.js";import"./utils-DRvqjT1k.js";import"./expand-BukPCaok.js";import"./VSCodeCodicon-D6TsidP1.js";import"./types-CGlLNakm.js";import"./augment-logo-Bf5bIaNf.js";import"./chat-flags-model-B-EOBEov.js";import"./copy-CzH8IZOA.js";import"./TextAreaAugment-20MWk3hd.js";function le(r){const t=r.match(/github\.com\/([^/]+)\/([^/]+?)(?:\.git|\/|$)/);if(t)return{owner:t[1],name:t[2]}}function yn(r){const t=r.match(/^[^/]+\/HEAD\s*->\s*(.+)$/);if(t)return yn(t[1]);const n=function(e){const s=e.match(/^refs\/remotes\/([^/]+)\/(.+)$/);if(s)return{remote:s[1],branch:s[2]};const o=e.match(/^([^/]+)\/(.+)$/);if(o){const[,c,i]=o;if(["origin","upstream","fork","github","gitlab","bitbucket"].includes(c)||c.includes("."))return{remote:c,branch:i}}return null}(r);return n?n.branch:r}function Tn(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},r[0]],s={};for(let o=0;o<e.length;o+=1)s=et(s,e[o]);return{c(){t=zt("svg"),n=new Gt(!0),this.h()},l(o){t=Tt(o,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var c=Ht(t);n=Ot(c,!0),c.forEach(b),this.h()},h(){n.a=null,xt(t,s)},m(o,c){Vt(o,t,c),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M472 224c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24s-24 10.7-24 24v80.1l-20-23.5C387 63.4 325.1 32 256 32 132.3 32 32 132.3 32 256s100.3 224 224 224c50.4 0 97-16.7 134.4-44.8 10.6-8 12.7-23 4.8-33.6s-23-12.7-33.6-4.8C332.2 418.9 295.7 432 256 432c-97.2 0-176-78.8-176-176S158.8 80 256 80c54.3 0 102.9 24.6 135.2 63.4l.1.2 27.6 32.4H328c-13.3 0-24 10.7-24 24s10.7 24 24 24z"/>',t)},p(o,[c]){xt(t,s=qt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&c&&o[0]]))},i:z,o:z,d(o){o&&b(t)}}}function Hn(r,t,n){return r.$$set=e=>{n(0,t=et(et({},t),Rt(e)))},[t=Rt(t)]}class On extends ot{constructor(t){super(),rt(this,t,Hn,Tn,ct,{})}}function Vn(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},r[0]],s={};for(let o=0;o<e.length;o+=1)s=et(s,e[o]);return{c(){t=zt("svg"),n=new Gt(!0),this.h()},l(o){t=Tt(o,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var c=Ht(t);n=Ot(c,!0),c.forEach(b),this.h()},h(){n.a=null,xt(t,s)},m(o,c){Vt(o,t,c),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M239 465c9.4 9.4 24.6 9.4 33.9 0L465 273c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-175 175L81 239c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9zM47 81l192 192c9.4 9.4 24.6 9.4 33.9 0L465 81c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-175 175L81 47c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9z"/>',t)},p(o,[c]){xt(t,s=qt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&c&&o[0]]))},i:z,o:z,d(o){o&&b(t)}}}function qn(r,t,n){return r.$$set=e=>{n(0,t=et(et({},t),Rt(e)))},[t=Rt(t)]}class Wn extends ot{constructor(t){super(),rt(this,t,qn,Vn,ct,{})}}const Kn=r=>({}),Ce=r=>({}),Xn=r=>({}),Se=r=>({}),jn=r=>({}),Be=r=>({}),Jn=r=>({}),ke=r=>({});function Yn(r){let t;return{c(){t=T(r[0])},m(n,e){y(n,t,e)},p(n,e){1&e&&K(t,n[0])},d(n){n&&b(t)}}}function Fe(r){let t,n;const e=r[3].subtitle,s=X(e,r,r[4],Se),o=s||function(c){let i,a;return i=new Lt({props:{size:2,$$slots:{default:[Zn]},$$scope:{ctx:c}}}),{c(){x(i.$$.fragment)},m(l,u){R(i,l,u),a=!0},p(l,u){const d={};18&u&&(d.$$scope={dirty:u,ctx:l}),i.$set(d)},i(l){a||(m(i.$$.fragment,l),a=!0)},o(l){f(i.$$.fragment,l),a=!1},d(l){L(i,l)}}}(r);return{c(){t=C("div"),o&&o.c(),_(t,"class","c-card-button__subtitle svelte-z367s9")},m(c,i){y(c,t,i),o&&o.m(t,null),n=!0},p(c,i){s?s.p&&(!n||16&i)&&j(s,e,c,c[4],n?Y(e,c[4],i,Xn):J(c[4]),Se):o&&o.p&&(!n||2&i)&&o.p(c,n?i:-1)},i(c){n||(m(o,c),n=!0)},o(c){f(o,c),n=!1},d(c){c&&b(t),o&&o.d(c)}}}function Zn(r){let t;return{c(){t=T(r[1])},m(n,e){y(n,t,e)},p(n,e){2&e&&K(t,n[1])},d(n){n&&b(t)}}}function Ue(r){let t,n;const e=r[3].iconRight,s=X(e,r,r[4],Ce);return{c(){t=C("div"),s&&s.c(),_(t,"class","c-card-button__icon-right svelte-z367s9")},m(o,c){y(o,t,c),s&&s.m(t,null),n=!0},p(o,c){s&&s.p&&(!n||16&c)&&j(s,e,o,o[4],n?Y(e,o[4],c,Kn):J(o[4]),Ce)},i(o){n||(m(s,o),n=!0)},o(o){f(s,o),n=!1},d(o){o&&b(t),s&&s.d(o)}}}function Qn(r){let t,n,e,s,o,c,i,a;const l=r[3].iconLeft,u=X(l,r,r[4],ke),d=r[3].title,w=X(d,r,r[4],Be),g=w||function($){let v,S;return v=new Lt({props:{size:2,$$slots:{default:[Yn]},$$scope:{ctx:$}}}),{c(){x(v.$$.fragment)},m(I,G){R(v,I,G),S=!0},p(I,G){const U={};17&G&&(U.$$scope={dirty:G,ctx:I}),v.$set(U)},i(I){S||(m(v.$$.fragment,I),S=!0)},o(I){f(v.$$.fragment,I),S=!1},d(I){L(v,I)}}}(r);let h=r[1]&&Fe(r),p=r[2].iconRight&&Ue(r);return{c(){t=C("div"),u&&u.c(),n=P(),e=C("div"),s=C("div"),g&&g.c(),o=P(),h&&h.c(),c=P(),p&&p.c(),i=it(),_(t,"class","c-card-button__icon-left svelte-z367s9"),_(s,"class","c-card-button__title svelte-z367s9"),_(e,"class","c-card-button__content svelte-z367s9")},m($,v){y($,t,v),u&&u.m(t,null),y($,n,v),y($,e,v),k(e,s),g&&g.m(s,null),k(e,o),h&&h.m(e,null),y($,c,v),p&&p.m($,v),y($,i,v),a=!0},p($,[v]){u&&u.p&&(!a||16&v)&&j(u,l,$,$[4],a?Y(l,$[4],v,Jn):J($[4]),ke),w?w.p&&(!a||16&v)&&j(w,d,$,$[4],a?Y(d,$[4],v,jn):J($[4]),Be):g&&g.p&&(!a||1&v)&&g.p($,a?v:-1),$[1]?h?(h.p($,v),2&v&&m(h,1)):(h=Fe($),h.c(),m(h,1),h.m(e,null)):h&&(O(),f(h,1,1,()=>{h=null}),V()),$[2].iconRight?p?(p.p($,v),4&v&&m(p,1)):(p=Ue($),p.c(),m(p,1),p.m(i.parentNode,i)):p&&(O(),f(p,1,1,()=>{p=null}),V())},i($){a||(m(u,$),m(g,$),m(h),m(p),a=!0)},o($){f(u,$),f(g,$),f(h),f(p),a=!1},d($){$&&(b(t),b(n),b(e),b(c),b(i)),u&&u.d($),g&&g.d($),h&&h.d(),p&&p.d($)}}}function ts(r,t,n){let{$$slots:e={},$$scope:s}=t;const o=$e(e);let{title:c="Select an option"}=t,{subtitle:i=""}=t;return r.$$set=a=>{"title"in a&&n(0,c=a.title),"subtitle"in a&&n(1,i=a.subtitle),"$$scope"in a&&n(4,s=a.$$scope)},[c,i,o,e,s]}class xn extends ot{constructor(t){super(),rt(this,t,ts,Qn,ct,{title:0,subtitle:1})}}const es=r=>({}),Ie=r=>({slot:"iconLeft"}),ns=r=>({}),Pe=r=>({slot:"iconRight"});function Ne(r,t,n){const e=r.slice();return e[19]=t[n],e}const ss=r=>({}),Ee=r=>({}),os=r=>({}),De=r=>({}),rs=r=>({}),Me=r=>({slot:"iconLeft"}),cs=r=>({}),ze=r=>({slot:"title"}),as=r=>({}),Ge=r=>({slot:"iconRight"});function is(r){let t,n,e,s,o;return n=new xn({props:{title:r[3],subtitle:r[4],$$slots:{iconRight:[ps],iconLeft:[us]},$$scope:{ctx:r}}}),{c(){t=C("button"),x(n.$$.fragment),_(t,"class","c-card-button__display svelte-1km5ln2"),_(t,"type","button"),t.disabled=r[10]},m(c,i){y(c,t,i),R(n,t,null),e=!0,s||(o=[Bt(t,"click",r[16]),Bt(t,"keydown",r[17])],s=!0)},p(c,i){const a={};8&i&&(a.title=c[3]),16&i&&(a.subtitle=c[4]),262144&i&&(a.$$scope={dirty:i,ctx:c}),n.$set(a),(!e||1024&i)&&(t.disabled=c[10])},i(c){e||(m(n.$$.fragment,c),e=!0)},o(c){f(n.$$.fragment,c),e=!1},d(c){c&&b(t),L(n),s=!1,me(o)}}}function ls(r){let t,n,e;function s(c){r[15](c)}let o={onOpenChange:r[9],$$slots:{default:[_s]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.requestClose=r[1]),t=new pt.Root({props:o}),bt.push(()=>_t(t,"requestClose",s)),{c(){x(t.$$.fragment)},m(c,i){R(t,c,i),e=!0},p(c,i){const a={};512&i&&(a.onOpenChange=c[9]),263641&i&&(a.$$scope={dirty:i,ctx:c}),!n&&2&i&&(n=!0,a.requestClose=c[1],yt(()=>n=!1)),t.$set(a)},i(c){e||(m(t.$$.fragment,c),e=!0)},o(c){f(t.$$.fragment,c),e=!1},d(c){L(t,c)}}}function us(r){let t;const n=r[13].iconLeft,e=X(n,r,r[18],Ie);return{c(){e&&e.c()},m(s,o){e&&e.m(s,o),t=!0},p(s,o){e&&e.p&&(!t||262144&o)&&j(e,n,s,s[18],t?Y(n,s[18],o,es):J(s[18]),Ie)},i(s){t||(m(e,s),t=!0)},o(s){f(e,s),t=!1},d(s){e&&e.d(s)}}}function ps(r){let t;const n=r[13].iconRight,e=X(n,r,r[18],Pe);return{c(){e&&e.c()},m(s,o){e&&e.m(s,o),t=!0},p(s,o){e&&e.p&&(!t||262144&o)&&j(e,n,s,s[18],t?Y(n,s[18],o,ns):J(s[18]),Pe)},i(s){t||(m(e,s),t=!0)},o(s){f(e,s),t=!1},d(s){e&&e.d(s)}}}function $s(r){let t;const n=r[13].iconLeft,e=X(n,r,r[18],Me);return{c(){e&&e.c()},m(s,o){e&&e.m(s,o),t=!0},p(s,o){e&&e.p&&(!t||262144&o)&&j(e,n,s,s[18],t?Y(n,s[18],o,rs):J(s[18]),Me)},i(s){t||(m(e,s),t=!0)},o(s){f(e,s),t=!1},d(s){e&&e.d(s)}}}function ms(r){let t;const n=r[13].title,e=X(n,r,r[18],ze),s=e||function(o){let c;return{c(){c=T(o[3])},m(i,a){y(i,c,a)},p(i,a){8&a&&K(c,i[3])},d(i){i&&b(c)}}}(r);return{c(){s&&s.c()},m(o,c){s&&s.m(o,c),t=!0},p(o,c){e?e.p&&(!t||262144&c)&&j(e,n,o,o[18],t?Y(n,o[18],c,cs):J(o[18]),ze):s&&s.p&&(!t||8&c)&&s.p(o,t?c:-1)},i(o){t||(m(s,o),t=!0)},o(o){f(s,o),t=!1},d(o){s&&s.d(o)}}}function ds(r){let t;const n=r[13].iconRight,e=X(n,r,r[18],Ge),s=e||function(o){let c,i;return c=new dn({}),{c(){x(c.$$.fragment)},m(a,l){R(c,a,l),i=!0},i(a){i||(m(c.$$.fragment,a),i=!0)},o(a){f(c.$$.fragment,a),i=!1},d(a){L(c,a)}}}();return{c(){s&&s.c()},m(o,c){s&&s.m(o,c),t=!0},p(o,c){e&&e.p&&(!t||262144&c)&&j(e,n,o,o[18],t?Y(n,o[18],c,as):J(o[18]),Ge)},i(o){t||(m(s,o),t=!0)},o(o){f(s,o),t=!1},d(o){s&&s.d(o)}}}function fs(r){let t,n,e,s;return n=new xn({props:{subtitle:r[4],$$slots:{iconRight:[ds],title:[ms],iconLeft:[$s]},$$scope:{ctx:r}}}),{c(){t=C("div"),x(n.$$.fragment),_(t,"class","c-card-button__display svelte-1km5ln2"),_(t,"role","button"),_(t,"tabindex",e=r[10]?-1:0),vt(t,"disabled",r[10])},m(o,c){y(o,t,c),R(n,t,null),s=!0},p(o,c){const i={};16&c&&(i.subtitle=o[4]),262152&c&&(i.$$scope={dirty:c,ctx:o}),n.$set(i),(!s||1024&c&&e!==(e=o[10]?-1:0))&&_(t,"tabindex",e),(!s||1024&c)&&vt(t,"disabled",o[10])},i(o){s||(m(n.$$.fragment,o),s=!0)},o(o){f(n.$$.fragment,o),s=!1},d(o){o&&b(t),L(n)}}}function gs(r){let t,n;return t=new pt.Label({props:{$$slots:{default:[ws]},$$scope:{ctx:r}}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p(e,s){const o={};262400&s&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function hs(r){let t,n,e=[],s=new Map,o=Qt(r[6]);const c=i=>i[7](i[19]);for(let i=0;i<o.length;i+=1){let a=Ne(r,o,i),l=c(a);s.set(l,e[i]=Te(l,a))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();t=it()},m(i,a){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(i,a);y(i,t,a),n=!0},p(i,a){2241&a&&(o=Qt(i[6]),O(),e=wn(e,a,c,1,i,o,s,t.parentNode,vn,Te,t,Ne),V())},i(i){if(!n){for(let a=0;a<o.length;a+=1)m(e[a]);n=!0}},o(i){for(let a=0;a<e.length;a+=1)f(e[a]);n=!1},d(i){i&&b(t);for(let a=0;a<e.length;a+=1)e[a].d(i)}}}function ws(r){let t;return{c(){t=T(r[8])},m(n,e){y(n,t,e)},p(n,e){256&e&&K(t,n[8])},d(n){n&&b(t)}}}function vs(r){let t,n,e=r[7](r[19])+"";return{c(){t=T(e),n=P()},m(s,o){y(s,t,o),y(s,n,o)},p(s,o){192&o&&e!==(e=s[7](s[19])+"")&&K(t,e)},d(s){s&&(b(t),b(n))}}}function Te(r,t){let n,e,s;function o(){return t[14](t[19])}return e=new pt.Item({props:{onSelect:o,highlight:t[0]===t[19],$$slots:{default:[vs]},$$scope:{ctx:t}}}),{key:r,first:null,c(){n=it(),x(e.$$.fragment),this.first=n},m(c,i){y(c,n,i),R(e,c,i),s=!0},p(c,i){t=c;const a={};64&i&&(a.onSelect=o),65&i&&(a.highlight=t[0]===t[19]),262336&i&&(a.$$scope={dirty:i,ctx:t}),e.$set(a)},i(c){s||(m(e.$$.fragment,c),s=!0)},o(c){f(e.$$.fragment,c),s=!1},d(c){c&&b(n),L(e,c)}}}function bs(r){let t,n,e,s,o;const c=r[13]["dropdown-top"],i=X(c,r,r[18],De),a=r[13]["dropdown-content"],l=X(a,r,r[18],Ee),u=l||function(d){let w,g,h,p;const $=[hs,gs],v=[];function S(I,G){return I[6].length>0?0:1}return w=S(d),g=v[w]=$[w](d),{c(){g.c(),h=it()},m(I,G){v[w].m(I,G),y(I,h,G),p=!0},p(I,G){let U=w;w=S(I),w===U?v[w].p(I,G):(O(),f(v[U],1,1,()=>{v[U]=null}),V(),g=v[w],g?g.p(I,G):(g=v[w]=$[w](I),g.c()),m(g,1),g.m(h.parentNode,h))},i(I){p||(m(g),p=!0)},o(I){f(g),p=!1},d(I){I&&b(h),v[w].d(I)}}}(r);return{c(){t=C("div"),n=C("div"),i&&i.c(),e=P(),s=C("div"),u&&u.c(),_(n,"class","c-card-button__dropdown-top svelte-1km5ln2"),_(s,"class","c-card-button__dropdown-content svelte-1km5ln2"),_(t,"class","c-card__dropdown-contents svelte-1km5ln2")},m(d,w){y(d,t,w),k(t,n),i&&i.m(n,null),k(t,e),k(t,s),u&&u.m(s,null),o=!0},p(d,w){i&&i.p&&(!o||262144&w)&&j(i,c,d,d[18],o?Y(c,d[18],w,os):J(d[18]),De),l?l.p&&(!o||262144&w)&&j(l,a,d,d[18],o?Y(a,d[18],w,ss):J(d[18]),Ee):u&&u.p&&(!o||449&w)&&u.p(d,o?w:-1)},i(d){o||(m(i,d),m(u,d),o=!0)},o(d){f(i,d),f(u,d),o=!1},d(d){d&&b(t),i&&i.d(d),u&&u.d(d)}}}function _s(r){let t,n,e,s;return t=new pt.Trigger({props:{$$slots:{default:[fs]},$$scope:{ctx:r}}}),e=new pt.Content({props:{align:"start",side:"bottom",$$slots:{default:[bs]},$$scope:{ctx:r}}}),{c(){x(t.$$.fragment),n=P(),x(e.$$.fragment)},m(o,c){R(t,o,c),y(o,n,c),R(e,o,c),s=!0},p(o,c){const i={};263192&c&&(i.$$scope={dirty:c,ctx:o}),t.$set(i);const a={};262593&c&&(a.$$scope={dirty:c,ctx:o}),e.$set(a)},i(o){s||(m(t.$$.fragment,o),m(e.$$.fragment,o),s=!0)},o(o){f(t.$$.fragment,o),f(e.$$.fragment,o),s=!1},d(o){o&&b(n),L(t,o),L(e,o)}}}function ys(r){let t,n,e,s;const o=[ls,is],c=[];function i(a,l){return a[2]==="dropdown"?0:1}return n=i(r),e=c[n]=o[n](r),{c(){t=C("div"),e.c(),_(t,"class","c-card-button svelte-1km5ln2")},m(a,l){y(a,t,l),c[n].m(t,null),s=!0},p(a,[l]){let u=n;n=i(a),n===u?c[n].p(a,l):(O(),f(c[u],1,1,()=>{c[u]=null}),V(),e=c[n],e?e.p(a,l):(e=c[n]=o[n](a),e.c()),m(e,1),e.m(t,null))},i(a){s||(m(e),s=!0)},o(a){f(e),s=!1},d(a){a&&b(t),c[n].d()}}}function xs(r,t,n){let{$$slots:e={},$$scope:s}=t,{type:o="button"}=t,{title:c="Select an option"}=t,{subtitle:i=""}=t,{onClick:a=()=>{}}=t,{items:l=[]}=t,{selectedItem:u}=t,{formatItemLabel:d=S=>(S==null?void 0:S.toString())||""}=t,{noItemsLabel:w="No items found"}=t,{onDropdownOpenChange:g=()=>{}}=t,{requestClose:h=()=>{}}=t,{disabled:p=!1}=t;function $(S){n(0,u=S),v("select",S)}const v=Dt();return r.$$set=S=>{"type"in S&&n(2,o=S.type),"title"in S&&n(3,c=S.title),"subtitle"in S&&n(4,i=S.subtitle),"onClick"in S&&n(5,a=S.onClick),"items"in S&&n(6,l=S.items),"selectedItem"in S&&n(0,u=S.selectedItem),"formatItemLabel"in S&&n(7,d=S.formatItemLabel),"noItemsLabel"in S&&n(8,w=S.noItemsLabel),"onDropdownOpenChange"in S&&n(9,g=S.onDropdownOpenChange),"requestClose"in S&&n(1,h=S.requestClose),"disabled"in S&&n(10,p=S.disabled),"$$scope"in S&&n(18,s=S.$$scope)},[u,h,o,c,i,a,l,d,w,g,p,$,v,e,S=>$(S),function(S){h=S,n(1,h)},()=>{a(),v("click")},S=>{S.key!=="Enter"&&S.key!==" "||(a(),v("click"))},s]}class Rn extends ot{constructor(t){super(),rt(this,t,xs,ys,ct,{type:2,title:3,subtitle:4,onClick:5,items:6,selectedItem:0,formatItemLabel:7,noItemsLabel:8,onDropdownOpenChange:9,requestClose:1,disabled:10,selectItem:11})}get selectItem(){return this.$$.ctx[11]}}function Rs(r){let t,n;return t=new Rn({props:{type:"dropdown",title:"Connected to your GitHub account",$$slots:{"dropdown-content":[Us],iconLeft:[As]},$$scope:{ctx:r}}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p(e,s){const o={};16388&s&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function Ls(r){let t,n,e,s;t=new Rn({props:{type:"button",title:r[1]?"Cancel":"Connect to GitHub",onClick:r[6],$$slots:{iconRight:[Es],iconLeft:[Is]},$$scope:{ctx:r}}});let o=r[3]&&He(r);return{c(){x(t.$$.fragment),n=P(),o&&o.c(),e=it()},m(c,i){R(t,c,i),y(c,n,i),o&&o.m(c,i),y(c,e,i),s=!0},p(c,i){const a={};2&i&&(a.title=c[1]?"Cancel":"Connect to GitHub"),16386&i&&(a.$$scope={dirty:i,ctx:c}),t.$set(a),c[3]?o?(o.p(c,i),8&i&&m(o,1)):(o=He(c),o.c(),m(o,1),o.m(e.parentNode,e)):o&&(O(),f(o,1,1,()=>{o=null}),V())},i(c){s||(m(t.$$.fragment,c),m(o),s=!0)},o(c){f(t.$$.fragment,c),f(o),s=!1},d(c){c&&(b(n),b(e)),L(t,c),o&&o.d(c)}}}function As(r){let t,n;return t=new de({props:{slot:"iconLeft"}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p:z,i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function Cs(r){let t,n;return t=new Lt({props:{size:1,weight:"medium",$$slots:{default:[Bs]},$$scope:{ctx:r}}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function Ss(r){let t,n,e,s;return t=new Wt({props:{slot:"iconLeft",useCurrentColor:!0,size:1}}),e=new Lt({props:{size:1,weight:"medium",$$slots:{default:[ks]},$$scope:{ctx:r}}}),{c(){x(t.$$.fragment),n=P(),x(e.$$.fragment)},m(o,c){R(t,o,c),y(o,n,c),R(e,o,c),s=!0},i(o){s||(m(t.$$.fragment,o),m(e.$$.fragment,o),s=!0)},o(o){f(t.$$.fragment,o),f(e.$$.fragment,o),s=!1},d(o){o&&b(n),L(t,o),L(e,o)}}}function Bs(r){let t;return{c(){t=T("Revoke Access")},m(n,e){y(n,t,e)},d(n){n&&b(t)}}}function ks(r){let t;return{c(){t=T("Revoking...")},m(n,e){y(n,t,e)},d(n){n&&b(t)}}}function Fs(r){let t,n,e,s;const o=[Ss,Cs],c=[];function i(a,l){return a[2]?0:1}return t=i(r),n=c[t]=o[t](r),{c(){n.c(),e=it()},m(a,l){c[t].m(a,l),y(a,e,l),s=!0},p(a,l){let u=t;t=i(a),t!==u&&(O(),f(c[u],1,1,()=>{c[u]=null}),V(),n=c[t],n||(n=c[t]=o[t](a),n.c()),m(n,1),n.m(e.parentNode,e))},i(a){s||(m(n),s=!0)},o(a){f(n),s=!1},d(a){a&&b(e),c[t].d(a)}}}function Us(r){let t,n,e;return n=new pt.Item({props:{color:"error",onSelect:r[8],$$slots:{default:[Fs]},$$scope:{ctx:r}}}),{c(){t=C("div"),x(n.$$.fragment),_(t,"slot","dropdown-content")},m(s,o){y(s,t,o),R(n,t,null),e=!0},p(s,o){const c={};16388&o&&(c.$$scope={dirty:o,ctx:s}),n.$set(c)},i(s){e||(m(n.$$.fragment,s),e=!0)},o(s){f(n.$$.fragment,s),e=!1},d(s){s&&b(t),L(n)}}}function Is(r){let t,n;return t=new de({props:{slot:"iconLeft"}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p:z,i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function Ps(r){let t,n;return t=new Fn({}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function Ns(r){let t,n;return t=new Wt({props:{size:1,useCurrentColor:!0}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function Es(r){let t,n,e,s;const o=[Ns,Ps],c=[];function i(a,l){return a[1]?0:1}return n=i(r),e=c[n]=o[n](r),{c(){t=C("div"),e.c(),_(t,"slot","iconRight")},m(a,l){y(a,t,l),c[n].m(t,null),s=!0},p(a,l){let u=n;n=i(a),n!==u&&(O(),f(c[u],1,1,()=>{c[u]=null}),V(),e=c[n],e||(e=c[n]=o[n](a),e.c()),m(e,1),e.m(t,null))},i(a){s||(m(e),s=!0)},o(a){f(e),s=!1},d(a){a&&b(t),c[n].d()}}}function He(r){let t,n,e,s,o,c;n=new Lt({props:{size:1,$$slots:{default:[Ds]},$$scope:{ctx:r}}});let i=r[4]&&Oe(r);return o=new Lt({props:{size:1,$$slots:{default:[Gs]},$$scope:{ctx:r}}}),{c(){t=C("div"),x(n.$$.fragment),e=P(),i&&i.c(),s=P(),x(o.$$.fragment),_(t,"class","github-auth-error svelte-c4wp0y")},m(a,l){y(a,t,l),R(n,t,null),k(t,e),i&&i.m(t,null),k(t,s),R(o,t,null),c=!0},p(a,l){const u={};16384&l&&(u.$$scope={dirty:l,ctx:a}),n.$set(u),a[4]?i?(i.p(a,l),16&l&&m(i,1)):(i=Oe(a),i.c(),m(i,1),i.m(t,s)):i&&(O(),f(i,1,1,()=>{i=null}),V());const d={};16392&l&&(d.$$scope={dirty:l,ctx:a}),o.$set(d)},i(a){c||(m(n.$$.fragment,a),m(i),m(o.$$.fragment,a),c=!0)},o(a){f(n.$$.fragment,a),f(i),f(o.$$.fragment,a),c=!1},d(a){a&&b(t),L(n),i&&i.d(),L(o)}}}function Ds(r){let t;return{c(){t=T("An error occurred while authenticating with GitHub.")},m(n,e){y(n,t,e)},d(n){n&&b(t)}}}function Oe(r){let t,n,e,s,o,c,i;return t=new Lt({props:{size:1,$$slots:{default:[Ms]},$$scope:{ctx:r}}}),s=new Lt({props:{size:1,class:"github-auth-error-url",$$slots:{default:[zs]},$$scope:{ctx:r}}}),c=new En({props:{text:r[4],tooltipNested:!1}}),{c(){x(t.$$.fragment),n=P(),e=C("div"),x(s.$$.fragment),o=P(),x(c.$$.fragment),_(e,"class","github-auth-error-url-container svelte-c4wp0y")},m(a,l){R(t,a,l),y(a,n,l),y(a,e,l),R(s,e,null),k(e,o),R(c,e,null),i=!0},p(a,l){const u={};16384&l&&(u.$$scope={dirty:l,ctx:a}),t.$set(u);const d={};16400&l&&(d.$$scope={dirty:l,ctx:a}),s.$set(d);const w={};16&l&&(w.text=a[4]),c.$set(w)},i(a){i||(m(t.$$.fragment,a),m(s.$$.fragment,a),m(c.$$.fragment,a),i=!0)},o(a){f(t.$$.fragment,a),f(s.$$.fragment,a),f(c.$$.fragment,a),i=!1},d(a){a&&(b(n),b(e)),L(t,a),L(s),L(c)}}}function Ms(r){let t;return{c(){t=T("Visit or copy the following URL in your browser to authenticate manually:")},m(n,e){y(n,t,e)},d(n){n&&b(t)}}}function zs(r){let t,n;return{c(){t=C("a"),n=T(r[4]),_(t,"href",r[4]),_(t,"target","_blank")},m(e,s){y(e,t,s),k(t,n)},p(e,s){16&s&&K(n,e[4]),16&s&&_(t,"href",e[4])},d(e){e&&b(t)}}}function Gs(r){let t;return{c(){t=T(r[3])},m(n,e){y(n,t,e)},p(n,e){8&e&&K(t,n[3])},d(n){n&&b(t)}}}function Ts(r){let t,n,e,s,o;const c=[Ls,Rs],i=[];function a(l,u){return l[0]?1:0}return e=a(r),s=i[e]=c[e](r),{c(){t=C("div"),n=C("div"),s.c(),_(n,"class","github-auth-button"),_(t,"class","github-auth-card svelte-c4wp0y")},m(l,u){y(l,t,u),k(t,n),i[e].m(n,null),o=!0},p(l,[u]){let d=e;e=a(l),e===d?i[e].p(l,u):(O(),f(i[d],1,1,()=>{i[d]=null}),V(),s=i[e],s?s.p(l,u):(s=i[e]=c[e](l),s.c()),m(s,1),s.m(n,null))},i(l){o||(m(s),o=!0)},o(l){f(s),o=!1},d(l){l&&b(t),i[e].d()}}}function Hs(r,t,n){const e=Dt(),s=Pt(hn.key);let o,c,i=!1,a=!1,l=!1,u=null,d=null;async function w(){if(!l){n(2,l=!0);try{const g=await s.revokeGithubAccess();g.success?(n(0,i=!1),e("authStateChange",{isAuthenticated:!1})):console.error("Failed to revoke GitHub access:",g.message)}catch(g){console.error("Error revoking GitHub access:",g)}finally{n(2,l=!1)}}}return ee(async()=>{await async function(){try{const g=await s.isGithubAuthenticated();g!==i?(n(0,i=g),e("authStateChange",{isAuthenticated:i})):n(0,i=g)}catch(g){console.error("Failed to check GitHub authentication status:",g),n(0,i=!1),e("authStateChange",{isAuthenticated:!1})}}()}),pn(()=>{u&&(clearTimeout(u),u=null),d&&(clearInterval(d),d=null)}),[i,a,l,o,c,()=>{},async function(){if(n(3,o=void 0),n(4,c=void 0),a)return n(1,a=!1),void(u&&(clearTimeout(u),u=null));n(1,a=!0);try{const{success:g,message:h,url:p}=await s.authenticateGithub();if(!g)throw n(4,c=p),new Error(h);d=setInterval(async()=>{try{await s.isGithubAuthenticated()&&(n(0,i=!0),n(1,a=!1),e("authStateChange",{isAuthenticated:!0}),d&&clearInterval(d),u&&(clearTimeout(u),u=null))}catch($){console.error("Failed to check GitHub authentication status:",$)}},5e3),u=setTimeout(()=>{d&&clearInterval(d),n(1,a=!1),u=null},6e4)}catch(g){console.error("Failed to authenticate with GitHub:",g),n(3,o=`Error: ${g instanceof Error?g.message:String(g)}`),n(1,a=!1)}},w,()=>{w()}]}class Os extends ot{constructor(t){super(),rt(this,t,Hs,Ts,ct,{})}}const Vs=r=>({}),Ve=r=>({});function qe(r,t,n){const e=r.slice();return e[27]=t[n],e[29]=n,e}const qs=r=>({item:64&r}),We=r=>({item:r[27]}),Ws=r=>({}),Ke=r=>({}),Ks=r=>({}),Xe=r=>({}),Xs=r=>({}),je=r=>({}),js=r=>({}),Je=r=>({}),Js=r=>({}),Ye=r=>({});function Ys(r){let t,n,e,s,o,c,i,a,l,u,d,w,g,h;const p=[to,Qs],$=[];function v(U,D){return U[4]?0:1}s=v(r),o=$[s]=p[s](r);const S=[no,eo],I=[];function G(U,D){return U[17].title?0:1}return a=G(r),l=I[a]=S[a](r),w=new dn({}),{c(){t=C("div"),n=C("div"),e=C("div"),o.c(),c=P(),i=C("span"),l.c(),u=P(),d=C("div"),x(w.$$.fragment),_(e,"class","c-searchable-dropdown__icon svelte-145zgu0"),_(i,"class","c-searchable-dropdown__button-text svelte-145zgu0"),_(n,"class","c-searchable-dropdown__icon-text svelte-145zgu0"),_(d,"class","c-searchable-dropdown__chevron svelte-145zgu0"),_(t,"class","c-searchable-dropdown__button svelte-145zgu0"),_(t,"role","button"),_(t,"tabindex",g=r[5]?-1:0),vt(t,"c-searchable-dropdown__button--disabled",r[5])},m(U,D){y(U,t,D),k(t,n),k(n,e),$[s].m(e,null),k(n,c),k(n,i),I[a].m(i,null),k(t,u),k(t,d),R(w,d,null),h=!0},p(U,D){let F=s;s=v(U),s===F?$[s].p(U,D):(O(),f($[F],1,1,()=>{$[F]=null}),V(),o=$[s],o?o.p(U,D):(o=$[s]=p[s](U),o.c()),m(o,1),o.m(e,null));let tt=a;a=G(U),a===tt?I[a].p(U,D):(O(),f(I[tt],1,1,()=>{I[tt]=null}),V(),l=I[a],l?l.p(U,D):(l=I[a]=S[a](U),l.c()),m(l,1),l.m(i,null)),(!h||32&D&&g!==(g=U[5]?-1:0))&&_(t,"tabindex",g),(!h||32&D)&&vt(t,"c-searchable-dropdown__button--disabled",U[5])},i(U){h||(m(o),m(l),m(w.$$.fragment,U),h=!0)},o(U){f(o),f(l),f(w.$$.fragment,U),h=!1},d(U){U&&b(t),$[s].d(),I[a].d(),L(w)}}}function Zs(r){let t,n,e,s,o,c,i,a;const l=r[18].searchIcon,u=X(l,r,r[25],Ye),d=u||function(g){let h;const p=g[18].icon,$=X(p,g,g[25],Je);return{c(){$&&$.c()},m(v,S){$&&$.m(v,S),h=!0},p(v,S){$&&$.p&&(!h||33554432&S)&&j($,p,v,v[25],h?Y(p,v[25],S,js):J(v[25]),Je)},i(v){h||(m($,v),h=!0)},o(v){f($,v),h=!1},d(v){$&&$.d(v)}}}(r);let w=r[17].inputButton&&Ze(r);return{c(){t=C("div"),n=C("div"),d&&d.c(),e=P(),s=C("input"),o=P(),w&&w.c(),_(n,"class","c-searchable-dropdown__icon svelte-145zgu0"),_(s,"type","text"),_(s,"class","c-searchable-dropdown__trigger-input svelte-145zgu0"),_(s,"placeholder",r[3]),_(t,"class","c-searchable-dropdown__input-container svelte-145zgu0")},m(g,h){y(g,t,h),k(t,n),d&&d.m(n,null),k(t,e),k(t,s),Re(s,r[0]),k(t,o),w&&w.m(t,null),c=!0,i||(a=[Bt(s,"input",r[21]),Bt(s,"input",r[22]),Bt(s,"click",Jt(r[19])),Bt(s,"mousedown",Jt(r[20]))],i=!0)},p(g,h){u?u.p&&(!c||33554432&h)&&j(u,l,g,g[25],c?Y(l,g[25],h,Js):J(g[25]),Ye):d&&d.p&&(!c||33554432&h)&&d.p(g,c?h:-1),(!c||8&h)&&_(s,"placeholder",g[3]),1&h&&s.value!==g[0]&&Re(s,g[0]),g[17].inputButton?w?(w.p(g,h),131072&h&&m(w,1)):(w=Ze(g),w.c(),m(w,1),w.m(t,null)):w&&(O(),f(w,1,1,()=>{w=null}),V())},i(g){c||(m(d,g),m(w),c=!0)},o(g){f(d,g),f(w),c=!1},d(g){g&&b(t),d&&d.d(g),w&&w.d(),i=!1,me(a)}}}function Qs(r){let t;const n=r[18].icon,e=X(n,r,r[25],Xe);return{c(){e&&e.c()},m(s,o){e&&e.m(s,o),t=!0},p(s,o){e&&e.p&&(!t||33554432&o)&&j(e,n,s,s[25],t?Y(n,s[25],o,Ks):J(s[25]),Xe)},i(s){t||(m(e,s),t=!0)},o(s){f(e,s),t=!1},d(s){e&&e.d(s)}}}function to(r){let t,n;return t=new Wt({props:{size:1,useCurrentColor:!0}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p:z,i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function eo(r){let t,n=(r[4]?r[11]:r[2])+"";return{c(){t=T(n)},m(e,s){y(e,t,s)},p(e,s){2068&s&&n!==(n=(e[4]?e[11]:e[2])+"")&&K(t,n)},i:z,o:z,d(e){e&&b(t)}}}function no(r){let t;const n=r[18].title,e=X(n,r,r[25],Ke);return{c(){e&&e.c()},m(s,o){e&&e.m(s,o),t=!0},p(s,o){e&&e.p&&(!t||33554432&o)&&j(e,n,s,s[25],t?Y(n,s[25],o,Ws):J(s[25]),Ke)},i(s){t||(m(e,s),t=!0)},o(s){f(e,s),t=!1},d(s){e&&e.d(s)}}}function Ze(r){let t;const n=r[18].inputButton,e=X(n,r,r[25],je);return{c(){e&&e.c()},m(s,o){e&&e.m(s,o),t=!0},p(s,o){e&&e.p&&(!t||33554432&o)&&j(e,n,s,s[25],t?Y(n,s[25],o,Xs):J(s[25]),je)},i(s){t||(m(e,s),t=!0)},o(s){f(e,s),t=!1},d(s){e&&e.d(s)}}}function so(r){let t,n,e,s;const o=[Zs,Ys],c=[];function i(a,l){return a[12]?0:1}return t=i(r),n=c[t]=o[t](r),{c(){n.c(),e=it()},m(a,l){c[t].m(a,l),y(a,e,l),s=!0},p(a,l){let u=t;t=i(a),t===u?c[t].p(a,l):(O(),f(c[u],1,1,()=>{c[u]=null}),V(),n=c[t],n?n.p(a,l):(n=c[t]=o[t](a),n.c()),m(n,1),n.m(e.parentNode,e))},i(a){s||(m(n),s=!0)},o(a){f(n),s=!1},d(a){a&&b(e),c[t].d(a)}}}function Qe(r){let t,n;return t=new pt.Content({props:{side:"bottom",align:"start",$$slots:{default:[uo]},$$scope:{ctx:r}}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p(e,s){const o={};33689298&s&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function oo(r){let t,n;return t=new pt.Item({props:{disabled:!0,$$slots:{default:[ao]},$$scope:{ctx:r}}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p(e,s){const o={};33555456&s&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function ro(r){let t,n,e=[],s=new Map,o=Qt(r[6]);const c=i=>i[27]===null?`null-item-${i[29]}`:i[8](i[27],i[29]);for(let i=0;i<o.length;i+=1){let a=qe(r,o,i),l=c(a);s.set(l,e[i]=tn(l,a))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();t=it()},m(i,a){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(i,a);y(i,t,a),n=!0},p(i,a){33620930&a&&(o=Qt(i[6]),O(),e=wn(e,a,c,1,i,o,s,t.parentNode,vn,tn,t,qe),V())},i(i){if(!n){for(let a=0;a<o.length;a+=1)m(e[a]);n=!0}},o(i){for(let a=0;a<e.length;a+=1)f(e[a]);n=!1},d(i){i&&b(t);for(let a=0;a<e.length;a+=1)e[a].d(i)}}}function co(r){let t,n;return t=new pt.Item({props:{disabled:!0,$$slots:{default:[lo]},$$scope:{ctx:r}}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p(e,s){const o={};33556480&s&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function ao(r){let t;return{c(){t=T(r[10])},m(n,e){y(n,t,e)},p(n,e){1024&e&&K(t,n[10])},d(n){n&&b(t)}}}function io(r){let t,n;const e=r[18].item,s=X(e,r,r[25],We),o=s||function(c){let i,a=c[7](c[27])+"";return{c(){i=T(a)},m(l,u){y(l,i,u)},p(l,u){192&u&&a!==(a=l[7](l[27])+"")&&K(i,a)},d(l){l&&b(i)}}}(r);return{c(){o&&o.c(),t=P()},m(c,i){o&&o.m(c,i),y(c,t,i),n=!0},p(c,i){s?s.p&&(!n||33554496&i)&&j(s,e,c,c[25],n?Y(e,c[25],i,qs):J(c[25]),We):o&&o.p&&(!n||192&i)&&o.p(c,n?i:-1)},i(c){n||(m(o,c),n=!0)},o(c){f(o,c),n=!1},d(c){c&&b(t),o&&o.d(c)}}}function tn(r,t){let n,e,s;function o(){return t[23](t[27])}return e=new pt.Item({props:{onSelect:o,highlight:t[9]?t[9](t[27],t[1]):!!t[1]&&t[7](t[1])===t[7](t[27]),$$slots:{default:[io]},$$scope:{ctx:t}}}),{key:r,first:null,c(){n=it(),x(e.$$.fragment),this.first=n},m(c,i){y(c,n,i),R(e,c,i),s=!0},p(c,i){t=c;const a={};64&i&&(a.onSelect=o),706&i&&(a.highlight=t[9]?t[9](t[27],t[1]):!!t[1]&&t[7](t[1])===t[7](t[27])),33554624&i&&(a.$$scope={dirty:i,ctx:t}),e.$set(a)},i(c){s||(m(e.$$.fragment,c),s=!0)},o(c){f(e.$$.fragment,c),s=!1},d(c){c&&b(n),L(e,c)}}}function lo(r){let t,n,e,s,o,c;return n=new Wt({props:{size:1,useCurrentColor:!0}}),{c(){t=C("div"),x(n.$$.fragment),e=P(),s=C("span"),o=T(r[11]),_(t,"class","c-searchable-dropdown__loading svelte-145zgu0")},m(i,a){y(i,t,a),R(n,t,null),k(t,e),k(t,s),k(s,o),c=!0},p(i,a){(!c||2048&a)&&K(o,i[11])},i(i){c||(m(n.$$.fragment,i),c=!0)},o(i){f(n.$$.fragment,i),c=!1},d(i){i&&b(t),L(n)}}}function en(r){let t;const n=r[18].footer,e=X(n,r,r[25],Ve);return{c(){e&&e.c()},m(s,o){e&&e.m(s,o),t=!0},p(s,o){e&&e.p&&(!t||33554432&o)&&j(e,n,s,s[25],t?Y(n,s[25],o,Vs):J(s[25]),Ve)},i(s){t||(m(e,s),t=!0)},o(s){f(e,s),t=!1},d(s){e&&e.d(s)}}}function uo(r){let t,n,e,s,o,c;const i=[co,ro,oo],a=[];function l(d,w){return d[4]?0:d[6].length>0?1:d[10]?2:-1}~(t=l(r))&&(n=a[t]=i[t](r));let u=r[17].footer&&en(r);return{c(){n&&n.c(),e=P(),u&&u.c(),s=P(),o=C("div"),Bn(o,"margin-bottom","var(--ds-spacing-2)")},m(d,w){~t&&a[t].m(d,w),y(d,e,w),u&&u.m(d,w),y(d,s,w),y(d,o,w),c=!0},p(d,w){let g=t;t=l(d),t===g?~t&&a[t].p(d,w):(n&&(O(),f(a[g],1,1,()=>{a[g]=null}),V()),~t?(n=a[t],n?n.p(d,w):(n=a[t]=i[t](d),n.c()),m(n,1),n.m(e.parentNode,e)):n=null),d[17].footer?u?(u.p(d,w),131072&w&&m(u,1)):(u=en(d),u.c(),m(u,1),u.m(s.parentNode,s)):u&&(O(),f(u,1,1,()=>{u=null}),V())},i(d){c||(m(n),m(u),c=!0)},o(d){f(n),f(u),c=!1},d(d){d&&(b(e),b(s),b(o)),~t&&a[t].d(d),u&&u.d(d)}}}function po(r){let t,n,e,s;t=new pt.Trigger({props:{$$slots:{default:[so]},$$scope:{ctx:r}}});let o=!r[5]&&Qe(r);return{c(){x(t.$$.fragment),n=P(),o&&o.c(),e=it()},m(c,i){R(t,c,i),y(c,n,i),o&&o.m(c,i),y(c,e,i),s=!0},p(c,i){const a={};33691709&i&&(a.$$scope={dirty:i,ctx:c}),t.$set(a),c[5]?o&&(O(),f(o,1,1,()=>{o=null}),V()):o?(o.p(c,i),32&i&&m(o,1)):(o=Qe(c),o.c(),m(o,1),o.m(e.parentNode,e))},i(c){s||(m(t.$$.fragment,c),m(o),s=!0)},o(c){f(t.$$.fragment,c),f(o),s=!1},d(c){c&&(b(n),b(e)),L(t,c),o&&o.d(c)}}}function $o(r){let t,n,e,s;function o(i){r[24](i)}let c={onOpenChange:r[14],$$slots:{default:[po]},$$scope:{ctx:r}};return r[13]!==void 0&&(c.requestClose=r[13]),n=new pt.Root({props:c}),bt.push(()=>_t(n,"requestClose",o)),{c(){t=C("div"),x(n.$$.fragment),_(t,"class","c-searchable-dropdown svelte-145zgu0")},m(i,a){y(i,t,a),R(n,t,null),s=!0},p(i,[a]){const l={};33693439&a&&(l.$$scope={dirty:a,ctx:i}),!e&&8192&a&&(e=!0,l.requestClose=i[13],yt(()=>e=!1)),n.$set(l)},i(i){s||(m(n.$$.fragment,i),s=!0)},o(i){f(n.$$.fragment,i),s=!1},d(i){i&&b(t),L(n)}}}function mo(r,t,n){let{$$slots:e={},$$scope:s}=t;const o=$e(e);let{title:c=""}=t,{placeholder:i="Search..."}=t,{isLoading:a=!1}=t,{disabled:l=!1}=t,{searchValue:u=""}=t,{items:d=[]}=t,{selectedItem:w=null}=t,{itemLabelFn:g=F=>(F==null?void 0:F.toString())||""}=t,{itemKeyFn:h=F=>(F==null?void 0:F.toString())||""}=t,{isItemSelected:p}=t,{noItemsLabel:$="No items found"}=t,{loadingLabel:v="Loading..."}=t,S=!1,I=()=>{};const G=Dt();function U(F){n(0,u=F),G("search",F)}function D(F){n(1,w=F),G("select",F),I()}return r.$$set=F=>{"title"in F&&n(2,c=F.title),"placeholder"in F&&n(3,i=F.placeholder),"isLoading"in F&&n(4,a=F.isLoading),"disabled"in F&&n(5,l=F.disabled),"searchValue"in F&&n(0,u=F.searchValue),"items"in F&&n(6,d=F.items),"selectedItem"in F&&n(1,w=F.selectedItem),"itemLabelFn"in F&&n(7,g=F.itemLabelFn),"itemKeyFn"in F&&n(8,h=F.itemKeyFn),"isItemSelected"in F&&n(9,p=F.isItemSelected),"noItemsLabel"in F&&n(10,$=F.noItemsLabel),"loadingLabel"in F&&n(11,v=F.loadingLabel),"$$scope"in F&&n(25,s=F.$$scope)},[u,w,c,i,a,l,d,g,h,p,$,v,S,I,function(F){if(!l){if(n(12,S=F),F&&w){const tt=g(w);n(0,u=tt),G("search",""),setTimeout(()=>{const nt=document.querySelector(".c-searchable-dropdown__trigger-input");nt&&nt.select()},0)}else F&&(n(0,u=""),G("search",""));G("openChange",F)}},U,D,o,e,function(F){jt.call(this,r,F)},function(F){jt.call(this,r,F)},function(){u=this.value,n(0,u)},F=>U(F.currentTarget.value),F=>D(F),function(F){I=F,n(13,I)},s]}class ue extends ot{constructor(t){super(),rt(this,t,mo,$o,ct,{title:2,placeholder:3,isLoading:4,disabled:5,searchValue:0,items:6,selectedItem:1,itemLabelFn:7,itemKeyFn:8,isItemSelected:9,noItemsLabel:10,loadingLabel:11})}}const te=class te{constructor(t,n=te._defaultPagesPerLoad){at(this,"_selectedRepo",Mt(void 0));at(this,"_selectedBranch",Mt(void 0));at(this,"_allRepos",Mt([]));at(this,"_allBranches",Mt([]));at(this,"_addedRepos",[]);at(this,"_error");at(this,"_isDevDeploy",!1);at(this,"_loadedBranchPages",0);at(this,"_hasMoreBranchPages",!1);at(this,"_lastUsedRepoUrl");at(this,"_lastUsedBranchName");this.gitRefModel=t,this._pagesPerLoad=n}get selectedRepo(){return this._selectedRepo}set selectedRepo(t){this._selectedRepo.set(t),this._allBranches.set([])}get selectedBranch(){return this._selectedBranch}set selectedBranch(t){this._selectedBranch.set(t)}get allRepos(){return this._allRepos}get allBranches(){return this._allBranches}get error(){return this._error}get isDevDeploy(){return this._isDevDeploy}set lastUsedRepoUrl(t){this._lastUsedRepoUrl=t}get lastUsedRepoUrl(){return this._lastUsedRepoUrl}set lastUsedBranchName(t){this._lastUsedBranchName=t}get lastUsedBranchName(){return this._lastUsedBranchName}async updateReposList(){const{repos:t,error:n,isDevDeploy:e}=await this.gitRefModel.listUserRepos();if(e)return this._isDevDeploy=!0,void this._allRepos.set(await this.fetchLocalRepos());if(n)this._error=n;else{this._isDevDeploy=e||!1;try{const s=await this.getCurrentWorkspaceRepo();if(s&&!t.some(o=>o.name===s.name&&o.owner===s.owner)){const{repo:o,error:c}=await this.gitRefModel.getGithubRepo(s);c?console.error("Failed to fetch GitHub repo:",c):o&&t.unshift(o)}}catch(s){console.error("Failed to fetch GitHub repo:",s)}this._allRepos.set([...this._addedRepos,...t])}}async preselectRepo(){if(Ct(this._selectedRepo))return;const t=s=>{const o=Ct(this._allRepos).find(c=>c.html_url===s);o&&this._selectedRepo.set(o)},n=await this.getCurrentWorkspaceRepo(),e=Ct(this._allRepos);if(n){const s=e.find(o=>o.name===n.name&&o.owner===n.owner);if(s)return void this._selectedRepo.set(s)}this._lastUsedRepoUrl?t(this._lastUsedRepoUrl):this._selectedRepo.set(e[0])}addRepo(t){this._addedRepos.push(t),this._allRepos.update(n=>n.some(e=>e.name===t.name&&e.owner===t.owner)?n:[t,...n])}async updateBranches(t=!1,n){return!!Ct(this._selectedRepo)&&(this._isDevDeploy?(this._allBranches.set(await this.fetchLocalBranches()),!1):(this._loadedBranchPages=0,this._hasMoreBranchPages=!1,this._allBranches.set([]),await this.updateBranchesAtPage(1,t,n),this._hasMoreBranchPages))}async loadMoreBranches(){return!!this._hasMoreBranchPages&&(await this.updateBranchesAtPage(this._loadedBranchPages+1),this._hasMoreBranchPages)}preselectBranch(){const t=Ct(this._selectedRepo);if(!t||Ct(this._selectedBranch))return!1;const n=Ct(this._allBranches);if(this._lastUsedBranchName){const e=n.find(s=>s.name===this._lastUsedBranchName);if(e)return this._selectedBranch.set(e),!0}if(t.default_branch){const e=n.find(s=>s.name===t.default_branch);return e?(this._selectedBranch.set(e),!0):(this._selectedBranch.set({name:t.default_branch,commit:{sha:"",url:""},protected:!1}),!0)}return this._selectedBranch.set(n[0]),!0}async fetchLocalRepos(){console.warn("Fetching repos from local git environment.");const{remoteUrl:t,error:n}=await this.gitRefModel.getRemoteUrl(),e=le(t);if(!e||n)return this._error=n??"Failed to parse remote URL in your local git repo.",[];const{owner:s,name:o}=e;return[{name:o,owner:s,html_url:t}]}async fetchLocalBranches(){console.warn("Fetching branches from local git environment.");const t=function(s){return s.filter(o=>o.isRemote)}((await this.gitRefModel.listBranches()).branches),n=t.find(s=>s.isDefault),e=s=>({name:yn(s.name),commit:{sha:"",url:""},protected:!1});return n&&this._selectedBranch.set(e(n)),t.map(e)}async getCurrentWorkspaceRepo(){const{remoteUrl:t,error:n}=await this.gitRefModel.getRemoteUrl();if(n)return;const e=le(t);if(!e)return;const{owner:s,name:o}=e;return{name:o,owner:s,html_url:t}}async updateBranchesAtPage(t,n=!1,e){const s=Ct(this._selectedRepo);if(s&&!(t<this._loadedBranchPages))do{if(s!==Ct(this._selectedRepo)){this._allBranches.set([]);break}const o=await this.gitRefModel.listRepoBranches(s,t);if(o.error){this._error=o.error;break}this._allBranches.update(c=>[...c,...o.branches]),t=o.nextPage,this._loadedBranchPages++,this._hasMoreBranchPages=o.hasNextPage,n&&this.preselectBranch()&&(e==null||e())}while(this._loadedBranchPages%this._pagesPerLoad!=0&&this._hasMoreBranchPages)}};at(te,"_defaultPagesPerLoad",20);let pe=te;function fo(r){let t,n,e;return n=new ne({props:{color:r[7],variant:"soft",size:2,$$slots:{default:[_o]},$$scope:{ctx:r}}}),{c(){t=C("div"),x(n.$$.fragment),_(t,"class","c-commit-ref-selector__error svelte-btbfel")},m(s,o){y(s,t,o),R(n,t,null),e=!0},p(s,o){const c={};128&o[0]&&(c.color=s[7]),8195&o[0]|512&o[2]&&(c.$$scope={dirty:o,ctx:s}),n.$set(c)},i(s){e||(m(n.$$.fragment,s),e=!0)},o(s){f(n.$$.fragment,s),e=!1},d(s){s&&b(t),L(n)}}}function go(r){var h;let t,n,e,s,o,c,i,a,l;function u(p){r[37](p)}let d={title:r[11],placeholder:"Search repositories or paste a GitHub URL...",itemKeyFn:Eo,isLoading:r[9],disabled:!r[17].length,items:r[8],selectedItem:r[4],itemLabelFn:Do,noItemsLabel:"No repositories found",loadingLabel:"Loading repositories...",$$slots:{searchIcon:[xo],icon:[yo]},$$scope:{ctx:r}};function w(p){r[42](p)}r[12]!==void 0&&(d.searchValue=r[12]),e=new ue({props:d}),bt.push(()=>_t(e,"searchValue",u)),e.$on("openChange",r[38]),e.$on("search",r[39]),e.$on("select",r[40]);let g={title:((h=r[5])==null?void 0:h.name)||"Choose branch...",itemKeyFn:Mo,placeholder:"Search branches...",isLoading:r[16],disabled:r[14],items:r[19],selectedItem:r[5],itemLabelFn:zo,noItemsLabel:r[2]?"":"No branches found",loadingLabel:"Loading branches...",$$slots:{footer:[Po],inputButton:[So],searchIcon:[Lo],icon:[Ro]},$$scope:{ctx:r}};return r[18]!==void 0&&(g.searchValue=r[18]),i=new ue({props:g}),bt.push(()=>_t(i,"searchValue",w)),i.$on("openChange",r[43]),i.$on("search",r[44]),i.$on("select",r[45]),{c(){t=C("div"),n=C("div"),x(e.$$.fragment),o=P(),c=C("div"),x(i.$$.fragment),_(n,"class","c-commit-ref-selector__selector svelte-btbfel"),_(c,"class","c-commit-ref-selector__selector svelte-btbfel"),_(t,"class","c-commit-ref-selector__selectors-container svelte-btbfel")},m(p,$){y(p,t,$),k(t,n),R(e,n,null),k(t,o),k(t,c),R(i,c,null),l=!0},p(p,$){var I;const v={};2048&$[0]&&(v.title=p[11]),512&$[0]&&(v.isLoading=p[9]),131072&$[0]&&(v.disabled=!p[17].length),256&$[0]&&(v.items=p[8]),16&$[0]&&(v.selectedItem=p[4]),512&$[2]&&(v.$$scope={dirty:$,ctx:p}),!s&&4096&$[0]&&(s=!0,v.searchValue=p[12],yt(()=>s=!1)),e.$set(v);const S={};32&$[0]&&(S.title=((I=p[5])==null?void 0:I.name)||"Choose branch..."),65536&$[0]&&(S.isLoading=p[16]),16384&$[0]&&(S.disabled=p[14]),524288&$[0]&&(S.items=p[19]),32&$[0]&&(S.selectedItem=p[5]),4&$[0]&&(S.noItemsLabel=p[2]?"":"No branches found"),1100&$[0]|512&$[2]&&(S.$$scope={dirty:$,ctx:p}),!a&&262144&$[0]&&(a=!0,S.searchValue=p[18],yt(()=>a=!1)),i.$set(S)},i(p){l||(m(e.$$.fragment,p),m(i.$$.fragment,p),l=!0)},o(p){f(e.$$.fragment,p),f(i.$$.fragment,p),l=!1},d(p){p&&b(t),L(e),L(i)}}}function ho(r){let t,n;return t=new Kt({props:{variant:"ghost",color:"warning",size:1,loading:r[1],class:"c-commit-ref-selector__fetch-button",$$slots:{iconLeft:[bo],default:[vo]},$$scope:{ctx:r}}}),t.$on("click",r[28]),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p(e,s){const o={};2&s[0]&&(o.loading=e[1]),512&s[2]&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function wo(r){let t,n;return t=new Os({}),t.$on("authStateChange",r[46]),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p:z,i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function vo(r){let t;return{c(){t=T("Reload available repos and branches")},m(n,e){y(n,t,e)},d(n){n&&b(t)}}}function bo(r){let t,n,e;return n=new fn({}),{c(){t=C("span"),x(n.$$.fragment),_(t,"slot","iconLeft"),_(t,"class","svelte-btbfel")},m(s,o){y(s,t,o),R(n,t,null),e=!0},p:z,i(s){e||(m(n.$$.fragment,s),e=!0)},o(s){f(n.$$.fragment,s),e=!1},d(s){s&&b(t),L(n)}}}function _o(r){let t,n,e,s,o,c,i;const a=[wo,ho],l=[];function u(d,w){return d[13]?1:0}return o=u(r),c=l[o]=a[o](r),{c(){t=C("div"),n=C("div"),e=T(r[0]),s=P(),c.c(),_(n,"class","c-commit-ref-selector__error-message svelte-btbfel"),_(t,"class","c-commit-ref-selector__error-content svelte-btbfel")},m(d,w){y(d,t,w),k(t,n),k(n,e),k(t,s),l[o].m(t,null),i=!0},p(d,w){(!i||1&w[0])&&K(e,d[0]);let g=o;o=u(d),o===g?l[o].p(d,w):(O(),f(l[g],1,1,()=>{l[g]=null}),V(),c=l[o],c?c.p(d,w):(c=l[o]=a[o](d),c.c()),m(c,1),c.m(t,null))},i(d){i||(m(c),i=!0)},o(d){f(c),i=!1},d(d){d&&b(t),l[o].d()}}}function yo(r){let t,n;return t=new de({props:{slot:"icon"}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p:z,i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function xo(r){let t,n;return t=new fe({props:{slot:"searchIcon"}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p:z,i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function Ro(r){let t,n;return t=new Pn({props:{slot:"icon"}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p:z,i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function Lo(r){let t,n;return t=new fe({props:{slot:"searchIcon"}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p:z,i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function Ao(r){let t,n;return t=new On({}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function Co(r){let t,n;return t=new se({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[Ao]},$$scope:{ctx:r}}}),t.$on("click",r[33]),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p(e,s){const o={};512&s[2]&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function So(r){let t,n,e;return n=new It({props:{content:"Refresh branches",triggerOn:[gn.Hover],nested:!1,$$slots:{default:[Co]},$$scope:{ctx:r}}}),{c(){t=C("div"),x(n.$$.fragment),_(t,"slot","inputButton"),_(t,"class","c-commit-ref-selector__refresh-button svelte-btbfel")},m(s,o){y(s,t,o),R(n,t,null),e=!0},p(s,o){const c={};512&o[2]&&(c.$$scope={dirty:o,ctx:s}),n.$set(c)},i(s){e||(m(n.$$.fragment,s),e=!0)},o(s){f(n.$$.fragment,s),e=!1},d(s){s&&b(t),L(n)}}}function Bo(r){let t,n,e,s,o,c,i;return e=new Wt({props:{size:1}}),c=new Lt({props:{size:2,color:"neutral",class:"c-commit-ref-selector__item-name",$$slots:{default:[Fo]},$$scope:{ctx:r}}}),{c(){t=C("div"),n=C("div"),x(e.$$.fragment),s=P(),o=C("div"),x(c.$$.fragment),_(n,"class","c-commit-ref-selector__item-icon svelte-btbfel"),_(o,"class","c-commit-ref-selector__item-content svelte-btbfel"),_(t,"class","c-commit-ref-selector__item c-commit-ref-selector__item--loading c-commit-ref-selector__item--disabled svelte-btbfel")},m(a,l){y(a,t,l),k(t,n),R(e,n,null),k(t,s),k(t,o),R(c,o,null),i=!0},p(a,l){const u={};512&l[2]&&(u.$$scope={dirty:l,ctx:a}),c.$set(u)},i(a){i||(m(e.$$.fragment,a),m(c.$$.fragment,a),i=!0)},o(a){f(e.$$.fragment,a),f(c.$$.fragment,a),i=!1},d(a){a&&b(t),L(e),L(c)}}}function ko(r){let t,n;return t=new It({props:{content:`${r[3].length} branches loaded`,triggerOn:[gn.Hover],nested:!1,$$slots:{default:[Io]},$$scope:{ctx:r}}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p(e,s){const o={};8&s[0]&&(o.content=`${e[3].length} branches loaded`),1092&s[0]|512&s[2]&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function Fo(r){let t;return{c(){t=T("Loading branches...")},m(n,e){y(n,t,e)},d(n){n&&b(t)}}}function Uo(r){let t;return{c(){t=T("Load more branches")},m(n,e){y(n,t,e)},d(n){n&&b(t)}}}function Io(r){let t,n,e,s,o,c,i,a,l;return e=new Wn({}),c=new Lt({props:{size:2,color:"neutral",class:"c-commit-ref-selector__item-name",$$slots:{default:[Uo]},$$scope:{ctx:r}}}),{c(){t=C("button"),n=C("div"),x(e.$$.fragment),s=P(),o=C("div"),x(c.$$.fragment),_(n,"class","c-commit-ref-selector__item-icon svelte-btbfel"),_(o,"class","c-commit-ref-selector__item-content svelte-btbfel"),_(t,"type","button"),_(t,"class","c-commit-ref-selector__item c-commit-ref-selector__item--loading svelte-btbfel")},m(u,d){y(u,t,d),k(t,n),R(e,n,null),k(t,s),k(t,o),R(c,o,null),i=!0,a||(l=Bt(t,"click",r[41]),a=!0)},p(u,d){const w={};512&d[2]&&(w.$$scope={dirty:d,ctx:u}),c.$set(w)},i(u){i||(m(e.$$.fragment,u),m(c.$$.fragment,u),i=!0)},o(u){f(e.$$.fragment,u),f(c.$$.fragment,u),i=!1},d(u){u&&b(t),L(e),L(c),a=!1,l()}}}function Po(r){let t,n,e,s;const o=[ko,Bo],c=[];function i(a,l){return a[10]&&!a[2]?0:a[2]?1:-1}return~(t=i(r))&&(n=c[t]=o[t](r)),{c(){n&&n.c(),e=it()},m(a,l){~t&&c[t].m(a,l),y(a,e,l),s=!0},p(a,l){let u=t;t=i(a),t===u?~t&&c[t].p(a,l):(n&&(O(),f(c[u],1,1,()=>{c[u]=null}),V()),~t?(n=c[t],n?n.p(a,l):(n=c[t]=o[t](a),n.c()),m(n,1),n.m(e.parentNode,e)):n=null)},i(a){s||(m(n),s=!0)},o(a){f(n),s=!1},d(a){a&&b(e),~t&&c[t].d(a)}}}function No(r){let t,n,e,s,o;const c=[go,fo],i=[];function a(l,u){return l[15]?l[15]?1:-1:0}return~(e=a(r))&&(s=i[e]=c[e](r)),{c(){t=C("div"),n=C("div"),s&&s.c(),_(n,"class","c-commit-ref-selector__content svelte-btbfel"),_(t,"class","c-commit-ref-selector svelte-btbfel")},m(l,u){y(l,t,u),k(t,n),~e&&i[e].m(n,null),o=!0},p(l,u){let d=e;e=a(l),e===d?~e&&i[e].p(l,u):(s&&(O(),f(i[d],1,1,()=>{i[d]=null}),V()),~e?(s=i[e],s?s.p(l,u):(s=i[e]=c[e](l),s.c()),m(s,1),s.m(n,null)):s=null)},i(l){o||(m(s),o=!0)},o(l){f(s),o=!1},d(l){l&&b(t),~e&&i[e].d()}}}const Eo=r=>`${r.owner}-${r.name}`,Do=r=>`${r.owner}/${r.name}`,Mo=(r,t)=>`${r.name}-${r.commit.sha}=${t}`,zo=r=>r.name.replace("origin/","");function Go(r,t,n){let e,s,o,c,i,a,l,u,d;const w=Pt(hn.key),g=Dt(),h=Pt(oe.key),p=new pe(w),$=p.allRepos;St(r,$,A=>n(17,c=A));const v=p.allBranches;St(r,v,A=>n(3,i=A));const S=p.selectedRepo;St(r,S,A=>n(4,a=A));const I=p.selectedBranch;St(r,I,A=>n(5,l=A));let{errorMessage:G=""}=t,{isLoading:U=!1}=t,{lastUsedBranchName:D=null}=t,{lastUsedRepoUrl:F=null}=t,tt="warning",nt=c,H=!1,st=!1,kt=!1;const ht=new Set;let E="Choose repository...",Z=!1;const wt=new Map;let Q=!1,lt="";const At=Mt("");function $t(A){n(12,lt=A),Z=!0,An(A)}St(r,At,A=>n(18,u=A));const Nt=Le(function(A){At.set(A),n(36,Q=!0)},300,{leading:!1,trailing:!0}),B={noRemoteBranches:"No remote branches found. Remote agents require remote branches to work properly. Please push your current branch to remote with 'git push -u origin <branch>'.",failedToFetchBranches:"Failed to fetch branches. Please try again.",failedToParseRemoteUrl:"Failed to parse remote URL in your local git repo. Please check your remote URL and try again.",failedToFetchFromRemote:"Failed to fetch from remote. Please try again."};ee(async()=>{await ce()});const M=kn([v,S,At],([A,N,ut])=>{if(Q&&ut.trim()!=="")return dt=ut,A.filter(ft=>ft.name.toLowerCase().includes(dt.toLowerCase()));if(N!=null&&N.default_branch)return[A.find(gt=>gt.name===(N==null?void 0:N.default_branch))||{name:N.default_branch,commit:{sha:"",url:""},protected:!1},...A.filter(gt=>gt.name!==(N==null?void 0:N.default_branch))];return A;var dt});async function q(){n(9,st=!0),await p.updateReposList(),function(){ht.clear();const A=new Set;c.forEach(N=>{A.has(N.name)?ht.add(N.name):A.add(N.name)})}(),await p.preselectRepo(),n(9,st=!1)}function mt(){S&&async function(){a&&(n(2,H=!0),n(10,kt=await p.updateBranches(!0,Xt)),n(2,H=!1))}().then(()=>{n(1,U=!1),e||Xt()}).catch(A=>{console.error("Error fetching all branches:",A),Et(`Failed to fetch branches: ${A instanceof Error?A.message:String(A)}`)})}St(r,M,A=>n(19,d=A));let W=!0;const Ft=async()=>{try{n(13,W=await w.isGithubAuthenticated()),W||Et("Please authenticate with GitHub to use this feature.","info")}catch(A){console.error("Failed to check GitHub authentication status:",A),Et("Please authenticate with GitHub to use this feature."),n(13,W=!1)}};async function re(){n(1,U=!0),n(15,e=!1),n(0,G=""),n(7,tt="warning");try{if(await Ft(),!W)return void n(1,U=!1);n(9,st=!0),n(2,H=!0),await q(),e||(n(9,st=!1),mt()),e||Xt()}catch(A){console.error("Error fetching git data:",A),Et(B.failedToFetchBranches)}finally{n(1,U=!1)}}async function ce(){n(1,U=!0);try{await re()}catch(A){console.error("Error fetching and syncing branches:",A),Et("Failed to fetch repos and branches. Please try again.")}finally{n(1,U=!1)}}function Et(A,N="warning"){console.error("Error:",A),n(15,e=!0),n(0,G=A),n(7,tt=N)}async function ge(A){n(6,p.selectedBranch=A,p),n(36,Q=!1),ve((l==null?void 0:l.name)??"");const N=h.creationMetrics;h.setCreationMetrics({changedRepo:(N==null?void 0:N.changedRepo)??!1,changedBranch:!0}),Xt();try{await h.reportRemoteAgentSetupWindowEvent(Ut.selectBranch)}catch(ut){console.error("Failed to report branch selection event:",ut)}}async function he(A){n(2,H=!0),n(6,p.selectedRepo=A,p),n(6,p.selectedBranch=void 0,p),Z=!1,Ln(""),mt();const N=h.creationMetrics;h.setCreationMetrics({changedRepo:!0,changedBranch:(N==null?void 0:N.changedBranch)??!1});try{await h.reportRemoteAgentSetupWindowEvent(Ut.selectRepo)}catch(ut){console.error("Failed to report repo selection event:",ut)}}function we(A,N){A||(N==="repo"?Z=!1:(N==="branch"||(Z=!1),n(36,Q=!1)))}function Xt(){if(!(a!=null&&a.html_url)||!l)return;const A={github_commit_ref:{repository_url:a.html_url,git_ref:l.name}};g("commitRefChange",{commitRef:A,selectedBranch:l})}const ve=A=>{At.set(A)},Ln=A=>{n(12,lt=A)},An=Le(async function(A=""){n(15,e=!1);try{if(Z){const N=A||lt;if(/^(?:https?:\/\/)?(?:www\.)?github\.com\/[^/]+\/[^/]+/.test(N)){const ut=le(N);if(ut){const{repo:dt,error:ft}=await w.getGithubRepo(ut);if(!ft){const gt=`${dt.owner}/${dt.name}`;return wt.has(gt)||(wt.set(gt,dt),p.addRepo(dt)),void n(8,nt=[dt])}}}n(8,nt=function(ut,dt){if(dt==="")return ut;const ft=dt.toLowerCase().split("/",2).filter(gt=>gt.length>0);return ut.filter(gt=>{const ye=gt.owner.toLowerCase(),xe=gt.name.toLowerCase();return ft.length===1?ye.includes(ft[0])||xe.includes(ft[0]):ft.length!==2||ft[0]===ye&&xe.includes(ft[1])})}(c,N))}else n(8,nt=c)}catch(N){console.error("Error fetching repos:",N),n(8,nt=[]),Et(B.failedToFetchFromRemote)}},300,{leading:!1,trailing:!0});function be(A){A&&o||we(A,"branch")}function _e(A){A&&!c.length||we(A,"repo")}return r.$$set=A=>{"errorMessage"in A&&n(0,G=A.errorMessage),"isLoading"in A&&n(1,U=A.isLoading),"lastUsedBranchName"in A&&n(34,D=A.lastUsedBranchName),"lastUsedRepoUrl"in A&&n(35,F=A.lastUsedRepoUrl)},r.$$.update=()=>{if(16&r.$$.dirty[1]&&n(6,p.lastUsedRepoUrl=F??void 0,p),8&r.$$.dirty[1]&&n(6,p.lastUsedBranchName=D??void 0,p),1&r.$$.dirty[0]&&n(15,e=G!==""),52&r.$$.dirty[0]&&n(16,s=a&&H&&!l),16&r.$$.dirty[0])if(a){const{owner:A,name:N}=a;n(11,E=ht.has(N)?`${A}/${N}`:N)}else n(11,E="Choose repository...");32&r.$$.dirty[0]|32&r.$$.dirty[1]&&ve(Q?"":(l==null?void 0:l.name)??""),24&r.$$.dirty[0]|32&r.$$.dirty[1]&&n(14,o=!a||!Q&&!i.length)},[G,U,H,i,a,l,p,tt,nt,st,kt,E,lt,W,o,e,s,c,u,d,$,v,S,I,At,$t,Nt,M,ce,ge,he,be,_e,function(){mt()},D,F,Q,function(A){lt=A,n(12,lt)},A=>_e(A.detail),A=>$t(A.detail),A=>he(A.detail),async()=>{n(2,H=!0),n(10,kt=await p.loadMoreBranches()),n(2,H=!1)},function(A){u=A,At.set(u)},A=>be(A.detail),A=>Nt(A.detail),A=>ge(A.detail),async A=>{const{isAuthenticated:N}=A.detail;N!==W&&(n(13,W=N),N&&await ce())}]}class To extends ot{constructor(t){super(),rt(this,t,Go,No,ct,{errorMessage:0,isLoading:1,lastUsedBranchName:34,lastUsedRepoUrl:35},null,[-1,-1,-1])}}function Ho(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},r[0]],s={};for(let o=0;o<e.length;o+=1)s=et(s,e[o]);return{c(){t=zt("svg"),n=new Gt(!0),this.h()},l(o){t=Tt(o,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var c=Ht(t);n=Ot(c,!0),c.forEach(b),this.h()},h(){n.a=null,xt(t,s)},m(o,c){Vt(o,t,c),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="m36.4 360.9-23 78.1L1 481.2c-2.5 8.5-.2 17.6 6 23.8s15.3 8.5 23.7 6.1L73 498.6l78.1-23c12.4-3.6 23.7-9.9 33.4-18.4 1.4-1.2 2.7-2.5 4-3.8l304.2-304.1c21.9-21.9 24.6-55.6 8.2-80.5-2.3-3.5-5.1-6.9-8.2-10l-39.4-39.5c-25-25-65.5-25-90.5 0L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4m46 13.5c1.7-5.6 4.5-10.8 8.4-15.2.6-.6 1.1-1.2 1.7-1.8L321 129l62 62-228.4 228.5c-4.7 4.7-10.6 8.2-17 10.1l-23.4 6.9-54.8 16.1 16.1-54.8z"/>',t)},p(o,[c]){xt(t,s=qt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&c&&o[0]]))},i:z,o:z,d(o){o&&b(t)}}}function Oo(r,t,n){return r.$$set=e=>{n(0,t=et(et({},t),Rt(e)))},[t=Rt(t)]}class Vo extends ot{constructor(t){super(),rt(this,t,Oo,Ho,ct,{})}}function qo(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},r[0]],s={};for(let o=0;o<e.length;o+=1)s=et(s,e[o]);return{c(){t=zt("svg"),n=new Gt(!0),this.h()},l(o){t=Tt(o,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var c=Ht(t);n=Ot(c,!0),c.forEach(b),this.h()},h(){n.a=null,xt(t,s)},m(o,c){Vt(o,t,c),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M234.7 42.7 197 56.8c-3 1.1-5 4-5 7.2s2 6.1 5 7.2l37.7 14.1 14.1 37.7c1.1 3 4 5 7.2 5s6.1-2 7.2-5l14.1-37.7L315 71.2c3-1.1 5-4 5-7.2s-2-6.1-5-7.2l-37.7-14.1L263.2 5c-1.1-3-4-5-7.2-5s-6.1 2-7.2 5zM461.4 48 496 82.6 386.2 192.3l-34.6-34.6zM80 429.4l237.7-237.7 34.6 34.6L114.6 464zM427.4 14.1 46.1 395.4c-18.7 18.7-18.7 49.1 0 67.9l34.6 34.6c18.7 18.7 49.1 18.7 67.9 0l381.3-381.4c18.7-18.7 18.7-49.1 0-67.9l-34.6-34.5c-18.7-18.7-49.1-18.7-67.9 0M7.5 117.2C3 118.9 0 123.2 0 128s3 9.1 7.5 10.8L64 160l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L128 160l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L128 96l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L64 96zm352 256c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L416 416l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L480 416l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L480 352l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L416 352z"/>',t)},p(o,[c]){xt(t,s=qt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},1&c&&o[0]]))},i:z,o:z,d(o){o&&b(t)}}}function Wo(r,t,n){return r.$$set=e=>{n(0,t=et(et({},t),Rt(e)))},[t=Rt(t)]}class Ko extends ot{constructor(t){super(),rt(this,t,Wo,qo,ct,{})}}const Xo=r=>({}),nn=r=>({});function sn(r){let t,n;const e=r[12].icon,s=X(e,r,r[11],nn);return{c(){t=C("div"),s&&s.c(),_(t,"class","c-setup-script-selector__icon svelte-19odcl0")},m(o,c){y(o,t,c),s&&s.m(t,null),n=!0},p(o,c){s&&s.p&&(!n||2048&c)&&j(s,e,o,o[11],n?Y(e,o[11],c,Xo):J(o[11]),nn)},i(o){n||(m(s,o),n=!0)},o(o){f(s,o),n=!1},d(o){o&&b(t),s&&s.d(o)}}}function jo(r){let t,n,e,s,o;return{c(){t=C("span"),n=T(r[0]),e=P(),s=C("span"),o=T(r[1]),_(t,"class","c-setup-script-selector__script-name svelte-19odcl0"),_(s,"class","c-setup-script-selector__script-path svelte-19odcl0")},m(c,i){y(c,t,i),k(t,n),y(c,e,i),y(c,s,i),k(s,o)},p(c,i){1&i&&K(n,c[0]),2&i&&K(o,c[1])},i:z,o:z,d(c){c&&(b(t),b(e),b(s))}}}function Jo(r){let t,n,e,s,o,c,i,a,l;function u(h){r[15](h)}function d(h){r[16](h)}let w={size:1,variant:"surface"};r[6]!==void 0&&(w.value=r[6]),r[5]!==void 0&&(w.textInput=r[5]),e=new Un({props:w}),bt.push(()=>_t(e,"value",u)),bt.push(()=>_t(e,"textInput",d)),e.$on("keydown",r[8]),e.$on("blur",r[9]);let g=r[7]&&function(h){let p;return{c(){p=C("span"),p.textContent=`${h[7]}`,_(p,"class","c-setup-script-selector__extension svelte-19odcl0")},m($,v){y($,p,v)},p:z,d($){$&&b(p)}}}(r);return{c(){t=C("div"),n=C("div"),x(e.$$.fragment),c=P(),g&&g.c(),_(n,"class","c-setup-script-selector__rename-input-container svelte-19odcl0"),_(n,"role","presentation"),_(t,"class","c-setup-script-selector__rename-input svelte-19odcl0"),_(t,"role","presentation")},m(h,p){y(h,t,p),k(t,n),R(e,n,null),k(n,c),g&&g.m(n,null),i=!0,a||(l=[Bt(t,"click",Jt(r[13])),Bt(t,"mousedown",Jt(r[14]))],a=!0)},p(h,p){const $={};!s&&64&p&&(s=!0,$.value=h[6],yt(()=>s=!1)),!o&&32&p&&(o=!0,$.textInput=h[5],yt(()=>o=!1)),e.$set($),h[7]&&g.p(h,p)},i(h){i||(m(e.$$.fragment,h),i=!0)},o(h){f(e.$$.fragment,h),i=!1},d(h){h&&b(t),L(e),g&&g.d(),a=!1,me(l)}}}function Yo(r){let t,n,e,s,o,c,i,a,l=r[10].icon&&sn(r);const u=[Jo,jo],d=[];function w(p,$){return p[3]?0:1}s=w(r),o=d[s]=u[s](r);const g=r[12].default,h=X(g,r,r[11],null);return{c(){t=C("div"),l&&l.c(),n=P(),e=C("div"),o.c(),c=P(),i=C("div"),h&&h.c(),_(e,"class","c-setup-script-selector__script-info svelte-19odcl0"),_(i,"class","c-setup-script-selector__script-actions svelte-19odcl0"),_(t,"class","c-setup-script-selector__script-item-content svelte-19odcl0"),_(t,"role","presentation"),vt(t,"c-setup-script-selector__script-item-content--renaming",r[3]),vt(t,"c-setup-script-selector__script-item-content--is-path",r[2]),vt(t,"c-setup-script-selector__script-item-content--selected",r[4])},m(p,$){y(p,t,$),l&&l.m(t,null),k(t,n),k(t,e),d[s].m(e,null),k(t,c),k(t,i),h&&h.m(i,null),a=!0},p(p,[$]){p[10].icon?l?(l.p(p,$),1024&$&&m(l,1)):(l=sn(p),l.c(),m(l,1),l.m(t,n)):l&&(O(),f(l,1,1,()=>{l=null}),V());let v=s;s=w(p),s===v?d[s].p(p,$):(O(),f(d[v],1,1,()=>{d[v]=null}),V(),o=d[s],o?o.p(p,$):(o=d[s]=u[s](p),o.c()),m(o,1),o.m(e,null)),h&&h.p&&(!a||2048&$)&&j(h,g,p,p[11],a?Y(g,p[11],$,null):J(p[11]),null),(!a||8&$)&&vt(t,"c-setup-script-selector__script-item-content--renaming",p[3]),(!a||4&$)&&vt(t,"c-setup-script-selector__script-item-content--is-path",p[2]),(!a||16&$)&&vt(t,"c-setup-script-selector__script-item-content--selected",p[4])},i(p){a||(m(l),m(o),m(h,p),a=!0)},o(p){f(l),f(o),f(h,p),a=!1},d(p){p&&b(t),l&&l.d(),d[s].d(),h&&h.d(p)}}}function Zo(r,t,n){let{$$slots:e={},$$scope:s}=t;const o=$e(e);let{name:c}=t,{path:i}=t,{isPath:a=!1}=t,{isRenaming:l=!1}=t,{isSelected:u=!1}=t;const d=Dt(),{baseName:w,extension:g}=function($){const v=$.lastIndexOf(".");return v===-1?{baseName:$,extension:""}:{baseName:$.substring(0,v),extension:$.substring(v)}}(c);let h,p=w;return r.$$set=$=>{"name"in $&&n(0,c=$.name),"path"in $&&n(1,i=$.path),"isPath"in $&&n(2,a=$.isPath),"isRenaming"in $&&n(3,l=$.isRenaming),"isSelected"in $&&n(4,u=$.isSelected),"$$scope"in $&&n(11,s=$.$$scope)},r.$$.update=()=>{40&r.$$.dirty&&l&&h&&setTimeout(()=>{h==null||h.focus(),h==null||h.select()},0)},[c,i,a,l,u,h,p,g,function($){if($.key!=="ArrowLeft"&&$.key!=="ArrowRight"&&$.key!=="ArrowUp"&&$.key!=="ArrowDown")if($.key==="Enter")if($.preventDefault(),p.trim()&&p!==w){const v=p.trim()+g;d("rename",{oldName:c,newName:v})}else d("cancelRename");else $.key==="Escape"&&($.preventDefault(),$.stopPropagation(),d("cancelRename"));else $.stopPropagation()},function(){d("cancelRename")},o,s,e,function($){jt.call(this,r,$)},function($){jt.call(this,r,$)},function($){p=$,n(6,p)},function($){h=$,n(5,h)}]}class Qo extends ot{constructor(t){super(),rt(this,t,Zo,Yo,ct,{name:0,path:1,isPath:2,isRenaming:3,isSelected:4})}}function on(r){let t,n,e,s,o,c,i,a,l,u;function d(g){r[36](g)}let w={placeholder:"Search scripts...",isLoading:r[1],disabled:!1,items:r[7],selectedItem:r[5],itemLabelFn:kr,itemKeyFn:Fr,isItemSelected:Ur,noItemsLabel:"No scripts found",loadingLabel:"Loading scripts...",$$slots:{item:[hr,({item:g})=>({46:g}),({item:g})=>[0,g?32768:0]],searchIcon:[ar],icon:[cr],title:[rr]},$$scope:{ctx:r}};return r[2]!==void 0&&(w.searchValue=r[2]),e=new ue({props:w}),bt.push(()=>_t(e,"searchValue",d)),e.$on("openChange",r[37]),e.$on("search",r[38]),e.$on("select",r[39]),i=new It({props:{content:r[10],nested:!1,$$slots:{default:[_r]},$$scope:{ctx:r}}}),l=new It({props:{content:"Open a new file for you to write a setup script that you can edit directly.",nested:!1,$$slots:{default:[Lr]},$$scope:{ctx:r}}}),{c(){t=C("div"),n=C("div"),x(e.$$.fragment),o=P(),c=C("div"),x(i.$$.fragment),a=P(),x(l.$$.fragment),_(c,"class","c-setup-script-selector__action-buttons svelte-3cd2r2"),_(n,"class","c-setup-script-selector__script-line svelte-3cd2r2"),_(t,"class","c-setup-script-selector__script-line-container svelte-3cd2r2")},m(g,h){y(g,t,h),k(t,n),R(e,n,null),k(n,o),k(n,c),R(i,c,null),k(c,a),R(l,c,null),u=!0},p(g,h){const p={};2&h[0]&&(p.isLoading=g[1]),128&h[0]&&(p.items=g[7]),32&h[0]&&(p.selectedItem=g[5]),888&h[0]|98304&h[1]&&(p.$$scope={dirty:h,ctx:g}),!s&&4&h[0]&&(s=!0,p.searchValue=g[2],yt(()=>s=!1)),e.$set(p);const $={};1024&h[0]&&($.content=g[10]),2048&h[0]|65536&h[1]&&($.$$scope={dirty:h,ctx:g}),i.$set($);const v={};65536&h[1]&&(v.$$scope={dirty:h,ctx:g}),l.$set(v)},i(g){u||(m(e.$$.fragment,g),m(i.$$.fragment,g),m(l.$$.fragment,g),u=!0)},o(g){f(e.$$.fragment,g),f(i.$$.fragment,g),f(l.$$.fragment,g),u=!1},d(g){g&&b(t),L(e),L(i),L(l)}}}function tr(r){let t,n;return t=new _n({props:{$$slots:{text:[nr]},$$scope:{ctx:r}}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p(e,s){const o={};8&s[0]|65536&s[1]&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function er(r){let t,n;return t=new _n({props:{$$slots:{grayText:[or],text:[sr]},$$scope:{ctx:r}}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p(e,s){const o={};768&s[0]|65536&s[1]&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function nr(r){let t,n;return{c(){t=C("span"),n=T(r[3]),_(t,"slot","text")},m(e,s){y(e,t,s),k(t,n)},p(e,s){8&s[0]&&K(n,e[3])},d(e){e&&b(t)}}}function sr(r){let t,n;return{c(){t=C("span"),n=T(r[9]),_(t,"slot","text")},m(e,s){y(e,t,s),k(t,n)},p(e,s){512&s[0]&&K(n,e[9])},d(e){e&&b(t)}}}function or(r){let t,n;return{c(){t=C("span"),n=T(r[8]),_(t,"slot","grayText")},m(e,s){y(e,t,s),k(t,n)},p(e,s){256&s[0]&&K(n,e[8])},d(e){e&&b(t)}}}function rr(r){let t,n,e,s;const o=[er,tr],c=[];function i(a,l){return a[4]?0:1}return n=i(r),e=c[n]=o[n](r),{c(){t=C("div"),e.c(),_(t,"slot","title")},m(a,l){y(a,t,l),c[n].m(t,null),s=!0},p(a,l){let u=n;n=i(a),n===u?c[n].p(a,l):(O(),f(c[u],1,1,()=>{c[u]=null}),V(),e=c[n],e?e.p(a,l):(e=c[n]=o[n](a),e.c()),m(e,1),e.m(t,null))},i(a){s||(m(e),s=!0)},o(a){f(e),s=!1},d(a){a&&b(t),c[n].d()}}}function cr(r){let t,n;return t=new bn({props:{slot:"icon"}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p:z,i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function ar(r){let t,n;return t=new fe({props:{slot:"searchIcon"}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p:z,i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function ir(r){var e;let t,n;return t=new Qo({props:{name:r[46].name,path:r[46].path,isPath:!0,isRenaming:((e=r[6])==null?void 0:e.path)===r[46].path,isSelected:!(!r[5]||r[5].path!==r[46].path),$$slots:{default:[gr]},$$scope:{ctx:r}}}),t.$on("rename",function(...s){return r[35](r[46],...s)}),t.$on("cancelRename",r[22]),{c(){x(t.$$.fragment)},m(s,o){R(t,s,o),n=!0},p(s,o){var i;r=s;const c={};32768&o[1]&&(c.name=r[46].name),32768&o[1]&&(c.path=r[46].path),64&o[0]|32768&o[1]&&(c.isRenaming=((i=r[6])==null?void 0:i.path)===r[46].path),32&o[0]|32768&o[1]&&(c.isSelected=!(!r[5]||r[5].path!==r[46].path)),98304&o[1]&&(c.$$scope={dirty:o,ctx:r}),t.$set(c)},i(s){n||(m(t.$$.fragment,s),n=!0)},o(s){f(t.$$.fragment,s),n=!1},d(s){L(t,s)}}}function lr(r){let t,n,e,s;return n=new bn({}),{c(){t=C("div"),x(n.$$.fragment),e=T(`
                  Use basic environment`),_(t,"class","c-setup-script-selector__basic-option svelte-3cd2r2")},m(o,c){y(o,t,c),R(n,t,null),k(t,e),s=!0},p:z,i(o){s||(m(n.$$.fragment,o),s=!0)},o(o){f(n.$$.fragment,o),s=!1},d(o){o&&b(t),L(n)}}}function ur(r){let t,n;return t=new Dn({}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function pr(r){let t,n;return t=new se({props:{size:1,variant:"ghost-block",class:"c-setup-script-selector__action-button",$$slots:{default:[ur]},$$scope:{ctx:r}}}),t.$on("click",function(...e){return r[32](r[46],...e)}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p(e,s){r=e;const o={};65536&s[1]&&(o.$$scope={dirty:s,ctx:r}),t.$set(o)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function $r(r){let t,n;return t=new Vo({}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function mr(r){let t,n;return t=new se({props:{size:1,variant:"ghost-block",class:"c-setup-script-selector__action-button",$$slots:{default:[$r]},$$scope:{ctx:r}}}),t.$on("click",function(...e){return r[33](r[46],...e)}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p(e,s){r=e;const o={};65536&s[1]&&(o.$$scope={dirty:s,ctx:r}),t.$set(o)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function dr(r){let t,n;return t=new Nn({}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function fr(r){let t,n;return t=new se({props:{size:1,variant:"ghost-block",class:"c-setup-script-selector__action-button",$$slots:{default:[dr]},$$scope:{ctx:r}}}),t.$on("click",function(...e){return r[34](r[46],...e)}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p(e,s){r=e;const o={};65536&s[1]&&(o.$$scope={dirty:s,ctx:r}),t.$set(o)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function gr(r){let t,n,e,s,o,c;return t=new It({props:{content:"Open script in editor",nested:!1,$$slots:{default:[pr]},$$scope:{ctx:r}}}),e=new It({props:{content:"Rename script",nested:!1,$$slots:{default:[mr]},$$scope:{ctx:r}}}),o=new It({props:{content:"Delete script",nested:!1,$$slots:{default:[fr]},$$scope:{ctx:r}}}),{c(){x(t.$$.fragment),n=P(),x(e.$$.fragment),s=P(),x(o.$$.fragment)},m(i,a){R(t,i,a),y(i,n,a),R(e,i,a),y(i,s,a),R(o,i,a),c=!0},p(i,a){const l={};98304&a[1]&&(l.$$scope={dirty:a,ctx:i}),t.$set(l);const u={};98304&a[1]&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const d={};98304&a[1]&&(d.$$scope={dirty:a,ctx:i}),o.$set(d)},i(i){c||(m(t.$$.fragment,i),m(e.$$.fragment,i),m(o.$$.fragment,i),c=!0)},o(i){f(t.$$.fragment,i),f(e.$$.fragment,i),f(o.$$.fragment,i),c=!1},d(i){i&&(b(n),b(s)),L(t,i),L(e,i),L(o,i)}}}function hr(r){let t,n,e,s;const o=[lr,ir],c=[];function i(a,l){return a[46]===null?0:1}return t=i(r),n=c[t]=o[t](r),{c(){n.c(),e=it()},m(a,l){c[t].m(a,l),y(a,e,l),s=!0},p(a,l){let u=t;t=i(a),t===u?c[t].p(a,l):(O(),f(c[u],1,1,()=>{c[u]=null}),V(),n=c[t],n?n.p(a,l):(n=c[t]=o[t](a),n.c()),m(n,1),n.m(e.parentNode,e))},i(a){s||(m(n),s=!0)},o(a){f(n),s=!1},d(a){a&&b(e),c[t].d(a)}}}function wr(r){let t,n;return{c(){t=T("Auto-generate"),n=C("span"),n.textContent="a script",_(n,"class","c-setup-script-selector__long-text svelte-3cd2r2")},m(e,s){y(e,t,s),y(e,n,s)},p:z,d(e){e&&(b(t),b(n))}}}function vr(r){let t,n;return t=new Ko({props:{slot:"iconLeft"}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p:z,i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function br(r){let t,n;return t=new mn({props:{slot:"iconRight"}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p:z,i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function _r(r){let t,n;return t=new Kt({props:{variant:"soft",color:"neutral",size:1,disabled:r[11],$$slots:{iconRight:[br],iconLeft:[vr],default:[wr]},$$scope:{ctx:r}}}),t.$on("click",r[15]),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p(e,s){const o={};2048&s[0]&&(o.disabled=e[11]),65536&s[1]&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function yr(r){let t,n,e;return{c(){t=T("Write "),n=C("span"),n.textContent="a script",e=T("by hand"),_(n,"class","c-setup-script-selector__long-text svelte-3cd2r2")},m(s,o){y(s,t,o),y(s,n,o),y(s,e,o)},p:z,d(s){s&&(b(t),b(n),b(e))}}}function xr(r){let t,n;return t=new Mn({props:{slot:"iconLeft"}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p:z,i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function Rr(r){let t,n;return t=new mn({props:{slot:"iconRight"}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p:z,i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function Lr(r){let t,n;return t=new Kt({props:{variant:"soft",color:"neutral",size:1,highlight:!1,$$slots:{iconRight:[Rr],iconLeft:[xr],default:[yr]},$$scope:{ctx:r}}}),t.$on("click",r[16]),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p(e,s){const o={};65536&s[1]&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function rn(r){let t,n,e;return n=new ne({props:{color:"warning",variant:"soft",size:2,$$slots:{default:[Sr]},$$scope:{ctx:r}}}),{c(){t=C("div"),x(n.$$.fragment),_(t,"class","c-setup-script-selector__error svelte-3cd2r2")},m(s,o){y(s,t,o),R(n,t,null),e=!0},p(s,o){const c={};3&o[0]|65536&o[1]&&(c.$$scope={dirty:o,ctx:s}),n.$set(c)},i(s){e||(m(n.$$.fragment,s),e=!0)},o(s){f(n.$$.fragment,s),e=!1},d(s){s&&b(t),L(n)}}}function Ar(r){let t;return{c(){t=T("Refresh")},m(n,e){y(n,t,e)},d(n){n&&b(t)}}}function Cr(r){let t,n,e;return n=new fn({}),{c(){t=C("span"),x(n.$$.fragment),_(t,"slot","iconLeft")},m(s,o){y(s,t,o),R(n,t,null),e=!0},p:z,i(s){e||(m(n.$$.fragment,s),e=!0)},o(s){f(n.$$.fragment,s),e=!1},d(s){s&&b(t),L(n)}}}function Sr(r){let t,n,e,s,o,c;return o=new Kt({props:{variant:"ghost",color:"warning",size:1,loading:r[1],$$slots:{iconLeft:[Cr],default:[Ar]},$$scope:{ctx:r}}}),o.$on("click",r[18]),{c(){t=C("div"),n=C("div"),e=T(r[0]),s=P(),x(o.$$.fragment),_(n,"class","c-setup-script-selector__error-message svelte-3cd2r2"),_(t,"class","c-setup-script-selector__error-content svelte-3cd2r2")},m(i,a){y(i,t,a),k(t,n),k(n,e),k(t,s),R(o,t,null),c=!0},p(i,a){(!c||1&a[0])&&K(e,i[0]);const l={};2&a[0]&&(l.loading=i[1]),65536&a[1]&&(l.$$scope={dirty:a,ctx:i}),o.$set(l)},i(i){c||(m(o.$$.fragment,i),c=!0)},o(i){f(o.$$.fragment,i),c=!1},d(i){i&&b(t),L(o)}}}function Br(r){let t,n,e,s,o=(!r[12]||r[0]===r[17].noScriptsFound)&&on(r),c=r[12]&&r[0]!==r[17].noScriptsFound&&rn(r);return{c(){t=C("div"),n=C("div"),o&&o.c(),e=P(),c&&c.c(),_(n,"class","c-setup-script-selector__content svelte-3cd2r2"),_(t,"class","c-setup-script-selector svelte-3cd2r2")},m(i,a){y(i,t,a),k(t,n),o&&o.m(n,null),k(n,e),c&&c.m(n,null),s=!0},p(i,a){i[12]&&i[0]!==i[17].noScriptsFound?o&&(O(),f(o,1,1,()=>{o=null}),V()):o?(o.p(i,a),4097&a[0]&&m(o,1)):(o=on(i),o.c(),m(o,1),o.m(n,e)),i[12]&&i[0]!==i[17].noScriptsFound?c?(c.p(i,a),4097&a[0]&&m(c,1)):(c=rn(i),c.c(),m(c,1),c.m(n,null)):c&&(O(),f(c,1,1,()=>{c=null}),V())},i(i){s||(m(o),m(c),s=!0)},o(i){f(o),f(c),s=!1},d(i){i&&b(t),o&&o.d(),c&&c.d()}}}const kr=r=>(r==null?void 0:r.name)||"",Fr=r=>`${r==null?void 0:r.path}-${r==null?void 0:r.location}-${r==null?void 0:r.name}`,Ur=(r,t)=>r===null&&t===null||!(!r||!t)&&r.path===t.path;function Ir(r,t,n){let e,s,o,c,i,a,l,u,d,w,{errorMessage:g=""}=t,{isLoading:h=!1}=t,{lastUsedScriptPath:p=null}=t,{disableNewAgentCreation:$=!1}=t;const v=Pt(oe.key);St(r,v,B=>n(31,w=B));const S=Dt(),I=Pt("chatModel").extensionClient,G=B=>{I.openFile({repoRoot:"",pathName:B.path,allowOutOfWorkspace:!0,openLocalUri:B.location==="home"})};let U=[],D="",F=null,tt=U,nt=!0;const H={noScriptsFound:"No setup scripts found. You can create one in ~/.augment/env/, <git root>/.augment/env/, or <workspace root>/.augment/env/.",failedToFetchScripts:"Failed to fetch setup scripts. Please try again."};async function st(){n(0,g="");try{const B=e==null?void 0:e.path;if(n(29,U=await v.listSetupScripts()),nt)if(p&&U.length>0){const M=U.find(q=>q.path===p);M&&(n(5,e=M),Nt())}else p===null&&(n(5,e=null),Nt());else if(B){const M=U.find(q=>q.path===B);M&&n(5,e=M)}nt=!1,U.length===0?n(0,g=H.noScriptsFound):n(0,g="")}catch(B){console.error("Error fetching setup scripts:",B),n(0,g=H.failedToFetchScripts)}}async function kt(B,M){M&&M.stopPropagation();try{const q=await v.deleteSetupScript(B.name,B.location);q.success?((e==null?void 0:e.path)===B.path&&$t(null),await st()):(console.error("Failed to delete script:",q.error),wt(`Failed to delete script: ${q.error||"Unknown error"}`))}catch(q){console.error("Error deleting script:",q),wt(`Error deleting script: ${q instanceof Error?q.message:String(q)}`)}}async function ht(B,M){M&&M.stopPropagation(),n(6,F=B)}async function E(B,M){const{oldName:q,newName:mt}=M.detail;try{const W=await v.renameSetupScript(q,mt,B.location);if(W.success){await st();const Ft=U.find(re=>re.path===W.path);Ft&&$t(Ft)}else console.error("Failed to rename script:",W.error),wt(`Failed to rename script: ${W.error||"Unknown error"}`)}catch(W){console.error("Error renaming script:",W),wt(`Error renaming script: ${W instanceof Error?W.message:String(W)}`)}finally{Z()}}function Z(){n(6,F=null)}function wt(B){n(0,g=B)}function Q(B){n(2,D=B)}function lt(B){$t(B)}function At(B){B&&(st(),n(2,D=""))}async function $t(B){if(n(5,e=B),Nt(),v.saveLastRemoteAgentSetup(null,null,(e==null?void 0:e.path)||null),B)try{await v.reportRemoteAgentSetupWindowEvent(Ut.selectSetupScript)}catch(M){console.error("Failed to report setup script selection event:",M)}}function Nt(){S("setupScriptChange",{script:e})}return ee(async()=>{var B;await st(),p===null?$t(null):(B=w.newAgentDraft)!=null&&B.setupScript&&!e&&$t(w.newAgentDraft.setupScript)}),r.$$set=B=>{"errorMessage"in B&&n(0,g=B.errorMessage),"isLoading"in B&&n(1,h=B.isLoading),"lastUsedScriptPath"in B&&n(27,p=B.lastUsedScriptPath),"disableNewAgentCreation"in B&&n(28,$=B.disableNewAgentCreation)},r.$$.update=()=>{var B,M,q;if(1&r.$$.dirty[1]&&n(5,e=((B=w.newAgentDraft)==null?void 0:B.setupScript)??null),1&r.$$.dirty[0]&&n(12,s=g!==""),268435456&r.$$.dirty[0]|1&r.$$.dirty[1]&&n(11,o=$||((M=w.newAgentDraft)==null?void 0:M.isDisabled)||!w.newAgentDraft),268435456&r.$$.dirty[0]|1&r.$$.dirty[1]&&n(10,c=w.newAgentDraft?(q=w.newAgentDraft)!=null&&q.isDisabled?"Please resolve the issues with your workspace selection":$?"Agent limit reached or other restrictions apply":"An AI agent will automatically generate a setup script for your project.":"Please select a repository and branch first"),536870916&r.$$.dirty[0])if(D.trim()!==""){const mt="Use basic environment".toLowerCase().includes(D.toLowerCase()),W=U.filter(Ft=>Ft.name.toLowerCase().includes(D.toLowerCase())||Ft.path.toLowerCase().includes(D.toLowerCase()));n(7,tt=mt?[null,...W]:W)}else n(7,tt=[null,...U]);34&r.$$.dirty[0]&&n(30,i=()=>h?"...":e?e.isGenerateOption?e.name:e.location==="home"?"~/.augment/env/"+e.name:e.path:"Use basic environment"),1073741824&r.$$.dirty[0]&&n(3,a=i()),32&r.$$.dirty[0]&&n(4,l=!!(e!=null&&e.path)),24&r.$$.dirty[0]&&n(9,u=l?a.split("/").pop():a),24&r.$$.dirty[0]&&n(8,d=l?a.slice(0,a.lastIndexOf("/")):"")},[g,h,D,a,l,e,F,tt,d,u,c,o,s,v,G,async()=>{try{await v.reportRemoteAgentSetupWindowEvent(Ut.autoGenerateSetupScript)}catch(B){console.error("Failed to auto-generate setup script event:",B)}try{const B=w.newAgentDraft;B&&v.setNewAgentDraft({...B,isSetupScriptAgent:!0});const M=await v.createRemoteAgentFromDraft("SETUP_MODE");return M&&v.setCurrentAgent(M),M}catch(B){console.error("Failed to select setup script generation:",B)}},async()=>{try{await v.reportRemoteAgentSetupWindowEvent(Ut.manuallyCreateSetupScript)}catch(B){console.error("Failed to report manually create setup script event:",B)}try{const B="setup.sh",M=`#!/bin/bash

# Setup Script for Remote Agent Environment
#
# This script installs dependencies and configures the environment for your project.
# It runs with sudo privileges when needed.
#
# Examples:
# sudo apt-get update && sudo apt-get install -y package-name
# pip install package-name
# npm install -g package-name
# export ENV_VAR=value

# Add your commands below:

`,q=await v.saveSetupScript(B,M,"home");if(q.success&&q.path){await st();const mt=U.find(W=>W.path===q.path);mt&&($t(mt),G(mt))}else console.error("Failed to create manual setup script:",q.error),n(0,g=`Failed to create manual setup script: ${q.error||"Unknown error"}`)}catch(B){console.error("Error creating manual setup script:",B),n(0,g=`Error creating manual setup script: ${B instanceof Error?B.message:String(B)}`)}},H,st,kt,ht,E,Z,Q,lt,At,$t,p,$,U,i,w,(B,M)=>{M.stopPropagation(),G(B),$t(B)},(B,M)=>{M.stopPropagation(),ht(B)},(B,M)=>{M.stopPropagation(),kt(B)},(B,M)=>E(B,M),function(B){D=B,n(2,D)},B=>At(B.detail),B=>Q(B.detail),B=>lt(B.detail)]}class Pr extends ot{constructor(t){super(),rt(this,t,Ir,Br,ct,{errorMessage:0,isLoading:1,lastUsedScriptPath:27,disableNewAgentCreation:28},null,[-1,-1])}}function Nr(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 320 512"},r[0]],s={};for(let o=0;o<e.length;o+=1)s=et(s,e[o]);return{c(){t=zt("svg"),n=new Gt(!0),this.h()},l(o){t=Tt(o,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var c=Ht(t);n=Ot(c,!0),c.forEach(b),this.h()},h(){n.a=null,xt(t,s)},m(o,c){Vt(o,t,c),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M48 112v288h48V112zm-48 0c0-26.5 21.5-48 48-48h48c26.5 0 48 21.5 48 48v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48zm224 0v288h48V112zm-48 0c0-26.5 21.5-48 48-48h48c26.5 0 48 21.5 48 48v288c0 26.5-21.5 48-48 48h-48c-26.5 0-48-21.5-48-48z"/>',t)},p(o,[c]){xt(t,s=qt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 320 512"},1&c&&o[0]]))},i:z,o:z,d(o){o&&b(t)}}}function Er(r,t,n){return r.$$set=e=>{n(0,t=et(et({},t),Rt(e)))},[t=Rt(t)]}class Dr extends ot{constructor(t){super(),rt(this,t,Er,Nr,ct,{})}}function cn(r){let t,n;return t=new ne({props:{color:"info",variant:"soft",size:2,$$slots:{icon:[Or],default:[Hr]},$$scope:{ctx:r}}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p(e,s){const o={};16414&s&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function Mr(r){let t;return{c(){t=T(r[4])},m(n,e){y(n,t,e)},p(n,e){16&e&&K(t,n[4])},d(n){n&&b(t)}}}function zr(r){let t,n;return t=new Gn({}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function Gr(r){let t,n;return t=new Dr({}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function Tr(r){let t,n,e,s;const o=[Gr,zr],c=[];function i(a,l){return a[1]?0:1}return n=i(r),e=c[n]=o[n](r),{c(){t=C("div"),e.c(),_(t,"slot","iconLeft")},m(a,l){y(a,t,l),c[n].m(t,null),s=!0},p(a,l){let u=n;n=i(a),n!==u&&(O(),f(c[u],1,1,()=>{c[u]=null}),V(),e=c[n],e||(e=c[n]=o[n](a),e.c()),m(e,1),e.m(t,null))},i(a){s||(m(e),s=!0)},o(a){f(e),s=!1},d(a){a&&b(t),c[n].d()}}}function Hr(r){let t,n,e,s,o,c,i=(r[2]?ae:ie).replace("%MAX_AGENTS%",(r[2]?r[3].maxRemoteAgents:r[3].maxActiveRemoteAgents).toString())+"";return o=new Kt({props:{variant:"soft",color:"neutral",size:1,$$slots:{iconLeft:[Tr],default:[Mr]},$$scope:{ctx:r}}}),o.$on("click",r[11]),{c(){t=C("div"),n=C("p"),e=T(i),s=P(),x(o.$$.fragment),_(n,"class","svelte-f3wuoa"),_(t,"class","agent-limit-message svelte-f3wuoa")},m(a,l){y(a,t,l),k(t,n),k(n,e),k(t,s),R(o,t,null),c=!0},p(a,l){(!c||12&l)&&i!==(i=(a[2]?ae:ie).replace("%MAX_AGENTS%",(a[2]?a[3].maxRemoteAgents:a[3].maxActiveRemoteAgents).toString())+"")&&K(e,i);const u={};16402&l&&(u.$$scope={dirty:l,ctx:a}),o.$set(u)},i(a){c||(m(o.$$.fragment,a),c=!0)},o(a){f(o.$$.fragment,a),c=!1},d(a){a&&b(t),L(o)}}}function Or(r){let t,n;return t=new zn({props:{slot:"icon"}}),{c(){x(t.$$.fragment)},m(e,s){R(t,e,s),n=!0},p:z,i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function Vr(r){let t,n,e=!!r[0]&&cn(r);return{c(){e&&e.c(),t=it()},m(s,o){e&&e.m(s,o),y(s,t,o),n=!0},p(s,[o]){s[0]?e?(e.p(s,o),1&o&&m(e,1)):(e=cn(s),e.c(),m(e,1),e.m(t.parentNode,t)):e&&(O(),f(e,1,1,()=>{e=null}),V())},i(s){n||(m(e),n=!0)},o(s){f(e),n=!1},d(s){s&&b(t),e&&e.d(s)}}}function an(r){if(!r)return;const t=r.is_setup_script_agent?"Setup script generation":r.session_summary||"";return{id:r.remote_agent_id,title:t.length>30?t.substring(0,27)+"...":t}}function ln(r,t){return r.replace("%MAX_AGENTS%",t.toString())}function qr(r,t,n){let e,s,o,{agentLimitErrorMessage:c}=t;const i=Pt(oe.key);St(r,i,$=>n(3,o=$));let a,l,u,d=!1,w=[];function g(){return o.agentOverviews.sort(($,v)=>new Date($.started_at).getTime()-new Date(v.started_at).getTime())}async function h(){if(!d&&(a!=null&&a.id))try{d=!0,await i.deleteAgent(a.id)}catch($){console.error("Failed to delete oldest agent:",$)}finally{d=!1}}async function p(){if(!d&&(l!=null&&l.id))try{d=!0,await i.pauseRemoteAgentWorkspace(l.id)}catch($){console.error("Failed to pause oldest active agent:",$)}finally{d=!1}}return r.$$set=$=>{"agentLimitErrorMessage"in $&&n(0,c=$.agentLimitErrorMessage)},r.$$.update=()=>{if(8&r.$$.dirty&&n(2,e=!!o.maxRemoteAgents&&o.agentOverviews.length>=o.maxRemoteAgents),8&r.$$.dirty&&n(1,s=!!o.maxActiveRemoteAgents&&o.agentOverviews.filter($=>$.workspace_status===Ae.workspaceRunning).length>=o.maxActiveRemoteAgents),1806&r.$$.dirty)if(e)n(10,w=g()),n(8,a=an(w[0])),n(0,c=ln(ae,o.maxRemoteAgents)),n(4,u="Delete Oldest Agent"+(a?`: ${a.title}`:""));else if(s){n(10,w=g());const $=w.filter(v=>v.workspace_status===Ae.workspaceRunning);n(9,l=an($[0])),n(0,c=ln(ie,o.maxActiveRemoteAgents)),n(4,u="Pause Oldest Agent"+(l?`: ${l.title}`:""))}else n(8,a=void 0),n(0,c=void 0)},[c,s,e,o,u,i,h,p,a,l,w,()=>{s?p():h()}]}class Wr extends ot{constructor(t){super(),rt(this,t,qr,Vr,ct,{agentLimitErrorMessage:0})}}function un(r){let t,n,e,s;return n=new ne({props:{color:"error",variant:"soft",size:2,$$slots:{default:[Kr]},$$scope:{ctx:r}}}),{c(){t=C("div"),x(n.$$.fragment),_(t,"class","error-message svelte-gbnap0")},m(o,c){y(o,t,c),R(n,t,null),s=!0},p(o,c){const i={};131080&c&&(i.$$scope={dirty:c,ctx:o}),n.$set(i)},i(o){s||(m(n.$$.fragment,o),o&&$n(()=>{s&&(e||(e=Yt(t,Zt,{y:10},!0)),e.run(1))}),s=!0)},o(o){f(n.$$.fragment,o),o&&(e||(e=Yt(t,Zt,{y:10},!1)),e.run(0)),s=!1},d(o){o&&b(t),L(n),o&&e&&e.end()}}}function Kr(r){let t,n=r[3].remoteAgentCreationError+"";return{c(){t=T(n)},m(e,s){y(e,t,s)},p(e,s){8&s&&n!==(n=e[3].remoteAgentCreationError+"")&&K(t,n)},d(e){e&&b(t)}}}function Xr(r){let t,n,e,s,o,c,i,a,l,u,d,w,g,h,p,$,v,S,I,G,U,D,F;function tt(E){r[14](E)}let nt={};r[2]!==void 0&&(nt.agentLimitErrorMessage=r[2]),i=new Wr({props:nt}),bt.push(()=>_t(i,"agentLimitErrorMessage",tt));let H=r[3].remoteAgentCreationError&&un(r);function st(E){r[15](E)}function kt(E){r[16](E)}let ht={lastUsedRepoUrl:r[4],lastUsedBranchName:r[5]};return r[0]!==void 0&&(ht.errorMessage=r[0]),r[1]!==void 0&&(ht.isLoading=r[1]),p=new To({props:ht}),bt.push(()=>_t(p,"errorMessage",st)),bt.push(()=>_t(p,"isLoading",kt)),p.$on("commitRefChange",r[8]),D=new Pr({props:{lastUsedScriptPath:r[6]}}),D.$on("setupScriptChange",r[9]),{c(){t=C("div"),n=C("div"),e=C("div"),e.innerHTML=`<p>Kick off a remote agent to work <strong class="svelte-gbnap0">in parallel</strong>, in an
        <strong class="svelte-gbnap0">isolated environment</strong>
        that will keep running, <strong class="svelte-gbnap0">even when you shut off your laptop</strong>.</p>`,s=P(),o=C("div"),c=C("div"),x(i.$$.fragment),u=P(),H&&H.c(),d=P(),w=C("div"),w.textContent="Start from any GitHub repo and branch:",g=P(),h=C("div"),x(p.$$.fragment),S=P(),I=C("div"),I.textContent=`Select a setup script to prepare the remote environment, so the agent can make better
        changes by running scripts, tests, and building your code:`,G=P(),U=C("div"),x(D.$$.fragment),_(e,"class","main-description svelte-gbnap0"),_(c,"class","error-message svelte-gbnap0"),_(w,"class","description svelte-gbnap0"),_(h,"class","commit-ref-selector svelte-gbnap0"),_(I,"class","description svelte-gbnap0"),_(U,"class","setup-script svelte-gbnap0"),_(o,"class","form-fields"),_(n,"class","content svelte-gbnap0"),_(t,"class","remote-agent-setup svelte-gbnap0")},m(E,Z){y(E,t,Z),k(t,n),k(n,e),k(n,s),k(n,o),k(o,c),R(i,c,null),k(o,u),H&&H.m(o,null),k(o,d),k(o,w),k(o,g),k(o,h),R(p,h,null),k(o,S),k(o,I),k(o,G),k(o,U),R(D,U,null),F=!0},p(E,[Z]){const wt={};!a&&4&Z&&(a=!0,wt.agentLimitErrorMessage=E[2],yt(()=>a=!1)),i.$set(wt),E[3].remoteAgentCreationError?H?(H.p(E,Z),8&Z&&m(H,1)):(H=un(E),H.c(),m(H,1),H.m(o,d)):H&&(O(),f(H,1,1,()=>{H=null}),V());const Q={};16&Z&&(Q.lastUsedRepoUrl=E[4]),32&Z&&(Q.lastUsedBranchName=E[5]),!$&&1&Z&&($=!0,Q.errorMessage=E[0],yt(()=>$=!1)),!v&&2&Z&&(v=!0,Q.isLoading=E[1],yt(()=>v=!1)),p.$set(Q);const lt={};64&Z&&(lt.lastUsedScriptPath=E[6]),D.$set(lt)},i(E){F||(m(i.$$.fragment,E),E&&$n(()=>{F&&(l||(l=Yt(c,Zt,{y:10},!0)),l.run(1))}),m(H),m(p.$$.fragment,E),m(D.$$.fragment,E),F=!0)},o(E){f(i.$$.fragment,E),E&&(l||(l=Yt(c,Zt,{y:10},!1)),l.run(0)),f(H),f(p.$$.fragment,E),f(D.$$.fragment,E),F=!1},d(E){E&&b(t),L(i),E&&l&&l.end(),H&&H.d(),L(p),L(D)}}}function jr(r,t,n){let e,s,o,c,i;const a=Pt(oe.key);St(r,a,p=>n(3,i=p));let l,u="",d=!1,w=null,g=null,h=null;return ee(async()=>{try{const p=await a.getLastRemoteAgentSetup();n(4,w=p.lastRemoteAgentGitRepoUrl),n(5,g=p.lastRemoteAgentGitBranch),n(6,h=p.lastRemoteAgentSetupScript),a.setHasEverUsedRemoteAgent(!0),await a.reportRemoteAgentEvent({eventName:In.setupPageOpened,remoteAgentId:"",eventData:{setupPageOpened:{}}}),await a.reportRemoteAgentSetupWindowEvent(Ut.open)}catch(p){console.error("Failed to load last remote agent setup:",p)}}),pn(async()=>{try{await a.reportRemoteAgentSetupWindowEvent(Ut.close)}catch(p){console.error("Failed to report remote agent setup window close event:",p)}a.setNewAgentDraft(null),a.setCreationMetrics(void 0)}),r.$$.update=()=>{var p,$;8&r.$$.dirty&&n(13,e=((p=i.newAgentDraft)==null?void 0:p.commitRef)??null),8&r.$$.dirty&&n(12,s=(($=i.newAgentDraft)==null?void 0:$.selectedBranch)??null),12295&r.$$.dirty&&n(11,o=(()=>{var I;const v=(I=e==null?void 0:e.github_commit_ref)==null?void 0:I.repository_url,S=s==null?void 0:s.name;return u||l||(d?"Loading repos and branches...":"")||!v&&"Please select a repository"||!S&&"Please select a branch"||(!(!d&&v&&S)&&v&&S?"Loading branch data...":"")||""})()),2048&r.$$.dirty&&n(10,c=!!o),1024&r.$$.dirty&&a.newAgentDraft&&a.newAgentDraft.isDisabled!==c&&a.setNewAgentDraft({...a.newAgentDraft,isDisabled:c})},[u,d,l,i,w,g,h,a,async function(p){a.setRemoteAgentCreationError(null);const $=a.newAgentDraft;$?a.setNewAgentDraft({...$,commitRef:p.detail.commitRef,selectedBranch:p.detail.selectedBranch,isDisabled:c}):a.setNewAgentDraft({commitRef:p.detail.commitRef,selectedBranch:p.detail.selectedBranch,setupScript:null,isDisabled:c,enableNotification:!0})},function(p){a.setRemoteAgentCreationError(null);const $=a.newAgentDraft;$?a.setNewAgentDraft({...$,setupScript:p.detail.script,isDisabled:c}):a.setNewAgentDraft({commitRef:null,selectedBranch:null,setupScript:p.detail.script,isDisabled:c,enableNotification:!0})},c,o,s,e,function(p){l=p,n(2,l)},function(p){u=p,n(0,u)},function(p){d=p,n(1,d)}]}class Kc extends ot{constructor(t){super(),rt(this,t,jr,Xr,ct,{})}}export{Kc as default};
