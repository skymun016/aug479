const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-DJGUS2rb.js","./SpinnerAugment-CCR7AGk-.js","./SpinnerAugment-DnPofOlT.css","./index-B60hMJvm.js","./index-McRKs1sU.css","./RemoteAgentSetup-DKM6LRSZ.js","./CalloutAugment-D1eOn47Z.js","./CalloutAugment-Dvw-pMXw.css","./index-DaLJ_QUV.js","./message-broker-D_dlQCzo.js","./IconButtonAugment-CVWbWfwx.js","./IconButtonAugment-Bjt0RBxO.css","./async-messaging-BnYTstSc.js","./TextTooltipAugment-QVDAcl-O.js","./TextTooltipAugment-BiroygYm.css","./CardAugment-Cjl8BxE0.js","./CardAugment-BuBr3xQZ.css","./BaseTextInput-BomIiYnE.js","./BaseTextInput-DuK8hbkY.css","./index-BYh6wkDD.css","./index-BHzmr0EY.js","./ButtonAugment-JhlUwgSi.js","./ButtonAugment-zn72hvQy.css","./mcp-logo-CwhjBp6K.js","./chevron-down-Di3C5ykp.js","./types-CGlLNakm.js","./file-paths-BhRi9crS.js","./AugmentMessage-DFC62z0i.js","./folder-opened-D6WrI8wv.js","./folder-opened-hTsrGIsd.css","./diff-utils-C44al88x.js","./LanguageIcon-7PvQ76S5.js","./preload-helper-Dv6uf1Os.js","./LanguageIcon-CbFzDG5Z.css","./diff-utils-DTcQ2vsq.css","./keypress-DD1aQVr0.js","./await_block-B-Au3vut.js","./chat-context-CfYmajw8.js","./types-DDm27S8B.js","./utils-DRvqjT1k.js","./ra-diff-ops-model-CfFedGkc.js","./CollapseButtonAugment-DvFOUTxy.js","./CollapseButtonAugment-CLLTFP8m.css","./MaterialIcon-BiH6zpoH.js","./MaterialIcon-BO_oU5T3.css","./CopyButton-COVKPqeG.js","./copy-CzH8IZOA.js","./copy-Do68LBjG.css","./CopyButton-B0_wR17F.css","./ellipsis-DUJFhkV3.js","./IconFilePath-C7r3gamb.js","./next-edit-types-904A5ehg.js","./IconFilePath-CiKel2Kp.css","./Filespan-Dq3a1CK8.js","./Filespan-uhpSTama.css","./terminal-CqA-6nrc.js","./pen-to-square-CrZjDplM.js","./augment-logo-Bf5bIaNf.js","./TextAreaAugment-20MWk3hd.js","./TextAreaAugment-J75lFxU7.css","./AugmentMessage-aRc2it8e.css","./Keybindings-BZOppcAY.js","./exclamation-triangle-CGK58Qw5.js","./Keybindings-B3GNznvw.css","./StatusIndicator-CIXxye0K.js","./StatusIndicator-D-yOSWp9.css","./sound-model-Hh6Xs8ht.js","./sound-model-Df_FYENN.css","./design-system-init-B0YNj4mb.js","./design-system-init-Be7obQsv.css","./check-whOCP5so.js","./expand-BukPCaok.js","./VSCodeCodicon-D6TsidP1.js","./VSCodeCodicon-DVaocTud.css","./chat-flags-model-B-EOBEov.js","./RemoteAgentSetup-Donjl7aW.css"])))=>i.map(i=>d[i]);
var gf=Object.defineProperty;var hf=(s,t,n)=>t in s?gf(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n;var $t=(s,t,n)=>hf(s,typeof t!="symbol"?t+"":t,n);import{al as re,S as ct,i as lt,s as it,J as Xt,D,X as z,b as k,c as _,d as P,q as Y,t as $,r as K,u as d,K as Jt,L as Zt,M as Qt,e as y,E as g,F as h,G as v,n as N,N as gt,a1 as rn,a0 as V,a2 as ht,a as ne,Y as oe,ak as On,A as Fe,ag as Mt,ah as kt,ad as xe,V as xt,a6 as Et,ar as nr,aA as qo,a8 as Ye,T as Ot,a9 as hn,Z as Gt,ai as Tn,av as rc,ac as sr,aw as Li,at as vn,f as It,h as Ue,aa as Cr,W as Hs,j as ae,a4 as En,H as ln,w as un,x as dn,y as $n,g as ue,z as mn,R as vf,Q as wf,_ as ke,$ as De,ab as qn,k as yf,l as xf,U as bf,a7 as Lo,ax as ho,az as Ur,am as dp,a5 as vr,a3 as wr,aj as Fn,I as $p,ae as _n,af as cn,aD as Ri}from"./SpinnerAugment-CCR7AGk-.js";import{C as Ar,P as Ji,a as _f,B as ao,F as mp,L as Cf,d as Af,b as pp,T as Mf,c as sc}from"./sound-model-Hh6Xs8ht.js";import"./design-system-init-B0YNj4mb.js";import{W as Xe,I as se,e as ee,h as xn,i as fp,g as kf,u as Mr,o as ns,d as Sf,O as zn,c as Tf,M as Br}from"./IconButtonAugment-CVWbWfwx.js";import{c as ic,L as Di,C as Hr,a as Ef,P as Ss,M as oi}from"./message-broker-D_dlQCzo.js";import{m as hr,K as If,L as Oo,N as ac,d as Ro,f as ye,D as yt,O as Ai,P as Mi,b as Pi,c as Ni,Q as gp,B as jr,l as Lf,U as Wr,V as Vr,T as os,X as mr,Y as tr,Z as Bo,e as Rf,_ as hp,z as Df,G as Eo}from"./index-DaLJ_QUV.js";import{bA as Io,bB as vp,bC as yr,bD as Us,bE as ri,bF as wp,bG as qs,bH as Pf,bI as ir,bJ as wo,bK as cc,bL as co,aV as xr,bM as yp,bN as Nf,bO as Zi,bP as Ff,bQ as zf,aJ as Of,bR as Bf,bS as xp,bT as Hf,bU as Uf,bV as Qi,bW as bp,bX as Gr,bY as qf,bZ as Kn,b_ as Ts,b$ as jf,c0 as Wf,c1 as Vf,c2 as Gf,c3 as Yf,c4 as ki,c5 as _p,c6 as Kf,c7 as Xf,c8 as si,c9 as Cp,ca as ta,cb as Ap,cc as ii,cd as lc,ce as Mp,cf as Jf,cg as Zf,ch as kp,ci as Qf,aL as tg,aK as eg,cj as ng,ck as og}from"./AugmentMessage-DFC62z0i.js";import{b as Yr,a as Ve,i as ea,c as gn,d as rg,e as go,f as Sn,g as uc,h as sg,j as ig,k as ag,m as qr,n as Fi,r as cg,N as or,o as ai,p as zi,t as lg,T as ug,q as dg,s as $g,u as mg,v as na,w as oa,x as ra,y as sa,z as ci,B as ia,D as aa,F as Sp,G as ca,H as Tp,I as Ep,J as pg,K as fg,M as Kr,O as Ip,U as Lp,P as Rp,Q as Dp,V as gg,l as hg,W as Pp,X as vg,Y as Np,Z as Oi,_ as Xr,$ as Fp,a0 as dc,a1 as $c,S as js,a2 as Ws,a3 as mc,a4 as wg,A as zp}from"./chevron-down-Di3C5ykp.js";import{a as Ge,R as Jr,b as pr}from"./types-DDm27S8B.js";import{b as la,T as rs,a as yg,S as Op,v as xg,c as bg}from"./StatusIndicator-CIXxye0K.js";import{R as pc}from"./ra-diff-ops-model-CfFedGkc.js";import{R as on,g as _g,S as Bp,s as Cg}from"./chat-context-CfYmajw8.js";import{C as no}from"./CalloutAugment-D1eOn47Z.js";import{M as ar,C as Ag,d as Mg,O as Hp,P as kg,e as Sg,f as fc}from"./diff-utils-C44al88x.js";import{B as he}from"./ButtonAugment-JhlUwgSi.js";import{E as Jn}from"./exclamation-triangle-CGK58Qw5.js";import"./IconFilePath-C7r3gamb.js";import{T as Nt,a as te,H as Tg,o as Eg,t as Ig}from"./TextTooltipAugment-QVDAcl-O.js";import{g as li,h as Lg,N as Rg,m as Dg,n as Pg,i as Ng,j as Fg,a as ua,A as gc,R as zg,B as Og,P as Bg,b as Hg,C as Up,c as Ug,G as qg,d as jg,T as da,k as Wg,M as rr,e as kr,K as qp,f as jp,E as Vg}from"./Keybindings-BZOppcAY.js";import{e as Gg,l as Zr,C as Po,i as Wp,R as Yg,G as Kg,U as Xg}from"./mcp-logo-CwhjBp6K.js";import{h as Vs,u as Vp}from"./await_block-B-Au3vut.js";import{i as Jg,e as hc,g as Bi}from"./file-paths-BhRi9crS.js";import{K as Qr,F as Gp,a as $a,P as Yp,C as ma}from"./folder-opened-D6WrI8wv.js";import{C as pa}from"./check-whOCP5so.js";import{F as Cn}from"./Filespan-Dq3a1CK8.js";import{T as Zg,a as ui,C as ss}from"./CollapseButtonAugment-DvFOUTxy.js";import{E as cr}from"./ellipsis-DUJFhkV3.js";import{_ as Kp}from"./preload-helper-Dv6uf1Os.js";import{o as yo}from"./keypress-DD1aQVr0.js";import{t as Gs}from"./index-B60hMJvm.js";import{M as Sr}from"./MaterialIcon-BiH6zpoH.js";import{b as Qg,c as t0,s as e0,a as n0}from"./utils-DRvqjT1k.js";import{E as o0}from"./expand-BukPCaok.js";import{P as Tr}from"./pen-to-square-CrZjDplM.js";import{C as r0}from"./CardAugment-Cjl8BxE0.js";import{M as Xp,S as s0}from"./index-DJGUS2rb.js";import{a as Es,c as i0,s as xo,f as gr}from"./index-BHzmr0EY.js";import{T as Jp}from"./terminal-CqA-6nrc.js";import{V as Zp}from"./VSCodeCodicon-D6TsidP1.js";import{C as vc}from"./types-CGlLNakm.js";import{A as a0}from"./augment-logo-Bf5bIaNf.js";import{C as Qp,E as t1}from"./chat-flags-model-B-EOBEov.js";import"./async-messaging-BnYTstSc.js";import"./BaseTextInput-BomIiYnE.js";import"./CopyButton-COVKPqeG.js";import"./copy-CzH8IZOA.js";import"./LanguageIcon-7PvQ76S5.js";import"./TextAreaAugment-20MWk3hd.js";import"./next-edit-types-904A5ehg.js";function Do(s){return Array.isArray?Array.isArray(s):o1(s)==="[object Array]"}const c0=1/0;function l0(s){return s==null?"":function(t){if(typeof t=="string")return t;let n=t+"";return n=="0"&&1/t==-c0?"-0":n}(s)}function vo(s){return typeof s=="string"}function e1(s){return typeof s=="number"}function u0(s){return s===!0||s===!1||function(t){return n1(t)&&t!==null}(s)&&o1(s)=="[object Boolean]"}function n1(s){return typeof s=="object"}function Xn(s){return s!=null}function Si(s){return!s.trim().length}function o1(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(s)}const d0=s=>`Missing ${s} property in key`,$0=s=>`Property 'weight' in key '${s}' must be a positive integer`,wc=Object.prototype.hasOwnProperty;class m0{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(e=>{let o=r1(e);this._keys.push(o),this._keyMap[o.id]=o,n+=o.weight}),this._keys.forEach(e=>{e.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function r1(s){let t=null,n=null,e=null,o=1,r=null;if(vo(s)||Do(s))e=s,t=yc(s),n=Hi(s);else{if(!wc.call(s,"name"))throw new Error(d0("name"));const i=s.name;if(e=i,wc.call(s,"weight")&&(o=s.weight,o<=0))throw new Error($0(i));t=yc(i),n=Hi(i),r=s.getFn}return{path:t,id:n,weight:o,src:e,getFn:r}}function yc(s){return Do(s)?s:s.split(".")}function Hi(s){return Do(s)?s.join("."):s}var de={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(s,t)=>s.score===t.score?s.idx<t.idx?-1:1:s.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,useExtendedSearch:!1,getFn:function(s,t){let n=[],e=!1;const o=(r,i,c)=>{if(Xn(r))if(i[c]){const a=r[i[c]];if(!Xn(a))return;if(c===i.length-1&&(vo(a)||e1(a)||u0(a)))n.push(l0(a));else if(Do(a)){e=!0;for(let l=0,u=a.length;l<u;l+=1)o(a[l],i,c+1)}else i.length&&o(a,i,c+1)}else n.push(r)};return o(s,vo(t)?t.split("."):t,0),e?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};const p0=/[^ ]+/g;class fa{constructor({getFn:t=de.getFn,fieldNormWeight:n=de.fieldNormWeight}={}){this.norm=function(e=1,o=3){const r=new Map,i=Math.pow(10,o);return{get(c){const a=c.match(p0).length;if(r.has(a))return r.get(a);const l=1/Math.pow(a,.5*e),u=parseFloat(Math.round(l*i)/i);return r.set(a,u),u},clear(){r.clear()}}}(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,e)=>{this._keysMap[n.id]=e})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,vo(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();vo(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,e=this.size();n<e;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!Xn(t)||Si(t))return;let e={v:t,i:n,n:this.norm.get(t)};this.records.push(e)}_addObject(t,n){let e={i:n,$:{}};this.keys.forEach((o,r)=>{let i=o.getFn?o.getFn(t):this.getFn(t,o.path);if(Xn(i)){if(Do(i)){let c=[];const a=[{nestedArrIndex:-1,value:i}];for(;a.length;){const{nestedArrIndex:l,value:u}=a.pop();if(Xn(u))if(vo(u)&&!Si(u)){let m={v:u,i:l,n:this.norm.get(u)};c.push(m)}else Do(u)&&u.forEach((m,p)=>{a.push({nestedArrIndex:p,value:m})})}e.$[r]=c}else if(vo(i)&&!Si(i)){let c={v:i,n:this.norm.get(i)};e.$[r]=c}}}),this.records.push(e)}toJSON(){return{keys:this.keys,records:this.records}}}function s1(s,t,{getFn:n=de.getFn,fieldNormWeight:e=de.fieldNormWeight}={}){const o=new fa({getFn:n,fieldNormWeight:e});return o.setKeys(s.map(r1)),o.setSources(t),o.create(),o}function Is(s,{errors:t=0,currentLocation:n=0,expectedLocation:e=0,distance:o=de.distance,ignoreLocation:r=de.ignoreLocation}={}){const i=t/s.length;if(r)return i;const c=Math.abs(e-n);return o?i+c/o:c?1:i}const er=32;function f0(s,t,n,{location:e=de.location,distance:o=de.distance,threshold:r=de.threshold,findAllMatches:i=de.findAllMatches,minMatchCharLength:c=de.minMatchCharLength,includeMatches:a=de.includeMatches,ignoreLocation:l=de.ignoreLocation}={}){if(t.length>er)throw new Error(`Pattern length exceeds max of ${er}.`);const u=t.length,m=s.length,p=Math.max(0,Math.min(e,m));let f=r,x=p;const A=c>1||a,C=A?Array(m):[];let M;for(;(M=s.indexOf(t,x))>-1;){let H=Is(t,{currentLocation:M,expectedLocation:p,distance:o,ignoreLocation:l});if(f=Math.min(H,f),x=M+u,A){let J=0;for(;J<u;)C[M+J]=1,J+=1}}x=-1;let S=[],L=1,I=u+m;const X=1<<u-1;for(let H=0;H<u;H+=1){let J=0,U=I;for(;J<U;)Is(t,{errors:H,currentLocation:p+U,expectedLocation:p,distance:o,ignoreLocation:l})<=f?J=U:I=U,U=Math.floor((I-J)/2+J);I=U;let O=Math.max(1,p-U+1),Z=i?m:Math.min(p+U,m)+u,et=Array(Z+2);et[Z+1]=(1<<H)-1;for(let Q=Z;Q>=O;Q-=1){let ut=Q-1,rt=n[s.charAt(ut)];if(A&&(C[ut]=+!!rt),et[Q]=(et[Q+1]<<1|1)&rt,H&&(et[Q]|=(S[Q+1]|S[Q])<<1|1|S[Q+1]),et[Q]&X&&(L=Is(t,{errors:H,currentLocation:ut,expectedLocation:p,distance:o,ignoreLocation:l}),L<=f)){if(f=L,x=ut,x<=p)break;O=Math.max(1,2*p-x)}}if(Is(t,{errors:H+1,currentLocation:p,expectedLocation:p,distance:o,ignoreLocation:l})>f)break;S=et}const j={isMatch:x>=0,score:Math.max(.001,L)};if(A){const H=function(J=[],U=de.minMatchCharLength){let O=[],Z=-1,et=-1,Q=0;for(let ut=J.length;Q<ut;Q+=1){let rt=J[Q];rt&&Z===-1?Z=Q:rt||Z===-1||(et=Q-1,et-Z+1>=U&&O.push([Z,et]),Z=-1)}return J[Q-1]&&Q-Z>=U&&O.push([Z,Q-1]),O}(C,c);H.length?a&&(j.indices=H):j.isMatch=!1}return j}function g0(s){let t={};for(let n=0,e=s.length;n<e;n+=1){const o=s.charAt(n);t[o]=(t[o]||0)|1<<e-n-1}return t}class i1{constructor(t,{location:n=de.location,threshold:e=de.threshold,distance:o=de.distance,includeMatches:r=de.includeMatches,findAllMatches:i=de.findAllMatches,minMatchCharLength:c=de.minMatchCharLength,isCaseSensitive:a=de.isCaseSensitive,ignoreLocation:l=de.ignoreLocation}={}){if(this.options={location:n,threshold:e,distance:o,includeMatches:r,findAllMatches:i,minMatchCharLength:c,isCaseSensitive:a,ignoreLocation:l},this.pattern=a?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const u=(p,f)=>{this.chunks.push({pattern:p,alphabet:g0(p),startIndex:f})},m=this.pattern.length;if(m>er){let p=0;const f=m%er,x=m-f;for(;p<x;)u(this.pattern.substr(p,er),p),p+=er;if(f){const A=m-er;u(this.pattern.substr(A),A)}}else u(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:e}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let x={isMatch:!0,score:0};return e&&(x.indices=[[0,t.length-1]]),x}const{location:o,distance:r,threshold:i,findAllMatches:c,minMatchCharLength:a,ignoreLocation:l}=this.options;let u=[],m=0,p=!1;this.chunks.forEach(({pattern:x,alphabet:A,startIndex:C})=>{const{isMatch:M,score:S,indices:L}=f0(t,x,A,{location:o+C,distance:r,threshold:i,findAllMatches:c,minMatchCharLength:a,includeMatches:e,ignoreLocation:l});M&&(p=!0),m+=S,M&&L&&(u=[...u,...L])});let f={isMatch:p,score:p?m/this.chunks.length:1};return p&&e&&(f.indices=u),f}}class Ho{constructor(t){this.pattern=t}static isMultiMatch(t){return xc(t,this.multiRegex)}static isSingleMatch(t){return xc(t,this.singleRegex)}search(){}}function xc(s,t){const n=s.match(t);return n?n[1]:null}class a1 extends Ho{constructor(t,{location:n=de.location,threshold:e=de.threshold,distance:o=de.distance,includeMatches:r=de.includeMatches,findAllMatches:i=de.findAllMatches,minMatchCharLength:c=de.minMatchCharLength,isCaseSensitive:a=de.isCaseSensitive,ignoreLocation:l=de.ignoreLocation}={}){super(t),this._bitapSearch=new i1(t,{location:n,threshold:e,distance:o,includeMatches:r,findAllMatches:i,minMatchCharLength:c,isCaseSensitive:a,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class c1 extends Ho{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n,e=0;const o=[],r=this.pattern.length;for(;(n=t.indexOf(this.pattern,e))>-1;)e=n+r,o.push([n,e-1]);const i=!!o.length;return{isMatch:i,score:i?0:1,indices:o}}}const Ui=[class extends Ho{constructor(s){super(s)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(s){const t=s===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},c1,class extends Ho{constructor(s){super(s)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(s){const t=s.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends Ho{constructor(s){super(s)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(s){const t=!s.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,s.length-1]}}},class extends Ho{constructor(s){super(s)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(s){const t=!s.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,s.length-1]}}},class extends Ho{constructor(s){super(s)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(s){const t=s.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[s.length-this.pattern.length,s.length-1]}}},class extends Ho{constructor(s){super(s)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(s){const t=s.indexOf(this.pattern)===-1;return{isMatch:t,score:t?0:1,indices:[0,s.length-1]}}},a1],bc=Ui.length,h0=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,v0=new Set([a1.type,c1.type]);class w0{constructor(t,{isCaseSensitive:n=de.isCaseSensitive,includeMatches:e=de.includeMatches,minMatchCharLength:o=de.minMatchCharLength,ignoreLocation:r=de.ignoreLocation,findAllMatches:i=de.findAllMatches,location:c=de.location,threshold:a=de.threshold,distance:l=de.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:e,minMatchCharLength:o,findAllMatches:i,ignoreLocation:r,location:c,threshold:a,distance:l},this.pattern=n?t:t.toLowerCase(),this.query=function(u,m={}){return u.split("|").map(p=>{let f=p.trim().split(h0).filter(A=>A&&!!A.trim()),x=[];for(let A=0,C=f.length;A<C;A+=1){const M=f[A];let S=!1,L=-1;for(;!S&&++L<bc;){const I=Ui[L];let X=I.isMultiMatch(M);X&&(x.push(new I(X,m)),S=!0)}if(!S)for(L=-1;++L<bc;){const I=Ui[L];let X=I.isSingleMatch(M);if(X){x.push(new I(X,m));break}}}return x})}(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:e,isCaseSensitive:o}=this.options;t=o?t:t.toLowerCase();let r=0,i=[],c=0;for(let a=0,l=n.length;a<l;a+=1){const u=n[a];i.length=0,r=0;for(let m=0,p=u.length;m<p;m+=1){const f=u[m],{isMatch:x,indices:A,score:C}=f.search(t);if(!x){c=0,r=0,i.length=0;break}if(r+=1,c+=C,e){const M=f.constructor.type;v0.has(M)?i=[...i,...A]:i.push(A)}}if(r){let m={isMatch:!0,score:c/r};return e&&(m.indices=i),m}}return{isMatch:!1,score:1}}}const qi=[];function ji(s,t){for(let n=0,e=qi.length;n<e;n+=1){let o=qi[n];if(o.condition(s,t))return new o(s,t)}return new i1(s,t)}const ga="$and",y0="$or",_c="$path",x0="$val",Ti=s=>!(!s[ga]&&!s[y0]),Cc=s=>({[ga]:Object.keys(s).map(t=>({[t]:s[t]}))});function l1(s,t,{auto:n=!0}={}){const e=o=>{let r=Object.keys(o);const i=(a=>!!a[_c])(o);if(!i&&r.length>1&&!Ti(o))return e(Cc(o));if((a=>!Do(a)&&n1(a)&&!Ti(a))(o)){const a=i?o[_c]:r[0],l=i?o[x0]:o[a];if(!vo(l))throw new Error((m=>`Invalid value for key ${m}`)(a));const u={keyId:Hi(a),pattern:l};return n&&(u.searcher=ji(l,t)),u}let c={children:[],operator:r[0]};return r.forEach(a=>{const l=o[a];Do(l)&&l.forEach(u=>{c.children.push(e(u))})}),c};return Ti(s)||(s=Cc(s)),e(s)}function b0(s,t){const n=s.matches;t.matches=[],Xn(n)&&n.forEach(e=>{if(!Xn(e.indices)||!e.indices.length)return;const{indices:o,value:r}=e;let i={indices:o,value:r};e.key&&(i.key=e.key.src),e.idx>-1&&(i.refIndex=e.idx),t.matches.push(i)})}function _0(s,t){t.score=s.score}class fr{constructor(t,n={},e){this.options={...de,...n},this.options.useExtendedSearch,this._keyStore=new m0(this.options.keys),this.setCollection(t,e)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof fa))throw new Error("Incorrect 'index' type");this._myIndex=n||s1(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Xn(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let e=0,o=this._docs.length;e<o;e+=1){const r=this._docs[e];t(r,e)&&(this.removeAt(e),e-=1,o-=1,n.push(r))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:e,includeScore:o,shouldSort:r,sortFn:i,ignoreFieldNorm:c}=this.options;let a=vo(t)?vo(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function(l,{ignoreFieldNorm:u=de.ignoreFieldNorm}){l.forEach(m=>{let p=1;m.matches.forEach(({key:f,norm:x,score:A})=>{const C=f?f.weight:null;p*=Math.pow(A===0&&C?Number.EPSILON:A,(C||1)*(u?1:x))}),m.score=p})}(a,{ignoreFieldNorm:c}),r&&a.sort(i),e1(n)&&n>-1&&(a=a.slice(0,n)),function(l,u,{includeMatches:m=de.includeMatches,includeScore:p=de.includeScore}={}){const f=[];return m&&f.push(b0),p&&f.push(_0),l.map(x=>{const{idx:A}=x,C={item:u[A],refIndex:A};return f.length&&f.forEach(M=>{M(x,C)}),C})}(a,this._docs,{includeMatches:e,includeScore:o})}_searchStringList(t){const n=ji(t,this.options),{records:e}=this._myIndex,o=[];return e.forEach(({v:r,i,n:c})=>{if(!Xn(r))return;const{isMatch:a,score:l,indices:u}=n.searchIn(r);a&&o.push({item:r,idx:i,matches:[{score:l,value:r,norm:c,indices:u}]})}),o}_searchLogical(t){const n=l1(t,this.options),e=(c,a,l)=>{if(!c.children){const{keyId:m,searcher:p}=c,f=this._findMatches({key:this._keyStore.get(m),value:this._myIndex.getValueForItemAtKeyId(a,m),searcher:p});return f&&f.length?[{idx:l,item:a,matches:f}]:[]}const u=[];for(let m=0,p=c.children.length;m<p;m+=1){const f=c.children[m],x=e(f,a,l);if(x.length)u.push(...x);else if(c.operator===ga)return[]}return u},o=this._myIndex.records,r={},i=[];return o.forEach(({$:c,i:a})=>{if(Xn(c)){let l=e(n,c,a);l.length&&(r[a]||(r[a]={idx:a,item:c,matches:[]},i.push(r[a])),l.forEach(({matches:u})=>{r[a].matches.push(...u)}))}}),i}_searchObjectList(t){const n=ji(t,this.options),{keys:e,records:o}=this._myIndex,r=[];return o.forEach(({$:i,i:c})=>{if(!Xn(i))return;let a=[];e.forEach((l,u)=>{a.push(...this._findMatches({key:l,value:i[u],searcher:n}))}),a.length&&r.push({idx:c,item:i,matches:a})}),r}_findMatches({key:t,value:n,searcher:e}){if(!Xn(n))return[];let o=[];if(Do(n))n.forEach(({v:r,i,n:c})=>{if(!Xn(r))return;const{isMatch:a,score:l,indices:u}=e.searchIn(r);a&&o.push({score:l,key:t,value:r,idx:i,norm:c,indices:u})});else{const{v:r,n:i}=n,{isMatch:c,score:a,indices:l}=e.searchIn(r);c&&o.push({score:a,key:t,value:r,norm:i,indices:l})}return o}}fr.version="7.0.0",fr.createIndex=s1,fr.parseIndex=function(s,{getFn:t=de.getFn,fieldNormWeight:n=de.fieldNormWeight}={}){const{keys:e,records:o}=s,r=new fa({getFn:t,fieldNormWeight:n});return r.setKeys(e),r.setIndexRecords(o),r},fr.config=de,fr.parseQuery=l1,function(...s){qi.push(...s)}(w0);var nn=(s=>(s.disableCopilot="ShouldDisableCopilot",s.disableCodeium="ShouldDisableCodeium",s.workspacePopulated="WorkspacePopulated",s.workspaceNotPopulated="WorkspaceNotPopulated",s.workspaceNotSelected="WorkspaceNotSelected",s.signInRequired="UserShouldSignIn",s.allActionsComplete="AllActionsComplete",s.syncingPermissionNeeded="SyncingPermissionNeeded",s.workspaceTooLarge="workspaceTooLarge",s.uploadingHomeDir="uploadingHomeDir",s))(nn||{}),ha=(s=>(s.signInInProgress="SignInInProgress",s))(ha||{});let C0=class{constructor(){$t(this,"subscribers",new Set);$t(this,"_actions",[]);$t(this,"_currentIndex",0);$t(this,"subscribe",s=>(this.subscribers.add(s),s(this),()=>{this.subscribers.delete(s)}))}get currentCard(){return this.actions[this._currentIndex]}notifySubscribers(){this.subscribers.forEach(s=>s(this))}get actions(){return this._actions}handleMessageFromExtension(s){const t=s.data;return t.type===Xe.mainPanelActions&&(this.onActionsUpdates(t.data),!0)}onActionsUpdates(s){this._actions=s,this._currentIndex=0,this.notifySubscribers()}nextAction(){this._currentIndex=(this._currentIndex+1)%this._actions.length,this.notifySubscribers()}prevAction(){this._currentIndex=(this._currentIndex-1+this._actions.length)%this._actions.length,this.notifySubscribers()}isCollapsible(s){return s===nn.allActionsComplete}};const A0=`Augment just finished syncing with your codebase! Here is a summary of what we saw:

`;class M0{constructor(t,n){$t(this,"handleMessageFromExtension",t=>(t.data.type===Xe.shouldShowSummary&&this.showProjectSummary(),!0));this._chatModel=t,this._flagsModel=n}async retryProjectSummary(t){const[n]=await Promise.all([this.generateQuestions(),this._chatModel.currentConversationModel.resendTurn(t)]);await this.attachQuestions(n)}async showProjectSummary(){const t=this.generateQuestions();await this.generateSummary();const n=await t;this.attachQuestions(n)}async generateQuestions(){const{responseText:t}=await this._chatModel.currentConversationModel.sendSilentExchange({request_message:"Give me the five most important questions a developer would need answered about this codebase. These questions should be separated by a newline. I want you to say absolutely nothing else.",model_id:this._flagsModel.modelDisplayNameToId.Overview??void 0,disableSelectedCodeDetails:!0,chatHistory:[]});return t.split(`
`).filter(n=>n.trim()!=="")}async generateSummary(){this._chatModel.extensionClient.showAugmentPanel(),await this._chatModel.currentConversationModel.sendExchange({chatItemType:Yr.summaryResponse,request_message:"Provide a short summary of this project",model_id:this._flagsModel.modelDisplayNameToId.Overview??void 0,status:Ve.draft,disableSelectedCodeDetails:!0,chatHistory:[]},!0)}async attachQuestions(t){const n=this._chatModel.currentConversationModel.chatHistory.findLast(ea);n&&n.request_id&&t&&this._chatModel.currentConversationModel.updateChatItem(n.request_id,{questionsLoaded:!0,questions:t})}}const Ps={id:null,name:"Default"};class k0{constructor(){$t(this,"models",[Ps])}registerModels(t){this.models=[Ps,...t]}getModels(){return this.models}getModel(t){return this.models.find(n=>n.id===t)??Ps}}class S0{constructor(t,n=void 0,e,o){$t(this,"subscribers",new Set);this._msgBroker=t,this._state=n,this.validateState=e,this._storeId=o,n&&this.setStateInternal(n)}subscribe(t){return this.subscribers.add(t),t(this),()=>{this.subscribers.delete(t)}}notifySubscribers(){this.subscribers.forEach(t=>t(this))}get state(){return this._state}get storeId(){return this._storeId}shouldAcceptMessage(t,n){return t.id===this.storeId&&this.validateState(n)}update(t){const n=t(this._state);n!==void 0&&this.setStateInternal(n)}setState(t){this.setStateInternal(t)}async setStateInternal(t){JSON.stringify(this._state)!==JSON.stringify(t)&&(this._state=t,this._msgBroker.postMessage({type:Xe.updateSharedWebviewState,data:t,id:this.storeId}))}async fetchStateFromExtension(){const t=await this._msgBroker.send({type:Xe.getSharedWebviewState,id:this.storeId,data:{}});t.type===Xe.getSharedWebviewStateResponse&&this.shouldAcceptMessage(t,t.data)&&(this._state=t.data,this.notifySubscribers())}handleMessageFromExtension(t){switch(t.data.type){case Xe.updateSharedWebviewState:case Xe.getSharedWebviewStateResponse:return!!this.shouldAcceptMessage(t.data,t.data.data)&&(this._state=t.data.data,this.notifySubscribers(),!0);default:return!1}}}const T0=s=>({}),Ac=s=>({slot:"icon"}),E0=s=>({}),Mc=s=>({slot:"icon"});function I0(s){let t,n;return t=new no({props:{variant:"soft",size:1,color:s[0],$$slots:{icon:[P0],default:[D0]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.color=e[0]),74&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function L0(s){let t,n,e,o;return t=new no({props:{variant:"soft",size:1,color:s[0],$$slots:{default:[N0]},$$scope:{ctx:s}}}),e=new no({props:{variant:"soft",size:1,color:"info",$$slots:{icon:[z0],default:[F0]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};1&i&&(c.color=r[0]),66&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};68&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function kc(s){let t,n;return t=new se({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[R0]},$$scope:{ctx:s}}}),t.$on("click",s[5]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};64&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function R0(s){let t,n;return t=new Ar({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function D0(s){let t,n,e,o;n=new ar({props:{markdown:s[1]}});let r=!!s[3]&&kc(s);return{c(){t=D("div"),g(n.$$.fragment),e=z(),r&&r.c(),k(t,"class","c-callout-wrapper svelte-fh6sa8")},m(i,c){_(i,t,c),h(n,t,null),P(t,e),r&&r.m(t,null),o=!0},p(i,c){const a={};2&c&&(a.markdown=i[1]),n.$set(a),i[3]?r?(r.p(i,c),8&c&&d(r,1)):(r=kc(i),r.c(),d(r,1),r.m(t,null)):r&&(Y(),$(r,1,1,()=>{r=null}),K())},i(i){o||(d(n.$$.fragment,i),d(r),o=!0)},o(i){$(n.$$.fragment,i),$(r),o=!1},d(i){i&&y(t),v(n),r&&r.d()}}}function P0(s){let t;const n=s[4].icon,e=Xt(n,s,s[6],Ac);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r)&&Jt(e,n,o,o[6],t?Qt(n,o[6],r,T0):Zt(o[6]),Ac)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function N0(s){let t,n;return t=new ar({props:{markdown:s[1]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.markdown=e[1]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function F0(s){let t,n;return t=new ar({props:{markdown:s[2]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.markdown=e[2]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function z0(s){let t;const n=s[4].icon,e=Xt(n,s,s[6],Mc);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r)&&Jt(e,n,o,o[6],t?Qt(n,o[6],r,E0):Zt(o[6]),Mc)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function O0(s){let t,n,e,o,r;const i=[L0,I0],c=[];function a(m,p){return m[2]?0:1}n=a(s),e=c[n]=i[n](s);const l=s[4].default,u=Xt(l,s,s[6],null);return{c(){t=D("div"),e.c(),o=z(),u&&u.c(),k(t,"class","c-base-card svelte-fh6sa8")},m(m,p){_(m,t,p),c[n].m(t,null),P(t,o),u&&u.m(t,null),r=!0},p(m,[p]){let f=n;n=a(m),n===f?c[n].p(m,p):(Y(),$(c[f],1,1,()=>{c[f]=null}),K(),e=c[n],e?e.p(m,p):(e=c[n]=i[n](m),e.c()),d(e,1),e.m(t,o)),u&&u.p&&(!r||64&p)&&Jt(u,l,m,m[6],r?Qt(l,m[6],p,null):Zt(m[6]),null)},i(m){r||(d(e),d(u,m),r=!0)},o(m){$(e),$(u,m),r=!1},d(m){m&&y(t),c[n].d(),u&&u.d(m)}}}function B0(s,t,n){let{$$slots:e={},$$scope:o}=t,{color:r}=t,{description:i}=t,{callout:c}=t,{onClose:a}=t;return s.$$set=l=>{"color"in l&&n(0,r=l.color),"description"in l&&n(1,i=l.description),"callout"in l&&n(2,c=l.callout),"onClose"in l&&n(3,a=l.onClose),"$$scope"in l&&n(6,o=l.$$scope)},[r,i,c,a,e,()=>a(),o]}let is=class extends ct{constructor(s){super(),lt(this,s,B0,O0,it,{color:0,description:1,callout:2,onClose:3})}};function H0(s){let t;return{c(){t=D("div"),t.innerHTML='<div class="c-progress-bar__bar svelte-dg8hvh"></div>',k(t,"class","c-progress-bar svelte-dg8hvh")},m(n,e){_(n,t,e)},p:N,i:N,o:N,d(n){n&&y(t)}}}class u1 extends ct{constructor(t){super(),lt(this,t,null,H0,it,{})}}function Sc(s,t,n){const e=s.slice();return e[9]=t[n].text,e[10]=t[n].action,e[11]=t[n].appearance,e}const U0=s=>({}),Tc=s=>({slot:"icon"});function q0(s){let t,n,e=s[9]+"";return{c(){t=V(e),n=z()},m(o,r){_(o,t,r),_(o,n,r)},p(o,r){4&r&&e!==(e=o[9]+"")&&ht(t,e)},d(o){o&&(y(t),y(n))}}}function Ec(s){let t,n;return t=new he({props:{size:2,variant:"solid",color:s[11]?s[11]:"accent",class:"c-btns-card__button",title:s[9],$$slots:{default:[q0]},$$scope:{ctx:s}}}),t.$on("click",function(){return s[7](s[10])}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){s=e;const r={};4&o&&(r.color=s[11]?s[11]:"accent"),4&o&&(r.title=s[9]),260&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Ic(s){let t,n;return t=new u1({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function j0(s){let t,n,e,o,r=ee(s[2]),i=[];for(let l=0;l<r.length;l+=1)i[l]=Ec(Sc(s,r,l));const c=l=>$(i[l],1,1,()=>{i[l]=null});let a=s[3]&&Ic();return{c(){t=D("div");for(let l=0;l<i.length;l+=1)i[l].c();n=z(),a&&a.c(),e=gt(),k(t,"class","c-btns-card__buttons svelte-1701q2d")},m(l,u){_(l,t,u);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(t,null);_(l,n,u),a&&a.m(l,u),_(l,e,u),o=!0},p(l,u){if(36&u){let m;for(r=ee(l[2]),m=0;m<r.length;m+=1){const p=Sc(l,r,m);i[m]?(i[m].p(p,u),d(i[m],1)):(i[m]=Ec(p),i[m].c(),d(i[m],1),i[m].m(t,null))}for(Y(),m=r.length;m<i.length;m+=1)c(m);K()}l[3]?a?8&u&&d(a,1):(a=Ic(),a.c(),d(a,1),a.m(e.parentNode,e)):a&&(Y(),$(a,1,1,()=>{a=null}),K())},i(l){if(!o){for(let u=0;u<r.length;u+=1)d(i[u]);d(a),o=!0}},o(l){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)$(i[u]);$(a),o=!1},d(l){l&&(y(t),y(n),y(e)),rn(i,l),a&&a.d(l)}}}function W0(s){let t;const n=s[6].icon,e=Xt(n,s,s[8],Tc);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||256&r)&&Jt(e,n,o,o[8],t?Qt(n,o[8],r,U0):Zt(o[8]),Tc)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function V0(s){let t,n;return t=new is({props:{color:s[1],description:s[0],callout:s[4],$$slots:{icon:[W0],default:[j0]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,[o]){const r={};2&o&&(r.color=e[1]),1&o&&(r.description=e[0]),16&o&&(r.callout=e[4]),268&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function G0(s,t,n){let{$$slots:e={},$$scope:o}=t,{description:r}=t,{color:i}=t,{buttons:c=[]}=t,{inProgress:a=!1}=t,{callout:l}=t;function u(m){xn.postMessage({type:Xe.mainPanelPerformAction,data:m})}return s.$$set=m=>{"description"in m&&n(0,r=m.description),"color"in m&&n(1,i=m.color),"buttons"in m&&n(2,c=m.buttons),"inProgress"in m&&n(3,a=m.inProgress),"callout"in m&&n(4,l=m.callout),"$$scope"in m&&n(8,o=m.$$scope)},[r,i,c,a,l,u,e,m=>u(m),o]}let as=class extends ct{constructor(s){super(),lt(this,s,G0,V0,it,{description:0,color:1,buttons:2,inProgress:3,callout:4})}};function Y0(s){let t,n;return{c(){t=ne("svg"),n=ne("path"),k(n,"fill-rule","evenodd"),k(n,"clip-rule","evenodd"),k(n,"d","M7.49991 0.876892C3.84222 0.876892 0.877075 3.84204 0.877075 7.49972C0.877075 11.1574 3.84222 14.1226 7.49991 14.1226C11.1576 14.1226 14.1227 11.1574 14.1227 7.49972C14.1227 3.84204 11.1576 0.876892 7.49991 0.876892ZM1.82707 7.49972C1.82707 4.36671 4.36689 1.82689 7.49991 1.82689C10.6329 1.82689 13.1727 4.36671 13.1727 7.49972C13.1727 10.6327 10.6329 13.1726 7.49991 13.1726C4.36689 13.1726 1.82707 10.6327 1.82707 7.49972ZM8.24992 4.49999C8.24992 4.9142 7.91413 5.24999 7.49992 5.24999C7.08571 5.24999 6.74992 4.9142 6.74992 4.49999C6.74992 4.08577 7.08571 3.74999 7.49992 3.74999C7.91413 3.74999 8.24992 4.08577 8.24992 4.49999ZM6.00003 5.99999H6.50003H7.50003C7.77618 5.99999 8.00003 6.22384 8.00003 6.49999V9.99999H8.50003H9.00003V11H8.50003H7.50003H6.50003H6.00003V9.99999H6.50003H7.00003V6.99999H6.50003H6.00003V5.99999Z"),k(n,"fill","currentColor"),k(t,"width","15"),k(t,"height","15"),k(t,"viewBox","0 0 15 15"),k(t,"fill","none"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){_(e,t,o),P(t,n)},p:N,i:N,o:N,d(e){e&&y(t)}}}class jo extends ct{constructor(t){super(),lt(this,t,null,Y0,it,{})}}function K0(s){return{c:N,m:N,p:N,i:N,o:N,d:N}}function X0(s){let t,n;return t=new is({props:{color:"warning",description:"Current workspace contains your home directory. Augment cannot upload your home directory to the cloud. Please open a different workspace",$$slots:{icon:[oh]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function J0(s){let t,n;return t=new is({props:{color:"warning",description:`The workspace you have opened exceeds Augment's ${s[2].maxTrackableFileCount} file upload limit. Please use a .augmentignore or .gitignore to exclude files from being uploaded, or open a smaller workspace.`,$$slots:{icon:[rh]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.description=`The workspace you have opened exceeds Augment's ${e[2].maxTrackableFileCount} file upload limit. Please use a .augmentignore or .gitignore to exclude files from being uploaded, or open a smaller workspace.`),8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Z0(s){let t,n;return t=new as({props:{color:"neutral",description:"To provide the best quality responses, Augment will index your code in our secure cloud. Your data always stays secure and private. [Learn More](https://docs.augmentcode.com/setup-augment/workspace-indexing)",callout:s[2].userTier==="community"?"You are subscribed to the Community plan, we may use any code you share to train our AI models.":void 0,buttons:[{text:"Enable Indexing",action:"grant-sync-permission"}],$$slots:{icon:[sh]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.callout=e[2].userTier==="community"?"You are subscribed to the Community plan, we may use any code you share to train our AI models.":void 0),8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Q0(s){let t,n;return t=new as({props:{color:"warning",description:"Codeium suggestions will collide with Augment's suggestions. Turn off Codeium to fix this.",buttons:[{text:"Disable Codeium",action:"disable-codeium"}],$$slots:{icon:[ih]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function th(s){let t,n;return t=new as({props:{color:"warning",description:"GitHub Copilot suggestions will collide with Augment's suggestions. Turn off Copilot to fix this.",buttons:[{text:"Disable Github Copilot",action:"disable-github-copilot"}],$$slots:{icon:[ah]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function eh(s){let t,n;return t=new as({props:{color:"neutral",description:"Please complete the sign-in process in your browser.",buttons:[{text:"Cancel",action:"cancel-sign-in",appearance:"neutral"}],inProgress:!0,$$slots:{icon:[ch]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function nh(s){let t,n;return t=new as({props:{color:"neutral",description:"Welcome to Augment! Sign in to your existing account or create a new one to get started.",buttons:[{text:"Start using Augment",action:"sign-in"}],$$slots:{icon:[lh]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function oh(s){let t,n;return t=new Jn({props:{slot:"icon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function rh(s){let t,n;return t=new Jn({props:{slot:"icon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function sh(s){let t,n;return t=new jo({props:{slot:"icon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function ih(s){let t,n;return t=new Jn({props:{slot:"icon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function ah(s){let t,n;return t=new Jn({props:{slot:"icon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function ch(s){let t,n;return t=new jo({props:{slot:"icon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function lh(s){let t,n;return t=new jo({props:{slot:"icon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function uh(s){let t,n,e,o;const r=[nh,eh,th,Q0,Z0,J0,X0,K0],i=[];function c(a,l){return a[0]===nn.signInRequired?0:a[0]===ha.signInInProgress?1:a[0]===nn.disableCopilot?2:a[0]===nn.disableCodeium?3:a[0]===nn.syncingPermissionNeeded?4:a[0]===nn.workspaceTooLarge?5:a[0]===nn.uploadingHomeDir?6:a[0]===nn.allActionsComplete?7:-1}return~(t=c(s))&&(n=i[t]=r[t](s)),{c(){n&&n.c(),e=gt()},m(a,l){~t&&i[t].m(a,l),_(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t===u?~t&&i[t].p(a,l):(n&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K()),~t?(n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),~t&&i[t].d(a)}}}function dh(s,t,n){let e,o=N,r=()=>(o(),o=oe(c,a=>n(2,e=a)),c);s.$$.on_destroy.push(()=>o());let{card:i}=t,{flagsModel:c}=t;return r(),s.$$set=a=>{"card"in a&&n(0,i=a.card),"flagsModel"in a&&r(n(1,c=a.flagsModel))},[i,c,e]}let $h=class extends ct{constructor(s){super(),lt(this,s,dh,uh,it,{card:0,flagsModel:1})}};class mh{constructor(t,n,e,o){$t(this,"_agenticExchangeStatus",Fe(go.notRunning));$t(this,"_isCurrConversationAgentic",Fe(!1));$t(this,"_isAutoModeApproved",Fe(!1));$t(this,"_showAutoModeWarning");$t(this,"_hasEverUsedAgent",Fe(void 0));$t(this,"_classifiedMemoriesMap",new Map);$t(this,"_wasInterrupted",Fe(!1));$t(this,"_disposers",[]);$t(this,"isAgenticTurnComplete",On(this._agenticExchangeStatus,t=>t===go.notRunning));$t(this,"_lastConversation",Fe({chat:void 0,agent:void 0}));$t(this,"_shouldCreateNewConversation",()=>{const t=this._chatModel.currentConversationModel;return!Sn.isEmpty(t)});$t(this,"setToAgentic",async(t=!1)=>{if(gn(this._chatModel.currentConversationModel))return;let n;if(this._chatModel.flags.doUseNewDraftFunctionality){if(n=this._chatModel.currentConversationModel.id,!n&&(this._chatModel.setCurrentConversation(or),n=or),!gn(this._chatModel.currentConversationModel))if(t){const o=this._chatModel.orderedConversations().find(gn),r=o==null?void 0:o.id;r?this._chatModel.setCurrentConversation(r):(await this._chatModel.setCurrentConversation(),this._chatModel.currentConversationModel.extraData={...this._chatModel.currentConversationModel.extraData,isAgentConversation:!0,baselineTimestamp:0},n=this._chatModel.currentConversationModel.id)}else this._chatModel.currentConversationModel.extraData={...this._chatModel.currentConversationModel.extraData,isAgentConversation:!0,baselineTimestamp:0}}else{const o=this._shouldCreateNewConversation(),r=re(this._lastConversation).agent;if(this._lastConversation.update(()=>({chat:this._chatModel.currentConversationModel.id,agent:void 0})),o||!r){const i=await this._create();i.extraData={isAgentConversation:!0},this._chatModel.deleteInvalidConversations("agent"),this._chatModel.currentConversationModel.setConversation(i),n=i.id}else this._chatModel.setCurrentConversation(r),n=r}this._chatModel.extensionClient.reportAgentSessionEvent({eventName:Ro.openedAgentConversation,conversationId:n});const e=this._chatModel.currentConversationModel.subscribe(async o=>{await this._maybeTriggerWelcomeMessage(o.id)&&e()})});$t(this,"setToChat",()=>{if(!gn(this._chatModel.currentConversationModel))return;const t=this._shouldCreateNewConversation(),n=re(this._lastConversation).chat;if(this._lastConversation.update(()=>({chat:void 0,agent:this._chatModel.currentConversationModel.id})),t||!n)if(this._chatModel.flags.doUseNewDraftFunctionality)this._chatModel.setCurrentConversation(or),this._chatModel.currentConversationModel.extraData={isAgentConversation:!1,baselineTimestamp:0};else{const e={...Sn.create(),extraData:{isAgentConversation:!1}};this._chatModel.deleteInvalidConversations("chat"),this._chatModel.currentConversationModel.setConversation(e)}else this._chatModel.setCurrentConversation(n)});$t(this,"_maybeTriggerWelcomeMessage",async t=>{var o;const n=this._chatModel.currentConversationModel;if(n.id!==t)return!1;if(await this.refreshHasEverUsedAgent(),!Sn.isEmpty(n)||Sn.isNamed(n)||((o=n.extraData)==null?void 0:o.hasAgentOnboarded)||re(this._hasEverUsedAgent)||(this.setHasEverUsedAgent(!0),n.setName("Welcome to the Augment Agent"),n.extraData={isAgentConversation:!0,hasAgentOnboarded:!0},!fp()))return!0;const e=await this._chatModel.extensionClient.getAgentOnboardingPrompt();return await n.sendExchange({chatItemType:Yr.agentOnboarding,request_message:e,status:Ve.draft}),!0});$t(this,"markDirty",()=>{const t=this._chatModel.currentConversationModel;t.extraData={...t.extraData,hasDirtyEdits:!0}});$t(this,"markClean",()=>{const t=this._chatModel.currentConversationModel;t.extraData={...t.extraData,hasDirtyEdits:!1}});$t(this,"_findAgentic",()=>this._chatModel.orderedConversations().find(gn));$t(this,"_findChat",()=>this._chatModel.orderedConversations().find(t=>!gn(t)));$t(this,"_create",async()=>({...Sn.create({personaType:await this._chatModel.currentConversationModel.decidePersonaType()}),extraData:{isAgentConversation:!0,baselineTimestamp:0}}));$t(this,"updateBaselineTimestamp",t=>{const n=Math.min(t,Date.now()),e=this._chatModel.currentConversationModel;gn(e)&&(e.extraData={...e.extraData,baselineTimestamp:n})});$t(this,"getBaselineTimestamp",()=>{const t=this._chatModel.currentConversationModel;return gn(t)?t.extraData.baselineTimestamp??0:0});$t(this,"getConversationId",()=>this._chatModel.currentConversationModel.id);$t(this,"interruptAgent",async()=>{if(re(this._agenticExchangeStatus)===go.notRunning)return;this._wasInterrupted.set(!0),await this._toolsModel.interruptAllTools(),await this._chatModel.currentConversationModel.cancelMessage();const t=this._chatModel.currentConversationModel.lastExchange;t!=null&&t.request_id&&this._classifiedMemoriesMap.delete(t.request_id)});$t(this,"_resetStateToDefaultValues",()=>{this.setHasEverUsedAgent(!1),this._chatModel.extensionClient.setAgentAutoModeApproved(!1),this._isAutoModeApproved.set(!1),this._chatModel.extensionClient.setHasEverUsedRemoteAgent(!1),this._chatModel.agentExecutionMode.set(Io.manual)});$t(this,"acceptAutoMode",()=>{this._chatModel.extensionClient.setAgentAutoModeApproved(!0),this._isAutoModeApproved.set(!0),this._chatModel.agentExecutionMode.set(Io.auto)});$t(this,"refreshAutoModeAcceptance",async()=>{const t=await this._chatModel.extensionClient.checkAgentAutoModeApproval();this._isAutoModeApproved.set(t)});$t(this,"rejectAutoMode",()=>{this._chatModel.extensionClient.setAgentAutoModeApproved(!1),this._isAutoModeApproved.set(!1),this._chatModel.agentExecutionMode.set(Io.manual)});$t(this,"setHasEverUsedAgent",t=>{this._chatModel.extensionClient.setHasEverUsedAgent(t),this._hasEverUsedAgent.set(t)});$t(this,"refreshHasEverUsedAgent",async()=>{if(re(this.hasEverUsedAgent)!==void 0)return;const t=await this._chatModel.extensionClient.checkHasEverUsedAgent();re(this.hasEverUsedAgent)===void 0&&this._hasEverUsedAgent.set(t)});var c;this._chatModel=t,this._toolsModel=n,this._checkpointStore=e,this._soundModel=o,this._checkpointStore.registerAgentConversationModel(this);const r=Object.values(this._chatModel.conversations).some(a=>{var l;return(l=a.extraData)==null?void 0:l.isAgentConversation}),i=((c=this._chatModel.currentConversationModel.extraData)==null?void 0:c.isAgentConversation)===!0;(r||i)&&this.setHasEverUsedAgent(!0),this.refreshAutoModeAcceptance(),this.refreshHasEverUsedAgent(),this._showAutoModeWarning=On([this._isAutoModeApproved,this._chatModel.agentExecutionMode,this._isCurrConversationAgentic],([a,l,u])=>!a&&l===Io.auto&&u),this._disposers.push(this._chatModel.currentConversationModel.subscribe(()=>{const a=this._chatModel.currentConversationModel,l=gn(a);this._isCurrConversationAgentic.set(l)})),this._disposers.push(this._chatModel.currentConversationModel.subscribe(vp(()=>{const a=rg(this._chatModel.currentConversationModel);this._agenticExchangeStatus.set(a)},1e3,{leading:!0,trailing:!0}))),this._disposers.push(this._agenticExchangeStatus.subscribe(a=>{a===go.running&&this._wasInterrupted.set(!1)})),this._disposers.push(this._isCurrConversationAgentic.subscribe(a=>{a?(this._chatModel.extensionClient.setChatMode(ic.agent),this._chatModel.specialContextInputModel.enableAgentMemories()):(this._chatModel.extensionClient.setChatMode(ic.chat),this._chatModel.specialContextInputModel.disableAgentMemories()),this._agenticExchangeStatus.set(go.notRunning)})),this._disposers.push(this._chatModel.currentConversationModel.onBeforeChangeConversation((a,l)=>{var u;if(gn(a))return Sn.isEmpty(l)&&((u=l.extraData)==null?void 0:u.isAgentConversation)!==!1&&this._chatModel.conversations[l.id]===void 0&&(l={...l,extraData:{...l.extraData,isAgentConversation:!0}}),l})),this._disposers.push(this._chatModel.currentConversationModel.subscribe(a=>{const l=a.lastExchange,u=this._chatModel.flags.memoryClassificationOnFirstToken;l&&l.request_id&&u&&(l.status===Ve.sent&&l.response_text&&l.response_text.length>0&&!this._classifiedMemoriesMap.has(l.request_id)&&(this._classifiedMemoriesMap.set(l.request_id,!0),uc(a,l)),!l.request_id||l.status!==Ve.success&&l.status!==Ve.failed&&l.status!==Ve.cancelled||this._classifiedMemoriesMap.delete(l.request_id))})),this._disposers.push(this._chatModel.currentConversationModel.onSendExchange(a=>{this._chatModel.flags.memoryClassificationOnFirstToken||uc(this._chatModel.currentConversationModel,a)})),this._disposers.push(this._chatModel.currentConversationModel.onNewConversation(()=>{const a=this._chatModel.currentConversationModel.id;this._chatModel.extensionClient.setCurrentConversation(a),this._checkpointStore.maybeCreateOriginalCheckpoint()})),this._chatModel.extensionClient.setCurrentConversation(this._chatModel.currentConversationModel.id),this._disposers.push(this.isAgenticTurnComplete.subscribe(async a=>{var p,f;if(!a||!gn(this._chatModel.currentConversationModel))return;const l=this._chatModel.currentConversationModel;if(!re(this._wasInterrupted)&&this._chatModel.flags.enableDebugFeatures)try{await this._soundModel.playAgentComplete()}catch(x){console.warn("Failed to play agent complete sound:",x)}this._wasInterrupted.set(!1);const u=sg(l);if(!u)return;const m=If.create();m.setFlag(Oo.start);try{const x=(p=ig(l))==null?void 0:p.request_id;x&&m.setRequestId(Oo.lastUserExchangeRequestId,x);const{memoriesRequestId:A,memory:C}=u;if(m.setRequestId(Oo.memoriesRequestId,A),!C)return void m.setFlag(Oo.emptyMemory);if(ag(l))return void m.setFlag(Oo.agenticTurnHasRememberToolCall);if(this._chatModel.extensionClient.callTool(((f=l.lastExchange)==null?void 0:f.request_id)??"","remember","remember",{memory:C,caller:ac.classify_and_distill,isComplexNewMemory:!1,memoriesRequestId:A},l.chatHistory.filter(M=>qr(M)).map(Fi),l.id),x){const M=cg(l,x);m.setFlag(Oo.removeUserExchangeMemoryFailed,!M)}}catch{m.setFlag(Oo.exceptionThrown)}finally{m.setFlag(Oo.end),this._chatModel.extensionClient.reportAgentSessionEvent({eventName:Ro.flushMemories,conversationId:this._chatModel.currentConversationModel.id,eventData:{flushMemoriesData:m}})}})),this._disposers.push(this.isAgenticTurnComplete.subscribe(async a=>{if(a){const l=re(this._checkpointStore.currentCheckpoint),u=re(this._chatModel.currentConversationModel).id;await this._chatModel.extensionClient.hasChangesSince((l==null?void 0:l.fromTimestamp)??this.getBaselineTimestamp())&&u===re(this._chatModel.currentConversationModel).id&&this._checkpointStore.createNewCheckpoint()}})),this._disposers.push(this._checkpointStore.targetCheckpointSummary.subscribe(()=>{re(this._checkpointStore.targetCheckpointHasChanges)?this.markDirty():this.markClean()}))}get isCurrConversationAgentic(){return this._isCurrConversationAgentic}get agentExchangeStatus(){return this._agenticExchangeStatus}async distillMemory(t){const n=this._chatModel.currentConversationModel.chatHistory.find(o=>ai(o)&&o.request_id===t);if(!(n!=null&&n.request_message))return;const{responseText:e}=await this._chatModel.currentConversationModel.sendSilentExchange({request_message:n.request_message,disableRetrieval:!0,disableSelectedCodeDetails:!0,memoriesInfo:{isDistill:!0}});try{const o=JSON.parse(e);o.content&&await this._chatModel.extensionClient.callTool(t,"remember","remember",{memory:o.content,caller:ac.classify_and_distill,isComplexNewMemory:!1},this._chatModel.currentConversationModel.chatHistory.filter(qr).map(Fi),this._chatModel.currentConversationModel.id)}catch(o){console.warn("Failed to parse JSON from distill memory response",o)}}async resetOnboarding(){this._resetStateToDefaultValues();const t=this._chatModel.currentConversationModel;gn(t)&&(t.extraData={...t.extraData,hasAgentOnboarded:!1},await this._maybeTriggerWelcomeMessage(t.id))}get showAutoModeWarning(){return this._showAutoModeWarning}get hasEverUsedAgent(){return this._hasEverUsedAgent}dispose(){this._disposers.forEach(t=>t()),this._disposers=[],this._classifiedMemoriesMap.clear()}}function Lc(s){let t,n;return t=new is({props:{color:"accent",description:s[0],onClose:s[1],$$slots:{icon:[gh],default:[fh]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.description=e[0]),2&o&&(r.onClose=e[1]),131076&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function ph(s){let t;return{c(){t=V("Try it out")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function fh(s){let t,n;return t=new he({props:{size:2,variant:"solid",color:"accent",title:"Try it out",$$slots:{default:[ph]},$$scope:{ctx:s}}}),t.$on("click",function(){xe(s[2])&&s[2].apply(this,arguments)}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){s=e;const r={};131072&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function gh(s){let t,n;return t=new jo({props:{slot:"icon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function hh(s){let t,n,e=s[3]&&Lc(s);return{c(){e&&e.c(),t=gt()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,[r]){o[3]?e?(e.p(o,r),8&r&&d(e,1)):(e=Lc(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function vh(s,t,n){let e,o,r,i,c,a,l,u,m,p=N,f=N;s.$$.on_destroy.push(()=>p()),s.$$.on_destroy.push(()=>f());const x=Mt("chatModel");kt(s,x,j=>n(13,m=j));const A=m.flags;kt(s,A,j=>n(12,u=j));const C=Mt(yr.key),M=Mt("agentConversationModel"),S=Mt(on.key);let L="",I=()=>{},X=()=>{};return s.$$.update=()=>{6144&s.$$.dirty&&n(9,o=u.enableAgentMode&&l===!1),5120&s.$$.dirty&&n(8,i=u.enableBackgroundAgents&&!a),3840&s.$$.dirty&&(o?(n(0,L="Agent Mode is now available"),n(1,I=async()=>{n(9,o=!1),l===!1&&M.setHasEverUsedAgent(!0)}),n(2,X=async()=>{n(9,o=!1),await M.setToAgentic()})):i&&(n(0,L="Remote Agent Mode is now available"),n(1,I=async()=>{n(8,i=!1),S.setHasEverUsedRemoteAgent(!0)}),n(2,X=async()=>{n(8,i=!1),C.handleSetToBackgroundAgent(),a===!1&&(S==null||S.setHasEverUsedRemoteAgent(!0))}))),768&s.$$.dirty&&n(3,c=o||i)},n(5,e=M.hasEverUsedAgent),f(),f=oe(e,j=>n(11,l=j)),n(4,r=S.hasEverUsedRemoteAgent),p(),p=oe(r,j=>n(10,a=j)),[L,I,X,c,r,e,x,A,i,o,a,l,u]}class wh extends ct{constructor(t){super(),lt(this,t,vh,hh,it,{})}}function Rc(s){let t,n;return t=new is({props:{color:"accent",description:s[0],onClose:s[8],$$slots:{icon:[yh]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.description=e[0]),3&o&&(r.onClose=e[8]),512&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function yh(s){let t,n;return t=new jo({props:{slot:"icon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function xh(s){let t,n,e=s[1]&&Rc(s);return{c(){e&&e.c(),t=gt()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,[r]){o[1]?e?(e.p(o,r),2&r&&d(e,1)):(e=Rc(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function bh(s,t,n){let e,o,r,i,c,a,l,u=N,m=N;s.$$.on_destroy.push(()=>u()),s.$$.on_destroy.push(()=>m());const p=Mt("chatModel");return kt(s,p,f=>n(6,a=f)),s.$$.update=()=>{64&s.$$.dirty&&(n(3,e=a.flags),m(),m=oe(e,f=>n(7,l=f))),128&s.$$.dirty&&n(0,o=l.clientAnnouncement),64&s.$$.dirty&&(n(2,r=a.displayedAnnouncements),u(),u=oe(r,f=>n(5,c=f))),33&s.$$.dirty&&n(1,i=!!o&&o.length>0&&!c.includes(o))},[o,i,r,e,p,c,a,l,async()=>{n(1,i=!1),p.displayedAnnouncements.update(f=>(f.push(o),f)),p.saveImmediate()}]}class _h extends ct{constructor(t){super(),lt(this,t,bh,xh,it,{})}}const Ch=Fe(!1);function Ah(s){let t;return{c(){t=V("Drop files to attach as context")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Mh(s){let t,n=s[0].enableDebugFeatures?"images (png, jpg, jpeg) and text-based files":"images (png, jpg, jpeg)";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){1&o&&n!==(n=e[0].enableDebugFeatures?"images (png, jpg, jpeg) and text-based files":"images (png, jpg, jpeg)")&&ht(t,n)},d(e){e&&y(t)}}}function kh(s){let t,n,e,o,r;const i=s[8].default,c=Xt(i,s,s[12],null),a=c||function(l){let u,m,p,f,x,A;return u=new Gg({}),p=new Ot({props:{class:"c-rich-text-editor-dropzone__text",size:2,$$slots:{default:[Ah]},$$scope:{ctx:l}}}),x=new Ot({props:{class:"c-rich-text-editor-dropzone__text",size:1,$$slots:{default:[Mh]},$$scope:{ctx:l}}}),{c(){g(u.$$.fragment),m=z(),g(p.$$.fragment),f=z(),g(x.$$.fragment)},m(C,M){h(u,C,M),_(C,m,M),h(p,C,M),_(C,f,M),h(x,C,M),A=!0},p(C,M){const S={};4096&M&&(S.$$scope={dirty:M,ctx:C}),p.$set(S);const L={};4097&M&&(L.$$scope={dirty:M,ctx:C}),x.$set(L)},i(C){A||(d(u.$$.fragment,C),d(p.$$.fragment,C),d(x.$$.fragment,C),A=!0)},o(C){$(u.$$.fragment,C),$(p.$$.fragment,C),$(x.$$.fragment,C),A=!1},d(C){C&&(y(m),y(f)),v(u,C),v(p,C),v(x,C)}}}(s);return{c(){t=D("div"),n=D("div"),a&&a.c(),k(n,"class","c-rich-text-editor-dropzone__content svelte-1f75lrb"),k(t,"class","c-rich-text-editor-dropzone svelte-1f75lrb"),k(t,"role","button"),k(t,"tabindex","-1"),xt(t,"is-active",s[1])},m(l,u){_(l,t,u),P(t,n),a&&a.m(n,null),e=!0,o||(r=[Et(window,"dragstart",s[11]),Et(window,"dragenter",s[6]),Et(window,"dragleave",s[4]),Et(window,"drop",s[5]),Et(window,"blur",s[5]),Et(t,"dragover",nr(qo(s[9]))),Et(t,"dragenter",nr(qo(s[10]))),Et(t,"drop",nr(qo(s[3])))],o=!0)},p(l,[u]){c?c.p&&(!e||4096&u)&&Jt(c,i,l,l[12],e?Qt(i,l[12],u,null):Zt(l[12]),null):a&&a.p&&(!e||1&u)&&a.p(l,e?u:-1),(!e||2&u)&&xt(t,"is-active",l[1])},i(l){e||(d(a,l),e=!0)},o(l){$(a,l),e=!1},d(l){l&&y(t),a&&a.d(l),o=!1,Ye(r)}}}const Sh="application/x-augment/drag-origin/{}";function Dc(s){return Sh.replace("{}",s.instanceId)}function Th(s,t,n){let{$$slots:e={},$$scope:o}=t,{flags:r}=t,{draggingStore:i=Ch}=t;const c=Mt(li.CONTEXT_KEY);let a;return i.subscribe(l=>n(1,a=l)),s.$$set=l=>{"flags"in l&&n(0,r=l.flags),"draggingStore"in l&&n(7,i=l.draggingStore),"$$scope"in l&&n(12,o=l.$$scope)},[r,a,c,function(l){var u,m,p,f,x;i.set(!1),(u=l.dataTransfer)!=null&&u.files&&((x=(m=c==null?void 0:c.commandManager.chain())==null?void 0:(p=m.command(({view:A,tr:C})=>{if(!A)return!0;const M=A.posAtCoords({left:l.clientX,top:l.clientY});if(M){const S=C.doc.resolve(M.pos);C.setSelection(Lg.create(C.doc,S.pos))}return!0})).insertFilesIntoEditor)==null||x.call(p,[...((f=l.dataTransfer)==null?void 0:f.files)??[]]))},function(l){l.relatedTarget&&l.relatedTarget!==document.body||i.set(!1)},()=>i.set(!1),l=>{var p,f;var u,m;u=l,m=c,(p=u.dataTransfer)!=null&&p.types.includes(Dc(m))||(f=l.dataTransfer)!=null&&f.types.includes("Files")&&i.set(!0)},i,e,function(l){hn.call(this,s,l)},function(l){hn.call(this,s,l)},l=>function(u,m){var p;m.rootNode&&u.composedPath().includes(m.rootNode)&&((p=u.dataTransfer)==null||p.setData(Dc(m),m.instanceId))}(l,c),o]}class d1 extends ct{constructor(t){super(),lt(this,t,Th,kh,it,{flags:0,draggingStore:7})}}const Eh=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Ih=Rg.create({name:"image",addOptions:()=>({inline:!1,allowBase64:!1,HTMLAttributes:{}}),inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null}}),parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:s}){return["img",Dg(this.options.HTMLAttributes,s)]},addCommands(){return{setImage:s=>({commands:t})=>t.insertContent({type:this.name,attrs:s})}},addInputRules(){return[Pg({find:Eh,type:this.type,getAttributes:s=>{const[,,t,n,e]=s;return{src:n,alt:t,title:e}}})]}});class Wi extends Error{constructor(n,e){super(e);$t(this,"files");this.files=n,this.name="FileError"}}class Lh extends Wi{constructor(t,n){const e=n.join(" and ");super([t],`File "${t.name}" not supported, only attach ${e} files.`)}}function Pc(s){return s.type.startsWith("image/")}function Nc(s){let t,n,e;return{c(){t=D("button"),t.textContent="×",k(t,"class","c-image-chip__close svelte-1war7ei"),k(t,"aria-label","Remove image")},m(o,r){_(o,t,r),n||(e=Et(t,"click",nr(function(){xe(s[3])&&s[3].apply(this,arguments)})),n=!0)},p(o,r){s=o},d(o){o&&y(t),n=!1,e()}}}function Rh(s){let t,n,e,o={ctx:s,current:null,token:null,hasCatch:!1,pending:Bh,then:Fh,catch:Nh,value:11,blocks:[,,,]};return Vs(n=s[2](s[1]),o),{c(){t=gt(),o.block.c()},m(r,i){_(r,t,i),o.block.m(r,o.anchor=i),o.mount=()=>t.parentNode,o.anchor=t,e=!0},p(r,i){s=r,o.ctx=s,6&i&&n!==(n=s[2](s[1]))&&Vs(n,o)||Vp(o,s,i)},i(r){e||(d(o.block),e=!0)},o(r){for(let i=0;i<3;i+=1){const c=o.blocks[i];$(c)}e=!1},d(r){r&&y(t),o.block.d(r),o.token=null,o=null}}}function Dh(s){let t,n,e=(hc(s[0])||s[0])+"";return{c(){t=D("div"),n=V(e),k(t,"class","c-image-chip__file-extension svelte-1war7ei")},m(o,r){_(o,t,r),P(t,n)},p(o,r){1&r&&e!==(e=(hc(o[0])||o[0])+"")&&ht(n,e)},i:N,o:N,d(o){o&&y(t)}}}function Ph(s){let t,n,e;return n=new Tn({props:{size:1}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-image-chip__loading svelte-1war7ei")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function Nh(s){return{c:N,m:N,p:N,i:N,o:N,d:N}}function Fh(s){let t;function n(r,i){return r[11]?Oh:zh}let e=n(s),o=e(s);return{c(){o.c(),t=gt()},m(r,i){o.m(r,i),_(r,t,i)},p(r,i){e===(e=n(r))&&o?o.p(r,i):(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},i:N,o:N,d(r){r&&y(t),o.d(r)}}}function zh(s){let t;return{c(){t=D("div"),t.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"></path></svg>',k(t,"class","c-image-chip__file-icon svelte-1war7ei")},m(n,e){_(n,t,e)},p:N,d(n){n&&y(t)}}}function Oh(s){let t,n;return{c(){t=D("img"),rc(t.src,n=s[11])||k(t,"src",n),k(t,"alt",""),k(t,"class","c-image-chip__image svelte-1war7ei")},m(e,o){_(e,t,o),s[9](t)},p(e,o){6&o&&!rc(t.src,n=e[11])&&k(t,"src",n)},d(e){e&&y(t),s[9](null)}}}function Bh(s){let t,n,e;return n=new Tn({props:{size:1}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-image-chip__loading svelte-1war7ei")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function Hh(s){let t,n,e=s[6]?`${Math.round(s[6]/1024)}KB`:"",o=s[5]&&Fc();return{c(){o&&o.c(),t=z(),n=V(e)},m(r,i){o&&o.m(r,i),_(r,t,i),_(r,n,i)},p(r,i){r[5]?o||(o=Fc(),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),64&i&&e!==(e=r[6]?`${Math.round(r[6]/1024)}KB`:"")&&ht(n,e)},i:N,o:N,d(r){r&&(y(t),y(n)),o&&o.d(r)}}}function Uh(s){let t,n,e;return n=new Tn({props:{size:1}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-image-chip__size-loading svelte-1war7ei")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function Fc(s){let t;return{c(){t=D("span"),t.textContent="⚠️",k(t,"class","c-image-chip__warning-icon svelte-1war7ei")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function qh(s){let t,n,e,o,r,i,c,a,l,u,m,p,f,x,A,C,M,S=s[7](),L=S&&Nc(s);const I=[Ph,Dh,Rh],X=[];function j(O,Z){return 1&Z&&(o=null),O[4]?0:(o==null&&(o=!Jg(O[0])),o?1:2)}r=j(s,-1),i=X[r]=I[r](s);const H=[Uh,Hh],J=[];function U(O,Z){return O[4]?0:1}return f=U(s),x=J[f]=H[f](s),{c(){t=D("div"),L&&L.c(),n=z(),e=D("div"),i.c(),c=z(),a=D("div"),l=D("div"),u=V(s[0]),m=z(),p=D("div"),x.c(),k(e,"class","c-image-render__chip-preview svelte-1war7ei"),k(l,"class","c-image-chip__filename svelte-1war7ei"),k(l,"title",s[0]),k(p,"class","c-image-chip__size svelte-1war7ei"),k(a,"class","c-image-chip__info svelte-1war7ei"),k(t,"class","c-image-chip svelte-1war7ei"),k(t,"role","button"),k(t,"tabindex","0"),xt(t,"is-over-limit",s[5])},m(O,Z){_(O,t,Z),L&&L.m(t,null),P(t,n),P(t,e),X[r].m(e,null),P(t,c),P(t,a),P(a,l),P(l,u),P(a,m),P(a,p),J[f].m(p,null),A=!0,C||(M=[Et(t,"click",jh),Et(t,"keydown",s[10])],C=!0)},p(O,[Z]){128&Z&&(S=O[7]()),S?L?L.p(O,Z):(L=Nc(O),L.c(),L.m(t,n)):L&&(L.d(1),L=null);let et=r;r=j(O,Z),r===et?X[r].p(O,Z):(Y(),$(X[et],1,1,()=>{X[et]=null}),K(),i=X[r],i?i.p(O,Z):(i=X[r]=I[r](O),i.c()),d(i,1),i.m(e,null)),(!A||1&Z)&&ht(u,O[0]),(!A||1&Z)&&k(l,"title",O[0]);let Q=f;f=U(O),f===Q?J[f].p(O,Z):(Y(),$(J[Q],1,1,()=>{J[Q]=null}),K(),x=J[f],x?x.p(O,Z):(x=J[f]=H[f](O),x.c()),d(x,1),x.m(p,null)),(!A||32&Z)&&xt(t,"is-over-limit",O[5])},i(O){A||(d(i),d(x),A=!0)},o(O){$(i),$(x),A=!1},d(O){O&&y(t),L&&L.d(),X[r].d(),J[f].d(),C=!1,Ye(M)}}}const jh=s=>{s.preventDefault()};function Wh(s,t,n){let e,{title:o}=t,{src:r}=t,{loadImage:i}=t,{removeImage:c}=t,{isLoading:a=!1}=t,{isOverLimit:l=!1}=t,{fileSizeBytes:u=0}=t,{isEditable:m}=t;return s.$$set=p=>{"title"in p&&n(0,o=p.title),"src"in p&&n(1,r=p.src),"loadImage"in p&&n(2,i=p.loadImage),"removeImage"in p&&n(3,c=p.removeImage),"isLoading"in p&&n(4,a=p.isLoading),"isOverLimit"in p&&n(5,l=p.isOverLimit),"fileSizeBytes"in p&&n(6,u=p.fileSizeBytes),"isEditable"in p&&n(7,m=p.isEditable)},[o,r,i,c,a,l,u,m,e,function(p){Gt[p?"unshift":"push"](()=>{e=p,n(8,e)})},p=>{(function(f){f.key!=="ArrowUp"&&f.key!=="ArrowDown"&&f.key!=="ArrowLeft"&&f.key!=="ArrowRight"||(f.preventDefault(),f.stopPropagation())})(p)}]}class Vh extends ct{constructor(t){super(),lt(this,t,Wh,qh,it,{title:0,src:1,loadImage:2,removeImage:3,isLoading:4,isOverLimit:5,fileSizeBytes:6,isEditable:7})}}async function $1(s,t=1024){return new Promise((n,e)=>{const o=document.createElement("canvas"),r=o.getContext("2d"),i=new Image;i.onload=()=>{let c=i.width,a=i.height;c>a?c>t&&(a=Math.round(a*(t/c)),c=t):a>t&&(c=Math.round(c*(t/a)),a=t),o.width=c,o.height=a,r?(r.drawImage(i,0,0,c,a),o.toBlob(l=>{l!=null?n(l):e(new Error("Failed to create blob"))})):e(new Error("Could not get canvas context"))},i.onerror=()=>e(new Error("Failed to load image")),i.src=URL.createObjectURL(s)})}var Ns=(s=>(s.collapsed="collapsed",s.preview="preview",s.full="full",s))(Ns||{});const ti=class ti{constructor(t){$t(this,"_tipTapExtension");$t(this,"_editor");$t(this,"_createTipTapExtension",()=>{const t=this.registerEditor,n=this.unregisterEditor,e=this.insertFilesIntoEditor;return Ih.extend({name:"file",addOptions(){var o;return{...(o=this.parent)==null?void 0:o.call(this),allowBase64:!0,preserveOnSplit:!1,defaultRenderMode:Ns.collapsed}},addAttributes(){var o;return{...(o=this.parent)==null?void 0:o.call(this),renderMode:{default:Ns.collapsed},title:{default:""},isLoading:{default:!1},fileSizeBytes:{default:0},mimeType:{default:""}}},onCreate(){var o;(o=this.parent)==null||o.call(this),t(this.editor)},onDestroy(){var o;(o=this.parent)==null||o.call(this),n()},addCommands(){var o;return{...(o=this.parent)==null?void 0:o.call(this),insertFilesIntoEditor:r=>({chain:i})=>i().command(()=>!!e(r)).focus("end").run()}},addNodeView:()=>this._createNodeView(),addProseMirrorPlugins(){var o;return[...((o=this.parent)==null?void 0:o.call(this))??[],new Fg({key:ti.IMAGE_PASTE_HANDLER_PLUGIN_KEY,props:{handlePaste:(r,i)=>{var c,a;return(a=(c=i.clipboardData)==null?void 0:c.files)!=null&&a.length?e([...i.clipboardData.files]).okFiles.length>0&&(i.preventDefault(),!0):!1}}})]}})});$t(this,"_createNodeView",()=>({node:t})=>{var o,r;const n=document.createElement("div"),e=new Vh({target:n,props:{title:String(t.attrs.title),src:String(t.attrs.src),loadImage:((o=this._options)==null?void 0:o.renderImage)??(()=>Promise.resolve(void 0)),isLoading:!!t.attrs.isLoading,fileSizeBytes:Number(t.attrs.fileSizeBytes)||0,isOverLimit:this._calculateIsOverLimit(Number(t.attrs.fileSizeBytes)||0,String(t.attrs.mimeType||"").startsWith("image/")),removeImage:async()=>{var i;if(this._editor){try{(i=this._options)!=null&&i.deleteImage&&await this._options.deleteImage(String(t.attrs.src))}catch(c){console.error("Failed to delete image:",c)}this._editor.chain().command(({tr:c,state:a})=>(a.doc.descendants((l,u)=>{if(t===l)return c.delete(u,u+l.nodeSize),!1}),!0)).focus("end").run()}},isEditable:((r=this._options)==null?void 0:r.isEditable)??(()=>!0)}});return{dom:n,destroy:()=>{e.$destroy()},update:i=>i.type.name==="file"&&(t=i,e.$set({src:String(i.attrs.src),isLoading:!!i.attrs.isLoading,fileSizeBytes:Number(i.attrs.fileSizeBytes)||0,isOverLimit:this._calculateIsOverLimit(Number(i.attrs.fileSizeBytes)||0,String(i.attrs.mimeType||"").startsWith("image/"))}),!0)}});$t(this,"registerEditor",t=>{this._editor=t});$t(this,"unregisterEditor",()=>{this._editor=void 0});$t(this,"_getImageNodeCount",()=>{if(!this._editor)return;let t=0;return this._editor.state.doc.descendants(n=>{n.type.name==="file"&&t++}),t});$t(this,"_calculateIsOverLimit",(t,n=!0)=>{var o,r;if(t===0)return!1;const e=n?(o=this._options)==null?void 0:o.maxImageSizeKb:(r=this._options)==null?void 0:r.maxTextSizeKb;return e?t>1024*e:!1});$t(this,"updateOptions",t=>{this._options={...t}});$t(this,"insertFilesIntoEditor",t=>{var r;const{validFiles:n,errors:e}=this.validateFiles(t),o=[];if(e.length>0&&((r=this._options)!=null&&r.onValidationError))if(e.length===1)this._options.onValidationError(e[0].message);else{const i=e.map(c=>c.files.map(a=>a.name)).flatMap(c=>c);this._options.onValidationError(`Errors when attaching files: ${i.toString()}`)}for(const i of n){if(!this._editor)continue;const c=this._insertLoadingImage(this._editor,i.name);this._processImage(i,c).catch(a=>{var u;const l=new Wi([i],String(a));o.push(l),(u=this._options)!=null&&u.onValidationError&&this._options.onValidationError(l.message)})}return{errors:[...e,...o],okFiles:n}});this._options=t,this._tipTapExtension=this._createTipTapExtension()}validateFiles(t){const n=[],e=[];for(const i of t){const c=(o=i,r=this._options,function(a,l){if(l.includes("image")&&a.type.startsWith("image/"))return!0;if(!l.includes("text"))return!1;if(a.type.startsWith("text/")||["application/json","application/xml","application/javascript","application/typescript","application/x-sh","application/x-shellscript","application/x-yaml","application/yaml"].includes(a.type))return!0;const u=a.name.toLowerCase();return!(!u.endsWith(".md")&&!u.endsWith(".markdown"))||!!["dockerfile",".gitignore",".gitattributes","makefile","readme","license","changelog","authors","contributors","copying","install","news","todo",".env",".env.example",".env.local",".env.development",".env.production"].includes(u)}(o,r.supportedFileTypes)?o:new Lh(o,r.supportedFileTypes));c instanceof Wi?n.push(c):e.push(c)}var o,r;return{validFiles:e,errors:n}}async _processImage(t,n){var e,o,r,i;try{let c,a;if(Pc(t)){const l=await $1(t);if(!l||!this._editor)return;c=new File([l],t.name,{type:t.type})}else c=t;a=Pc(t)?await((o=(e=this._options)==null?void 0:e.saveImage)==null?void 0:o.call(e,c))??c.name:await((i=(r=this._options)==null?void 0:r.saveAttachment)==null?void 0:i.call(r,c))??c.name,this._updateImageNode(n,{src:a,title:c.name,isLoading:!1,fileSizeBytes:c.size,mimeType:c.type})}catch(c){throw console.error("Could not process image: ",c),this._editor&&this._removeImageNode(n),c}}get tipTapExtension(){return this._tipTapExtension}_findImageNodeBySrc(t){if(!this._editor||!t)return null;let n=null;return this._editor.state.doc.descendants((e,o)=>e.type.name!=="file"||e.attrs.src!==t||(n={node:e,pos:o},!1)),n}_insertLoadingImage(t,n){const{from:e}=t.state.selection,o=`${n}-${Date.now()}-${Math.random().toString(36).substring(2)}`;return t.chain().command(({tr:r})=>{const i=e||r.doc.content.size;return r.insert(i,[t.schema.nodes.file.create({src:o,originalName:n,title:n,renderMode:Ns.collapsed,isLoading:!0}),t.schema.nodes.paragraph.create({text:""})]),!0}).focus("end").run(),o}_updateImageNode(t,n){if(!this._editor)return;const e=this._findImageNodeBySrc(t);e&&this._editor.chain().command(({tr:o})=>(o.setNodeMarkup(e.pos,void 0,{...e.node.attrs,...n}),!0)).run()}_removeImageNode(t){if(!this._editor)return;const n=this._findImageNodeBySrc(t);n&&this._editor.chain().command(({tr:e})=>(e.delete(n.pos,n.pos+n.node.nodeSize),!0)).run()}static hasLoadingImages(t){if(!t)return!1;const n=e=>{var o;if(!e)return!1;if(e.type==="file"&&((o=e.attrs)!=null&&o.isLoading))return!0;if(e.content){if(!Array.isArray(e.content))return!1;for(const r of e.content)if(n(r))return!0}return!1};return n(t)}};$t(ti,"IMAGE_PASTE_HANDLER_PLUGIN_KEY",new Ng("augment-prosemirror-image-paste-handler"));let ts=ti;const Fs=10,zs=1024,Os=24,Gh=[".png",".jpg",".jpeg",".gif",".webp",".svg",".bmp",".js",".jsx",".ts",".tsx",".py",".java",".c",".cpp",".h",".hpp",".cs",".go",".rs",".swift",".kt",".scala",".rb",".php",".html",".css",".scss",".sass",".less",".svelte",".vue",".json",".yaml",".yml",".toml",".ini",".cfg",".conf",".xml",".plist",".properties",".env",".md",".txt",".rst",".tex",".sh",".bash",".zsh",".fish",".sql",".graphql",".gradle",".pom",".bazel",".bzl",".dockerfile",".makefile",".proto",".mod",".hs",".lua",".dart",".r",".m",".pl",".ps1",".csv",".tsv"];function zc(s){return s?Gh.join(","):".png,.jpg,.jpeg"}function Yh(s){const t=function(e){if(!e)return[];const o=[],r=i=>{if(i&&(i.type==="file"&&i.attrs&&o.push({src:i.attrs.src||"",title:i.attrs.title||"",fileSizeBytes:Number(i.attrs.fileSizeBytes)||0,isLoading:!!i.attrs.isLoading}),i.content&&Array.isArray(i.content)))for(const c of i.content)r(c)};return r(e),o}(s),n=t.filter(e=>!e.isLoading);return{imageCount:n.length,imageSizeSumKb:Math.round(n.reduce((e,o)=>e+o.fileSizeBytes,0)/1024)}}function Kh(s){const t=function(e){if(!e)return[];const o=[],r=i=>{if(i&&(i.type==="file"&&i.attrs&&((i.attrs.mimeType||"").startsWith("image/")||o.push({src:i.attrs.src||"",title:i.attrs.title||"",fileSizeBytes:Number(i.attrs.fileSizeBytes)||0,isLoading:!!i.attrs.isLoading})),i.content&&Array.isArray(i.content)))for(const c of i.content)r(c)};return r(e),o}(s),n=t.filter(e=>!e.isLoading);return{textSizeSumKb:Math.round(n.reduce((e,o)=>e+o.fileSizeBytes,0)/1024)}}function m1(s){const t=Yh(s),n=Kh(s),{imageCount:e,imageSizeSumKb:o}=t,{textSizeSumKb:r}=n,i=e>Fs&&Fs>0,c=o>zs&&zs>0,a=r>Os&&Os>0,l=i||c||a,u=[i?`Up to ${Fs} images are supported.`:null,c?`Total image size exceeds the ${zs}KB limit. Current size: ${o}KB`:null,a?`Total text file size exceeds the ${Os}KB limit. Current size: ${r}KB`:null].filter(Boolean);return{hasWarning:l,warningMessage:u.length>0?u[0]:"",warningMessages:u}}function Xh(s,t,n){let{maxImages:e}=t,{saveImage:o}=t,{saveAttachment:r}=t,{deleteImage:i}=t,{renderImage:c}=t,{isEditable:a=()=>!0}=t,{changeImageMode:l}=t,{supportedFileTypes:u=["image"]}=t,{onValidationError:m}=t;const p=new ts({changeImageMode:l,maxImages:e,saveImage:o,saveAttachment:r,deleteImage:i,renderImage:c,isEditable:a,onValidationError:m,maxImageSizeKb:zs,maxTextSizeKb:Os,supportedFileTypes:u}),f=Mt(li.CONTEXT_KEY).pluginManager.registerPlugin(p);return sr(f),s.$$set=x=>{"maxImages"in x&&n(0,e=x.maxImages),"saveImage"in x&&n(1,o=x.saveImage),"saveAttachment"in x&&n(2,r=x.saveAttachment),"deleteImage"in x&&n(3,i=x.deleteImage),"renderImage"in x&&n(4,c=x.renderImage),"isEditable"in x&&n(5,a=x.isEditable),"changeImageMode"in x&&n(6,l=x.changeImageMode),"supportedFileTypes"in x&&n(7,u=x.supportedFileTypes),"onValidationError"in x&&n(8,m=x.onValidationError)},[e,o,r,i,c,a,l,u,m]}let p1=class extends ct{constructor(s){super(),lt(this,s,Xh,null,it,{maxImages:0,saveImage:1,saveAttachment:2,deleteImage:3,renderImage:4,isEditable:5,changeImageMode:6,supportedFileTypes:7,onValidationError:8})}};function Oc(s){return s.line_start===s.line_end?`L${s.line_start+1}`:`L${s.line_start+1}-${s.line_end+1}`}const f1=[{id:"find",label:"find",description:"things in your code base",requiresInput:!0,requiresEditorSelection:!1,placeholderText:"What code are you looking for?",selectionReminderMessage:"Select code in the editor to find.",visible:!0,promptFactory:async s=>`Find ${s}`},{id:"explain",label:"explain",description:"how selected code works",requiresInput:!1,requiresEditorSelection:!0,placeholderText:"",selectionReminderMessage:"Select code in the editor to explain.",visible:!0,promptFactory:async()=>"Explain the selected code"},{id:"fix",label:"fix",description:"issues in selected code",requiresInput:!1,requiresEditorSelection:!0,placeholderText:"",selectionReminderMessage:"Select code in the editor to fix.",visible:!0,promptFactory:async function(s,t){const n=await async function(o){let r=[];try{r=await o.extensionClient.getDiagnostics()}catch(i){console.error("Failed to get diagnostic messages:",i)}return r}(t);let e="Fix the selected code.";return e+=function(o){if(o.length===0)return" The IDE does not report any issues on the selected code.";if(o.length===1)return` The IDE reports the following issue:

• ${Oc(o[0].location)}: ${o[0].message}`;{const r=o.sort((l,u)=>l.location.line_start-u.location.line_start).reduce((l,u)=>{const m=`${u.location.line_start},${u.location.line_end}`;return l[m]||(l[m]=[]),l[m].push(u),l},{}),i=Object.entries(r).map(([l,u])=>{const[m,p]=l.split(",").map(Number),f=Oc({path:"",line_start:m,line_end:p});return u.length===1?`• ${f}: ${u[0].message}`:`• ${f}:
${u.map((x,A)=>`    ${A+1}. ${x.message}`).join(`
`)}`}).join(`
`),c=Math.min(...o.map(l=>l.location.line_start)),a=Math.max(...o.map(l=>l.location.line_end));return` The IDE reports the following issues on ${c===a?`L${c+1}`:`L${c+1}-${a+1}`}:

${i}`}}(n),e}},{id:"write-test",label:"write-test",description:"add tests for selected code",requiresInput:!1,requiresEditorSelection:!0,placeholderText:"",selectionReminderMessage:"Select code in the editor to test.",visible:!0,promptFactory:async()=>"Write a test for the selected code"},{id:"document",label:"document",description:"write documentation for selected code",requiresInput:!1,requiresEditorSelection:!0,placeholderText:"",selectionReminderMessage:"Select code in the editor to document.",visible:!0,promptFactory:async()=>"Document selected code. Do not make unnecessary changes."},{id:"generate-commit-message",label:"generate-commit-message",description:"generate a commit message",requiresInput:!1,requiresEditorSelection:!1,placeholderText:"",selectionReminderMessage:"Hit enter or send to generate a commit message",visible:!0,promptFactory:async()=>""}];function Bs(s){return f1.find(t=>t.id===s)}function g1(){return f1.filter(s=>s.visible)}class Jh{constructor(t,n){$t(this,"_model");$t(this,"_fn");$t(this,"dispose",()=>{this._model.removeAfterCommandListener(this._fn)});this._model=t,this._fn=n}}class Zh{constructor(t,n){$t(this,"_activeCommand",Fe(void 0));$t(this,"_isActiveCommandRunnable",Fe(!1));$t(this,"_afterCommandListeners",[]);$t(this,"_inputText","");$t(this,"_selections",[]);$t(this,"hasActiveCommand",On(this._activeCommand,t=>t!==void 0));$t(this,"isActiveCommandRunnable",Li(this._isActiveCommandRunnable));$t(this,"activeCommand",Li(this._activeCommand));$t(this,"activeCommandData",On(this._activeCommand,t=>Bs(t)));this._chatModel=t,this._agentConversationModel=n}get inputText(){return this._inputText}get selections(){return this._selections}setActiveCommand(t){this._activeCommand.set(t),this.updateRunnable()}setInputText(t){this._inputText=t,this.updateRunnable()}setSelections(t){this._selections=t,this.updateRunnable()}async runActiveCommand(){var e,o,r;const t=Bs(re(this._activeCommand));if(!t)return;const n=await t.promptFactory(this._inputText,this._chatModel);this._activeCommand.set(void 0),await this._chatModel.setCurrentConversation(),t.id==="generate-commit-message"?(e=this._chatModel.currentConversationModel)==null||e.generateCommitMessage():(r=this._chatModel.currentConversationModel)==null||r.sendExchange({request_message:n,rich_text_json_repr:void 0,status:Ve.draft,model_id:((o=this._chatModel.currentConversationModel)==null?void 0:o.selectedModelId)??void 0}),this._chatModel.host.postMessage({type:Xe.usedSlashAction}),this.reportCommandMetric(t.id),this._afterCommandListeners.forEach(i=>i(n))}reportCommandMetric(t){switch(t){case"explain":this._chatModel.extensionClient.reportWebviewClientEvent(hr.chatUseActionExplain);break;case"write-test":this._chatModel.extensionClient.reportWebviewClientEvent(hr.chatUseActionWriteTest);break;case"find":this._chatModel.extensionClient.reportWebviewClientEvent(hr.chatUseActionFind)}}cancelActiveCommand(){this._activeCommand.set(void 0),this._afterCommandListeners.forEach(t=>t(void 0))}afterCommand(t){return this._afterCommandListeners.push(t),new Jh(this,t)}removeAfterCommandListener(t){this._afterCommandListeners=this._afterCommandListeners.filter(n=>n!==t)}updateRunnable(){let t=!1;const n=re(this._activeCommand),e=Bs(n);n!==void 0&&e!==void 0&&(t=!0,e!=null&&e.requiresInput&&(t=t&&this._inputText!==""),e!=null&&e.requiresEditorSelection&&(t=t&&this._selections.length>0)),this._isActiveCommandRunnable.set(t)}handleMessageFromExtension(t){const n=t.data;return n.type===Xe.runSlashCommand&&(n.data==="fix"?this._createNewThreadForFix():re(this._agentConversationModel.isCurrConversationAgentic)&&this._agentConversationModel.setToChat(),this.setActiveCommand(n.data),this.runActiveCommand(),!0)}async _createNewThreadForFix(){const t=this._chatModel.chatModeModel;if(t)if(this._chatModel.currentChatMode===Di.chat)t.setToChat();else{const n=re(this._chatModel.agentExecutionMode);await t.createNewLocalAgentThread(n)}else{const n=re(this._chatModel.agentExecutionMode);re(this._agentConversationModel.isCurrConversationAgentic)||(this._agentConversationModel.setToAgentic(),this._chatModel.agentExecutionMode.set(n))}}}function Bc(s,t){return function(n,e){if(n.length<=e||n.length===0)return{truncatedText:n};const o=n.split(`
`),r="... additional lines truncated ..."+(o[0].endsWith("\r")?"\r":"");let i,c="";if(o.length<2||o[0].length+o[o.length-1].length+r.length>e){const a=Math.floor(e/2);c=[n.slice(0,a),"<...>",n.slice(-a)].join(""),i=[1,1,o.length,o.length]}else{const a=[],l=[];let u=r.length+1;for(let m=0;m<Math.floor(o.length/2);m++){const p=o[m],f=o[o.length-1-m],x=p.length+f.length+2;if(u+x>e)break;u+=x,a.push(p),l.push(f)}i=[1,a.length,o.length-l.length+1,o.length],a.push(r),a.push(...l.reverse()),c=a.join(`
`)}return{truncatedText:c,shownRangeWhenTruncated:i}}(s,t).truncatedText}async function Qh(s,t,n,e=1024){try{const o=function(i,c,a){const l=atob(i);let u=l.length;const m=new Uint8Array(u);for(;u--;)m[u]=l.charCodeAt(u);return new File([m],c,{type:a})}(s,t,n),r=await $1(o,e);return new Promise((i,c)=>{const a=new FileReader;a.onloadend=()=>{if(typeof a.result=="string"){const l=a.result.split(","),u=l.length>1?l[1]:a.result;i({dataUrl:u,mimeType:"image/png"})}else c(new Error("Failed to convert blob to data URL"))},a.onerror=l=>{c(new Error("FileReader error"))},a.readAsDataURL(r)})}catch(o){return console.error("Error scaling image:",o),{dataUrl:s,mimeType:n}}}async function t2(s,t=!0){if(!s.contentNodes||s.contentNodes.length===0)return s;const n=await async function(e,o=!0){const r=[];for(const i of e)if(i.type===zi.ContentImage&&i.image_content&&i.image_content.image_data){if(!o)continue;const c=i.image_content.image_data,a=i.image_content.media_type||"image/png",l=`image.${a.split("/")[1]||"png"}`,u=await Qh(c,l,a);r.push({type:zi.ContentImage,image_content:{image_data:u.dataUrl,media_type:u.mimeType}})}else r.push(i);return r}(s.contentNodes,t);return{...s,contentNodes:n}}const e2={"save-file":`save-file tool call generation failed because tool input exceeded the token limit.
Please try again by limiting the file content to at most 300 lines. If more content needs to be added call save-file tool to edit the file after it has been created.
`,"str-replace-edit":`edit tool call generation failed because tool input exceeded the token limit.
Please try again by breaking down the edits into smaller chunks of at most 300 lines each. Then put as many of these chunks in a single tool call as possible up to the total limit of 300 lines.
`},ei=class ei{constructor(t,n,e,o){$t(this,"_disposables",[]);$t(this,"_activeTool");$t(this,"_processLastExchange",(t,n)=>{var o;if(n.stop_reason===vc.MAX_TOKENS&&this._handleMaxTokensRetry(t,n))return;const e=(o=n.structured_output_nodes)==null?void 0:o.filter(r=>r.type===Hr.TOOL_USE);for(const r of e??[]){const i=r.tool_use;if(i===void 0)continue;const c=this._conversationModel.getToolUseState(t,i.tool_use_id);c.phase===ye.new&&this._validateAndCheckTool(t,i.tool_use_id,i.tool_name,JSON.parse(i.input_json),this._conversationModel.chatHistory.reduce((a,l)=>(qr(l)&&a.push(Fi(l)),a),[])),this._markCancelledIfStale(t,i.tool_use_id,c.phase)}});$t(this,"_handleMaxTokensRetry",(t,n)=>{var a;const e=lg(n.structured_output_nodes),o=e==null?void 0:e.tool_use;if(!o||(e==null?void 0:e.type)!==Hr.TOOL_USE_START)return!1;const r=this._conversationModel.chatHistory.filter(qr).slice(-6).filter(l=>{var u;return l.stop_reason===vc.MAX_TOKENS&&((u=l.structured_output_nodes)==null?void 0:u.some(m=>m.type===Hr.TOOL_USE_START))});if(r.length>2)return this._conversationModel.updateChatItem(t,{...n,response_text:"",display_error_message:`We encountered difficulties running the ${o.tool_name} tool after attempting ${r.length} different approaches.`,status:Ve.failed}),this._conversationModel.updateToolUseState({requestId:t,toolUseId:o.tool_use_id,phase:ye.error}),!0;const i=o.tool_use_id;if(!((a=this._conversationModel.getToolUseState(t,i).result)!=null&&a.isError)){const l=function(u,m=0){const p=e2[u];if(!p)return"";switch(m){case 0:return p;case 1:return p+", be better this time.";default:return`${u} tool call generation failed because tool input exceeded the token limit. Take some care in making smaller chunks`}}(o.tool_name,r.length);this._conversationModel.updateToolUseState({requestId:t,toolUseId:i,phase:ye.error,result:{text:l,isError:!0}}),this._sendToolResultExchange(t,o.tool_use_id)}return!0});$t(this,"_validateAndCheckTool",async(t,n,e,o,r)=>{if(this._activeTool!==void 0)return void console.error("_validateAndCheckTool called while another tool is active",this._activeTool);this._activeTool={id:n,requestId:t,phase:ye.checkingSafety},this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:ye.checkingSafety});const i=await this._extensionClient.getToolIdentifier(e);if(!i.found)return this._activeTool=void 0,void this._reportToolError(t,n,`Tool "${e}" does not exist`);if(i.toolIdentifier.hostName===ug.mcpHost){const l=this._conversationModel.lastExchange;if(l!=null&&l.structured_output_nodes){const u=l.structured_output_nodes.find(m=>{var p;return m.type===Hr.TOOL_USE&&((p=m.tool_use)==null?void 0:p.tool_use_id)===n});u!=null&&u.tool_use&&i.mcpToolName&&i.mcpServerName&&(u.tool_use.mcp_server_name=i.mcpServerName,u.tool_use.mcp_tool_name=i.mcpToolName)}}const c={toolName:e,input:o,agentMode:re(this._chatModel.agentExecutionMode)},a=(await this._extensionClient.checkSafe(c)).isSafe;this._activeTool=void 0,a?await this.callTool(t,n,e,o,r,this._conversationModel.id):this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:ye.runnable})});$t(this,"_reportToolError",(t,n,e)=>{this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:ye.error,result:{isError:!0,text:e}}),this._sendToolResultExchange(t,n)});$t(this,"_sendToolResultExchange",(t,n)=>{const e=this._conversationModel.getLastToolUseState(),o=this._generateToolResultNodesFromState(t,n);(e==null?void 0:e.requestId)===t&&(e==null?void 0:e.toolUseId)===n&&o?this._conversationModel.sendExchange({request_message:"",status:Ve.draft,structured_request_nodes:[{id:1,type:Ef.TOOL_RESULT,tool_result_node:o}],model_id:this._conversationModel.selectedModelId??void 0}):o?this._extensionClient.reportError({originalRequestId:t,sanitizedMessage:"Tried to send tool result after conversation advanced",stackTrace:"",diagnostics:[{key:"tool_use_id",value:n}]}):this._extensionClient.reportError({originalRequestId:t,sanitizedMessage:"Tried to send tool result, but no tool result found",stackTrace:"",diagnostics:[{key:"tool_use_id",value:n},{key:"request_id",value:t}]})});$t(this,"callTool",async(t,n,e,o,r,i)=>{var c,a;if(this._activeTool===void 0){this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:ye.running}),this._activeTool={id:n,requestId:t,phase:ye.running};try{const l=function(f,x){if(f.contentNodes&&f.contentNodes.length>0){const A=f.contentNodes.map(C=>{if(C.type===zi.ContentText){let M="";return C.text_content&&(M=Bc(C.text_content,x/f.contentNodes.length)),{...C,text_content:M}}return C});return{...f,contentNodes:A}}return{...f,text:Bc(f.text,x)}}(await this._extensionClient.callTool(t,n,e,o,r,i),ei.maxResultBytes),u=await t2(l,this._chatModel.flags.enableDebugFeatures),m=this._conversationModel.getToolUseState(t,n);if(m.phase===ye.new||m.phase===ye.cancelled)return;if(m.phase===ye.cancelling)return void this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:ye.cancelled,result:u});let p=u.isError?ye.error:ye.completed;this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:p,result:u})}catch(l){const u=this._conversationModel.getToolUseState(t,n);if(u.phase===ye.new||u.phase===ye.cancelled)return;const m=l instanceof Error?l.message:String(l);if(u.phase===ye.cancelling)return void this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:ye.cancelled,result:{isError:!0,text:m}});this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:ye.error,result:{isError:!0,text:m}})}finally{((c=this._activeTool)==null?void 0:c.id)===n&&((a=this._activeTool)==null?void 0:a.requestId)===t&&(this._activeTool=void 0)}this._sendToolResultExchange(t,n)}else console.error("callTool called while another tool is active","tried to run:",n,"active tool:",this._activeTool)});$t(this,"cancelToolRun",async(t,n)=>{var e,o;this._remoteAgentsModel&&this._remoteAgentsModel.isActive&&await this._remoteAgentsModel.interruptAgent(),this._activeTool!==void 0&&this._activeTool.requestId===t&&this._activeTool.id===n?(this._activeTool={id:n,requestId:t,phase:ye.cancelling},this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:ye.cancelling}),await this._extensionClient.cancelToolRun(t,n),((e=this._activeTool)==null?void 0:e.id)===n&&((o=this._activeTool)==null?void 0:o.requestId)===t&&(this._activeTool=void 0)):console.error("cancelToolRun called while another tool is active","tried to cancel:",n,"active tool:",this._activeTool)});$t(this,"skipToolRun",async(t,n)=>{this._activeTool===void 0?(this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:ye.cancelled,result:{isError:!0,text:"Tool did not run. User clicked `Skip` to cancel."}}),this._sendToolResultExchange(t,n)):console.error("skipToolRun called while another tool is active","tried to cancel:",n,"active tool:",this._activeTool)});$t(this,"_markCancelledIfStale",(t,n,e)=>{this._activeTool!==void 0&&this._activeTool.id===n&&this._activeTool.requestId===t||e!==ye.new&&e!==ye.checkingSafety&&e!==ye.cancelling&&e!==ye.running||this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:ye.cancelled})});$t(this,"cancelActiveToolRun",async()=>{this._activeTool!==void 0&&await this.cancelToolRun(this._activeTool.requestId,this._activeTool.id)});$t(this,"interruptAllTools",async()=>{$g(this._conversationModel),await this.cancelActiveToolRun();const t=this._conversationModel.lastExchange;t&&!mg(t)&&this._conversationModel.addChatItem({request_id:crypto.randomUUID(),status:Ve.cancelled,chatItemType:Yr.agenticTurnDelimiter})});$t(this,"interruptToolsConversation",async()=>{await this._conversationModel.cancelMessage(),await this.interruptAllTools()});$t(this,"dispose",()=>{this._disposables.forEach(t=>t.dispose())});let r;this._conversationModel=t,this._extensionClient=n,this._chatModel=e,this._remoteAgentsModel=o;const i=this._conversationModel.subscribe(l=>{const u=l.lastExchange;if(qr(u)&&u.request_id!==void 0){const m=u.request_id;r!==m&&(this._processLastExchange(m,u),r=m)}}),c=this._conversationModel.onNewConversation(()=>{this._extensionClient.closeAllToolProcesses()}),a=this._conversationModel.onHistoryDelete(()=>{this.cancelActiveToolRun()});this._disposables.push({dispose:i},{dispose:c},{dispose:a})}_generateToolResultNodesFromState(t,n){var r,i;const e=this._conversationModel.getToolUseState(t,n);if(e.phase!==ye.cancelled&&e.phase!==ye.completed&&e.phase!==ye.error)return;let o;return(r=e.result)!=null&&r.contentNodes?(o=dg(e.result.contentNodes,this._chatModel.flags.enableDebugFeatures),{content:"",is_error:e.result.isError,request_id:e.result.requestId,tool_use_id:n,content_nodes:o}):((i=e.result)==null?void 0:i.text)!==void 0?{content:e.result.text,is_error:e.result.isError,request_id:e.result.requestId,tool_use_id:n}:void 0}async getToolCallCheckpoint(t){try{return await this._extensionClient.getToolCallCheckpoint(t)}catch(n){return void console.error("Failed to get tool call checkpoint:",n)}}};$t(ei,"maxResultBytes",65536);let Vi=ei;const n2="You can only have %MAX_AGENTS% agents at a time. Please delete some before creating a new one.",wD="You can only have %MAX_AGENTS% active agents at a time. Please pause some before creating a new one.",h1=(s,t,n,e,o)=>()=>{var l,u;if(o)return!1;const r=((l=t.draftExchange)==null?void 0:l.request_message)??"",i=(u=t.draftExchange)==null?void 0:u.rich_text_json_repr,c=()=>{t.draftExchange||t.saveDraftExchange(r,i)};if(!s.currentAgentId){if(s.isCreatingAgent)return!1;s.setIsCreatingAgent(!0),t.clearDraftExchange();const m=async()=>{try{const p=await s.createRemoteAgentFromDraft(r,t.selectedModelId??void 0);p?s==null||s.setCurrentAgent(p):c()}catch(p){console.error("Failed to create remote agent: ",p),c()}finally{s.setIsCreatingAgent(!1)}};return n?(n==null||n.isGithubAuthenticated().then(p=>{if(!p)return s.setIsCreatingAgent(!1),void c();m()}).catch(p=>{console.error("Failed to check GitHub authentication status:",p),s.setIsCreatingAgent(!1),c()}),!0):(m(),!0)}const a=t.draftExchange;if(a&&s){t.clearDraftExchange();const m=t.selectedModelId;s.sendMessage(a.request_message,m??void 0).then(p=>{p||c()}).catch(()=>{c()})}return setTimeout(()=>e==null?void 0:e.blur(),50),!0};async function Ls(s,t){await s.interruptAgent(),await t.sendDraftExchange()}async function o2(s,t,n,e,o){var r,i,c;switch(s){case Us.send:return void await Ls(n,t);case Us.addTask:{if(!((r=e.flags)!=null&&r.enableTaskList)||!o||!t.rootTaskUuid)return void await Ls(n,t);const a=((c=(i=t.draftExchange)==null?void 0:i.request_message)==null?void 0:c.trim())||"";if(!a)return;try{await async function(u,m,p){if(!p)throw new Error("No root task found for current conversation");const f=function(C){if(C=C.trim(),!C)return;const M=C.indexOf(`
`),S=C.substring(0,M===-1?void 0:M),L=C.substring(M).trim().replace(/\n/g," ");return{name:S,description:L}}(m);if(!f)return;const{name:x,description:A}=f;return await u.createTask(x,A,p)}(o,a,t.rootTaskUuid)&&t.clearDraftExchange()}catch(l){console.error("Task creation failed, falling back to regular send:",l),await Ls(n,t)}return}default:return void await Ls(n,t)}}function r2(s,t,n,e,o,r,i,c,a){var C,M;const l=s.currentConversationModel;if(!l)return{stateName:"noConversation",showCancelButton:!1,isDisabled:!0,disabledReason:"No active conversation",action:()=>!1,cancelAction:()=>!1};const u=re(e.activeCommand),m=re(t.isCurrConversationAgentic),p=(((M=(C=l.draftExchange)==null?void 0:C.request_message)==null?void 0:M.length)||0)>Zr,f=(()=>{var S,L;if((S=s.flags)!=null&&S.enableChatMultimodal){const I=(L=l.draftExchange)==null?void 0:L.rich_text_json_repr;return!!I&&ts.hasLoadingImages(I)}return!1})(),{hasFileWarning:x,fileWarningMessage:A}=(()=>{var S,L;if((S=s.flags)!=null&&S.enableChatMultimodal){const I=(L=l.draftExchange)==null?void 0:L.rich_text_json_repr;if(!I)return{hasFileWarning:!1,fileWarningMessage:""};const{hasWarning:X,warningMessage:j}=m1(I);return{hasFileWarning:X,fileWarningMessage:j}}return{hasFileWarning:!1,fileWarningMessage:""}})();return p?{stateName:"overCharLimit",showCancelButton:!1,isDisabled:!0,disabledReason:`Message exceeds the ${Zr} character limit`,action:()=>!1,cancelAction:()=>!1}:x?{stateName:"overImageLimit",showCancelButton:!1,isDisabled:!0,disabledReason:A,action:()=>!1,cancelAction:()=>!1}:i!=null&&i.isActive?function(S,L,I,X){var et,Q,ut,rt,mt,G,Tt,Bt;let j=!1;S.agentOverviews&&(j=!!S.maxRemoteAgents&&S.agentOverviews.length>=S.maxRemoteAgents);let H=!1;const J=S.isCreatingAgent||(S==null?void 0:S.isActive)&&((et=S==null?void 0:S.currentAgent)==null?void 0:et.status)===Ge.agentStarting,U=((Q=S==null?void 0:S.currentAgent)==null?void 0:Q.status)===Ge.agentFailed;if(S.currentAgentId)H=!((ut=L.draftExchange)!=null&&ut.request_message)||J||U;else{const _t=S.newAgentDraft;H=!((rt=L.draftExchange)!=null&&rt.request_message)||S.isCreatingAgent||j||!((G=(mt=_t==null?void 0:_t.commitRef)==null?void 0:mt.github_commit_ref)!=null&&G.repository_url)||!((Tt=_t.selectedBranch)!=null&&Tt.name)}const O=S.isCurrentAgentRunning&&!J;let Z;return H&&((Bt=L.draftExchange)!=null&&Bt.request_message?S.isCreatingAgent?Z="Creating agent...":J?Z="Agent is starting...":U?Z="Agent has failed and cannot accept messages":j&&(Z=n2.replace("%MAX_AGENTS%",S.maxRemoteAgents.toString())):Z="Please enter a message"),{stateName:"remoteAgentMode",showCancelButton:O,isDisabled:H,disabledReason:Z,action:h1(S,L,I,X,H),cancelAction:()=>(S.interruptAgent(),!0)}}(i,l,c,a):f?{stateName:"imagesLoading",showCancelButton:!1,isDisabled:!0,action:()=>!1,cancelAction:()=>(m?t.interruptAgent().catch(S=>{console.error("Failed to interrupt agent:",S)}):n.interruptToolsConversation(),!0)}:u?{stateName:"slashCommandActive",showCancelButton:!1,isDisabled:!1,action:()=>(e.runActiveCommand(),l.clearDraftExchange(),!0),cancelAction:()=>!1}:m?{stateName:"agentMode",showCancelButton:!1,isDisabled:!l.hasDraft,action:()=>(o2(o,l,t,s,r),!0),cancelAction:()=>(t.interruptAgent().catch(S=>{console.error("Failed to interrupt agent:",S)}),!0)}:{stateName:"chatMode",showCancelButton:l.canCancelMessage,isDisabled:!l.canSendDraft,action:()=>(l.sendDraftExchange(),!0),cancelAction:s2(t,n)}}function s2(s,t){return()=>(re(s.isCurrConversationAgentic)?s.interruptAgent().catch(n=>{console.error("Failed to interrupt agent:",n)}):t.interruptToolsConversation(),!0)}function i2(s){let t,n=s[4].primaryText+"";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){16&o&&n!==(n=e[4].primaryText+"")&&ht(t,n)},d(e){e&&y(t)}}}function Hc(s){let t,n;return t=new Ot({props:{size:1,class:"c-mode-secondary-label",$$slots:{default:[a2]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};272&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function a2(s){let t,n=s[4].secondaryText+"";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){16&o&&n!==(n=e[4].secondaryText+"")&&ht(t,n)},d(e){e&&y(t)}}}function c2(s){let t,n,e;return n=new pa({}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-mode-checkmark svelte-mfvmmy")},m(o,r){_(o,t,r),h(n,t,null),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function l2(s){let t,n,e,o,r;return o=new Ji({}),{c(){t=D("div"),n=D("span"),n.textContent="Creates new thread",e=z(),g(o.$$.fragment),k(n,"class","c-mode-right-label__text svelte-mfvmmy"),k(t,"class","c-mode-right-label svelte-mfvmmy")},m(i,c){_(i,t,c),P(t,n),P(t,e),h(o,t,null),r=!0},i(i){r||(d(o.$$.fragment,i),r=!0)},o(i){$(o.$$.fragment,i),r=!1},d(i){i&&y(t),v(o)}}}function Uc(s){let t,n,e;return n=new Ot({props:{size:1,class:"c-mode-secondary-label",$$slots:{default:[u2]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-mode-display__bottom svelte-mfvmmy"),xt(t,"c-mode-display__bottom--hidden",!s[2])},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};258&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i),(!e||4&r)&&xt(t,"c-mode-display__bottom--hidden",!o[2])},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function u2(s){let t;return{c(){t=V(s[1])},m(n,e){_(n,t,e)},p(n,e){2&e&&ht(t,n[1])},d(n){n&&y(t)}}}function d2(s){let t,n,e,o,r,i,c,a,l,u,m;var p=s[4].icon;p&&(e=vn(p,{})),r=new Ot({props:{size:1,$$slots:{default:[i2]},$$scope:{ctx:s}}});let f=s[4].secondaryText&&Hc(s);const x=[l2,c2],A=[];function C(S,L){return S[0]?0:S[3]?1:-1}~(a=C(s))&&(l=A[a]=x[a](s));let M=s[1]&&Uc(s);return{c(){t=D("div"),n=D("div"),e&&g(e.$$.fragment),o=z(),g(r.$$.fragment),i=z(),f&&f.c(),c=z(),l&&l.c(),u=z(),M&&M.c(),k(n,"class","c-mode-display__top svelte-mfvmmy"),k(t,"class","c-mode-display svelte-mfvmmy")},m(S,L){_(S,t,L),P(t,n),e&&h(e,n,null),P(n,o),h(r,n,null),P(n,i),f&&f.m(n,null),P(n,c),~a&&A[a].m(n,null),P(t,u),M&&M.m(t,null),m=!0},p(S,[L]){if(16&L&&p!==(p=S[4].icon)){if(e){Y();const j=e;$(j.$$.fragment,1,0,()=>{v(j,1)}),K()}p?(e=vn(p,{}),g(e.$$.fragment),d(e.$$.fragment,1),h(e,n,o)):e=null}const I={};272&L&&(I.$$scope={dirty:L,ctx:S}),r.$set(I),S[4].secondaryText?f?(f.p(S,L),16&L&&d(f,1)):(f=Hc(S),f.c(),d(f,1),f.m(n,c)):f&&(Y(),$(f,1,1,()=>{f=null}),K());let X=a;a=C(S),a!==X&&(l&&(Y(),$(A[X],1,1,()=>{A[X]=null}),K()),~a?(l=A[a],l||(l=A[a]=x[a](S),l.c()),d(l,1),l.m(n,null)):l=null),S[1]?M?(M.p(S,L),2&L&&d(M,1)):(M=Uc(S),M.c(),d(M,1),M.m(t,null)):M&&(Y(),$(M,1,1,()=>{M=null}),K())},i(S){m||(e&&d(e.$$.fragment,S),d(r.$$.fragment,S),d(f),d(l),d(M),m=!0)},o(S){e&&$(e.$$.fragment,S),$(r.$$.fragment,S),$(f),$(l),$(M),m=!1},d(S){S&&y(t),e&&v(e),v(r),f&&f.d(),~a&&A[a].d(),M&&M.d()}}}function $2(s,t,n){let e,{isConversationAgentic:o=!1}=t,{agentExecutionMode:r}=t,{isBackgroundAgent:i=!1}=t,{willStartNewThread:c=!1}=t,{description:a=""}=t,{doShowSecondaryText:l=!0}=t,{selected:u=!1}=t;return s.$$set=m=>{"isConversationAgentic"in m&&n(5,o=m.isConversationAgentic),"agentExecutionMode"in m&&n(6,r=m.agentExecutionMode),"isBackgroundAgent"in m&&n(7,i=m.isBackgroundAgent),"willStartNewThread"in m&&n(0,c=m.willStartNewThread),"description"in m&&n(1,a=m.description),"doShowSecondaryText"in m&&n(2,l=m.doShowSecondaryText),"selected"in m&&n(3,u=m.selected)},s.$$.update=()=>{224&s.$$.dirty&&n(4,e=ri({isConversationAgentic:o,agentExecutionMode:r,isBackgroundAgent:i}))},[c,a,l,u,e,o,r,i]}class m2 extends ct{constructor(t){super(),lt(this,t,$2,d2,it,{isConversationAgentic:5,agentExecutionMode:6,isBackgroundAgent:7,willStartNewThread:0,description:1,doShowSecondaryText:2,selected:3})}}function p2(s){let t,n,e;return n=new m2({props:{isConversationAgentic:s[2],agentExecutionMode:s[3],isBackgroundAgent:s[5],willStartNewThread:s[6],description:s[1],selected:s[4]}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-mode-display-item svelte-1kjq29y")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};4&r&&(i.isConversationAgentic=o[2]),8&r&&(i.agentExecutionMode=o[3]),32&r&&(i.isBackgroundAgent=o[5]),64&r&&(i.willStartNewThread=o[6]),2&r&&(i.description=o[1]),16&r&&(i.selected=o[4]),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function f2(s){let t,n,e,o;const r=[{onSelect:s[9]},s[7]];let i={$$slots:{default:[p2]},$$scope:{ctx:s}};for(let c=0;c<r.length;c+=1)i=It(i,r[c]);return n=new yt.Item({props:i}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class",e="c-mode-display-item-container "+s[8]+" svelte-1kjq29y"),xt(t,"c-mode-display-item--selected",s[4])},m(c,a){_(c,t,a),h(n,t,null),o=!0},p(c,[a]){const l=129&a?Ue(r,[1&a&&{onSelect:c[9]},128&a&&Cr(c[7])]):{};2174&a&&(l.$$scope={dirty:a,ctx:c}),n.$set(l),(!o||256&a&&e!==(e="c-mode-display-item-container "+c[8]+" svelte-1kjq29y"))&&k(t,"class",e),(!o||272&a)&&xt(t,"c-mode-display-item--selected",c[4])},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&y(t),v(n)}}}function g2(s,t,n){let e,o;const r=["onSelect","description","isConversationAgentic","agentExecutionMode","selected","isBackgroundAgent","willStartNewThread"];let i=Hs(t,r),{onSelect:c}=t,{description:a=""}=t,{isConversationAgentic:l=!1}=t,{agentExecutionMode:u}=t,{selected:m=!1}=t,{isBackgroundAgent:p=!1}=t,{willStartNewThread:f=!1}=t;return s.$$set=x=>{t=It(It({},t),ae(x)),n(10,i=Hs(t,r)),"onSelect"in x&&n(0,c=x.onSelect),"description"in x&&n(1,a=x.description),"isConversationAgentic"in x&&n(2,l=x.isConversationAgentic),"agentExecutionMode"in x&&n(3,u=x.agentExecutionMode),"selected"in x&&n(4,m=x.selected),"isBackgroundAgent"in x&&n(5,p=x.isBackgroundAgent),"willStartNewThread"in x&&n(6,f=x.willStartNewThread)},s.$$.update=()=>{n(8,{class:e="",...o}=i,e,(n(7,o),n(10,i)))},[c,a,l,u,m,p,f,o,e,x=>{c(x)}]}class br extends ct{constructor(t){super(),lt(this,t,g2,f2,it,{onSelect:0,description:1,isConversationAgentic:2,agentExecutionMode:3,selected:4,isBackgroundAgent:5,willStartNewThread:6})}}function h2(s){let t,n=s[4].primaryText+"";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){16&o&&n!==(n=e[4].primaryText+"")&&ht(t,n)},d(e){e&&y(t)}}}function v2(s){let t,n,e;var o=s[4].icon;return o&&(t=vn(o,{props:{slot:"iconLeft"}})),{c(){t&&g(t.$$.fragment),n=gt()},m(r,i){t&&h(t,r,i),_(r,n,i),e=!0},p(r,i){if(16&i&&o!==(o=r[4].icon)){if(t){Y();const c=t;$(c.$$.fragment,1,0,()=>{v(c,1)}),K()}o?(t=vn(o,{props:{slot:"iconLeft"}}),g(t.$$.fragment),d(t.$$.fragment,1),h(t,n.parentNode,n)):t=null}},i(r){e||(t&&d(t.$$.fragment,r),e=!0)},o(r){t&&$(t.$$.fragment,r),e=!1},d(r){r&&y(n),t&&v(t,r)}}}function w2(s){let t,n;return t=new Po({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function y2(s){let t,n;return t=new wp({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function x2(s){let t,n,e,o;const r=[y2,w2],i=[];function c(a,l){return a[0]?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n||(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function b2(s){let t,n;return t=new he({props:{size:1,variant:s[1],color:s[2],disabled:s[3],$$slots:{iconRight:[x2],iconLeft:[v2],default:[h2]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,[o]){const r={};2&o&&(r.variant=e[1]),4&o&&(r.color=e[2]),8&o&&(r.disabled=e[3]),273&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function _2(s,t,n){let e,{isDropdownOpen:o}=t,{isCurrConversationAgentic:r}=t,{agentExecutionMode:i}=t,{isBackgroundAgent:c}=t,{variant:a="ghost"}=t,{color:l="neutral"}=t,{disabled:u=!1}=t;return s.$$set=m=>{"isDropdownOpen"in m&&n(0,o=m.isDropdownOpen),"isCurrConversationAgentic"in m&&n(5,r=m.isCurrConversationAgentic),"agentExecutionMode"in m&&n(6,i=m.agentExecutionMode),"isBackgroundAgent"in m&&n(7,c=m.isBackgroundAgent),"variant"in m&&n(1,a=m.variant),"color"in m&&n(2,l=m.color),"disabled"in m&&n(3,u=m.disabled)},s.$$.update=()=>{224&s.$$.dirty&&n(4,e=ri({isConversationAgentic:r,agentExecutionMode:i,isBackgroundAgent:!!c}))},[o,a,l,u,e,r,i,c]}class v1 extends ct{constructor(t){super(),lt(this,t,_2,b2,it,{isDropdownOpen:0,isCurrConversationAgentic:5,agentExecutionMode:6,isBackgroundAgent:7,variant:1,color:2,disabled:3})}}function C2(s){let t,n,e,o,r={onOpenChange:s[15],nested:!1,$$slots:{default:[E2]},$$scope:{ctx:s}};t=new yt.Root({props:r}),s[26](t);let i=s[8]&&jc(s);return{c(){g(t.$$.fragment),n=z(),i&&i.c(),e=gt()},m(c,a){h(t,c,a),_(c,n,a),i&&i.m(c,a),_(c,e,a),o=!0},p(c,a){const l={};1073750126&a&&(l.$$scope={dirty:a,ctx:c}),t.$set(l),c[8]?i?(i.p(c,a),256&a&&d(i,1)):(i=jc(c),i.c(),d(i,1),i.m(e.parentNode,e)):i&&(Y(),$(i,1,1,()=>{i=null}),K())},i(c){o||(d(t.$$.fragment,c),d(i),o=!0)},o(c){$(t.$$.fragment,c),$(i),o=!1},d(c){c&&(y(n),y(e)),s[26](null),v(t,c),i&&i.d(c)}}}function A2(s){let t,n;return t=new Nt({props:{content:"You can only interact with your remote agent in this window.",triggerOn:[te.Hover],side:"bottom",$$slots:{default:[L2]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1073741824&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function M2(s){var e;let t,n;return t=new v1({props:{isDropdownOpen:s[5],isCurrConversationAgentic:s[3],agentExecutionMode:s[1],isBackgroundAgent:(e=s[2])==null?void 0:e.isActive,variant:"ghost",color:"neutral"}}),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,r){var c;const i={};32&r&&(i.isDropdownOpen=o[5]),8&r&&(i.isCurrConversationAgentic=o[3]),2&r&&(i.agentExecutionMode=o[1]),4&r&&(i.isBackgroundAgent=(c=o[2])==null?void 0:c.isActive),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){v(t,o)}}}function k2(s){let t,n,e,o,r,i,c,a,l;return o=new Qr({props:{icons:[`${qs.cmdOrCtrl}`,"."]}}),a=new Qr({props:{icons:[`${qs.cmdOrCtrl}`,`${Pf.shift}`,"."]}}),{c(){t=D("div"),n=D("div"),e=V(`Toggle forward
              `),g(o.$$.fragment),r=z(),i=D("div"),c=V(`or backward
              `),g(a.$$.fragment),k(t,"slot","content"),k(t,"class","c-toggle-mode-tooltip svelte-1t5cx1d")},m(u,m){_(u,t,m),P(t,n),P(n,e),h(o,n,null),P(t,r),P(t,i),P(i,c),h(a,i,null),l=!0},p:N,i(u){l||(d(o.$$.fragment,u),d(a.$$.fragment,u),l=!0)},o(u){$(o.$$.fragment,u),$(a.$$.fragment,u),l=!1},d(u){u&&y(t),v(o),v(a)}}}function S2(s){let t,n;return t=new Nt({props:{triggerOn:[te.Hover],side:"right",align:"start",$$slots:{content:[k2],default:[M2]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1073741870&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function qc(s){let t,n,e,o;return t=new yt.Separator({}),e=new br({props:{onSelect:s[25],description:"Run an agent in the cloud to lighten your workload.",isBackgroundAgent:!0,selected:s[6]==="remoteAgent"}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};64&i&&(c.selected=r[6]==="remoteAgent"),e.$set(c)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function T2(s){let t,n,e,o,r,i;n=new br({props:{onSelect:s[23],isConversationAgentic:!1,description:"Use chat for advice and general knowledge.",selected:s[6]==="chat"}}),o=new br({props:{onSelect:s[24],isConversationAgentic:!0,description:"Work with an agent on guided tasks.",selected:s[6]==="localAgent"}});let c=s[13]&&qc(s);return{c(){t=D("div"),g(n.$$.fragment),e=z(),g(o.$$.fragment),r=z(),c&&c.c(),k(t,"class","c-mode-display-dropdown svelte-1t5cx1d")},m(a,l){_(a,t,l),h(n,t,null),P(t,e),h(o,t,null),P(t,r),c&&c.m(t,null),i=!0},p(a,l){const u={};64&l&&(u.selected=a[6]==="chat"),n.$set(u);const m={};2&l&&(m.onSelect=a[24]),64&l&&(m.selected=a[6]==="localAgent"),o.$set(m),a[13]?c?(c.p(a,l),8192&l&&d(c,1)):(c=qc(a),c.c(),d(c,1),c.m(t,null)):c&&(Y(),$(c,1,1,()=>{c=null}),K())},i(a){i||(d(n.$$.fragment,a),d(o.$$.fragment,a),d(c),i=!0)},o(a){$(n.$$.fragment,a),$(o.$$.fragment,a),$(c),i=!1},d(a){a&&y(t),v(n),v(o),c&&c.d()}}}function E2(s){let t,n,e,o;return t=new yt.Trigger({props:{$$slots:{default:[S2]},$$scope:{ctx:s}}}),t.$on("click",D2),e=new yt.Content({props:{size:1,side:"top",align:"start",$$slots:{default:[T2]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};1073741870&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};1073750082&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function jc(s){let t,n,e;return n=new Nt({props:{content:s[7]?"":"Run tools automatically",triggerOn:[te.Hover],side:"bottom",$$slots:{default:[I2]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-toggle-mode-button__agent-toggle svelte-1t5cx1d")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};128&r&&(i.content=o[7]?"":"Run tools automatically"),1073741952&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function I2(s){let t,n;return t=new _f({props:{checked:s[7],size:2,onText:"Auto",offText:"Auto",ariaLabel:"Toggle between manual and auto agent mode"}}),t.$on("change",s[19]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};128&o&&(r.checked=e[7]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function L2(s){let t,n;return t=new v1({props:{isDropdownOpen:!1,isCurrConversationAgentic:!0,agentExecutionMode:Io.auto,isBackgroundAgent:!0,disabled:!0,variant:"ghost",color:"accent"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function R2(s){let t,n,e,o;const r=[A2,C2],i=[];function c(a,l){var u;return(u=a[2])!=null&&u.isRemoteAgentSshWindow?0:1}return n=c(s),e=i[n]=r[n](s),{c(){t=D("div"),e.c(),k(t,"class","c-toggle-mode-button svelte-1t5cx1d")},m(a,l){_(a,t,l),i[n].m(t,null),o=!0},p(a,[l]){let u=n;n=c(a),n===u?i[n].p(a,l):(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),e=i[n],e?e.p(a,l):(e=i[n]=r[n](a),e.c()),d(e,1),e.m(t,null))},i(a){o||(d(e),o=!0)},o(a){$(e),o=!1},d(a){a&&y(t),i[n].d()}}}const D2=s=>{s.stopPropagation()};function P2(s,t,n){let e,o,r,i,c,a,l,u,m,p,f,x,A,C,M=N,S=N,L=N,I=N,X=N,j=()=>(X(),X=oe(H,G=>n(22,C=G)),H);s.$$.on_destroy.push(()=>M()),s.$$.on_destroy.push(()=>S()),s.$$.on_destroy.push(()=>L()),s.$$.on_destroy.push(()=>I()),s.$$.on_destroy.push(()=>X());let{chatModel:H=Mt("chatModel")}=t;j();let{agentConversationModel:J=Mt("agentConversationModel")}=t;const U=Mt(on.key);kt(s,U,G=>n(2,p=G));const O=Mt(yr.key);let Z,et=!1;function Q(){O.reportModeSelectorEvent(Ai.select,Mi.chat),O.handleSetToChat(),Z==null||Z.requestClose()}async function ut(G){await O.reportModeSelectorEvent(Ai.select,Mi.agent),await O.handleSetToAgent(G),A===!1&&J.setHasEverUsedAgent(!0),Z==null||Z.requestClose()}function rt(){O.reportModeSelectorEvent(Ai.select,Mi.remoteAgent),O.handleSetToBackgroundAgent(),x===!1&&(U==null||U.setHasEverUsedRemoteAgent(!0)),Z==null||Z.requestClose()}let mt="chat";return En(()=>{O.reportModeSelectorInit()}),s.$$set=G=>{"chatModel"in G&&j(n(0,H=G.chatModel)),"agentConversationModel"in G&&n(20,J=G.agentConversationModel)},s.$$.update=()=>{4194304&s.$$.dirty&&n(13,e=C.flags.enableBackgroundAgents),4194304&s.$$.dirty&&n(21,o=C.flags.enableAgentAutoMode),1048576&s.$$.dirty&&(n(12,r=J.isCurrConversationAgentic),S(),S=oe(r,G=>n(3,f=G))),4194304&s.$$.dirty&&(n(11,i=C.agentExecutionMode),M(),M=oe(i,G=>n(1,m=G))),1048576&s.$$.dirty&&(n(10,c=J.hasEverUsedAgent),I(),I=oe(c,G=>n(28,A=G))),14&s.$$.dirty&&(p.isActive?n(6,mt="remoteAgent"):n(6,mt=f?m===Io.auto?"agentAuto":"localAgent":"chat")),2097164&s.$$.dirty&&n(8,l=f&&!p.isActive&&o),2&s.$$.dirty&&n(7,u=m===Io.auto)},n(9,a=U==null?void 0:U.hasEverUsedRemoteAgent),L(),L=oe(a,G=>n(27,x=G)),[H,m,p,f,Z,et,mt,u,l,a,c,i,r,e,U,function(G){n(5,et=G),G?O.reportModeSelectorOpen():O.reportModeSelectorClose()},Q,ut,rt,async function(){const G=u?Io.manual:Io.auto;await O.setToAgent(G)},J,o,C,()=>Q(),()=>ut(m),()=>rt(),function(G){Gt[G?"unshift":"push"](()=>{Z=G,n(4,Z)})}]}class N2 extends ct{constructor(t){super(),lt(this,t,P2,R2,it,{chatModel:0,agentConversationModel:20})}}function F2(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return{c(){t=ne("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=dn(t);n=$n(i,!0),i.forEach(y),this.h()},h(){n.a=null,ue(t,o)},m(r,i){mn(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M32 32C32 14.3 46.3 0 64 0h256c17.7 0 32 14.3 32 32s-14.3 32-32 32h-29.5l11.4 148.2c36.7 19.9 65.7 53.2 79.5 94.7l1 3c3.3 9.8 1.6 20.5-4.4 28.8S362.3 352 352 352H32c-10.3 0-19.9-4.9-26-13.3s-7.7-19.1-4.4-28.8l1-3c13.8-41.5 42.8-74.8 79.5-94.7L93.5 64H64c-17.7 0-32-14.3-32-32m128 352h64v96c0 17.7-14.3 32-32 32s-32-14.3-32-32z"/>',t)},p(r,[i]){ue(t,o=Ue(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},1&i&&r[0]]))},i:N,o:N,d(r){r&&y(t)}}}function z2(s,t,n){return s.$$set=e=>{n(0,t=It(It({},t),ae(e)))},[t=ae(t)]}class w1 extends ct{constructor(t){super(),lt(this,t,z2,F2,it,{})}}function O2(s){let t,n;return t=new la({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function B2(s){let t,n;return t=new w1({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function H2(s){let t,n,e,o;const r=[B2,O2],i=[];function c(a,l){return a[0]?0:1}return n=c(s),e=i[n]=r[n](s),{c(){t=D("span"),e.c(),k(t,"class","c-pin-button svelte-16rnrv4")},m(a,l){_(a,t,l),i[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n!==u&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),e=i[n],e||(e=i[n]=r[n](a),e.c()),d(e,1),e.m(t,null))},i(a){o||(d(e),o=!0)},o(a){$(e),o=!1},d(a){a&&y(t),i[n].d()}}}function U2(s){let t,n;return t=new ao.IconButton({props:{color:"neutral",$$slots:{default:[H2]},$$scope:{ctx:s}}}),t.$on("click",s[3]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};17&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function q2(s){let t,n;return t=new Nt({props:{content:s[2],$$slots:{default:[U2]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,[o]){const r={};4&o&&(r.content=e[2]),19&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function j2(s,t,n){let{isPinned:e=!1}=t,{onPin:o}=t,{title:r=e?"Unpin":"Pin to context"}=t;return s.$$set=i=>{"isPinned"in i&&n(0,e=i.isPinned),"onPin"in i&&n(1,o=i.onPin),"title"in i&&n(2,r=i.title)},[e,o,r,i=>{i.stopPropagation(),o()}]}class W2 extends ct{constructor(t){super(),lt(this,t,j2,q2,it,{isPinned:0,onPin:1,title:2})}}function V2(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return{c(){t=ne("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=dn(t);n=$n(i,!0),i.forEach(y),this.h()},h(){n.a=null,ue(t,o)},m(r,i){mn(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M156 32C100.6 32 48.8 46.6 27.1 53.6 10.3 59 0 74.5 0 91.1v312.4c0 26.1 24 44.2 48 40.2 19.8-3.3 54.8-7.7 100-7.7 54 0 97.5 25.5 112.5 35.6 7.5 5 16.8 8.4 27 8.4 11.5 0 21.6-4.2 29.3-9.9 13.4-9.8 52.3-34.1 111.2-34.1 47.7 0 80.5 4 99 7.2 23.9 4.1 49-13.8 49-40.6V91.1c0-16.5-10.3-32.1-27.1-37.5C527.2 46.6 475.4 32 420 32c-36.8 0-71.8 6.4-97.4 12.7-12.8 3.2-23.5 6.3-30.9 8.7-1.3.4-2.6.8-3.7 1.2-1.1-.4-2.4-.8-3.7-1.2-7.5-2.4-18.1-5.5-30.9-8.7C227.8 38.4 192.8 32 156 32m108 65.3v320.6c-26-13.7-67.2-29.9-116-29.9-42.9 0-77.4 3.7-100 7.1V97.3C70.3 90.6 112.4 80 156 80c31.6 0 62.6 5.6 85.9 11.3 8.6 2.1 16.1 4.2 22.1 6m48 319.2V97.3c6-1.8 13.5-3.9 22.1-6C357.4 85.6 388.4 80 420 80c43.6 0 85.7 10.6 108 17.3v297.4c-21.7-3.3-54.9-6.7-100-6.7-51.4 0-90.8 15-116 28.6z"/>',t)},p(r,[i]){ue(t,o=Ue(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},1&i&&r[0]]))},i:N,o:N,d(r){r&&y(t)}}}function G2(s,t,n){return s.$$set=e=>{n(0,t=It(It({},t),ae(e)))},[t=ae(t)]}class Y2 extends ct{constructor(t){super(),lt(this,t,G2,V2,it,{})}}function K2(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return{c(){t=ne("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=dn(t);n=$n(i,!0),i.forEach(y),this.h()},h(){n.a=null,ue(t,o)},m(r,i){mn(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M384 480h48c11.4 0 21.9-6 27.6-15.9l112-192c5.8-9.9 5.8-22.1.1-32.1s-16.2-16-27.7-16H144c-11.4 0-21.9 6-27.6 15.9L48 357.1V96c0-8.8 7.2-16 16-16h117.5c4.2 0 8.3 1.7 11.3 4.7l26.5 26.5c21 21 49.5 32.8 79.2 32.8H416c8.8 0 16 7.2 16 16v32h48v-32c0-35.3-28.7-64-64-64H298.5c-17 0-33.3-6.7-45.3-18.7l-26.5-26.6c-12-12-28.3-18.7-45.3-18.7H64C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h23.7z"/>',t)},p(r,[i]){ue(t,o=Ue(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},1&i&&r[0]]))},i:N,o:N,d(r){r&&y(t)}}}function X2(s,t,n){return s.$$set=e=>{n(0,t=It(It({},t),ae(e)))},[t=ae(t)]}class J2 extends ct{constructor(t){super(),lt(this,t,X2,K2,it,{})}}function Z2(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return{c(){t=ne("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=dn(t);n=$n(i,!0),i.forEach(y),this.h()},h(){n.a=null,ue(t,o)},m(r,i){mn(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M64 32C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H289.9L247 53.1A71.983 71.983 0 0 0 196.1 32zM48 96c0-8.8 7.2-16 16-16h132.1c6.4 0 12.5 2.5 17 7l45.3 45.3c7.5 7.5 17.7 11.7 28.3 11.7H448c8.8 0 16 7.2 16 16v256c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16zm305.2 168.2c6.3-3.6 9.5-11.2 6.8-17.9-1.7-4.3-3.7-8.4-5.9-12.4l-2-3.5c-2.4-4-5.1-7.9-7.9-11.5-4.5-5.7-12.6-6.8-18.9-3.1l-1.2.7c-8 4.6-17.9 3.5-25.9-1.2s-14.1-12.7-14.1-21.9V192c0-7.3-4.9-13.8-12.2-14.8-5.2-.7-10.5-1.1-15.8-1.1s-10.7.4-15.8 1.1c-7.2 1-12.2 7.5-12.2 14.8v1.4c0 9.3-6.1 17.3-14.1 21.9s-17.9 5.8-25.9 1.2l-1.2-.7c-6.3-3.6-14.4-2.6-18.9 3.1-2.9 3.7-5.5 7.5-8 11.5l-2 3.4c-2.2 4-4.2 8.2-5.9 12.5-2.7 6.8.4 14.3 6.8 17.9l1.2.7c8 4.6 12 13.8 12 23.1s-4 18.4-12 23.1l-1.2.7c-6.3 3.6-9.5 11.2-6.8 17.9 1.7 4.3 3.7 8.4 5.9 12.4l2.1 3.6c2.4 4 5 7.8 7.9 11.5 4.5 5.7 12.6 6.8 18.9 3.1l1.2-.7c8-4.6 17.9-3.5 25.9 1.2s14.1 12.7 14.1 21.9v1.4c0 7.3 4.9 13.8 12.2 14.8 5.2.7 10.5 1.1 15.8 1.1s10.7-.4 15.8-1.1c7.2-1 12.2-7.5 12.2-14.8v-1.4c0-9.3 6.1-17.3 14.1-21.9s17.9-5.8 25.9-1.2l1.2.7c6.3 3.6 14.4 2.6 18.9-3.1 2.9-3.6 5.5-7.5 7.9-11.4l2.1-3.6c2.2-4 4.2-8.1 5.9-12.4 2.7-6.8-.4-14.3-6.8-17.9l-1.2-.7c-8-4.6-12-13.8-12-23.1s4-18.5 12-23.1l1.2-.7zM221 288a35 35 0 1 1 70 0 35 35 0 1 1-70 0"/>',t)},p(r,[i]){ue(t,o=Ue(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&r[0]]))},i:N,o:N,d(r){r&&y(t)}}}function Q2(s,t,n){return s.$$set=e=>{n(0,t=It(It({},t),ae(e)))},[t=ae(t)]}class tv extends ct{constructor(t){super(),lt(this,t,Q2,Z2,it,{})}}function ev(s){let t,n;return t=new ua({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function nv(s){let t,n;return t=new Y2({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function ov(s){let t,n;return t=new tv({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function rv(s){let t,n;return t=new J2({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function sv(s){let t,n;return t=new mp({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function iv(s){let t,n,e,o;const r=[sv,rv,ov,nv,ev],i=[];function c(a,l){return a[0]==="file"?0:a[0]==="folder-opened"?1:a[0]==="root-folder"?2:a[0]==="book"?3:a[0]==="rule"?4:-1}return~(t=c(s))&&(n=i[t]=r[t](s)),{c(){n&&n.c(),e=gt()},m(a,l){~t&&i[t].m(a,l),_(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t!==u&&(n&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K()),~t?(n=i[t],n||(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),~t&&i[t].d(a)}}}function av(s,t,n){let{icon:e}=t;return s.$$set=o=>{"icon"in o&&n(0,e=o.icon)},[e]}class cv extends ct{constructor(t){super(),lt(this,t,av,iv,it,{icon:0})}}function Ys(s){switch(s){case Ss.DEFAULT:return gc;case Ss.PROTOTYPER:return Bg;case Ss.BRAINSTORM:return Og;case Ss.REVIEWER:return zg;default:return gc}}function lv(s){let t,n=s[0].label+"";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){1&o&&n!==(n=e[0].label+"")&&ht(t,n)},i:N,o:N,d(e){e&&y(t)}}}function uv(s){let t,n,e,o;return t=new ua({}),e=new Cn({props:{filepath:`${Pi}/${Ni}/${s[0].rule.path}`}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};1&i&&(c.filepath=`${Pi}/${Ni}/${r[0].rule.path}`),e.$set(c)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function dv(s){let t,n,e,o,r,i,c,a;return n=new Hg({props:{heightPx:32,floatHeight:4,animationDuration:2.25,$$slots:{default:[wv]},$$scope:{ctx:s}}}),r=new Ot({props:{size:2,weight:"medium",$$slots:{default:[yv]},$$scope:{ctx:s}}}),c=new Ot({props:{size:1,$$slots:{default:[xv]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),e=z(),o=D("div"),g(r.$$.fragment),i=z(),g(c.$$.fragment),k(t,"class","c-mention-hover-contents__personality-icon svelte-11069rs"),k(o,"class","c-mention-hover-contents__personality svelte-11069rs")},m(l,u){_(l,t,u),h(n,t,null),_(l,e,u),_(l,o,u),h(r,o,null),P(o,i),h(c,o,null),a=!0},p(l,u){const m={};3&u&&(m.$$scope={dirty:u,ctx:l}),n.$set(m);const p={};3&u&&(p.$$scope={dirty:u,ctx:l}),r.$set(p);const f={};3&u&&(f.$$scope={dirty:u,ctx:l}),c.$set(f)},i(l){a||(d(n.$$.fragment,l),d(r.$$.fragment,l),d(c.$$.fragment,l),a=!0)},o(l){$(n.$$.fragment,l),$(r.$$.fragment,l),$(c.$$.fragment,l),a=!1},d(l){l&&(y(t),y(e),y(o)),v(n),v(r),v(c)}}}function $v(s){var r,i;let t,n,e,o;return t=new Up({}),e=new Cn({props:{filepath:`${s[0].selection.pathName}:L${(r=s[0].selection.fullRange)==null?void 0:r.startLineNumber}-${(i=s[0].selection.fullRange)==null?void 0:i.endLineNumber}`}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(c,a){h(t,c,a),_(c,n,a),h(e,c,a),o=!0},p(c,a){var u,m;const l={};1&a&&(l.filepath=`${c[0].selection.pathName}:L${(u=c[0].selection.fullRange)==null?void 0:u.startLineNumber}-${(m=c[0].selection.fullRange)==null?void 0:m.endLineNumber}`),e.$set(l)},i(c){o||(d(t.$$.fragment,c),d(e.$$.fragment,c),o=!0)},o(c){$(t.$$.fragment,c),$(e.$$.fragment,c),o=!1},d(c){c&&y(n),v(t,c),v(e,c)}}}function mv(s){var o;let t,n,e=(s[0].userGuidelines.overLimit||((o=s[0].rulesAndGuidelinesState)==null?void 0:o.overLimit))&&Wc(s);return{c(){e&&e.c(),t=gt()},m(r,i){e&&e.m(r,i),_(r,t,i),n=!0},p(r,i){var c;r[0].userGuidelines.overLimit||(c=r[0].rulesAndGuidelinesState)!=null&&c.overLimit?e?(e.p(r,i),1&i&&d(e,1)):(e=Wc(r),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(r){n||(d(e),n=!0)},o(r){$(e),n=!1},d(r){r&&y(t),e&&e.d(r)}}}function pv(s){let t,n,e,o,r,i,c,a;return e=new Ug({}),r=new Cn({props:{class:"c-source-folder-item",filepath:s[0].sourceFolder.folderRoot}}),c=new qg({props:{class:"guidelines-filespan",sourceFolder:s[0].sourceFolder}}),{c(){t=D("div"),n=D("div"),g(e.$$.fragment),o=z(),g(r.$$.fragment),i=z(),g(c.$$.fragment),k(n,"class","l-source-folder-name svelte-11069rs"),k(t,"class","l-mention-hover-contents__source-folder")},m(l,u){_(l,t,u),P(t,n),h(e,n,null),P(n,o),h(r,n,null),P(t,i),h(c,t,null),a=!0},p(l,u){const m={};1&u&&(m.filepath=l[0].sourceFolder.folderRoot),r.$set(m);const p={};1&u&&(p.sourceFolder=l[0].sourceFolder),c.$set(p)},i(l){a||(d(e.$$.fragment,l),d(r.$$.fragment,l),d(c.$$.fragment,l),a=!0)},o(l){$(e.$$.fragment,l),$(r.$$.fragment,l),$(c.$$.fragment,l),a=!1},d(l){l&&y(t),v(e),v(r),v(c)}}}function fv(s){let t,n,e,o;return t=new jg({}),e=new Cn({props:{filepath:s[0].externalSource.name}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};1&i&&(c.filepath=r[0].externalSource.name),e.$set(c)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function gv(s){let t,n,e,o;return t=new Gp({}),e=new Cn({props:{filepath:s[0].folder.pathName}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};1&i&&(c.filepath=r[0].folder.pathName),e.$set(c)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function hv(s){let t,n,e,o;return t=new $a({}),e=new Cn({props:{filepath:s[0].recentFile.pathName}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};1&i&&(c.filepath=r[0].recentFile.pathName),e.$set(c)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function vv(s){let t,n,e,o;return t=new $a({}),e=new Cn({props:{filepath:s[0].file.pathName}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};1&i&&(c.filepath=r[0].file.pathName),e.$set(c)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function wv(s){let t,n,e;var o=Ys(s[0].personality.type);return o&&(t=vn(o,{})),{c(){t&&g(t.$$.fragment),n=gt()},m(r,i){t&&h(t,r,i),_(r,n,i),e=!0},p(r,i){if(1&i&&o!==(o=Ys(r[0].personality.type))){if(t){Y();const c=t;$(c.$$.fragment,1,0,()=>{v(c,1)}),K()}o?(t=vn(o,{}),g(t.$$.fragment),d(t.$$.fragment,1),h(t,n.parentNode,n)):t=null}},i(r){e||(t&&d(t.$$.fragment,r),e=!0)},o(r){t&&$(t.$$.fragment,r),e=!1},d(r){r&&y(n),t&&v(t,r)}}}function yv(s){let t,n=s[0].label+"";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){1&o&&n!==(n=e[0].label+"")&&ht(t,n)},d(e){e&&y(t)}}}function xv(s){let t,n=s[0].personality.description+"";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){1&o&&n!==(n=e[0].personality.description+"")&&ht(t,n)},d(e){e&&y(t)}}}function Wc(s){let t,n,e,o;const r=[_v,bv],i=[];function c(a,l){var u;return(u=a[0].rulesAndGuidelinesState)!=null&&u.overLimit?0:a[0].userGuidelines.overLimit?1:-1}return~(t=c(s))&&(n=i[t]=r[t](s)),{c(){n&&n.c(),e=gt()},m(a,l){~t&&i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?~t&&i[t].p(a,l):(n&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K()),~t?(n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),~t&&i[t].d(a)}}}function bv(s){let t,n;return t=new Ot({props:{size:1,$$slots:{default:[Cv]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};3&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function _v(s){let t,n;return t=new Ot({props:{size:1,$$slots:{default:[Av]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};3&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Cv(s){let t,n=`Guidelines exceeded length limit of ${s[0].userGuidelines.lengthLimit} characters`;return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){1&o&&n!==(n=`Guidelines exceeded length limit of ${e[0].userGuidelines.lengthLimit} characters`)&&ht(t,n)},d(e){e&&y(t)}}}function Av(s){let t,n=`Rules and workspace guidelines (${s[0].rulesAndGuidelinesState.totalCharacterCount} chars)
          exceeded limit of ${s[0].rulesAndGuidelinesState.lengthLimit} characters, remove some rules
          or reduce the length of your guidelines.`;return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){1&o&&n!==(n=`Rules and workspace guidelines (${e[0].rulesAndGuidelinesState.totalCharacterCount} chars)
          exceeded limit of ${e[0].rulesAndGuidelinesState.lengthLimit} characters, remove some rules
          or reduce the length of your guidelines.`)&&ht(t,n)},d(e){e&&y(t)}}}function Mv(s){let t,n,e,o,r,i,c,a,l,u,m,p,f;const x=[vv,hv,gv,fv,pv,mv,$v,dv,uv,lv],A=[];function C(M,S){return 1&S&&(n=null),1&S&&(e=null),1&S&&(o=null),1&S&&(r=null),1&S&&(i=null),1&S&&(c=null),1&S&&(a=null),1&S&&(l=null),1&S&&(u=null),n==null&&(n=!(!M[0]||!na(M[0]))),n?0:(e==null&&(e=!(!M[0]||!oa(M[0]))),e?1:(o==null&&(o=!(!M[0]||!ra(M[0]))),o?2:(r==null&&(r=!(!M[0]||!sa(M[0]))),r?3:(i==null&&(i=!(!M[0]||!ci(M[0]))),i?4:(c==null&&(c=!(!M[0]||!ia(M[0]))),c?5:(a==null&&(a=!(!M[0]||!aa(M[0]))),a?6:(l==null&&(l=!(!M[0]||!Sp(M[0]))),l?7:(u==null&&(u=!(!M[0]||!ca(M[0]))),u?8:9))))))))}return m=C(s,-1),p=A[m]=x[m](s),{c(){t=D("div"),p.c(),k(t,"class","c-mention-hover-contents svelte-11069rs")},m(M,S){_(M,t,S),A[m].m(t,null),f=!0},p(M,[S]){let L=m;m=C(M,S),m===L?A[m].p(M,S):(Y(),$(A[L],1,1,()=>{A[L]=null}),K(),p=A[m],p?p.p(M,S):(p=A[m]=x[m](M),p.c()),d(p,1),p.m(t,null))},i(M){f||(d(p),f=!0)},o(M){$(p),f=!1},d(M){M&&y(t),A[m].d()}}}function kv(s,t,n){let{option:e}=t;return s.$$set=o=>{"option"in o&&n(0,e=o.option)},[e]}class cs extends ct{constructor(t){super(),lt(this,t,kv,Mv,it,{option:0})}}const Sv=s=>({}),Vc=s=>({slot:"chaser"}),Tv=s=>({}),Gc=s=>({}),Ev=s=>({}),Yc=s=>({slot:"leftButtons"}),Iv=s=>({}),Kc=s=>({});function Xc(s){let t,n;return t=new Zg({props:{class:"c-pulse-chip-warning-icon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Lv(s){let t,n,e;const o=s[4].default,r=Xt(o,s,s[6],null);let i=s[3]&&Xc();return{c(){t=D("div"),r&&r.c(),n=z(),i&&i.c(),k(t,"class","c-context-badge__content svelte-gkpz0s")},m(c,a){_(c,t,a),r&&r.m(t,null),P(t,n),i&&i.m(t,null),e=!0},p(c,a){r&&r.p&&(!e||64&a)&&Jt(r,o,c,c[6],e?Qt(o,c[6],a,null):Zt(c[6]),null),c[3]?i?8&a&&d(i,1):(i=Xc(),i.c(),d(i,1),i.m(t,null)):i&&(Y(),$(i,1,1,()=>{i=null}),K())},i(c){e||(d(r,c),d(i),e=!0)},o(c){$(r,c),$(i),e=!1},d(c){c&&y(t),r&&r.d(c),i&&i.d()}}}function Rv(s){let t;const n=s[4].chaser,e=Xt(n,s,s[6],Vc);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r)&&Jt(e,n,o,o[6],t?Qt(n,o[6],r,Sv):Zt(o[6]),Vc)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function Dv(s){let t;const n=s[4].leftIcon,e=Xt(n,s,s[6],Gc),o=e||function(r){let i,c;return i=new mp({}),{c(){g(i.$$.fragment)},m(a,l){h(i,a,l),c=!0},i(a){c||(d(i.$$.fragment,a),c=!0)},o(a){$(i.$$.fragment,a),c=!1},d(a){v(i,a)}}}();return{c(){o&&o.c()},m(r,i){o&&o.m(r,i),t=!0},p(r,i){e&&e.p&&(!t||64&i)&&Jt(e,n,r,r[6],t?Qt(n,r[6],i,Tv):Zt(r[6]),Gc)},i(r){t||(d(o,r),t=!0)},o(r){$(o,r),t=!1},d(r){o&&o.d(r)}}}function Pv(s){let t;const n=s[4].leftButtons,e=Xt(n,s,s[6],Yc),o=e||function(r){let i,c,a;return c=new ao.IconButton({props:{disabled:!0,$$slots:{default:[Dv]},$$scope:{ctx:r}}}),{c(){i=D("div"),g(c.$$.fragment),k(i,"class","c-context-badge__left-icon svelte-gkpz0s")},m(l,u){_(l,i,u),h(c,i,null),a=!0},p(l,u){const m={};64&u&&(m.$$scope={dirty:u,ctx:l}),c.$set(m)},i(l){a||(d(c.$$.fragment,l),a=!0)},o(l){$(c.$$.fragment,l),a=!1},d(l){l&&y(i),v(c)}}}(s);return{c(){o&&o.c()},m(r,i){o&&o.m(r,i),t=!0},p(r,i){e?e.p&&(!t||64&i)&&Jt(e,n,r,r[6],t?Qt(n,r[6],i,Ev):Zt(r[6]),Yc):o&&o.p&&(!t||64&i)&&o.p(r,t?i:-1)},i(r){t||(d(o,r),t=!0)},o(r){$(o,r),t=!1},d(r){o&&o.d(r)}}}function Jc(s){let t,n;return t=new ao.IconButton({props:{class:"c-context-badge__remove-btn",title:s[2].title,size:s[1],variant:"ghost",color:"neutral",$$slots:{default:[Nv]},$$scope:{ctx:s}}}),t.$on("click",function(){xe(s[2].onRemove)&&s[2].onRemove.apply(this,arguments)}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){s=e;const r={};4&o&&(r.title=s[2].title),2&o&&(r.size=s[1]),64&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Nv(s){let t,n;return t=new ir({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Fv(s){let t,n,e;const o=s[4].rightButtons,r=Xt(o,s,s[6],Kc);let i=s[2]&&Jc(s);return{c(){r&&r.c(),t=z(),i&&i.c(),n=gt()},m(c,a){r&&r.m(c,a),_(c,t,a),i&&i.m(c,a),_(c,n,a),e=!0},p(c,a){r&&r.p&&(!e||64&a)&&Jt(r,o,c,c[6],e?Qt(o,c[6],a,Iv):Zt(c[6]),Kc),c[2]?i?(i.p(c,a),4&a&&d(i,1)):(i=Jc(c),i.c(),d(i,1),i.m(n.parentNode,n)):i&&(Y(),$(i,1,1,()=>{i=null}),K())},i(c){e||(d(r,c),d(i),e=!0)},o(c){$(r,c),$(i),e=!1},d(c){c&&(y(t),y(n)),r&&r.d(c),i&&i.d(c)}}}function zv(s){let t,n,e;return n=new ao.Root({props:{color:s[0],size:s[1],$$slots:{rightButtons:[Fv],leftButtons:[Pv],chaser:[Rv],default:[Lv]},$$scope:{ctx:s}}}),n.$on("click",s[5]),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-context-badge svelte-gkpz0s")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,[r]){const i={};1&r&&(i.color=o[0]),2&r&&(i.size=o[1]),78&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function Ov(s,t,n){let{$$slots:e={},$$scope:o}=t,{color:r="neutral"}=t,{size:i=1}=t,{removeBtn:c}=t,{showWarning:a}=t;return s.$$set=l=>{"color"in l&&n(0,r=l.color),"size"in l&&n(1,i=l.size),"removeBtn"in l&&n(2,c=l.removeBtn),"showWarning"in l&&n(3,a=l.showWarning),"$$scope"in l&&n(6,o=l.$$scope)},[r,i,c,a,e,function(l){hn.call(this,s,l)},o]}class Wo extends ct{constructor(t){super(),lt(this,t,Ov,zv,it,{color:0,size:1,removeBtn:2,showWarning:3})}}function Bv(s){let t,n;return{c(){t=ne("svg"),n=ne("path"),k(n,"fill-rule","evenodd"),k(n,"clip-rule","evenodd"),k(n,"d","M7.07095 0.650238C6.67391 0.650238 6.32977 0.925096 6.24198 1.31231L6.0039 2.36247C5.6249 2.47269 5.26335 2.62363 4.92436 2.81013L4.01335 2.23585C3.67748 2.02413 3.23978 2.07312 2.95903 2.35386L2.35294 2.95996C2.0722 3.2407 2.0232 3.6784 2.23493 4.01427L2.80942 4.92561C2.62307 5.2645 2.47227 5.62594 2.36216 6.00481L1.31209 6.24287C0.924883 6.33065 0.650024 6.6748 0.650024 7.07183V7.92897C0.650024 8.32601 0.924883 8.67015 1.31209 8.75794L2.36228 8.99603C2.47246 9.375 2.62335 9.73652 2.80979 10.0755L2.2354 10.9867C2.02367 11.3225 2.07267 11.7602 2.35341 12.041L2.95951 12.6471C3.24025 12.9278 3.67795 12.9768 4.01382 12.7651L4.92506 12.1907C5.26384 12.377 5.62516 12.5278 6.0039 12.6379L6.24198 13.6881C6.32977 14.0753 6.67391 14.3502 7.07095 14.3502H7.92809C8.32512 14.3502 8.66927 14.0753 8.75705 13.6881L8.99505 12.6383C9.37411 12.5282 9.73573 12.3773 10.0748 12.1909L10.986 12.7653C11.3218 12.977 11.7595 12.928 12.0403 12.6473L12.6464 12.0412C12.9271 11.7604 12.9761 11.3227 12.7644 10.9869L12.1902 10.076C12.3768 9.73688 12.5278 9.37515 12.638 8.99596L13.6879 8.75794C14.0751 8.67015 14.35 8.32601 14.35 7.92897V7.07183C14.35 6.6748 14.0751 6.33065 13.6879 6.24287L12.6381 6.00488C12.528 5.62578 12.3771 5.26414 12.1906 4.92507L12.7648 4.01407C12.9766 3.6782 12.9276 3.2405 12.6468 2.95975L12.0407 2.35366C11.76 2.07292 11.3223 2.02392 10.9864 2.23565L10.0755 2.80989C9.73622 2.62328 9.37437 2.47229 8.99505 2.36209L8.75705 1.31231C8.66927 0.925096 8.32512 0.650238 7.92809 0.650238H7.07095ZM4.92053 3.81251C5.44724 3.44339 6.05665 3.18424 6.71543 3.06839L7.07095 1.50024H7.92809L8.28355 3.06816C8.94267 3.18387 9.5524 3.44302 10.0794 3.81224L11.4397 2.9547L12.0458 3.56079L11.1882 4.92117C11.5573 5.44798 11.8164 6.0575 11.9321 6.71638L13.5 7.07183V7.92897L11.932 8.28444C11.8162 8.94342 11.557 9.55301 11.1878 10.0798L12.0453 11.4402L11.4392 12.0462L10.0787 11.1886C9.55192 11.5576 8.94241 11.8166 8.28355 11.9323L7.92809 13.5002H7.07095L6.71543 11.932C6.0569 11.8162 5.44772 11.5572 4.92116 11.1883L3.56055 12.046L2.95445 11.4399L3.81213 10.0794C3.4431 9.55266 3.18403 8.94326 3.06825 8.2845L1.50002 7.92897V7.07183L3.06818 6.71632C3.18388 6.05765 3.44283 5.44833 3.81171 4.92165L2.95398 3.561L3.56008 2.95491L4.92053 3.81251ZM9.02496 7.50008C9.02496 8.34226 8.34223 9.02499 7.50005 9.02499C6.65786 9.02499 5.97513 8.34226 5.97513 7.50008C5.97513 6.65789 6.65786 5.97516 7.50005 5.97516C8.34223 5.97516 9.02496 6.65789 9.02496 7.50008ZM9.92496 7.50008C9.92496 8.83932 8.83929 9.92499 7.50005 9.92499C6.1608 9.92499 5.07513 8.83932 5.07513 7.50008C5.07513 6.16084 6.1608 5.07516 7.50005 5.07516C8.83929 5.07516 9.92496 6.16084 9.92496 7.50008Z"),k(n,"fill","currentColor"),k(t,"width","15"),k(t,"height","15"),k(t,"viewBox","0 0 15 15"),k(t,"fill","none"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){_(e,t,o),P(t,n)},p:N,i:N,o:N,d(e){e&&y(t)}}}class Hv extends ct{constructor(t){super(),lt(this,t,null,Bv,it,{})}}function Zc(s,t,n){const e=s.slice();return e[1]=t[n],e}function Uv(s){let t;return{c(){t=V("Repos")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function qv(s){let t,n=s[1].sourceFolderGroup.length+"";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){2&o&&n!==(n=e[1].sourceFolderGroup.length+"")&&ht(t,n)},d(e){e&&y(t)}}}function jv(s){let t,n,e;n=new Ot({props:{size:1,$$slots:{default:[qv]},$$scope:{ctx:s}}});let o=[wf("accent"),{slot:"leftIcon"},{class:"c-multi-repo-chip__count"}],r={};for(let i=0;i<o.length;i+=1)r=It(r,o[i]);return{c(){t=D("div"),g(n.$$.fragment),vf(t,r),xt(t,"svelte-sqp0vc",!0)},m(i,c){_(i,t,c),h(n,t,null),e=!0},p(i,c){const a={};4098&c&&(a.$$scope={dirty:c,ctx:i}),n.$set(a),xt(t,"svelte-sqp0vc",!0)},i(i){e||(d(n.$$.fragment,i),e=!0)},o(i){$(n.$$.fragment,i),e=!1},d(i){i&&y(t),v(n)}}}function Wv(s){let t,n;return t=new cr({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Vv(s){let t,n;return t=new ao.IconButton({props:{title:"Open menu",variant:"ghost",color:"neutral",size:1,$$slots:{default:[Wv]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4096&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Gv(s){let t;return{c(){t=V("Repos")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Yv(s){let t,n,e=s[1].name+"";return{c(){t=V(e),n=z()},m(o,r){_(o,t,r),_(o,n,r)},p(o,r){4&r&&e!==(e=o[1].name+"")&&ht(t,e)},d(o){o&&(y(t),y(n))}}}function Qc(s){let t,n;return t=new Nt({props:{content:"Edit repo instructions",$$slots:{default:[Xv]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4100&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Kv(s){let t,n;return t=new Hv({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Xv(s){let t,n;const e=[s[5]];let o={$$slots:{default:[Kv]},$$scope:{ctx:s}};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return t=new se({props:o}),t.$on("click",function(){xe(s[1].onEditGuideline)&&s[1].onEditGuideline.apply(this,arguments)}),{c(){g(t.$$.fragment)},m(r,i){h(t,r,i),n=!0},p(r,i){s=r;const c=32&i?Ue(e,[Cr(s[5])]):{};4096&i&&(c.$$scope={dirty:i,ctx:s}),t.$set(c)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){v(t,r)}}}function Jv(s){let t,n;return t=new Ar({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Zv(s){let t,n;const e=[s[5]];let o={$$slots:{default:[Jv]},$$scope:{ctx:s}};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return t=new se({props:o}),t.$on("click",function(){xe(s[1].onRemove)&&s[1].onRemove.apply(this,arguments)}),{c(){g(t.$$.fragment)},m(r,i){h(t,r,i),n=!0},p(r,i){s=r;const c=32&i?Ue(e,[Cr(s[5])]):{};4096&i&&(c.$$scope={dirty:i,ctx:s}),t.$set(c)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){v(t,r)}}}function Qv(s){let t,n,e,o,r,i=s[1].onEditGuideline&&Qc(s);return e=new Nt({props:{content:"Remove repo from context",$$slots:{default:[Zv]},$$scope:{ctx:s}}}),{c(){t=D("div"),i&&i.c(),n=z(),g(e.$$.fragment),o=z(),k(t,"class","c-multi-repo-chip__dropdown-item__actions svelte-sqp0vc"),k(t,"slot","iconRight"),xt(t,"c-multi-repo-chip__dropdown-item__guideline-space",s[3]&&!s[1].onEditGuideline)},m(c,a){_(c,t,a),i&&i.m(t,null),P(t,n),h(e,t,null),P(t,o),r=!0},p(c,a){c[1].onEditGuideline?i?(i.p(c,a),4&a&&d(i,1)):(i=Qc(c),i.c(),d(i,1),i.m(t,n)):i&&(Y(),$(i,1,1,()=>{i=null}),K());const l={};4100&a&&(l.$$scope={dirty:a,ctx:c}),e.$set(l),(!r||12&a)&&xt(t,"c-multi-repo-chip__dropdown-item__guideline-space",c[3]&&!c[1].onEditGuideline)},i(c){r||(d(i),d(e.$$.fragment,c),r=!0)},o(c){$(i),$(e.$$.fragment,c),r=!1},d(c){c&&y(t),i&&i.d(),v(e)}}}function tl(s){let t,n;const e=[s[1],{class:"c-multi-repo-chip__dropdown-item"},{highlight:!1},{disabled:!0}];let o={$$slots:{iconRight:[Qv],default:[Yv]},$$scope:{ctx:s}};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return t=new yt.Item({props:o}),{c(){g(t.$$.fragment)},m(r,i){h(t,r,i),n=!0},p(r,i){const c=4&i?Ue(e,[Cr(r[1]),e[1],e[2],e[3]]):{};4108&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){v(t,r)}}}function t4(s){let t,n,e,o;t=new yt.Label({props:{$$slots:{default:[Gv]},$$scope:{ctx:s}}});let r=ee(s[2]),i=[];for(let a=0;a<r.length;a+=1)i[a]=tl(Zc(s,r,a));const c=a=>$(i[a],1,1,()=>{i[a]=null});return{c(){g(t.$$.fragment),n=z();for(let a=0;a<i.length;a+=1)i[a].c();e=gt()},m(a,l){h(t,a,l),_(a,n,l);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(a,l);_(a,e,l),o=!0},p(a,l){const u={};if(4096&l&&(u.$$scope={dirty:l,ctx:a}),t.$set(u),44&l){let m;for(r=ee(a[2]),m=0;m<r.length;m+=1){const p=Zc(a,r,m);i[m]?(i[m].p(p,l),d(i[m],1)):(i[m]=tl(p),i[m].c(),d(i[m],1),i[m].m(e.parentNode,e))}for(Y(),m=r.length;m<i.length;m+=1)c(m);K()}},i(a){if(!o){d(t.$$.fragment,a);for(let l=0;l<r.length;l+=1)d(i[l]);o=!0}},o(a){$(t.$$.fragment,a),i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)$(i[l]);o=!1},d(a){a&&(y(n),y(e)),v(t,a),rn(i,a)}}}function e4(s){let t,n,e,o;return t=new yt.Trigger({props:{$$slots:{default:[Vv]},$$scope:{ctx:s}}}),e=new yt.Content({props:{$$slots:{default:[t4]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};4096&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};4108&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function n4(s){let t,n;return t=new yt.Root({props:{slot:"rightButtons",$$slots:{default:[e4]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4108&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function o4(s){let t,n;return t=new Wo({props:{$$slots:{rightButtons:[n4],leftIcon:[jv],default:[Uv]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,[o]){const r={};4110&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function r4(s,t,n){let e,o,r,i,c,a=N,l=N,u=()=>(l(),l=oe(p,f=>n(6,c=f)),p);s.$$.on_destroy.push(()=>a()),s.$$.on_destroy.push(()=>l());let{item:m}=t,{chatModel:p}=t;return u(),s.$$set=f=>{"item"in f&&n(1,m=f.item),"chatModel"in f&&u(n(0,p=f.chatModel))},s.$$.update=()=>{64&s.$$.dirty&&(n(4,e=c==null?void 0:c.specialContextInputModel),a(),a=oe(e,f=>n(7,i=f))),2&s.$$.dirty&&n(2,o=m.sourceFolderGroup.map(f=>({filePath:f.sourceFolder.folderRoot,name:Bi(f.sourceFolder.folderRoot),onRemove:()=>{return x=f,i==null||i.markInactive(x),void(i==null?void 0:i.unpin(x));var x},onEditGuideline:()=>{return x=f.sourceFolder.folderRoot,void(p==null?void 0:p.extensionClient.openGuidelines(x));var x}}))),4&s.$$.dirty&&n(3,r=o.some(f=>f.onEditGuideline))},[p,m,o,r,e,{size:1,variant:"ghost-block",color:"neutral"},c]}class s4 extends ct{constructor(t){super(),lt(this,t,r4,o4,it,{item:1,chatModel:0})}}function i4(s){let t,n,e,o=(s[0]??"")+"";return{c(){t=D("pre"),n=D("code"),e=V(o),k(t,"class","c-selection-preview__code svelte-mrw7pf")},m(r,i){_(r,t,i),P(t,n),P(n,e)},p(r,i){1&i&&o!==(o=(r[0]??"")+"")&&ht(e,o)},i:N,o:N,d(r){r&&y(t)}}}function a4(s){let t,n,e,o;function r(a){s[5](a)}var i=s[8].default;function c(a,l){let u={text:a[0]??"",options:{automaticLayout:!0,lineNumbers:"off",wrappingIndent:"same",padding:{top:0,bottom:0},wordWrap:"off",contextmenu:!1,wordBasedSuggestions:"off",renderLineHighlight:"none",occurrencesHighlight:"off",selectionHighlight:!1,codeLens:!1,links:!1,hover:{enabled:!1},hideCursorInOverviewRuler:!0,renderWhitespace:"none",renderFinalNewline:"on"}};return a[1]!==void 0&&(u.editorInstance=a[1]),{props:u}}return i&&(t=vn(i,c(s)),Gt.push(()=>ke(t,"editorInstance",r))),{c(){t&&g(t.$$.fragment),e=gt()},m(a,l){t&&h(t,a,l),_(a,e,l),o=!0},p(a,l){if(i!==(i=a[8].default)){if(t){Y();const u=t;$(u.$$.fragment,1,0,()=>{v(u,1)}),K()}i?(t=vn(i,c(a)),Gt.push(()=>ke(t,"editorInstance",r)),g(t.$$.fragment),d(t.$$.fragment,1),h(t,e.parentNode,e)):t=null}else if(i){const u={};1&l&&(u.text=a[0]??""),!n&&2&l&&(n=!0,u.editorInstance=a[1],De(()=>n=!1)),t.$set(u)}},i(a){o||(t&&d(t.$$.fragment,a),o=!0)},o(a){t&&$(t.$$.fragment,a),o=!1},d(a){a&&y(e),t&&v(t,a)}}}function c4(s){let t,n,e,o=(s[0]??"")+"";return{c(){t=D("pre"),n=D("code"),e=V(o),k(t,"class","c-selection-preview__code svelte-mrw7pf")},m(r,i){_(r,t,i),P(t,n),P(n,e)},p(r,i){1&i&&o!==(o=(r[0]??"")+"")&&ht(e,o)},i:N,o:N,d(r){r&&y(t)}}}function l4(s){let t,n,e=s[3]&&function(o){let r,i,c={ctx:o,current:null,token:null,hasCatch:!0,pending:c4,then:a4,catch:i4,value:8,blocks:[,,,]};return Vs(o[3],c),{c(){r=gt(),c.block.c()},m(a,l){_(a,r,l),c.block.m(a,c.anchor=l),c.mount=()=>r.parentNode,c.anchor=r,i=!0},p(a,l){Vp(c,o=a,l)},i(a){i||(d(c.block),i=!0)},o(a){for(let l=0;l<3;l+=1){const u=c.blocks[l];$(u)}i=!1},d(a){a&&y(r),c.block.d(a),c.token=null,c=null}}}(s);return{c(){t=D("div"),e&&e.c(),k(t,"class","c-selection-hover-contents svelte-mrw7pf"),k(t,"style",s[2])},m(o,r){_(o,t,r),e&&e.m(t,null),n=!0},p(o,[r]){o[3]&&e.p(o,r),(!n||4&r)&&k(t,"style",o[2])},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d()}}}function u4(s,t,n){let{originalCode:e}=t;const o=Kp(()=>import("./index-DJGUS2rb.js").then(l=>l.d),__vite__mapDeps([0,1,2,3,4]),import.meta.url);let r,i="",c=!1;const a=async(l,u)=>{n(4,c=!0),n(2,i=`
         width: ${l}px;
         height: min(${u}px, 40vh);
    `)};return s.$$set=l=>{"originalCode"in l&&n(0,e=l.originalCode)},s.$$.update=()=>{2&s.$$.dirty&&(r==null||r.onDidContentSizeChange(l=>a(l.contentWidth,l.contentHeight))),18&s.$$.dirty&&r&&!c&&a(r==null?void 0:r.getContentWidth(),r==null?void 0:r.getContentHeight())},[e,r,i,o,c,function(l){r=l,n(1,r)}]}class d4 extends ct{constructor(t){super(),lt(this,t,u4,l4,it,{originalCode:0})}}function $4(s){let t,n;const e=s[2].default,o=Xt(e,s,s[3],null);return{c(){t=V(`Selection
    `),o&&o.c()},m(r,i){_(r,t,i),o&&o.m(r,i),n=!0},p(r,i){o&&o.p&&(!n||8&i)&&Jt(o,e,r,r[3],n?Qt(e,r[3],i,null):Zt(r[3]),null)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&y(t),o&&o.d(r)}}}function m4(s){let t,n;return t=new Up({props:{slot:"leftIcon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function p4(s){let t,n;return t=new Wo({props:{color:"info",removeBtn:{title:"Remove selection from context",onRemove:s[1]},$$slots:{leftIcon:[m4],default:[$4]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.removeBtn={title:"Remove selection from context",onRemove:e[1]}),8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function f4(s){let t,n;return t=new d4({props:{slot:"content",originalCode:s[0]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.originalCode=e[0]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function g4(s){let t,n;return t=new Nt({props:{maxWidth:"",$$slots:{content:[f4],default:[p4]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,[o]){const r={};11&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function h4(s,t,n){let{$$slots:e={},$$scope:o}=t,{originalCode:r}=t,{onRemove:i}=t;return s.$$set=c=>{"originalCode"in c&&n(0,r=c.originalCode),"onRemove"in c&&n(1,i=c.onRemove),"$$scope"in c&&n(3,o=c.$$scope)},[r,i,e,o]}class v4 extends ct{constructor(t){super(),lt(this,t,h4,g4,it,{originalCode:0,onRemove:1})}}function w4(s){let t,n;return t=new Nt({props:{content:"Edit guidelines for Augment Chat and Agent",$$slots:{default:[_4]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};130&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function y4(s){let t,n;return t=new Nt({props:{$$slots:{content:[k4],default:[M4]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};131&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function x4(s){let t;return{c(){t=V(s[1])},m(n,e){_(n,t,e)},p(n,e){2&e&&ht(t,n[1])},d(n){n&&y(t)}}}function b4(s){let t,n;return t=new Cf({props:{slot:"leftIcon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function _4(s){let t,n,e,o,r;return n=new Wo({props:{$$slots:{leftIcon:[b4],default:[x4]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"role","button"),k(t,"tabindex","0"),qn(t,"cursor","pointer")},m(i,c){_(i,t,c),h(n,t,null),e=!0,o||(r=[Et(t,"click",s[4]),Et(t,"keyup",yo("Enter",s[4]))],o=!0)},p(i,c){const a={};130&c&&(a.$$scope={dirty:c,ctx:i}),n.$set(a)},i(i){e||(d(n.$$.fragment,i),e=!0)},o(i){$(n.$$.fragment,i),e=!1},d(i){i&&y(t),v(n),o=!1,Ye(r)}}}function C4(s){let t,n,e,o;return{c(){t=D("div"),n=V(s[1]),k(t,"role","button"),k(t,"tabindex","0"),qn(t,"cursor","pointer")},m(r,i){_(r,t,i),P(t,n),e||(o=[Et(t,"click",nr(s[4])),Et(t,"keyup",yo("Enter",s[4]))],e=!0)},p(r,i){2&i&&ht(n,r[1])},d(r){r&&y(t),e=!1,Ye(o)}}}function A4(s){let t,n;return t=new Jn({props:{class:"c-user-guidelines-warning-icon",slot:"leftIcon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function M4(s){let t,n;return t=new Wo({props:{color:"warning",showWarning:!1,$$slots:{leftIcon:[A4],default:[C4]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};130&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function k4(s){let t,n;return t=new cs({props:{option:s[0],slot:"content"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.option=e[0]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function S4(s){let t,n,e,o;const r=[y4,w4],i=[];function c(a,l){return a[2]?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t===u?i[t].p(a,l):(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function T4(s,t,n){let e,o,r,i,{item:c}=t;const a=_g();return kt(s,a,l=>n(6,i=l)),s.$$set=l=>{"item"in l&&n(0,c=l.item)},s.$$.update=()=>{1&s.$$.dirty&&n(2,e=c.showWarning),64&s.$$.dirty&&n(5,o=(i==null?void 0:i.flags.enableRules)??!1),32&s.$$.dirty&&n(1,r=o?"Rules & Guidelines":"User Guidelines")},[c,r,e,a,function(){a&&a.extensionClient.openSettingsPage("guidelines")},o,i]}class E4 extends ct{constructor(t){super(),lt(this,t,T4,S4,it,{item:0})}}var y1,I4={exports:{}};y1=()=>(()=>{var s=[,(o,r,i)=>{i.r(r),i.d(r,{default:()=>l});var c,a=(c=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,function(u={}){var m,p,f=u;function x(){function w(tt){const ot=R;T=b=0,R=new Map,ot.forEach(ft=>{try{ft(tt)}catch(st){console.error(st)}}),this.ob(),F&&F.Tb()}let b=0,T=0,R=new Map,F=null,W=null;this.requestAnimationFrame=function(tt){b||(b=requestAnimationFrame(w.bind(this)));const ot=++T;return R.set(ot,tt),ot},this.cancelAnimationFrame=function(tt){R.delete(tt),b&&R.size==0&&(cancelAnimationFrame(b),b=0)},this.Rb=function(tt){W&&(document.body.remove(W),W=null),tt||(W=document.createElement("div"),W.style.backgroundColor="black",W.style.position="fixed",W.style.right=0,W.style.top=0,W.style.color="white",W.style.padding="4px",W.innerHTML="RIVE FPS",tt=function(ot){W.innerHTML="RIVE FPS "+ot.toFixed(1)},document.body.appendChild(W)),F=new function(){let ot=0,ft=0;this.Tb=function(){var st=performance.now();ft?(++ot,1e3<(st-=ft)&&(tt(1e3*ot/st),ot=ft=0)):(ft=st,ot=0)}}},this.Ob=function(){W&&(document.body.remove(W),W=null),F=null},this.ob=function(){}}function A(w){console.assert(!0);const b=new Map;let T=-1/0;this.push=function(R){return R=R+((1<<w)-1)>>w,b.has(R)&&clearTimeout(b.get(R)),b.set(R,setTimeout(function(){b.delete(R),b.length==0?T=-1/0:R==T&&(T=Math.max(...b.keys()),console.assert(T<R))},1e3)),T=Math.max(R,T),T<<w}}f.ready=new Promise((w,b)=>{m=w,p=b});const C=f.onRuntimeInitialized;f.onRuntimeInitialized=function(){C&&C();let w=f.decodeAudio;f.decodeAudio=function(F,W){W(F=w(F))};let b=f.decodeFont;f.decodeFont=function(F,W){W(F=b(F))};const T=f.FileAssetLoader;f.ptrToAsset=F=>{let W=f.ptrToFileAsset(F);return W.isImage?f.ptrToImageAsset(F):W.isFont?f.ptrToFontAsset(F):W.isAudio?f.ptrToAudioAsset(F):W},f.CustomFileAssetLoader=T.extend("CustomFileAssetLoader",{__construct:function({loadContents:F}){this.__parent.__construct.call(this),this.Gb=F},loadContents:function(F,W){return F=f.ptrToAsset(F),this.Gb(F,W)}}),f.CDNFileAssetLoader=T.extend("CDNFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this)},loadContents:function(F){let W=f.ptrToAsset(F);return(F=W.cdnUuid)!==""&&(tt=W.cdnBaseUrl+"/"+F,(ot=new XMLHttpRequest).responseType="arraybuffer",ot.onreadystatechange=function(){ot.readyState==4&&ot.status==200&&(ft=>{W.decode(new Uint8Array(ft.response))})(ot)},ot.open("GET",tt,!0),ot.send(null),!0);var tt,ot}}),f.FallbackFileAssetLoader=T.extend("FallbackFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this),this.kb=[]},addLoader:function(F){this.kb.push(F)},loadContents:function(F,W){for(let tt of this.kb)if(tt.loadContents(F,W))return!0;return!1}});let R=f.computeAlignment;f.computeAlignment=function(F,W,tt,ot,ft=1){return R.call(this,F,W,tt,ot,ft)}};const M="createConicGradient createImageData createLinearGradient createPattern createRadialGradient getContextAttributes getImageData getLineDash getTransform isContextLost isPointInPath isPointInStroke measureText".split(" "),S=new function(){function w(){if(!b){let Le=function(dt,At,le){if(At=Rt.createShader(At),Rt.shaderSource(At,le),Rt.compileShader(At),0<((le=Rt.getShaderInfoLog(At))||"").length)throw le;Rt.attachShader(dt,At)};var Vt=document.createElement("canvas"),Ut={alpha:1,depth:0,stencil:0,antialias:0,premultipliedAlpha:1,preserveDrawingBuffer:0,powerPreference:"high-performance",failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:1,renderViaOffscreenBackBuffer:1};let Rt;if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){if(Rt=Vt.getContext("webgl",Ut),T=1,!Rt)return console.log("No WebGL support. Image mesh will not be drawn."),!1}else if(Rt=Vt.getContext("webgl2",Ut))T=2;else{if(!(Rt=Vt.getContext("webgl",Ut)))return console.log("No WebGL support. Image mesh will not be drawn."),!1;T=1}if(Rt=new Proxy(Rt,{get:(dt,At)=>dt.isContextLost()?(ft||(console.error("Cannot render the mesh because the GL Context was lost. Tried to invoke ",At),ft=!0),typeof dt[At]=="function"?function(){}:void 0):typeof dt[At]=="function"?function(...le){return dt[At].apply(dt,le)}:dt[At],set(dt,At,le){if(!dt.isContextLost())return dt[At]=le,!0;ft||(console.error("Cannot render the mesh because the GL Context was lost. Tried to set property "+At),ft=!0)}}),R=Math.min(Rt.getParameter(Rt.MAX_RENDERBUFFER_SIZE),Rt.getParameter(Rt.MAX_TEXTURE_SIZE)),Le(Vt=Rt.createProgram(),Rt.VERTEX_SHADER,`attribute vec2 vertex;
                attribute vec2 uv;
                uniform vec4 mat;
                uniform vec2 translate;
                varying vec2 st;
                void main() {
                    st = uv;
                    gl_Position = vec4(mat2(mat) * vertex + translate, 0, 1);
                }`),Le(Vt,Rt.FRAGMENT_SHADER,`precision highp float;
                uniform sampler2D image;
                varying vec2 st;
                void main() {
                    gl_FragColor = texture2D(image, st);
                }`),Rt.bindAttribLocation(Vt,0,"vertex"),Rt.bindAttribLocation(Vt,1,"uv"),Rt.linkProgram(Vt),0<((Ut=Rt.getProgramInfoLog(Vt))||"").trim().length)throw Ut;F=Rt.getUniformLocation(Vt,"mat"),W=Rt.getUniformLocation(Vt,"translate"),Rt.useProgram(Vt),Rt.bindBuffer(Rt.ARRAY_BUFFER,Rt.createBuffer()),Rt.enableVertexAttribArray(0),Rt.enableVertexAttribArray(1),Rt.bindBuffer(Rt.ELEMENT_ARRAY_BUFFER,Rt.createBuffer()),Rt.uniform1i(Rt.getUniformLocation(Vt,"image"),0),Rt.pixelStorei(Rt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),b=Rt}return!0}let b=null,T=0,R=0,F=null,W=null,tt=0,ot=0,ft=!1;w(),this.hc=function(){return w(),R},this.Mb=function(Vt){b.deleteTexture&&b.deleteTexture(Vt)},this.Lb=function(Vt){if(!w())return null;const Ut=b.createTexture();return Ut?(b.bindTexture(b.TEXTURE_2D,Ut),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,Vt),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),T==2?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR_MIPMAP_LINEAR),b.generateMipmap(b.TEXTURE_2D)):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),Ut):null};const st=new A(8),zt=new A(8),Ht=new A(10),jt=new A(10);this.Qb=function(Vt,Ut,Rt,Le,dt){if(w()){var At=st.push(Vt),le=zt.push(Ut);if(b.canvas){for(var Je of(b.canvas.width==At&&b.canvas.height==le||(b.canvas.width=At,b.canvas.height=le),b.viewport(0,le-Ut,Vt,Ut),b.disable(b.SCISSOR_TEST),b.clearColor(0,0,0,0),b.clear(b.COLOR_BUFFER_BIT),b.enable(b.SCISSOR_TEST),Rt.sort((Re,$o)=>$o.wb-Re.wb),At=Ht.push(Le),tt!=At&&(b.bufferData(b.ARRAY_BUFFER,8*At,b.DYNAMIC_DRAW),tt=At),At=0,Rt))b.bufferSubData(b.ARRAY_BUFFER,At,Je.Ta),At+=4*Je.Ta.length;for(var Yn of(console.assert(At==4*Le),Rt))b.bufferSubData(b.ARRAY_BUFFER,At,Yn.Db),At+=4*Yn.Db.length;for(var Jo of(console.assert(At==8*Le),At=jt.push(dt),ot!=At&&(b.bufferData(b.ELEMENT_ARRAY_BUFFER,2*At,b.DYNAMIC_DRAW),ot=At),Je=0,Rt))b.bufferSubData(b.ELEMENT_ARRAY_BUFFER,Je,Jo.indices),Je+=2*Jo.indices.length;console.assert(Je==2*dt),Jo=0,Yn=!0,At=Je=0;for(const Re of Rt){Re.image.Ka!=Jo&&(b.bindTexture(b.TEXTURE_2D,Re.image.Ja||null),Jo=Re.image.Ka),Re.mc?(b.scissor(Re.Ya,le-Re.Za-Re.jb,Re.Ac,Re.jb),Yn=!0):Yn&&(b.scissor(0,le-Ut,Vt,Ut),Yn=!1),Rt=2/Vt;const $o=-2/Ut;b.uniform4f(F,Re.ha[0]*Rt*Re.Ba,Re.ha[1]*$o*Re.Ca,Re.ha[2]*Rt*Re.Ba,Re.ha[3]*$o*Re.Ca),b.uniform2f(W,Re.ha[4]*Rt*Re.Ba+Rt*(Re.Ya-Re.ic*Re.Ba)-1,Re.ha[5]*$o*Re.Ca+$o*(Re.Za-Re.jc*Re.Ca)+1),b.vertexAttribPointer(0,2,b.FLOAT,!1,0,At),b.vertexAttribPointer(1,2,b.FLOAT,!1,0,At+4*Le),b.drawElements(b.TRIANGLES,Re.indices.length,b.UNSIGNED_SHORT,Je),At+=4*Re.Ta.length,Je+=2*Re.indices.length}console.assert(At==4*Le),console.assert(Je==2*dt)}}},this.canvas=function(){return w()&&b.canvas}},L=f.onRuntimeInitialized;f.onRuntimeInitialized=function(){function w(bt){switch(bt){case st.srcOver:return"source-over";case st.screen:return"screen";case st.overlay:return"overlay";case st.darken:return"darken";case st.lighten:return"lighten";case st.colorDodge:return"color-dodge";case st.colorBurn:return"color-burn";case st.hardLight:return"hard-light";case st.softLight:return"soft-light";case st.difference:return"difference";case st.exclusion:return"exclusion";case st.multiply:return"multiply";case st.hue:return"hue";case st.saturation:return"saturation";case st.color:return"color";case st.luminosity:return"luminosity"}}function b(bt){return"rgba("+((16711680&bt)>>>16)+","+((65280&bt)>>>8)+","+((255&bt)>>>0)+","+((4278190080&bt)>>>24)/255+")"}function T(){0<le.length&&(S.Qb(At.drawWidth(),At.drawHeight(),le,Je,Yn),le=[],Yn=Je=0,At.reset(512,512));for(const bt of dt){for(const Wt of bt.H)Wt();bt.H=[]}dt.clear()}L&&L();var R=f.RenderPaintStyle;const F=f.RenderPath,W=f.RenderPaint,tt=f.Renderer,ot=f.StrokeCap,ft=f.StrokeJoin,st=f.BlendMode,zt=R.fill,Ht=R.stroke,jt=f.FillRule.evenOdd;let Vt=1;var Ut=f.RenderImage.extend("CanvasRenderImage",{__construct:function({la:bt,xa:Wt}={}){this.__parent.__construct.call(this),this.Ka=Vt,Vt=Vt+1&2147483647||1,this.la=bt,this.xa=Wt},__destruct:function(){this.Ja&&(S.Mb(this.Ja),URL.revokeObjectURL(this.Wa)),this.__parent.__destruct.call(this)},decode:function(bt){var Wt=this;Wt.xa&&Wt.xa(Wt);var Ce=new Image;Wt.Wa=URL.createObjectURL(new Blob([bt],{type:"image/png"})),Ce.onload=function(){Wt.Fb=Ce,Wt.Ja=S.Lb(Ce),Wt.size(Ce.width,Ce.height),Wt.la&&Wt.la(Wt)},Ce.src=Wt.Wa}}),Rt=F.extend("CanvasRenderPath",{__construct:function(){this.__parent.__construct.call(this),this.T=new Path2D},rewind:function(){this.T=new Path2D},addPath:function(bt,Wt,Ce,Ae,fe,Pe,Ne){var Oe=this.T,eo=Oe.addPath;bt=bt.T;const yn=new DOMMatrix;yn.a=Wt,yn.b=Ce,yn.c=Ae,yn.d=fe,yn.e=Pe,yn.f=Ne,eo.call(Oe,bt,yn)},fillRule:function(bt){this.Va=bt},moveTo:function(bt,Wt){this.T.moveTo(bt,Wt)},lineTo:function(bt,Wt){this.T.lineTo(bt,Wt)},cubicTo:function(bt,Wt,Ce,Ae,fe,Pe){this.T.bezierCurveTo(bt,Wt,Ce,Ae,fe,Pe)},close:function(){this.T.closePath()}}),Le=W.extend("CanvasRenderPaint",{color:function(bt){this.Xa=b(bt)},thickness:function(bt){this.Ib=bt},join:function(bt){switch(bt){case ft.miter:this.Ia="miter";break;case ft.round:this.Ia="round";break;case ft.bevel:this.Ia="bevel"}},cap:function(bt){switch(bt){case ot.butt:this.Ha="butt";break;case ot.round:this.Ha="round";break;case ot.square:this.Ha="square"}},style:function(bt){this.Hb=bt},blendMode:function(bt){this.Eb=w(bt)},clearGradient:function(){this.ja=null},linearGradient:function(bt,Wt,Ce,Ae){this.ja={yb:bt,zb:Wt,bb:Ce,cb:Ae,Ra:[]}},radialGradient:function(bt,Wt,Ce,Ae){this.ja={yb:bt,zb:Wt,bb:Ce,cb:Ae,Ra:[],ec:!0}},addStop:function(bt,Wt){this.ja.Ra.push({color:bt,stop:Wt})},completeGradient:function(){},draw:function(bt,Wt,Ce){let Ae=this.Hb;var fe=this.Xa,Pe=this.ja;if(bt.globalCompositeOperation=this.Eb,Pe!=null){fe=Pe.yb;var Ne=Pe.zb;const eo=Pe.bb;var Oe=Pe.cb;const yn=Pe.Ra;Pe.ec?(Pe=eo-fe,Oe-=Ne,fe=bt.createRadialGradient(fe,Ne,0,fe,Ne,Math.sqrt(Pe*Pe+Oe*Oe))):fe=bt.createLinearGradient(fe,Ne,eo,Oe);for(let mo=0,kn=yn.length;mo<kn;mo++)Ne=yn[mo],fe.addColorStop(Ne.stop,b(Ne.color));this.Xa=fe,this.ja=null}switch(Ae){case Ht:bt.strokeStyle=fe,bt.lineWidth=this.Ib,bt.lineCap=this.Ha,bt.lineJoin=this.Ia,bt.stroke(Wt);break;case zt:bt.fillStyle=fe,bt.fill(Wt,Ce)}}});const dt=new Set;let At=null,le=[],Je=0,Yn=0;var Jo=f.CanvasRenderer=tt.extend("Renderer",{__construct:function(bt){this.__parent.__construct.call(this),this.S=[1,0,0,1,0,0],this.C=bt.getContext("2d"),this.Ua=bt,this.H=[]},save:function(){this.S.push(...this.S.slice(this.S.length-6)),this.H.push(this.C.save.bind(this.C))},restore:function(){const bt=this.S.length-6;if(6>bt)throw"restore() called without matching save().";this.S.splice(bt),this.H.push(this.C.restore.bind(this.C))},transform:function(bt,Wt,Ce,Ae,fe,Pe){const Ne=this.S,Oe=Ne.length-6;Ne.splice(Oe,6,Ne[Oe]*bt+Ne[Oe+2]*Wt,Ne[Oe+1]*bt+Ne[Oe+3]*Wt,Ne[Oe]*Ce+Ne[Oe+2]*Ae,Ne[Oe+1]*Ce+Ne[Oe+3]*Ae,Ne[Oe]*fe+Ne[Oe+2]*Pe+Ne[Oe+4],Ne[Oe+1]*fe+Ne[Oe+3]*Pe+Ne[Oe+5]),this.H.push(this.C.transform.bind(this.C,bt,Wt,Ce,Ae,fe,Pe))},rotate:function(bt){const Wt=Math.sin(bt);bt=Math.cos(bt),this.transform(bt,Wt,-Wt,bt,0,0)},_drawPath:function(bt,Wt){this.H.push(Wt.draw.bind(Wt,this.C,bt.T,bt.Va===jt?"evenodd":"nonzero"))},_drawRiveImage:function(bt,Wt,Ce){var Ae=bt.Fb;if(Ae){var fe=this.C,Pe=w(Wt);this.H.push(function(){fe.globalCompositeOperation=Pe,fe.globalAlpha=Ce,fe.drawImage(Ae,0,0),fe.globalAlpha=1})}},_getMatrix:function(bt){const Wt=this.S,Ce=Wt.length-6;for(let Ae=0;6>Ae;++Ae)bt[Ae]=Wt[Ce+Ae]},_drawImageMesh:function(bt,Wt,Ce,Ae,fe,Pe,Ne,Oe,eo,yn){var mo=this.C.canvas.width,kn=this.C.canvas.height;const Qa=eo-Ne,tc=yn-Oe;Ne=Math.max(Ne,0),Oe=Math.max(Oe,0),eo=Math.min(eo,mo),yn=Math.min(yn,kn);const zr=eo-Ne,Or=yn-Oe;if(console.assert(zr<=Math.min(Qa,mo)),console.assert(Or<=Math.min(tc,kn)),!(0>=zr||0>=Or)){eo=zr<Qa||Or<tc,mo=yn=1;var Zo=Math.ceil(zr*yn),Qo=Math.ceil(Or*mo);kn=S.hc(),Zo>kn&&(yn*=kn/Zo,Zo=kn),Qo>kn&&(mo*=kn/Qo,Qo=kn),At||(At=new f.DynamicRectanizer(kn),At.reset(512,512)),0>(kn=At.addRect(Zo,Qo))&&(T(),dt.add(this),kn=At.addRect(Zo,Qo),console.assert(0<=kn));var ec=65535&kn,nc=kn>>16;le.push({ha:this.S.slice(this.S.length-6),image:bt,Ya:ec,Za:nc,ic:Ne,jc:Oe,Ac:Zo,jb:Qo,Ba:yn,Ca:mo,Ta:new Float32Array(Ae),Db:new Float32Array(fe),indices:new Uint16Array(Pe),mc:eo,wb:bt.Ka<<1|(eo?1:0)}),Je+=Ae.length,Yn+=Pe.length;var $r=this.C,ff=w(Wt);this.H.push(function(){$r.save(),$r.resetTransform(),$r.globalCompositeOperation=ff,$r.globalAlpha=Ce;const oc=S.canvas();oc&&$r.drawImage(oc,ec,nc,Zo,Qo,Ne,Oe,zr,Or),$r.restore()})}},_clipPath:function(bt){this.H.push(this.C.clip.bind(this.C,bt.T,bt.Va===jt?"evenodd":"nonzero"))},clear:function(){dt.add(this),this.H.push(this.C.clearRect.bind(this.C,0,0,this.Ua.width,this.Ua.height))},flush:function(){},translate:function(bt,Wt){this.transform(1,0,0,1,bt,Wt)}});f.makeRenderer=function(bt){const Wt=new Jo(bt),Ce=Wt.C;return new Proxy(Wt,{get(Ae,fe){if(typeof Ae[fe]=="function")return function(...Pe){return Ae[fe].apply(Ae,Pe)};if(typeof Ce[fe]=="function"){if(-1<M.indexOf(fe))throw Error("RiveException: Method call to '"+fe+"()' is not allowed, as the renderer cannot immediately pass through the return                 values of any canvas 2d context methods.");return function(...Pe){Wt.H.push(Ce[fe].bind(Ce,...Pe))}}return Ae[fe]},set(Ae,fe,Pe){if(fe in Ce)return Wt.H.push(()=>{Ce[fe]=Pe}),!0}})},f.decodeImage=function(bt,Wt){new Ut({la:Wt}).decode(bt)},f.renderFactory={makeRenderPaint:function(){return new Le},makeRenderPath:function(){return new Rt},makeRenderImage:function(){let bt=$o;return new Ut({xa:()=>{bt.total++},la:()=>{if(bt.loaded++,bt.loaded===bt.total){const Wt=bt.ready;Wt&&(Wt(),bt.ready=null)}}})}};let Re=f.load,$o=null;f.load=function(bt,Wt,Ce=!0){const Ae=new f.FallbackFileAssetLoader;return Wt!==void 0&&Ae.addLoader(Wt),Ce&&(Wt=new f.CDNFileAssetLoader,Ae.addLoader(Wt)),new Promise(function(fe){let Pe=null;$o={total:0,loaded:0,ready:function(){fe(Pe)}},Pe=Re(bt,Ae),$o.total==0&&fe(Pe)})};let pf=f.RendererWrapper.prototype.align;f.RendererWrapper.prototype.align=function(bt,Wt,Ce,Ae,fe=1){pf.call(this,bt,Wt,Ce,Ae,fe)},R=new x,f.requestAnimationFrame=R.requestAnimationFrame.bind(R),f.cancelAnimationFrame=R.cancelAnimationFrame.bind(R),f.enableFPSCounter=R.Rb.bind(R),f.disableFPSCounter=R.Ob,R.ob=T,f.resolveAnimationFrame=T,f.cleanup=function(){At&&At.delete()}};var I,X,j=Object.assign({},f),H="./this.program",J=typeof window=="object",U=typeof importScripts=="function",O="";(J||U)&&(U?O=self.location.href:typeof document<"u"&&document.currentScript&&(O=document.currentScript.src),c&&(O=c),O=O.indexOf("blob:")!==0?O.substr(0,O.replace(/[?#].*/,"").lastIndexOf("/")+1):"",U&&(X=w=>{var b=new XMLHttpRequest;return b.open("GET",w,!1),b.responseType="arraybuffer",b.send(null),new Uint8Array(b.response)}),I=(w,b,T)=>{var R=new XMLHttpRequest;R.open("GET",w,!0),R.responseType="arraybuffer",R.onload=()=>{R.status==200||R.status==0&&R.response?b(R.response):T()},R.onerror=T,R.send(null)});var Z,et=f.print||console.log.bind(console),Q=f.printErr||console.error.bind(console);Object.assign(f,j),j=null,f.thisProgram&&(H=f.thisProgram),f.wasmBinary&&(Z=f.wasmBinary),f.noExitRuntime,typeof WebAssembly!="object"&&me("no native wasm support detected");var ut,rt,mt,G,Tt,Bt,_t,Ct,Se,Te,sn=!1;function q(){var w=ut.buffer;f.HEAP8=mt=new Int8Array(w),f.HEAP16=Tt=new Int16Array(w),f.HEAP32=_t=new Int32Array(w),f.HEAPU8=G=new Uint8Array(w),f.HEAPU16=Bt=new Uint16Array(w),f.HEAPU32=Ct=new Uint32Array(w),f.HEAPF32=Se=new Float32Array(w),f.HEAPF64=Te=new Float64Array(w)}var E,B=[],nt=[],at=[];function wt(){var w=f.preRun.shift();B.unshift(w)}var vt,Dt=0,ie=null;function me(w){throw f.onAbort&&f.onAbort(w),Q(w="Aborted("+w+")"),sn=!0,w=new WebAssembly.RuntimeError(w+". Build with -sASSERTIONS for more info."),p(w),w}function St(w){return w.startsWith("data:application/octet-stream;base64,")}if(!St(vt="canvas_advanced.wasm")){var ze=vt;vt=f.locateFile?f.locateFile(ze,O):O+ze}function Ze(w){if(w==vt&&Z)return new Uint8Array(Z);if(X)return X(w);throw"both async and sync fetching of the wasm failed"}function ve(w,b,T){return function(R){if(!Z&&(J||U)){if(typeof fetch=="function"&&!R.startsWith("file://"))return fetch(R,{credentials:"same-origin"}).then(F=>{if(!F.ok)throw"failed to load wasm binary file at '"+R+"'";return F.arrayBuffer()}).catch(()=>Ze(R));if(I)return new Promise((F,W)=>{I(R,tt=>F(new Uint8Array(tt)),W)})}return Promise.resolve().then(()=>Ze(R))}(w).then(R=>WebAssembly.instantiate(R,b)).then(R=>R).then(T,R=>{Q("failed to asynchronously prepare wasm: "+R),me(R)})}var Qe,Ee,In={448252:(w,b,T,R,F)=>{if(typeof window>"u"||(window.AudioContext||window.webkitAudioContext)===void 0)return 0;if(window.h===void 0){window.h={Aa:0},window.h.I={},window.h.I.ya=w,window.h.I.capture=b,window.h.I.La=T,window.h.ga={},window.h.ga.stopped=R,window.h.ga.xb=F;let W=window.h;W.D=[],W.yc=function(tt){for(var ot=0;ot<W.D.length;++ot)if(W.D[ot]==null)return W.D[ot]=tt,ot;return W.D.push(tt),W.D.length-1},W.Cb=function(tt){for(W.D[tt]=null;0<W.D.length&&W.D[W.D.length-1]==null;)W.D.pop()},W.Sc=function(tt){for(var ot=0;ot<W.D.length;++ot)if(W.D[ot]==tt)return W.Cb(ot)},W.ra=function(tt){return W.D[tt]},W.Bb=["touchend","click"],W.unlock=function(){for(var tt=0;tt<W.D.length;++tt){var ot=W.D[tt];ot!=null&&ot.J!=null&&ot.state===W.ga.xb&&ot.J.resume().then(()=>{Ga(ot.pb)},ft=>{console.error("Failed to resume audiocontext",ft)})}W.Bb.map(function(ft){document.removeEventListener(ft,W.unlock,!0)})},W.Bb.map(function(tt){document.addEventListener(tt,W.unlock,!0)})}return window.h.Aa+=1,1},450430:()=>{window.h!==void 0&&(--window.h.Aa,window.h.Aa===0&&delete window.h)},450594:()=>navigator.mediaDevices!==void 0&&navigator.mediaDevices.getUserMedia!==void 0,450698:()=>{try{var w=new(window.AudioContext||window.webkitAudioContext),b=w.sampleRate;return w.close(),b}catch{return 0}},450869:(w,b,T,R,F,W)=>{if(window.h===void 0)return-1;var tt={},ot={};return w==window.h.I.ya&&T!=0&&(ot.sampleRate=T),tt.J=new(window.AudioContext||window.webkitAudioContext)(ot),tt.J.suspend(),tt.state=window.h.ga.stopped,T=0,w!=window.h.I.ya&&(T=b),tt.Z=tt.J.createScriptProcessor(R,T,b),tt.Z.onaudioprocess=function(ft){if(tt.sa!=null&&tt.sa.length!=0||(tt.sa=new Float32Array(Se.buffer,F,R*b)),w==window.h.I.capture||w==window.h.I.La){for(var st=0;st<b;st+=1)for(var zt=ft.inputBuffer.getChannelData(st),Ht=tt.sa,jt=0;jt<R;jt+=1)Ht[jt*b+st]=zt[jt];Ya(W,R,F)}if(w==window.h.I.ya||w==window.h.I.La)for(Ka(W,R,F),st=0;st<ft.outputBuffer.numberOfChannels;++st)for(zt=ft.outputBuffer.getChannelData(st),Ht=tt.sa,jt=0;jt<R;jt+=1)zt[jt]=Ht[jt*b+st];else for(st=0;st<ft.outputBuffer.numberOfChannels;++st)ft.outputBuffer.getChannelData(st).fill(0)},w!=window.h.I.capture&&w!=window.h.I.La||navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(ft){tt.Da=tt.J.createMediaStreamSource(ft),tt.Da.connect(tt.Z),tt.Z.connect(tt.J.destination)}).catch(function(ft){console.log("Failed to get user media: "+ft)}),w==window.h.I.ya&&tt.Z.connect(tt.J.destination),tt.pb=W,window.h.yc(tt)},453746:w=>window.h.ra(w).J.sampleRate,453819:w=>{(w=window.h.ra(w)).Z!==void 0&&(w.Z.onaudioprocess=function(){},w.Z.disconnect(),w.Z=void 0),w.Da!==void 0&&(w.Da.disconnect(),w.Da=void 0),w.J.close(),w.J=void 0,w.pb=void 0},454219:w=>{window.h.Cb(w)},454269:w=>{(w=window.h.ra(w)).J.resume(),w.state=window.h.ga.xb},454408:w=>{(w=window.h.ra(w)).J.suspend(),w.state=window.h.ga.stopped}},Be=w=>{for(;0<w.length;)w.shift()(f)},jn=(w,b)=>{for(var T=0,R=w.length-1;0<=R;R--){var F=w[R];F==="."?w.splice(R,1):F===".."?(w.splice(R,1),T++):T&&(w.splice(R,1),T--)}if(b)for(;T;T--)w.unshift("..");return w},wn=w=>{var b=w.charAt(0)==="/",T=w.substr(-1)==="/";return(w=jn(w.split("/").filter(R=>!!R),!b).join("/"))||b||(w="."),w&&T&&(w+="/"),(b?"/":"")+w},Ke=w=>{var b=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(w).slice(1);return w=b[0],b=b[1],w||b?(b&&(b=b.substr(0,b.length-1)),w+b):"."},tn=w=>{if(w==="/")return"/";var b=(w=(w=wn(w)).replace(/\/$/,"")).lastIndexOf("/");return b===-1?w:w.substr(b+1)},en=w=>(en=(()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return b=>crypto.getRandomValues(b);me("initRandomDevice")})())(w);function Bn(){for(var w="",b=!1,T=arguments.length-1;-1<=T&&!b;T--){if(typeof(b=0<=T?arguments[T]:"/")!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!b)return"";w=b+"/"+w,b=b.charAt(0)==="/"}return(b?"/":"")+(w=jn(w.split("/").filter(R=>!!R),!b).join("/"))||"."}var An=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,qe=(w,b,T)=>{var R=b+T;for(T=b;w[T]&&!(T>=R);)++T;if(16<T-b&&w.buffer&&An)return An.decode(w.subarray(b,T));for(R="";b<T;){var F=w[b++];if(128&F){var W=63&w[b++];if((224&F)==192)R+=String.fromCharCode((31&F)<<6|W);else{var tt=63&w[b++];65536>(F=(240&F)==224?(15&F)<<12|W<<6|tt:(7&F)<<18|W<<12|tt<<6|63&w[b++])?R+=String.fromCharCode(F):(F-=65536,R+=String.fromCharCode(55296|F>>10,56320|1023&F))}}else R+=String.fromCharCode(F)}return R},Ln=[],ro=w=>{for(var b=0,T=0;T<w.length;++T){var R=w.charCodeAt(T);127>=R?b++:2047>=R?b+=2:55296<=R&&57343>=R?(b+=4,++T):b+=3}return b},Wn=(w,b,T,R)=>{if(!(0<R))return 0;var F=T;R=T+R-1;for(var W=0;W<w.length;++W){var tt=w.charCodeAt(W);if(55296<=tt&&57343>=tt&&(tt=65536+((1023&tt)<<10)|1023&w.charCodeAt(++W)),127>=tt){if(T>=R)break;b[T++]=tt}else{if(2047>=tt){if(T+1>=R)break;b[T++]=192|tt>>6}else{if(65535>=tt){if(T+2>=R)break;b[T++]=224|tt>>12}else{if(T+3>=R)break;b[T++]=240|tt>>18,b[T++]=128|tt>>12&63}b[T++]=128|tt>>6&63}b[T++]=128|63&tt}}return b[T]=0,T-F};function Zn(w,b){var T=Array(ro(w)+1);return w=Wn(w,T,0,T.length),b&&(T.length=w),T}var qt=[];function Nn(w,b){qt[w]={input:[],F:[],V:b},Vo(w,Qn)}var Qn={open:function(w){var b=qt[w.node.za];if(!b)throw new Lt(43);w.s=b,w.seekable=!1},close:function(w){w.s.V.qa(w.s)},qa:function(w){w.s.V.qa(w.s)},read:function(w,b,T,R){if(!w.s||!w.s.V.ib)throw new Lt(60);for(var F=0,W=0;W<R;W++){try{var tt=w.s.V.ib(w.s)}catch{throw new Lt(29)}if(tt===void 0&&F===0)throw new Lt(6);if(tt==null)break;F++,b[T+W]=tt}return F&&(w.node.timestamp=Date.now()),F},write:function(w,b,T,R){if(!w.s||!w.s.V.Oa)throw new Lt(60);try{for(var F=0;F<R;F++)w.s.V.Oa(w.s,b[T+F])}catch{throw new Lt(29)}return R&&(w.node.timestamp=Date.now()),F}},Hn={ib:function(){t:{if(!Ln.length){var w=null;if(typeof window<"u"&&typeof window.prompt=="function"?(w=window.prompt("Input: "))!==null&&(w+=`
`):typeof readline=="function"&&(w=readline())!==null&&(w+=`
`),!w){w=null;break t}Ln=Zn(w,!0)}w=Ln.shift()}return w},Oa:function(w,b){b===null||b===10?(et(qe(w.F,0)),w.F=[]):b!=0&&w.F.push(b)},qa:function(w){w.F&&0<w.F.length&&(et(qe(w.F,0)),w.F=[])},bc:function(){return{Fc:25856,Hc:5,Ec:191,Gc:35387,Dc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},cc:function(){return 0},dc:function(){return[24,80]}},Vn={Oa:function(w,b){b===null||b===10?(Q(qe(w.F,0)),w.F=[]):b!=0&&w.F.push(b)},qa:function(w){w.F&&0<w.F.length&&(Q(qe(w.F,0)),w.F=[])}};function be(w,b){var T=w.j?w.j.length:0;T>=b||(b=Math.max(b,T*(1048576>T?2:1.125)>>>0),T!=0&&(b=Math.max(b,256)),T=w.j,w.j=new Uint8Array(b),0<w.v&&w.j.set(T.subarray(0,w.v),0))}var Me,He,Pt,Yt,Kt={O:null,U:()=>Kt.createNode(null,"/",16895,0),createNode(w,b,T,R){if((61440&T)==24576||(61440&T)==4096)throw new Lt(63);return Kt.O||(Kt.O={dir:{node:{Y:Kt.l.Y,P:Kt.l.P,ka:Kt.l.ka,va:Kt.l.va,ub:Kt.l.ub,Ab:Kt.l.Ab,vb:Kt.l.vb,sb:Kt.l.sb,Ea:Kt.l.Ea},stream:{ba:Kt.m.ba}},file:{node:{Y:Kt.l.Y,P:Kt.l.P},stream:{ba:Kt.m.ba,read:Kt.m.read,write:Kt.m.write,pa:Kt.m.pa,lb:Kt.m.lb,nb:Kt.m.nb}},link:{node:{Y:Kt.l.Y,P:Kt.l.P,ma:Kt.l.ma},stream:{}},$a:{node:{Y:Kt.l.Y,P:Kt.l.P},stream:Er}}),(61440&(T=pt(w,b,T,R)).mode)==16384?(T.l=Kt.O.dir.node,T.m=Kt.O.dir.stream,T.j={}):(61440&T.mode)==32768?(T.l=Kt.O.file.node,T.m=Kt.O.file.stream,T.v=0,T.j=null):(61440&T.mode)==40960?(T.l=Kt.O.link.node,T.m=Kt.O.link.stream):(61440&T.mode)==8192&&(T.l=Kt.O.$a.node,T.m=Kt.O.$a.stream),T.timestamp=Date.now(),w&&(w.j[b]=T,w.timestamp=T.timestamp),T},Kc:w=>w.j?w.j.subarray?w.j.subarray(0,w.v):new Uint8Array(w.j):new Uint8Array(0),l:{Y(w){var b={};return b.Jc=(61440&w.mode)==8192?w.id:1,b.Mc=w.id,b.mode=w.mode,b.Oc=1,b.uid=0,b.Lc=0,b.za=w.za,(61440&w.mode)==16384?b.size=4096:(61440&w.mode)==32768?b.size=w.v:(61440&w.mode)==40960?b.size=w.link.length:b.size=0,b.Bc=new Date(w.timestamp),b.Nc=new Date(w.timestamp),b.Ic=new Date(w.timestamp),b.Jb=4096,b.Cc=Math.ceil(b.size/b.Jb),b},P(w,b){if(b.mode!==void 0&&(w.mode=b.mode),b.timestamp!==void 0&&(w.timestamp=b.timestamp),b.size!==void 0&&(b=b.size,w.v!=b))if(b==0)w.j=null,w.v=0;else{var T=w.j;w.j=new Uint8Array(b),T&&w.j.set(T.subarray(0,Math.min(b,w.v))),w.v=b}},ka(){throw Un[44]},va:(w,b,T,R)=>Kt.createNode(w,b,T,R),ub(w,b,T){if((61440&w.mode)==16384){try{var R=_o(b,T)}catch{}if(R)for(var F in R.j)throw new Lt(55)}delete w.parent.j[w.name],w.parent.timestamp=Date.now(),w.name=T,b.j[T]=w,b.timestamp=w.parent.timestamp,w.parent=b},Ab(w,b){delete w.j[b],w.timestamp=Date.now()},vb(w,b){var T,R=_o(w,b);for(T in R.j)throw new Lt(55);delete w.j[b],w.timestamp=Date.now()},sb(w){var b,T=[".",".."];for(b in w.j)w.j.hasOwnProperty(b)&&T.push(b);return T},Ea:(w,b,T)=>((w=Kt.createNode(w,b,41471,0)).link=T,w),ma(w){if((61440&w.mode)!=40960)throw new Lt(28);return w.link}},m:{read(w,b,T,R,F){var W=w.node.j;if(F>=w.node.v)return 0;if(8<(w=Math.min(w.node.v-F,R))&&W.subarray)b.set(W.subarray(F,F+w),T);else for(R=0;R<w;R++)b[T+R]=W[F+R];return w},write(w,b,T,R,F,W){if(b.buffer===mt.buffer&&(W=!1),!R)return 0;if((w=w.node).timestamp=Date.now(),b.subarray&&(!w.j||w.j.subarray)){if(W)return w.j=b.subarray(T,T+R),w.v=R;if(w.v===0&&F===0)return w.j=b.slice(T,T+R),w.v=R;if(F+R<=w.v)return w.j.set(b.subarray(T,T+R),F),R}if(be(w,F+R),w.j.subarray&&b.subarray)w.j.set(b.subarray(T,T+R),F);else for(W=0;W<R;W++)w.j[F+W]=b[T+W];return w.v=Math.max(w.v,F+R),R},ba(w,b,T){if(T===1?b+=w.position:T===2&&(61440&w.node.mode)==32768&&(b+=w.node.v),0>b)throw new Lt(28);return b},pa(w,b,T){be(w.node,b+T),w.node.v=Math.max(w.node.v,b+T)},lb(w,b,T,R,F){if((61440&w.node.mode)!=32768)throw new Lt(43);if(w=w.node.j,2&F||w.buffer!==mt.buffer){if((0<T||T+b<w.length)&&(w=w.subarray?w.subarray(T,T+b):Array.prototype.slice.call(w,T,T+b)),T=!0,me(),!(b=void 0))throw new Lt(48);mt.set(w,b)}else T=!1,b=w.byteOffset;return{o:b,M:T}},nb:(w,b,T,R)=>(Kt.m.write(w,b,0,R,T,!1),0)}},ce=null,_e={},Ie=[],$e=1,pe=null,pn=!0,Lt=null,Un={},Mn=(w,b={})=>{if(!(w=Bn(w)))return{path:"",node:null};if(8<(b=Object.assign({gb:!0,Qa:0},b)).Qa)throw new Lt(32);w=w.split("/").filter(tt=>!!tt);for(var T=ce,R="/",F=0;F<w.length;F++){var W=F===w.length-1;if(W&&b.parent)break;if(T=_o(T,w[F]),R=wn(R+"/"+w[F]),T.wa&&(!W||W&&b.gb)&&(T=T.wa.root),!W||b.fb){for(W=0;(61440&T.mode)==40960;)if(T=lr(R),R=Bn(Ke(R),T),T=Mn(R,{Qa:b.Qa+1}).node,40<W++)throw new Lt(32)}}return{path:R,node:T}},bo=w=>{for(var b;;){if(w===w.parent)return w=w.U.mb,b?w[w.length-1]!=="/"?`${w}/${b}`:w+b:w;b=b?`${w.name}/${b}`:w.name,w=w.parent}},No=(w,b)=>{for(var T=0,R=0;R<b.length;R++)T=(T<<5)-T+b.charCodeAt(R)|0;return(w+T>>>0)%pe.length},_o=(w,b)=>{var T;if(T=(T=Ft(w,"x"))?T:w.l.ka?0:2)throw new Lt(T,w);for(T=pe[No(w.id,b)];T;T=T.lc){var R=T.name;if(T.parent.id===w.id&&R===b)return T}return w.l.ka(w,b)},pt=(w,b,T,R)=>(w=new ja(w,b,T,R),b=No(w.parent.id,w.name),w.lc=pe[b],pe[b]=w),we=w=>{var b=["r","w","rw"][3&w];return 512&w&&(b+="w"),b},Ft=(w,b)=>pn?0:!b.includes("r")||292&w.mode?b.includes("w")&&!(146&w.mode)||b.includes("x")&&!(73&w.mode)?2:0:2,je=(w,b)=>{try{return _o(w,b),20}catch{}return Ft(w,"wx")},fn=w=>{if(!(w=Ie[w]))throw new Lt(8);return w},Fo=(w,b=-1)=>(Pt||((Pt=function(){this.h={}}).prototype={},Object.defineProperties(Pt.prototype,{object:{get(){return this.node},set(T){this.node=T}},flags:{get(){return this.h.flags},set(T){this.h.flags=T}},position:{get(){return this.h.position},set(T){this.h.position=T}}})),w=Object.assign(new Pt,w),b==-1&&(b=(()=>{for(var T=0;4096>=T;T++)if(!Ie[T])return T;throw new Lt(33)})()),w.X=b,Ie[b]=w),Er={open:w=>{w.m=_e[w.node.za].m,w.m.open&&w.m.open(w)},ba:()=>{throw new Lt(70)}},Vo=(w,b)=>{_e[w]={m:b}},Go=(w,b)=>{var T=b==="/",R=!b;if(T&&ce)throw new Lt(10);if(!T&&!R){var F=Mn(b,{gb:!1});if(b=F.path,(F=F.node).wa)throw new Lt(10);if((61440&F.mode)!=16384)throw new Lt(54)}b={type:w,Qc:{},mb:b,kc:[]},(w=w.U(b)).U=b,b.root=w,T?ce=w:F&&(F.wa=b,F.U&&F.U.kc.push(b))},bn=(w,b,T)=>{var R=Mn(w,{parent:!0}).node;if(!(w=tn(w))||w==="."||w==="..")throw new Lt(28);var F=je(R,w);if(F)throw new Lt(F);if(!R.l.va)throw new Lt(63);return R.l.va(R,w,b,T)},Yo=(w,b,T)=>{T===void 0&&(T=b,b=438),bn(w,8192|b,T)},Rn=(w,b)=>{if(!Bn(w))throw new Lt(44);var T=Mn(b,{parent:!0}).node;if(!T)throw new Lt(44);b=tn(b);var R=je(T,b);if(R)throw new Lt(R);if(!T.l.Ea)throw new Lt(63);T.l.Ea(T,b,w)},lr=w=>{if(!(w=Mn(w).node))throw new Lt(44);if(!w.l.ma)throw new Lt(28);return Bn(bo(w.parent),w.l.ma(w))},so=(w,b,T)=>{if(w==="")throw new Lt(44);if(typeof b=="string"){var R={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[b];if(R===void 0)throw Error(`Unknown file open mode: ${b}`);b=R}if(T=64&b?4095&(T===void 0?438:T)|32768:0,typeof w=="object")var F=w;else{w=wn(w);try{F=Mn(w,{fb:!(131072&b)}).node}catch{}}if(R=!1,64&b)if(F){if(128&b)throw new Lt(20)}else F=bn(w,T,0),R=!0;if(!F)throw new Lt(44);if((61440&F.mode)==8192&&(b&=-513),65536&b&&(61440&F.mode)!=16384)throw new Lt(54);if(!R&&(T=F?(61440&F.mode)==40960?32:(61440&F.mode)==16384&&(we(b)!=="r"||512&b)?31:Ft(F,we(b)):44))throw new Lt(T);if(512&b&&!R){if(!(T=typeof(T=F)=="string"?Mn(T,{fb:!0}).node:T).l.P)throw new Lt(63);if((61440&T.mode)==16384)throw new Lt(31);if((61440&T.mode)!=32768)throw new Lt(28);if(R=Ft(T,"w"))throw new Lt(R);T.l.P(T,{size:0,timestamp:Date.now()})}return b&=-131713,(F=Fo({node:F,path:bo(F),flags:b,seekable:!0,position:0,m:F.m,zc:[],error:!1})).m.open&&F.m.open(F),!f.logReadFiles||1&b||(Yt||(Yt={}),w in Yt||(Yt[w]=1)),F},us=(w,b,T)=>{if(w.X===null)throw new Lt(8);if(!w.seekable||!w.m.ba)throw new Lt(70);if(T!=0&&T!=1&&T!=2)throw new Lt(28);w.position=w.m.ba(w,b,T),w.zc=[]},Ca=()=>{Lt||((Lt=function(w,b){this.name="ErrnoError",this.node=b,this.pc=function(T){this.aa=T},this.pc(w),this.message="FS error"}).prototype=Error(),Lt.prototype.constructor=Lt,[44].forEach(w=>{Un[w]=new Lt(w),Un[w].stack="<generic error, no stack>"}))},Ir=(w,b,T)=>{w=wn("/dev/"+w);var R=function(W,tt){var ot=0;return W&&(ot|=365),tt&&(ot|=146),ot}(!!b,!!T);He||(He=64);var F=He++<<8;Vo(F,{open:W=>{W.seekable=!1},close:()=>{T&&T.buffer&&T.buffer.length&&T(10)},read:(W,tt,ot,ft)=>{for(var st=0,zt=0;zt<ft;zt++){try{var Ht=b()}catch{throw new Lt(29)}if(Ht===void 0&&st===0)throw new Lt(6);if(Ht==null)break;st++,tt[ot+zt]=Ht}return st&&(W.node.timestamp=Date.now()),st},write:(W,tt,ot,ft)=>{for(var st=0;st<ft;st++)try{T(tt[ot+st])}catch{throw new Lt(29)}return ft&&(W.node.timestamp=Date.now()),st}}),Yo(w,R,F)},Ko={},ds=void 0;function Co(){return _t[(ds+=4)-4>>2]}function Aa(w){if(w===void 0)return"_unknown";var b=(w=w.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=b&&57>=b?`_${w}`:w}function $s(w,b){return w=Aa(w),{[w]:function(){return b.apply(this,arguments)}}[w]}function Ma(){this.M=[void 0],this.hb=[]}var to=new Ma,ur=void 0;function ge(w){throw new ur(w)}var io=w=>(w||ge("Cannot use deleted val. handle = "+w),to.get(w).value),lo=w=>{switch(w){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return to.pa({tb:1,value:w})}};function ka(w){var b=Error,T=$s(w,function(R){this.name=w,this.message=R,(R=Error(R).stack)!==void 0&&(this.stack=this.toString()+`
`+R.replace(/^Error(:[^\n]*)?\n/,""))});return T.prototype=Object.create(b.prototype),T.prototype.constructor=T,T.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},T}var Sa=void 0,Ta=void 0;function an(w){for(var b="";G[w];)b+=Ta[G[w++]];return b}var Lr=[];function mi(){for(;Lr.length;){var w=Lr.pop();w.g.fa=!1,w.delete()}}var Rr=void 0,Ao={};function pi(w,b){for(b===void 0&&ge("ptr should not be undefined");w.A;)b=w.na(b),w=w.A;return b}var Xo={};function Ea(w){var b=an(w=Ja(w));return So(w),b}function Dr(w,b){var T=Xo[w];return T===void 0&&ge(b+" has unknown type "+Ea(w)),T}function ms(){}var fi=!1;function Ia(w){--w.count.value,w.count.value===0&&(w.G?w.L.W(w.G):w.u.i.W(w.o))}function La(w,b,T){return b===T?w:T.A===void 0||(w=La(w,b,T.A))===null?null:T.Pb(w)}var Ra={},Da=void 0;function ps(w){throw new Da(w)}function fs(w,b){return b.u&&b.o||ps("makeClassHandle requires ptr and ptrType"),!!b.L!=!!b.G&&ps("Both smartPtrType and smartPtr must be specified"),b.count={value:1},Pr(Object.create(w,{g:{value:b}}))}function Pr(w){return typeof FinalizationRegistry>"u"?(Pr=b=>b,w):(fi=new FinalizationRegistry(b=>{Ia(b.g)}),ms=b=>{fi.unregister(b)},(Pr=b=>{var T=b.g;return T.G&&fi.register(b,{g:T},b),b})(w))}var gs={};function Nr(w){for(;w.length;){var b=w.pop();w.pop()(b)}}function Fr(w){return this.fromWireType(_t[w>>2])}var dr={},hs={};function Gn(w,b,T){function R(ot){(ot=T(ot)).length!==w.length&&ps("Mismatched type converter count");for(var ft=0;ft<w.length;++ft)uo(w[ft],ot[ft])}w.forEach(function(ot){hs[ot]=b});var F=Array(b.length),W=[],tt=0;b.forEach((ot,ft)=>{Xo.hasOwnProperty(ot)?F[ft]=Xo[ot]:(W.push(ot),dr.hasOwnProperty(ot)||(dr[ot]=[]),dr[ot].push(()=>{F[ft]=Xo[ot],++tt===W.length&&R(F)}))}),W.length===0&&R(F)}function vs(w){switch(w){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${w}`)}}function uo(w,b,T={}){if(!("argPackAdvance"in b))throw new TypeError("registerType registeredInstance requires argPackAdvance");(function(R,F,W={}){var tt=F.name;if(R||ge(`type "${tt}" must have a positive integer typeid pointer`),Xo.hasOwnProperty(R)){if(W.$b)return;ge(`Cannot register type '${tt}' twice`)}Xo[R]=F,delete hs[R],dr.hasOwnProperty(R)&&(F=dr[R],delete dr[R],F.forEach(ot=>ot()))})(w,b,T)}function gi(w){ge(w.g.u.i.name+" instance already deleted")}function zo(){}function hi(w,b,T){if(w[b].B===void 0){var R=w[b];w[b]=function(){return w[b].B.hasOwnProperty(arguments.length)||ge(`Function '${T}' called with an invalid number of arguments (${arguments.length}) - expects one of (${w[b].B})!`),w[b].B[arguments.length].apply(this,arguments)},w[b].B=[],w[b].B[R.ea]=R}}function vi(w,b,T){f.hasOwnProperty(w)?((T===void 0||f[w].B!==void 0&&f[w].B[T]!==void 0)&&ge(`Cannot register public name '${w}' twice`),hi(f,w,w),f.hasOwnProperty(T)&&ge(`Cannot register multiple overloads of a function with the same number of arguments (${T})!`),f[w].B[T]=b):(f[w]=b,T!==void 0&&(f[w].Pc=T))}function Q1(w,b,T,R,F,W,tt,ot){this.name=w,this.constructor=b,this.N=T,this.W=R,this.A=F,this.Ub=W,this.na=tt,this.Pb=ot,this.qb=[]}function ws(w,b,T){for(;b!==T;)b.na||ge(`Expected null or instance of ${T.name}, got an instance of ${b.name}`),w=b.na(w),b=b.A;return w}function tf(w,b){return b===null?(this.Na&&ge(`null is not a valid ${this.name}`),0):(b.g||ge(`Cannot pass "${yi(b)}" as a ${this.name}`),b.g.o||ge(`Cannot pass deleted object as a pointer of type ${this.name}`),ws(b.g.o,b.g.u.i,this.i))}function ef(w,b){if(b===null){if(this.Na&&ge(`null is not a valid ${this.name}`),this.ua){var T=this.Pa();return w!==null&&w.push(this.W,T),T}return 0}if(b.g||ge(`Cannot pass "${yi(b)}" as a ${this.name}`),b.g.o||ge(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.ta&&b.g.u.ta&&ge(`Cannot convert argument of type ${b.g.L?b.g.L.name:b.g.u.name} to parameter type ${this.name}`),T=ws(b.g.o,b.g.u.i,this.i),this.ua)switch(b.g.G===void 0&&ge("Passing raw pointer to smart pointer is illegal"),this.tc){case 0:b.g.L===this?T=b.g.G:ge(`Cannot convert argument of type ${b.g.L?b.g.L.name:b.g.u.name} to parameter type ${this.name}`);break;case 1:T=b.g.G;break;case 2:if(b.g.L===this)T=b.g.G;else{var R=b.clone();T=this.oc(T,lo(function(){R.delete()})),w!==null&&w.push(this.W,T)}break;default:ge("Unsupporting sharing policy")}return T}function nf(w,b){return b===null?(this.Na&&ge(`null is not a valid ${this.name}`),0):(b.g||ge(`Cannot pass "${yi(b)}" as a ${this.name}`),b.g.o||ge(`Cannot pass deleted object as a pointer of type ${this.name}`),b.g.u.ta&&ge(`Cannot convert argument of type ${b.g.u.name} to parameter type ${this.name}`),ws(b.g.o,b.g.u.i,this.i))}function Mo(w,b,T,R){this.name=w,this.i=b,this.Na=T,this.ta=R,this.ua=!1,this.W=this.oc=this.Pa=this.rb=this.tc=this.nc=void 0,b.A!==void 0?this.toWireType=ef:(this.toWireType=R?tf:nf,this.K=null)}function Pa(w,b,T){f.hasOwnProperty(w)||ps("Replacing nonexistant public symbol"),f[w].B!==void 0&&T!==void 0?f[w].B[T]=b:(f[w]=b,f[w].ea=T)}var ys=[],Na=w=>{var b=ys[w];return b||(w>=ys.length&&(ys.length=w+1),ys[w]=b=E.get(w)),b};function Dn(w,b){var T=(w=an(w)).includes("j")?((R,F)=>{var W=[];return function(){if(W.length=0,Object.assign(W,arguments),R.includes("j")){var tt=f["dynCall_"+R];tt=W&&W.length?tt.apply(null,[F].concat(W)):tt.call(null,F)}else tt=Na(F).apply(null,W);return tt}})(w,b):Na(b);return typeof T!="function"&&ge(`unknown function pointer with signature ${w}: ${b}`),T}var Fa=void 0;function ko(w,b){var T=[],R={};throw b.forEach(function F(W){R[W]||Xo[W]||(hs[W]?hs[W].forEach(F):(T.push(W),R[W]=!0))}),new Fa(`${w}: `+T.map(Ea).join([", "]))}function xs(w,b,T,R,F){var W=b.length;2>W&&ge("argTypes array size mismatch! Must at least get return value and 'this' types!");var tt=b[1]!==null&&T!==null,ot=!1;for(T=1;T<b.length;++T)if(b[T]!==null&&b[T].K===void 0){ot=!0;break}var ft=b[0].name!=="void",st=W-2,zt=Array(st),Ht=[],jt=[];return function(){if(arguments.length!==st&&ge(`function ${w} called with ${arguments.length} arguments, expected ${st} args!`),jt.length=0,Ht.length=tt?2:1,Ht[0]=F,tt){var Vt=b[1].toWireType(jt,this);Ht[1]=Vt}for(var Ut=0;Ut<st;++Ut)zt[Ut]=b[Ut+2].toWireType(jt,arguments[Ut]),Ht.push(zt[Ut]);if(Ut=R.apply(null,Ht),ot)Nr(jt);else for(var Rt=tt?1:2;Rt<b.length;Rt++){var Le=Rt===1?Vt:zt[Rt-2];b[Rt].K!==null&&b[Rt].K(Le)}return Vt=ft?b[0].fromWireType(Ut):void 0}}function bs(w,b){for(var T=[],R=0;R<w;R++)T.push(Ct[b+4*R>>2]);return T}function za(w,b,T){return w instanceof Object||ge(`${T} with invalid "this": ${w}`),w instanceof b.i.constructor||ge(`${T} incompatible with "this" of type ${w.constructor.name}`),w.g.o||ge(`cannot call emscripten binding method ${T} on deleted object`),ws(w.g.o,w.g.u.i,b.i)}function wi(w){w>=to.h&&--to.get(w).tb==0&&to.Zb(w)}function of(w,b,T){switch(b){case 0:return function(R){return this.fromWireType((T?mt:G)[R])};case 1:return function(R){return this.fromWireType((T?Tt:Bt)[R>>1])};case 2:return function(R){return this.fromWireType((T?_t:Ct)[R>>2])};default:throw new TypeError("Unknown integer type: "+w)}}function yi(w){if(w===null)return"null";var b=typeof w;return b==="object"||b==="array"||b==="function"?w.toString():""+w}function rf(w,b){switch(b){case 2:return function(T){return this.fromWireType(Se[T>>2])};case 3:return function(T){return this.fromWireType(Te[T>>3])};default:throw new TypeError("Unknown float type: "+w)}}function sf(w,b,T){switch(b){case 0:return T?function(R){return mt[R]}:function(R){return G[R]};case 1:return T?function(R){return Tt[R>>1]}:function(R){return Bt[R>>1]};case 2:return T?function(R){return _t[R>>2]}:function(R){return Ct[R>>2]};default:throw new TypeError("Unknown integer type: "+w)}}var Oa=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,af=(w,b)=>{for(var T=w>>1,R=T+b/2;!(T>=R)&&Bt[T];)++T;if(32<(T<<=1)-w&&Oa)return Oa.decode(G.subarray(w,T));for(T="",R=0;!(R>=b/2);++R){var F=Tt[w+2*R>>1];if(F==0)break;T+=String.fromCharCode(F)}return T},cf=(w,b,T)=>{if(T===void 0&&(T=2147483647),2>T)return 0;var R=b;T=(T-=2)<2*w.length?T/2:w.length;for(var F=0;F<T;++F)Tt[b>>1]=w.charCodeAt(F),b+=2;return Tt[b>>1]=0,b-R},lf=w=>2*w.length,uf=(w,b)=>{for(var T=0,R="";!(T>=b/4);){var F=_t[w+4*T>>2];if(F==0)break;++T,65536<=F?(F-=65536,R+=String.fromCharCode(55296|F>>10,56320|1023&F)):R+=String.fromCharCode(F)}return R},df=(w,b,T)=>{if(T===void 0&&(T=2147483647),4>T)return 0;var R=b;T=R+T-4;for(var F=0;F<w.length;++F){var W=w.charCodeAt(F);if(55296<=W&&57343>=W&&(W=65536+((1023&W)<<10)|1023&w.charCodeAt(++F)),_t[b>>2]=W,(b+=4)+4>T)break}return _t[b>>2]=0,b-R},$f=w=>{for(var b=0,T=0;T<w.length;++T){var R=w.charCodeAt(T);55296<=R&&57343>=R&&++T,b+=4}return b},mf={};function _s(w){var b=mf[w];return b===void 0?an(w):b}var xi,Cs=[],Ba=[],bi=[],_i={},Ha=()=>{if(!xi){var w,b={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:H||"./this.program"};for(w in _i)_i[w]===void 0?delete b[w]:b[w]=_i[w];var T=[];for(w in b)T.push(`${w}=${b[w]}`);xi=T}return xi},As=w=>w%4==0&&(w%100!=0||w%400==0),Ua=[31,29,31,30,31,30,31,31,30,31,30,31],qa=[31,28,31,30,31,30,31,31,30,31,30,31];function ja(w,b,T,R){w||(w=this),this.parent=w,this.U=w.U,this.wa=null,this.id=$e++,this.name=b,this.mode=T,this.l={},this.m={},this.za=R}Object.defineProperties(ja.prototype,{read:{get:function(){return!(365&~this.mode)},set:function(w){w?this.mode|=365:this.mode&=-366}},write:{get:function(){return!(146&~this.mode)},set:function(w){w?this.mode|=146:this.mode&=-147}}}),Ca(),pe=Array(4096),Go(Kt,"/"),bn("/tmp",16895,0),bn("/home",16895,0),bn("/home/web_user",16895,0),(()=>{bn("/dev",16895,0),Vo(259,{read:()=>0,write:(R,F,W,tt)=>tt}),Yo("/dev/null",259),Nn(1280,Hn),Nn(1536,Vn),Yo("/dev/tty",1280),Yo("/dev/tty1",1536);var w=new Uint8Array(1024),b=0,T=()=>(b===0&&(b=en(w).byteLength),w[--b]);Ir("random",T),Ir("urandom",T),bn("/dev/shm",16895,0),bn("/dev/shm/tmp",16895,0)})(),(()=>{bn("/proc",16895,0);var w=bn("/proc/self",16895,0);bn("/proc/self/fd",16895,0),Go({U:()=>{var b=pt(w,"fd",16895,73);return b.l={ka:(T,R)=>{var F=fn(+R);return(T={parent:null,U:{mb:"fake"},l:{ma:()=>F.path}}).parent=T}},b}},"/proc/self/fd")})(),Object.assign(Ma.prototype,{get(w){return this.M[w]},has(w){return this.M[w]!==void 0},pa(w){var b=this.hb.pop()||this.M.length;return this.M[b]=w,b},Zb(w){this.M[w]=void 0,this.hb.push(w)}}),ur=f.BindingError=class extends Error{constructor(w){super(w),this.name="BindingError"}},to.M.push({value:void 0},{value:null},{value:!0},{value:!1}),to.h=to.M.length,f.count_emval_handles=function(){for(var w=0,b=to.h;b<to.M.length;++b)to.M[b]!==void 0&&++w;return w},Sa=f.PureVirtualError=ka("PureVirtualError");for(var Wa=Array(256),Ms=0;256>Ms;++Ms)Wa[Ms]=String.fromCharCode(Ms);Ta=Wa,f.getInheritedInstanceCount=function(){return Object.keys(Ao).length},f.getLiveInheritedInstances=function(){var w,b=[];for(w in Ao)Ao.hasOwnProperty(w)&&b.push(Ao[w]);return b},f.flushPendingDeletes=mi,f.setDelayFunction=function(w){Rr=w,Lr.length&&Rr&&Rr(mi)},Da=f.InternalError=class extends Error{constructor(w){super(w),this.name="InternalError"}},zo.prototype.isAliasOf=function(w){if(!(this instanceof zo&&w instanceof zo))return!1;var b=this.g.u.i,T=this.g.o,R=w.g.u.i;for(w=w.g.o;b.A;)T=b.na(T),b=b.A;for(;R.A;)w=R.na(w),R=R.A;return b===R&&T===w},zo.prototype.clone=function(){if(this.g.o||gi(this),this.g.ia)return this.g.count.value+=1,this;var w=Pr,b=Object,T=b.create,R=Object.getPrototypeOf(this),F=this.g;return(w=w(T.call(b,R,{g:{value:{count:F.count,fa:F.fa,ia:F.ia,o:F.o,u:F.u,G:F.G,L:F.L}}}))).g.count.value+=1,w.g.fa=!1,w},zo.prototype.delete=function(){this.g.o||gi(this),this.g.fa&&!this.g.ia&&ge("Object already scheduled for deletion"),ms(this),Ia(this.g),this.g.ia||(this.g.G=void 0,this.g.o=void 0)},zo.prototype.isDeleted=function(){return!this.g.o},zo.prototype.deleteLater=function(){return this.g.o||gi(this),this.g.fa&&!this.g.ia&&ge("Object already scheduled for deletion"),Lr.push(this),Lr.length===1&&Rr&&Rr(mi),this.g.fa=!0,this},Mo.prototype.Vb=function(w){return this.rb&&(w=this.rb(w)),w},Mo.prototype.ab=function(w){this.W&&this.W(w)},Mo.prototype.argPackAdvance=8,Mo.prototype.readValueFromPointer=Fr,Mo.prototype.deleteObject=function(w){w!==null&&w.delete()},Mo.prototype.fromWireType=function(w){function b(){return this.ua?fs(this.i.N,{u:this.nc,o:T,L:this,G:w}):fs(this.i.N,{u:this,o:w})}var T=this.Vb(w);if(!T)return this.ab(w),null;var R=function(W,tt){return tt=pi(W,tt),Ao[tt]}(this.i,T);if(R!==void 0)return R.g.count.value===0?(R.g.o=T,R.g.G=w,R.clone()):(R=R.clone(),this.ab(w),R);if(R=this.i.Ub(T),!(R=Ra[R]))return b.call(this);R=this.ta?R.Kb:R.pointerType;var F=La(T,this.i,R.i);return F===null?b.call(this):this.ua?fs(R.i.N,{u:R,o:F,L:this,G:w}):fs(R.i.N,{u:R,o:F})},Fa=f.UnboundTypeError=ka("UnboundTypeError");var Va={__syscall_fcntl64:function(w,b,T){ds=T;try{var R=fn(w);switch(b){case 0:var F=Co();return 0>F?-28:Fo(R,F).X;case 1:case 2:case 6:case 7:return 0;case 3:return R.flags;case 4:return F=Co(),R.flags|=F,0;case 5:return F=Co(),Tt[F+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return _t[Xa()>>2]=28,-1}}catch(W){if(Ko===void 0||W.name!=="ErrnoError")throw W;return-W.aa}},__syscall_ioctl:function(w,b,T){ds=T;try{var R=fn(w);switch(b){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return R.s?0:-59;case 21505:if(!R.s)return-59;if(R.s.V.bc){b=[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var F=Co();_t[F>>2]=25856,_t[F+4>>2]=5,_t[F+8>>2]=191,_t[F+12>>2]=35387;for(var W=0;32>W;W++)mt[F+W+17|0]=b[W]||0}return 0;case 21506:case 21507:case 21508:if(!R.s)return-59;if(R.s.V.cc)for(F=Co(),b=[],W=0;32>W;W++)b.push(mt[F+W+17|0]);return 0;case 21519:return R.s?(F=Co(),_t[F>>2]=0):-59;case 21520:return R.s?-28:-59;case 21531:if(F=Co(),!R.m.ac)throw new Lt(59);return R.m.ac(R,b,F);case 21523:return R.s?(R.s.V.dc&&(W=[24,80],F=Co(),Tt[F>>1]=W[0],Tt[F+2>>1]=W[1]),0):-59;default:return-28}}catch(tt){if(Ko===void 0||tt.name!=="ErrnoError")throw tt;return-tt.aa}},__syscall_openat:function(w,b,T,R){ds=R;try{var F=b=b?qe(G,b):"";if(F.charAt(0)==="/")b=F;else{var W=w===-100?"/":fn(w).path;if(F.length==0)throw new Lt(44);b=wn(W+"/"+F)}var tt=R?Co():0;return so(b,T,tt).X}catch(ot){if(Ko===void 0||ot.name!=="ErrnoError")throw ot;return-ot.aa}},_embind_create_inheriting_constructor:function(w,b,T){w=an(w),b=Dr(b,"wrapper"),T=io(T);var R=[].slice,F=b.i,W=F.N,tt=F.A.N,ot=F.A.constructor;for(var ft in w=$s(w,function(){F.A.qb.forEach((function(st){if(this[st]===tt[st])throw new Sa(`Pure virtual function ${st} must be implemented in JavaScript`)}).bind(this)),Object.defineProperty(this,"__parent",{value:W}),this.__construct.apply(this,R.call(arguments))}),W.__construct=function(){this===W&&ge("Pass correct 'this' to __construct");var st=ot.implement.apply(void 0,[this].concat(R.call(arguments)));ms(st);var zt=st.g;st.notifyOnDestruction(),zt.ia=!0,Object.defineProperties(this,{g:{value:zt}}),Pr(this),st=zt.o,st=pi(F,st),Ao.hasOwnProperty(st)?ge(`Tried to register registered instance: ${st}`):Ao[st]=this},W.__destruct=function(){this===W&&ge("Pass correct 'this' to __destruct"),ms(this);var st=this.g.o;st=pi(F,st),Ao.hasOwnProperty(st)?delete Ao[st]:ge(`Tried to unregister unregistered instance: ${st}`)},w.prototype=Object.create(W),T)w.prototype[ft]=T[ft];return lo(w)},_embind_finalize_value_object:function(w){var b=gs[w];delete gs[w];var T=b.Pa,R=b.W,F=b.eb;Gn([w],F.map(W=>W.Yb).concat(F.map(W=>W.rc)),W=>{var tt={};return F.forEach((ot,ft)=>{var st=W[ft],zt=ot.Wb,Ht=ot.Xb,jt=W[ft+F.length],Vt=ot.qc,Ut=ot.sc;tt[ot.Sb]={read:Rt=>st.fromWireType(zt(Ht,Rt)),write:(Rt,Le)=>{var dt=[];Vt(Ut,Rt,jt.toWireType(dt,Le)),Nr(dt)}}}),[{name:b.name,fromWireType:function(ot){var ft,st={};for(ft in tt)st[ft]=tt[ft].read(ot);return R(ot),st},toWireType:function(ot,ft){for(var st in tt)if(!(st in ft))throw new TypeError(`Missing field: "${st}"`);var zt=T();for(st in tt)tt[st].write(zt,ft[st]);return ot!==null&&ot.push(R,zt),zt},argPackAdvance:8,readValueFromPointer:Fr,K:R}]})},_embind_register_bigint:function(){},_embind_register_bool:function(w,b,T,R,F){var W=vs(T);uo(w,{name:b=an(b),fromWireType:function(tt){return!!tt},toWireType:function(tt,ot){return ot?R:F},argPackAdvance:8,readValueFromPointer:function(tt){if(T===1)var ot=mt;else if(T===2)ot=Tt;else{if(T!==4)throw new TypeError("Unknown boolean type size: "+b);ot=_t}return this.fromWireType(ot[tt>>W])},K:null})},_embind_register_class:function(w,b,T,R,F,W,tt,ot,ft,st,zt,Ht,jt){zt=an(zt),W=Dn(F,W),ot&&(ot=Dn(tt,ot)),st&&(st=Dn(ft,st)),jt=Dn(Ht,jt);var Vt=Aa(zt);vi(Vt,function(){ko(`Cannot construct ${zt} due to unbound types`,[R])}),Gn([w,b,T],R?[R]:[],function(Ut){if(Ut=Ut[0],R)var Rt=Ut.i,Le=Rt.N;else Le=zo.prototype;Ut=$s(Vt,function(){if(Object.getPrototypeOf(this)!==dt)throw new ur("Use 'new' to construct "+zt);if(At.$===void 0)throw new ur(zt+" has no accessible constructor");var Je=At.$[arguments.length];if(Je===void 0)throw new ur(`Tried to invoke ctor of ${zt} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(At.$).toString()}) parameters instead!`);return Je.apply(this,arguments)});var dt=Object.create(Le,{constructor:{value:Ut}});Ut.prototype=dt;var At=new Q1(zt,Ut,dt,jt,Rt,W,ot,st);At.A&&(At.A.oa===void 0&&(At.A.oa=[]),At.A.oa.push(At)),Rt=new Mo(zt,At,!0,!1),Le=new Mo(zt+"*",At,!1,!1);var le=new Mo(zt+" const*",At,!1,!0);return Ra[w]={pointerType:Le,Kb:le},Pa(Vt,Ut),[Rt,Le,le]})},_embind_register_class_class_function:function(w,b,T,R,F,W,tt){var ot=bs(T,R);b=an(b),W=Dn(F,W),Gn([],[w],function(ft){function st(){ko(`Cannot call ${zt} due to unbound types`,ot)}var zt=`${(ft=ft[0]).name}.${b}`;b.startsWith("@@")&&(b=Symbol[b.substring(2)]);var Ht=ft.i.constructor;return Ht[b]===void 0?(st.ea=T-1,Ht[b]=st):(hi(Ht,b,zt),Ht[b].B[T-1]=st),Gn([],ot,function(jt){if(jt=xs(zt,[jt[0],null].concat(jt.slice(1)),null,W,tt),Ht[b].B===void 0?(jt.ea=T-1,Ht[b]=jt):Ht[b].B[T-1]=jt,ft.i.oa)for(const Vt of ft.i.oa)Vt.constructor.hasOwnProperty(b)||(Vt.constructor[b]=jt);return[]}),[]})},_embind_register_class_class_property:function(w,b,T,R,F,W,tt,ot){b=an(b),W=Dn(F,W),Gn([],[w],function(ft){var st=`${(ft=ft[0]).name}.${b}`,zt={get(){ko(`Cannot access ${st} due to unbound types`,[T])},enumerable:!0,configurable:!0};return zt.set=ot?()=>{ko(`Cannot access ${st} due to unbound types`,[T])}:()=>{ge(`${st} is a read-only property`)},Object.defineProperty(ft.i.constructor,b,zt),Gn([],[T],function(Ht){Ht=Ht[0];var jt={get:()=>Ht.fromWireType(W(R)),enumerable:!0};return ot&&(ot=Dn(tt,ot),jt.set=Vt=>{var Ut=[];ot(R,Ht.toWireType(Ut,Vt)),Nr(Ut)}),Object.defineProperty(ft.i.constructor,b,jt),[]}),[]})},_embind_register_class_constructor:function(w,b,T,R,F,W){var tt=bs(b,T);F=Dn(R,F),Gn([],[w],function(ot){var ft=`constructor ${(ot=ot[0]).name}`;if(ot.i.$===void 0&&(ot.i.$=[]),ot.i.$[b-1]!==void 0)throw new ur(`Cannot register multiple constructors with identical number of parameters (${b-1}) for class '${ot.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return ot.i.$[b-1]=()=>{ko(`Cannot construct ${ot.name} due to unbound types`,tt)},Gn([],tt,function(st){return st.splice(1,0,null),ot.i.$[b-1]=xs(ft,st,null,F,W),[]}),[]})},_embind_register_class_function:function(w,b,T,R,F,W,tt,ot){var ft=bs(T,R);b=an(b),W=Dn(F,W),Gn([],[w],function(st){function zt(){ko(`Cannot call ${Ht} due to unbound types`,ft)}var Ht=`${(st=st[0]).name}.${b}`;b.startsWith("@@")&&(b=Symbol[b.substring(2)]),ot&&st.i.qb.push(b);var jt=st.i.N,Vt=jt[b];return Vt===void 0||Vt.B===void 0&&Vt.className!==st.name&&Vt.ea===T-2?(zt.ea=T-2,zt.className=st.name,jt[b]=zt):(hi(jt,b,Ht),jt[b].B[T-2]=zt),Gn([],ft,function(Ut){return Ut=xs(Ht,Ut,st,W,tt),jt[b].B===void 0?(Ut.ea=T-2,jt[b]=Ut):jt[b].B[T-2]=Ut,[]}),[]})},_embind_register_class_property:function(w,b,T,R,F,W,tt,ot,ft,st){b=an(b),F=Dn(R,F),Gn([],[w],function(zt){var Ht=`${(zt=zt[0]).name}.${b}`,jt={get(){ko(`Cannot access ${Ht} due to unbound types`,[T,tt])},enumerable:!0,configurable:!0};return jt.set=ft?()=>{ko(`Cannot access ${Ht} due to unbound types`,[T,tt])}:()=>{ge(Ht+" is a read-only property")},Object.defineProperty(zt.i.N,b,jt),Gn([],ft?[T,tt]:[T],function(Vt){var Ut=Vt[0],Rt={get(){var dt=za(this,zt,Ht+" getter");return Ut.fromWireType(F(W,dt))},enumerable:!0};if(ft){ft=Dn(ot,ft);var Le=Vt[1];Rt.set=function(dt){var At=za(this,zt,Ht+" setter"),le=[];ft(st,At,Le.toWireType(le,dt)),Nr(le)}}return Object.defineProperty(zt.i.N,b,Rt),[]}),[]})},_embind_register_emval:function(w,b){uo(w,{name:b=an(b),fromWireType:function(T){var R=io(T);return wi(T),R},toWireType:function(T,R){return lo(R)},argPackAdvance:8,readValueFromPointer:Fr,K:null})},_embind_register_enum:function(w,b,T,R){function F(){}T=vs(T),b=an(b),F.values={},uo(w,{name:b,constructor:F,fromWireType:function(W){return this.constructor.values[W]},toWireType:function(W,tt){return tt.value},argPackAdvance:8,readValueFromPointer:of(b,T,R),K:null}),vi(b,F)},_embind_register_enum_value:function(w,b,T){var R=Dr(w,"enum");b=an(b),w=R.constructor,R=Object.create(R.constructor.prototype,{value:{value:T},constructor:{value:$s(`${R.name}_${b}`,function(){})}}),w.values[T]=R,w[b]=R},_embind_register_float:function(w,b,T){T=vs(T),uo(w,{name:b=an(b),fromWireType:function(R){return R},toWireType:function(R,F){return F},argPackAdvance:8,readValueFromPointer:rf(b,T),K:null})},_embind_register_function:function(w,b,T,R,F,W){var tt=bs(b,T);w=an(w),F=Dn(R,F),vi(w,function(){ko(`Cannot call ${w} due to unbound types`,tt)},b-1),Gn([],tt,function(ot){return Pa(w,xs(w,[ot[0],null].concat(ot.slice(1)),null,F,W),b-1),[]})},_embind_register_integer:function(w,b,T,R,F){b=an(b),F===-1&&(F=4294967295),F=vs(T);var W=ot=>ot;if(R===0){var tt=32-8*T;W=ot=>ot<<tt>>>tt}T=b.includes("unsigned")?function(ot,ft){return ft>>>0}:function(ot,ft){return ft},uo(w,{name:b,fromWireType:W,toWireType:T,argPackAdvance:8,readValueFromPointer:sf(b,F,R!==0),K:null})},_embind_register_memory_view:function(w,b,T){function R(W){W>>=2;var tt=Ct;return new F(tt.buffer,tt[W+1],tt[W])}var F=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][b];uo(w,{name:T=an(T),fromWireType:R,argPackAdvance:8,readValueFromPointer:R},{$b:!0})},_embind_register_std_string:function(w,b){var T=(b=an(b))==="std::string";uo(w,{name:b,fromWireType:function(R){var F=Ct[R>>2],W=R+4;if(T)for(var tt=W,ot=0;ot<=F;++ot){var ft=W+ot;if(ot==F||G[ft]==0){if(tt=tt?qe(G,tt,ft-tt):"",st===void 0)var st=tt;else st+="\0",st+=tt;tt=ft+1}}else{for(st=Array(F),ot=0;ot<F;++ot)st[ot]=String.fromCharCode(G[W+ot]);st=st.join("")}return So(R),st},toWireType:function(R,F){F instanceof ArrayBuffer&&(F=new Uint8Array(F));var W=typeof F=="string";W||F instanceof Uint8Array||F instanceof Uint8ClampedArray||F instanceof Int8Array||ge("Cannot pass non-string to std::string");var tt=T&&W?ro(F):F.length,ot=Ci(4+tt+1),ft=ot+4;if(Ct[ot>>2]=tt,T&&W)Wn(F,G,ft,tt+1);else if(W)for(W=0;W<tt;++W){var st=F.charCodeAt(W);255<st&&(So(ft),ge("String has UTF-16 code units that do not fit in 8 bits")),G[ft+W]=st}else for(W=0;W<tt;++W)G[ft+W]=F[W];return R!==null&&R.push(So,ot),ot},argPackAdvance:8,readValueFromPointer:Fr,K:function(R){So(R)}})},_embind_register_std_wstring:function(w,b,T){if(T=an(T),b===2)var R=af,F=cf,W=lf,tt=()=>Bt,ot=1;else b===4&&(R=uf,F=df,W=$f,tt=()=>Ct,ot=2);uo(w,{name:T,fromWireType:function(ft){for(var st,zt=Ct[ft>>2],Ht=tt(),jt=ft+4,Vt=0;Vt<=zt;++Vt){var Ut=ft+4+Vt*b;Vt!=zt&&Ht[Ut>>ot]!=0||(jt=R(jt,Ut-jt),st===void 0?st=jt:(st+="\0",st+=jt),jt=Ut+b)}return So(ft),st},toWireType:function(ft,st){typeof st!="string"&&ge(`Cannot pass non-string to C++ string type ${T}`);var zt=W(st),Ht=Ci(4+zt+b);return Ct[Ht>>2]=zt>>ot,F(st,Ht+4,zt+b),ft!==null&&ft.push(So,Ht),Ht},argPackAdvance:8,readValueFromPointer:Fr,K:function(ft){So(ft)}})},_embind_register_value_object:function(w,b,T,R,F,W){gs[w]={name:an(b),Pa:Dn(T,R),W:Dn(F,W),eb:[]}},_embind_register_value_object_field:function(w,b,T,R,F,W,tt,ot,ft,st){gs[w].eb.push({Sb:an(b),Yb:T,Wb:Dn(R,F),Xb:W,rc:tt,qc:Dn(ot,ft),sc:st})},_embind_register_void:function(w,b){uo(w,{fc:!0,name:b=an(b),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},_emscripten_get_now_is_monotonic:()=>!0,_emval_as:function(w,b,T){w=io(w),b=Dr(b,"emval::as");var R=[],F=lo(R);return Ct[T>>2]=F,b.toWireType(R,w)},_emval_call_method:function(w,b,T,R,F){w=Cs[w],b=io(b),T=_s(T);var W=[];return Ct[R>>2]=lo(W),w(b,T,W,F)},_emval_call_void_method:function(w,b,T,R){(w=Cs[w])(b=io(b),T=_s(T),null,R)},_emval_decref:wi,_emval_get_method_caller:function(w,b){var T=function(tt,ot){for(var ft=Array(tt),st=0;st<tt;++st)ft[st]=Dr(Ct[ot+4*st>>2],"parameter "+st);return ft}(w,b),R=T[0];b=R.name+"_$"+T.slice(1).map(function(tt){return tt.name}).join("_")+"$";var F=Ba[b];if(F!==void 0)return F;var W=Array(w-1);return F=function(tt){var ot=Cs.length;return Cs.push(tt),ot}((tt,ot,ft,st)=>{for(var zt=0,Ht=0;Ht<w-1;++Ht)W[Ht]=T[Ht+1].readValueFromPointer(st+zt),zt+=T[Ht+1].argPackAdvance;for(tt=tt[ot].apply(tt,W),Ht=0;Ht<w-1;++Ht)T[Ht+1].Nb&&T[Ht+1].Nb(W[Ht]);if(!R.fc)return R.toWireType(ft,tt)}),Ba[b]=F},_emval_get_module_property:function(w){return w=_s(w),lo(f[w])},_emval_get_property:function(w,b){return w=io(w),b=io(b),lo(w[b])},_emval_incref:function(w){4<w&&(to.get(w).tb+=1)},_emval_new_cstring:function(w){return lo(_s(w))},_emval_new_object:function(){return lo({})},_emval_run_destructors:function(w){Nr(io(w)),wi(w)},_emval_set_property:function(w,b,T){w=io(w),b=io(b),T=io(T),w[b]=T},_emval_take_value:function(w,b){return w=(w=Dr(w,"_emval_take_value")).readValueFromPointer(b),lo(w)},abort:()=>{me("")},emscripten_asm_const_int:(w,b,T)=>{var R;for(bi.length=0,T>>=2;R=G[b++];)T+=R!=105&T,bi.push(R==105?_t[T]:Te[T++>>1]),++T;return In[w].apply(null,bi)},emscripten_date_now:function(){return Date.now()},emscripten_get_now:()=>performance.now(),emscripten_memcpy_big:(w,b,T)=>G.copyWithin(w,b,b+T),emscripten_resize_heap:w=>{var b=G.length;if(2147483648<(w>>>=0))return!1;for(var T=1;4>=T;T*=2){var R=b*(1+.2/T);R=Math.min(R,w+100663296);var F=Math;R=Math.max(w,R);t:{F=F.min.call(F,2147483648,R+(65536-R%65536)%65536)-ut.buffer.byteLength+65535>>>16;try{ut.grow(F),q();var W=1;break t}catch{}W=void 0}if(W)return!0}return!1},environ_get:(w,b)=>{var T=0;return Ha().forEach(function(R,F){var W=b+T;for(F=Ct[w+4*F>>2]=W,W=0;W<R.length;++W)mt[0|F++]=R.charCodeAt(W);mt[0|F]=0,T+=R.length+1}),0},environ_sizes_get:(w,b)=>{var T=Ha();Ct[w>>2]=T.length;var R=0;return T.forEach(function(F){R+=F.length+1}),Ct[b>>2]=R,0},fd_close:function(w){try{var b=fn(w);if(b.X===null)throw new Lt(8);b.Ma&&(b.Ma=null);try{b.m.close&&b.m.close(b)}catch(T){throw T}finally{Ie[b.X]=null}return b.X=null,0}catch(T){if(Ko===void 0||T.name!=="ErrnoError")throw T;return T.aa}},fd_read:function(w,b,T,R){try{t:{var F=fn(w);w=b;for(var W,tt=b=0;tt<T;tt++){var ot=Ct[w>>2],ft=Ct[w+4>>2];w+=8;var st=F,zt=ot,Ht=ft,jt=W,Vt=mt;if(0>Ht||0>jt)throw new Lt(28);if(st.X===null)throw new Lt(8);if((2097155&st.flags)==1)throw new Lt(8);if((61440&st.node.mode)==16384)throw new Lt(31);if(!st.m.read)throw new Lt(28);var Ut=jt!==void 0;if(Ut){if(!st.seekable)throw new Lt(70)}else jt=st.position;var Rt=st.m.read(st,Vt,zt,Ht,jt);Ut||(st.position+=Rt);var Le=Rt;if(0>Le){var dt=-1;break t}if(b+=Le,Le<ft)break;W!==void 0&&(W+=Le)}dt=b}return Ct[R>>2]=dt,0}catch(At){if(Ko===void 0||At.name!=="ErrnoError")throw At;return At.aa}},fd_seek:function(w,b,T,R,F){b=T+2097152>>>0<4194305-!!b?(b>>>0)+4294967296*T:NaN;try{if(isNaN(b))return 61;var W=fn(w);return us(W,b,R),Ee=[W.position>>>0,(Qe=W.position,1<=+Math.abs(Qe)?0<Qe?+Math.floor(Qe/4294967296)>>>0:~~+Math.ceil((Qe-+(~~Qe>>>0))/4294967296)>>>0:0)],_t[F>>2]=Ee[0],_t[F+4>>2]=Ee[1],W.Ma&&b===0&&R===0&&(W.Ma=null),0}catch(tt){if(Ko===void 0||tt.name!=="ErrnoError")throw tt;return tt.aa}},fd_write:function(w,b,T,R){try{t:{var F=fn(w);w=b;for(var W,tt=b=0;tt<T;tt++){var ot=Ct[w>>2],ft=Ct[w+4>>2];w+=8;var st=F,zt=ot,Ht=ft,jt=W,Vt=mt;if(0>Ht||0>jt)throw new Lt(28);if(st.X===null)throw new Lt(8);if(!(2097155&st.flags))throw new Lt(8);if((61440&st.node.mode)==16384)throw new Lt(31);if(!st.m.write)throw new Lt(28);st.seekable&&1024&st.flags&&us(st,0,2);var Ut=jt!==void 0;if(Ut){if(!st.seekable)throw new Lt(70)}else jt=st.position;var Rt=st.m.write(st,Vt,zt,Ht,jt,void 0);Ut||(st.position+=Rt);var Le=Rt;if(0>Le){var dt=-1;break t}b+=Le,W!==void 0&&(W+=Le)}dt=b}return Ct[R>>2]=dt,0}catch(At){if(Ko===void 0||At.name!=="ErrnoError")throw At;return At.aa}},strftime_l:(w,b,T,R)=>((F,W,tt,ot)=>{function ft(dt,At,le){for(dt=typeof dt=="number"?dt.toString():dt||"";dt.length<At;)dt=le[0]+dt;return dt}function st(dt,At){return ft(dt,At,"0")}function zt(dt,At){function le(Yn){return 0>Yn?-1:0<Yn?1:0}var Je;return(Je=le(dt.getFullYear()-At.getFullYear()))===0&&(Je=le(dt.getMonth()-At.getMonth()))===0&&(Je=le(dt.getDate()-At.getDate())),Je}function Ht(dt){switch(dt.getDay()){case 0:return new Date(dt.getFullYear()-1,11,29);case 1:return dt;case 2:return new Date(dt.getFullYear(),0,3);case 3:return new Date(dt.getFullYear(),0,2);case 4:return new Date(dt.getFullYear(),0,1);case 5:return new Date(dt.getFullYear()-1,11,31);case 6:return new Date(dt.getFullYear()-1,11,30)}}function jt(dt){var At=dt.ca;for(dt=new Date(new Date(dt.da+1900,0,1).getTime());0<At;){var le=dt.getMonth(),Je=(As(dt.getFullYear())?Ua:qa)[le];if(!(At>Je-dt.getDate())){dt.setDate(dt.getDate()+At);break}At-=Je-dt.getDate()+1,dt.setDate(1),11>le?dt.setMonth(le+1):(dt.setMonth(0),dt.setFullYear(dt.getFullYear()+1))}return le=new Date(dt.getFullYear()+1,0,4),At=Ht(new Date(dt.getFullYear(),0,4)),le=Ht(le),0>=zt(At,dt)?0>=zt(le,dt)?dt.getFullYear()+1:dt.getFullYear():dt.getFullYear()-1}var Vt=_t[ot+40>>2];for(var Ut in ot={wc:_t[ot>>2],vc:_t[ot+4>>2],Fa:_t[ot+8>>2],Sa:_t[ot+12>>2],Ga:_t[ot+16>>2],da:_t[ot+20>>2],R:_t[ot+24>>2],ca:_t[ot+28>>2],Rc:_t[ot+32>>2],uc:_t[ot+36>>2],xc:Vt&&Vt?qe(G,Vt):""},tt=tt?qe(G,tt):"",Vt={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})tt=tt.replace(new RegExp(Ut,"g"),Vt[Ut]);var Rt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Le="January February March April May June July August September October November December".split(" ");for(Ut in Vt={"%a":dt=>Rt[dt.R].substring(0,3),"%A":dt=>Rt[dt.R],"%b":dt=>Le[dt.Ga].substring(0,3),"%B":dt=>Le[dt.Ga],"%C":dt=>st((dt.da+1900)/100|0,2),"%d":dt=>st(dt.Sa,2),"%e":dt=>ft(dt.Sa,2," "),"%g":dt=>jt(dt).toString().substring(2),"%G":dt=>jt(dt),"%H":dt=>st(dt.Fa,2),"%I":dt=>((dt=dt.Fa)==0?dt=12:12<dt&&(dt-=12),st(dt,2)),"%j":dt=>{for(var At=0,le=0;le<=dt.Ga-1;At+=(As(dt.da+1900)?Ua:qa)[le++]);return st(dt.Sa+At,3)},"%m":dt=>st(dt.Ga+1,2),"%M":dt=>st(dt.vc,2),"%n":()=>`
`,"%p":dt=>0<=dt.Fa&&12>dt.Fa?"AM":"PM","%S":dt=>st(dt.wc,2),"%t":()=>"	","%u":dt=>dt.R||7,"%U":dt=>st(Math.floor((dt.ca+7-dt.R)/7),2),"%V":dt=>{var At=Math.floor((dt.ca+7-(dt.R+6)%7)/7);if(2>=(dt.R+371-dt.ca-2)%7&&At++,At)At==53&&((le=(dt.R+371-dt.ca)%7)==4||le==3&&As(dt.da)||(At=1));else{At=52;var le=(dt.R+7-dt.ca-1)%7;(le==4||le==5&&As(dt.da%400-1))&&At++}return st(At,2)},"%w":dt=>dt.R,"%W":dt=>st(Math.floor((dt.ca+7-(dt.R+6)%7)/7),2),"%y":dt=>(dt.da+1900).toString().substring(2),"%Y":dt=>dt.da+1900,"%z":dt=>{var At=0<=(dt=dt.uc);return dt=Math.abs(dt)/60,(At?"+":"-")+("0000"+(dt/60*100+dt%60)).slice(-4)},"%Z":dt=>dt.xc,"%%":()=>"%"},tt=tt.replace(/%%/g,"\0\0"),Vt)tt.includes(Ut)&&(tt=tt.replace(new RegExp(Ut,"g"),Vt[Ut](ot)));return(Ut=Zn(tt=tt.replace(/\0\0/g,"%"),!1)).length>W?0:(mt.set(Ut,F),Ut.length-1)})(w,b,T,R)};(function(){function w(T){if(rt=T=T.exports,ut=rt.memory,q(),E=rt.__indirect_function_table,nt.unshift(rt.__wasm_call_ctors),Dt--,f.monitorRunDependencies&&f.monitorRunDependencies(Dt),Dt==0&&ie){var R=ie;ie=null,R()}return T}var b={env:Va,wasi_snapshot_preview1:Va};if(Dt++,f.monitorRunDependencies&&f.monitorRunDependencies(Dt),f.instantiateWasm)try{return f.instantiateWasm(b,w)}catch(T){Q("Module.instantiateWasm callback failed with error: "+T),p(T)}(function(T,R){var F=vt;return Z||typeof WebAssembly.instantiateStreaming!="function"||St(F)||F.startsWith("file://")||typeof fetch!="function"?ve(F,T,R):fetch(F,{credentials:"same-origin"}).then(W=>WebAssembly.instantiateStreaming(W,T).then(R,function(tt){return Q("wasm streaming compile failed: "+tt),Q("falling back to ArrayBuffer instantiation"),ve(F,T,R)}))})(b,function(T){w(T.instance)}).catch(p)})();var So=w=>(So=rt.free)(w),Ci=w=>(Ci=rt.malloc)(w),Ga=f._ma_device__on_notification_unlocked=w=>(Ga=f._ma_device__on_notification_unlocked=rt.ma_device__on_notification_unlocked)(w);f._ma_malloc_emscripten=(w,b)=>(f._ma_malloc_emscripten=rt.ma_malloc_emscripten)(w,b),f._ma_free_emscripten=(w,b)=>(f._ma_free_emscripten=rt.ma_free_emscripten)(w,b);var ks,Ya=f._ma_device_process_pcm_frames_capture__webaudio=(w,b,T)=>(Ya=f._ma_device_process_pcm_frames_capture__webaudio=rt.ma_device_process_pcm_frames_capture__webaudio)(w,b,T),Ka=f._ma_device_process_pcm_frames_playback__webaudio=(w,b,T)=>(Ka=f._ma_device_process_pcm_frames_playback__webaudio=rt.ma_device_process_pcm_frames_playback__webaudio)(w,b,T),Xa=()=>(Xa=rt.__errno_location)(),Ja=w=>(Ja=rt.__getTypeName)(w);function Za(){function w(){if(!ks&&(ks=!0,f.calledRun=!0,!sn)){if(f.noFSInit||Me||(Me=!0,Ca(),f.stdin=f.stdin,f.stdout=f.stdout,f.stderr=f.stderr,f.stdin?Ir("stdin",f.stdin):Rn("/dev/tty","/dev/stdin"),f.stdout?Ir("stdout",null,f.stdout):Rn("/dev/tty","/dev/stdout"),f.stderr?Ir("stderr",null,f.stderr):Rn("/dev/tty1","/dev/stderr"),so("/dev/stdin",0),so("/dev/stdout",1),so("/dev/stderr",1)),pn=!1,Be(nt),m(f),f.onRuntimeInitialized&&f.onRuntimeInitialized(),f.postRun)for(typeof f.postRun=="function"&&(f.postRun=[f.postRun]);f.postRun.length;){var b=f.postRun.shift();at.unshift(b)}Be(at)}}if(!(0<Dt)){if(f.preRun)for(typeof f.preRun=="function"&&(f.preRun=[f.preRun]);f.preRun.length;)wt();Be(B),0<Dt||(f.setStatus?(f.setStatus("Running..."),setTimeout(function(){setTimeout(function(){f.setStatus("")},1),w()},1)):w())}}if(f.__embind_initialize_bindings=()=>(f.__embind_initialize_bindings=rt._embind_initialize_bindings)(),f.dynCall_iiji=(w,b,T,R,F)=>(f.dynCall_iiji=rt.dynCall_iiji)(w,b,T,R,F),f.dynCall_jiji=(w,b,T,R,F)=>(f.dynCall_jiji=rt.dynCall_jiji)(w,b,T,R,F),f.dynCall_iiiji=(w,b,T,R,F,W)=>(f.dynCall_iiiji=rt.dynCall_iiiji)(w,b,T,R,F,W),f.dynCall_iij=(w,b,T,R)=>(f.dynCall_iij=rt.dynCall_iij)(w,b,T,R),f.dynCall_jii=(w,b,T)=>(f.dynCall_jii=rt.dynCall_jii)(w,b,T),f.dynCall_viijii=(w,b,T,R,F,W,tt)=>(f.dynCall_viijii=rt.dynCall_viijii)(w,b,T,R,F,W,tt),f.dynCall_iiiiij=(w,b,T,R,F,W,tt)=>(f.dynCall_iiiiij=rt.dynCall_iiiiij)(w,b,T,R,F,W,tt),f.dynCall_iiiiijj=(w,b,T,R,F,W,tt,ot,ft)=>(f.dynCall_iiiiijj=rt.dynCall_iiiiijj)(w,b,T,R,F,W,tt,ot,ft),f.dynCall_iiiiiijj=(w,b,T,R,F,W,tt,ot,ft,st)=>(f.dynCall_iiiiiijj=rt.dynCall_iiiiiijj)(w,b,T,R,F,W,tt,ot,ft,st),ie=function w(){ks||Za(),ks||(ie=w)},f.preInit)for(typeof f.preInit=="function"&&(f.preInit=[f.preInit]);0<f.preInit.length;)f.preInit.pop()();return Za(),u.ready});const l=a},o=>{o.exports=JSON.parse(`{"name":"@rive-app/canvas","version":"2.26.4","description":"Rive's canvas based web api.","main":"rive.js","homepage":"https://rive.app","repository":{"type":"git","url":"https://github.com/rive-app/rive-wasm/tree/master/js"},"keywords":["rive","animation"],"author":"Rive","contributors":["Luigi Rosso <luigi@rive.app> (https://rive.app)","Maxwell Talbot <max@rive.app> (https://rive.app)","Arthur Vivian <arthur@rive.app> (https://rive.app)","Umberto Sonnino <umberto@rive.app> (https://rive.app)","Matthew Sullivan <matt.j.sullivan@gmail.com> (mailto:matt.j.sullivan@gmail.com)"],"license":"MIT","files":["rive.js","rive.js.map","rive.wasm","rive_fallback.wasm","rive.d.ts","rive_advanced.mjs.d.ts"],"typings":"rive.d.ts","dependencies":{},"browser":{"fs":false,"path":false}}`)},(o,r,i)=>{i.r(r),i.d(r,{Animation:()=>c.Animation});var c=i(4)},(o,r,i)=>{i.r(r),i.d(r,{Animation:()=>c});var c=function(){function a(l,u,m,p){this.animation=l,this.artboard=u,this.playing=p,this.loopCount=0,this.scrubTo=null,this.instance=new m.LinearAnimationInstance(l,u)}return Object.defineProperty(a.prototype,"name",{get:function(){return this.animation.name},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"time",{get:function(){return this.instance.time},set:function(l){this.instance.time=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"loopValue",{get:function(){return this.animation.loopValue},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"needsScrub",{get:function(){return this.scrubTo!==null},enumerable:!1,configurable:!0}),a.prototype.advance=function(l){this.scrubTo===null?this.instance.advance(l):(this.instance.time=0,this.instance.advance(this.scrubTo),this.scrubTo=null)},a.prototype.apply=function(l){this.instance.apply(l)},a.prototype.cleanup=function(){this.instance.delete()},a}()},(o,r,i)=>{i.r(r),i.d(r,{BLANK_URL:()=>a.BLANK_URL,registerTouchInteractions:()=>c.registerTouchInteractions,sanitizeUrl:()=>a.sanitizeUrl});var c=i(6),a=i(7)},(o,r,i)=>{i.r(r),i.d(r,{registerTouchInteractions:()=>c});var c=function(a){var l=a.canvas,u=a.artboard,m=a.stateMachines,p=m===void 0?[]:m,f=a.renderer,x=a.rive,A=a.fit,C=a.alignment,M=a.isTouchScrollEnabled,S=M!==void 0&&M,L=a.layoutScaleFactor,I=L===void 0?1:L;if(!(l&&p.length&&f&&x&&u&&typeof window<"u"))return null;var X=null,j=!1,H=(function(J){if(j&&J instanceof MouseEvent)J.type=="mouseup"&&(j=!1);else{j=S&&J.type==="touchend"&&X==="touchstart",X=J.type;var U=J.currentTarget.getBoundingClientRect(),O=function(at,wt){var vt,Dt;return["touchstart","touchmove"].indexOf(at.type)>-1&&(!((vt=at.touches)===null||vt===void 0)&&vt.length)?(wt||at.preventDefault(),{clientX:at.touches[0].clientX,clientY:at.touches[0].clientY}):at.type==="touchend"&&(!((Dt=at.changedTouches)===null||Dt===void 0)&&Dt.length)?{clientX:at.changedTouches[0].clientX,clientY:at.changedTouches[0].clientY}:{clientX:at.clientX,clientY:at.clientY}}(J,S),Z=O.clientX,et=O.clientY;if(Z||et){var Q=Z-U.left,ut=et-U.top,rt=x.computeAlignment(A,C,{minX:0,minY:0,maxX:U.width,maxY:U.height},u.bounds,I),mt=new x.Mat2D;rt.invert(mt);var G=new x.Vec2D(Q,ut),Tt=x.mapXY(mt,G),Bt=Tt.x(),_t=Tt.y();switch(Tt.delete(),mt.delete(),G.delete(),rt.delete(),J.type){case"mouseout":for(var Ct=0,Se=p;Ct<Se.length;Ct++)Se[Ct].pointerMove(Bt,_t);break;case"touchmove":case"mouseover":case"mousemove":for(var Te=0,sn=p;Te<sn.length;Te++)sn[Te].pointerMove(Bt,_t);break;case"touchstart":case"mousedown":for(var q=0,E=p;q<E.length;q++)E[q].pointerDown(Bt,_t);break;case"touchend":case"mouseup":for(var B=0,nt=p;B<nt.length;B++)nt[B].pointerUp(Bt,_t)}}}}).bind(void 0);return l.addEventListener("mouseover",H),l.addEventListener("mouseout",H),l.addEventListener("mousemove",H),l.addEventListener("mousedown",H),l.addEventListener("mouseup",H),l.addEventListener("touchmove",H,{passive:S}),l.addEventListener("touchstart",H,{passive:S}),l.addEventListener("touchend",H),function(){l.removeEventListener("mouseover",H),l.removeEventListener("mouseout",H),l.removeEventListener("mousemove",H),l.removeEventListener("mousedown",H),l.removeEventListener("mouseup",H),l.removeEventListener("touchmove",H),l.removeEventListener("touchstart",H),l.removeEventListener("touchend",H)}}},(o,r,i)=>{i.r(r),i.d(r,{BLANK_URL:()=>f,sanitizeUrl:()=>x});var c=/^([^\w]*)(javascript|data|vbscript)/im,a=/&#(\w+)(^\w|;)?/g,l=/&(newline|tab);/gi,u=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,m=/^.+(:|&colon;)/gim,p=[".","/"],f="about:blank";function x(A){if(!A)return f;var C,M=(C=A,C.replace(u,"").replace(a,function(I,X){return String.fromCharCode(X)})).replace(l,"").replace(u,"").trim();if(!M)return f;if(function(I){return p.indexOf(I[0])>-1}(M))return M;var S=M.match(m);if(!S)return M;var L=S[0];return c.test(L)?f:M}}],t={};function n(o){var r=t[o];if(r!==void 0)return r.exports;var i=t[o]={exports:{}};return s[o](i,i.exports,n),i.exports}n.d=(o,r)=>{for(var i in r)n.o(r,i)&&!n.o(o,i)&&Object.defineProperty(o,i,{enumerable:!0,get:r[i]})},n.o=(o,r)=>Object.prototype.hasOwnProperty.call(o,r),n.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var e={};return(()=>{n.r(e),n.d(e,{Alignment:()=>i,EventType:()=>I,Fit:()=>r,Layout:()=>C,LoopType:()=>X,Rive:()=>Tt,RiveEventType:()=>S,RiveFile:()=>G,RuntimeLoader:()=>M,StateMachineInput:()=>L,StateMachineInputType:()=>A,Testing:()=>Ct,decodeAudio:()=>Se,decodeFont:()=>sn,decodeImage:()=>Te});var o,r,i,c=n(1),a=n(2),l=n(3),u=n(5),m=(o=function(q,E){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,nt){B.__proto__=nt}||function(B,nt){for(var at in nt)Object.prototype.hasOwnProperty.call(nt,at)&&(B[at]=nt[at])},o(q,E)},function(q,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function B(){this.constructor=q}o(q,E),q.prototype=E===null?Object.create(E):(B.prototype=E.prototype,new B)}),p=function(q,E,B,nt){return new(B||(B=Promise))(function(at,wt){function vt(me){try{ie(nt.next(me))}catch(St){wt(St)}}function Dt(me){try{ie(nt.throw(me))}catch(St){wt(St)}}function ie(me){var St;me.done?at(me.value):(St=me.value,St instanceof B?St:new B(function(ze){ze(St)})).then(vt,Dt)}ie((nt=nt.apply(q,E||[])).next())})},f=function(q,E){var B,nt,at,wt={label:0,sent:function(){if(1&at[0])throw at[1];return at[1]},trys:[],ops:[]},vt=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return vt.next=Dt(0),vt.throw=Dt(1),vt.return=Dt(2),typeof Symbol=="function"&&(vt[Symbol.iterator]=function(){return this}),vt;function Dt(ie){return function(me){return function(St){if(B)throw new TypeError("Generator is already executing.");for(;vt&&(vt=0,St[0]&&(wt=0)),wt;)try{if(B=1,nt&&(at=2&St[0]?nt.return:St[0]?nt.throw||((at=nt.return)&&at.call(nt),0):nt.next)&&!(at=at.call(nt,St[1])).done)return at;switch(nt=0,at&&(St=[2&St[0],at.value]),St[0]){case 0:case 1:at=St;break;case 4:return wt.label++,{value:St[1],done:!1};case 5:wt.label++,nt=St[1],St=[0];continue;case 7:St=wt.ops.pop(),wt.trys.pop();continue;default:if(!((at=(at=wt.trys).length>0&&at[at.length-1])||St[0]!==6&&St[0]!==2)){wt=0;continue}if(St[0]===3&&(!at||St[1]>at[0]&&St[1]<at[3])){wt.label=St[1];break}if(St[0]===6&&wt.label<at[1]){wt.label=at[1],at=St;break}if(at&&wt.label<at[2]){wt.label=at[2],wt.ops.push(St);break}at[2]&&wt.ops.pop(),wt.trys.pop();continue}St=E.call(q,wt)}catch(ze){St=[6,ze],nt=0}finally{B=at=0}if(5&St[0])throw St[1];return{value:St[0]?St[1]:void 0,done:!0}}([ie,me])}}},x=function(q){function E(){var B=q!==null&&q.apply(this,arguments)||this;return B.isHandledError=!0,B}return m(E,q),E}(Error);(function(q){q.Cover="cover",q.Contain="contain",q.Fill="fill",q.FitWidth="fitWidth",q.FitHeight="fitHeight",q.None="none",q.ScaleDown="scaleDown",q.Layout="layout"})(r||(r={})),function(q){q.Center="center",q.TopLeft="topLeft",q.TopCenter="topCenter",q.TopRight="topRight",q.CenterLeft="centerLeft",q.CenterRight="centerRight",q.BottomLeft="bottomLeft",q.BottomCenter="bottomCenter",q.BottomRight="bottomRight"}(i||(i={}));var A,C=function(){function q(E){var B,nt,at,wt,vt,Dt,ie;this.fit=(B=E==null?void 0:E.fit)!==null&&B!==void 0?B:r.Contain,this.alignment=(nt=E==null?void 0:E.alignment)!==null&&nt!==void 0?nt:i.Center,this.layoutScaleFactor=(at=E==null?void 0:E.layoutScaleFactor)!==null&&at!==void 0?at:1,this.minX=(wt=E==null?void 0:E.minX)!==null&&wt!==void 0?wt:0,this.minY=(vt=E==null?void 0:E.minY)!==null&&vt!==void 0?vt:0,this.maxX=(Dt=E==null?void 0:E.maxX)!==null&&Dt!==void 0?Dt:0,this.maxY=(ie=E==null?void 0:E.maxY)!==null&&ie!==void 0?ie:0}return q.new=function(E){var B=E.fit,nt=E.alignment,at=E.minX,wt=E.minY,vt=E.maxX,Dt=E.maxY;return console.warn("This function is deprecated: please use `new Layout({})` instead"),new q({fit:B,alignment:nt,minX:at,minY:wt,maxX:vt,maxY:Dt})},q.prototype.copyWith=function(E){var B=E.fit,nt=E.alignment,at=E.layoutScaleFactor,wt=E.minX,vt=E.minY,Dt=E.maxX,ie=E.maxY;return new q({fit:B??this.fit,alignment:nt??this.alignment,layoutScaleFactor:at??this.layoutScaleFactor,minX:wt??this.minX,minY:vt??this.minY,maxX:Dt??this.maxX,maxY:ie??this.maxY})},q.prototype.runtimeFit=function(E){return this.cachedRuntimeFit?this.cachedRuntimeFit:(B=this.fit===r.Cover?E.Fit.cover:this.fit===r.Contain?E.Fit.contain:this.fit===r.Fill?E.Fit.fill:this.fit===r.FitWidth?E.Fit.fitWidth:this.fit===r.FitHeight?E.Fit.fitHeight:this.fit===r.ScaleDown?E.Fit.scaleDown:this.fit===r.Layout?E.Fit.layout:E.Fit.none,this.cachedRuntimeFit=B,B);var B},q.prototype.runtimeAlignment=function(E){return this.cachedRuntimeAlignment?this.cachedRuntimeAlignment:(B=this.alignment===i.TopLeft?E.Alignment.topLeft:this.alignment===i.TopCenter?E.Alignment.topCenter:this.alignment===i.TopRight?E.Alignment.topRight:this.alignment===i.CenterLeft?E.Alignment.centerLeft:this.alignment===i.CenterRight?E.Alignment.centerRight:this.alignment===i.BottomLeft?E.Alignment.bottomLeft:this.alignment===i.BottomCenter?E.Alignment.bottomCenter:this.alignment===i.BottomRight?E.Alignment.bottomRight:E.Alignment.center,this.cachedRuntimeAlignment=B,B);var B},q}(),M=function(){function q(){}return q.loadRuntime=function(){c.default({locateFile:function(){return q.wasmURL}}).then(function(E){var B;for(q.runtime=E;q.callBackQueue.length>0;)(B=q.callBackQueue.shift())===null||B===void 0||B(q.runtime)}).catch(function(E){var B={message:(E==null?void 0:E.message)||"Unknown error",type:(E==null?void 0:E.name)||"Error",wasmError:E instanceof WebAssembly.CompileError||E instanceof WebAssembly.RuntimeError,originalError:E};console.debug("Rive WASM load error details:",B);var nt="https://cdn.jsdelivr.net/npm/".concat(a.name,"@").concat(a.version,"/rive_fallback.wasm");if(q.wasmURL.toLowerCase()!==nt)console.warn("Failed to load WASM from ".concat(q.wasmURL," (").concat(B.message,"), trying jsdelivr as a backup")),q.setWasmUrl(nt),q.loadRuntime();else{var at=["Could not load Rive WASM file from ".concat(q.wasmURL," or ").concat(nt,"."),"Possible reasons:","- Network connection is down","- WebAssembly is not supported in this environment","- The WASM file is corrupted or incompatible",`
Error details:`,"- Type: ".concat(B.type),"- Message: ".concat(B.message),"- WebAssembly-specific error: ".concat(B.wasmError),`
To resolve, you may need to:`,"1. Check your network connection","2. Set a new WASM source via RuntimeLoader.setWasmUrl()","3. Call RuntimeLoader.loadRuntime() again"].join(`
`);console.error(at)}})},q.getInstance=function(E){q.isLoading||(q.isLoading=!0,q.loadRuntime()),q.runtime?E(q.runtime):q.callBackQueue.push(E)},q.awaitInstance=function(){return new Promise(function(E){return q.getInstance(function(B){return E(B)})})},q.setWasmUrl=function(E){q.wasmURL=E},q.getWasmUrl=function(){return q.wasmURL},q.isLoading=!1,q.callBackQueue=[],q.wasmURL="https://unpkg.com/".concat(a.name,"@").concat(a.version,"/rive.wasm"),q}();(function(q){q[q.Number=56]="Number",q[q.Trigger=58]="Trigger",q[q.Boolean=59]="Boolean"})(A||(A={}));var S,L=function(){function q(E,B){this.type=E,this.runtimeInput=B}return Object.defineProperty(q.prototype,"name",{get:function(){return this.runtimeInput.name},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"value",{get:function(){return this.runtimeInput.value},set:function(E){this.runtimeInput.value=E},enumerable:!1,configurable:!0}),q.prototype.fire=function(){this.type===A.Trigger&&this.runtimeInput.fire()},q.prototype.delete=function(){this.runtimeInput=null},q}();(function(q){q[q.General=128]="General",q[q.OpenUrl=131]="OpenUrl"})(S||(S={}));var I,X,j=function(){function q(E,B,nt,at){this.stateMachine=E,this.playing=nt,this.artboard=at,this.inputs=[],this.instance=new B.StateMachineInstance(E,at),this.initInputs(B)}return Object.defineProperty(q.prototype,"name",{get:function(){return this.stateMachine.name},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"statesChanged",{get:function(){for(var E=[],B=0;B<this.instance.stateChangedCount();B++)E.push(this.instance.stateChangedNameByIndex(B));return E},enumerable:!1,configurable:!0}),q.prototype.advance=function(E){this.instance.advance(E)},q.prototype.advanceAndApply=function(E){this.instance.advanceAndApply(E)},q.prototype.reportedEventCount=function(){return this.instance.reportedEventCount()},q.prototype.reportedEventAt=function(E){return this.instance.reportedEventAt(E)},q.prototype.initInputs=function(E){for(var B=0;B<this.instance.inputCount();B++){var nt=this.instance.input(B);this.inputs.push(this.mapRuntimeInput(nt,E))}},q.prototype.mapRuntimeInput=function(E,B){return E.type===B.SMIInput.bool?new L(A.Boolean,E.asBool()):E.type===B.SMIInput.number?new L(A.Number,E.asNumber()):E.type===B.SMIInput.trigger?new L(A.Trigger,E.asTrigger()):void 0},q.prototype.cleanup=function(){this.inputs.forEach(function(E){E.delete()}),this.inputs.length=0,this.instance.delete()},q}(),H=function(){function q(E,B,nt,at,wt){at===void 0&&(at=[]),wt===void 0&&(wt=[]),this.runtime=E,this.artboard=B,this.eventManager=nt,this.animations=at,this.stateMachines=wt}return q.prototype.add=function(E,B,nt){if(nt===void 0&&(nt=!0),(E=_t(E)).length===0)this.animations.forEach(function(ve){return ve.playing=B}),this.stateMachines.forEach(function(ve){return ve.playing=B});else for(var at=this.animations.map(function(ve){return ve.name}),wt=this.stateMachines.map(function(ve){return ve.name}),vt=0;vt<E.length;vt++){var Dt=at.indexOf(E[vt]),ie=wt.indexOf(E[vt]);if(Dt>=0||ie>=0)Dt>=0?this.animations[Dt].playing=B:this.stateMachines[ie].playing=B;else{var me=this.artboard.animationByName(E[vt]);if(me){var St=new l.Animation(me,this.artboard,this.runtime,B);St.advance(0),St.apply(1),this.animations.push(St)}else{var ze=this.artboard.stateMachineByName(E[vt]);if(ze){var Ze=new j(ze,this.runtime,B,this.artboard);this.stateMachines.push(Ze)}}}}return nt&&(B?this.eventManager.fire({type:I.Play,data:this.playing}):this.eventManager.fire({type:I.Pause,data:this.paused})),B?this.playing:this.paused},q.prototype.initLinearAnimations=function(E,B){for(var nt=this.animations.map(function(ie){return ie.name}),at=0;at<E.length;at++){var wt=nt.indexOf(E[at]);if(wt>=0)this.animations[wt].playing=B;else{var vt=this.artboard.animationByName(E[at]);if(vt){var Dt=new l.Animation(vt,this.artboard,this.runtime,B);Dt.advance(0),Dt.apply(1),this.animations.push(Dt)}}}},q.prototype.initStateMachines=function(E,B){for(var nt=this.stateMachines.map(function(ie){return ie.name}),at=0;at<E.length;at++){var wt=nt.indexOf(E[at]);if(wt>=0)this.stateMachines[wt].playing=B;else{var vt=this.artboard.stateMachineByName(E[at]);if(vt){var Dt=new j(vt,this.runtime,B,this.artboard);this.stateMachines.push(Dt)}else this.initLinearAnimations([E[at]],B)}}},q.prototype.play=function(E){return this.add(E,!0)},q.prototype.pause=function(E){return this.add(E,!1)},q.prototype.scrub=function(E,B){var nt=this.animations.filter(function(at){return E.includes(at.name)});return nt.forEach(function(at){return at.scrubTo=B}),nt.map(function(at){return at.name})},Object.defineProperty(q.prototype,"playing",{get:function(){return this.animations.filter(function(E){return E.playing}).map(function(E){return E.name}).concat(this.stateMachines.filter(function(E){return E.playing}).map(function(E){return E.name}))},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"paused",{get:function(){return this.animations.filter(function(E){return!E.playing}).map(function(E){return E.name}).concat(this.stateMachines.filter(function(E){return!E.playing}).map(function(E){return E.name}))},enumerable:!1,configurable:!0}),q.prototype.stop=function(E){var B=this,nt=[];if((E=_t(E)).length===0)nt=this.animations.map(function(vt){return vt.name}).concat(this.stateMachines.map(function(vt){return vt.name})),this.animations.forEach(function(vt){return vt.cleanup()}),this.stateMachines.forEach(function(vt){return vt.cleanup()}),this.animations.splice(0,this.animations.length),this.stateMachines.splice(0,this.stateMachines.length);else{var at=this.animations.filter(function(vt){return E.includes(vt.name)});at.forEach(function(vt){vt.cleanup(),B.animations.splice(B.animations.indexOf(vt),1)});var wt=this.stateMachines.filter(function(vt){return E.includes(vt.name)});wt.forEach(function(vt){vt.cleanup(),B.stateMachines.splice(B.stateMachines.indexOf(vt),1)}),nt=at.map(function(vt){return vt.name}).concat(wt.map(function(vt){return vt.name}))}return this.eventManager.fire({type:I.Stop,data:nt}),nt},Object.defineProperty(q.prototype,"isPlaying",{get:function(){return this.animations.reduce(function(E,B){return E||B.playing},!1)||this.stateMachines.reduce(function(E,B){return E||B.playing},!1)},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"isPaused",{get:function(){return!this.isPlaying&&(this.animations.length>0||this.stateMachines.length>0)},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"isStopped",{get:function(){return this.animations.length===0&&this.stateMachines.length===0},enumerable:!1,configurable:!0}),q.prototype.atLeastOne=function(E,B){var nt;return B===void 0&&(B=!0),this.animations.length===0&&this.stateMachines.length===0&&(this.artboard.animationCount()>0?this.add([nt=this.artboard.animationByIndex(0).name],E,B):this.artboard.stateMachineCount()>0&&this.add([nt=this.artboard.stateMachineByIndex(0).name],E,B)),nt},q.prototype.handleLooping=function(){for(var E=0,B=this.animations.filter(function(at){return at.playing});E<B.length;E++){var nt=B[E];nt.loopValue===0&&nt.loopCount?(nt.loopCount=0,this.stop(nt.name)):nt.loopValue===1&&nt.loopCount?(this.eventManager.fire({type:I.Loop,data:{animation:nt.name,type:X.Loop}}),nt.loopCount=0):nt.loopValue===2&&nt.loopCount>1&&(this.eventManager.fire({type:I.Loop,data:{animation:nt.name,type:X.PingPong}}),nt.loopCount=0)}},q.prototype.handleStateChanges=function(){for(var E=[],B=0,nt=this.stateMachines.filter(function(wt){return wt.playing});B<nt.length;B++){var at=nt[B];E.push.apply(E,at.statesChanged)}E.length>0&&this.eventManager.fire({type:I.StateChange,data:E})},q.prototype.handleAdvancing=function(E){this.eventManager.fire({type:I.Advance,data:E})},q}();(function(q){q.Load="load",q.LoadError="loaderror",q.Play="play",q.Pause="pause",q.Stop="stop",q.Loop="loop",q.Draw="draw",q.Advance="advance",q.StateChange="statechange",q.RiveEvent="riveevent",q.AudioStatusChange="audiostatuschange"})(I||(I={})),function(q){q.OneShot="oneshot",q.Loop="loop",q.PingPong="pingpong"}(X||(X={}));var J,U=function(){function q(E){E===void 0&&(E=[]),this.listeners=E}return q.prototype.getListeners=function(E){return this.listeners.filter(function(B){return B.type===E})},q.prototype.add=function(E){this.listeners.includes(E)||this.listeners.push(E)},q.prototype.remove=function(E){for(var B=0;B<this.listeners.length;B++){var nt=this.listeners[B];if(nt.type===E.type&&nt.callback===E.callback){this.listeners.splice(B,1);break}}},q.prototype.removeAll=function(E){var B=this;E?this.listeners.filter(function(nt){return nt.type===E}).forEach(function(nt){return B.remove(nt)}):this.listeners.splice(0,this.listeners.length)},q.prototype.fire=function(E){this.getListeners(E.type).forEach(function(B){return B.callback(E)})},q}(),O=function(){function q(E){this.eventManager=E,this.queue=[]}return q.prototype.add=function(E){this.queue.push(E)},q.prototype.process=function(){for(;this.queue.length>0;){var E=this.queue.shift();E!=null&&E.action&&E.action(),E!=null&&E.event&&this.eventManager.fire(E.event)}},q}();(function(q){q[q.AVAILABLE=0]="AVAILABLE",q[q.UNAVAILABLE=1]="UNAVAILABLE"})(J||(J={}));var Z=function(q){function E(){var B=q!==null&&q.apply(this,arguments)||this;return B._started=!1,B._enabled=!1,B._status=J.UNAVAILABLE,B}return m(E,q),E.prototype.delay=function(B){return p(this,void 0,void 0,function(){return f(this,function(nt){return[2,new Promise(function(at){return setTimeout(at,B)})]})})},E.prototype.timeout=function(){return p(this,void 0,void 0,function(){return f(this,function(B){return[2,new Promise(function(nt,at){return setTimeout(at,50)})]})})},E.prototype.reportToListeners=function(){this.fire({type:I.AudioStatusChange}),this.removeAll()},E.prototype.enableAudio=function(){return p(this,void 0,void 0,function(){return f(this,function(B){return this._enabled||(this._enabled=!0,this._status=J.AVAILABLE,this.reportToListeners()),[2]})})},E.prototype.testAudio=function(){return p(this,void 0,void 0,function(){return f(this,function(B){switch(B.label){case 0:if(this._status!==J.UNAVAILABLE||this._audioContext===null)return[3,4];B.label=1;case 1:return B.trys.push([1,3,,4]),[4,Promise.race([this._audioContext.resume(),this.timeout()])];case 2:return B.sent(),this.enableAudio(),[3,4];case 3:return B.sent(),[3,4];case 4:return[2]}})})},E.prototype._establishAudio=function(){return p(this,void 0,void 0,function(){return f(this,function(B){switch(B.label){case 0:return this._started?[3,5]:(this._started=!0,typeof window<"u"?[3,1]:(this.enableAudio(),[3,5]));case 1:this._audioContext=new AudioContext,this.listenForUserAction(),B.label=2;case 2:return this._status!==J.UNAVAILABLE?[3,5]:[4,this.testAudio()];case 3:return B.sent(),[4,this.delay(1e3)];case 4:return B.sent(),[3,2];case 5:return[2]}})})},E.prototype.listenForUserAction=function(){var B=this;document.addEventListener("pointerdown",function(){return p(B,void 0,void 0,function(){return f(this,function(nt){return this.enableAudio(),[2]})})},{once:!0})},E.prototype.establishAudio=function(){return p(this,void 0,void 0,function(){return f(this,function(B){return this._establishAudio(),[2]})})},Object.defineProperty(E.prototype,"systemVolume",{get:function(){return this._status===J.UNAVAILABLE?(this.testAudio(),0):1},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),E}(U),et=new Z,Q=function(){function q(){}return q.prototype.observe=function(){},q.prototype.unobserve=function(){},q.prototype.disconnect=function(){},q}(),ut=globalThis.ResizeObserver||Q,rt=function(){function q(){var E=this;this._elementsMap=new Map,this._onObservedEntry=function(B){var nt=E._elementsMap.get(B.target);nt!==null?nt.onResize(B.target.clientWidth==0||B.target.clientHeight==0):E._resizeObserver.unobserve(B.target)},this._onObserved=function(B){B.forEach(E._onObservedEntry)},this._resizeObserver=new ut(this._onObserved)}return q.prototype.add=function(E,B){var nt={onResize:B,element:E};return this._elementsMap.set(E,nt),this._resizeObserver.observe(E),nt},q.prototype.remove=function(E){this._resizeObserver.unobserve(E.element),this._elementsMap.delete(E.element)},q}(),mt=new rt,G=function(){function q(E){this.enableRiveAssetCDN=!0,this.referenceCount=0,this.destroyed=!1,this.src=E.src,this.buffer=E.buffer,E.assetLoader&&(this.assetLoader=E.assetLoader),this.enableRiveAssetCDN=typeof E.enableRiveAssetCDN!="boolean"||E.enableRiveAssetCDN,this.eventManager=new U,E.onLoad&&this.on(I.Load,E.onLoad),E.onLoadError&&this.on(I.LoadError,E.onLoadError)}return q.prototype.initData=function(){return p(this,void 0,void 0,function(){var E,B,nt,at;return f(this,function(wt){switch(wt.label){case 0:return this.src?(E=this,[4,Bt(this.src)]):[3,2];case 1:E.buffer=wt.sent(),wt.label=2;case 2:return this.destroyed?[2]:(this.assetLoader&&(B=new this.runtime.CustomFileAssetLoader({loadContents:this.assetLoader})),nt=this,[4,this.runtime.load(new Uint8Array(this.buffer),B,this.enableRiveAssetCDN)]);case 3:if(nt.file=wt.sent(),this.destroyed)return(at=this.file)===null||at===void 0||at.delete(),this.file=null,[2];if(this.file===null)throw this.eventManager.fire({type:I.LoadError,data:null}),new Error(q.fileLoadErrorMessage);return this.eventManager.fire({type:I.Load,data:this}),[2]}})})},q.prototype.init=function(){return p(this,void 0,void 0,function(){var E;return f(this,function(B){switch(B.label){case 0:if(!this.src&&!this.buffer)throw new Error(q.missingErrorMessage);return E=this,[4,M.awaitInstance()];case 1:return E.runtime=B.sent(),this.destroyed?[2]:[4,this.initData()];case 2:return B.sent(),[2]}})})},q.prototype.on=function(E,B){this.eventManager.add({type:E,callback:B})},q.prototype.off=function(E,B){this.eventManager.remove({type:E,callback:B})},q.prototype.cleanup=function(){var E;this.referenceCount-=1,this.referenceCount<=0&&(this.removeAllRiveEventListeners(),(E=this.file)===null||E===void 0||E.delete(),this.file=null,this.destroyed=!0)},q.prototype.removeAllRiveEventListeners=function(E){this.eventManager.removeAll(E)},q.prototype.getInstance=function(){if(this.file!==null)return this.referenceCount+=1,this.file},q.missingErrorMessage="Rive source file or data buffer required",q.fileLoadErrorMessage="The file failed to load",q}(),Tt=function(){function q(E){var B,nt=this;this.loaded=!1,this.destroyed=!1,this._observed=null,this.readyForPlaying=!1,this.artboard=null,this.eventCleanup=null,this.shouldDisableRiveListeners=!1,this.automaticallyHandleEvents=!1,this.enableRiveAssetCDN=!0,this._volume=1,this._artboardWidth=void 0,this._artboardHeight=void 0,this._devicePixelRatioUsed=1,this._hasZeroSize=!1,this._audioEventListener=null,this._boundDraw=null,this.durations=[],this.frameTimes=[],this.frameCount=0,this.isTouchScrollEnabled=!1,this.onCanvasResize=function(at){var wt=nt._hasZeroSize!==at;nt._hasZeroSize=at,at?nt._layout.maxX&&nt._layout.maxY||nt.resizeToCanvas():wt&&nt.resizeDrawingSurfaceToCanvas()},this.renderSecondTimer=0,this._boundDraw=this.draw.bind(this),this.canvas=E.canvas,E.canvas.constructor===HTMLCanvasElement&&(this._observed=mt.add(this.canvas,this.onCanvasResize)),this.src=E.src,this.buffer=E.buffer,this.riveFile=E.riveFile,this.layout=(B=E.layout)!==null&&B!==void 0?B:new C,this.shouldDisableRiveListeners=!!E.shouldDisableRiveListeners,this.isTouchScrollEnabled=!!E.isTouchScrollEnabled,this.automaticallyHandleEvents=!!E.automaticallyHandleEvents,this.enableRiveAssetCDN=E.enableRiveAssetCDN===void 0||E.enableRiveAssetCDN,this.eventManager=new U,E.onLoad&&this.on(I.Load,E.onLoad),E.onLoadError&&this.on(I.LoadError,E.onLoadError),E.onPlay&&this.on(I.Play,E.onPlay),E.onPause&&this.on(I.Pause,E.onPause),E.onStop&&this.on(I.Stop,E.onStop),E.onLoop&&this.on(I.Loop,E.onLoop),E.onStateChange&&this.on(I.StateChange,E.onStateChange),E.onAdvance&&this.on(I.Advance,E.onAdvance),E.onload&&!E.onLoad&&this.on(I.Load,E.onload),E.onloaderror&&!E.onLoadError&&this.on(I.LoadError,E.onloaderror),E.onplay&&!E.onPlay&&this.on(I.Play,E.onplay),E.onpause&&!E.onPause&&this.on(I.Pause,E.onpause),E.onstop&&!E.onStop&&this.on(I.Stop,E.onstop),E.onloop&&!E.onLoop&&this.on(I.Loop,E.onloop),E.onstatechange&&!E.onStateChange&&this.on(I.StateChange,E.onstatechange),E.assetLoader&&(this.assetLoader=E.assetLoader),this.taskQueue=new O(this.eventManager),this.init({src:this.src,buffer:this.buffer,riveFile:this.riveFile,autoplay:E.autoplay,animations:E.animations,stateMachines:E.stateMachines,artboard:E.artboard,useOffscreenRenderer:E.useOffscreenRenderer})}return q.new=function(E){return console.warn("This function is deprecated: please use `new Rive({})` instead"),new q(E)},q.prototype.onSystemAudioChanged=function(){this.volume=this._volume},q.prototype.init=function(E){var B=this,nt=E.src,at=E.buffer,wt=E.riveFile,vt=E.animations,Dt=E.stateMachines,ie=E.artboard,me=E.autoplay,St=me!==void 0&&me,ze=E.useOffscreenRenderer,Ze=ze!==void 0&&ze;if(!this.destroyed){if(this.src=nt,this.buffer=at,this.riveFile=wt,!this.src&&!this.buffer&&!this.riveFile)throw new x(q.missingErrorMessage);var ve=_t(vt),Qe=_t(Dt);this.loaded=!1,this.readyForPlaying=!1,M.awaitInstance().then(function(Ee){B.destroyed||(B.runtime=Ee,B.removeRiveListeners(),B.deleteRiveRenderer(),B.renderer=B.runtime.makeRenderer(B.canvas,Ze),B.canvas.width||B.canvas.height||B.resizeDrawingSurfaceToCanvas(),B.initData(ie,ve,Qe,St).then(function(){return B.setupRiveListeners()}).catch(function(In){console.error(In)}))}).catch(function(Ee){console.error(Ee)})}},q.prototype.setupRiveListeners=function(E){var B=this;if(this.eventCleanup&&this.eventCleanup(),!this.shouldDisableRiveListeners){var nt=(this.animator.stateMachines||[]).filter(function(wt){return wt.playing&&B.runtime.hasListeners(wt.instance)}).map(function(wt){return wt.instance}),at=this.isTouchScrollEnabled;E&&"isTouchScrollEnabled"in E&&(at=E.isTouchScrollEnabled),this.eventCleanup=(0,u.registerTouchInteractions)({canvas:this.canvas,artboard:this.artboard,stateMachines:nt,renderer:this.renderer,rive:this.runtime,fit:this._layout.runtimeFit(this.runtime),alignment:this._layout.runtimeAlignment(this.runtime),isTouchScrollEnabled:at,layoutScaleFactor:this._layout.layoutScaleFactor})}},q.prototype.removeRiveListeners=function(){this.eventCleanup&&(this.eventCleanup(),this.eventCleanup=null)},q.prototype.initializeAudio=function(){var E,B=this;et.status==J.UNAVAILABLE&&(!((E=this.artboard)===null||E===void 0)&&E.hasAudio)&&this._audioEventListener===null&&(this._audioEventListener={type:I.AudioStatusChange,callback:function(){return B.onSystemAudioChanged()}},et.add(this._audioEventListener),et.establishAudio())},q.prototype.initArtboardSize=function(){this.artboard&&(this._artboardWidth=this.artboard.width=this._artboardWidth||this.artboard.width,this._artboardHeight=this.artboard.height=this._artboardHeight||this.artboard.height)},q.prototype.initData=function(E,B,nt,at){return p(this,void 0,void 0,function(){var wt,vt,Dt;return f(this,function(ie){switch(ie.label){case 0:return ie.trys.push([0,3,,4]),this.riveFile!=null?[3,2]:(this.riveFile=new G({src:this.src,buffer:this.buffer,enableRiveAssetCDN:this.enableRiveAssetCDN,assetLoader:this.assetLoader}),[4,this.riveFile.init()]);case 1:ie.sent(),ie.label=2;case 2:if(!this.riveFile)throw new x(q.cleanupErrorMessage);return this.file=this.riveFile.getInstance(),this.initArtboard(E,B,nt,at),this.initArtboardSize(),this.initializeAudio(),this.loaded=!0,this.eventManager.fire({type:I.Load,data:(Dt=this.src)!==null&&Dt!==void 0?Dt:"buffer"}),this.readyForPlaying=!0,this.taskQueue.process(),this.drawFrame(),[2,Promise.resolve()];case 3:return wt=ie.sent(),vt=(me=wt)&&me.isHandledError?me.message:"Problem loading file; may be corrupt!",console.warn(vt),this.eventManager.fire({type:I.LoadError,data:vt}),[2,Promise.reject(vt)];case 4:return[2]}var me})})},q.prototype.initArtboard=function(E,B,nt,at){if(this.file){var wt,vt=E?this.file.artboardByName(E):this.file.defaultArtboard();if(!vt){var Dt="Invalid artboard name or no default artboard";return console.warn(Dt),void this.eventManager.fire({type:I.LoadError,data:Dt})}if(this.artboard=vt,vt.volume=this._volume*et.systemVolume,this.artboard.animationCount()<1)throw Dt="Artboard has no animations",this.eventManager.fire({type:I.LoadError,data:Dt}),Dt;this.animator=new H(this.runtime,this.artboard,this.eventManager),B.length>0||nt.length>0?(wt=B.concat(nt),this.animator.initLinearAnimations(B,at),this.animator.initStateMachines(nt,at)):wt=[this.animator.atLeastOne(at,!1)],this.taskQueue.add({event:{type:at?I.Play:I.Pause,data:wt}})}},q.prototype.drawFrame=function(){var E;!((E=document==null?void 0:document.timeline)===null||E===void 0)&&E.currentTime?this.loaded&&this.artboard&&!this.frameRequestId&&this._boundDraw(document.timeline.currentTime):this.startRendering()},q.prototype.draw=function(E,B){this.frameRequestId=null;var nt=performance.now();this.lastRenderTime||(this.lastRenderTime=E),this.renderSecondTimer+=E-this.lastRenderTime,this.renderSecondTimer>5e3&&(this.renderSecondTimer=0,B==null||B());var at=(E-this.lastRenderTime)/1e3;this.lastRenderTime=E;for(var wt=0,vt=this.animator.animations.filter(function(tn){return tn.playing||tn.needsScrub}).sort(function(tn){return tn.needsScrub?-1:1});wt<vt.length;wt++){var Dt=vt[wt];Dt.advance(at),Dt.instance.didLoop&&(Dt.loopCount+=1),Dt.apply(1)}for(var ie=0,me=this.animator.stateMachines.filter(function(tn){return tn.playing});ie<me.length;ie++){var St=me[ie],ze=St.reportedEventCount();if(ze)for(var Ze=0;Ze<ze;Ze++){var ve=St.reportedEventAt(Ze);if(ve)if(ve.type===S.OpenUrl){if(this.eventManager.fire({type:I.RiveEvent,data:ve}),this.automaticallyHandleEvents){var Qe=document.createElement("a"),Ee=ve,In=Ee.url,Be=Ee.target,jn=(0,u.sanitizeUrl)(In);In&&Qe.setAttribute("href",jn),Be&&Qe.setAttribute("target",Be),jn&&jn!==u.BLANK_URL&&Qe.click()}}else this.eventManager.fire({type:I.RiveEvent,data:ve})}St.advanceAndApply(at)}this.animator.stateMachines.length==0&&this.artboard.advance(at);var wn=this.renderer;wn.clear(),wn.save(),this.alignRenderer(),this._hasZeroSize||this.artboard.draw(wn),wn.restore(),wn.flush(),this.animator.handleLooping(),this.animator.handleStateChanges(),this.animator.handleAdvancing(at),this.frameCount++;var Ke=performance.now();for(this.frameTimes.push(Ke),this.durations.push(Ke-nt);this.frameTimes[0]<=Ke-1e3;)this.frameTimes.shift(),this.durations.shift();this.animator.isPlaying?this.startRendering():(this.animator.isPaused||this.animator.isStopped)&&(this.lastRenderTime=0)},q.prototype.alignRenderer=function(){var E=this,B=E.renderer,nt=E.runtime,at=E._layout,wt=E.artboard;B.align(at.runtimeFit(nt),at.runtimeAlignment(nt),{minX:at.minX,minY:at.minY,maxX:at.maxX,maxY:at.maxY},wt.bounds,this._devicePixelRatioUsed*at.layoutScaleFactor)},Object.defineProperty(q.prototype,"fps",{get:function(){return this.durations.length},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"frameTime",{get:function(){return this.durations.length===0?0:(this.durations.reduce(function(E,B){return E+B},0)/this.durations.length).toFixed(4)},enumerable:!1,configurable:!0}),q.prototype.cleanup=function(){var E;this.destroyed=!0,this.stopRendering(),this.cleanupInstances(),this._observed!==null&&mt.remove(this._observed),this.removeRiveListeners(),this.file&&((E=this.riveFile)===null||E===void 0||E.cleanup(),this.file=null),this.riveFile=null,this.deleteRiveRenderer(),this._audioEventListener!==null&&(et.remove(this._audioEventListener),this._audioEventListener=null)},q.prototype.deleteRiveRenderer=function(){var E;(E=this.renderer)===null||E===void 0||E.delete(),this.renderer=null},q.prototype.cleanupInstances=function(){this.eventCleanup!==null&&this.eventCleanup(),this.stop(),this.artboard&&(this.artboard.delete(),this.artboard=null)},q.prototype.retrieveTextRun=function(E){var B;if(E)if(this.artboard){var nt=this.artboard.textRun(E);if(nt)return nt;console.warn("Could not access a text run with name '".concat(E,"' in the '").concat((B=this.artboard)===null||B===void 0?void 0:B.name,"' Artboard. Note that you must rename a text run node in the Rive editor to make it queryable at runtime."))}else console.warn("Tried to access text run, but the Artboard is null");else console.warn("No text run name provided")},q.prototype.getTextRunValue=function(E){var B=this.retrieveTextRun(E);return B?B.text:void 0},q.prototype.setTextRunValue=function(E,B){var nt=this.retrieveTextRun(E);nt&&(nt.text=B)},q.prototype.play=function(E,B){var nt=this;E=_t(E),this.readyForPlaying?(this.animator.play(E),this.eventCleanup&&this.eventCleanup(),this.setupRiveListeners(),this.startRendering()):this.taskQueue.add({action:function(){return nt.play(E,B)}})},q.prototype.pause=function(E){var B=this;E=_t(E),this.readyForPlaying?(this.eventCleanup&&this.eventCleanup(),this.animator.pause(E)):this.taskQueue.add({action:function(){return B.pause(E)}})},q.prototype.scrub=function(E,B){var nt=this;E=_t(E),this.readyForPlaying?(this.animator.scrub(E,B||0),this.drawFrame()):this.taskQueue.add({action:function(){return nt.scrub(E,B)}})},q.prototype.stop=function(E){var B=this;E=_t(E),this.readyForPlaying?(this.animator&&this.animator.stop(E),this.eventCleanup&&this.eventCleanup()):this.taskQueue.add({action:function(){return B.stop(E)}})},q.prototype.reset=function(E){var B,nt=E==null?void 0:E.artboard,at=_t(E==null?void 0:E.animations),wt=_t(E==null?void 0:E.stateMachines),vt=(B=E==null?void 0:E.autoplay)!==null&&B!==void 0&&B;this.cleanupInstances(),this.initArtboard(nt,at,wt,vt),this.taskQueue.process()},q.prototype.load=function(E){this.file=null,this.stop(),this.init(E)},Object.defineProperty(q.prototype,"layout",{get:function(){return this._layout},set:function(E){this._layout=E,E.maxX&&E.maxY||this.resizeToCanvas(),this.loaded&&!this.animator.isPlaying&&this.drawFrame()},enumerable:!1,configurable:!0}),q.prototype.resizeToCanvas=function(){this._layout=this.layout.copyWith({minX:0,minY:0,maxX:this.canvas.width,maxY:this.canvas.height})},q.prototype.resizeDrawingSurfaceToCanvas=function(E){if(this.canvas instanceof HTMLCanvasElement&&window){var B=this.canvas.getBoundingClientRect(),nt=B.width,at=B.height,wt=E||window.devicePixelRatio||1;if(this.devicePixelRatioUsed=wt,this.canvas.width=wt*nt,this.canvas.height=wt*at,this.resizeToCanvas(),this.drawFrame(),this.layout.fit===r.Layout){var vt=this._layout.layoutScaleFactor;this.artboard.width=nt/vt,this.artboard.height=at/vt}}},Object.defineProperty(q.prototype,"source",{get:function(){return this.src},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"activeArtboard",{get:function(){return this.artboard?this.artboard.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"animationNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var E=[],B=0;B<this.artboard.animationCount();B++)E.push(this.artboard.animationByIndex(B).name);return E},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"stateMachineNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var E=[],B=0;B<this.artboard.stateMachineCount();B++)E.push(this.artboard.stateMachineByIndex(B).name);return E},enumerable:!1,configurable:!0}),q.prototype.stateMachineInputs=function(E){if(this.loaded){var B=this.animator.stateMachines.find(function(nt){return nt.name===E});return B==null?void 0:B.inputs}},q.prototype.retrieveInputAtPath=function(E,B){if(E)if(this.artboard){var nt=this.artboard.inputByPath(E,B);if(nt)return nt;console.warn("Could not access an input with name: '".concat(E,"', at path:'").concat(B,"'"))}else console.warn("Tried to access input: '".concat(E,"', at path: '").concat(B,"', but the Artboard is null"));else console.warn("No input name provided for path '".concat(B,"'"))},q.prototype.setBooleanStateAtPath=function(E,B,nt){var at=this.retrieveInputAtPath(E,nt);at&&(at.type===A.Boolean?at.asBool().value=B:console.warn("Input with name: '".concat(E,"', at path:'").concat(nt,"' is not a boolean")))},q.prototype.setNumberStateAtPath=function(E,B,nt){var at=this.retrieveInputAtPath(E,nt);at&&(at.type===A.Number?at.asNumber().value=B:console.warn("Input with name: '".concat(E,"', at path:'").concat(nt,"' is not a number")))},q.prototype.fireStateAtPath=function(E,B){var nt=this.retrieveInputAtPath(E,B);nt&&(nt.type===A.Trigger?nt.asTrigger().fire():console.warn("Input with name: '".concat(E,"', at path:'").concat(B,"' is not a trigger")))},q.prototype.retrieveTextAtPath=function(E,B){if(E)if(B)if(this.artboard){var nt=this.artboard.textByPath(E,B);if(nt)return nt;console.warn("Could not access text with name: '".concat(E,"', at path:'").concat(B,"'"))}else console.warn("Tried to access text: '".concat(E,"', at path: '").concat(B,"', but the Artboard is null"));else console.warn("No path provided for text '".concat(E,"'"));else console.warn("No text name provided for path '".concat(B,"'"))},q.prototype.getTextRunValueAtPath=function(E,B){var nt=this.retrieveTextAtPath(E,B);if(nt)return nt.text;console.warn("Could not get text with name: '".concat(E,"', at path:'").concat(B,"'"))},q.prototype.setTextRunValueAtPath=function(E,B,nt){var at=this.retrieveTextAtPath(E,nt);at?at.text=B:console.warn("Could not set text with name: '".concat(E,"', at path:'").concat(nt,"'"))},Object.defineProperty(q.prototype,"playingStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(E){return E.playing}).map(function(E){return E.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"playingAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(E){return E.playing}).map(function(E){return E.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"pausedAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(E){return!E.playing}).map(function(E){return E.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"pausedStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(E){return!E.playing}).map(function(E){return E.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"isPlaying",{get:function(){return this.animator.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"isPaused",{get:function(){return this.animator.isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"isStopped",{get:function(){return this.animator.isStopped},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"bounds",{get:function(){return this.artboard?this.artboard.bounds:void 0},enumerable:!1,configurable:!0}),q.prototype.on=function(E,B){this.eventManager.add({type:E,callback:B})},q.prototype.off=function(E,B){this.eventManager.remove({type:E,callback:B})},q.prototype.unsubscribe=function(E,B){console.warn("This function is deprecated: please use `off()` instead."),this.off(E,B)},q.prototype.removeAllRiveEventListeners=function(E){this.eventManager.removeAll(E)},q.prototype.unsubscribeAll=function(E){console.warn("This function is deprecated: please use `removeAllRiveEventListeners()` instead."),this.removeAllRiveEventListeners(E)},q.prototype.stopRendering=function(){this.loaded&&this.frameRequestId&&(this.runtime.cancelAnimationFrame?this.runtime.cancelAnimationFrame(this.frameRequestId):cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null)},q.prototype.startRendering=function(){this.loaded&&this.artboard&&!this.frameRequestId&&(this.runtime.requestAnimationFrame?this.frameRequestId=this.runtime.requestAnimationFrame(this._boundDraw):this.frameRequestId=requestAnimationFrame(this._boundDraw))},q.prototype.enableFPSCounter=function(E){this.runtime.enableFPSCounter(E)},q.prototype.disableFPSCounter=function(){this.runtime.disableFPSCounter()},Object.defineProperty(q.prototype,"contents",{get:function(){if(this.loaded){for(var E={artboards:[]},B=0;B<this.file.artboardCount();B++){for(var nt=this.file.artboardByIndex(B),at={name:nt.name,animations:[],stateMachines:[]},wt=0;wt<nt.animationCount();wt++){var vt=nt.animationByIndex(wt);at.animations.push(vt.name)}for(var Dt=0;Dt<nt.stateMachineCount();Dt++){for(var ie=nt.stateMachineByIndex(Dt),me=ie.name,St=new this.runtime.StateMachineInstance(ie,nt),ze=[],Ze=0;Ze<St.inputCount();Ze++){var ve=St.input(Ze);ze.push({name:ve.name,type:ve.type})}at.stateMachines.push({name:me,inputs:ze})}E.artboards.push(at)}return E}},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"volume",{get:function(){return this.artboard&&this.artboard.volume!==this._volume&&(this._volume=this.artboard.volume),this._volume},set:function(E){this._volume=E,this.artboard&&(this.artboard.volume=E*et.systemVolume)},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"artboardWidth",{get:function(){var E;return this.artboard?this.artboard.width:(E=this._artboardWidth)!==null&&E!==void 0?E:0},set:function(E){this._artboardWidth=E,this.artboard&&(this.artboard.width=E)},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"artboardHeight",{get:function(){var E;return this.artboard?this.artboard.height:(E=this._artboardHeight)!==null&&E!==void 0?E:0},set:function(E){this._artboardHeight=E,this.artboard&&(this.artboard.height=E)},enumerable:!1,configurable:!0}),q.prototype.resetArtboardSize=function(){this.artboard?(this.artboard.resetArtboardSize(),this._artboardWidth=this.artboard.width,this._artboardHeight=this.artboard.height):(this._artboardWidth=void 0,this._artboardHeight=void 0)},Object.defineProperty(q.prototype,"devicePixelRatioUsed",{get:function(){return this._devicePixelRatioUsed},set:function(E){this._devicePixelRatioUsed=E},enumerable:!1,configurable:!0}),q.missingErrorMessage="Rive source file or data buffer required",q.cleanupErrorMessage="Attempt to use file after calling cleanup.",q}(),Bt=function(q){return p(void 0,void 0,void 0,function(){var E;return f(this,function(B){switch(B.label){case 0:return E=new Request(q),[4,fetch(E)];case 1:return[4,B.sent().arrayBuffer()];case 2:return[2,B.sent()]}})})},_t=function(q){return typeof q=="string"?[q]:q instanceof Array?q:[]},Ct={EventManager:U,TaskQueueManager:O},Se=function(q){return new Promise(function(E){return M.getInstance(function(B){B.decodeAudio(q,E)})})},Te=function(q){return new Promise(function(E){return M.getInstance(function(B){B.decodeImage(q,E)})})},sn=function(q){return new Promise(function(E){return M.getInstance(function(B){B.decodeFont(q,E)})})}})(),e})();var L4=I4.exports=y1();const ni=class ni{constructor(){$t(this,"memoryUpdates",Fe(null));$t(this,"clearTimeout")}notifyMemoryUpdated(){this.clearTimeout||(this.memoryUpdates.set({timestamp:Date.now()}),clearTimeout(this.clearTimeout),this.clearTimeout=void 0,this.clearTimeout=setTimeout(()=>{this.memoryUpdates.set(null),this.clearTimeout=void 0},ni.CLEAR_DELAY_MS))}subscribe(t){return this.memoryUpdates.subscribe(t)}};$t(ni,"CLEAR_DELAY_MS",1e4);let Gi=ni;const x1=new Gi,R4=""+new URL("memories-dark-DhQ4ghw7.riv",import.meta.url).href,el=""+new URL("memories-light-Cj0fATGz.riv",import.meta.url).href;function D4(s){let t,n,e;return{c(){t=D("span"),t.textContent="Augment Memories",k(t,"role","button"),k(t,"tabindex","0")},m(o,r){_(o,t,r),n||(e=[Et(t,"click",s[3]),Et(t,"keydown",s[4])],n=!0)},p:N,d(o){o&&y(t),n=!1,Ye(e)}}}function P4(s){let t,n;return t=new Nt({props:{content:"Information that Agent remembered from previous interactions (click to open)",$$slots:{default:[D4]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};2048&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function N4(s){let t;return{c(){t=D("canvas"),k(t,"slot","leftIcon"),k(t,"width","32"),k(t,"height","32"),qn(t,"width","14px"),qn(t,"height","14px")},m(n,e){_(n,t,e),s[5](t)},p:N,d(n){n&&y(t),s[5](null)}}}function F4(s){let t,n;return t=new Wo({props:{$$slots:{leftIcon:[N4],default:[P4]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,[o]){const r={};2049&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function z4(s,t,n){let e;kt(s,x1,u=>n(2,e=u));let o,r,i=el;function c(){r&&(r==null||r.cleanup(),n(1,r=void 0)),o&&!r&&n(1,r=new L4.Rive({src:i,canvas:o,autoplay:!1,onLoad:()=>{r==null||r.resizeDrawingSurfaceToCanvas(),r==null||r.play(),r==null||r.stop()}}))}function a(u){i=u===bf.dark?R4:el,c()}function l(){r==null||r.reset()}return En(()=>{yf(a),a(xf())}),sr(()=>{r==null||r.cleanup()}),s.$$.update=()=>{3&s.$$.dirty&&o&&!r&&c(),4&s.$$.dirty&&(e!=null&&e.timestamp)&&(r==null||r.reset(),r==null||r.play(),setTimeout(l,2500))},[o,r,e,function(u){hn.call(this,s,u)},function(u){hn.call(this,s,u)},function(u){Gt[u?"unshift":"push"](()=>{o=u,n(0,o)})}]}class O4 extends ct{constructor(t){super(),lt(this,t,z4,F4,it,{})}}function nl(s){let t,n,e,o,r,i,c,a;const l=[j4,q4,U4,H4,B4],u=[];function m(p,f){return 2&f&&(t=null),2&f&&(n=null),2&f&&(e=null),2&f&&(o=null),t==null&&(t=!!aa(p[1])),t?0:(n==null&&(n=!!ia(p[1])),n?1:(e==null&&(e=!!Tp(p[1])),e?2:(o==null&&(o=!!Ep(p[1])),o?3:4)))}return r=m(s,-1),i=u[r]=l[r](s),{c(){i.c(),c=gt()},m(p,f){u[r].m(p,f),_(p,c,f),a=!0},p(p,f){let x=r;r=m(p,f),r===x?u[r].p(p,f):(Y(),$(u[x],1,1,()=>{u[x]=null}),K(),i=u[r],i?i.p(p,f):(i=u[r]=l[r](p),i.c()),d(i,1),i.m(c.parentNode,c))},i(p){a||(d(i),a=!0)},o(p){$(i),a=!1},d(p){p&&y(c),u[r].d(p)}}}function B4(s){let t,n,e,o,r,i;const c=[G4,V4,W4],a=[];function l(u,m){return u[3]?0:u[2].iconName?1:2}return n=l(s),e=a[n]=c[n](s),{c(){t=D("div"),e.c(),k(t,"class","pulse-chip-container svelte-s9omdo")},m(u,m){_(u,t,m),a[n].m(t,null),o=!0,r||(i=Lo(Eg.call(null,t,s[6])),r=!0)},p(u,m){let p=n;n=l(u),n===p?a[n].p(u,m):(Y(),$(a[p],1,1,()=>{a[p]=null}),K(),e=a[n],e?e.p(u,m):(e=a[n]=c[n](u),e.c()),d(e,1),e.m(t,null))},i(u){o||(d(e),o=!0)},o(u){$(e),o=!1},d(u){u&&y(t),a[n].d(),r=!1,i()}}}function H4(s){let t,n;return t=new O4({}),t.$on("click",function(){xe(s[2].onClick)&&s[2].onClick.apply(this,arguments)}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){s=e},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function U4(s){let t,n;return t=new s4({props:{item:s[1],chatModel:s[0]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.item=e[1]),1&o&&(r.chatModel=e[0]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function q4(s){let t,n;return t=new E4({props:{item:s[1]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.item=e[1]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function j4(s){let t,n;return t=new v4({props:{originalCode:s[1].selection.originalCode,onRemove:s[7]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.originalCode=e[1].selection.originalCode),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function W4(s){let t,n;return t=new Wo({props:{removeBtn:{title:s[2].removeTitle,onRemove:s[7]},showWarning:s[2].showWarning,$$slots:{default:[X4]},$$scope:{ctx:s}}}),t.$on("click",function(){xe(s[2].onClick)&&s[2].onClick.apply(this,arguments)}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){s=e;const r={};4&o&&(r.removeBtn={title:s[2].removeTitle,onRemove:s[7]}),4&o&&(r.showWarning=s[2].showWarning),4102&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function V4(s){let t,n;return t=new Wo({props:{removeBtn:{title:s[2].removeTitle,onRemove:s[7]},showWarning:s[2].showWarning,$$slots:{leftIcon:[tw],default:[Q4]},$$scope:{ctx:s}}}),t.$on("click",function(){xe(s[2].onClick)&&s[2].onClick.apply(this,arguments)}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){s=e;const r={};4&o&&(r.removeBtn={title:s[2].removeTitle,onRemove:s[7]}),4&o&&(r.showWarning=s[2].showWarning),4102&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function G4(s){let t,n;return t=new Wo({props:{removeBtn:{title:s[2].removeTitle,onRemove:s[7]},showWarning:s[2].showWarning,$$slots:{leftButtons:[rw],default:[ow]},$$scope:{ctx:s}}}),t.$on("click",function(){xe(s[2].onClick)&&s[2].onClick.apply(this,arguments)}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){s=e;const r={};4&o&&(r.removeBtn={title:s[2].removeTitle,onRemove:s[7]}),4&o&&(r.showWarning=s[2].showWarning),4118&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Y4(s){let t,n;return t=new Cn({props:{nopath:!0,filepath:s[2].filepath}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.filepath=e[2].filepath),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function K4(s){let t,n;return t=new cs({props:{option:s[1],slot:"content"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.option=e[1]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function X4(s){let t,n;return t=new Nt({props:{triggerOn:[te.Hover],$$slots:{content:[K4],default:[Y4]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4102&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function J4(s){let t,n;return t=new Cn({props:{nopath:!0,filepath:s[2].filepath}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.filepath=e[2].filepath),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Z4(s){let t,n;return t=new cs({props:{option:s[1],slot:"content"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.option=e[1]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Q4(s){let t,n;return t=new Nt({props:{triggerOn:[te.Hover],$$slots:{content:[Z4],default:[J4]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4102&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function tw(s){let t,n;return t=new cv({props:{icon:s[2].iconName,slot:"leftIcon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.icon=e[2].iconName),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function ew(s){let t,n;return t=new Cn({props:{nopath:!0,filepath:s[2].filepath}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.filepath=e[2].filepath),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function nw(s){let t,n;return t=new cs({props:{option:s[1],slot:"content"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.option=e[1]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function ow(s){let t,n;return t=new Nt({props:{triggerOn:[te.Hover],$$slots:{content:[nw],default:[ew]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4102&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function rw(s){let t,n;const e=[s[4],{slot:"leftButtons"}];let o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return t=new W2({props:o}),{c(){g(t.$$.fragment)},m(r,i){h(t,r,i),n=!0},p(r,i){const c=16&i?Ue(e,[Cr(r[4]),e[1]]):{};t.$set(c)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){v(t,r)}}}function sw(s){let t,n,e=s[1]&&nl(s);return{c(){e&&e.c(),t=gt()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,[r]){o[1]?e?(e.p(o,r),2&r&&d(e,1)):(e=nl(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function iw(s,t,n){let e,o,r,i,c,a,l=N,u=N,m=()=>(u(),u=oe(p,C=>n(10,a=C)),p);s.$$.on_destroy.push(()=>l()),s.$$.on_destroy.push(()=>u());let{chatModel:p}=t;m();let{item:f}=t,x=!1;const A=new Tg({onHoverStart:()=>{n(8,x=!0)},onHoverEnd:()=>{n(8,x=!1)},hoverTriggerDuration:0});return s.$$set=C=>{"chatModel"in C&&m(n(0,p=C.chatModel)),"item"in C&&n(1,f=C.item)},s.$$.update=()=>{1024&s.$$.dirty&&(n(5,e=a==null?void 0:a.specialContextInputModel),l(),l=oe(e,C=>n(9,c=C))),2&s.$$.dirty&&n(2,o=(C=>{const M={onClick:void 0,removeTitle:"",filepath:"",pinnable:!0,iconName:void 0,showWarning:!1};if(na(C))return{...M,onClick:()=>{p==null||p.extensionClient.openFile(C.file)},removeTitle:"Remove file from context",filepath:C.file.pathName};if(oa(C))return{...M,onClick:()=>{p==null||p.extensionClient.openFile(C.recentFile)},removeTitle:"Remove file from context",filepath:C.recentFile.pathName};if(ra(C))return{...M,onClick:()=>{p==null||p.extensionClient.openFile(C.folder)},removeTitle:"Remove folder from context",filepath:C.folder.pathName,iconName:"folder-opened"};if(sa(C))return{...M,removeTitle:"Remove external source from context",filepath:C.label,iconName:"book"};if(ci(C))return{...M,removeTitle:"Remove source folder from context",filepath:C.sourceFolder.folderRoot,iconName:"root-folder",pinnable:!1,showWarning:C.showWarning};if(Tp(C))return{...M,iconName:"root-folder",pinnable:!1};if(ca(C)){const S=`${Pi}/${Ni}/${C.rule.path}`;return{...M,onClick:()=>{p==null||p.extensionClient.openFile({repoRoot:"",pathName:S})},removeTitle:"Remove rule from context",filepath:S,iconName:"rule"}}return Ep(C)?{...M,onClick:()=>{const S=p==null?void 0:p.flags.agentMemoriesFilePathName;p!=null&&p.currentConversationId&&p.extensionClient.reportAgentSessionEvent({eventName:Ro.openedMemoriesFile,conversationId:p.currentConversationId,eventData:{memoriesFileOpenData:{memoriesPathUndefined:!S}}}),p==null||p.extensionClient.openMemoriesFile()},pinnable:!1}:M})(f)),514&s.$$.dirty&&n(4,r={title:f.pinned?"Unpin":"Pin to context",onPin:()=>c==null?void 0:c.togglePinned(f),isPinned:f.pinned}),262&s.$$.dirty&&n(3,i=o.pinnable&&(x||f.pinned))},[p,f,o,i,r,e,A,()=>{c==null||c.markInactive(f),c==null||c.unpin(f)},x,c,a]}class aw extends ct{constructor(t){super(),lt(this,t,iw,sw,it,{chatModel:0,item:1})}}function ol(s,t,n){const e=s.slice();return e[4]=t[n],e}function rl(s){let t,n;return t=new aw({props:{item:s[4],chatModel:s[0]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.item=e[4]),1&o&&(r.chatModel=e[0]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function cw(s){let t,n,e,o=ee(s[1]),r=[];for(let c=0;c<o.length;c+=1)r[c]=rl(ol(s,o,c));const i=c=>$(r[c],1,1,()=>{r[c]=null});return{c(){t=D("div"),n=D("div");for(let c=0;c<r.length;c+=1)r[c].c();k(n,"class","c-action-bar-context-container svelte-1wj2viq"),k(t,"class","c-action-bar-context svelte-1wj2viq")},m(c,a){_(c,t,a),P(t,n);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(n,null);e=!0},p(c,[a]){if(3&a){let l;for(o=ee(c[1]),l=0;l<o.length;l+=1){const u=ol(c,o,l);r[l]?(r[l].p(u,a),d(r[l],1)):(r[l]=rl(u),r[l].c(),d(r[l],1),r[l].m(n,null))}for(Y(),l=o.length;l<r.length;l+=1)i(l);K()}},i(c){if(!e){for(let a=0;a<o.length;a+=1)d(r[a]);e=!0}},o(c){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)$(r[a]);e=!1},d(c){c&&y(t),rn(r,c)}}}function lw(s,t,n){let e,o,r=N;s.$$.on_destroy.push(()=>r());let{chatModel:i}=t,c=[];return s.$$set=a=>{"chatModel"in a&&n(0,i=a.chatModel)},s.$$.update=()=>{if(1&s.$$.dirty&&(n(2,e=i.specialContextInputModel),r(),r=oe(e,a=>n(3,o=a))),8&s.$$.dirty){const a=o.recentActiveItems,l=[],u=a.filter(m=>!ci(m)||(l.push(m),!1));l.length>1?(u.push({id:"sourceFoldersGroup",label:"Repos",status:pg.active,sourceFolderGroup:l.sort((m,p)=>{const f=Bi(m.sourceFolder.folderRoot),x=Bi(p.sourceFolder.folderRoot);return f.localeCompare(x)}),referenceCount:1}),n(1,c=u.reverse())):n(1,c=a.reverse())}},[i,c,e,o]}class b1 extends ct{constructor(t){super(),lt(this,t,lw,cw,it,{chatModel:0})}}const uw=s=>({}),sl=s=>({}),dw=s=>({}),il=s=>({});function $w(s){let t,n,e,o,r;const i=s[1].leftAlign,c=Xt(i,s,s[0],il),a=s[1].rightAlign,l=Xt(a,s,s[0],sl);return{c(){t=D("div"),n=D("div"),c&&c.c(),e=z(),o=D("div"),l&&l.c(),k(n,"class","c-input-action-bar__left-align"),k(o,"class","c-input-action-bar__right-align"),k(t,"class","c-input-action-bar svelte-zhy9ha")},m(u,m){_(u,t,m),P(t,n),c&&c.m(n,null),P(t,e),P(t,o),l&&l.m(o,null),r=!0},p(u,[m]){c&&c.p&&(!r||1&m)&&Jt(c,i,u,u[0],r?Qt(i,u[0],m,dw):Zt(u[0]),il),l&&l.p&&(!r||1&m)&&Jt(l,a,u,u[0],r?Qt(a,u[0],m,uw):Zt(u[0]),sl)},i(u){r||(d(c,u),d(l,u),r=!0)},o(u){$(c,u),$(l,u),r=!1},d(u){u&&y(t),c&&c.d(u),l&&l.d(u)}}}function mw(s,t,n){let{$$slots:e={},$$scope:o}=t;return s.$$set=r=>{"$$scope"in r&&n(0,o=r.$$scope)},[o,e]}const pw=s=>({}),al=s=>({closeDropdown:s[11]}),fw=s=>({}),cl=s=>({}),gw=s=>({}),ll=s=>({}),hw=s=>({dropdownIconSize:1024&s[0],variant:2&s[0],color:4&s[0],disabled:16384&s[0],radius:8&s[0]}),ul=s=>({dropdownButtonDataAttr:Ew,dropdownIconSize:s[10],variant:s[1],color:s[2],disabled:s[14],radius:s[3]}),vw=s=>({}),dl=s=>({slot:"iconLeft"}),ww=s=>({size:1&s[0],variant:2&s[0],color:4&s[0],radius:8&s[0],disabled:32768&s[0],highContrast:16&s[0]}),$l=s=>({mainButtonDataAttr:Tw,size:s[0],variant:s[1],color:s[2],radius:s[3],disabled:s[15],highContrast:s[4]});function yw(s){let t;const n=s[26].default,e=Xt(n,s,s[37],null);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r[1])&&Jt(e,n,o,o[37],t?Qt(n,o[37],r,null):Zt(o[37]),null)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function xw(s){let t;const n=s[26].iconLeft,e=Xt(n,s,s[37],dl);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r[1])&&Jt(e,n,o,o[37],t?Qt(n,o[37],r,vw):Zt(o[37]),dl)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function ml(s){let t,n,e;return n=new gp({props:{size:4,orientation:"vertical"}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-split-button__separator svelte-1tmsqjt")},m(o,r){_(o,t,r),h(n,t,null),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function pl(s){let t,n,e={onOpenChange:s[16],$$slots:{default:[kw]},$$scope:{ctx:s}};return t=new yt.Root({props:e}),s[36](t),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,r){const i={};59278&r[0]|64&r[1]&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){s[36](null),v(t,o)}}}function bw(s){let t;const n=s[26]["custom-dropdown-icon"],e=Xt(n,s,s[37],cl);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r[1])&&Jt(e,n,o,o[37],t?Qt(n,o[37],r,fw):Zt(o[37]),cl)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function _w(s){let t,n;return t=new Po({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Cw(s){let t;const n=s[26]["dropdown-icon"],e=Xt(n,s,s[37],ll),o=e||function(r){let i,c,a,l;const u=[_w,bw],m=[];function p(f,x){return f[9]==="chevron"?0:1}return i=p(r),c=m[i]=u[i](r),{c(){c.c(),a=gt()},m(f,x){m[i].m(f,x),_(f,a,x),l=!0},p(f,x){let A=i;i=p(f),i===A?m[i].p(f,x):(Y(),$(m[A],1,1,()=>{m[A]=null}),K(),c=m[i],c?c.p(f,x):(c=m[i]=u[i](f),c.c()),d(c,1),c.m(a.parentNode,a))},i(f){l||(d(c),l=!0)},o(f){$(c),l=!1},d(f){f&&y(a),m[i].d(f)}}}(s);return{c(){o&&o.c()},m(r,i){o&&o.m(r,i),t=!0},p(r,i){e?e.p&&(!t||64&i[1])&&Jt(e,n,r,r[37],t?Qt(n,r[37],i,gw):Zt(r[37]),ll):o&&o.p&&(!t||512&i[0]|64&i[1])&&o.p(r,t?i:[-1,-1])},i(r){t||(d(o,r),t=!0)},o(r){$(o,r),t=!1},d(r){o&&o.d(r)}}}function Aw(s){let t;const n=s[26]["dropdown-trigger"],e=Xt(n,s,s[37],ul),o=e||function(r){let i,c;return i=new se({props:{size:r[10],variant:r[15]?"soft":r[1],color:r[2],disabled:r[14],radius:r[3],"data-split-button-dropdown":"true",$$slots:{default:[Cw]},$$scope:{ctx:r}}}),{c(){g(i.$$.fragment)},m(a,l){h(i,a,l),c=!0},p(a,l){const u={};1024&l[0]&&(u.size=a[10]),32770&l[0]&&(u.variant=a[15]?"soft":a[1]),4&l[0]&&(u.color=a[2]),16384&l[0]&&(u.disabled=a[14]),8&l[0]&&(u.radius=a[3]),512&l[0]|64&l[1]&&(u.$$scope={dirty:l,ctx:a}),i.$set(u)},i(a){c||(d(i.$$.fragment,a),c=!0)},o(a){$(i.$$.fragment,a),c=!1},d(a){v(i,a)}}}(s);return{c(){o&&o.c()},m(r,i){o&&o.m(r,i),t=!0},p(r,i){e?e.p&&(!t||17422&i[0]|64&i[1])&&Jt(e,n,r,r[37],t?Qt(n,r[37],i,hw):Zt(r[37]),ul):o&&o.p&&(!t||50702&i[0]|64&i[1])&&o.p(r,t?i:[-1,-1])},i(r){t||(d(o,r),t=!0)},o(r){$(o,r),t=!1},d(r){o&&o.d(r)}}}function Mw(s){let t,n,e,o;const r=s[26]["dropdown-content"],i=Xt(r,s,s[37],al);return{c(){t=D("div"),i&&i.c(),k(t,"class","c-split-button__dropdown-contents svelte-1tmsqjt")},m(c,a){_(c,t,a),i&&i.m(t,null),n=!0,e||(o=Et(t,"click",s[19]),e=!0)},p(c,a){i&&i.p&&(!n||64&a[1])&&Jt(i,r,c,c[37],n?Qt(r,c[37],a,pw):Zt(c[37]),al)},i(c){n||(d(i,c),n=!0)},o(c){$(i,c),n=!1},d(c){c&&y(t),i&&i.d(c),e=!1,o()}}}function kw(s){let t,n,e,o;return t=new yt.Trigger({props:{$$slots:{default:[Aw]},$$scope:{ctx:s}}}),e=new yt.Content({props:{size:s[13],side:s[7],align:s[8],onClickOutside:s[17],onEscapeKeyDown:s[18],$$slots:{default:[Mw]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};50702&i[0]|64&i[1]&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};8192&i[0]&&(a.size=r[13]),128&i[0]&&(a.side=r[7]),256&i[0]&&(a.align=r[8]),64&i[1]&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function Sw(s){let t,n,e,o,r,i;const c=s[26].button,a=Xt(c,s,s[37],$l),l=a||function(p){let f,x;const A=[{size:p[0]},{variant:p[1]},{color:p[2]},{radius:p[3]},{disabled:p[15]},{highContrast:p[4]},{"data-split-button-main":p[6]?"true":void 0},p[20]];let C={$$slots:{iconLeft:[xw],default:[yw]},$$scope:{ctx:p}};for(let M=0;M<A.length;M+=1)C=It(C,A[M]);return f=new he({props:C}),f.$on("click",p[27]),f.$on("keyup",p[28]),f.$on("keydown",p[29]),f.$on("mousedown",p[30]),f.$on("mouseover",p[31]),f.$on("focus",p[32]),f.$on("mouseleave",p[33]),f.$on("blur",p[34]),f.$on("contextmenu",p[35]),{c(){g(f.$$.fragment)},m(M,S){h(f,M,S),x=!0},p(M,S){const L=1081439&S[0]?Ue(A,[1&S[0]&&{size:M[0]},2&S[0]&&{variant:M[1]},4&S[0]&&{color:M[2]},8&S[0]&&{radius:M[3]},32768&S[0]&&{disabled:M[15]},16&S[0]&&{highContrast:M[4]},64&S[0]&&{"data-split-button-main":M[6]?"true":void 0},1048576&S[0]&&Cr(M[20])]):{};64&S[1]&&(L.$$scope={dirty:S,ctx:M}),f.$set(L)},i(M){x||(d(f.$$.fragment,M),x=!0)},o(M){$(f.$$.fragment,M),x=!1},d(M){v(f,M)}}}(s);let u=s[6]&&ml(),m=s[6]&&pl(s);return{c(){t=D("div"),n=D("div"),l&&l.c(),e=z(),u&&u.c(),o=z(),m&&m.c(),k(n,"class","c-split-button__main svelte-1tmsqjt"),k(t,"class",r="c-split-button c-split-button--size-"+s[0]+" "+s[5]+" svelte-1tmsqjt"),xt(t,"c-split-button--has-dropdown",s[6])},m(p,f){_(p,t,f),P(t,n),l&&l.m(n,null),P(t,e),u&&u.m(t,null),P(t,o),m&&m.m(t,null),i=!0},p(p,f){a?a.p&&(!i||32799&f[0]|64&f[1])&&Jt(a,c,p,p[37],i?Qt(c,p[37],f,ww):Zt(p[37]),$l):l&&l.p&&(!i||1081439&f[0]|64&f[1])&&l.p(p,i?f:[-1,-1]),p[6]?u?64&f[0]&&d(u,1):(u=ml(),u.c(),d(u,1),u.m(t,o)):u&&(Y(),$(u,1,1,()=>{u=null}),K()),p[6]?m?(m.p(p,f),64&f[0]&&d(m,1)):(m=pl(p),m.c(),d(m,1),m.m(t,null)):m&&(Y(),$(m,1,1,()=>{m=null}),K()),(!i||33&f[0]&&r!==(r="c-split-button c-split-button--size-"+p[0]+" "+p[5]+" svelte-1tmsqjt"))&&k(t,"class",r),(!i||97&f[0])&&xt(t,"c-split-button--has-dropdown",p[6])},i(p){i||(d(l,p),d(u),d(m),i=!0)},o(p){$(l,p),$(u),$(m),i=!1},d(p){p&&y(t),l&&l.d(p),u&&u.d(),m&&m.d()}}}const Tw="data-split-button-main",Ew="data-split-button-dropdown";function Iw(s,t,n){let e,o,r;const i=["size","variant","color","radius","disabled","highContrast","class","showDropdown","dropdownSide","dropdownAlign","onDropdownOpenChange","onDropdownClickOutside","onDropdownEscapeKeyDown","dropdownIcon","dropdownIconSize","requestCloseDropdown","requestOpenDropdown"];let c,a=Hs(t,i),{$$slots:l={},$$scope:u}=t,{size:m=2}=t,{variant:p="solid"}=t,{color:f="neutral"}=t,{radius:x="medium"}=t,{disabled:A={primaryDisabled:!1,dropdownDisabled:!1}}=t,{highContrast:C=!1}=t,{class:M=""}=t,{showDropdown:S=!0}=t,{dropdownSide:L="bottom"}=t,{dropdownAlign:I="end"}=t,{onDropdownOpenChange:X}=t,{onDropdownClickOutside:j}=t,{onDropdownEscapeKeyDown:H}=t,{dropdownIcon:J="chevron"}=t,{dropdownIconSize:U=m}=t;const O=()=>c==null?void 0:c.requestClose();return s.$$set=Z=>{t=It(It({},t),ae(Z)),n(20,a=Hs(t,i)),"size"in Z&&n(0,m=Z.size),"variant"in Z&&n(1,p=Z.variant),"color"in Z&&n(2,f=Z.color),"radius"in Z&&n(3,x=Z.radius),"disabled"in Z&&n(21,A=Z.disabled),"highContrast"in Z&&n(4,C=Z.highContrast),"class"in Z&&n(5,M=Z.class),"showDropdown"in Z&&n(6,S=Z.showDropdown),"dropdownSide"in Z&&n(7,L=Z.dropdownSide),"dropdownAlign"in Z&&n(8,I=Z.dropdownAlign),"onDropdownOpenChange"in Z&&n(22,X=Z.onDropdownOpenChange),"onDropdownClickOutside"in Z&&n(23,j=Z.onDropdownClickOutside),"onDropdownEscapeKeyDown"in Z&&n(24,H=Z.onDropdownEscapeKeyDown),"dropdownIcon"in Z&&n(9,J=Z.dropdownIcon),"dropdownIconSize"in Z&&n(10,U=Z.dropdownIconSize),"$$scope"in Z&&n(37,u=Z.$$scope)},s.$$.update=()=>{2097152&s.$$.dirty[0]&&n(15,e=typeof A=="boolean"?A:A.primaryDisabled),2097152&s.$$.dirty[0]&&n(14,o=typeof A=="boolean"?A:A.dropdownDisabled),1024&s.$$.dirty[0]&&n(13,r=U>2?2:U)},[m,p,f,x,C,M,S,L,I,J,U,O,c,r,o,e,function(Z){X&&X(Z)},function(){j&&j()},function(){H&&H()},function(){O()},a,A,X,j,H,()=>c==null?void 0:c.requestOpen(),l,function(Z){hn.call(this,s,Z)},function(Z){hn.call(this,s,Z)},function(Z){hn.call(this,s,Z)},function(Z){hn.call(this,s,Z)},function(Z){hn.call(this,s,Z)},function(Z){hn.call(this,s,Z)},function(Z){hn.call(this,s,Z)},function(Z){hn.call(this,s,Z)},function(Z){hn.call(this,s,Z)},function(Z){Gt[Z?"unshift":"push"](()=>{c=Z,n(12,c)})},u]}const _1={Root:class extends ct{constructor(s){super(),lt(this,s,Iw,Sw,it,{size:0,variant:1,color:2,radius:3,disabled:21,highContrast:4,class:5,showDropdown:6,dropdownSide:7,dropdownAlign:8,onDropdownOpenChange:22,onDropdownClickOutside:23,onDropdownEscapeKeyDown:24,dropdownIcon:9,dropdownIconSize:10,requestCloseDropdown:11,requestOpenDropdown:25},null,[-1,-1])}get requestCloseDropdown(){return this.$$.ctx[11]}get requestOpenDropdown(){return this.$$.ctx[25]}}};function fl(s,t,n){const e=s.slice();e[21]=t[n];const o=e[2][e[21]];e[22]=o;const r=e[21]===e[11].currentConversationModel.selectedModelId;return e[23]=r,e}function gl(s,t,n){const e=s.slice();e[26]=t[n];const o=e[26].id===e[5];return e[23]=o,e}function Lw(s){let t;const n=s[16].default,e=Xt(n,s,s[19],null);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||524288&r)&&Jt(e,n,o,o[19],t?Qt(n,o[19],r,null):Zt(o[19]),null)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function hl(s){let t,n,e,o=ee(s[4]),r=[];for(let a=0;a<o.length;a+=1)r[a]=vl(gl(s,o,a));const i=a=>$(r[a],1,1,()=>{r[a]=null});let c=s[8]&&wl();return{c(){for(let a=0;a<r.length;a+=1)r[a].c();t=z(),c&&c.c(),n=gt()},m(a,l){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(a,l);_(a,t,l),c&&c.m(a,l),_(a,n,l),e=!0},p(a,l){if(112&l){let u;for(o=ee(a[4]),u=0;u<o.length;u+=1){const m=gl(a,o,u);r[u]?(r[u].p(m,l),d(r[u],1)):(r[u]=vl(m),r[u].c(),d(r[u],1),r[u].m(t.parentNode,t))}for(Y(),u=o.length;u<r.length;u+=1)i(u);K()}a[8]?c?256&l&&d(c,1):(c=wl(),c.c(),d(c,1),c.m(n.parentNode,n)):c&&(Y(),$(c,1,1,()=>{c=null}),K())},i(a){if(!e){for(let l=0;l<o.length;l+=1)d(r[l]);d(c),e=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)$(r[l]);$(c),e=!1},d(a){a&&(y(t),y(n)),rn(r,a),c&&c.d(a)}}}function Rw(s){let t,n,e=s[26].label+"";return{c(){t=V(e),n=z()},m(o,r){_(o,t,r),_(o,n,r)},p(o,r){16&r&&e!==(e=o[26].label+"")&&ht(t,e)},d(o){o&&(y(t),y(n))}}}function vl(s){let t,n;function e(){return s[17](s[26])}return t=new yt.Item({props:{highlight:s[23],onSelect:e,$$slots:{default:[Rw]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,r){s=o;const i={};48&r&&(i.highlight=s[23]),80&r&&(i.onSelect=e),524304&r&&(i.$$scope={dirty:r,ctx:s}),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){v(t,o)}}}function wl(s){let t,n;return t=new yt.Separator({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function yl(s){let t,n,e,o;t=new yt.Label({props:{$$slots:{default:[Dw]},$$scope:{ctx:s}}});let r=ee(Object.keys(s[2])),i=[];for(let a=0;a<r.length;a+=1)i[a]=xl(fl(s,r,a));const c=a=>$(i[a],1,1,()=>{i[a]=null});return{c(){g(t.$$.fragment),n=z();for(let a=0;a<i.length;a+=1)i[a].c();e=gt()},m(a,l){h(t,a,l),_(a,n,l);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(a,l);_(a,e,l),o=!0},p(a,l){const u={};if(524288&l&&(u.$$scope={dirty:l,ctx:a}),t.$set(u),2054&l){let m;for(r=ee(Object.keys(a[2])),m=0;m<r.length;m+=1){const p=fl(a,r,m);i[m]?(i[m].p(p,l),d(i[m],1)):(i[m]=xl(p),i[m].c(),d(i[m],1),i[m].m(e.parentNode,e))}for(Y(),m=r.length;m<i.length;m+=1)c(m);K()}},i(a){if(!o){d(t.$$.fragment,a);for(let l=0;l<r.length;l+=1)d(i[l]);o=!0}},o(a){$(t.$$.fragment,a),i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)$(i[l]);o=!1},d(a){a&&(y(n),y(e)),v(t,a),rn(i,a)}}}function Dw(s){let t;return{c(){t=V("Models")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Pw(s){let t,n,e=s[22]+"";return{c(){t=V(e),n=z()},m(o,r){_(o,t,r),_(o,n,r)},p(o,r){4&r&&e!==(e=o[22]+"")&&ht(t,e)},d(o){o&&(y(t),y(n))}}}function xl(s){let t,n;function e(){return s[18](s[21])}return t=new yt.Item({props:{highlight:s[23],onSelect:e,$$slots:{default:[Pw]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,r){s=o;const i={};4&r&&(i.highlight=s[23]),6&r&&(i.onSelect=e),524292&r&&(i.$$scope={dirty:r,ctx:s}),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){v(t,o)}}}function Nw(s){let t,n,e,o=s[7]&&hl(s),r=s[8]&&yl(s);return{c(){o&&o.c(),t=z(),r&&r.c(),n=gt()},m(i,c){o&&o.m(i,c),_(i,t,c),r&&r.m(i,c),_(i,n,c),e=!0},p(i,c){i[7]?o?(o.p(i,c),128&c&&d(o,1)):(o=hl(i),o.c(),d(o,1),o.m(t.parentNode,t)):o&&(Y(),$(o,1,1,()=>{o=null}),K()),i[8]?r?(r.p(i,c),256&c&&d(r,1)):(r=yl(i),r.c(),d(r,1),r.m(n.parentNode,n)):r&&(Y(),$(r,1,1,()=>{r=null}),K())},i(i){e||(d(o),d(r),e=!0)},o(i){$(o),$(r),e=!1},d(i){i&&(y(t),y(n)),o&&o.d(i),r&&r.d(i)}}}function Fw(s){let t,n;return t=new _1.Root({props:{size:1,variant:"solid",color:s[9]?"neutral":"accent",disabled:s[0],showDropdown:s[10],dropdownSide:"top",dropdownAlign:"end",$$slots:{"dropdown-content":[Nw],default:[Lw]},$$scope:{ctx:s}}}),t.$on("click",function(){xe(s[3])&&s[3].apply(this,arguments)}),t.$on("keyup",function(){xe(yo("Enter",s[3]))&&yo("Enter",s[3]).apply(this,arguments)}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,[o]){s=e;const r={};512&o&&(r.color=s[9]?"neutral":"accent"),1&o&&(r.disabled=s[0]),1024&o&&(r.showDropdown=s[10]),524790&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function zw(s,t,n){let e,o,r,i,c,a,{$$slots:l={},$$scope:u}=t,{disabled:m=!1}=t,{onSelectModel:p}=t,{modelIdToDisplayName:f}=t,{onSend:x}=t,{modeOptions:A=[]}=t,{currentMode:C}=t,{onSelectMode:M}=t;const S=Mt("chatModel");if(!S)throw new Error("ChatModel not found in context");const L=Mt(on.key);kt(s,L,j=>n(14,c=j));const I=Mt(wo.key),{canShowTaskList:X}=I;return kt(s,X,j=>n(15,a=j)),s.$$set=j=>{"disabled"in j&&n(0,m=j.disabled),"onSelectModel"in j&&n(1,p=j.onSelectModel),"modelIdToDisplayName"in j&&n(2,f=j.modelIdToDisplayName),"onSend"in j&&n(3,x=j.onSend),"modeOptions"in j&&n(4,A=j.modeOptions),"currentMode"in j&&n(5,C=j.currentMode),"onSelectMode"in j&&n(6,M=j.onSelectMode),"$$scope"in j&&n(19,u=j.$$scope)},s.$$.update=()=>{4&s.$$.dirty&&n(8,e=Object.keys(f).length>1),16&s.$$.dirty&&n(7,o=A.length>1),49536&s.$$.dirty&&n(10,r=e||a&&o&&!(c!=null&&c.isActive)),1&s.$$.dirty&&n(9,i=typeof m=="boolean"?m:m.primaryDisabled)},[m,p,f,x,A,C,M,o,e,i,r,S,L,X,c,a,l,j=>{M(j.id)},j=>{p(j)},u]}class Ow extends ct{constructor(t){super(),lt(this,t,zw,Fw,it,{disabled:0,onSelectModel:1,modelIdToDisplayName:2,onSend:3,modeOptions:4,currentMode:5,onSelectMode:6})}}function Bw(s){let t,n,e;var o=s[7];return o&&(t=vn(o,{})),{c(){t&&g(t.$$.fragment),n=gt()},m(r,i){t&&h(t,r,i),_(r,n,i),e=!0},p(r,i){if(128&i&&o!==(o=r[7])){if(t){Y();const c=t;$(c.$$.fragment,1,0,()=>{v(c,1)}),K()}o?(t=vn(o,{}),g(t.$$.fragment),d(t.$$.fragment,1),h(t,n.parentNode,n)):t=null}},i(r){e||(t&&d(t.$$.fragment,r),e=!0)},o(r){t&&$(t.$$.fragment,r),e=!1},d(r){r&&y(n),t&&v(t,r)}}}function Hw(s){let t,n;return t=new Nt({props:{content:s[6],triggerOn:[te.Hover],side:"top",delayDurationMs:500,offset:[0,qw],$$slots:{default:[Bw]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};64&o&&(r.content=e[6]),1048704&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Uw(s){let t,n;return t=new Ow({props:{disabled:{primaryDisabled:s[1],dropdownDisabled:!1},onSelectModel:s[18],onSend:s[0],modelIdToDisplayName:s[3],modeOptions:s[4],currentMode:s[2],onSelectMode:s[12],$$slots:{default:[Hw]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,[o]){const r={};2&o&&(r.disabled={primaryDisabled:e[1],dropdownDisabled:!1}),1024&o&&(r.onSelectModel=e[18]),1&o&&(r.onSend=e[0]),8&o&&(r.modelIdToDisplayName=e[3]),16&o&&(r.modeOptions=e[4]),4&o&&(r.currentMode=e[2]),1048768&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}const qw=10;function jw(s,t,n){let e,o,r,i,c,a,l,u,m,p,f,x,A=N,C=N,M=N;s.$$.on_destroy.push(()=>A()),s.$$.on_destroy.push(()=>C()),s.$$.on_destroy.push(()=>M());const S=Mt("chatModel");kt(s,S,J=>n(15,m=J));const L=Mt("agentConversationModel");if(!S)throw new Error("ChatModel not found in context");if(!L)throw new Error("AgentConversationModel not found in context");let{primaryAction:I}=t,{isDisabled:X=!1}=t,{disabledReason:j=""}=t,H={};return s.$$set=J=>{"primaryAction"in J&&n(0,I=J.primaryAction),"isDisabled"in J&&n(1,X=J.isDisabled),"disabledReason"in J&&n(13,j=J.disabledReason)},s.$$.update=()=>{32768&s.$$.dirty&&n(10,e=m.currentConversationModel),32768&s.$$.dirty&&(n(9,o=m.flags),C(),C=oe(o,J=>n(16,f=J))),32768&s.$$.dirty&&(n(8,r=m.sendModeModel.mode),A(),A=oe(r,J=>n(2,p=J))),4&s.$$.dirty&&n(14,i=cc.find(J=>J.id===p)),212992&s.$$.dirty&&n(7,c=x&&f.enableTaskList&&(i==null?void 0:i.icon)||Yp),221186&s.$$.dirty&&n(6,a=X?j:x&&f.enableTaskList?(i==null?void 0:i.label)||"Send to Agent":"Send message"),196608&s.$$.dirty&&n(4,u=x&&f.enableTaskList?cc:[]),229380&s.$$.dirty&&(x&&f.enableTaskList||p!==Us.addTask||(m.sendModeModel.setMode(Us.send),m.saveImmediate())),32768&s.$$.dirty&&n(3,H=Object.fromEntries(Object.entries(m.flags.modelDisplayNameToId).map(([J,U])=>[U,J])))},n(5,l=L.isCurrConversationAgentic),M(),M=oe(l,J=>n(17,x=J)),[I,X,p,H,u,l,a,c,r,o,e,S,function(J){m.sendModeModel.setMode(J),m.saveImmediate()},j,i,m,f,x,J=>e.setSelectedModelId(J)]}const Uo=class Uo{constructor(t,n){$t(this,"_disposers",[]);$t(this,"_allMentionables",Fe([]));$t(this,"_breadcrumbIds",Fe([]));$t(this,"_userQuery",Fe(""));$t(this,"_active",Fe(!1));$t(this,"_allGroups",On([this._active,this._allMentionables],([t,n])=>t?fg(n):[]));$t(this,"_currentGroup",On([this._breadcrumbIds,this._allGroups],([t,n])=>{if(t.length===0)return;const e=t[t.length-1];return n.find(o=>Kr(o)&&o.id===e)}));$t(this,"dispose",()=>{for(const t of this._disposers)t()});$t(this,"openDropdown",()=>{this._active.set(!0)});$t(this,"closeDropdown",()=>{this._active.set(!1),this._resetState()});$t(this,"toggleDropdown",()=>re(this._active)?(this.closeDropdown(),!1):(this.openDropdown(),!0));$t(this,"pushBreadcrumb",t=>{re(this._active)&&this._breadcrumbIds.update(n=>[...n,t.id])});$t(this,"popBreadcrumb",()=>{re(this._active)&&this._breadcrumbIds.update(t=>t.slice(0,-1))});$t(this,"selectMentionable",t=>{var o;const n=this._chatModel.extensionClient,e=this._chatModel.specialContextInputModel;return Kr(t)&&t.type==="breadcrumb"?(this.pushBreadcrumb(t),!0):t.type==="breadcrumb-back"?(this.popBreadcrumb(),!0):Ip(t)?(e.markAllActive(),this.closeDropdown(),n.reportWebviewClientEvent(hr.chatRestoreDefaultContext),!0):t.clearContext?(e.markAllInactive(),this.closeDropdown(),n.reportWebviewClientEvent(hr.chatClearContext),!0):t.userGuidelines?(n.openSettingsPage("guidelines"),this.closeDropdown(),!0):((o=this._insertMentionNode)==null||o.call(this,t),this.closeDropdown(),!0)});$t(this,"_displayItems",On([this._active,this._breadcrumbIds,this._userQuery,this._currentGroup,this.allGroups],([t,n,e,o,r])=>{if(!t)return[];if(n.length>0&&o)return[{...o,type:"breadcrumb-back"},...o.group.items.slice(0,Uo.SINGLE_GROUP_MAX_ITEMS).map(i=>({...i,type:"item"}))];if(e.length>0){const i=Ww(re(this._userQuery)).map(c=>({...c,type:"item"}));return r.flatMap(c=>[{...c,type:"breadcrumb"},...c.group.items.slice(0,Uo.MULTI_GROUP_MAX_ITEMS).map(a=>({...a,type:"item"}))]).concat(i)}return[{...Lp,type:"item"},...r.map(i=>({...i,type:"breadcrumb"})),{...Rp,type:"item"},{...Dp,type:"item"}]}));$t(this,"_refreshSeqNum",0);$t(this,"_refreshMentionables",Gs(async()=>{if(!re(this._active))return;this._refreshSeqNum++;const t=this._refreshSeqNum,n=this._chatModel.currentConversationModel&&gn(this._chatModel.currentConversationModel),e=re(this._userQuery),o=await this._chatModel.extensionClient.getSuggestions(e,n);t===this._refreshSeqNum&&this._allMentionables.set(C1({query:e,mentionables:o}))},Uo.REFRESH_THROTTLE_MS,{leading:!0,trailing:!0}));this._chatModel=t,this._insertMentionNode=n,this._disposers.push(this._userQuery.subscribe(this._refreshMentionables)),this._disposers.push(this._active.subscribe(this._refreshMentionables))}get allGroups(){return this._allGroups}get currentGroup(){return this._currentGroup}get breadcrumbIds(){return this._breadcrumbIds}get displayItems(){return this._displayItems}get active(){return this._active}get userQuery(){return this._userQuery}_resetState(){this._breadcrumbIds.set([]),this._userQuery.set("")}};$t(Uo,"REFRESH_THROTTLE_MS",600),$t(Uo,"SINGLE_GROUP_MAX_ITEMS",12),$t(Uo,"MULTI_GROUP_MAX_ITEMS",6);let Ks=Uo;const C1=({query:s,mentionables:t,returnAllIfNoResults:n=!0,threshold:e=1})=>{if(s.length<=1)return t;const o=new fr(t,{keys:["label"],threshold:e,minMatchCharLength:0,ignoreLocation:!0,includeScore:!0,useExtendedSearch:!1,shouldSort:!0,findAllMatches:!0}).search(s);return o.length===0&&n?t:o.map(r=>r.item)},Ww=s=>C1({query:s,mentionables:[Lp,Rp,Dp],returnAllIfNoResults:!1,threshold:.6});function Vw(s){let t,n,e,o=s[0].label+"";return{c(){t=D("span"),n=D("span"),e=V(o),k(n,"class","c-mentionable-group-label__text right"),k(t,"class","c-mentionable-group-label")},m(r,i){_(r,t,i),P(t,n),P(n,e)},p(r,i){1&i&&o!==(o=r[0].label+"")&&ht(e,o)},i:N,o:N,d(r){r&&y(t)}}}function Gw(s){let t,n;return t=new da({props:{$$slots:{text:[o3],leftIcon:[n3]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};17&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Yw(s){let t,n=s[0].label+"";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){1&o&&n!==(n=e[0].label+"")&&ht(t,n)},i:N,o:N,d(e){e&&y(t)}}}function Kw(s){let t,n;return t=new Cn({props:{filepath:s[0].rule.path,$$slots:{leftIcon:[r3]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].rule.path),16&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Xw(s){let t,n;return t=new Cn({props:{filepath:s[0].recentFile.pathName,$$slots:{leftIcon:[s3]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].recentFile.pathName),16&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Jw(s){let t,n;return t=new Cn({props:{filepath:s[0].selection.pathName,$$slots:{leftIcon:[i3]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].selection.pathName),16&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Zw(s){let t,n;return t=new Cn({props:{filepath:s[0].sourceFolder.folderRoot,$$slots:{leftIcon:[a3]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].sourceFolder.folderRoot),16&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Qw(s){let t,n;return t=new Cn({props:{filepath:s[0].externalSource.name,$$slots:{leftIcon:[c3]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].externalSource.name),16&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function t3(s){let t,n;return t=new Cn({props:{filepath:s[0].folder.pathName,$$slots:{leftIcon:[l3]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].folder.pathName),16&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function e3(s){let t,n;return t=new Cn({props:{filepath:s[0].file.pathName,$$slots:{leftIcon:[u3]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].file.pathName),16&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function n3(s){let t,n,e;var o=Ys(s[0].personality.type);return o&&(n=vn(o,{})),{c(){t=D("span"),n&&g(n.$$.fragment),k(t,"slot","leftIcon"),k(t,"class","c-context-menu-item__icon svelte-1a2w9oo")},m(r,i){_(r,t,i),n&&h(n,t,null),e=!0},p(r,i){if(1&i&&o!==(o=Ys(r[0].personality.type))){if(n){Y();const c=n;$(c.$$.fragment,1,0,()=>{v(c,1)}),K()}o?(n=vn(o,{}),g(n.$$.fragment),d(n.$$.fragment,1),h(n,t,null)):n=null}},i(r){e||(n&&d(n.$$.fragment,r),e=!0)},o(r){n&&$(n.$$.fragment,r),e=!1},d(r){r&&y(t),n&&v(n)}}}function o3(s){let t,n,e=s[0].label+"";return{c(){t=D("span"),n=V(e),k(t,"slot","text")},m(o,r){_(o,t,r),P(t,n)},p(o,r){1&r&&e!==(e=o[0].label+"")&&ht(n,e)},d(o){o&&y(t)}}}function r3(s){let t,n;return t=new ua({props:{slot:"leftIcon",iconName:"rule"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function s3(s){let t,n;return t=new Sr({props:{slot:"leftIcon",iconName:"description"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function i3(s){let t,n;return t=new Sr({props:{slot:"leftIcon",iconName:"text_select_start"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function a3(s){let t,n;return t=new Sr({props:{slot:"leftIcon",iconName:"folder_managed"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function c3(s){let t,n;return t=new Sr({props:{slot:"leftIcon",iconName:"import_contacts"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function l3(s){let t,n;return t=new Sr({props:{slot:"leftIcon",iconName:"folder_open"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function u3(s){let t,n;return t=new Sr({props:{slot:"leftIcon",iconName:"description"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function d3(s){let t,n,e,o,r,i,c,a,l,u,m,p,f,x;const A=[e3,t3,Qw,Zw,Jw,Xw,Kw,Yw,Gw,Vw],C=[];function M(S,L){return 1&L&&(t=null),1&L&&(n=null),1&L&&(e=null),1&L&&(o=null),1&L&&(r=null),1&L&&(i=null),1&L&&(c=null),1&L&&(a=null),1&L&&(l=null),1&L&&(u=null),t==null&&(t=!!na(S[0])),t?0:(n==null&&(n=!!ra(S[0])),n?1:(e==null&&(e=!!sa(S[0])),e?2:(o==null&&(o=!!ci(S[0])),o?3:(r==null&&(r=!!aa(S[0])),r?4:(i==null&&(i=!!oa(S[0])),i?5:(c==null&&(c=!!ca(S[0])),c?6:(a==null&&(a=!!Kr(S[0])),a?7:(l==null&&(l=!!Sp(S[0])),l?8:(u==null&&(u=!!(Ip(S[0])||gg(S[0])||ia(S[0]))),u?9:-1)))))))))}return~(m=M(s,-1))&&(p=C[m]=A[m](s)),{c(){p&&p.c(),f=gt()},m(S,L){~m&&C[m].m(S,L),_(S,f,L),x=!0},p(S,L){let I=m;m=M(S,L),m===I?~m&&C[m].p(S,L):(p&&(Y(),$(C[I],1,1,()=>{C[I]=null}),K()),~m?(p=C[m],p?p.p(S,L):(p=C[m]=A[m](S),p.c()),d(p,1),p.m(f.parentNode,f)):p=null)},i(S){x||(d(p),x=!0)},o(S){$(p),x=!1},d(S){S&&y(f),~m&&C[m].d(S)}}}function $3(s){let t,n,e;var o=s[3];function r(i,c){return{props:{highlight:i[2],onSelect:i[1],$$slots:{default:[d3]},$$scope:{ctx:i}}}}return o&&(t=vn(o,r(s))),{c(){t&&g(t.$$.fragment),n=gt()},m(i,c){t&&h(t,i,c),_(i,n,c),e=!0},p(i,[c]){if(8&c&&o!==(o=i[3])){if(t){Y();const a=t;$(a.$$.fragment,1,0,()=>{v(a,1)}),K()}o?(t=vn(o,r(i)),g(t.$$.fragment),d(t.$$.fragment,1),h(t,n.parentNode,n)):t=null}else if(o){const a={};4&c&&(a.highlight=i[2]),2&c&&(a.onSelect=i[1]),17&c&&(a.$$scope={dirty:c,ctx:i}),t.$set(a)}},i(i){e||(t&&d(t.$$.fragment,i),e=!0)},o(i){t&&$(t.$$.fragment,i),e=!1},d(i){i&&y(n),t&&v(t,i)}}}function m3(s,t,n){let e,{item:o}=t,{onSelect:r}=t,{highlight:i}=t;return s.$$set=c=>{"item"in c&&n(0,o=c.item),"onSelect"in c&&n(1,r=c.onSelect),"highlight"in c&&n(2,i=c.highlight)},s.$$.update=()=>{1&s.$$.dirty&&(o.type==="breadcrumb-back"?n(3,e=yt.BreadcrumbBackItem):o.type==="breadcrumb"&&Kr(o)?n(3,e=yt.BreadcrumbItem):o.type!=="item"||Kr(o)||n(3,e=yt.Item))},[o,r,i,e]}class A1 extends ct{constructor(t){super(),lt(this,t,m3,$3,it,{item:0,onSelect:1,highlight:2})}}function p3(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return{c(){t=ne("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=dn(t);n=$n(i,!0),i.forEach(y),this.h()},h(){n.a=null,ue(t,o)},m(r,i){mn(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208c13.3 0 24 10.7 24 24s-10.7 24-24 24C114.6 512 0 397.4 0 256S114.6 0 256 0s256 114.6 256 256v28c0 50.8-41.2 92-92 92-31.1 0-58.7-15.5-75.3-39.2-22 24.1-53.6 39.2-88.7 39.2-66.3 0-120-53.7-120-120s53.7-120 120-120c28.8 0 55.2 10.1 75.8 27 4.3-6.6 11.7-11 20.2-11 13.3 0 24 10.7 24 24v108c0 24.3 19.7 44 44 44s44-19.7 44-44v-28c0-114.9-93.1-208-208-208m72 208a72 72 0 1 0-144 0 72 72 0 1 0 144 0"/>',t)},p(r,[i]){ue(t,o=Ue(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&r[0]]))},i:N,o:N,d(r){r&&y(t)}}}function f3(s,t,n){return s.$$set=e=>{n(0,t=It(It({},t),ae(e)))},[t=ae(t)]}class g3 extends ct{constructor(t){super(),lt(this,t,f3,p3,it,{})}}function h3(s){let t,n;const e=s[1].default,o=Xt(e,s,s[0],null);return{c(){t=D("span"),o&&o.c(),k(t,"class","c-input-action-bar-command svelte-7hv65t")},m(r,i){_(r,t,i),o&&o.m(t,null),n=!0},p(r,[i]){o&&o.p&&(!n||1&i)&&Jt(o,e,r,r[0],n?Qt(e,r[0],i,null):Zt(r[0]),null)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&y(t),o&&o.d(r)}}}function v3(s,t,n){let{$$slots:e={},$$scope:o}=t;return s.$$set=r=>{"$$scope"in r&&n(0,o=r.$$scope)},[o,e]}class di extends ct{constructor(t){super(),lt(this,t,v3,h3,it,{})}}function bl(s,t,n){const e=s.slice();return e[21]=t[n],e}function w3(s){let t,n;return t=new g3({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function y3(s){let t,n;return t=new se({props:{size:1,variant:"ghost-block",color:"neutral",$$slots:{default:[w3]},$$scope:{ctx:s}}}),t.$on("click",s[2]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};16777216&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function x3(s){let t,n;return t=new di({props:{$$slots:{default:[y3]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};16777216&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function _l(s){let t,n;function e(){return s[15](s[21])}return t=new A1({props:{item:s[21],onSelect:e}}),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,r){s=o;const i={};32&r&&(i.item=s[21]),32&r&&(i.onSelect=e),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){v(t,o)}}}function Cl(s){let t,n;return t=new yt.Label({props:{$$slots:{default:[b3]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function b3(s){let t;return{c(){t=V("No results found")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function _3(s){let t,n,e,o,r,i,c,a,l=ee(s[5]),u=[];for(let A=0;A<l.length;A+=1)u[A]=_l(bl(s,l,A));const m=A=>$(u[A],1,1,()=>{u[A]=null});let p=s[6].length>0&&s[5].length===0&&Cl(s);function f(A){s[16](A)}o=new yt.Separator({});let x={placeholder:"Focus context"};return s[6]!==void 0&&(x.value=s[6]),i=new yt.TextFieldItem({props:x}),Gt.push(()=>ke(i,"value",f)),{c(){t=D("div");for(let A=0;A<u.length;A+=1)u[A].c();n=z(),p&&p.c(),e=z(),g(o.$$.fragment),r=z(),g(i.$$.fragment),k(t,"class","c-context-menu__items svelte-j63we7")},m(A,C){_(A,t,C);for(let M=0;M<u.length;M+=1)u[M]&&u[M].m(t,null);_(A,n,C),p&&p.m(A,C),_(A,e,C),h(o,A,C),_(A,r,C),h(i,A,C),a=!0},p(A,C){if(800&C){let S;for(l=ee(A[5]),S=0;S<l.length;S+=1){const L=bl(A,l,S);u[S]?(u[S].p(L,C),d(u[S],1)):(u[S]=_l(L),u[S].c(),d(u[S],1),u[S].m(t,null))}for(Y(),S=l.length;S<u.length;S+=1)m(S);K()}A[6].length>0&&A[5].length===0?p?96&C&&d(p,1):(p=Cl(A),p.c(),d(p,1),p.m(e.parentNode,e)):p&&(Y(),$(p,1,1,()=>{p=null}),K());const M={};!c&&64&C&&(c=!0,M.value=A[6],De(()=>c=!1)),i.$set(M)},i(A){if(!a){for(let C=0;C<l.length;C+=1)d(u[C]);d(p),d(o.$$.fragment,A),d(i.$$.fragment,A),a=!0}},o(A){u=u.filter(Boolean);for(let C=0;C<u.length;C+=1)$(u[C]);$(p),$(o.$$.fragment,A),$(i.$$.fragment,A),a=!1},d(A){A&&(y(t),y(n),y(e),y(r)),rn(u,A),p&&p.d(A),v(o,A),v(i,A)}}}function C3(s){let t,n,e,o;return t=new yt.Trigger({props:{$$slots:{default:[x3]},$$scope:{ctx:s}}}),e=new yt.Content({props:{size:1,side:"top",align:"start",onClickOutside:s[1],onEscapeKeyDown:s[1],onRequestClose:s[1],$$slots:{default:[_3]},$$scope:{ctx:s}}}),e.$on("keydown",s[7]),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};16777216&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};16777312&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function A3(s){let t,n,e={open:s[4],onOpenChange:s[17],nested:!1,$$slots:{default:[C3]},$$scope:{ctx:s}};return t=new yt.Root({props:e}),s[18](t),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,[r]){const i={};16&r&&(i.open=o[4]),1&r&&(i.onOpenChange=o[17]),16777312&r&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){s[18](null),v(t,o)}}}function M3(s,t,n){let e,o,r,i,{onCloseDropdown:c=()=>{}}=t,{onInsertMentionable:a}=t;const l=Mt("chatModel");if(!l)throw new Error("ChatModel not found in context");const u=()=>{i==null||i.focusIdx(-1)},m=()=>{i==null||i.focusIdx(0)},p=new Ks(l,C=>!!a&&a(C)),{displayItems:f,active:x,userQuery:A}=p;return kt(s,f,C=>n(5,o=C)),kt(s,x,C=>n(4,e=C)),kt(s,A,C=>n(6,r=C)),sr(p.dispose),s.$$set=C=>{"onCloseDropdown"in C&&n(0,c=C.onCloseDropdown),"onInsertMentionable"in C&&n(13,a=C.onInsertMentionable)},[c,async()=>{p.closeDropdown()},async()=>{p.toggleDropdown()&&(await ho(),u())},i,e,o,r,async C=>{switch(C.key){case"ArrowLeft":C.preventDefault(),p.popBreadcrumb(),await ho(),i==null||i.focusIdx(0);break;case"ArrowRight":case"ArrowDown":case"ArrowUp":case"Enter":break;default:C.defaultPrevented||u()}},m,p,f,x,A,a,async()=>{p.openDropdown(),await ho(),u()},async C=>{p.selectMentionable(C),await ho(),m()},function(C){r=C,A.set(r)},C=>{C||c()},function(C){Gt[C?"unshift":"push"](()=>{i=C,n(3,i)})}]}function k3(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 320 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return{c(){t=ne("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=dn(t);n=$n(i,!0),i.forEach(y),this.h()},h(){n.a=null,ue(t,o)},m(r,i){mn(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M308.1 3.3c11.4 6.7 15.3 21.4 8.6 32.8l-272 464c-6.7 11.4-21.4 15.3-32.8 8.6s-15.3-21.4-8.6-32.8l272-464C282 .4 296.7-3.4 308.1 3.3"/>',t)},p(r,[i]){ue(t,o=Ue(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 320 512"},1&i&&r[0]]))},i:N,o:N,d(r){r&&y(t)}}}function S3(s,t,n){return s.$$set=e=>{n(0,t=It(It({},t),ae(e)))},[t=ae(t)]}class T3 extends ct{constructor(t){super(),lt(this,t,S3,k3,it,{})}}function Al(s,t,n){const e=s.slice();return e[17]=t[n],e}function E3(s){let t,n;return t=new T3({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function I3(s){let t,n;return t=new se({props:{size:1,variant:"ghost-block",color:"neutral",$$slots:{default:[E3]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1048576&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function L3(s){let t,n;return t=new di({props:{$$slots:{default:[I3]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1048576&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function R3(s){let t,n,e,o=s[17].label+"";return{c(){t=V("/"),n=V(o),e=z()},m(r,i){_(r,t,i),_(r,n,i),_(r,e,i)},p(r,i){4&i&&o!==(o=r[17].label+"")&&ht(n,o)},d(r){r&&(y(t),y(n),y(e))}}}function Ml(s){let t,n;function e(){return s[10](s[17])}return t=new yt.Item({props:{onSelect:e,$$slots:{default:[R3]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,r){s=o;const i={};4&r&&(i.onSelect=e),1048580&r&&(i.$$scope={dirty:r,ctx:s}),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){v(t,o)}}}function D3(s){let t,n,e,o,r,i,c,a=ee(s[2]),l=[];for(let f=0;f<a.length;f+=1)l[f]=Ml(Al(s,a,f));const u=f=>$(l[f],1,1,()=>{l[f]=null});function m(f){s[11](f)}e=new yt.Separator({});let p={placeholder:"Run an action"};return s[0]!==void 0&&(p.value=s[0]),r=new yt.TextFieldItem({props:p}),Gt.push(()=>ke(r,"value",m)),{c(){t=D("div");for(let f=0;f<l.length;f+=1)l[f].c();n=z(),g(e.$$.fragment),o=z(),g(r.$$.fragment),k(t,"class","c-actions-menu__items svelte-1n1budr")},m(f,x){_(f,t,x);for(let A=0;A<l.length;A+=1)l[A]&&l[A].m(t,null);_(f,n,x),h(e,f,x),_(f,o,x),h(r,f,x),c=!0},p(f,x){if(132&x){let C;for(a=ee(f[2]),C=0;C<a.length;C+=1){const M=Al(f,a,C);l[C]?(l[C].p(M,x),d(l[C],1)):(l[C]=Ml(M),l[C].c(),d(l[C],1),l[C].m(t,null))}for(Y(),C=a.length;C<l.length;C+=1)u(C);K()}const A={};!i&&1&x&&(i=!0,A.value=f[0],De(()=>i=!1)),r.$set(A)},i(f){if(!c){for(let x=0;x<a.length;x+=1)d(l[x]);d(e.$$.fragment,f),d(r.$$.fragment,f),c=!0}},o(f){l=l.filter(Boolean);for(let x=0;x<l.length;x+=1)$(l[x]);$(e.$$.fragment,f),$(r.$$.fragment,f),c=!1},d(f){f&&(y(t),y(n),y(o)),rn(l,f),v(e,f),v(r,f)}}}function P3(s){let t,n,e,o;return t=new yt.Trigger({props:{$$slots:{default:[L3]},$$scope:{ctx:s}}}),e=new yt.Content({props:{size:1,side:"top",align:"start",$$slots:{default:[D3]},$$scope:{ctx:s}}}),e.$on("keydown",s[6]),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};1048576&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};1048581&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function N3(s){let t,n,e={onOpenChange:s[5],nested:!1,$$slots:{default:[P3]},$$scope:{ctx:s}};return t=new yt.Root({props:e}),s[12](t),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,[r]){const i={};1048581&r&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){s[12](null),v(t,o)}}}function F3(s,t,n){let e,o,r,i,{onCloseDropdown:c=()=>{}}=t;const a=Mt("chatModel");if(kt(s,a,x=>n(13,r=x)),!a)throw new Error("ChatModel not found in context");const l=Mt("slashCommandModel"),u=r.flags;kt(s,u,x=>n(9,o=x));function m(){i==null||i.focusIdx(-1)}let p="";function f(x){l.setActiveCommand(x.id),i==null||i.requestClose()}return s.$$set=x=>{"onCloseDropdown"in x&&n(8,c=x.onCloseDropdown)},s.$$.update=()=>{513&s.$$.dirty&&n(2,e=function(x,A){let C=g1();return A||(C=C.filter(M=>M.id!=="generate-commit-message")),x===void 0?C:C.filter(M=>M.label.toLowerCase().includes(x.toLowerCase()))}(p,o.enableGenerateCommitMessage))},[p,i,e,a,u,async function(x){x?(await ho(),m()):(c(),n(0,p=""))},async x=>{switch(x.key){case"ArrowLeft":case"ArrowRight":case"ArrowDown":case"ArrowUp":case"Enter":break;default:x.defaultPrevented||m()}},f,c,o,x=>f(x),function(x){p=x,n(0,p)},function(x){Gt[x?"unshift":"push"](()=>{i=x,n(1,i)})}]}function z3(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return{c(){t=ne("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=dn(t);n=$n(i,!0),i.forEach(y),this.h()},h(){n.a=null,ue(t,o)},m(r,i){mn(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M375 73c-26-26-68.1-26-94.1 0L89 265c-43.7 43.6-43.7 114.4 0 158s114.4 43.6 158.1 0L399 271c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L281 457c-62.4 62.4-163.5 62.4-225.9 0S-7.4 293.4 55 231L247 39c44.7-44.7 117.3-44.7 162 0s44.7 117.2 0 161.9L225.2 384.7c-31.6 31.6-83.6 28.7-111.5-6.2-23.8-29.8-21.5-72.8 5.5-99.8L271 127c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L153.2 312.7c-9.7 9.7-10.6 25.1-2 35.8 10 12.5 28.7 13.6 40 2.2L375 167c26-26 26-68.1 0-94.1z"/>',t)},p(r,[i]){ue(t,o=Ue(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},1&i&&r[0]]))},i:N,o:N,d(r){r&&y(t)}}}function O3(s,t,n){return s.$$set=e=>{n(0,t=It(It({},t),ae(e)))},[t=ae(t)]}class B3 extends ct{constructor(t){super(),lt(this,t,O3,z3,it,{})}}function H3(s){let t,n,e,o,r,i,c;return n=new B3({}),{c(){t=D("label"),g(n.$$.fragment),e=z(),o=D("input"),k(t,"for",s[3]),k(t,"class","c-input-action-bar__label svelte-6rrv9"),k(o,"type","file"),o.hidden=!0,k(o,"id",s[3]),k(o,"accept",s[0])},m(a,l){_(a,t,l),h(n,t,null),_(a,e,l),_(a,o,l),r=!0,i||(c=[Et(o,"click",V3),Et(o,"input",s[4])],i=!0)},p(a,l){(!r||1&l)&&k(o,"accept",a[0])},i(a){r||(d(n.$$.fragment,a),r=!0)},o(a){$(n.$$.fragment,a),r=!1},d(a){a&&(y(t),y(e),y(o)),v(n),i=!1,Ye(c)}}}function U3(s){let t,n;return t=new se({props:{size:1,variant:"ghost-block",color:"neutral",disabled:s[1],class:"c-input-action-bar__add-file-btn",$$slots:{default:[H3]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.disabled=e[1]),133&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function q3(s){let t,n,e,o,r;return e=new Qr({props:{icons:["shift"]}}),{c(){t=D("div"),n=V("Hold "),g(e.$$.fragment),o=V(" while dragging to attach"),k(t,"slot","content"),k(t,"class","c-add-file-button-tooltip svelte-6rrv9")},m(i,c){_(i,t,c),P(t,n),h(e,t,null),P(t,o),r=!0},p:N,i(i){r||(d(e.$$.fragment,i),r=!0)},o(i){$(e.$$.fragment,i),r=!1},d(i){i&&y(t),v(e)}}}function j3(s){let t,n;return t=new Nt({props:{triggerOn:[te.Hover],delayDurationMs:300,$$slots:{content:[q3],default:[U3]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};135&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function W3(s){let t,n;return t=new di({props:{$$slots:{default:[j3]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,[o]){const r={};135&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}const V3=function(){this.value=null};function G3(s,t,n){let{accept:e="*"}=t,{disabled:o=!1}=t,{onAddFiles:r=a}=t;const i=`file-${Date.now()}-${Math.floor(1e4*Math.random())}`,c=Wg();function a(l){var u,m,p;(p=(m=(u=c.commandManager)==null?void 0:u.chain())==null?void 0:m.insertFilesIntoEditor)==null||p.call(m,l)}return s.$$set=l=>{"accept"in l&&n(0,e=l.accept),"disabled"in l&&n(1,o=l.disabled),"onAddFiles"in l&&n(2,r=l.onAddFiles)},[e,o,r,i,function(l){var u;r([...((u=l.currentTarget)==null?void 0:u.files)??[]])}]}function Y3(s){let t,n;return{c(){t=ne("svg"),n=ne("path"),k(n,"d","M2 3C2 2.44772 2.44772 2 3 2H12C12.5523 2 13 2.44772 13 3V12C13 12.5523 12.5523 13 12 13H3C2.44772 13 2 12.5523 2 12V3Z"),k(n,"fill","currentColor"),k(n,"fill-rule","evenodd"),k(n,"clip-rule","evenodd"),k(t,"width","15"),k(t,"height","15"),k(t,"viewBox","0 0 15 15"),k(t,"fill","none"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){_(e,t,o),P(t,n)},p:N,i:N,o:N,d(e){e&&y(t)}}}class M1 extends ct{constructor(t){super(),lt(this,t,null,Y3,it,{})}}function K3(s){let t,n;return t=new M1({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function X3(s){let t,n,e;return n=new he({props:{size:1,variant:"soft",color:"neutral",$$slots:{default:[K3]},$$scope:{ctx:s}}}),n.$on("click",s[0]),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-cancel-button svelte-1b7ib22")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,[r]){const i={};4&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function J3(s,t,n){let{cancelAction:e}=t;return s.$$set=o=>{"cancelAction"in o&&n(1,e=o.cancelAction)},[function(o){o.stopPropagation(),e()},e]}function Z3(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return{c(){t=ne("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=dn(t);n=$n(i,!0),i.forEach(y),this.h()},h(){n.a=null,ue(t,o)},m(r,i){mn(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M371.2 122.9C340.3 96.2 300 80 256 80c-97.2 0-176 78.8-176 176s78.8 176 176 176c39.7 0 76.2-13.1 105.6-35.2 10.6-8 25.6-5.8 33.6 4.8s5.8 25.6-4.8 33.6C353 463.3 306.4 480 256 480 132.3 480 32 379.7 32 256S132.3 32 256 32c57.3 0 109.6 21.5 149.2 56.9l30.5-30.5c6.6-6.6 15.6-10.3 25-10.3C480.2 48 496 63.8 496 83.3V200c0 13.3-10.7 24-24 24H355.3c-19.5 0-35.3-15.8-35.3-35.3 0-9.4 3.7-18.3 10.3-25l40.8-40.8zm76.8-9L385.9 176H448z"/>',t)},p(r,[i]){ue(t,o=Ue(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&r[0]]))},i:N,o:N,d(r){r&&y(t)}}}function Q3(s,t,n){return s.$$set=e=>{n(0,t=It(It({},t),ae(e)))},[t=ae(t)]}class ty extends ct{constructor(t){super(),lt(this,t,Q3,Z3,it,{})}}function ey(s){let t;return{c(){t=V("Resend")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function ny(s){let t,n;return t=new Ot({props:{size:1,$$slots:{default:[ey]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function oy(s){let t,n;return t=new ty({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function ry(s){let t,n,e;return n=new he({props:{size:1,variant:"soft",color:"neutral",$$slots:{iconLeft:[oy],default:[ny]},$$scope:{ctx:s}}}),n.$on("click",function(){xe(s[0])&&s[0].apply(this,arguments)}),n.$on("keyup",function(){xe(s[0])&&s[0].apply(this,arguments)}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-resend-button svelte-1a3z7my")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,[r]){s=o;const i={};2&r&&(i.$$scope={dirty:r,ctx:s}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function sy(s,t,n){let{resendAction:e}=t;return s.$$set=o=>{"resendAction"in o&&n(0,e=o.resendAction)},[e]}function iy(s){let t,n,e=[{width:"15"},{height:"15"},{viewBox:"0 0 512 512"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return{c(){t=ne("svg"),n=ne("path"),k(n,"d","M327.5 85.2c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L384 128l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L448 128l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L448 64 426.8 7.5C425.1 3 420.8 0 416 0s-9.1 3-10.8 7.5L384 64 327.5 85.2zM9.3 240C3.6 242.6 0 248.3 0 254.6s3.6 11.9 9.3 14.5L26.3 277l8.1 3.7 .6 .3 88.3 40.8L164.1 410l.3 .6 3.7 8.1 7.9 17.1c2.6 5.7 8.3 9.3 14.5 9.3s11.9-3.6 14.5-9.3l7.9-17.1 3.7-8.1 .3-.6 40.8-88.3L346 281l.6-.3 8.1-3.7 17.1-7.9c5.7-2.6 9.3-8.3 9.3-14.5s-3.6-11.9-9.3-14.5l-17.1-7.9-8.1-3.7-.6-.3-88.3-40.8L217 99.1l-.3-.6L213 90.3l-7.9-17.1c-2.6-5.7-8.3-9.3-14.5-9.3s-11.9 3.6-14.5 9.3l-7.9 17.1-3.7 8.1-.3 .6-40.8 88.3L35.1 228.1l-.6 .3-8.1 3.7L9.3 240zm83 14.5l51.2-23.6c10.4-4.8 18.7-13.1 23.5-23.5l23.6-51.2 23.6 51.2c4.8 10.4 13.1 18.7 23.5 23.5l51.2 23.6-51.2 23.6c-10.4 4.8-18.7 13.1-23.5 23.5l-23.6 51.2-23.6-51.2c-4.8-10.4-13.1-18.7-23.5-23.5L92.3 254.6zM384 384l-56.5 21.2c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L384 448l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L448 448l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L448 384l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L384 384z"),k(n,"fill","currentColor"),ue(t,o)},m(r,i){_(r,t,i),P(t,n)},p(r,[i]){ue(t,o=Ue(e,[{width:"15"},{height:"15"},{viewBox:"0 0 512 512"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},1&i&&r[0]]))},i:N,o:N,d(r){r&&y(t)}}}function ay(s,t,n){return s.$$set=e=>{n(0,t=It(It({},t),ae(e)))},[t=ae(t)]}class cy extends ct{constructor(t){super(),lt(this,t,ay,iy,it,{})}}function kl(s){let t,n,e;return n=new Nt({props:{content:s[0]&&s[1]?s[1]:"Rewrite prompt",$$slots:{default:[$y]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-rewrite-prompt-button svelte-1k3jvo8")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};3&r&&(i.content=o[0]&&o[1]?o[1]:"Rewrite prompt"),2053&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function ly(s){let t,n;return t=new cy({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function uy(s){let t,n;return t=new Tn({props:{size:1,useCurrentColor:!0}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function dy(s){let t,n,e,o;const r=[uy,ly],i=[];function c(a,l){return a[2]?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n||(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function $y(s){let t,n;return t=new se({props:{disabled:s[0],size:1,variant:"ghost-block",color:"neutral",$$slots:{default:[dy]},$$scope:{ctx:s}}}),t.$on("click",s[7]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.disabled=e[0]),2052&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function my(s){let t,n,e=s[3].flags.enablePromptEnhancer&&kl(s);return{c(){e&&e.c(),t=gt()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,[r]){o[3].flags.enablePromptEnhancer?e?(e.p(o,r),8&r&&d(e,1)):(e=kl(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function py(s,t,n){let e,o,r,i,{onRewrite:c}=t,{isDisabled:a=!1}=t,{disabledReason:l}=t;const u=Mt("chatModel");if(kt(s,u,f=>n(3,i=f)),!u)throw new Error("ChatModel not found in context");const m=Mt(on.key);kt(s,m,f=>n(9,r=f));const p=Fe(!1);return kt(s,p,f=>n(2,o=f)),s.$$set=f=>{"onRewrite"in f&&n(8,c=f.onRewrite),"isDisabled"in f&&n(0,a=f.isDisabled),"disabledReason"in f&&n(1,l=f.disabledReason)},s.$$.update=()=>{512&s.$$.dirty&&(e=(r==null?void 0:r.isActive)&&!(r!=null&&r.currentAgentId))},[a,l,o,i,u,m,p,async function(){if(Ur(p,o=!0,o),e&&m)try{await m.reportRemoteAgentSetupWindowEvent(jr.clickRewritePrompt)}catch(f){console.error("Failed to report rewrite prompt button click event:",f)}try{Promise.resolve(c()).finally(()=>{Ur(p,o=!1,o)})}catch{Ur(p,o=!1,o)}},c,r]}function fy(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return{c(){t=ne("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=dn(t);n=$n(i,!0),i.forEach(y),this.h()},h(){n.a=null,ue(t,o)},m(r,i){mn(r,t,i),n.m('<!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M224 0c-17.7 0-32 14.3-32 32v19.2C119 66 64 130.6 64 208v18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416h384c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3c-31.2-35.2-48.5-80.5-48.5-127.6V208c0-77.4-55-142-128-156.8V32c0-17.7-14.3-32-32-32m45.3 493.3c12-12 18.7-28.3 18.7-45.3H160c0 17 6.7 33.3 18.7 45.3S207 512 224 512s33.3-6.7 45.3-18.7"/>',t)},p(r,[i]){ue(t,o=Ue(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},1&i&&r[0]]))},i:N,o:N,d(r){r&&y(t)}}}function gy(s,t,n){return s.$$set=e=>{n(0,t=It(It({},t),ae(e)))},[t=ae(t)]}class hy extends ct{constructor(t){super(),lt(this,t,gy,fy,it,{})}}function vy(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 640 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return{c(){t=ne("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=dn(t);n=$n(i,!0),i.forEach(y),this.h()},h(){n.a=null,ue(t,o)},m(r,i){mn(r,t,i),n.m('<!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2s-6.3 25.5 4.1 33.7l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7l-90.2-70.7c.2-.4.4-.9.6-1.3 5.2-11.5 3.1-25-5.3-34.4l-7.4-8.3c-31.2-35.2-48.5-80.5-48.5-127.6V208c0-77.4-55-142-128-156.8V32c0-17.7-14.3-32-32-32s-32 14.3-32 32v19.2c-42.6 8.6-79 34.2-102 69.3zM406.2 416 160 222.1v4.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S115.4 416 128 416zm-40.9 77.3c12-12 18.7-28.3 18.7-45.3H256c0 17 6.7 33.3 18.7 45.3S303 512 320 512s33.3-6.7 45.3-18.7"/>',t)},p(r,[i]){ue(t,o=Ue(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 640 512"},1&i&&r[0]]))},i:N,o:N,d(r){r&&y(t)}}}function wy(s,t,n){return s.$$set=e=>{n(0,t=It(It({},t),ae(e)))},[t=ae(t)]}class yy extends ct{constructor(t){super(),lt(this,t,wy,vy,it,{})}}function xy(s){let t,n;return t=new yy({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function by(s){let t,n;return t=new hy({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Sl(s){let t;return{c(){t=V(s[2])},m(n,e){_(n,t,e)},p(n,e){4&e&&ht(t,n[2])},d(n){n&&y(t)}}}function _y(s){let t,n,e,o,r;const i=[by,xy],c=[];function a(u,m){return u[0]?0:1}t=a(s),n=c[t]=i[t](s);let l=s[1]&&s[2]&&Sl(s);return{c(){n.c(),e=z(),l&&l.c(),o=gt()},m(u,m){c[t].m(u,m),_(u,e,m),l&&l.m(u,m),_(u,o,m),r=!0},p(u,m){let p=t;t=a(u),t!==p&&(Y(),$(c[p],1,1,()=>{c[p]=null}),K(),n=c[t],n||(n=c[t]=i[t](u),n.c()),d(n,1),n.m(e.parentNode,e)),u[1]&&u[2]?l?l.p(u,m):(l=Sl(u),l.c(),l.m(o.parentNode,o)):l&&(l.d(1),l=null)},i(u){r||(d(n),r=!0)},o(u){$(n),r=!1},d(u){u&&(y(e),y(o)),c[t].d(u),l&&l.d(u)}}}function Cy(s){let t,n;return t=new se({props:{color:s[1]?s[3]:"neutral",size:1,variant:s[1]?"soft":"ghost-block",radius:"full",$$slots:{default:[_y]},$$scope:{ctx:s}}}),t.$on("click",s[5]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};10&o&&(r.color=e[1]?e[3]:"neutral"),2&o&&(r.variant=e[1]?"soft":"ghost-block"),135&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Ay(s){let t,n,e,o;return n=new Nt({props:{content:s[4],hasPointerEvents:!1,triggerOn:[te.Hover],$$slots:{default:[Cy]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class",e="c-notify-button "+(s[0]?"c-notify-button--enabled":"")+" svelte-1yqfwnl")},m(r,i){_(r,t,i),h(n,t,null),o=!0},p(r,[i]){const c={};16&i&&(c.content=r[4]),143&i&&(c.$$scope={dirty:i,ctx:r}),n.$set(c),(!o||1&i&&e!==(e="c-notify-button "+(r[0]?"c-notify-button--enabled":"")+" svelte-1yqfwnl"))&&k(t,"class",e)},i(r){o||(d(n.$$.fragment,r),o=!0)},o(r){$(n.$$.fragment,r),o=!1},d(r){r&&y(t),v(n)}}}function My(s,t,n){let{enabled:e=!1}=t,{isUnread:o=!1}=t,{unreadCount:r=1}=t,{statusColor:i="neutral"}=t,{tooltipText:c=""}=t;const a=dp();return s.$$set=l=>{"enabled"in l&&n(0,e=l.enabled),"isUnread"in l&&n(1,o=l.isUnread),"unreadCount"in l&&n(2,r=l.unreadCount),"statusColor"in l&&n(3,i=l.statusColor),"tooltipText"in l&&n(4,c=l.tooltipText)},[e,o,r,i,c,function(){a("toggle")}]}class ky extends ct{constructor(t){super(),lt(this,t,My,Ay,it,{enabled:0,isUnread:1,unreadCount:2,statusColor:3,tooltipText:4})}}function Sy(s){let t,n;return t=new ky({props:{enabled:s[0],isUnread:s[3],statusColor:s[1],tooltipText:s[2]}}),t.$on("toggle",s[5]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,[o]){const r={};1&o&&(r.enabled=e[0]),8&o&&(r.isUnread=e[3]),2&o&&(r.statusColor=e[1]),4&o&&(r.tooltipText=e[2]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Ty(s,t,n){let e,o,r,i,c,{agentId:a}=t,{status:l}=t,{workspaceStatus:u}=t,{hasUpdates:m=!1}=t;const p=Mt("remoteAgentsModel");let f;kt(s,p,A=>n(12,c=A));let x=!1;return s.$$set=A=>{"agentId"in A&&n(6,a=A.agentId),"status"in A&&n(7,l=A.status),"workspaceStatus"in A&&n(8,u=A.workspaceStatus),"hasUpdates"in A&&n(9,m=A.hasUpdates)},s.$$.update=()=>{384&s.$$.dirty&&(u===Jr.workspaceRunning?n(1,f=Qg(l)):n(1,f=t0(u))),640&s.$$.dirty&&n(3,e=(l===Ge.agentIdle||l===Ge.agentFailed)&&m),4160&s.$$.dirty&&n(10,o=a??c.currentAgentId),4096&s.$$.dirty&&n(11,r=c.newAgentDraft),7168&s.$$.dirty&&(o?n(0,x=c.notificationSettings[o]??!0):r&&n(0,x=r.enableNotification)),4161&s.$$.dirty&&n(2,i=x?"You'll be notified when the agent is ready for review. Click to turn off.":"Click to turn on notifications when the agent is ready for review. "+(a===c.currentAgentId?"You will not be notified while you're actively viewing this agent.":""))},[x,f,i,e,p,async function(){if(o)p.setNotificationEnabled(o,!x);else{const A=p.newAgentDraft;if(A){p.setNewAgentDraft({...A,enableNotification:!x});try{const C=x?jr.disableNotifications:jr.enableNotifications;await p.reportRemoteAgentSetupWindowEvent(C)}catch(C){console.error("Failed to report notification toggle event:",C)}}}},a,l,u,m,o,r,c]}class k1 extends ct{constructor(t){super(),lt(this,t,Ty,Sy,it,{agentId:6,status:7,workspaceStatus:8,hasUpdates:9})}}const oo={Root:class extends ct{constructor(s){super(),lt(this,s,mw,$w,it,{})}},SendButton:class extends ct{constructor(s){super(),lt(this,s,jw,Uw,it,{primaryAction:0,isDisabled:1,disabledReason:13})}},ContextMenu:class extends ct{constructor(s){super(),lt(this,s,M3,A3,it,{onCloseDropdown:0,onInsertMentionable:13,closeDropdown:1,openDropdown:14,toggleDropdown:2})}get closeDropdown(){return this.$$.ctx[1]}get openDropdown(){return this.$$.ctx[14]}get toggleDropdown(){return this.$$.ctx[2]}},ActionsMenu:class extends ct{constructor(s){super(),lt(this,s,F3,N3,it,{onCloseDropdown:8})}},AddFileButton:class extends ct{constructor(s){super(),lt(this,s,G3,W3,it,{accept:0,disabled:1,onAddFiles:2})}},ResendButton:class extends ct{constructor(s){super(),lt(this,s,sy,ry,it,{resendAction:0})}},CancelButton:class extends ct{constructor(s){super(),lt(this,s,J3,X3,it,{cancelAction:1})}},RewritePromptButton:class extends ct{constructor(s){super(),lt(this,s,py,my,it,{onRewrite:8,isDisabled:0,disabledReason:1})}},NotifyButton:k1};function Ey(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return{c(){t=ne("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=dn(t);n=$n(i,!0),i.forEach(y),this.h()},h(){n.a=null,ue(t,o)},m(r,i){mn(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M192 48c22.1 0 40 17.9 40 40v40h-19.3c-6.2-14.1-20.3-24-36.7-24-22.1 0-40 17.9-40 40s17.9 40 40 40c16.4 0 30.5-9.9 36.7-24H232v96h-40c-26.5 0-48 21.5-48 48v11.3c-14.1 6.2-24 20.3-24 36.7 0 22.1 17.9 40 40 40s40-17.9 40-40c0-16.4-9.9-30.5-24-36.7V304c0-8.8 7.2-16 16-16h40v132c0 24.3-19.7 44-44 44-17.8 0-33.2-10.6-40.1-25.9-3.8-8.4-12-13.9-21.2-14.1-25.9-.7-46.7-21.9-46.7-48 0-2.6.2-5.2.6-7.6 1.4-8.5-2-17.1-8.7-22.5C57.3 334.1 48 316.2 48 296c0-19.3 8.5-36.6 22.1-48.3 8-6.9 10.5-18.3 6.1-28-2.7-6-4.2-12.6-4.2-19.7 0-18.8 10.8-35.1 26.7-43 8.1-4 13.3-12.3 13.3-21.3.1-19.3 11.7-36 28.3-43.5 6.4-2.9 11.3-8.5 13.2-15.3C158.3 60.2 173.8 48 192 48m-4 464c26.9 0 51.2-11.6 68-30 16.8 18.5 41.1 30 68 30 32.2 0 60.5-16.5 76.9-41.5 45-8 79.1-47.3 79.1-94.5v-1.6c19.8-20.2 32-47.9 32-78.4 0-27.8-10.1-53.2-26.8-72.7 1.8-7.5 2.8-15.3 2.8-23.3 0-32.6-16.3-61.5-41.1-78.8-4.5-28.9-21.8-53.5-45.9-67.8C387.5 22 356.3 0 320 0c-25.2 0-48 10.6-64 27.6C240 10.6 217.2 0 192 0c-36.3 0-67.5 22-80.9 53.4-24.2 14.3-41.5 38.9-46 67.8C40.3 138.5 24 167.4 24 200c0 8 1 15.8 2.8 23.3C10.1 242.8 0 268.2 0 296c0 30.5 12.2 58.2 32 78.4v1.6c0 47.3 34.1 86.5 79.1 94.5 16.4 25 44.7 41.5 76.9 41.5m136-48c-24.3 0-44-19.7-44-44v-68h51.3c6.2 14.1 20.3 24 36.7 24 22.1 0 40-17.9 40-40s-17.9-40-40-40c-16.4 0-30.5 9.9-36.7 24H280V160h40c8.8 0 16 7.2 16 16v11.3c-14.1 6.2-24 20.3-24 36.7 0 22.1 17.9 40 40 40s40-17.9 40-40c0-16.4-9.9-30.5-24-36.7V176c0-26.5-21.5-48-48-48h-40V88c0-22.1 17.9-40 40-40 18.2 0 33.7 12.2 38.5 28.9 1.9 6.8 6.8 12.4 13.2 15.3 16.6 7.5 28.2 24.1 28.3 43.5.1 9.1 5.2 17.3 13.3 21.3 15.9 7.9 26.7 24.2 26.7 43 0 7.1-1.5 13.7-4.2 19.7-4.4 9.7-1.9 21 6.1 28 13.5 11.8 22.1 29 22.1 48.3 0 20.2-9.3 38.1-23.9 49.9-6.7 5.4-10 14-8.7 22.5.4 2.5.6 5 .6 7.6 0 26.1-20.8 47.3-46.7 48-9.2.3-17.4 5.7-21.2 14.1-6.9 15.3-22.3 25.9-40.1 25.9M176 128a16 16 0 1 1 0 32 16 16 0 1 1 0-32m-16 208a16 16 0 1 1 0 32 16 16 0 1 1 0-32m176-112a16 16 0 1 1 32 0 16 16 0 1 1-32 0m32 96a16 16 0 1 1 0 32 16 16 0 1 1 0-32"/>',t)},p(r,[i]){ue(t,o=Ue(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&r[0]]))},i:N,o:N,d(r){r&&y(t)}}}function Iy(s,t,n){return s.$$set=e=>{n(0,t=It(It({},t),ae(e)))},[t=ae(t)]}class Ly extends ct{constructor(t){super(),lt(this,t,Iy,Ey,it,{})}}function Tl(s,t,n){const e=s.slice();return e[10]=t[n],e}function Ry(s){let t,n=s[1].name+"";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){2&o&&n!==(n=e[1].name+"")&&ht(t,n)},d(e){e&&y(t)}}}function Dy(s){let t,n,e;return n=new Ot({props:{size:1,$$slots:{default:[Ry]},$$scope:{ctx:s}}}),{c(){t=D("span"),g(n.$$.fragment),k(t,"class","c-model-picker__text-wrapper")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};8194&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function Py(s){let t,n;return t=new Ly({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Ny(s){let t,n;return t=new he({props:{size:1,variant:"ghost-block",color:"neutral",$$slots:{iconLeft:[Py],default:[Dy]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};8194&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Fy(s){let t,n;return t=new di({props:{$$slots:{default:[Ny]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};8194&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function zy(s){let t,n;return t=new Nt({props:{content:`Model: ${s[1].name}`,triggerOn:[te.Hover],offset:[0,Wy],$$slots:{default:[Fy]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.content=`Model: ${e[1].name}`),8194&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Oy(s){let t;return{c(){t=V("Internal Testing Only")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function By(s){let t,n=Ps.name+"";return{c(){t=V(n)},m(e,o){_(e,t,o)},p:N,d(e){e&&y(t)}}}function El(s){let t,n,e;return n=new co({}),{c(){t=D("span"),g(n.$$.fragment),k(t,"class","c-model-picker__check-icon svelte-hq3rg5")},m(o,r){_(o,t,r),h(n,t,null),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function Hy(s){let t,n,e,o,r=s[10].id===s[1].id&&El();return{c(){t=D("span"),t.textContent=`${s[10].name}`,n=z(),r&&r.c(),e=z(),k(t,"class","c-model-picker__item-text svelte-hq3rg5")},m(i,c){_(i,t,c),_(i,n,c),r&&r.m(i,c),_(i,e,c),o=!0},p(i,c){i[10].id===i[1].id?r?2&c&&d(r,1):(r=El(),r.c(),d(r,1),r.m(e.parentNode,e)):r&&(Y(),$(r,1,1,()=>{r=null}),K())},i(i){o||(d(r),o=!0)},o(i){$(r),o=!1},d(i){i&&(y(t),y(n),y(e)),r&&r.d(i)}}}function Il(s){let t,n;return t=new yt.Item({props:{highlight:s[10].id===s[1].id,onSelect:function(){return s[8](s[10])},$$slots:{default:[Hy]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){s=e;const r={};2&o&&(r.highlight=s[10].id===s[1].id),8194&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Uy(s){let t,n,e,o,r,i,c,a;t=new yt.Label({props:{$$slots:{default:[Oy]},$$scope:{ctx:s}}}),e=new yt.Item({props:{onSelect:s[7],$$slots:{default:[By]},$$scope:{ctx:s}}}),r=new yt.Separator({});let l=ee(s[2].getModels().filter(Ll)),u=[];for(let p=0;p<l.length;p+=1)u[p]=Il(Tl(s,l,p));const m=p=>$(u[p],1,1,()=>{u[p]=null});return{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment),o=z(),g(r.$$.fragment),i=z();for(let p=0;p<u.length;p+=1)u[p].c();c=gt()},m(p,f){h(t,p,f),_(p,n,f),h(e,p,f),_(p,o,f),h(r,p,f),_(p,i,f);for(let x=0;x<u.length;x+=1)u[x]&&u[x].m(p,f);_(p,c,f),a=!0},p(p,f){const x={};8192&f&&(x.$$scope={dirty:f,ctx:p}),t.$set(x);const A={};if(8192&f&&(A.$$scope={dirty:f,ctx:p}),e.$set(A),22&f){let C;for(l=ee(p[2].getModels().filter(Ll)),C=0;C<l.length;C+=1){const M=Tl(p,l,C);u[C]?(u[C].p(M,f),d(u[C],1)):(u[C]=Il(M),u[C].c(),d(u[C],1),u[C].m(c.parentNode,c))}for(Y(),C=l.length;C<u.length;C+=1)m(C);K()}},i(p){if(!a){d(t.$$.fragment,p),d(e.$$.fragment,p),d(r.$$.fragment,p);for(let f=0;f<l.length;f+=1)d(u[f]);a=!0}},o(p){$(t.$$.fragment,p),$(e.$$.fragment,p),$(r.$$.fragment,p),u=u.filter(Boolean);for(let f=0;f<u.length;f+=1)$(u[f]);a=!1},d(p){p&&(y(n),y(o),y(i),y(c)),v(t,p),v(e,p),v(r,p),rn(u,p)}}}function qy(s){let t,n,e,o;return t=new yt.Trigger({props:{$$slots:{default:[zy]},$$scope:{ctx:s}}}),e=new yt.Content({props:{side:"top",align:"start",$$slots:{default:[Uy]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};8194&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};8194&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function jy(s){let t,n,e,o={nested:!1,$$slots:{default:[qy]},$$scope:{ctx:s}};return n=new yt.Root({props:o}),s[9](n),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-model-picker svelte-hq3rg5")},m(r,i){_(r,t,i),h(n,t,null),e=!0},p(r,[i]){const c={};8194&i&&(c.$$scope={dirty:i,ctx:r}),n.$set(c)},i(r){e||(d(n.$$.fragment,r),e=!0)},o(r){$(n.$$.fragment,r),e=!1},d(r){r&&y(t),s[9](null),v(n)}}}const Wy=5,Ll=s=>s.id!==null;function Vy(s,t,n){let e,o,r;const i=Mt("modelRegistry"),c=Mt("chatModel");let a;function l(u){e&&e.setSelectedModelId(u),a==null||a.requestClose()}return kt(s,c,u=>n(6,r=u)),s.$$.update=()=>{64&s.$$.dirty&&n(5,e=r.currentConversationModel),32&s.$$.dirty&&n(1,o=i.getModel((e==null?void 0:e.selectedModelId)??null))},[a,o,i,c,l,e,r,()=>l(null),u=>{l(u.id)},function(u){Gt[u?"unshift":"push"](()=>{a=u,n(0,a)})}]}class Gy extends ct{constructor(t){super(),lt(this,t,Vy,jy,it,{})}}function Rl(s){let t;function n(r,i){return r[0]===r[1]?Ky:Yy}let e=n(s),o=e(s);return{c(){o.c(),t=gt()},m(r,i){o.m(r,i),_(r,t,i)},p(r,i){e===(e=n(r))&&o?o.p(r,i):(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&y(t),o.d(r)}}}function Yy(s){let t,n,e,o,r=s[0]+1+"",i=s[1]+1+"";return{c(){t=V("L"),n=V(r),e=V("-"),o=V(i)},m(c,a){_(c,t,a),_(c,n,a),_(c,e,a),_(c,o,a)},p(c,a){1&a&&r!==(r=c[0]+1+"")&&ht(n,r),2&a&&i!==(i=c[1]+1+"")&&ht(o,i)},d(c){c&&(y(t),y(n),y(e),y(o))}}}function Ky(s){let t,n,e=s[0]+1+"";return{c(){t=V("L"),n=V(e)},m(o,r){_(o,t,r),_(o,n,r)},p(o,r){1&r&&e!==(e=o[0]+1+"")&&ht(n,e)},d(o){o&&(y(t),y(n))}}}function Xy(s){let t,n,e,o=s[0]!==void 0&&s[1]!==void 0&&Rl(s);return{c(){t=D("span"),n=V(s[2]),e=z(),o&&o.c(),k(t,"class","c-selection-item svelte-xiswvu")},m(r,i){_(r,t,i),P(t,n),P(t,e),o&&o.m(t,null)},p(r,[i]){4&i&&ht(n,r[2]),r[0]!==void 0&&r[1]!==void 0?o?o.p(r,i):(o=Rl(r),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},i:N,o:N,d(r){r&&y(t),o&&o.d()}}}function Jy(s,t,n){let e,o,r,i,c,{fileSelection:a}=t;return s.$$set=l=>{"fileSelection"in l&&n(3,a=l.fileSelection)},s.$$.update=()=>{8&s.$$.dirty&&n(5,e=a.pathName||""),8&s.$$.dirty&&(a.fullRange?(n(0,i=a.fullRange.startLineNumber),n(1,c=a.fullRange.endLineNumber)):a.range&&(n(0,i=a.range.start),n(1,c=a.range.stop))),32&s.$$.dirty&&n(4,o=e.split("/").filter(l=>l.length>0)),16&s.$$.dirty&&n(2,r=o[o.length-1])},[i,c,r,a,o,e]}class Zy extends ct{constructor(t){super(),lt(this,t,Jy,Xy,it,{fileSelection:3})}}function Dl(s,t,n){const e=s.slice();return e[18]=t[n],e}function Qy(s){let t,n,e,o,r,i,c,a,l,u,m,p;const f=[n6,e6],x=[];function A(C,M){var S;return C[1]!==void 0&&((S=C[1])==null?void 0:S.length)>0?0:1}return i=A(s),c=x[i]=f[i](s),{c(){t=D("p"),n=V("/"),e=V(s[2]),o=z(),r=D("div"),c.c(),a=z(),l=D("input"),k(t,"class","c-action-label svelte-34wttr"),k(l,"type","text"),k(l,"class","c-tiny-input-inline svelte-34wttr"),k(r,"class","c-max-element-inline svelte-34wttr")},m(C,M){_(C,t,M),P(t,n),P(t,e),_(C,o,M),_(C,r,M),x[i].m(r,null),P(r,a),P(r,l),u=!0,m||(p=[Et(l,"keydown",s[9]),Et(l,"keyup",s[10])],m=!0)},p(C,M){(!u||4&M)&&ht(e,C[2]);let S=i;i=A(C),i===S?x[i].p(C,M):(Y(),$(x[S],1,1,()=>{x[S]=null}),K(),c=x[i],c?c.p(C,M):(c=x[i]=f[i](C),c.c()),d(c,1),c.m(r,a))},i(C){u||(d(c),u=!0)},o(C){$(c),u=!1},d(C){C&&(y(t),y(o),y(r)),x[i].d(),m=!1,Ye(p)}}}function t6(s){let t,n,e,o,r,i,c,a;return{c(){var l;t=D("p"),n=V("/"),e=V(s[2]),o=z(),r=D("input"),k(t,"class","c-action-label svelte-34wttr"),k(r,"type","text"),k(r,"class","c-max-element-inline svelte-34wttr"),k(r,"placeholder",i=(l=s[4])==null?void 0:l.placeholderText)},m(l,u){_(l,t,u),P(t,n),P(t,e),_(l,o,u),_(l,r,u),vr(r,s[0]),c||(a=[Et(r,"input",s[12]),Et(r,"keydown",s[8]),Et(r,"keyup",s[10])],c=!0)},p(l,u){var m;4&u&&ht(e,l[2]),16&u&&i!==(i=(m=l[4])==null?void 0:m.placeholderText)&&k(r,"placeholder",i),1&u&&r.value!==l[0]&&vr(r,l[0])},i:N,o:N,d(l){l&&(y(t),y(o),y(r)),c=!1,Ye(a)}}}function e6(s){var o;let t,n,e=((o=s[4])==null?void 0:o.selectionReminderMessage)+"";return{c(){t=D("span"),n=V(e),k(t,"class","c-select-code-msg")},m(r,i){_(r,t,i),P(t,n)},p(r,i){var c;16&i&&e!==(e=((c=r[4])==null?void 0:c.selectionReminderMessage)+"")&&ht(n,e)},i:N,o:N,d(r){r&&y(t)}}}function n6(s){let t,n,e=ee(s[1]),o=[];for(let i=0;i<e.length;i+=1)o[i]=Pl(Dl(s,e,i));const r=i=>$(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=gt()},m(i,c){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(i,c);_(i,t,c),n=!0},p(i,c){if(2&c){let a;for(e=ee(i[1]),a=0;a<e.length;a+=1){const l=Dl(i,e,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=Pl(l),o[a].c(),d(o[a],1),o[a].m(t.parentNode,t))}for(Y(),a=e.length;a<o.length;a+=1)r(a);K()}},i(i){if(!n){for(let c=0;c<e.length;c+=1)d(o[c]);n=!0}},o(i){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(i){i&&y(t),rn(o,i)}}}function Pl(s){let t,n;return t=new Zy({props:{fileSelection:s[18].selection}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.fileSelection=e[18].selection),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function o6(s){let t,n,e,o,r,i,c;const a=[t6,Qy],l=[];function u(m,p){return m[2]==="find"?0:1}return e=u(s),o=l[e]=a[e](s),{c(){t=D("div"),n=D("div"),o.c(),k(n,"class","c-action-row svelte-34wttr"),k(t,"class","c-action svelte-34wttr"),k(t,"role","button"),k(t,"tabindex","-1")},m(m,p){_(m,t,p),P(t,n),l[e].m(n,null),r=!0,i||(c=[Et(t,"click",s[7]),Et(t,"keydown",r6)],i=!0)},p(m,[p]){let f=e;e=u(m),e===f?l[e].p(m,p):(Y(),$(l[f],1,1,()=>{l[f]=null}),K(),o=l[e],o?o.p(m,p):(o=l[e]=a[e](m),o.c()),d(o,1),o.m(n,null))},i(m){r||(d(o),r=!0)},o(m){$(o),r=!1},d(m){m&&y(t),l[e].d(),i=!1,Ye(c)}}}const r6=s=>{};function s6(s,t,n){let e,o,r,i,c,a,l,u,m=N,p=N,f=N;s.$$.on_destroy.push(()=>m()),s.$$.on_destroy.push(()=>p()),s.$$.on_destroy.push(()=>f());let x=Mt("chatModel");if(!x)throw new Error("ChatModel not found in context");let A=Mt("slashCommandModel");const C=()=>{const I=document.querySelector("input");I&&(I.focus(),I.select())};let M="",S=!1;function L(){A.cancelActiveCommand()}return En(C),s.$$.update=()=>{2048&s.$$.dirty&&n(1,o=Object.values(u.selections).sort((I,X)=>I.selection.pathName.localeCompare(X.selection.pathName))),2&s.$$.dirty&&A.setSelections(o),4&s.$$.dirty&&n(4,i=Bs(l)),1&s.$$.dirty&&A.setInputText(M)},n(6,e=x.specialContextInputModel),f(),f=oe(e,I=>n(11,u=I)),n(5,r=A.activeCommand),p(),p=oe(r,I=>n(2,l=I)),n(3,c=A.isActiveCommandRunnable),m(),m=oe(c,I=>n(14,a=I)),[M,o,l,c,i,r,e,C,function(I){return!(I.shiftKey||I.ctrlKey||I.metaKey)&&(I.stopPropagation(),I.key==="Enter"?(S=!0,!0):I.key==="Escape"?(L(),!0):I.key==="Backspace"&&(M===""&&L(),!0))},function(I){if(I.ctrlKey||I.metaKey||I.key==="Tab")return!1;if(I.stopPropagation(),!I.shiftKey){if(I.key==="Escape"||I.key==="Backspace")return L(),!0;if(I.key==="Enter"&&a)return A.runActiveCommand(),!0}return I.preventDefault(),!0},function(I){return!I.shiftKey&&!(I.key!=="Enter"||!S||!a)&&(S=!1,A.runActiveCommand(),!0)},u,function(){M=this.value,n(0,M)}]}class i6 extends ct{constructor(t){super(),lt(this,t,s6,o6,it,{})}}function Nl(s,t,n){const e=s.slice();return e[15]=t[n],e}function Fl(s){let t,n;function e(){return s[8](s[15])}return t=new A1({props:{item:s[15],highlight:s[15]===s[14],onSelect:e}}),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,r){s=o;const i={};4&r&&(i.item=s[15]),16388&r&&(i.highlight=s[15]===s[14]),4&r&&(i.onSelect=e),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){v(t,o)}}}function a6(s){let t,n,e=ee(s[2]),o=[];for(let i=0;i<e.length;i+=1)o[i]=Fl(Nl(s,e,i));const r=i=>$(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=gt()},m(i,c){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(i,c);_(i,t,c),n=!0},p(i,c){if(16420&c){let a;for(e=ee(i[2]),a=0;a<e.length;a+=1){const l=Nl(i,e,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=Fl(l),o[a].c(),d(o[a],1),o[a].m(t.parentNode,t))}for(Y(),a=e.length;a<o.length;a+=1)r(a);K()}},i(i){if(!n){for(let c=0;c<e.length;c+=1)d(o[c]);n=!0}},o(i){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(i){i&&y(t),rn(o,i)}}}function c6(s){let t,n;return t=new cs({props:{slot:"mentionable",option:s[13]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};8192&o&&(r.option=e[13]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function l6(s){let t,n,e,o;return t=new rr.Menu.Root({props:{mentionables:s[2],onQueryUpdate:s[4],onSelectMentionable:s[5],$$slots:{default:[a6,({activeItem:r})=>({14:r}),({activeItem:r})=>r?16384:0]},$$scope:{ctx:s}}}),e=new rr.ChipTooltip({props:{$$slots:{mentionable:[c6,({mentionable:r})=>({13:r}),({mentionable:r})=>r?8192:0]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};4&i&&(c.mentionables=r[2]),278532&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};270336&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function u6(s){let t,n,e={triggerCharacter:"@",onMentionItemsUpdated:s[0],$$slots:{default:[l6]},$$scope:{ctx:s}};return t=new rr.Root({props:e}),s[9](t),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,[r]){const i={};1&r&&(i.onMentionItemsUpdated=o[0]),262148&r&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){s[9](null),v(t,o)}}}function d6(s,t,n){let e,{requestEditorFocus:o}=t,{onMentionItemsUpdated:r}=t;const i=Mt("chatModel");if(!i)throw new Error("ChatModel not found in context");const c=new Ks(i,u),a=c.displayItems;let l;function u(p){return!!l&&(l.insertMention(p),c.closeDropdown(),!0)}function m(p){const f=c.selectMentionable(p);return o(),f}return kt(s,a,p=>n(2,e=p)),sr(()=>{c.dispose()}),s.$$set=p=>{"requestEditorFocus"in p&&n(6,o=p.requestEditorFocus),"onMentionItemsUpdated"in p&&n(0,r=p.onMentionItemsUpdated)},[r,l,e,a,function(p){p===void 0?c.closeDropdown():(c.openDropdown(),c.userQuery.set(p))},m,o,p=>u(p),p=>m(p),function(p){Gt[p?"unshift":"push"](()=>{l=p,n(1,l)})}]}class va extends ct{constructor(t){super(),lt(this,t,d6,u6,it,{requestEditorFocus:6,onMentionItemsUpdated:0,insertMentionNode:7})}get insertMentionNode(){return this.$$.ctx[7]}}function zl(s,t,n){const e=s.slice();return e[14]=t[n],e}function $6(s){let t,n,e,o=s[14].label+"";return{c(){t=V("/"),n=V(o),e=z()},m(r,i){_(r,t,i),_(r,n,i),_(r,e,i)},p(r,i){1&i&&o!==(o=r[14].label+"")&&ht(n,o)},d(r){r&&(y(t),y(n),y(e))}}}function Ol(s){let t,n;return t=new rr.Menu.Item({props:{mentionable:s[14],$$slots:{default:[$6]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.mentionable=e[14]),131073&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function m6(s){let t,n,e=ee(s[0]),o=[];for(let i=0;i<e.length;i+=1)o[i]=Ol(zl(s,e,i));const r=i=>$(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=gt()},m(i,c){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(i,c);_(i,t,c),n=!0},p(i,c){if(1&c){let a;for(e=ee(i[0]),a=0;a<e.length;a+=1){const l=zl(i,e,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=Ol(l),o[a].c(),d(o[a],1),o[a].m(t.parentNode,t))}for(Y(),a=e.length;a<o.length;a+=1)r(a);K()}},i(i){if(!n){for(let c=0;c<e.length;c+=1)d(o[c]);n=!0}},o(i){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(i){i&&y(t),rn(o,i)}}}function p6(s){let t,n,e=s[13].label+"";return{c(){t=D("span"),n=V(e),k(t,"slot","mentionable")},m(o,r){_(o,t,r),P(t,n)},p(o,r){8192&r&&e!==(e=o[13].label+"")&&ht(n,e)},d(o){o&&y(t)}}}function f6(s){let t,n,e,o;return t=new rr.Menu.Root({props:{mentionables:s[0],onQueryUpdate:s[5],onSelectMentionable:s[9],$$slots:{default:[m6]},$$scope:{ctx:s}}}),e=new rr.ChipTooltip({props:{$$slots:{mentionable:[p6,({mentionable:r})=>({13:r}),({mentionable:r})=>r?8192:0]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};1&i&&(c.mentionables=r[0]),131073&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};139264&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function g6(s){let t,n;return t=new rr.Root({props:{pluginId:"augment-slash-actions",triggerCharacter:"/",allowedPrefixes:[],renderText:h6,$$slots:{default:[f6]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,[o]){const r={};131073&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}const h6=()=>"";function v6(s,t,n){let e,o,r,i;const c=Mt("chatModel");kt(s,c,f=>n(10,i=f));const a=Mt("slashCommandModel"),{activeCommand:l}=a;kt(s,l,f=>n(7,o=f));const u=Mt(li.CONTEXT_KEY),m=i.flags;let p;return kt(s,m,f=>n(8,r=f)),s.$$.update=()=>{320&s.$$.dirty&&n(0,e=function(f,x){let A=g1();return x||(A=A.filter(C=>C.id!=="generate-commit-message")),f===void 0?A:A.filter(C=>C.label.toLowerCase().includes(f.toLowerCase()))}(p,r.enableGenerateCommitMessage)),128&s.$$.dirty&&(o?(u.commandManager.hide(),u.commandManager.clearContent()):(u.commandManager.show(),u.commandManager.clearContent(),u.commandManager.requestFocus()))},[e,c,a,l,m,function(f){n(6,p=f)},p,o,r,f=>(a.setActiveCommand(f.id),!0)]}class w6 extends ct{constructor(t){super(),lt(this,t,v6,g6,it,{})}}const{window:Ei}=kf,y6=s=>({}),Bl=s=>({slot:"banner"});function Hl(s){let t,n,e={requestEditorFocus:s[40],onMentionItemsUpdated:s[39]};return t=new va({props:e}),s[58](t),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,r){t.$set({})},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){s[58](null),v(t,o)}}}function Ul(s){let t,n;return t=new w6({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function ql(s){let t,n,e,o;return t=new p1({props:{saveImage:s[9].saveImage,saveAttachment:s[9].saveAttachment,deleteImage:s[9].deleteImage,renderImage:s[9].renderImage,maxImages:Fs,supportedFileTypes:s[10].enableDebugFeatures?["image","text"]:["image"],onValidationError:s[35]}}),e=new d1({props:{flags:s[9].flags}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};512&i[0]&&(c.saveImage=r[9].saveImage),512&i[0]&&(c.saveAttachment=r[9].saveAttachment),512&i[0]&&(c.deleteImage=r[9].deleteImage),512&i[0]&&(c.renderImage=r[9].renderImage),1024&i[0]&&(c.supportedFileTypes=r[10].enableDebugFeatures?["image","text"]:["image"]),t.$set(c);const a={};512&i[0]&&(a.flags=r[9].flags),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function jl(s){let t,n;return t=new i6({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function x6(s){let t,n,e,o,r,i,c,a,l,u,m;t=new qp({props:{shortcuts:s[16]}});let p=!s[28].doHideAtMentions&&Hl(s),f=!s[7]&&!s[28].doHideSlashActions&&Ul();r=new jp({props:{placeholder:s[13]}}),c=new kr.Content({props:{content:s[27],onContentChanged:s[38]}});let x=s[9].flags.enableChatMultimodal&&!s[28].doHideMultimodalActions&&ql(s),A=s[30]&&!s[28].doHideSlashActions&&jl();return{c(){g(t.$$.fragment),n=z(),p&&p.c(),e=z(),f&&f.c(),o=z(),g(r.$$.fragment),i=z(),g(c.$$.fragment),a=z(),x&&x.c(),l=z(),A&&A.c(),u=gt()},m(C,M){h(t,C,M),_(C,n,M),p&&p.m(C,M),_(C,e,M),f&&f.m(C,M),_(C,o,M),h(r,C,M),_(C,i,M),h(c,C,M),_(C,a,M),x&&x.m(C,M),_(C,l,M),A&&A.m(C,M),_(C,u,M),m=!0},p(C,M){const S={};65536&M[0]&&(S.shortcuts=C[16]),t.$set(S),C[28].doHideAtMentions?p&&(Y(),$(p,1,1,()=>{p=null}),K()):p?(p.p(C,M),268435456&M[0]&&d(p,1)):(p=Hl(C),p.c(),d(p,1),p.m(e.parentNode,e)),C[7]||C[28].doHideSlashActions?f&&(Y(),$(f,1,1,()=>{f=null}),K()):f?268435584&M[0]&&d(f,1):(f=Ul(),f.c(),d(f,1),f.m(o.parentNode,o));const L={};8192&M[0]&&(L.placeholder=C[13]),r.$set(L);const I={};134217728&M[0]&&(I.content=C[27]),c.$set(I),C[9].flags.enableChatMultimodal&&!C[28].doHideMultimodalActions?x?(x.p(C,M),268435968&M[0]&&d(x,1)):(x=ql(C),x.c(),d(x,1),x.m(l.parentNode,l)):x&&(Y(),$(x,1,1,()=>{x=null}),K()),C[30]&&!C[28].doHideSlashActions?A?1342177280&M[0]&&d(A,1):(A=jl(),A.c(),d(A,1),A.m(u.parentNode,u)):A&&(Y(),$(A,1,1,()=>{A=null}),K())},i(C){m||(d(t.$$.fragment,C),d(p),d(f),d(r.$$.fragment,C),d(c.$$.fragment,C),d(x),d(A),m=!0)},o(C){$(t.$$.fragment,C),$(p),$(f),$(r.$$.fragment,C),$(c.$$.fragment,C),$(x),$(A),m=!1},d(C){C&&(y(n),y(e),y(o),y(i),y(a),y(l),y(u)),v(t,C),p&&p.d(C),f&&f.d(C),v(r,C),v(c,C),x&&x.d(C),A&&A.d(C)}}}function b6(s){let t;const n=s[56].banner,e=Xt(n,s,s[60],Bl);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||536870912&r[1])&&Jt(e,n,o,o[60],t?Qt(n,o[60],r,y6):Zt(o[60]),Bl)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function Wl(s){let t,n;return t=new b1({props:{chatModel:s[31]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function _6(s){let t,n,e=!s[28].doHideContextBar&&Wl(s);return{c(){e&&e.c(),t=gt()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,r){o[28].doHideContextBar?e&&(Y(),$(e,1,1,()=>{e=null}),K()):e?(e.p(o,r),268435456&r[0]&&d(e,1)):(e=Wl(o),e.c(),d(e,1),e.m(t.parentNode,t))},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function Vl(s){let t,n;return t=new N2({props:{chatModel:s[31],agentConversationModel:s[32]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Gl(s){let t,n;return t=new oo.AddFileButton({props:{accept:zc(s[10].enableDebugFeatures)}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1024&o[0]&&(r.accept=zc(e[10].enableDebugFeatures)),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Yl(s){let t,n;return t=new oo.ActionsMenu({props:{onCloseDropdown:s[40]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Kl(s){var e;let t,n;return t=new oo.ContextMenu({props:{onCloseDropdown:s[40],onInsertMentionable:(e=s[11])==null?void 0:e.insertMentionNode}}),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,r){var c;const i={};2048&r[0]&&(i.onInsertMentionable=(c=o[11])==null?void 0:c.insertMentionNode),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){v(t,o)}}}function Xl(s){let t,n,e,o;return{c(){t=D("span"),n=V(s[22]),e=V("/"),o=V(Zr),k(t,"class","character-counter svelte-pwtee")},m(r,i){_(r,t,i),P(t,n),P(t,e),P(t,o)},p(r,i){4194304&i[0]&&ht(n,r[22])},d(r){r&&y(t)}}}function C6(s){let t;return{c(){t=V("Beta")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Jl(s){let t,n;return t=new Gy({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function A6(s){var C;let t,n,e,o,r,i,c,a,l=s[10].enableAgentMode&&s[2]&&Vl(s),u=s[9].flags.enableChatMultimodal&&!s[28].doHideMultimodalActions&&Gl(s),m=!s[7]&&!s[28].doHideSlashActions&&Yl(s),p=!s[28].doHideAtMentions&&Kl(s),f=s[22]>Zr&&Xl(s),x=((C=s[33])==null?void 0:C.isActive)&&function(M){let S,L;return S=new Af({props:{color:"premium",size:1,variant:"soft",$$slots:{default:[C6]},$$scope:{ctx:M}}}),{c(){g(S.$$.fragment)},m(I,X){h(S,I,X),L=!0},i(I){L||(d(S.$$.fragment,I),L=!0)},o(I){$(S.$$.fragment,I),L=!1},d(I){v(S,I)}}}(s),A=s[24]&&Jl();return{c(){l&&l.c(),t=z(),u&&u.c(),n=z(),m&&m.c(),e=z(),p&&p.c(),o=z(),f&&f.c(),r=z(),x&&x.c(),i=z(),A&&A.c(),c=gt()},m(M,S){l&&l.m(M,S),_(M,t,S),u&&u.m(M,S),_(M,n,S),m&&m.m(M,S),_(M,e,S),p&&p.m(M,S),_(M,o,S),f&&f.m(M,S),_(M,r,S),x&&x.m(M,S),_(M,i,S),A&&A.m(M,S),_(M,c,S),a=!0},p(M,S){M[10].enableAgentMode&&M[2]?l?(l.p(M,S),1028&S[0]&&d(l,1)):(l=Vl(M),l.c(),d(l,1),l.m(t.parentNode,t)):l&&(Y(),$(l,1,1,()=>{l=null}),K()),M[9].flags.enableChatMultimodal&&!M[28].doHideMultimodalActions?u?(u.p(M,S),268435968&S[0]&&d(u,1)):(u=Gl(M),u.c(),d(u,1),u.m(n.parentNode,n)):u&&(Y(),$(u,1,1,()=>{u=null}),K()),M[7]||M[28].doHideSlashActions?m&&(Y(),$(m,1,1,()=>{m=null}),K()):m?(m.p(M,S),268435584&S[0]&&d(m,1)):(m=Yl(M),m.c(),d(m,1),m.m(e.parentNode,e)),M[28].doHideAtMentions?p&&(Y(),$(p,1,1,()=>{p=null}),K()):p?(p.p(M,S),268435456&S[0]&&d(p,1)):(p=Kl(M),p.c(),d(p,1),p.m(o.parentNode,o)),M[22]>Zr?f?f.p(M,S):(f=Xl(M),f.c(),f.m(r.parentNode,r)):f&&(f.d(1),f=null),M[24]?A?16777216&S[0]&&d(A,1):(A=Jl(),A.c(),d(A,1),A.m(c.parentNode,c)):A&&(Y(),$(A,1,1,()=>{A=null}),K())},i(M){a||(d(l),d(u),d(m),d(p),d(x),d(A),a=!0)},o(M){$(l),$(u),$(m),$(p),$(x),$(A),a=!1},d(M){M&&(y(t),y(n),y(e),y(o),y(r),y(i),y(c)),l&&l.d(M),u&&u.d(M),m&&m.d(M),p&&p.d(M),f&&f.d(M),x&&x.d(M),A&&A.d(M)}}}function Zl(s){var e;let t,n;return t=new oo.NotifyButton({props:{agentId:(e=s[6])==null?void 0:e.currentAgentId}}),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,r){var c;const i={};64&r[0]&&(i.agentId=(c=o[6])==null?void 0:c.currentAgentId),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){v(t,o)}}}function M6(s){let t,n,e,o;t=new oo.RewritePromptButton({props:{onRewrite:s[42],isDisabled:s[12].isDisabled,disabledReason:s[12].disabledReason}});let r=s[3]&&Ql(s);return{c(){g(t.$$.fragment),n=z(),r&&r.c(),e=gt()},m(i,c){h(t,i,c),_(i,n,c),r&&r.m(i,c),_(i,e,c),o=!0},p(i,c){const a={};4096&c[0]&&(a.isDisabled=i[12].isDisabled),4096&c[0]&&(a.disabledReason=i[12].disabledReason),t.$set(a),i[3]?r?(r.p(i,c),8&c[0]&&d(r,1)):(r=Ql(i),r.c(),d(r,1),r.m(e.parentNode,e)):r&&(Y(),$(r,1,1,()=>{r=null}),K())},i(i){o||(d(t.$$.fragment,i),d(r),o=!0)},o(i){$(t.$$.fragment,i),$(r),o=!1},d(i){i&&(y(n),y(e)),v(t,i),r&&r.d(i)}}}function k6(s){var e;let t,n;return t=new oo.ResendButton({props:{resendAction:(e=s[8])==null?void 0:e.resendLastExchange}}),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,r){var c;const i={};256&r[0]&&(i.resendAction=(c=o[8])==null?void 0:c.resendLastExchange),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){v(t,o)}}}function S6(s){let t,n;return t=new oo.CancelButton({props:{cancelAction:s[32].interruptAgent}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function T6(s){let t,n;return t=new oo.CancelButton({props:{cancelAction:s[17]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};131072&o[0]&&(r.cancelAction=e[17]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Ql(s){let t,n;return t=new oo.SendButton({props:{isDisabled:s[4],disabledReason:s[21],primaryAction:s[19]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};16&o[0]&&(r.isDisabled=e[4]),2097152&o[0]&&(r.disabledReason=e[21]),524288&o[0]&&(r.primaryAction=e[19]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function E6(s){let t,n,e,o,r,i=s[29]&&Zl(s);const c=[T6,S6,k6,M6],a=[];function l(u,m){return u[18]?0:u[14]?1:u[5]?2:3}return n=l(s),e=a[n]=c[n](s),{c(){i&&i.c(),t=z(),e.c(),o=gt()},m(u,m){i&&i.m(u,m),_(u,t,m),a[n].m(u,m),_(u,o,m),r=!0},p(u,m){u[29]?i?(i.p(u,m),536870912&m[0]&&d(i,1)):(i=Zl(u),i.c(),d(i,1),i.m(t.parentNode,t)):i&&(Y(),$(i,1,1,()=>{i=null}),K());let p=n;n=l(u),n===p?a[n].p(u,m):(Y(),$(a[p],1,1,()=>{a[p]=null}),K(),e=a[n],e?e.p(u,m):(e=a[n]=c[n](u),e.c()),d(e,1),e.m(o.parentNode,o))},i(u){r||(d(i),d(e),r=!0)},o(u){$(i),$(e),r=!1},d(u){u&&(y(t),y(o)),i&&i.d(u),a[n].d(u)}}}function I6(s){let t,n;return t=new oo.Root({props:{slot:"footer",$$slots:{rightAlign:[E6],leftAlign:[A6]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};829317116&o[0]|536870912&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function tu(s){let t,n,e={editable:s[1],$$slots:{footer:[I6],header:[_6],banner:[b6],default:[x6]},$$scope:{ctx:s}};return t=new kr.Root({props:e}),s[59](t),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,r){const i={};2&r[0]&&(i.editable=o[1]),2037350396&r[0]|536870912&r[1]&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){s[59](null),v(t,o)}}}function L6(s){let t,n,e,o,r=s[20],i=tu(s);return{c(){t=D("div"),i.c(),k(t,"class","c-chat-input svelte-pwtee"),k(t,"data-testid","design-system-chat-input")},m(c,a){_(c,t,a),i.m(t,null),n=!0,e||(o=[Et(Ei,"focus",s[57]),Et(Ei,"blur",function(){xe(s[9].saveImmediate)&&s[9].saveImmediate.apply(this,arguments)}),Et(Ei,"beforeunload",function(){xe(s[9].saveImmediate)&&s[9].saveImmediate.apply(this,arguments)})],e=!0)},p(c,a){s=c,1048576&a[0]&&it(r,r=s[20])?(Y(),$(i,1,1,N),K(),i=tu(s),i.c(),d(i,1),i.m(t,null)):i.p(s,a)},i(c){n||(d(i),n=!0)},o(c){$(i),n=!1},d(c){c&&y(t),i.d(c),e=!1,Ye(o)}}}function R6(s,t,n){let e,o,r,i,c,a,l,u,m,p,f,x,A,C,M,S,L,I,X,j,H,J,U,O,Z,et,Q,ut,rt,mt,G,Tt,Bt,_t,Ct,Se=N,Te=N,sn=N,q=N;s.$$.on_destroy.push(()=>Se()),s.$$.on_destroy.push(()=>Te()),s.$$.on_destroy.push(()=>sn()),s.$$.on_destroy.push(()=>q());let{$$slots:E={},$$scope:B}=t;const nt=Mt("chatModel");kt(s,nt,qt=>n(9,Tt=qt));const at=Mt("toolsWebviewModel"),wt=Mt("agentConversationModel"),vt=Mt(on.key);kt(s,vt,qt=>n(6,Q=qt));const Dt=Mt(xr.key),ie=Mt("slashCommandModel"),me=Mt(wo.key),St=nt.flags;kt(s,St,qt=>n(10,_t=qt));const{currentConversationModel:ze}=nt;kt(s,ze,qt=>n(52,et=qt));const{activeCommand:Ze}=ie;kt(s,Ze,qt=>n(30,Ct=qt));let{editable:ve=!0}=t,{placeholder:Qe="Ask or instruct Augment"}=t,{hasToggleModeButton:Ee=!0}=t,{hasSendButton:In=!0}=t,{richTextEditorRoot:Be}=t,jn=!1;const wn=hg.debounce(async()=>{if(!jn&&r&&vt)try{await vt.reportRemoteAgentSetupWindowEvent(jr.typeInPromptWindow),jn=!0}catch(qt){console.error("Failed to report type in prompt window event:",qt)}},1500);let Ke,tn;const en=ze.onNewConversation(()=>Ln());let Bn;sr(en);let An;const qe=()=>Be==null?void 0:Be.requestFocus(),Ln=()=>{var qt;return(qt=Be==null?void 0:Be.forceFocus)==null?void 0:qt.call(Be)},ro=()=>(Be==null||Be.blur(),!0);let Wn=!1;const Zn=Dt==null?void 0:Dt.currentRepositoryUrl;return kt(s,Zn,qt=>n(53,ut=qt)),s.$$set=qt=>{"editable"in qt&&n(1,ve=qt.editable),"placeholder"in qt&&n(43,Qe=qt.placeholder),"hasToggleModeButton"in qt&&n(2,Ee=qt.hasToggleModeButton),"hasSendButton"in qt&&n(3,In=qt.hasSendButton),"richTextEditorRoot"in qt&&n(0,Be=qt.richTextEditorRoot),"$$scope"in qt&&n(60,B=qt.$$scope)},s.$$.update=()=>{var qt,Nn,Qn,Hn,Vn,be;if(64&s.$$.dirty[0]&&n(29,e=!!(Q!=null&&Q.isActive)),64&s.$$.dirty[0]&&n(28,o=yp(Q)),64&s.$$.dirty[0]&&(r=(Q==null?void 0:Q.isActive)&&!(Q!=null&&Q.currentAgentId)),2097152&s.$$.dirty[1]&&n(51,i=et.draftExchange||{rich_text_json_repr:void 0}),1048576&s.$$.dirty[1]&&n(27,c=i.rich_text_json_repr||{type:"doc",content:[{type:"paragraph"}]}),64&s.$$.dirty[0]|2097152&s.$$.dirty[1]&&n(50,a=Q!=null&&Q.isActive?"remoteAgent":(qt=et.extraData)!=null&&qt.isAgentConversation?"localAgent":"chat"),512&s.$$.dirty[0]|2629632&s.$$.dirty[1]&&Tt.conversations[et.id]&&Sn.isNew(Tt.conversations[et.id])&&Ke!==a&&(n(44,Ke=a),a!=="remoteAgent"&&ho().then(()=>Ln())),2637824&s.$$.dirty[1]&&tn!==et.id&&(n(45,tn=et.id),a!=="remoteAgent"&&ho().then(()=>Ln())),64&s.$$.dirty[0]|32768&s.$$.dirty[1]){const Me=(Nn=Q==null?void 0:Q.currentAgent)==null?void 0:Nn.status;Bn!==Ge.agentStarting||Me!==Ge.agentRunning&&Me!==Ge.agentIdle||ho().then(()=>Ln()),n(46,Bn=Me)}if(192&s.$$.dirty[0]&&n(49,m=mt||(Q==null?void 0:Q.isActive)),1024&s.$$.dirty[0]|262144&s.$$.dirty[1]&&n(24,p=m&&_t.enableModelRegistry),512&s.$$.dirty[0]&&(n(23,f=Tt.sendModeModel.mode),q(),q=oe(f,Me=>n(55,Bt=Me))),577&s.$$.dirty[0]|16777216&s.$$.dirty[1]&&n(48,x=r2(Tt,wt,at,ie,Bt,me,Q,Dt,Be)),131072&s.$$.dirty[1]&&n(18,A=x.showCancelButton),2097152&s.$$.dirty[1]&&n(22,C=((Hn=(Qn=et.draftExchange)==null?void 0:Qn.request_message)==null?void 0:Hn.length)||0),131072&s.$$.dirty[1]&&n(4,M=x.isDisabled),131072&s.$$.dirty[1]&&n(21,S=x.disabledReason),131072&s.$$.dirty[1]&&n(19,L=x.action),131072&s.$$.dirty[1]&&n(17,I=x.cancelAction),192&s.$$.dirty[0]|4096&s.$$.dirty[1]&&n(20,X=`${mt}-${Q==null?void 0:Q.isActive}-${Qe}`),512&s.$$.dirty[0]&&(n(15,H=Tt.currentConversationModel),sn(),sn=oe(H,Me=>n(8,G=Me))),256&s.$$.dirty[0]){const Me=(Vn=G==null?void 0:G.lastExchange)==null?void 0:Vn.status,He=Me===Ve.cancelled,Pt=G==null?void 0:G.getLastToolUseState().phase,Yt=Pt===ye.cancelled;n(47,Wn=He||Yt)}192&s.$$.dirty[0]|8388608&s.$$.dirty[1]&&n(14,J=!(Q!=null&&Q.isActive)&&mt&&rt!==go.notRunning),64&s.$$.dirty[0]|2162688&s.$$.dirty[1]&&n(5,U=!(Q!=null&&Q.isActive)&&Wn&&((be=et.draftExchange)==null?void 0:be.request_message)===""),32&s.$$.dirty[0]|4096&s.$$.dirty[1]&&n(13,O=U?"Resend to continue":Qe),80&s.$$.dirty[0]|4194304&s.$$.dirty[1]&&n(12,Z=function(Me,He,Pt){var ce,_e,Ie;if(Pt)return{isDisabled:!0,disabledReason:void 0};if(!(Me!=null&&Me.isActive))return{isDisabled:!1,disabledReason:void 0};const Yt=(Ie=(_e=(ce=Me.newAgentDraft)==null?void 0:ce.commitRef)==null?void 0:_e.github_commit_ref)==null?void 0:Ie.repository_url;if(!Yt)return{isDisabled:!1,disabledReason:void 0};const Kt=He||"";return Kt&&Yt!==Kt?{isDisabled:!0,disabledReason:"Prompt enhancer is only available when the current repository is selected"}:{isDisabled:!1,disabledReason:void 0}}(Q,ut,M))},n(26,{isCurrConversationAgentic:l,agentExchangeStatus:u}=wt,l,(n(25,u),Se(),Se=oe(u,qt=>n(54,rt=qt)),u)),Te(),Te=oe(l,qt=>n(7,mt=qt)),n(16,j={Enter:()=>!M&&L(),Escape:()=>A?I():J?(wt.interruptAgent().catch(qt=>{console.error("Failed to interrupt agent:",qt)}),!0):ro()}),[Be,ve,Ee,In,M,U,Q,mt,G,Tt,_t,An,Z,O,J,H,j,I,A,L,X,S,C,f,p,u,l,c,o,e,Ct,nt,wt,vt,St,qt=>{nt.extensionClient.showNotification({message:qt,type:"error"})},ze,Ze,function(qt){et.saveDraftExchange(qt.rawText,qt.richTextJsonRepr),qt.rawText&&qt.rawText.trim().length>0&&wn()},function(qt){et.saveDraftMentions(qt.current)},qe,Zn,async function(){var qt,Nn,Qn,Hn,Vn;try{const be=((qt=et.draftExchange)==null?void 0:qt.request_message)||"";if(!be||be.trim()==="")return;const Me=`Here is an instruction that I'd like to give you, but it needs to be improved. Rewrite and enhance this instruction to make it clearer, more specific, less ambiguous, and correct any mistakes. Do not use any tools: reply immediately with your answer, even if you're not sure. Consider the context of our conversation history when enhancing the prompt. Reply with the following format:

### BEGIN RESPONSE ###
Here is an enhanced version of the original instruction that is more specific and clear:
<augment-enhanced-prompt>enhanced prompt goes here</augment-enhanced-prompt>

### END RESPONSE ###

Here is my original instruction:`,He=(Nn=et.draftExchange)==null?void 0:Nn.rich_text_json_repr;try{let Pt;Q!=null&&Q.isActive&&(Pt=Q.getCurrentChatHistory().map($e=>({request_id:$e.request_id||"",request_message:$e.request_message,response_text:$e.response_text||""})));let{responseText:Yt,requestId:Kt}=await et.sendSilentExchange({request_message:`${Me}

${be}`,disableRetrieval:!1,chatHistory:Pt});et.extensionClient.reportAgentRequestEvent({eventName:Lf.enhancedPrompt,conversationId:et.id,requestId:Kt,chatHistoryLength:et.chatHistory.length}),et.extensionClient.reportAgentSessionEvent({eventName:Ro.enhancedPrompt,conversationId:et.id});let ce="";const _e=/<augment-enhanced-prompt>([\s\S]*?)<\/augment-enhanced-prompt>/,Ie=Yt.match(_e);if(Ie&&Ie[1])ce=Ie[1].trim();else{ce=be,console.warn("Enhanced prompt tags not found in response, using original prompt");const $e=document.createElement("div");$e.className="enhance-prompt-error-tooltip",$e.textContent="Failed to enhance prompt, sorry about that",document.body.appendChild($e);const pe=Ig($e,{content:$e,trigger:"manual",placement:"top",theme:"error",duration:[300,2e3],onHidden:()=>{$e.remove()}}),pn=document.querySelector(".c-rewrite-prompt-button");pn?(pe.setProps({getReferenceClientRect:()=>pn.getBoundingClientRect()}),pe.show(),setTimeout(()=>{pe.hide()},3e3)):$e.remove()}if(ce&&ce.trim()!==""){const $e=(Qn=et.draftExchange)==null?void 0:Qn.rich_text_json_repr;let pe;if($e&&typeof $e=="object"){if(pe={...$e},pe.content&&Array.isArray(pe.content)){const pn=[];let Lt=!1;for(const Un of pe.content)if(Un.type!=="paragraph"||Lt)Un.type!=="paragraph"&&pn.push(Un);else{const Mn=ce.split(`
`),bo={type:"paragraph",content:[]};Mn.forEach((No,_o)=>{var pt,we;No.length>0&&((pt=bo.content)==null||pt.push({type:"text",text:No})),_o<Mn.length-1&&((we=bo.content)==null||we.push({type:"hardBreak"}))}),pn.push(bo),Lt=!0}pe.content=pn}}else pe={type:"doc",content:[{type:"paragraph",content:[{type:"text",text:ce}]}]};et.saveDraftExchange(ce,pe),setTimeout(()=>{Ln();try{const pn=document.querySelector(".ProseMirror");if(pn){const Lt=pn.querySelector("p");if(Lt){const Un=document.createRange(),Mn=window.getSelection();Un.setStart(Lt,0),Un.collapse(!0),Mn&&(Mn.removeAllRanges(),Mn.addRange(Un))}}}catch{}},200)}else et.saveDraftExchange(He&&((Hn=et.draftExchange)==null?void 0:Hn.request_message)||"",He||{type:"doc",content:[]})}catch{et.saveDraftExchange(He&&((Vn=et.draftExchange)==null?void 0:Vn.request_message)||"",He||{type:"doc",content:[]})}Ln()}catch{}},Qe,Ke,tn,Bn,Wn,x,m,a,i,et,ut,rt,Bt,E,()=>{e||qe()},function(qt){Gt[qt?"unshift":"push"](()=>{An=qt,n(11,An)})},function(qt){Gt[qt?"unshift":"push"](()=>{Be=qt,n(0,Be)})},B]}class S1 extends ct{constructor(t){super(),lt(this,t,R6,L6,it,{editable:1,placeholder:43,hasToggleModeButton:2,hasSendButton:3,richTextEditorRoot:0},null,[-1,-1,-1])}}const D6=s=>({}),eu=s=>({}),P6=s=>({}),nu=s=>({}),N6=s=>({}),ou=s=>({}),F6=s=>({}),ru=s=>({}),z6=s=>({}),su=s=>({}),O6=s=>({}),iu=s=>({}),B6=s=>({}),au=s=>({});function H6(s){let t,n,e,o,r,i,c,a,l,u,m,p,f,x,A;const C=s[1]["header-area"],M=Xt(C,s,s[0],au),S=s[1]["floating-area"],L=Xt(S,s,s[0],iu),I=s[1]["message-area"],X=Xt(I,s,s[0],su),j=s[1]["divider-area"],H=Xt(j,s,s[0],ru),J=s[1]["actions-area"],U=Xt(J,s,s[0],ou),O=s[1]["input-area"],Z=Xt(O,s,s[0],nu),et=s[1]["footer-area"],Q=Xt(et,s,s[0],eu);return{c(){t=D("div"),n=D("div"),e=D("div"),M&&M.c(),o=z(),r=D("div"),L&&L.c(),i=z(),c=D("div"),a=D("div"),X&&X.c(),l=z(),u=D("div"),H&&H.c(),m=z(),p=D("div"),U&&U.c(),f=z(),Z&&Z.c(),x=z(),Q&&Q.c(),k(e,"class","l-chat__header svelte-84kn6v"),k(r,"class","l-chat__floating svelte-84kn6v"),k(a,"class","l-chat__msg_area_body svelte-84kn6v"),k(c,"class","l-chat__msg_area svelte-84kn6v"),k(n,"class","l-chat svelte-84kn6v"),k(n,"data-testid","main-chat"),k(n,"data-vscode-context",JSON.stringify({preventDefaultContextMenuItems:!0})),k(u,"class","l-chat__divider_area svelte-84kn6v"),k(p,"class","l-chat__input_area svelte-84kn6v"),k(t,"class","l-chat-wrapper svelte-84kn6v")},m(ut,rt){_(ut,t,rt),P(t,n),P(n,e),M&&M.m(e,null),P(n,o),P(n,r),L&&L.m(r,null),P(n,i),P(n,c),P(c,a),X&&X.m(a,null),P(t,l),P(t,u),H&&H.m(u,null),P(t,m),P(t,p),U&&U.m(p,null),P(p,f),Z&&Z.m(p,null),P(p,x),Q&&Q.m(p,null),A=!0},p(ut,[rt]){M&&M.p&&(!A||1&rt)&&Jt(M,C,ut,ut[0],A?Qt(C,ut[0],rt,B6):Zt(ut[0]),au),L&&L.p&&(!A||1&rt)&&Jt(L,S,ut,ut[0],A?Qt(S,ut[0],rt,O6):Zt(ut[0]),iu),X&&X.p&&(!A||1&rt)&&Jt(X,I,ut,ut[0],A?Qt(I,ut[0],rt,z6):Zt(ut[0]),su),H&&H.p&&(!A||1&rt)&&Jt(H,j,ut,ut[0],A?Qt(j,ut[0],rt,F6):Zt(ut[0]),ru),U&&U.p&&(!A||1&rt)&&Jt(U,J,ut,ut[0],A?Qt(J,ut[0],rt,N6):Zt(ut[0]),ou),Z&&Z.p&&(!A||1&rt)&&Jt(Z,O,ut,ut[0],A?Qt(O,ut[0],rt,P6):Zt(ut[0]),nu),Q&&Q.p&&(!A||1&rt)&&Jt(Q,et,ut,ut[0],A?Qt(et,ut[0],rt,D6):Zt(ut[0]),eu)},i(ut){A||(d(M,ut),d(L,ut),d(X,ut),d(H,ut),d(U,ut),d(Z,ut),d(Q,ut),A=!0)},o(ut){$(M,ut),$(L,ut),$(X,ut),$(H,ut),$(U,ut),$(Z,ut),$(Q,ut),A=!1},d(ut){ut&&y(t),M&&M.d(ut),L&&L.d(ut),X&&X.d(ut),H&&H.d(ut),U&&U.d(ut),Z&&Z.d(ut),Q&&Q.d(ut)}}}function U6(s,t,n){let{$$slots:e={},$$scope:o}=t;return s.$$set=r=>{"$$scope"in r&&n(0,o=r.$$scope)},[o,e]}class q6 extends ct{constructor(t){super(),lt(this,t,U6,H6,it,{})}}function j6(s){let t,n,e,o,r,i;return n=new Ot({props:{size:1,color:"error",$$slots:{default:[W6]},$$scope:{ctx:s}}}),r=new Ot({props:{size:1,color:"error",$$slots:{default:[V6]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),e=z(),o=D("div"),g(r.$$.fragment),k(t,"class","c-lazy-loading-error"),k(o,"class","c-lazy-loading-error")},m(c,a){_(c,t,a),h(n,t,null),_(c,e,a),_(c,o,a),h(r,o,null),i=!0},i(c){i||(d(n.$$.fragment,c),d(r.$$.fragment,c),i=!0)},o(c){$(n.$$.fragment,c),$(r.$$.fragment,c),i=!1},d(c){c&&(y(t),y(e),y(o)),v(n),v(r)}}}function W6(s){let t;return{c(){t=V("Failed to load agent setup. Please try closing and re-opening the panel.")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function V6(s){let t;return{c(){t=V(s[2])},m(n,e){_(n,t,e)},p:N,d(n){n&&y(t)}}}function G6(s){let t,n;return function(e){e[0]=e[1].default}(s),t=new s[0]({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Y6(s){let t,n,e,o,r;return n=new Tn({props:{size:1}}),o=new Ot({props:{size:1,color:"secondary",$$slots:{default:[K6]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),e=z(),g(o.$$.fragment),k(t,"class","c-lazy-loading-container")},m(i,c){_(i,t,c),h(n,t,null),P(t,e),h(o,t,null),r=!0},i(i){r||(d(n.$$.fragment,i),d(o.$$.fragment,i),r=!0)},o(i){$(n.$$.fragment,i),$(o.$$.fragment,i),r=!1},d(i){i&&y(t),v(n),v(o)}}}function K6(s){let t;return{c(){t=V("Loading agent setup...")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function X6(s){let t,n,e={ctx:s,current:null,token:null,hasCatch:!0,pending:Y6,then:G6,catch:j6,value:1,error:2,blocks:[,,,]};return Vs(Kp(()=>import("./RemoteAgentSetup-DKM6LRSZ.js"),__vite__mapDeps([5,1,2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,3,30,31,32,33,0,4,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75]),import.meta.url),e),{c(){t=gt(),e.block.c()},m(o,r){_(o,t,r),e.block.m(o,e.anchor=r),e.mount=()=>t.parentNode,e.anchor=t,n=!0},p(o,[r]){s=o},i(o){n||(d(e.block),n=!0)},o(o){for(let r=0;r<3;r+=1){const i=e.blocks[r];$(i)}n=!1},d(o){o&&y(t),e.block.d(o),e.token=null,e=null}}}class J6 extends ct{constructor(t){super(),lt(this,t,null,X6,it,{})}}function T1(s){const{scrollTop:t,clientHeight:n,scrollHeight:e}=s;return e-t-n}const Z6=(s,t=40)=>T1(s)<=t;function Q6(s,t={}){let n=t,e={scrollTop:0,scrollBottom:0,scrollHeight:0,scrolledIntoBottom:!0,scrolledAwayFromBottom:!0};const o=()=>{var A,C,M;const{scrollTop:r,scrollHeight:i,offsetHeight:c}=s,a=T1(s),l=r>e.scrollTop+1,u=i-e.scrollHeight,m=!(u<0&&e.scrollBottom<-u)&&r<e.scrollTop-1&&a>e.scrollBottom+1,p=i>c,f=Z6(s)&&p&&l,x=m||!p;f&&!e.scrolledIntoBottom?(A=n.onScrollIntoBottom)==null||A.call(n):x&&!e.scrolledAwayFromBottom&&((C=n.onScrollAwayFromBottom)==null||C.call(n)),e={scrollTop:r,scrollBottom:a,scrolledIntoBottom:f,scrolledAwayFromBottom:x,scrollHeight:i},(M=n.onScroll)==null||M.call(n,r)};return s.addEventListener("scroll",o),{update(r){n=r},destroy(){s.removeEventListener("scroll",o)}}}function t5(s,t){var r;let n=s.offsetHeight,e=t;const o=new ResizeObserver(i=>{var a;const c=i[0].contentRect.height;i.length===1?c!==n&&((a=e.onHeightChange)==null||a.call(e,c),n=c):console.warn("Unexpected number of resize entries: ",i)});return o.observe(s),(r=e==null?void 0:e.onHeightChange)==null||r.call(e,n),{update(i){e=i},destroy:()=>o.disconnect()}}function e5(s,t){let n=t;const e=Gs(()=>{n.onSeen()},1e3,{leading:!0,trailing:!0}),o=new IntersectionObserver(i=>{i.length===1?i[0].isIntersecting&&e():console.warn("Unexpected number of intersection entries: ",i)},{threshold:.5}),r=()=>{o.disconnect(),n.track&&o.observe(s)};return r(),{update(i){const c=n;n=i,n.track!==c.track&&r()},destroy:()=>{o.disconnect(),n.onSeen()}}}function n5(s,t={items:[]}){let n=t,e=[],o=null;const r=Nf();function i(p){n=p,r.update(f=>({...f,all:p.items??[]}))}function c(){var x;if((((x=n.items)==null?void 0:x.length)??0)<=1)return;const p=new Set(n.items),f=s.querySelectorAll("[data-timestamp-id]");e=[];for(const A of f){const C=A.getAttribute("data-timestamp-id");if(C&&p.has(C)){const M=A.offsetTop;e.push({id:C,element:A,offsetTop:M})}}e.sort((A,C)=>A.offsetTop-C.offsetTop),a()}function a(p){if(e.length===0)return;const f=p??s.scrollTop;let x,A,C=1/0,M=1/0;for(const S of e){if(S.offsetTop>f+80){const L=S.offsetTop-f;L<C&&(C=L,x={id:S.id,offsetTop:S.offsetTop})}if(S.offsetTop<f-80){const L=f-S.offsetTop;L<M&&(M=L,A={id:S.id,offsetTop:S.offsetTop})}}r.update(S=>{var L,I;return((L=S.next)==null?void 0:L.id)===(x==null?void 0:x.id)&&((I=S.prev)==null?void 0:I.id)===(A==null?void 0:A.id)?S:{...S,next:x,prev:A}})}const l=Gs(p=>{a(p.target.scrollTop)},100),u=Gs(c,300),m=p=>{s.scrollTo({top:p,behavior:"smooth"})};return c(),r.update(p=>({...p,scrollTo:m})),s.addEventListener("scroll",l,{passive:!0}),o=new ResizeObserver(u),o.observe(s),i(t),{update(p){i(p),c()},destroy(){s.removeEventListener("scroll",l),o==null||o.disconnect(),e=[],r.update(()=>({all:[]}))}}}function cu(s){let t,n,e,o=s[6]&&lu(s);return n=new p1({props:{changeImageMode:s[32],saveImage:s[9].saveImage,saveAttachment:s[9].saveAttachment,deleteImage:s[9].deleteImage,renderImage:s[9].renderImage,isEditable:s[33],supportedFileTypes:s[9].flags.enableDebugFeatures?["image","text"]:["image"]}}),{c(){o&&o.c(),t=z(),g(n.$$.fragment)},m(r,i){o&&o.m(r,i),_(r,t,i),h(n,r,i),e=!0},p(r,i){r[6]?o?(o.p(r,i),64&i[0]&&d(o,1)):(o=lu(r),o.c(),d(o,1),o.m(t.parentNode,t)):o&&(Y(),$(o,1,1,()=>{o=null}),K());const c={};258&i[0]&&(c.changeImageMode=r[32]),512&i[0]&&(c.saveImage=r[9].saveImage),512&i[0]&&(c.saveAttachment=r[9].saveAttachment),512&i[0]&&(c.deleteImage=r[9].deleteImage),512&i[0]&&(c.renderImage=r[9].renderImage),64&i[0]&&(c.isEditable=r[33]),512&i[0]&&(c.supportedFileTypes=r[9].flags.enableDebugFeatures?["image","text"]:["image"]),n.$set(c)},i(r){e||(d(o),d(n.$$.fragment,r),e=!0)},o(r){$(o),$(n.$$.fragment,r),e=!1},d(r){r&&y(t),o&&o.d(r),v(n,r)}}}function lu(s){let t,n;return t=new d1({props:{flags:s[9].flags}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};512&o[0]&&(r.flags=e[9].flags),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function o5(s){var A;let t,n,e,o,r,i,c,a,l,u,m=s[9].flags.enableChatMultimodal&&cu(s);n=new qp({props:{shortcuts:s[13]}});let p={requestEditorFocus:s[22],onMentionItemsUpdated:s[21]};o=new va({props:p}),s[34](o),i=new jp({props:{placeholder:s[2]}}),a=new kr.Content({props:{content:((A=s[7])==null?void 0:A.richTextJsonRepr)??s[3],onContentChanged:s[20]}});const f=s[29].default,x=Xt(f,s,s[37],null);return{c(){m&&m.c(),t=z(),g(n.$$.fragment),e=z(),g(o.$$.fragment),r=z(),g(i.$$.fragment),c=z(),g(a.$$.fragment),l=z(),x&&x.c()},m(C,M){m&&m.m(C,M),_(C,t,M),h(n,C,M),_(C,e,M),h(o,C,M),_(C,r,M),h(i,C,M),_(C,c,M),h(a,C,M),_(C,l,M),x&&x.m(C,M),u=!0},p(C,M){var X;C[9].flags.enableChatMultimodal?m?(m.p(C,M),512&M[0]&&d(m,1)):(m=cu(C),m.c(),d(m,1),m.m(t.parentNode,t)):m&&(Y(),$(m,1,1,()=>{m=null}),K());const S={};8192&M[0]&&(S.shortcuts=C[13]),n.$set(S),o.$set({});const L={};4&M[0]&&(L.placeholder=C[2]),i.$set(L);const I={};136&M[0]&&(I.content=((X=C[7])==null?void 0:X.richTextJsonRepr)??C[3]),a.$set(I),x&&x.p&&(!u||64&M[1])&&Jt(x,f,C,C[37],u?Qt(f,C[37],M,null):Zt(C[37]),null)},i(C){u||(d(m),d(n.$$.fragment,C),d(o.$$.fragment,C),d(i.$$.fragment,C),d(a.$$.fragment,C),d(x,C),u=!0)},o(C){$(m),$(n.$$.fragment,C),$(o.$$.fragment,C),$(i.$$.fragment,C),$(a.$$.fragment,C),$(x,C),u=!1},d(C){C&&(y(t),y(e),y(r),y(c),y(l)),m&&m.d(C),v(n,C),s[34](null),v(o,C),v(i,C),v(a,C),x&&x.d(C)}}}function uu(s){let t,n;return t=new b1({props:{chatModel:s[16]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function r5(s){let t,n,e=s[6]&&uu(s);return{c(){e&&e.c(),t=gt()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,r){o[6]?e?(e.p(o,r),64&r[0]&&d(e,1)):(e=uu(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function du(s){let t,n,e,o=s[6]&&$u(s),r=s[4]&&mu(s);return{c(){o&&o.c(),t=gt(),r&&r.c(),n=gt()},m(i,c){o&&o.m(i,c),_(i,t,c),r&&r.m(i,c),_(i,n,c),e=!0},p(i,c){i[6]?o?(o.p(i,c),64&c[0]&&d(o,1)):(o=$u(i),o.c(),d(o,1),o.m(t.parentNode,t)):o&&(Y(),$(o,1,1,()=>{o=null}),K()),i[4]?r?(r.p(i,c),16&c[0]&&d(r,1)):(r=mu(i),r.c(),d(r,1),r.m(n.parentNode,n)):r&&(Y(),$(r,1,1,()=>{r=null}),K())},i(i){e||(d(o),d(r),e=!0)},o(i){$(o),$(r),e=!1},d(i){i&&(y(t),y(n)),o&&o.d(i),r&&r.d(i)}}}function $u(s){let t,n,e;return t=new oo.Root({props:{$$slots:{rightAlign:[a5],leftAlign:[s5]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z()},m(o,r){h(t,o,r),_(o,n,r),e=!0},p(o,r){const i={};17408&r[0]|64&r[1]&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){$(t.$$.fragment,o),e=!1},d(o){o&&y(n),v(t,o)}}}function s5(s){var e;let t,n;return t=new oo.ContextMenu({props:{slot:"leftAlign",onCloseDropdown:s[22],onInsertMentionable:(e=s[10])==null?void 0:e.insertMentionNode}}),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,r){var c;const i={};1024&r[0]&&(i.onInsertMentionable=(c=o[10])==null?void 0:c.insertMentionNode),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){v(t,o)}}}function i5(s){let t,n;return t=new Yp({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function a5(s){let t,n;return t=new he({props:{size:1,variant:"solid",disabled:!s[14],color:"accent",$$slots:{default:[i5]},$$scope:{ctx:s}}}),t.$on("click",s[18]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};16384&o[0]&&(r.disabled=!e[14]),64&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function mu(s){let t,n,e;return n=new he({props:{variant:"solid",color:"neutral",size:1,$$slots:{iconLeft:[l5],default:[c5]},$$scope:{ctx:s}}}),n.$on("click",s[31]),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-user-msg__collapse-button svelte-q0brxu")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};64&r[1]&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function c5(s){let t;return{c(){t=D("span"),t.textContent="Expand"},m(n,e){_(n,t,e)},p:N,d(n){n&&y(t)}}}function l5(s){let t,n;return t=new o0({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function u5(s){let t,n,e=(s[6]||!s[4])&&du(s);return{c(){e&&e.c(),t=gt()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,r){o[6]||!o[4]?e?(e.p(o,r),80&r[0]&&d(e,1)):(e=du(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function d5(s){let t,n,e,o,r,i={editable:s[6],$$slots:{footer:[u5],header:[r5],default:[o5]},$$scope:{ctx:s}};return n=new kr.Root({props:i}),s[35](n),n.$on("click",$5),n.$on("dblclick",s[17]),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-chat-input svelte-q0brxu"),k(t,"role","button"),k(t,"tabindex","-1"),xt(t,"is-collapsed",s[4]),xt(t,"is-editing",s[6])},m(c,a){_(c,t,a),h(n,t,null),s[36](t),e=!0,o||(r=[Et(window,"mousedown",s[19]),Et(t,"mousedown",nr(s[30]))],o=!0)},p(c,a){const l={};64&a[0]&&(l.editable=c[6]),26623&a[0]|64&a[1]&&(l.$$scope={dirty:a,ctx:c}),n.$set(l),(!e||16&a[0])&&xt(t,"is-collapsed",c[4]),(!e||64&a[0])&&xt(t,"is-editing",c[6])},i(c){e||(d(n.$$.fragment,c),e=!0)},o(c){$(n.$$.fragment,c),e=!1},d(c){c&&y(t),s[35](null),v(n),s[36](null),o=!1,Ye(r)}}}const $5=s=>s.stopPropagation();function m5(s,t,n){let e,o,r,i,c,a,l,u=N;s.$$.on_destroy.push(()=>u());let{$$slots:m={},$$scope:p}=t;const f=Mt("chatModel");kt(s,f,G=>n(9,l=G));const x=Mt(on.key);let{requestId:A}=t,{placeholder:C="Edit your message..."}=t,{content:M}=t,{collapsed:S=!1}=t,{onSubmitEdit:L}=t,{onCancelEdit:I}=t,{setIsCollapsed:X}=t,{userExpanded:j}=t,H,J,U,O=!1,Z=[];async function et(){r&&(n(0,j=!0),S&&X(!1),n(6,O=!0),await ho(),rt())}function Q(){return!(!i||!H)&&(L(H,Z),!0)}function ut(){return n(0,j=!1),n(6,O=!1),n(7,H=void 0),I(),!0}const rt=()=>U==null?void 0:U.forceFocus();let mt;return s.$$set=G=>{"requestId"in G&&n(1,A=G.requestId),"placeholder"in G&&n(2,C=G.placeholder),"content"in G&&n(3,M=G.content),"collapsed"in G&&n(4,S=G.collapsed),"onSubmitEdit"in G&&n(23,L=G.onSubmitEdit),"onCancelEdit"in G&&n(24,I=G.onCancelEdit),"setIsCollapsed"in G&&n(5,X=G.setIsCollapsed),"userExpanded"in G&&n(0,j=G.userExpanded),"$$scope"in G&&n(37,p=G.$$scope)},s.$$.update=()=>{512&s.$$.dirty[0]&&(n(15,e=l.currentConversationModel),u(),u=oe(e,G=>n(8,a=G))),268435968&s.$$.dirty[0]&&n(27,r=l.flags.enableEditableHistory&&!o),134218184&s.$$.dirty[0]&&n(14,i=O&&r&&H!==void 0&&H.rawText.trim()!==""&&H.rawText!==M&&H.richTextJsonRepr!==M&&!a.awaitingReply&&!ts.hasLoadingImages(H.richTextJsonRepr))},n(28,o=!!(x!=null&&x.isActive)),n(13,c={Enter:Q,Escape:ut}),[j,A,C,M,S,X,O,H,a,l,J,U,mt,c,i,e,f,et,Q,ut,function(G){G!==H&&n(7,H=G)},function(G){Z=G.current},()=>U==null?void 0:U.requestFocus(),L,I,()=>{et()},function(){return mt},r,o,m,function(G){hn.call(this,s,G)},()=>{n(0,j=!0),X(!1)},G=>{A&&G&&a.updateChatItem(A,{rich_text_json_repr:G})},()=>O,function(G){Gt[G?"unshift":"push"](()=>{J=G,n(10,J)})},function(G){Gt[G?"unshift":"push"](()=>{U=G,n(11,U)})},function(G){Gt[G?"unshift":"push"](()=>{mt=G,n(12,mt)})},p]}class p5 extends ct{constructor(t){super(),lt(this,t,m5,d5,it,{requestId:1,placeholder:2,content:3,collapsed:4,onSubmitEdit:23,onCancelEdit:24,setIsCollapsed:5,userExpanded:0,requestStartEdit:25,getEditorContainer:26},null,[-1,-1])}get requestStartEdit(){return this.$$.ctx[25]}get getEditorContainer(){return this.$$.ctx[26]}}const po=class po{constructor(t){$t(this,"_tipTapExtension");$t(this,"_resizeObserver");$t(this,"_checkHeight",t=>{var e,o;const n=t.getBoundingClientRect().height;(o=(e=this._options).onResize)==null||o.call(e,n)});$t(this,"_setResizeObserver",t=>{var e;const n=(e=t.view)==null?void 0:e.dom;n&&(this._resizeObserver=new ResizeObserver(o=>{for(const r of o)this._checkHeight(r.target)}),this._resizeObserver.observe(n),this._checkHeight(n))});$t(this,"_clearResizeObserver",()=>{var t;(t=this._resizeObserver)==null||t.disconnect(),this._resizeObserver=void 0});$t(this,"updateOptions",t=>{this._options={...this._options,...t}});this._options=t;const n=po._getNextPluginId(),e=this._setResizeObserver,o=this._clearResizeObserver,r=this._checkHeight;this._tipTapExtension=Vg.create({name:n,onCreate:function(){var c;((c=this.editor.view)==null?void 0:c.dom)&&(e(this.editor),this.editor.on("destroy",o))},onUpdate:function(){var c;const i=(c=this.editor.view)==null?void 0:c.dom;i&&r(i)},onDestroy:()=>{var i;(i=this._resizeObserver)==null||i.disconnect(),this._resizeObserver=void 0}})}get tipTapExtension(){return this._tipTapExtension}};$t(po,"_sequenceId",0),$t(po,"RESIZE_OBSERVER_PLUGIN_KEY_BASE","augment-resize-observer-plugin-{}"),$t(po,"_getSequenceId",()=>po._sequenceId++),$t(po,"_getNextPluginId",()=>{const t=po._getSequenceId().toString();return po.RESIZE_OBSERVER_PLUGIN_KEY_BASE.replace("{}",t)});let Yi=po;function f5(s,t,n){let{height:e=0}=t;const o=a=>{n(0,e=a)},r=Mt(li.CONTEXT_KEY),i=new Yi({onResize:o}),c=r.pluginManager.registerPlugin(i);return sr(c),s.$$set=a=>{"height"in a&&n(0,e=a.height)},i.updateOptions({onResize:o}),[e]}let g5=class extends ct{constructor(s){super(),lt(this,s,f5,null,it,{height:0})}};function h5(s){let t,n,e;function o(i){s[21](i)}let r={};return s[6]!==void 0&&(r.height=s[6]),t=new g5({props:r}),Gt.push(()=>ke(t,"height",o)),{c(){g(t.$$.fragment)},m(i,c){h(t,i,c),e=!0},p(i,c){const a={};!n&&64&c&&(n=!0,a.height=i[6],De(()=>n=!1)),t.$set(a)},i(i){e||(d(t.$$.fragment,i),e=!0)},o(i){$(t.$$.fragment,i),e=!1},d(i){v(t,i)}}}function v5(s){let t,n,e;function o(i){s[23](i)}let r={collapsed:s[7],content:s[3]??s[1],requestId:s[2],onSubmitEdit:s[13],onCancelEdit:s[5],setIsCollapsed:s[11],$$slots:{default:[h5]},$$scope:{ctx:s}};return s[8]!==void 0&&(r.userExpanded=s[8]),t=new p5({props:r}),s[22](t),Gt.push(()=>ke(t,"userExpanded",o)),{c(){g(t.$$.fragment)},m(i,c){h(t,i,c),e=!0},p(i,c){const a={};128&c&&(a.collapsed=i[7]),10&c&&(a.content=i[3]??i[1]),4&c&&(a.requestId=i[2]),32&c&&(a.onCancelEdit=i[5]),268435520&c&&(a.$$scope={dirty:c,ctx:i}),!n&&256&c&&(n=!0,a.userExpanded=i[8],De(()=>n=!1)),t.$set(a)},i(i){e||(d(t.$$.fragment,i),e=!0)},o(i){$(t.$$.fragment,i),e=!1},d(i){s[22](null),v(t,i)}}}function w5(s){let t,n,e;return n=new zf({props:{items:s[10]}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"slot","edit"),k(t,"class","c-user-msg__actions svelte-1dv083n")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};1024&r&&(i.items=o[10]),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function y5(s){let t,n,e,o;return t=new Zi({props:{timestamp:s[4],$$slots:{edit:[w5],content:[v5]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(r,i){h(t,r,i),n=!0,e||(o=[Et(window,"keydown",yo("Escape",s[12])),Et(window,"mousedown",s[12])],e=!0)},p(r,[i]){const c={};16&i&&(c.timestamp=r[4]),268437486&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){v(t,r),e=!1,Ye(o)}}}function x5(s,t,n){let e,o,r,i,c,a,l,u=N,m=()=>(u(),u=oe(p,Z=>n(20,l=Z)),p);s.$$.on_destroy.push(()=>u());let{chatModel:p}=t;m();let{msg:f}=t,{requestId:x}=t,{richTextJsonRepr:A}=t,{timestamp:C}=t,{onStartEdit:M=()=>{}}=t,{onAcceptEdit:S=()=>{}}=t,{onCancelEdit:L=()=>{}}=t;const I=Mt(on.key);let X=!1,j=!1;async function H(Z){await ho(),n(7,X=Z&&r&&!j)}const J=Z=>{c&&x&&(H(!1),O==null||O.requestStartEdit(),M(),Z==null||Z.stopPropagation())},U=async Z=>{x&&(await navigator.clipboard.writeText(x),Z.stopPropagation())};let O;return s.$$set=Z=>{"chatModel"in Z&&m(n(0,p=Z.chatModel)),"msg"in Z&&n(1,f=Z.msg),"requestId"in Z&&n(2,x=Z.requestId),"richTextJsonRepr"in Z&&n(3,A=Z.richTextJsonRepr),"timestamp"in Z&&n(4,C=Z.timestamp),"onStartEdit"in Z&&n(14,M=Z.onStartEdit),"onAcceptEdit"in Z&&n(15,S=Z.onAcceptEdit),"onCancelEdit"in Z&&n(5,L=Z.onCancelEdit)},s.$$.update=()=>{var Z,et;1048580&s.$$.dirty&&n(19,o=x===void 0||x===((et=(Z=l==null?void 0:l.currentConversationModel)==null?void 0:Z.lastExchange)==null?void 0:et.request_id)),524288&s.$$.dirty&&n(16,r=!o&&!0),1310724&s.$$.dirty&&n(17,c=x!==void 0&&l.flags.fullFeatured&&l.flags.enableEditableHistory&&!e),131072&s.$$.dirty&&n(10,a=[...c?[{label:"Copy request ID",action:U,id:"copy-request-id",disabled:!1,icon:Ff,successMessage:"Copied!"},{label:"Edit message",action:J,id:"edit-message",disabled:!1,icon:Tr}]:[]]),65600&s.$$.dirty&&i&&r&&(O!=null&&O.getEditorContainer())&&i&&r&&H(!(X&&i<120)&&i>120)},n(18,e=!!(I!=null&&I.isActive)),n(6,i=0),[p,f,x,A,C,L,i,X,j,O,a,H,()=>{},function(Z,et){if(!x)return;p.currentConversationModel.clearHistoryFrom(x);const Q=l.flags.enableChatMultimodal&&Z.richTextJsonRepr?p.currentConversationModel.createStructuredRequestNodes(Z.richTextJsonRepr):void 0;p.currentConversationModel.sendExchange({request_message:Z.rawText,rich_text_json_repr:Z.richTextJsonRepr,status:Ve.draft,mentioned_items:et,structured_request_nodes:Q}),S()},M,S,r,c,e,o,l,function(Z){i=Z,n(6,i)},function(Z){Gt[Z?"unshift":"push"](()=>{O=Z,n(9,O)})},function(Z){j=Z,n(8,j)}]}class b5 extends ct{constructor(t){super(),lt(this,t,x5,y5,it,{chatModel:0,msg:1,requestId:2,richTextJsonRepr:3,timestamp:4,onStartEdit:14,onAcceptEdit:15,onCancelEdit:5})}}const pu=s=>s.reduce((t,n,e)=>(ai(n)&&Fp(n)&&t.length>0||Xr(n)&&t.length>0?t[t.length-1].push({turn:n,idx:e}):t.push([{turn:n,idx:e}]),t),[]),_5=(s,t,n,e)=>{const o={retryMessage:void 0,showGeneratingResponse:!1,showResumingRemoteAgent:!1,showAwaitingUserInput:!1,showRunningSpacer:!1,showStopped:!1,remoteAgentErrorConfig:void 0,showPaused:!1};if(t===go.running){const r=s==null?void 0:s.lastExchange;if(r!=null&&r.isRetriable&&(r!=null&&r.display_error_message))o.retryMessage=r.display_error_message;else if(n||e.isActive){const i=e.isActive?e.getLastToolUseState():s.getLastToolUseState();if(e.isActive){const c=e.currentAgent;(c==null?void 0:c.workspace_status)===Jr.workspaceResuming?o.showResumingRemoteAgent=!0:i.phase!==ye.running?o.showGeneratingResponse=!0:o.showRunningSpacer=!0}else i.phase!==ye.running?o.showGeneratingResponse=!0:o.showRunningSpacer=!0}else o.showGeneratingResponse=!0}else t===go.awaitingUserAction?(o.showAwaitingUserInput=!0,o.showRunningSpacer=!0):((r,i)=>{var m;const c=(m=r==null?void 0:r.lastExchange)==null?void 0:m.status,a=c===Ve.cancelled,l=r==null?void 0:r.getLastToolUseState().phase,u=l===ye.cancelled;return!i.isActive&&(a||u)})(s,e)&&(o.showStopped=!0);if(e.isActive){const r=e.currentAgent;(r==null?void 0:r.workspace_status)===Jr.workspacePaused&&(o.showPaused=!0)}return o},C5=(s,t,n,e,o=!1)=>{const r=s.currentConversationModel,i=((f,x)=>x.isActive?x.getCurrentChatHistory():f.chatHistory.filter(A=>ai(A)||Pp(A)||vg(A)||Np(A)||ea(A)||Oi(A)||Xr(A)))(r,e),c=pu(i)??[],a=o?(f=>{var A,C,M;if(!Array.isArray(f))return console.warn("groupByToolUses received non-array input:",f),[];const x=structuredClone(f);for(let S=0;S<x.length;S++){const L=x[S];if(dc(L)&&L){L.structured_output_nodes=(A=L.structured_output_nodes)==null?void 0:A.map(I=>({...I,requestId:L.request_id}));for(let I=S+1;I<x.length;I++){const X=x[I],j=!X.response_text;if(!(X.response_text&&X.response_text.length<100)&&!j||!dc(X))break;{const H=(C=X.structured_output_nodes)==null?void 0:C.map(J=>({...J,requestId:X.request_id}));(M=L.structured_output_nodes)==null||M.push(...H??[]),x.splice(I,1),I--}}}}return pu(x)})(i):c,l=((f,x)=>{if(x.isActive){const A=x.currentAgent;return(A==null?void 0:A.workspace_status)===Jr.workspaceResuming||x.isCurrentAgentRunning?go.running:go.notRunning}return f})(t,e),u=_5(r,l,n,e),m=!e.isActive,p=!!e.isActive;if(e.isActive){if(e.sendMessageError&&e.currentAgentId){const f=e.currentAgentId,x=e.sendMessageError;u.remoteAgentErrorConfig={error:x,onRetry:x.canRetry&&x.failedExchangeId?()=>e.retryFailedMessage(f,x.failedExchangeId):void 0,onDelete:x.type===Bp.agentFailed?()=>e.deleteAgent(f):void 0}}else if(e.agentChatHistoryError&&e.currentAgentId){const f=e.currentAgentId;u.remoteAgentErrorConfig={error:e.agentChatHistoryError,onRetry:()=>e.refreshAgentChatHistory(f)}}}return{chatHistory:Array.isArray(i)?i:[],groupedChatHistory:o?a:c,lastGroupConfig:u,doShowFloatingButtons:m,doShowAgentSetupLogs:p}};function fu(s){let t,n;return t=new b5({props:{msg:s[1].request_message??"",richTextJsonRepr:s[11],chatModel:s[0],requestId:s[9],timestamp:s[1].timestamp}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.msg=e[1].request_message??""),2048&o&&(r.richTextJsonRepr=e[11]),1&o&&(r.chatModel=e[0]),512&o&&(r.requestId=e[9]),2&o&&(r.timestamp=e[1].timestamp),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function gu(s){let t,n,e;function o(a,l){return a[1].display_error_message?k5:a[1].response_text&&a[1].response_text.length>0?M5:A5}let r=o(s),i=r(s),c=s[9]&&hu(s);return{c(){t=D("div"),i.c(),n=z(),c&&c.c(),k(t,"class","c-msg-list__turn-response-failure svelte-1d1manc")},m(a,l){_(a,t,l),i.m(t,null),P(t,n),c&&c.m(t,null),e=!0},p(a,l){r===(r=o(a))&&i?i.p(a,l):(i.d(1),i=r(a),i&&(i.c(),i.m(t,n))),a[9]?c?(c.p(a,l),512&l&&d(c,1)):(c=hu(a),c.c(),d(c,1),c.m(t,null)):c&&(Y(),$(c,1,1,()=>{c=null}),K())},i(a){e||(d(c),e=!0)},o(a){$(c),e=!1},d(a){a&&y(t),i.d(),c&&c.d()}}}function A5(s){let t,n,e,o;return{c(){t=V(`We encountered an issue sending your message. Please
        `),n=D("button"),n.textContent="try again",k(n,"class","svelte-1d1manc")},m(r,i){_(r,t,i),_(r,n,i),e||(o=Et(n,"click",qo(s[15])),e=!0)},p:N,d(r){r&&(y(t),y(n)),e=!1,o()}}}function M5(s){let t,n,e,o,r;return{c(){t=V(`Connection lost. Please
        `),n=D("button"),n.textContent="try again",e=V(`
        to restart the conversation!`),k(n,"class","svelte-1d1manc")},m(i,c){_(i,t,c),_(i,n,c),_(i,e,c),o||(r=Et(n,"click",qo(s[15])),o=!0)},p:N,d(i){i&&(y(t),y(n),y(e)),o=!1,r()}}}function k5(s){let t,n=s[1].display_error_message+"";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){2&o&&n!==(n=e[1].display_error_message+"")&&ht(t,n)},d(e){e&&y(t)}}}function hu(s){let t,n,e,o,r,i,c,a;function l(m){s[21](m)}let u={onOpenChange:s[16],content:s[7],triggerOn:[te.Hover],$$slots:{default:[T5]},$$scope:{ctx:s}};return s[8]!==void 0&&(u.requestClose=s[8]),i=new Nt({props:u}),Gt.push(()=>ke(i,"requestClose",l)),{c(){t=D("div"),n=D("span"),e=V("Request ID: "),o=V(s[9]),r=z(),g(i.$$.fragment),k(t,"class","c-msg-list__request-id svelte-1d1manc")},m(m,p){_(m,t,p),P(t,n),P(n,e),P(n,o),P(t,r),h(i,t,null),a=!0},p(m,p){(!a||512&p)&&ht(o,m[9]);const f={};128&p&&(f.content=m[7]),16777216&p&&(f.$$scope={dirty:p,ctx:m}),!c&&256&p&&(c=!0,f.requestClose=m[8],De(()=>c=!1)),i.$set(f)},i(m){a||(d(i.$$.fragment,m),a=!0)},o(m){$(i.$$.fragment,m),a=!1},d(m){m&&y(t),v(i)}}}function S5(s){let t,n;return t=new ma({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function T5(s){let t,n;return t=new se({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[S5]},$$scope:{ctx:s}}}),t.$on("click",s[17]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};16777216&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function E5(s){let t,n,e,o,r,i=!s[10]&&!Oi(s[1])&&!s[12],c=i&&fu(s);e=new Of({props:{chatModel:s[6],turn:s[1],turnIndex:s[3],requestId:s[9],isLastTurn:s[2],group:s[5],showFooter:$c(s[5],s[1]),markdown:s[1].response_text??"",messageListContainer:s[4]}});let a=s[1].status===Ve.failed&&gu(s);return{c(){t=D("div"),c&&c.c(),n=z(),g(e.$$.fragment),o=z(),a&&a.c(),k(t,"class","c-msg-list__turn svelte-1d1manc")},m(l,u){_(l,t,u),c&&c.m(t,null),P(t,n),h(e,t,null),P(t,o),a&&a.m(t,null),r=!0},p(l,[u]){5122&u&&(i=!l[10]&&!Oi(l[1])&&!l[12]),i?c?(c.p(l,u),5122&u&&d(c,1)):(c=fu(l),c.c(),d(c,1),c.m(t,n)):c&&(Y(),$(c,1,1,()=>{c=null}),K());const m={};64&u&&(m.chatModel=l[6]),2&u&&(m.turn=l[1]),8&u&&(m.turnIndex=l[3]),512&u&&(m.requestId=l[9]),4&u&&(m.isLastTurn=l[2]),32&u&&(m.group=l[5]),34&u&&(m.showFooter=$c(l[5],l[1])),2&u&&(m.markdown=l[1].response_text??""),16&u&&(m.messageListContainer=l[4]),e.$set(m),l[1].status===Ve.failed?a?(a.p(l,u),2&u&&d(a,1)):(a=gu(l),a.c(),d(a,1),a.m(t,null)):a&&(Y(),$(a,1,1,()=>{a=null}),K())},i(l){r||(d(c),d(e.$$.fragment,l),d(a),r=!0)},o(l){$(c),$(e.$$.fragment,l),$(a),r=!1},d(l){l&&y(t),c&&c.d(),v(e),a&&a.d()}}}function I5(s,t,n){let e,o,r,i,c,a,l,u,m,p,f=N,x=()=>(f(),f=oe(C,O=>n(6,u=O)),C),A=N;s.$$.on_destroy.push(()=>f()),s.$$.on_destroy.push(()=>A());let{chatModel:C}=t;x();let{turn:M}=t,{isLastTurn:S=!1}=t,{turnIndex:L=0}=t,{messageListContainer:I}=t,{group:X}=t;const j=Mt(on.key);kt(s,j,O=>n(20,p=O));let H,J="Copy request ID",U=()=>{};return s.$$set=O=>{"chatModel"in O&&x(n(0,C=O.chatModel)),"turn"in O&&n(1,M=O.turn),"isLastTurn"in O&&n(2,S=O.isLastTurn),"turnIndex"in O&&n(3,L=O.turnIndex),"messageListContainer"in O&&n(4,I=O.messageListContainer),"group"in O&&n(5,X=O.group)},s.$$.update=()=>{var O;2&s.$$.dirty&&n(9,e=M.request_id),64&s.$$.dirty&&(n(13,o=u==null?void 0:u.currentConversationModel),A(),A=oe(o,Z=>n(23,m=Z))),1048576&s.$$.dirty&&n(19,r=(p==null?void 0:p.isActive)&&((O=p==null?void 0:p.currentAgent)==null?void 0:O.is_setup_script_agent)===!0),8&s.$$.dirty&&n(18,i=L===0),786432&s.$$.dirty&&n(12,c=r&&i),66&s.$$.dirty&&n(11,a=u.flags.enableRichTextHistory?M.rich_text_json_repr:void 0),2&s.$$.dirty&&n(10,l=Fp(M))},[C,M,S,L,I,X,u,J,U,e,l,a,c,o,j,()=>{m.resendTurn(M)},function(O){O||(clearTimeout(H),H=void 0,n(7,J="Copy request ID"))},async function(){e&&(await navigator.clipboard.writeText(e),n(7,J="Copied!"),clearTimeout(H),H=setTimeout(U,1500))},i,r,p,function(O){U=O,n(8,U)}]}class L5 extends ct{constructor(t){super(),lt(this,t,I5,E5,it,{chatModel:0,turn:1,isLastTurn:2,turnIndex:3,messageListContainer:4,group:5})}}function R5(s){let t,n,e,o,r,i,c;const a=s[15].default,l=Xt(a,s,s[14],null);return{c(){t=D("div"),l&&l.c(),k(t,"class",n=wr(`c-msg-list__item ${s[5]}`)+" svelte-1s0uz2w"),k(t,"style",e=`min-height: calc(${s[4]}px - (var(--msg-list-item-spacing) * 2));`),k(t,"data-request-id",s[6])},m(u,m){_(u,t,m),l&&l.m(t,null),s[16](t),r=!0,i||(c=Lo(o=Bf.call(null,t,{follow:!s[2]&&s[1],scrollContainer:s[3],disableScrollUp:!0,smooth:!0,bottom:!0})),i=!0)},p(u,[m]){l&&l.p&&(!r||16384&m)&&Jt(l,a,u,u[14],r?Qt(a,u[14],m,null):Zt(u[14]),null),(!r||32&m&&n!==(n=wr(`c-msg-list__item ${u[5]}`)+" svelte-1s0uz2w"))&&k(t,"class",n),(!r||16&m&&e!==(e=`min-height: calc(${u[4]}px - (var(--msg-list-item-spacing) * 2));`))&&k(t,"style",e),(!r||64&m)&&k(t,"data-request-id",u[6]),o&&xe(o.update)&&14&m&&o.update.call(null,{follow:!u[2]&&u[1],scrollContainer:u[3],disableScrollUp:!0,smooth:!0,bottom:!0})},i(u){r||(d(l,u),r=!0)},o(u){$(l,u),r=!1},d(u){u&&y(t),l&&l.d(u),s[16](null),i=!1,c()}}}function D5(s,t,n){let e,o,r,i,c=N,a=N,l=()=>(a(),a=oe(f,j=>n(13,i=j)),f);s.$$.on_destroy.push(()=>c()),s.$$.on_destroy.push(()=>a());let{$$slots:u={},$$scope:m}=t,{requestId:p}=t,{chatModel:f}=t;l();let x,{isLastItem:A=!1}=t,{userControlsScroll:C=!1}=t,{releaseScroll:M=()=>{}}=t,{messageListContainer:S}=t,{minHeight:L}=t,{class:I=""}=t,{dataRequestId:X}=t;return En(()=>{S&&A&&xp(S,{smooth:!0,onScrollFinish:M})}),s.$$set=j=>{"requestId"in j&&n(9,p=j.requestId),"chatModel"in j&&l(n(0,f=j.chatModel)),"isLastItem"in j&&n(1,A=j.isLastItem),"userControlsScroll"in j&&n(2,C=j.userControlsScroll),"releaseScroll"in j&&n(10,M=j.releaseScroll),"messageListContainer"in j&&n(3,S=j.messageListContainer),"minHeight"in j&&n(4,L=j.minHeight),"class"in j&&n(5,I=j.class),"dataRequestId"in j&&n(6,X=j.dataRequestId),"$$scope"in j&&n(14,m=j.$$scope)},s.$$.update=()=>{var j,H;8192&s.$$.dirty&&(n(8,e=(j=i==null?void 0:i.currentConversationModel)==null?void 0:j.focusModel),c(),c=oe(e,J=>n(12,r=J))),4608&s.$$.dirty&&n(11,o=((H=r.focusedItem)==null?void 0:H.request_id)===p),2048&s.$$.dirty&&o&&S&&x&&Hf(S,x,{topBuffer:0,smooth:!0,scrollDuration:100,onScrollFinish:M})},[f,A,C,S,L,I,X,x,e,p,M,o,r,i,m,u,function(j){Gt[j?"unshift":"push"](()=>{x=j,n(7,x)})}]}class P5 extends ct{constructor(t){super(),lt(this,t,D5,R5,it,{requestId:9,chatModel:0,isLastItem:1,userControlsScroll:2,releaseScroll:10,messageListContainer:3,minHeight:4,class:5,dataRequestId:6})}}function N5(s){let t;return{c(){t=V("Generating response...")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function vu(s){let t,n;return t=new ao.Root({props:{color:"neutral",size:1,$$slots:{default:[z5]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1029&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function F5(s){let t,n;return{c(){t=D("span"),n=V(s[2]),k(t,"class","c-gen-response__timer svelte-148snxl"),xt(t,"is_minutes",s[0]>=60)},m(e,o){_(e,t,o),P(t,n)},p(e,o){4&o&&ht(n,e[2]),1&o&&xt(t,"is_minutes",e[0]>=60)},d(e){e&&y(t)}}}function z5(s){let t,n;return t=new Ot({props:{type:"monospace",size:1,weight:"light",color:"secondary",$$slots:{default:[F5]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1029&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function O5(s){let t,n,e,o,r,i,c;e=new Tn({props:{size:1}}),r=new Ot({props:{size:1,weight:"light",color:"secondary",$$slots:{default:[N5]},$$scope:{ctx:s}}});let a=s[1]&&vu(s);return{c(){t=D("div"),n=D("span"),g(e.$$.fragment),o=z(),g(r.$$.fragment),i=z(),a&&a.c(),k(n,"class","c-gen-response__text svelte-148snxl"),k(t,"class","c-gen-response svelte-148snxl")},m(l,u){_(l,t,u),P(t,n),h(e,n,null),P(n,o),h(r,n,null),P(t,i),a&&a.m(t,null),c=!0},p(l,[u]){const m={};1024&u&&(m.$$scope={dirty:u,ctx:l}),r.$set(m),l[1]?a?(a.p(l,u),2&u&&d(a,1)):(a=vu(l),a.c(),d(a,1),a.m(t,null)):a&&(Y(),$(a,1,1,()=>{a=null}),K())},i(l){c||(d(e.$$.fragment,l),d(r.$$.fragment,l),d(a),c=!0)},o(l){$(e.$$.fragment,l),$(r.$$.fragment,l),$(a),c=!1},d(l){l&&y(t),v(e),v(r),a&&a.d()}}}function B5(s,t,n){let e,o,r,{timeToTimerMs:i=5e3}=t,c=0,a=Date.now(),l=!1;function u(){n(0,c=Math.floor((Date.now()-a)/1e3))}function m(){n(1,l=!0),u(),r=setInterval(u,1e3)}return En(function(){return o=setTimeout(m,i),a=Date.now(),()=>{n(0,c=0),n(1,l=!1),clearTimeout(o),clearInterval(r)}}),s.$$set=p=>{"timeToTimerMs"in p&&n(3,i=p.timeToTimerMs)},s.$$.update=()=>{1&s.$$.dirty&&n(2,e=function(p){return p>=60?`${Math.floor(p/60)}:${String(p%60).padStart(2,"0")}`:`0:${String(p).padStart(2,"0")}`}(c))},[c,l,e,i]}class E1 extends ct{constructor(t){super(),lt(this,t,B5,O5,it,{timeToTimerMs:3})}}class To{constructor(t){$t(this,"type","plainText");this.text=t}}class Rs{constructor(t){$t(this,"type","specialBlock");this.text=t}}function Ki(s){return s.map(t=>t.text).join("")}function H5(s){let t,n,e,o,r=(!s[0].status||s[0].status===Ve.success)&&s[4]===Ki(s[3]);t=new ar({props:{renderers:s[5],markdown:s[1]+s[4]}});let i=r&&wu(s);return{c(){g(t.$$.fragment),n=z(),i&&i.c(),e=gt()},m(c,a){h(t,c,a),_(c,n,a),i&&i.m(c,a),_(c,e,a),o=!0},p(c,a){const l={};18&a&&(l.markdown=c[1]+c[4]),t.$set(l),25&a&&(r=(!c[0].status||c[0].status===Ve.success)&&c[4]===Ki(c[3])),r?i?(i.p(c,a),25&a&&d(i,1)):(i=wu(c),i.c(),d(i,1),i.m(e.parentNode,e)):i&&(Y(),$(i,1,1,()=>{i=null}),K())},i(c){o||(d(t.$$.fragment,c),d(i),o=!0)},o(c){$(t.$$.fragment,c),$(i),o=!1},d(c){c&&(y(n),y(e)),v(t,c),i&&i.d(c)}}}function U5(s){let t;function n(r,i){return r[0].display_error_message?V5:r[0].response_text&&r[0].response_text.length>0?W5:j5}let e=n(s),o=e(s);return{c(){t=D("div"),o.c(),k(t,"class","c-msg-failure svelte-9a9fi8")},m(r,i){_(r,t,i),o.m(t,null)},p(r,i){e===(e=n(r))&&o?o.p(r,i):(o.d(1),o=e(r),o&&(o.c(),o.m(t,null)))},i:N,o:N,d(r){r&&y(t),o.d()}}}function q5(s){let t,n;return t=new E1({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function wu(s){let t;const n=s[7].default,e=Xt(n,s,s[8],null);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||256&r)&&Jt(e,n,o,o[8],t?Qt(n,o[8],r,null):Zt(o[8]),null)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function j5(s){let t,n,e=s[2]&&yu(s);return{c(){t=V("We encountered an issue sending your message."),e&&e.c(),n=V(".")},m(o,r){_(o,t,r),e&&e.m(o,r),_(o,n,r)},p(o,r){o[2]?e?e.p(o,r):(e=yu(o),e.c(),e.m(n.parentNode,n)):e&&(e.d(1),e=null)},d(o){o&&(y(t),y(n)),e&&e.d(o)}}}function W5(s){let t,n,e=s[2]&&xu(s);return{c(){t=V("Connection lost."),e&&e.c(),n=gt()},m(o,r){_(o,t,r),e&&e.m(o,r),_(o,n,r)},p(o,r){o[2]?e?e.p(o,r):(e=xu(o),e.c(),e.m(n.parentNode,n)):e&&(e.d(1),e=null)},d(o){o&&(y(t),y(n)),e&&e.d(o)}}}function V5(s){let t,n=s[0].display_error_message+"";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){1&o&&n!==(n=e[0].display_error_message+"")&&ht(t,n)},d(e){e&&y(t)}}}function yu(s){let t,n,e,o;return{c(){t=V(`Please
            `),n=D("button"),n.textContent="try again",k(n,"class","svelte-9a9fi8")},m(r,i){_(r,t,i),_(r,n,i),e||(o=Et(n,"click",qo(function(){xe(s[2])&&s[2].apply(this,arguments)})),e=!0)},p(r,i){s=r},d(r){r&&(y(t),y(n)),e=!1,o()}}}function xu(s){let t,n,e,o,r;return{c(){t=V(`Please
            `),n=D("button"),n.textContent="try again",e=V("."),k(n,"class","svelte-9a9fi8")},m(i,c){_(i,t,c),_(i,n,c),_(i,e,c),o||(r=Et(n,"click",qo(function(){xe(s[2])&&s[2].apply(this,arguments)})),o=!0)},p(i,c){s=i},d(i){i&&(y(t),y(n),y(e)),o=!1,r()}}}function G5(s){let t,n,e,o;const r=[q5,U5,H5],i=[];function c(a,l){return(!a[0].status||a[0].status===Ve.sent)&&a[4].length<=0?0:a[0].status===Ve.failed?1:2}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?i[t].p(a,l):(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function Y5(s){let t,n;return t=new Zi({props:{isAugment:!0,$$slots:{content:[G5]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,[o]){const r={};287&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function K5(s,t,n){let e,o,{$$slots:r={},$$scope:i}=t,{turn:c}=t,{preamble:a=""}=t,{resendTurn:l}=t,{markdownBlocks:u=[]}=t,m={code:Ag,codespan:Mg,link:Uf};return En(()=>{if(c.seen_state===js.seen)return void n(0,c.response_text=Ki(e),c);let p=Date.now();const f=function*(C){for(const M of C)if(M.type==="specialBlock")yield M.text;else for(const S of M.text)yield S}(e);let x=f.next();const A=()=>{let C=Date.now();const M=Math.round((C-p)/8);let S="";for(let L=0;L<M&&!x.done;L++)S+=x.value,x=f.next();n(0,c.response_text+=S,c),p=C,x.done||requestAnimationFrame(A)};A()}),s.$$set=p=>{"turn"in p&&n(0,c=p.turn),"preamble"in p&&n(1,a=p.preamble),"resendTurn"in p&&n(2,l=p.resendTurn),"markdownBlocks"in p&&n(6,u=p.markdownBlocks),"$$scope"in p&&n(8,i=p.$$scope)},s.$$.update=()=>{1&s.$$.dirty&&n(0,c.response_text=c.response_text??"",c),65&s.$$.dirty&&n(3,e=c.response_text?[new To(c.response_text)]:u),1&s.$$.dirty&&n(4,o=c.response_text??"")},[c,a,l,e,o,m,u,r,i]}class wa extends ct{constructor(t){super(),lt(this,t,K5,Y5,it,{turn:0,preamble:1,resendTurn:2,markdownBlocks:6})}}function X5(s){let t,n,e,o;return t=new kr.Content({props:{content:s[2]}}),e=new va({props:{requestEditorFocus:s[4]}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p:N,i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function J5(s){let t,n,e={slot:"content",$$slots:{default:[X5]},$$scope:{ctx:s}};return t=new kr.Root({props:e}),s[7](t),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,r){const i={};512&r&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){s[7](null),v(t,o)}}}function Z5(s){let t,n,e,o;return t=new Zi({props:{$$slots:{content:[J5]},$$scope:{ctx:s}}}),e=new wa({props:{turn:s[1],markdownBlocks:s[3]}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,[i]){const c={};513&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function Q5(s,t,n){let{flagsModel:e}=t,{turn:o}=t;const r={seen_state:o.seen_state,status:Ve.success},i=[[new Rs("[**Chat**](https://docs.augmentcode.com/using-augment/chat)"),new To(": Explore your codebase, get up to speed on unfamiliar code, and work through technical problems using natural language.")],[new Rs("[**Code Completions**](https://docs.augmentcode.com/using-augment/completions)"),new To(": Receive intelligent code suggestions that take your entire codebase into account as you type.")],[new Rs("[**Instructions**](https://docs.augmentcode.com/using-augment/instructions)"),new To(": Use natural language prompts to write or modify code, applied as a diff for your review.")]];e.suggestedEditsAvailable&&i.push([new Rs("[**Suggested Edits**](https://docs.augmentcode.com/using-augment/suggested-edits)"),new To(": Take your completions beyond the cursor and across your workspace.")]);let c,a=[new To(`Welcome to Augment!

Augment can help you understand code, debug issues, and ship faster with its deep understanding of your codebase. Here is what Augment can do for you:

`),...i.flatMap((l,u)=>[new To(`${u+1}. `),...l,new To(`

`)]),new To("Ask questions to learn more! Just remember to tag **@Augment** when asking about Augment's capabilities.")];return s.$$set=l=>{"flagsModel"in l&&n(5,e=l.flagsModel),"turn"in l&&n(6,o=l.turn)},[c,r,{type:"doc",content:[{type:"paragraph",content:[{type:"text",text:"What can "},{type:"mention",attrs:{id:"Augment",label:"Augment",data:{id:"Augment",label:"Augment"}}},{type:"text",text:" do?"}]}]},a,function(){c==null||c.requestFocus()},e,o,function(l){Gt[l?"unshift":"push"](()=>{c=l,n(0,c)})}]}class tx extends ct{constructor(t){super(),lt(this,t,Q5,Z5,it,{flagsModel:5,turn:6})}}function ex(s){let t,n;return{c(){t=ne("svg"),n=ne("path"),k(n,"d","M6.04995 2.74998C6.04995 2.44623 5.80371 2.19998 5.49995 2.19998C5.19619 2.19998 4.94995 2.44623 4.94995 2.74998V12.25C4.94995 12.5537 5.19619 12.8 5.49995 12.8C5.80371 12.8 6.04995 12.5537 6.04995 12.25V2.74998ZM10.05 2.74998C10.05 2.44623 9.80371 2.19998 9.49995 2.19998C9.19619 2.19998 8.94995 2.44623 8.94995 2.74998V12.25C8.94995 12.5537 9.19619 12.8 9.49995 12.8C9.80371 12.8 10.05 12.5537 10.05 12.25V2.74998Z"),k(n,"fill","currentColor"),k(n,"fill-rule","evenodd"),k(n,"clip-rule","evenodd"),k(t,"width","15"),k(t,"height","15"),k(t,"viewBox","0 0 15 15"),k(t,"fill","none"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){_(e,t,o),P(t,n)},p:N,i:N,o:N,d(e){e&&y(t)}}}class nx extends ct{constructor(t){super(),lt(this,t,null,ex,it,{})}}function ox(s){let t,n,e,o,r;return n=new nx({}),{c(){t=D("span"),g(n.$$.fragment),e=V(`
  Waiting for user input`),o=V(s[0]),k(t,"class","c-gen-response svelte-5is5us")},m(i,c){_(i,t,c),h(n,t,null),P(t,e),P(t,o),r=!0},p(i,[c]){(!r||1&c)&&ht(o,i[0])},i(i){r||(d(n.$$.fragment,i),r=!0)},o(i){$(n.$$.fragment,i),r=!1},d(i){i&&y(t),v(n)}}}function rx(s,t,n){let e=".";return En(()=>{const o=setInterval(()=>{n(0,e=e.length>=3?".":e+".")},500);return()=>clearInterval(o)}),[e]}class sx extends ct{constructor(t){super(),lt(this,t,rx,ox,it,{})}}function ix(s){let t;return{c(){t=V("Resuming remote agent...")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function bu(s){let t,n;return t=new ao.Root({props:{color:"neutral",size:1,$$slots:{default:[cx]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1029&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function ax(s){let t,n;return{c(){t=D("span"),n=V(s[2]),k(t,"class","c-resuming-agent__timer svelte-16pyinb"),xt(t,"is_minutes",s[0]>=60)},m(e,o){_(e,t,o),P(t,n)},p(e,o){4&o&&ht(n,e[2]),1&o&&xt(t,"is_minutes",e[0]>=60)},d(e){e&&y(t)}}}function cx(s){let t,n;return t=new Ot({props:{type:"monospace",size:1,weight:"light",color:"secondary",$$slots:{default:[ax]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1029&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function lx(s){let t,n,e,o,r,i,c;e=new Tn({props:{size:1}}),r=new Ot({props:{size:1,weight:"light",color:"secondary",$$slots:{default:[ix]},$$scope:{ctx:s}}});let a=s[1]&&bu(s);return{c(){t=D("div"),n=D("span"),g(e.$$.fragment),o=z(),g(r.$$.fragment),i=z(),a&&a.c(),k(n,"class","c-resuming-agent__text svelte-16pyinb"),k(t,"class","c-resuming-agent svelte-16pyinb")},m(l,u){_(l,t,u),P(t,n),h(e,n,null),P(n,o),h(r,n,null),P(t,i),a&&a.m(t,null),c=!0},p(l,[u]){const m={};1024&u&&(m.$$scope={dirty:u,ctx:l}),r.$set(m),l[1]?a?(a.p(l,u),2&u&&d(a,1)):(a=bu(l),a.c(),d(a,1),a.m(t,null)):a&&(Y(),$(a,1,1,()=>{a=null}),K())},i(l){c||(d(e.$$.fragment,l),d(r.$$.fragment,l),d(a),c=!0)},o(l){$(e.$$.fragment,l),$(r.$$.fragment,l),$(a),c=!1},d(l){l&&y(t),v(e),v(r),a&&a.d()}}}function ux(s,t,n){let e,o,r,{timeToTimerMs:i=5e3}=t,c=0,a=Date.now(),l=!1;function u(){n(0,c=Math.floor((Date.now()-a)/1e3))}function m(){n(1,l=!0),u(),r=setInterval(u,1e3)}return En(function(){return o=setTimeout(m,i),a=Date.now(),()=>{n(0,c=0),n(1,l=!1),clearTimeout(o),clearInterval(r)}}),s.$$set=p=>{"timeToTimerMs"in p&&n(3,i=p.timeToTimerMs)},s.$$.update=()=>{1&s.$$.dirty&&n(2,e=function(p){return p>=60?`${Math.floor(p/60)}:${String(p%60).padStart(2,"0")}`:`0:${String(p).padStart(2,"0")}`}(c))},[c,l,e,i]}class dx extends ct{constructor(t){super(),lt(this,t,ux,lx,it,{timeToTimerMs:3})}}function $x(s){let t,n,e,o,r;return n=new Tn({props:{size:1}}),{c(){t=D("span"),g(n.$$.fragment),e=z(),o=V(s[0]),k(t,"class","c-retry-response svelte-1lxm8qk")},m(i,c){_(i,t,c),h(n,t,null),P(t,e),P(t,o),r=!0},p(i,[c]){(!r||1&c)&&ht(o,i[0])},i(i){r||(d(n.$$.fragment,i),r=!0)},o(i){$(n.$$.fragment,i),r=!1},d(i){i&&y(t),v(n)}}}function mx(s,t,n){let{message:e="Retrying..."}=t;return s.$$set=o=>{"message"in o&&n(0,e=o.message)},[e]}class px extends ct{constructor(t){super(),lt(this,t,mx,$x,it,{message:0})}}function fx(s){let t,n,e;return t=new M1({}),{c(){g(t.$$.fragment),n=V(`
    Stopped`)},m(o,r){h(t,o,r),_(o,n,r),e=!0},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){$(t.$$.fragment,o),e=!1},d(o){o&&y(n),v(t,o)}}}function gx(s){let t,n,e;return n=new Ot({props:{size:1,$$slots:{default:[fx]},$$scope:{ctx:s}}}),{c(){t=D("span"),g(n.$$.fragment),k(t,"class","c-stopped svelte-lv19x6")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,[r]){const i={};1&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}class hx extends ct{constructor(t){super(),lt(this,t,null,gx,it,{})}}function vx(s){let t,n;return{c(){t=ne("svg"),n=ne("path"),k(n,"fill-rule","evenodd"),k(n,"clip-rule","evenodd"),k(n,"d","M4.85355 2.14645C5.04882 2.34171 5.04882 2.65829 4.85355 2.85355L3.70711 4H9C11.4853 4 13.5 6.01472 13.5 8.5C13.5 10.9853 11.4853 13 9 13H5C4.72386 13 4.5 12.7761 4.5 12.5C4.5 12.2239 4.72386 12 5 12H9C10.933 12 12.5 10.433 12.5 8.5C12.5 6.567 10.933 5 9 5H3.70711L4.85355 6.14645C5.04882 6.34171 5.04882 6.65829 4.85355 6.85355C4.65829 7.04882 4.34171 7.04882 4.14645 6.85355L2.14645 4.85355C1.95118 4.65829 1.95118 4.34171 2.14645 4.14645L4.14645 2.14645C4.34171 1.95118 4.65829 1.95118 4.85355 2.14645Z"),k(n,"fill","currentColor"),k(t,"width","15"),k(t,"height","15"),k(t,"viewBox","0 0 15 15"),k(t,"fill","none"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){_(e,t,o),P(t,n)},p:N,i:N,o:N,d(e){e&&y(t)}}}class I1 extends ct{constructor(t){super(),lt(this,t,null,vx,it,{})}}function wx(s){let t,n,e;return{c(){t=ne("svg"),n=ne("path"),e=ne("path"),k(n,"fill-rule","evenodd"),k(n,"clip-rule","evenodd"),k(n,"d","M3.1784 5.56111C3.17842 5.85569 3.41722 6.09449 3.71173 6.09444L9.92275 6.09447C10.0585 6.09447 10.1929 6.06857 10.3189 6.01818L13.9947 4.54786C14.1973 4.46681 14.33 4.27071 14.3301 4.05261C14.33 3.83458 14.1973 3.63846 13.9948 3.55744L10.3189 2.08711C10.1929 2.0367 10.0584 2.01083 9.92278 2.01079L3.71173 2.01079C3.41722 2.01084 3.17844 2.24962 3.1784 2.54412L3.1784 5.56111ZM9.92275 5.0278L4.2451 5.02781L4.24509 3.07749L9.92278 3.07745L11.5339 3.72196L12.2527 4.05263C12.2527 4.05263 11.8167 4.25864 11.534 4.38331C10.9139 4.65675 9.92275 5.0278 9.92275 5.0278Z"),k(n,"fill","currentColor"),k(e,"fill-rule","evenodd"),k(e,"clip-rule","evenodd"),k(e,"d","M8.53346 1.59998C8.53346 1.30543 8.29468 1.06665 8.00013 1.06665C7.70558 1.06665 7.4668 1.30543 7.4668 1.59998V3.07746L8.53346 3.07745V1.59998ZM8.53346 5.0278L7.4668 5.0278V14.4C7.4668 14.6945 7.70558 14.9333 8.00013 14.9333C8.29468 14.9333 8.53346 14.6945 8.53346 14.4V5.0278Z"),k(e,"fill","currentColor"),k(t,"width","15"),k(t,"height","15"),k(t,"viewBox","0 0 15 15"),k(t,"fill","none"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(o,r){_(o,t,r),P(t,n),P(t,e)},p:N,i:N,o:N,d(o){o&&y(t)}}}class L1 extends ct{constructor(t){super(),lt(this,t,null,wx,it,{})}}function yx(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return{c(){t=ne("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=dn(t);n=$n(i,!0),i.forEach(y),this.h()},h(){n.a=null,ue(t,o)},m(r,i){mn(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M337 81c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-143 143L97 127c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l80 80c9.4 9.4 24.6 9.4 33.9 0zm104 120c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-247 247L41 295c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9L143 465c9.4 9.4 24.6 9.4 33.9 0z"/>',t)},p(r,[i]){ue(t,o=Ue(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},1&i&&r[0]]))},i:N,o:N,d(r){r&&y(t)}}}function xx(s,t,n){return s.$$set=e=>{n(0,t=It(It({},t),ae(e)))},[t=ae(t)]}class R1 extends ct{constructor(t){super(),lt(this,t,xx,yx,it,{})}}function bx(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return{c(){t=ne("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=dn(t);n=$n(i,!0),i.forEach(y),this.h()},h(){n.a=null,ue(t,o)},m(r,i){mn(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M135 369c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-87-87L424 248c22.1 0 40 17.9 40 40v168c0 13.3 10.7 24 24 24s24-10.7 24-24V288c0-48.6-39.4-88-88-88H81.9l87-87c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L7 207c-9.4 9.4-9.4 24.6 0 33.9z"/>',t)},p(r,[i]){ue(t,o=Ue(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&r[0]]))},i:N,o:N,d(r){r&&y(t)}}}function _x(s,t,n){return s.$$set=e=>{n(0,t=It(It({},t),ae(e)))},[t=ae(t)]}class D1 extends ct{constructor(t){super(),lt(this,t,_x,bx,it,{})}}function Cx(s){let t,n,e;return t=new D1({}),{c(){g(t.$$.fragment),n=V(`
      Discard All`)},m(o,r){h(t,o,r),_(o,n,r),e=!0},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){$(t.$$.fragment,o),e=!1},d(o){o&&y(n),v(t,o)}}}function Ax(s){let t,n;return t=new Nt({props:{triggerOn:[te.Hover],content:s[0]?"Discard all changes":"No changes to undo",$$slots:{default:[Cx]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.content=e[0]?"Discard all changes":"No changes to undo"),32&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Mx(s){let t,n,e;return t=new R1({}),{c(){g(t.$$.fragment),n=V(`
      Keep All`)},m(o,r){h(t,o,r),_(o,n,r),e=!0},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){$(t.$$.fragment,o),e=!1},d(o){o&&y(n),v(t,o)}}}function kx(s){let t,n;return t=new Nt({props:{triggerOn:[te.Hover],content:s[0]?"Keep all changes and clear checkpoints":"No changes to keep",$$slots:{default:[Mx]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.content=e[0]?"Keep all changes and clear checkpoints":"No changes to keep"),32&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Sx(s){let t,n,e,o,r;return n=new he({props:{class:"c-bottom-controls__revert-btn",variant:"soft",color:"neutral",size:1,disabled:!s[0],$$slots:{default:[Ax]},$$scope:{ctx:s}}}),n.$on("click",s[2]),o=new he({props:{class:"c-bottom-controls__accept-btn",variant:"soft",color:"success",size:1,disabled:!s[0],$$slots:{default:[kx]},$$scope:{ctx:s}}}),o.$on("click",s[3]),{c(){t=D("div"),g(n.$$.fragment),e=z(),g(o.$$.fragment),k(t,"class","c-bottom-controls svelte-1pc5clx")},m(i,c){_(i,t,c),h(n,t,null),P(t,e),h(o,t,null),r=!0},p(i,[c]){const a={};1&c&&(a.disabled=!i[0]),33&c&&(a.$$scope={dirty:c,ctx:i}),n.$set(a);const l={};1&c&&(l.disabled=!i[0]),33&c&&(l.$$scope={dirty:c,ctx:i}),o.$set(l)},i(i){r||(d(n.$$.fragment,i),d(o.$$.fragment,i),r=!0)},o(i){$(n.$$.fragment,i),$(o.$$.fragment,i),r=!1},d(i){i&&y(t),v(n),v(o)}}}function Tx(s,t,n){let e;const o=Mt("checkpointStore"),{targetCheckpointHasChanges:r}=o;return kt(s,r,i=>n(0,e=i)),[e,r,async function(){await o.rejectAll()},async function(){await o.acceptAll()}]}class Ex extends ct{constructor(t){super(),lt(this,t,Tx,Sx,it,{})}}function Ix(s){let t,n;return{c(){t=ne("svg"),n=ne("path"),k(n,"d","M6.85357 3.85355L7.65355 3.05353C8.2981 2.40901 9.42858 1.96172 10.552 1.80125C11.1056 1.72217 11.6291 1.71725 12.0564 1.78124C12.4987 1.84748 12.7698 1.97696 12.8965 2.10357C13.0231 2.23018 13.1526 2.50125 13.2188 2.94357C13.2828 3.37086 13.2779 3.89439 13.1988 4.44801C13.0383 5.57139 12.591 6.70188 11.9464 7.34645L7.49999 11.7929L6.35354 10.6465C6.15827 10.4512 5.84169 10.4512 5.64643 10.6465C5.45117 10.8417 5.45117 11.1583 5.64643 11.3536L7.14644 12.8536C7.34171 13.0488 7.65829 13.0488 7.85355 12.8536L8.40073 12.3064L9.57124 14.2572C9.65046 14.3893 9.78608 14.4774 9.9389 14.4963C10.0917 14.5151 10.2447 14.4624 10.3535 14.3536L12.3535 12.3536C12.4648 12.2423 12.5172 12.0851 12.495 11.9293L12.0303 8.67679L12.6536 8.05355C13.509 7.19808 14.0117 5.82855 14.1887 4.58943C14.2784 3.9618 14.2891 3.33847 14.2078 2.79546C14.1287 2.26748 13.9519 1.74482 13.6035 1.39645C13.2552 1.04809 12.7325 0.871332 12.2045 0.792264C11.6615 0.710945 11.0382 0.721644 10.4105 0.8113C9.17143 0.988306 7.80189 1.491 6.94644 2.34642L6.32322 2.96968L3.07071 2.50504C2.91492 2.48278 2.75773 2.53517 2.64645 2.64646L0.646451 4.64645C0.537579 4.75533 0.484938 4.90829 0.50375 5.0611C0.522563 5.21391 0.61073 5.34954 0.742757 5.42876L2.69364 6.59928L2.14646 7.14645C2.0527 7.24022 2.00002 7.3674 2.00002 7.50001C2.00002 7.63261 2.0527 7.75979 2.14646 7.85356L3.64647 9.35356C3.84173 9.54883 4.15831 9.54883 4.35357 9.35356C4.54884 9.1583 4.54884 8.84172 4.35357 8.64646L3.20712 7.50001L3.85357 6.85356L6.85357 3.85355ZM10.0993 13.1936L9.12959 11.5775L11.1464 9.56067L11.4697 11.8232L10.0993 13.1936ZM3.42251 5.87041L5.43935 3.85356L3.17678 3.53034L1.80638 4.90074L3.42251 5.87041ZM2.35356 10.3535C2.54882 10.1583 2.54882 9.8417 2.35356 9.64644C2.1583 9.45118 1.84171 9.45118 1.64645 9.64644L0.646451 10.6464C0.451188 10.8417 0.451188 11.1583 0.646451 11.3535C0.841713 11.5488 1.1583 11.5488 1.35356 11.3535L2.35356 10.3535ZM3.85358 11.8536C4.04884 11.6583 4.04885 11.3417 3.85359 11.1465C3.65833 10.9512 3.34175 10.9512 3.14648 11.1465L1.14645 13.1464C0.95119 13.3417 0.951187 13.6583 1.14645 13.8535C1.34171 14.0488 1.65829 14.0488 1.85355 13.8536L3.85358 11.8536ZM5.35356 13.3535C5.54882 13.1583 5.54882 12.8417 5.35356 12.6464C5.1583 12.4512 4.84171 12.4512 4.64645 12.6464L3.64645 13.6464C3.45119 13.8417 3.45119 14.1583 3.64645 14.3535C3.84171 14.5488 4.1583 14.5488 4.35356 14.3535L5.35356 13.3535ZM9.49997 6.74881C10.1897 6.74881 10.7488 6.1897 10.7488 5.5C10.7488 4.8103 10.1897 4.25118 9.49997 4.25118C8.81026 4.25118 8.25115 4.8103 8.25115 5.5C8.25115 6.1897 8.81026 6.74881 9.49997 6.74881Z"),k(n,"fill","currentColor"),k(n,"fill-rule","evenodd"),k(n,"clip-rule","evenodd"),k(t,"width","15"),k(t,"height","15"),k(t,"viewBox","0 0 15 15"),k(t,"fill","none"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){_(e,t,o),P(t,n)},p:N,i:N,o:N,d(e){e&&y(t)}}}class Lx extends ct{constructor(t){super(),lt(this,t,null,Ix,it,{})}}const Rx=s=>({}),_u=s=>({});function Dx(s){let t,n;return t=new bp({props:{slot:"rightIcon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Px(s){let t,n;return t=new Cn({props:{class:"edit-item__filespan",size:1,filepath:s[0].relPath,$$slots:{rightIcon:[Dx]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].relPath),1024&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Nx(s){let t,n;return t=new Nt({props:{delayDurationMs:1500,triggerOn:[te.Hover],content:s[0].relPath,$$slots:{default:[Px]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.content=e[0].relPath),1025&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Cu(s){let t,n;return t=new he({props:{size:1,variant:"ghost",color:"neutral",$$slots:{default:[zx]},$$scope:{ctx:s}}}),t.$on("click",function(){xe(s[5])&&s[5].apply(this,arguments)}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){s=e;const r={};1026&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Fx(s){let t,n;return t=new Qi({props:{totalAddedLines:s[1].totalAddedLines,totalRemovedLines:s[1].totalRemovedLines}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.totalAddedLines=e[1].totalAddedLines),2&o&&(r.totalRemovedLines=e[1].totalRemovedLines),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function zx(s){let t,n;return t=new Nt({props:{triggerOn:[te.Hover],content:"View Diff",$$slots:{default:[Fx]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1026&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Au(s){let t,n,e,o,r=s[8]&&Mu(s),i=s[6]&&ku(s),c=s[7]&&Su(s);return{c(){t=D("div"),r&&r.c(),n=z(),i&&i.c(),e=z(),c&&c.c(),k(t,"class","edit-item__controls-container")},m(a,l){_(a,t,l),r&&r.m(t,null),P(t,n),i&&i.m(t,null),P(t,e),c&&c.m(t,null),o=!0},p(a,l){a[8]?r?(r.p(a,l),256&l&&d(r,1)):(r=Mu(a),r.c(),d(r,1),r.m(t,n)):r&&(Y(),$(r,1,1,()=>{r=null}),K()),a[6]?i?(i.p(a,l),64&l&&d(i,1)):(i=ku(a),i.c(),d(i,1),i.m(t,e)):i&&(Y(),$(i,1,1,()=>{i=null}),K()),a[7]?c?(c.p(a,l),128&l&&d(c,1)):(c=Su(a),c.c(),d(c,1),c.m(t,null)):c&&(Y(),$(c,1,1,()=>{c=null}),K())},i(a){o||(d(r),d(i),d(c),o=!0)},o(a){$(r),$(i),$(c),o=!1},d(a){a&&y(t),r&&r.d(),i&&i.d(),c&&c.d()}}}function Mu(s){let t,n,e,o;const r=[Bx,Ox],i=[];function c(a,l){return a[3]?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?i[t].p(a,l):(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function Ox(s){let t,n;return t=new se({props:{size:1,variant:"ghost",color:"neutral",$$slots:{default:[jx]},$$scope:{ctx:s}}}),t.$on("click",function(){xe(s[8])&&s[8].apply(this,arguments)}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){s=e;const r={};1028&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Bx(s){let t,n;return t=new Nt({props:{triggerOn:[te.Hover],content:"Changes applied",class:"edit-item__controls-container__applied",$$slots:{default:[Vx]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Hx(s){let t,n;return t=new Lx({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Ux(s){let t,n;return t=new cr({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function qx(s){let t,n,e,o;const r=[Ux,Hx],i=[];function c(a,l){return a[2]?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n||(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function jx(s){let t,n;return t=new Nt({props:{triggerOn:[te.Hover],content:s[2]?"Applying changes...":"Apply changes",$$slots:{default:[qx]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.content=e[2]?"Applying changes...":"Apply changes"),1028&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Wx(s){let t,n,e;return n=new co({}),{c(){t=V(`Applied
              `),g(n.$$.fragment)},m(o,r){_(o,t,r),h(n,o,r),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n,o)}}}function Vx(s){let t,n;return t=new Ot({props:{size:1,$$slots:{default:[Wx]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function ku(s){let t,n;return t=new se({props:{size:1,variant:"ghost",color:"neutral",$$slots:{default:[Yx]},$$scope:{ctx:s}}}),t.$on("click",function(){xe(s[6])&&s[6].apply(this,arguments)}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){s=e;const r={};1024&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Gx(s){let t,n;return t=new Hp({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Yx(s){let t,n;return t=new Nt({props:{triggerOn:[te.Hover],content:"Open File",$$slots:{default:[Gx]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Su(s){let t,n;return t=new se({props:{size:1,variant:"ghost",color:"neutral",$$slots:{default:[Xx]},$$scope:{ctx:s}}}),t.$on("click",function(){xe(s[7])&&s[7].apply(this,arguments)}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){s=e;const r={};1024&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Kx(s){let t,n;return t=new rs({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Xx(s){let t,n;return t=new Nt({props:{triggerOn:[te.Hover],content:"Undo Changes",$$slots:{default:[Kx]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Jx(s){let t,n,e,o,r,i,c;e=new he({props:{class:"edit-item__file-button",size:1,variant:s[4]?"soft":"ghost",color:s[4]?"accent":"neutral",$$slots:{default:[Nx]},$$scope:{ctx:s}}}),e.$on("click",function(){xe(s[5])&&s[5].apply(this,arguments)});const a=s[9].actions,l=Xt(a,s,s[10],_u);let u=s[1]&&Cu(s),m=(s[8]||s[6]||s[7])&&Au(s);return{c(){t=D("div"),n=D("div"),g(e.$$.fragment),o=z(),l&&l.c(),r=z(),u&&u.c(),i=z(),m&&m.c(),k(n,"class","edit-item__info-container"),k(t,"class","edit-item__container svelte-11cbs0v"),xt(t,"edit-item__container--focused",s[4])},m(p,f){_(p,t,f),P(t,n),h(e,n,null),P(t,o),l&&l.m(t,null),P(t,r),u&&u.m(t,null),P(t,i),m&&m.m(t,null),c=!0},p(p,[f]){s=p;const x={};16&f&&(x.variant=s[4]?"soft":"ghost"),16&f&&(x.color=s[4]?"accent":"neutral"),1025&f&&(x.$$scope={dirty:f,ctx:s}),e.$set(x),l&&l.p&&(!c||1024&f)&&Jt(l,a,s,s[10],c?Qt(a,s[10],f,Rx):Zt(s[10]),_u),s[1]?u?(u.p(s,f),2&f&&d(u,1)):(u=Cu(s),u.c(),d(u,1),u.m(t,i)):u&&(Y(),$(u,1,1,()=>{u=null}),K()),s[8]||s[6]||s[7]?m?(m.p(s,f),448&f&&d(m,1)):(m=Au(s),m.c(),d(m,1),m.m(t,null)):m&&(Y(),$(m,1,1,()=>{m=null}),K()),(!c||16&f)&&xt(t,"edit-item__container--focused",s[4])},i(p){c||(d(e.$$.fragment,p),d(l,p),d(u),d(m),c=!0)},o(p){$(e.$$.fragment,p),$(l,p),$(u),$(m),c=!1},d(p){p&&y(t),v(e),l&&l.d(p),u&&u.d(),m&&m.d()}}}function Zx(s,t,n){let{$$slots:e={},$$scope:o}=t,{qualifiedPathName:r}=t,{lineChanges:i}=t,{isApplyPending:c=!1}=t,{hasApplied:a=!1}=t,{isFocused:l=!1}=t,{onClickReview:u}=t,{onClickFile:m}=t,{onClickRevert:p}=t,{onApplyChanges:f}=t;return s.$$set=x=>{"qualifiedPathName"in x&&n(0,r=x.qualifiedPathName),"lineChanges"in x&&n(1,i=x.lineChanges),"isApplyPending"in x&&n(2,c=x.isApplyPending),"hasApplied"in x&&n(3,a=x.hasApplied),"isFocused"in x&&n(4,l=x.isFocused),"onClickReview"in x&&n(5,u=x.onClickReview),"onClickFile"in x&&n(6,m=x.onClickFile),"onClickRevert"in x&&n(7,p=x.onClickRevert),"onApplyChanges"in x&&n(8,f=x.onApplyChanges),"$$scope"in x&&n(10,o=x.$$scope)},[r,i,c,a,l,u,m,p,f,e,o]}class ya extends ct{constructor(t){super(),lt(this,t,Zx,Jx,it,{qualifiedPathName:0,lineChanges:1,isApplyPending:2,hasApplied:3,isFocused:4,onClickReview:5,onClickFile:6,onClickRevert:7,onApplyChanges:8})}}function Qx(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 128 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return{c(){t=ne("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=dn(t);n=$n(i,!0),i.forEach(y),this.h()},h(){n.a=null,ue(t,o)},m(r,i){mn(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M64 368a48 48 0 1 0 0 96 48 48 0 1 0 0-96m0-160a48 48 0 1 0 0 96 48 48 0 1 0 0-96m48-112a48 48 0 1 0-96 0 48 48 0 1 0 96 0"/>',t)},p(r,[i]){ue(t,o=Ue(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 128 512"},1&i&&r[0]]))},i:N,o:N,d(r){r&&y(t)}}}function t8(s,t,n){return s.$$set=e=>{n(0,t=It(It({},t),ae(e)))},[t=ae(t)]}class e8 extends ct{constructor(t){super(),lt(this,t,t8,Qx,it,{})}}function n8(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return{c(){t=ne("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=dn(t);n=$n(i,!0),i.forEach(y),this.h()},h(){n.a=null,ue(t,o)},m(r,i){mn(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M448 464H192c-8.8 0-16-7.2-16-16v-80h-48v80c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64V154.5c0-17-6.7-33.3-18.7-45.3l-90.6-90.5C390.7 6.7 374.5 0 357.5 0H192c-35.3 0-64 28.7-64 64v192h48V64c0-8.8 7.2-16 16-16h160v80c0 17.7 14.3 32 32 32h80v288c0 8.8-7.2 16-16 16M297 215c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l39 39L24 288c-13.3 0-24 10.7-24 24s10.7 24 24 24h278.1l-39 39c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l80-80c9.4-9.4 9.4-24.6 0-33.9z"/>',t)},p(r,[i]){ue(t,o=Ue(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&r[0]]))},i:N,o:N,d(r){r&&y(t)}}}function o8(s,t,n){return s.$$set=e=>{n(0,t=It(It({},t),ae(e)))},[t=ae(t)]}class r8 extends ct{constructor(t){super(),lt(this,t,o8,n8,it,{})}}function s8(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return{c(){t=ne("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=dn(t);n=$n(i,!0),i.forEach(y),this.h()},h(){n.a=null,ue(t,o)},m(r,i){mn(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M336 448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16h160v80c0 17.7 14.3 32 32 32h80v96h48V154.5c0-17-6.7-33.3-18.7-45.3l-90.6-90.5C262.7 6.7 246.5 0 229.5 0H64C28.7 0 0 28.7 0 64v384c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64v-80h-48zm153-233c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l39 39-278.1.1c-13.3 0-24 10.7-24 24s10.7 24 24 24h278.1l-39 39c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l80-80c9.4-9.4 9.4-24.6 0-33.9z"/>',t)},p(r,[i]){ue(t,o=Ue(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},1&i&&r[0]]))},i:N,o:N,d(r){r&&y(t)}}}function i8(s,t,n){return s.$$set=e=>{n(0,t=It(It({},t),ae(e)))},[t=ae(t)]}class a8 extends ct{constructor(t){super(),lt(this,t,i8,s8,it,{})}}function c8(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return{c(){t=ne("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=dn(t);n=$n(i,!0),i.forEach(y),this.h()},h(){n.a=null,ue(t,o)},m(r,i){mn(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M208 416c0-26.5-21.5-48-48-48H64c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16h384c8.8 0 16 7.2 16 16v288c0 8.8-7.2 16-16 16H309.3c-10.4 0-20.5 3.4-28.8 9.6L208 432zm-.2 76.2.2-.2 101.3-76H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H64C28.7 0 0 28.7 0 64v288c0 35.3 28.7 64 64 64h96v80c0 6.1 3.4 11.6 8.8 14.3s11.9 2.1 16.8-1.5l17.1-12.8zM232 296c0 13.3 10.7 24 24 24s24-10.7 24-24v-64h64c13.3 0 24-10.7 24-24s-10.7-24-24-24h-64v-64c0-13.3-10.7-24-24-24s-24 10.7-24 24v64h-64c-13.3 0-24 10.7-24 24s10.7 24 24 24h64z"/>',t)},p(r,[i]){ue(t,o=Ue(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&r[0]]))},i:N,o:N,d(r){r&&y(t)}}}function l8(s,t,n){return s.$$set=e=>{n(0,t=It(It({},t),ae(e)))},[t=ae(t)]}class P1 extends ct{constructor(t){super(),lt(this,t,l8,c8,it,{})}}function u8(s){let t,n;return t=new e8({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function d8(s){let t,n;return t=new Tn({props:{size:1}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function $8(s){let t,n,e,o;const r=[d8,u8],i=[];function c(a,l){return a[1]?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n||(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function m8(s){let t,n;return t=new se({props:{size:1,variant:"ghost-block",color:"neutral",disabled:s[1],$$slots:{default:[$8]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.disabled=e[1]),1026&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function p8(s){let t,n;return t=new Nt({props:{content:"More Actions",triggerOn:[te.Hover],$$slots:{default:[m8]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1026&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function f8(s){let t;return{c(){t=V("Import/Export")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function g8(s){let t;return{c(){t=V("Export to Markdown")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function h8(s){let t,n;return t=new a8({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function v8(s){let t;return{c(){t=V("Import from Markdown")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function w8(s){let t,n;return t=new r8({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function y8(s){let t;return{c(){t=V("Continue in New Chat")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function x8(s){let t,n;return t=new P1({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function b8(s){let t,n,e,o,r,i,c,a;return t=new yt.Label({props:{$$slots:{default:[f8]},$$scope:{ctx:s}}}),e=new yt.Item({props:{onSelect:s[3],disabled:s[1],$$slots:{iconLeft:[h8],default:[g8]},$$scope:{ctx:s}}}),r=new yt.Item({props:{onSelect:s[4],disabled:s[1],$$slots:{iconLeft:[w8],default:[v8]},$$scope:{ctx:s}}}),c=new yt.Item({props:{onSelect:s[5],$$slots:{iconLeft:[x8],default:[y8]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment),o=z(),g(r.$$.fragment),i=z(),g(c.$$.fragment)},m(l,u){h(t,l,u),_(l,n,u),h(e,l,u),_(l,o,u),h(r,l,u),_(l,i,u),h(c,l,u),a=!0},p(l,u){const m={};1024&u&&(m.$$scope={dirty:u,ctx:l}),t.$set(m);const p={};2&u&&(p.disabled=l[1]),1024&u&&(p.$$scope={dirty:u,ctx:l}),e.$set(p);const f={};2&u&&(f.disabled=l[1]),1024&u&&(f.$$scope={dirty:u,ctx:l}),r.$set(f);const x={};1024&u&&(x.$$scope={dirty:u,ctx:l}),c.$set(x)},i(l){a||(d(t.$$.fragment,l),d(e.$$.fragment,l),d(r.$$.fragment,l),d(c.$$.fragment,l),a=!0)},o(l){$(t.$$.fragment,l),$(e.$$.fragment,l),$(r.$$.fragment,l),$(c.$$.fragment,l),a=!1},d(l){l&&(y(n),y(o),y(i)),v(t,l),v(e,l),v(r,l),v(c,l)}}}function _8(s){let t,n,e,o;return t=new yt.Trigger({props:{$$slots:{default:[p8]},$$scope:{ctx:s}}}),e=new yt.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[b8]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};1026&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};1026&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function C8(s){let t,n,e;function o(i){s[6](i)}let r={$$slots:{default:[_8]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.requestClose=s[0]),t=new yt.Root({props:r}),Gt.push(()=>ke(t,"requestClose",o)),{c(){g(t.$$.fragment)},m(i,c){h(t,i,c),e=!0},p(i,[c]){const a={};1026&c&&(a.$$scope={dirty:c,ctx:i}),!n&&1&c&&(n=!0,a.requestClose=i[0],De(()=>n=!1)),t.$set(a)},i(i){e||(d(t.$$.fragment,i),e=!0)},o(i){$(t.$$.fragment,i),e=!1},d(i){v(t,i)}}}function A8(s,t,n){let e;const o=Mt(wo.key),{isImportingExporting:r,rootTask:i}=o;kt(s,r,l=>n(1,e=l));const c=Mt("chatModel");let a;return[a,e,r,async function(){if(e)return;const l=re(i),u=Gr(l),m={action:Wr.exportTaskList,totalTasksCount:u.total,triggeredBy:Vr.user},p=c.currentConversationModel.chatHistory,f=p.length>0&&p[p.length-1].request_id||c.currentConversationModel.id;c.currentConversationModel.extensionClient.reportAgentSessionEvent({eventName:Ro.taskListUsage,conversationId:f,eventData:{taskListUsageData:m}}),await o.exportTasksToMarkdown(),a==null||a()},async function(){if(e)return;const l=re(i),u=Gr(l),m={action:Wr.importTaskList,totalTasksCount:u.total,triggeredBy:Vr.user},p=c.currentConversationModel.chatHistory,f=p.length>0&&p[p.length-1].request_id||c.currentConversationModel.id;c.currentConversationModel.extensionClient.reportAgentSessionEvent({eventName:Ro.taskListUsage,conversationId:f,eventData:{taskListUsageData:m}}),await o.importTasksFromMarkdown(),a==null||a()},async function(){const l=re(i);if(!l)return;const u=c.currentConversationId,m=await o.cloneHydratedTask(l);u===c.currentConversationId&&m&&await c.setCurrentConversation(void 0,!0,{newTaskUuid:m.uuid}),a==null||a()},function(l){a=l,n(0,a)}]}class M8 extends ct{constructor(t){super(),lt(this,t,A8,C8,it,{})}}function k8(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return{c(){t=ne("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=dn(t);n=$n(i,!0),i.forEach(y),this.h()},h(){n.a=null,ue(t,o)},m(r,i){mn(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M41.2 64C18.5 64 0 82.5 0 105.2c0 10.4 3.9 20.4 11 28.1l93 100.1v126c0 13.4 6.7 26 18 33.4l75.5 49.8c5.3 3.5 11.6 5.4 18 5.4 18 0 32.6-14.6 32.6-32.6v-182l93-100.1c7.1-7.6 11-17.6 11-28.1C352 82.5 333.5 64 310.8 64zm104.4 143.7L56.8 112h238.5l-88.8 95.7c-4.1 4.4-6.4 10.3-6.4 16.3v162.8l-48-31.7L152 224c0-6.1-2.3-11.9-6.4-16.3M344 392c-13.3 0-24 10.7-24 24s10.7 24 24 24h144c13.3 0 24-10.7 24-24s-10.7-24-24-24zm-24-136c0 13.3 10.7 24 24 24h144c13.3 0 24-10.7 24-24s-10.7-24-24-24H344c-13.3 0-24 10.7-24 24m88-184c-13.3 0-24 10.7-24 24s10.7 24 24 24h80c13.3 0 24-10.7 24-24s-10.7-24-24-24z"/>',t)},p(r,[i]){ue(t,o=Ue(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&r[0]]))},i:N,o:N,d(r){r&&y(t)}}}function S8(s,t,n){return s.$$set=e=>{n(0,t=It(It({},t),ae(e)))},[t=ae(t)]}class T8 extends ct{constructor(t){super(),lt(this,t,S8,k8,it,{})}}function E8(s){let t,n,e;return n=new pa({}),{c(){t=D("span"),g(n.$$.fragment),k(t,"class","c-task-check-icon svelte-9rlaen")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}class I8 extends ct{constructor(t){super(),lt(this,t,null,E8,it,{})}}function Tu(s,t,n){const e=s.slice();e[11]=t[n];const o=e[0].has(e[11].value);return e[12]=o,e}function L8(s){let t,n;return t=new T8({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function R8(s){let t,n;return t=new se({props:{size:1,variant:s[3]?"soft":"ghost-block",color:s[3]?"accent":"neutral",$$slots:{default:[L8]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.variant=e[3]?"soft":"ghost-block"),8&o&&(r.color=e[3]?"accent":"neutral"),32768&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function D8(s){let t,n;return t=new Nt({props:{content:"Filter Tasks",triggerOn:[te.Hover],$$slots:{default:[R8]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};32776&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function P8(s){let t;return{c(){t=V("Select All")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function N8(s){let t;return{c(){t=V("Clear All")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function F8(s){let t,n,e,o,r=s[11].label+"",i=s[11].count+"";return{c(){t=V(r),n=V(" ("),e=V(i),o=V(")")},m(c,a){_(c,t,a),_(c,n,a),_(c,e,a),_(c,o,a)},p(c,a){2&a&&r!==(r=c[11].label+"")&&ht(t,r),2&a&&i!==(i=c[11].count+"")&&ht(e,i)},d(c){c&&(y(t),y(n),y(e),y(o))}}}function z8(s){let t,n,e;return t=new Ot({props:{size:1,color:s[12]?"neutral":"secondary",$$slots:{default:[F8]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z()},m(o,r){h(t,o,r),_(o,n,r),e=!0},p(o,r){const i={};3&r&&(i.color=o[12]?"neutral":"secondary"),32770&r&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){$(t.$$.fragment,o),e=!1},d(o){o&&y(n),v(t,o)}}}function O8(s){let t,n;return t=new qf({props:{taskState:s[11].value,size:1}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.taskState=e[11].value),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function B8(s){let t,n;return t=new I8({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function H8(s){let t,n,e,o;const r=[B8,O8],i=[];function c(a,l){return a[12]?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=z()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?i[t].p(a,l):(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function Eu(s){let t,n;function e(){return s[9](s[11])}return t=new yt.Item({props:{onSelect:e,$$slots:{iconLeft:[H8],default:[z8]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,r){s=o;const i={};2&r&&(i.onSelect=e),32771&r&&(i.$$scope={dirty:r,ctx:s}),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){v(t,o)}}}function U8(s){let t,n,e,o,r,i,c,a;t=new yt.Item({props:{onSelect:s[7],$$slots:{default:[P8]},$$scope:{ctx:s}}}),e=new yt.Item({props:{onSelect:s[8],$$slots:{default:[N8]},$$scope:{ctx:s}}}),r=new yt.Separator({});let l=ee(s[1]),u=[];for(let p=0;p<l.length;p+=1)u[p]=Eu(Tu(s,l,p));const m=p=>$(u[p],1,1,()=>{u[p]=null});return{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment),o=z(),g(r.$$.fragment),i=z();for(let p=0;p<u.length;p+=1)u[p].c();c=gt()},m(p,f){h(t,p,f),_(p,n,f),h(e,p,f),_(p,o,f),h(r,p,f),_(p,i,f);for(let x=0;x<u.length;x+=1)u[x]&&u[x].m(p,f);_(p,c,f),a=!0},p(p,f){const x={};32768&f&&(x.$$scope={dirty:f,ctx:p}),t.$set(x);const A={};if(32768&f&&(A.$$scope={dirty:f,ctx:p}),e.$set(A),19&f){let C;for(l=ee(p[1]),C=0;C<l.length;C+=1){const M=Tu(p,l,C);u[C]?(u[C].p(M,f),d(u[C],1)):(u[C]=Eu(M),u[C].c(),d(u[C],1),u[C].m(c.parentNode,c))}for(Y(),C=l.length;C<u.length;C+=1)m(C);K()}},i(p){if(!a){d(t.$$.fragment,p),d(e.$$.fragment,p),d(r.$$.fragment,p);for(let f=0;f<l.length;f+=1)d(u[f]);a=!0}},o(p){$(t.$$.fragment,p),$(e.$$.fragment,p),$(r.$$.fragment,p),u=u.filter(Boolean);for(let f=0;f<u.length;f+=1)$(u[f]);a=!1},d(p){p&&(y(n),y(o),y(i),y(c)),v(t,p),v(e,p),v(r,p),rn(u,p)}}}function q8(s){let t,n,e,o;return t=new yt.Trigger({props:{$$slots:{default:[D8]},$$scope:{ctx:s}}}),e=new yt.Content({props:{side:"bottom",align:"start",size:1,$$slots:{default:[U8]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};32776&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};32771&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function j8(s){let t,n,e;function o(i){s[10](i)}let r={$$slots:{default:[q8]},$$scope:{ctx:s}};return s[2]!==void 0&&(r.requestClose=s[2]),t=new yt.Root({props:r}),Gt.push(()=>ke(t,"requestClose",o)),{c(){g(t.$$.fragment)},m(i,c){h(t,i,c),e=!0},p(i,[c]){const a={};32779&c&&(a.$$scope={dirty:c,ctx:i}),!n&&4&c&&(n=!0,a.requestClose=i[2],De(()=>n=!1)),t.$set(a)},i(i){e||(d(t.$$.fragment,i),e=!0)},o(i){$(t.$$.fragment,i),e=!1},d(i){v(t,i)}}}function W8(s,t,n){let e,o,{taskFilters:r=[]}=t,{activeTaskFilter:i=new Set}=t;function c(u){const m=new Set(i);m.has(u)?m.delete(u):m.add(u),n(0,i=m)}function a(){const u=r.map(m=>m.value);n(0,i=new Set(u))}function l(){n(0,i=new Set)}return s.$$set=u=>{"taskFilters"in u&&n(1,r=u.taskFilters),"activeTaskFilter"in u&&n(0,i=u.activeTaskFilter)},s.$$.update=()=>{3&s.$$.dirty&&n(3,e=i.size===0||i.size<r.length)},[i,r,o,e,c,a,l,()=>a(),()=>l(),u=>{c(u.value)},function(u){o=u,n(2,o)}]}class V8 extends ct{constructor(t){super(),lt(this,t,W8,j8,it,{taskFilters:1,activeTaskFilter:0})}}function Iu(s){let t,n,e,o,r,i=s[5]&&s[5].total>0&&Lu(s);const c=[J8,X8,K8],a=[];function l(u,m){return u[6]?0:u[5]&&u[5].completed===u[5].total&&u[5].total>0?1:u[2]&&u[2].name?2:-1}return~(e=l(s))&&(o=a[e]=c[e](s)),{c(){t=D("div"),i&&i.c(),n=z(),o&&o.c(),k(t,"class","c-task-list-header__status svelte-qt9z9m")},m(u,m){_(u,t,m),i&&i.m(t,null),P(t,n),~e&&a[e].m(t,null),r=!0},p(u,m){u[5]&&u[5].total>0?i?(i.p(u,m),32&m&&d(i,1)):(i=Lu(u),i.c(),d(i,1),i.m(t,n)):i&&(Y(),$(i,1,1,()=>{i=null}),K());let p=e;e=l(u),e===p?~e&&a[e].p(u,m):(o&&(Y(),$(a[p],1,1,()=>{a[p]=null}),K()),~e?(o=a[e],o?o.p(u,m):(o=a[e]=c[e](u),o.c()),d(o,1),o.m(t,null)):o=null)},i(u){r||(d(i),d(o),r=!0)},o(u){$(i),$(o),r=!1},d(u){u&&y(t),i&&i.d(),~e&&a[e].d()}}}function Lu(s){let t,n;return t=new Nt({props:{triggerOn:[te.Hover],content:"Completed "+s[5].completed+" of "+s[5].total+" tasks",$$slots:{default:[Y8]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};32&o&&(r.content="Completed "+e[5].completed+" of "+e[5].total+" tasks"),524320&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function G8(s){let t,n,e,o=s[5].completed+"",r=s[5].total+"";return{c(){t=V(o),n=V("/"),e=V(r)},m(i,c){_(i,t,c),_(i,n,c),_(i,e,c)},p(i,c){32&c&&o!==(o=i[5].completed+"")&&ht(t,o),32&c&&r!==(r=i[5].total+"")&&ht(e,r)},d(i){i&&(y(t),y(n),y(e))}}}function Y8(s){let t,n;return t=new jf({props:{color:s[5].completed===s[5].total?"success":"info",size:1,$$slots:{default:[G8]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};32&o&&(r.color=e[5].completed===e[5].total?"success":"info"),524320&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function K8(s){let t,n;return t=new Ot({props:{size:1,color:"neutral",class:"c-task-list-header__task-name",$$slots:{default:[Z8]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};524292&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function X8(s){let t,n;return t=new Ot({props:{size:1,color:"primary",class:"c-task-list-header__task-name",$$slots:{default:[Q8]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};524288&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function J8(s){let t,n;return t=new Ot({props:{size:1,color:"primary",class:"c-task-list-header__task-name",$$slots:{default:[tb]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};524352&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Z8(s){let t,n=s[2].name+"";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){4&o&&n!==(n=e[2].name+"")&&ht(t,n)},d(e){e&&y(t)}}}function Q8(s){let t;return{c(){t=V("All tasks complete")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function tb(s){let t,n=(s[6].name||"Untitled Task")+"";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){64&o&&n!==(n=(e[6].name||"Untitled Task")+"")&&ht(t,n)},d(e){e&&y(t)}}}function Ru(s){let t,n;return t=new Nt({props:{content:"Run All Tasks",triggerOn:[te.Hover],$$slots:{default:[nb]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};524292&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function eb(s){let t,n;return t=new kg({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function nb(s){let t,n;return t=new se({props:{size:1,variant:"ghost-block",color:"neutral",disabled:!1,$$slots:{default:[eb]},$$scope:{ctx:s}}}),t.$on("click",s[17]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};524288&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function ob(s){let t,n;return t=new Ji({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function rb(s){let t,n;return t=new se({props:{size:1,variant:"ghost-block",color:"neutral",disabled:!s[2],$$slots:{default:[ob]},$$scope:{ctx:s}}}),t.$on("click",s[12]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.disabled=!e[2]),524288&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function sb(s){let t,n,e,o,r,i,c,a,l,u,m,p,f,x,A,C,M,S;o=new ui({}),c=new F1({});let L=s[1]&&Iu(s),I=s[4]&&Ru(s);function X(H){s[18](H)}p=new Nt({props:{content:"Add New Task",triggerOn:[te.Hover],$$slots:{default:[rb]},$$scope:{ctx:s}}});let j={taskFilters:s[3]};return s[0]!==void 0&&(j.activeTaskFilter=s[0]),x=new V8({props:j}),Gt.push(()=>ke(x,"activeTaskFilter",X)),M=new M8({}),{c(){t=D("div"),n=D("div"),e=D("div"),g(o.$$.fragment),r=z(),i=D("div"),g(c.$$.fragment),a=z(),L&&L.c(),l=z(),u=D("div"),I&&I.c(),m=z(),g(p.$$.fragment),f=z(),g(x.$$.fragment),C=z(),g(M.$$.fragment),k(e,"class","c-task-list-header__collapse-btn svelte-qt9z9m"),k(i,"class","c-task-list-header__switch-btn svelte-qt9z9m"),k(n,"class","c-task-list-header__content svelte-qt9z9m"),k(u,"class","c-task-list-header__actions svelte-qt9z9m"),k(t,"class","c-task-list-header svelte-qt9z9m")},m(H,J){_(H,t,J),P(t,n),P(n,e),h(o,e,null),P(n,r),P(n,i),h(c,i,null),P(n,a),L&&L.m(n,null),P(t,l),P(t,u),I&&I.m(u,null),P(u,m),h(p,u,null),P(u,f),h(x,u,null),P(u,C),h(M,u,null),S=!0},p(H,[J]){H[1]?L?(L.p(H,J),2&J&&d(L,1)):(L=Iu(H),L.c(),d(L,1),L.m(n,null)):L&&(Y(),$(L,1,1,()=>{L=null}),K()),H[4]?I?(I.p(H,J),16&J&&d(I,1)):(I=Ru(H),I.c(),d(I,1),I.m(u,m)):I&&(Y(),$(I,1,1,()=>{I=null}),K());const U={};524292&J&&(U.$$scope={dirty:J,ctx:H}),p.$set(U);const O={};8&J&&(O.taskFilters=H[3]),!A&&1&J&&(A=!0,O.activeTaskFilter=H[0],De(()=>A=!1)),x.$set(O)},i(H){S||(d(o.$$.fragment,H),d(c.$$.fragment,H),d(L),d(I),d(p.$$.fragment,H),d(x.$$.fragment,H),d(M.$$.fragment,H),S=!0)},o(H){$(o.$$.fragment,H),$(c.$$.fragment,H),$(L),$(I),$(p.$$.fragment,H),$(x.$$.fragment,H),$(M.$$.fragment,H),S=!1},d(H){H&&y(t),v(o),v(c),L&&L.d(),I&&I.d(),v(p),v(x),v(M)}}}function ib(s,t,n){let e,o,r,i,c,{notStartedTasksCount:a=0}=t,{inProgressTasksCount:l=0}=t,{completedTasksCount:u=0}=t,{cancelledTasksCount:m=0}=t,{collapsed:p=!1}=t;const f=Mt(wo.key),x=Mt("chatModel"),{rootTask:A,activeTask:C,taskProgress:M}=f;kt(s,A,L=>n(2,r=L)),kt(s,C,L=>n(6,c=L)),kt(s,M,L=>n(5,i=L));let{activeTaskFilter:S=new Set}=t;return s.$$set=L=>{"notStartedTasksCount"in L&&n(13,a=L.notStartedTasksCount),"inProgressTasksCount"in L&&n(14,l=L.inProgressTasksCount),"completedTasksCount"in L&&n(15,u=L.completedTasksCount),"cancelledTasksCount"in L&&n(16,m=L.cancelledTasksCount),"collapsed"in L&&n(1,p=L.collapsed),"activeTaskFilter"in L&&n(0,S=L.activeTaskFilter)},s.$$.update=()=>{4&s.$$.dirty&&n(4,e=(r==null?void 0:r.subTasksData)&&r.subTasksData.length>0),122880&s.$$.dirty&&n(3,o=[{value:Kn.NOT_STARTED,label:Ts(Kn.NOT_STARTED),count:a},{value:Kn.IN_PROGRESS,label:Ts(Kn.IN_PROGRESS),count:l},{value:Kn.COMPLETE,label:Ts(Kn.COMPLETE),count:u},{value:Kn.CANCELLED,label:Ts(Kn.CANCELLED),count:m}])},[S,p,r,o,e,i,c,f,x,A,C,M,async function(){if(r){const L=Gr(r),I={action:Wr.addSubtask,totalTasksCount:L.total,triggeredBy:Vr.user};x.currentConversationModel.extensionClient.reportAgentSessionEvent({eventName:Ro.taskListUsage,conversationId:x.currentConversationModel.id,eventData:{taskListUsageData:I}});const X=await f.createTask("","",r.uuid);setTimeout(()=>{const j=document.getElementById(`task-${X}`),H=j==null?void 0:j.querySelector(".c-task-tree-item__name-editable"),J=H==null?void 0:H.querySelector("input");J==null||J.focus()},100)}},a,l,u,m,()=>{const L=Gr(r),I={action:Wr.runAllTasks,totalTasksCount:L.total,triggeredBy:Vr.user};x.currentConversationModel.extensionClient.reportAgentSessionEvent({eventName:Ro.taskListUsage,conversationId:x.currentConversationModel.id,eventData:{taskListUsageData:I}}),f.runAllTasks()},function(L){S=L,n(0,S)}]}class ab extends ct{constructor(t){super(),lt(this,t,ib,sb,it,{notStartedTasksCount:13,inProgressTasksCount:14,completedTasksCount:15,cancelledTasksCount:16,collapsed:1,activeTaskFilter:0})}}function Du(s){let t,n,e,o;function r(c){s[17](c)}let i={class:"c-task-list-container__block-container",$$slots:{header:[$b],default:[db]},$$scope:{ctx:s}};return s[9]!==void 0&&(i.collapsed=s[9]),n=new ss({props:i}),Gt.push(()=>ke(n,"collapsed",r)),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-task-list-container svelte-yamkbz")},m(c,a){_(c,t,a),h(n,t,null),o=!0},p(c,a){const l={};2097789&a&&(l.$$scope={dirty:a,ctx:c}),!e&&512&a&&(e=!0,l.collapsed=c[9],De(()=>e=!1)),n.$set(l)},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&y(t),v(n)}}}function cb(s){let t,n,e;return n=new Ot({props:{size:1,color:"neutral",$$slots:{default:[ub]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-tasks-list c-tasks-list--empty svelte-yamkbz")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};2097152&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function lb(s){let t,n,e;return n=new Vf({props:{task:s[6],taskStore:s[11],editable:!0}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-tasks-list svelte-yamkbz")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};64&r&&(i.task=o[6]),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function ub(s){let t;return{c(){t=V("No tasks to show")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function db(s){let t,n,e,o;const r=[lb,cb],i=[];function c(a,l){var u,m;return(u=a[6])!=null&&u.isVisible&&((m=a[6].subTasksData)!=null&&m.length)?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?i[t].p(a,l):(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function $b(s){let t,n,e;function o(i){s[16](i)}let r={notStartedTasksCount:s[5],inProgressTasksCount:s[4],completedTasksCount:s[3],cancelledTasksCount:s[2],collapsed:s[9],slot:"header"};return s[0]!==void 0&&(r.activeTaskFilter=s[0]),t=new ab({props:r}),Gt.push(()=>ke(t,"activeTaskFilter",o)),{c(){g(t.$$.fragment)},m(i,c){h(t,i,c),e=!0},p(i,c){const a={};32&c&&(a.notStartedTasksCount=i[5]),16&c&&(a.inProgressTasksCount=i[4]),8&c&&(a.completedTasksCount=i[3]),4&c&&(a.cancelledTasksCount=i[2]),512&c&&(a.collapsed=i[9]),!n&&1&c&&(n=!0,a.activeTaskFilter=i[0],De(()=>n=!1)),t.$set(a)},i(i){e||(d(t.$$.fragment,i),e=!0)},o(i){$(t.$$.fragment,i),e=!1},d(i){v(t,i)}}}function mb(s){let t,n,e=s[8]&&s[1]&&Du(s);return{c(){e&&e.c(),t=gt()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,[r]){o[8]&&o[1]?e?(e.p(o,r),258&r&&d(e,1)):(e=Du(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function pb(s,t,n){let e,o,r,i,c,a,l,u,m,p,f,x=N;s.$$.on_destroy.push(()=>x());const A=Mt("chatModel");kt(s,A,H=>n(15,m=H));const C=Mt("agentConversationModel"),M=Mt(wo.key),{isCurrConversationAgentic:S}=C;kt(s,S,H=>n(8,p=H));const{rootTask:L}=M;kt(s,L,H=>n(1,u=H));let I=new Set(Object.values(Kn)),X=!1;function j(H,J=0){let U={notStarted:0,inProgress:0,completed:0,cancelled:0};if(!H)return U;if(J!==0&&(H.state===Kn.NOT_STARTED?U.notStarted++:H.state===Kn.IN_PROGRESS?U.inProgress++:H.state===Kn.COMPLETE?U.completed++:H.state===Kn.CANCELLED&&U.cancelled++),H.subTasksData&&H.subTasksData.length>0)for(const O of H.subTasksData){const Z=j(O,J+1);U.notStarted+=Z.notStarted,U.inProgress+=Z.inProgress,U.completed+=Z.completed,U.cancelled+=Z.cancelled}return U}return En(()=>{const H=re(L);if(H&&!X){X=!0;const J=Gr(H),U={action:Wr.viewTaskList,totalTasksCount:J.total,triggeredBy:Vr.user},O=A.currentConversationModel.chatHistory,Z=O.length>0&&O[O.length-1].request_id||A.currentConversationModel.id;A.currentConversationModel.extensionClient.reportAgentSessionEvent({eventName:Ro.taskListUsage,conversationId:Z,eventData:{taskListUsageData:U}})}}),s.$$.update=()=>{32768&s.$$.dirty&&(n(7,e=m.isPanelCollapsed),x(),x=oe(e,H=>n(9,f=H))),3&s.$$.dirty&&n(6,o=u?Wf(u,I):void 0),2&s.$$.dirty&&n(14,r=j(u)),16384&s.$$.dirty&&n(5,i=r.notStarted),16384&s.$$.dirty&&n(4,c=r.inProgress),16384&s.$$.dirty&&n(3,a=r.completed),16384&s.$$.dirty&&n(2,l=r.cancelled)},[I,u,l,a,c,i,o,e,p,f,A,M,S,L,r,m,function(H){I=H,n(0,I)},function(H){f=H,e.set(f)}]}class fb extends ct{constructor(t){super(),lt(this,t,pb,mb,it,{})}}function gb(s){let t,n;return t=new fb({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function hb(s){let t,n;return t=new qb({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function vb(s){let t,n,e,o,r;const i=[hb,gb],c=[];function a(l,u){return l[0]===Pn.agentEdits||!l[1]||l[2].isActive?0:l[0]===Pn.tasks?1:-1}return~(e=a(s))&&(o=c[e]=i[e](s)),{c(){t=D("div"),n=D("div"),o&&o.c(),k(n,"class","c-swappable-panel__content svelte-fjwpdg"),k(t,"class","c-swappable-panel svelte-fjwpdg")},m(l,u){_(l,t,u),P(t,n),~e&&c[e].m(n,null),r=!0},p(l,[u]){let m=e;e=a(l),e!==m&&(o&&(Y(),$(c[m],1,1,()=>{c[m]=null}),K()),~e?(o=c[e],o||(o=c[e]=i[e](l),o.c()),d(o,1),o.m(n,null)):o=null)},i(l){r||(d(o),r=!0)},o(l){$(o),r=!1},d(l){l&&y(t),~e&&c[e].d()}}}var Pn=(s=>(s.agentEdits="agent_edits",s.tasks="tasks",s))(Pn||{});const N1=Symbol("swappable-panel-context");function wb(s,t,n){let e,o,r;const i=Mt(wo.key),{canShowTaskList:c}=i;kt(s,c,u=>n(1,o=u));const a=Mt(on.key);kt(s,a,u=>n(2,r=u));const l=Fe(Pn.agentEdits);return kt(s,l,u=>n(0,e=u)),Fn(N1,{activePanel:l,togglePanel:()=>{Ur(l,e=e===Pn.agentEdits?Pn.tasks:Pn.agentEdits,e)}}),[e,o,r,c,a,l]}class yb extends ct{constructor(t){super(),lt(this,t,wb,vb,it,{})}}function xb(s){let t,n,e;return n=new Gf({}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-switch-mode-button__content svelte-1t2edyt")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function bb(s){let t,n,e;return n=new bp({}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-switch-mode-button__content svelte-1t2edyt")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function _b(s){let t,n,e,o,r,i;return e=new he({props:{variant:s[0]===Pn.tasks?"soft":"ghost",color:s[0]===Pn.tasks?"accent":"neutral",size:1,class:"c-switch-mode-button__tasks-btn",$$slots:{default:[xb]},$$scope:{ctx:s}}}),e.$on("click",s[5]),r=new he({props:{variant:s[0]===Pn.agentEdits?"soft":"ghost",color:s[0]===Pn.agentEdits?"accent":"neutral",size:1,class:"c-switch-mode-button__changes-btn",$$slots:{default:[bb]},$$scope:{ctx:s}}}),r.$on("click",s[5]),{c(){t=D("div"),n=D("div"),g(e.$$.fragment),o=z(),g(r.$$.fragment),k(n,"class","c-switch-mode-button__group svelte-1t2edyt"),k(t,"class","c-switch-mode-button svelte-1t2edyt")},m(c,a){_(c,t,a),P(t,n),h(e,n,null),P(n,o),h(r,n,null),i=!0},p(c,a){const l={};1&a&&(l.variant=c[0]===Pn.tasks?"soft":"ghost"),1&a&&(l.color=c[0]===Pn.tasks?"accent":"neutral"),64&a&&(l.$$scope={dirty:a,ctx:c}),e.$set(l);const u={};1&a&&(u.variant=c[0]===Pn.agentEdits?"soft":"ghost"),1&a&&(u.color=c[0]===Pn.agentEdits?"accent":"neutral"),64&a&&(u.$$scope={dirty:a,ctx:c}),r.$set(u)},i(c){i||(d(e.$$.fragment,c),d(r.$$.fragment,c),i=!0)},o(c){$(e.$$.fragment,c),$(r.$$.fragment,c),i=!1},d(c){c&&y(t),v(e),v(r)}}}function Cb(s){let t,n,e=s[2]&&s[3]&&function(o){let r,i;return r=new Nt({props:{content:o[1],triggerOn:[te.Hover],side:"top",$$slots:{default:[_b]},$$scope:{ctx:o}}}),{c(){g(r.$$.fragment)},m(c,a){h(r,c,a),i=!0},p(c,a){const l={};2&a&&(l.content=c[1]),65&a&&(l.$$scope={dirty:a,ctx:c}),r.$set(l)},i(c){i||(d(r.$$.fragment,c),i=!0)},o(c){$(r.$$.fragment,c),i=!1},d(c){v(r,c)}}}(s);return{c(){e&&e.c(),t=gt()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,[r]){o[2]&&o[3]&&e.p(o,r)},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function Ab(s,t,n){let e,o;const r=Mt(N1),i=Mt(wo.key),c=r==null?void 0:r.activePanel;return kt(s,c,a=>n(0,o=a)),s.$$.update=()=>{1&s.$$.dirty&&n(1,e=o===Pn.agentEdits?"Switch to Tasks view":"Switch to Changes view")},[o,e,r,i,c,async function(){r==null||r.togglePanel()}]}class F1 extends ct{constructor(t){super(),lt(this,t,Ab,Cb,it,{})}}const Mb=s=>({}),Pu=s=>({}),kb=s=>({}),Nu=s=>({});function Fu(s){let t,n,e;return n=new F1({}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-agent-edits-header__switch-btn")},m(o,r){_(o,t,r),h(n,t,null),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function Sb(s){let t,n,e,o,r=s[0]===1?"":"s";return{c(){t=V(s[0]),n=V(" file"),e=V(r),o=V(" changed")},m(i,c){_(i,t,c),_(i,n,c),_(i,e,c),_(i,o,c)},p(i,c){1&c&&ht(t,i[0]),1&c&&r!==(r=i[0]===1?"":"s")&&ht(e,r)},d(i){i&&(y(t),y(n),y(e),y(o))}}}function zu(s){let t,n,e;return n=new Qi({props:{totalAddedLines:s[1].totalAddedLines,totalRemovedLines:s[1].totalRemovedLines}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-agent-edits-header__summary")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};2&r&&(i.totalAddedLines=o[1].totalAddedLines),2&r&&(i.totalRemovedLines=o[1].totalRemovedLines),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function Ou(s){let t,n,e,o,r=s[4]&&Bu(s),i=s[5]&&Hu(s);const c=s[9].actions,a=Xt(c,s,s[10],Pu);return{c(){t=D("div"),r&&r.c(),n=z(),i&&i.c(),e=z(),a&&a.c(),k(t,"class","c-agent-edits-header__actions")},m(l,u){_(l,t,u),r&&r.m(t,null),P(t,n),i&&i.m(t,null),P(t,e),a&&a.m(t,null),o=!0},p(l,u){l[4]?r?(r.p(l,u),16&u&&d(r,1)):(r=Bu(l),r.c(),d(r,1),r.m(t,n)):r&&(Y(),$(r,1,1,()=>{r=null}),K()),l[5]?i?(i.p(l,u),32&u&&d(i,1)):(i=Hu(l),i.c(),d(i,1),i.m(t,e)):i&&(Y(),$(i,1,1,()=>{i=null}),K()),a&&a.p&&(!o||1024&u)&&Jt(a,c,l,l[10],o?Qt(c,l[10],u,Mb):Zt(l[10]),Pu)},i(l){o||(d(r),d(i),d(a,l),o=!0)},o(l){$(r),$(i),$(a,l),o=!1},d(l){l&&y(t),r&&r.d(),i&&i.d(),a&&a.d(l)}}}function Bu(s){let t,n;return t=new he({props:{class:"c-agent-edits-header__revert-btn",variant:"soft",color:"neutral",size:1,$$slots:{default:[Eb]},$$scope:{ctx:s}}}),t.$on("click",function(){xe(s[4])&&s[4].apply(this,arguments)}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){s=e;const r={};1024&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Tb(s){let t,n,e,o;return t=new D1({}),{c(){g(t.$$.fragment),n=z(),e=D("span"),e.textContent="Discard All",k(e,"class","c-agent-edits-header__revert-btn__text")},m(r,i){h(t,r,i),_(r,n,i),_(r,e,i),o=!0},p:N,i(r){o||(d(t.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),o=!1},d(r){r&&(y(n),y(e)),v(t,r)}}}function Eb(s){let t,n;return t=new Nt({props:{triggerOn:[te.Hover],content:"Discard all changes",$$slots:{default:[Tb]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Hu(s){let t,n;return t=new he({props:{class:"c-agent-edits-header__accept-btn",variant:"soft",color:"success",size:1,$$slots:{default:[Lb]},$$scope:{ctx:s}}}),t.$on("click",function(){xe(s[5])&&s[5].apply(this,arguments)}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){s=e;const r={};1024&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Ib(s){let t,n,e,o;return t=new R1({}),{c(){g(t.$$.fragment),n=z(),e=D("span"),e.textContent="Keep All",k(e,"class","c-agent-edits-header__accept-btn__text")},m(r,i){h(t,r,i),_(r,n,i),_(r,e,i),o=!0},p:N,i(r){o||(d(t.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),o=!1},d(r){r&&(y(n),y(e)),v(t,r)}}}function Lb(s){let t,n;return t=new Nt({props:{triggerOn:[te.Hover],content:"Keep all changes and clear checkpoints",$$slots:{default:[Ib]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Rb(s){let t,n,e,o,r,i,c,a,l,u;o=new ui({});let m=s[6].enableTaskList&&Fu();const p=s[9].text,f=Xt(p,s,s[10],Nu),x=f||function(M){let S,L;return S=new Ot({props:{size:1,color:"neutral",$$slots:{default:[Sb]},$$scope:{ctx:M}}}),{c(){g(S.$$.fragment)},m(I,X){h(S,I,X),L=!0},p(I,X){const j={};1025&X&&(j.$$scope={dirty:X,ctx:I}),S.$set(j)},i(I){L||(d(S.$$.fragment,I),L=!0)},o(I){$(S.$$.fragment,I),L=!1},d(I){v(S,I)}}}(s);let A=s[3]&&zu(s),C=(s[2]&&s[3]&&(s[4]||s[5])||s[8].actions)&&Ou(s);return{c(){t=D("div"),n=D("div"),e=D("div"),g(o.$$.fragment),r=z(),m&&m.c(),i=z(),c=D("div"),x&&x.c(),a=z(),A&&A.c(),l=z(),C&&C.c(),k(e,"class","c-agent-edits-header__collapse-btn"),k(c,"class","c-agent-edits-header__info-container"),k(n,"class","c-agent-edits-header__content"),k(t,"class","c-agent-edits-header svelte-1lfr6nx")},m(M,S){_(M,t,S),P(t,n),P(n,e),h(o,e,null),P(n,r),m&&m.m(n,null),P(n,i),P(n,c),x&&x.m(c,null),P(n,a),A&&A.m(n,null),P(t,l),C&&C.m(t,null),u=!0},p(M,[S]){M[6].enableTaskList?m?64&S&&d(m,1):(m=Fu(),m.c(),d(m,1),m.m(n,i)):m&&(Y(),$(m,1,1,()=>{m=null}),K()),f?f.p&&(!u||1024&S)&&Jt(f,p,M,M[10],u?Qt(p,M[10],S,kb):Zt(M[10]),Nu):x&&x.p&&(!u||1&S)&&x.p(M,u?S:-1),M[3]?A?(A.p(M,S),8&S&&d(A,1)):(A=zu(M),A.c(),d(A,1),A.m(n,null)):A&&(Y(),$(A,1,1,()=>{A=null}),K()),M[2]&&M[3]&&(M[4]||M[5])||M[8].actions?C?(C.p(M,S),316&S&&d(C,1)):(C=Ou(M),C.c(),d(C,1),C.m(t,null)):C&&(Y(),$(C,1,1,()=>{C=null}),K())},i(M){u||(d(o.$$.fragment,M),d(m),d(x,M),d(A),d(C),u=!0)},o(M){$(o.$$.fragment,M),$(m),$(x,M),$(A),$(C),u=!1},d(M){M&&y(t),v(o),m&&m.d(),x&&x.d(M),A&&A.d(),C&&C.d()}}}function Db(s,t,n){let e,{$$slots:o={},$$scope:r}=t;const i=$p(o);let{filesCount:c}=t,{diffSummary:a}=t,{collapsed:l}=t,{hasChanges:u}=t,{onRevert:m}=t,{onKeep:p}=t;const f=Mt("chatModel").flags;return kt(s,f,x=>n(6,e=x)),s.$$set=x=>{"filesCount"in x&&n(0,c=x.filesCount),"diffSummary"in x&&n(1,a=x.diffSummary),"collapsed"in x&&n(2,l=x.collapsed),"hasChanges"in x&&n(3,u=x.hasChanges),"onRevert"in x&&n(4,m=x.onRevert),"onKeep"in x&&n(5,p=x.onKeep),"$$scope"in x&&n(10,r=x.$$scope)},[c,a,l,u,m,p,e,f,i,o,r]}class z1 extends ct{constructor(t){super(),lt(this,t,Db,Rb,it,{filesCount:0,diffSummary:1,collapsed:2,hasChanges:3,onRevert:4,onKeep:5})}}function Uu(s,t,n){const e=s.slice();return e[28]=t[n],e}function qu(s){let t,n,e,o;function r(c){s[24](c)}let i={class:"c-agent-edits-container__block-container",$$slots:{footer:[Bb],header:[Ob],default:[zb]},$$scope:{ctx:s}};return s[6]!==void 0&&(i.collapsed=s[6]),n=new ss({props:i}),Gt.push(()=>ke(n,"collapsed",r)),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-agent-edits-container svelte-fdz1jv")},m(c,a){_(c,t,a),h(n,t,null),o=!0},p(c,a){const l={};197&a[0]|1&a[1]&&(l.$$scope={dirty:a,ctx:c}),!e&&64&a[0]&&(e=!0,l.collapsed=c[6],De(()=>e=!1)),n.$set(l)},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&y(t),v(n)}}}function Pb(s){let t,n,e;return n=new Ot({props:{size:1,color:"neutral",$$slots:{default:[Fb]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-edits-list c-edits-list--empty svelte-fdz1jv")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};1&r[1]&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function Nb(s){let t,n,e,o=ee(s[0]),r=[];for(let c=0;c<o.length;c+=1)r[c]=ju(Uu(s,o,c));const i=c=>$(r[c],1,1,()=>{r[c]=null});return{c(){t=D("div"),n=D("div");for(let c=0;c<r.length;c+=1)r[c].c();k(n,"class","c-edits-section svelte-fdz1jv"),k(t,"class","c-edits-list svelte-fdz1jv")},m(c,a){_(c,t,a),P(t,n);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(n,null);e=!0},p(c,a){if(114689&a[0]){let l;for(o=ee(c[0]),l=0;l<o.length;l+=1){const u=Uu(c,o,l);r[l]?(r[l].p(u,a),d(r[l],1)):(r[l]=ju(u),r[l].c(),d(r[l],1),r[l].m(n,null))}for(Y(),l=o.length;l<r.length;l+=1)i(l);K()}},i(c){if(!e){for(let a=0;a<o.length;a+=1)d(r[a]);e=!0}},o(c){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)$(r[a]);e=!1},d(c){c&&y(t),rn(r,c)}}}function Fb(s){let t;return{c(){t=V("No changes to show")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function ju(s){let t,n;function e(){return s[21](s[28])}function o(){return s[22](s[28])}function r(){return s[23](s[28])}return t=new ya({props:{qualifiedPathName:s[28].qualifiedPathName,lineChanges:s[28].changesSummary,onClickFile:e,onClickReview:o,onClickRevert:r}}),{c(){g(t.$$.fragment)},m(i,c){h(t,i,c),n=!0},p(i,c){s=i;const a={};1&c[0]&&(a.qualifiedPathName=s[28].qualifiedPathName),1&c[0]&&(a.lineChanges=s[28].changesSummary),1&c[0]&&(a.onClickFile=e),1&c[0]&&(a.onClickReview=o),1&c[0]&&(a.onClickRevert=r),t.$set(a)},i(i){n||(d(t.$$.fragment,i),n=!0)},o(i){$(t.$$.fragment,i),n=!1},d(i){v(t,i)}}}function zb(s){let t,n,e,o;const r=[Nb,Pb],i=[];function c(a,l){return a[0].length>0?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?i[t].p(a,l):(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function Ob(s){let t,n;return t=new z1({props:{filesCount:s[0].length,diffSummary:s[2],collapsed:s[6],hasChanges:s[7],onRevert:s[17],onKeep:s[18],slot:"header"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o[0]&&(r.filesCount=e[0].length),4&o[0]&&(r.diffSummary=e[2]),64&o[0]&&(r.collapsed=e[6]),128&o[0]&&(r.hasChanges=e[7]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Bb(s){let t,n;return t=new Ex({props:{slot:"footer"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Hb(s){let t,n,e=(s[3]&&s[4]>0&&s[0].length>0||s[5])&&qu(s);return{c(){e&&e.c(),t=gt()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,r){o[3]&&o[4]>0&&o[0].length>0||o[5]?e?(e.p(o,r),57&r[0]&&d(e,1)):(e=qu(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function Xs(s){if(!s)return"";if(s===Number.MAX_SAFE_INTEGER)return"Now";const t=new Date(s),n=new Date,e=t.getHours(),o=`${e%12||12}:${t.getMinutes().toString().padStart(2,"0")}${e>=12?"PM":"AM"}`,r=Math.floor((n.getTime()-t.getTime())/864e5);return r===0?o:r===1?`Yesterday at ${o}`:`${r} days ago at ${o}`}function Ub(s,t,n){let e,o,r,i,c,a,l,u,m,p,f=N;s.$$.on_destroy.push(()=>f());const x=Mt("chatModel");kt(s,x,O=>n(19,i=O));const A=Mt("agentConversationModel"),C=Mt("checkpointStore"),M=Mt(wo.key),{targetCheckpointSummary:S,totalCheckpointCount:L,targetCheckpointHasChanges:I}=C;kt(s,S,O=>n(20,c=O)),kt(s,L,O=>n(4,l=O)),kt(s,I,O=>n(7,p=O));const{isCurrConversationAgentic:X}=A;kt(s,X,O=>n(3,a=O));const{canShowTaskList:j}=M;function H(O){x.extensionClient.openFile({repoRoot:O.rootPath,pathName:O.relPath,allowOutOfWorkspace:!0})}function J(O){const Z=A.getBaselineTimestamp();x.extensionClient.showAgentReview(O,Z,void 0,!1,!0)}function U(O){const Z=A.getBaselineTimestamp();C.revertDocumentToTimestamp(O,Z)}return kt(s,j,O=>n(5,u=O)),s.$$.update=()=>{1048576&s.$$.dirty[0]&&n(0,e=c.filter(O=>O.changesSummary&&(O.changesSummary.totalAddedLines>0||O.changesSummary.totalRemovedLines>0))),1&s.$$.dirty[0]&&n(2,o=e.reduce((O,Z)=>{var et,Q;return O.totalAddedLines+=((et=Z.changesSummary)==null?void 0:et.totalAddedLines)??0,O.totalRemovedLines+=((Q=Z.changesSummary)==null?void 0:Q.totalRemovedLines)??0,O},{totalAddedLines:0,totalRemovedLines:0})),524288&s.$$.dirty[0]&&(n(1,r=i.isPanelCollapsed),f(),f=oe(r,O=>n(6,m=O)))},[e,r,o,a,l,u,m,p,x,S,L,I,X,j,H,J,U,async function(){await C.rejectAll()},async function(){await C.acceptAll()},i,c,O=>H(O.qualifiedPathName),O=>J(O.qualifiedPathName),O=>U(O.qualifiedPathName),function(O){m=O,r.set(m)}]}class qb extends ct{constructor(t){super(),lt(this,t,Ub,Hb,it,{},null,[-1,-1])}}function Wu(s){let t,n,e,o,r;return n=new r0({props:{size:1,insetContent:!0,variant:"ghost",class:"c-checkpoint-tag","data-testid":"checkpoint-version-tag",$$slots:{default:[Kb]},$$scope:{ctx:s}}}),n.$on("click",s[17]),o=new se({props:{variant:s[6]?"soft":"ghost-block",color:"neutral",size:1,disabled:s[6]||s[4],class:"c-revert-button","data-testid":"revert-button",$$slots:{default:[Jb]},$$scope:{ctx:s}}}),o.$on("click",s[12]),{c(){t=D("div"),g(n.$$.fragment),e=z(),g(o.$$.fragment),k(t,"class","c-checkpoint-container svelte-q20gs5"),k(t,"data-checkpoint-number",s[0]),xt(t,"c-checkpoint-container--target-checkpoint",s[6]),xt(t,"c-checkpoint-container--dimmed-marker",s[5])},m(i,c){_(i,t,c),h(n,t,null),P(t,e),h(o,t,null),r=!0},p(i,c){const a={};1048778&c&&(a.$$scope={dirty:c,ctx:i}),n.$set(a);const l={};64&c&&(l.variant=i[6]?"soft":"ghost-block"),80&c&&(l.disabled=i[6]||i[4]),1048656&c&&(l.$$scope={dirty:c,ctx:i}),o.$set(l),(!r||1&c)&&k(t,"data-checkpoint-number",i[0]),(!r||64&c)&&xt(t,"c-checkpoint-container--target-checkpoint",i[6]),(!r||32&c)&&xt(t,"c-checkpoint-container--dimmed-marker",i[5])},i(i){r||(d(n.$$.fragment,i),d(o.$$.fragment,i),r=!0)},o(i){$(n.$$.fragment,i),$(o.$$.fragment,i),r=!1},d(i){i&&y(t),v(n),v(o)}}}function jb(s){let t,n;return t=new L1({props:{slot:"leftIcon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Wb(s){let t,n;return{c(){t=V("Checkpoint "),n=V(s[3])},m(e,o){_(e,t,o),_(e,n,o)},p(e,o){8&o&&ht(n,e[3])},d(e){e&&(y(t),y(n))}}}function Vb(s){let t,n=Xs(s[7])+"";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){128&o&&n!==(n=Xs(e[7])+"")&&ht(t,n)},d(e){e&&y(t)}}}function Gb(s){let t;return{c(){t=V(s[1])},m(n,e){_(n,t,e)},p(n,e){2&e&&ht(t,n[1])},d(n){n&&y(t)}}}function Yb(s){let t;function n(r,i){return r[1]?Gb:r[6]?Vb:void 0}let e=n(s),o=e&&e(s);return{c(){o&&o.c(),t=gt()},m(r,i){o&&o.m(r,i),_(r,t,i)},p(r,i){e===(e=n(r))&&o?o.p(r,i):(o&&o.d(1),o=e&&e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&y(t),o&&o.d(r)}}}function Kb(s){let t,n;return t=new da({props:{size:1,shrink:!0,align:"left",$$slots:{grayText:[Yb],text:[Wb],leftIcon:[jb]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1048778&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Xb(s){let t,n;return t=new I1({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Jb(s){let t,n;return t=new Nt({props:{triggerOn:[te.Hover],content:s[6]||s[4]?"Cannot revert to current version":"Revert to this version",$$slots:{default:[Xb]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};80&o&&(r.content=e[6]||e[4]?"Cannot revert to current version":"Revert to this version"),1048576&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Zb(s){let t,n,e=(!s[4]||s[2])&&Wu(s);return{c(){e&&e.c(),t=gt()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,[r]){!o[4]||o[2]?e?(e.p(o,r),20&r&&d(e,1)):(e=Wu(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function Qb(s,t,n){let e,o,r,i,c,a,l,u,m,p,f,{turn:x}=t;const A=Mt("checkpointStore"),{targetCheckpointIdx:C,totalCheckpointCount:M,uuidToIdx:S}=A;function L(I){Ur(C,p=I,p)}return kt(s,C,I=>n(15,p=I)),kt(s,M,I=>n(14,m=I)),kt(s,S,I=>n(16,f=I)),s.$$set=I=>{"turn"in I&&n(13,x=I.turn)},s.$$.update=()=>{var I,X,j;73728&s.$$.dirty&&n(0,e=f.get(x.uuid)??-1),8192&s.$$.dirty&&n(7,o=x.toTimestamp),49153&s.$$.dirty&&n(6,(X=m,r=(I=e)===(j=p)||j===void 0&&I===X-1)),49153&s.$$.dirty&&n(5,i=function(H,J,U){return H===U&&U!==void 0&&U<J-1}(e,m,p)),16385&s.$$.dirty&&n(4,c=e===m-1),1&s.$$.dirty&&n(3,a=e+1),8192&s.$$.dirty&&n(2,l=Ws(x)),8192&s.$$.dirty&&n(1,u=Ws(x)?function(H){var J,U;if((J=H.revertTarget)!=null&&J.uuid){const O=f.get(H.revertTarget.uuid);return O===void 0?void 0:`Reverted to Checkpoint ${O+1}`}return(U=H.revertTarget)!=null&&U.filePath?`Undid changes to ${H.revertTarget.filePath.relPath}`:void 0}(x):void 0)},[e,u,l,a,c,i,r,o,C,M,S,L,async function(){await A.revertToCheckpoint(x.uuid)},x,m,p,f,()=>L(e)]}class t_ extends ct{constructor(t){super(),lt(this,t,Qb,Zb,it,{turn:13})}}function e_(s){let t,n;return t=new L1({props:{slot:"leftIcon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Vu(s){let t,n,e,o,r,i,c=s[1]===1?"":"s";return{c(){t=D("span"),n=V("("),e=V(s[1]),o=V(" file"),r=V(c),i=V(")"),k(t,"class","c-checkpoint-files-count")},m(a,l){_(a,t,l),P(t,n),P(t,e),P(t,o),P(t,r),P(t,i)},p(a,l){2&l&&ht(e,a[1]),2&l&&c!==(c=a[1]===1?"":"s")&&ht(r,c)},d(a){a&&y(t)}}}function n_(s){let t,n,e,o,r=s[1]>0&&Vu(s);return{c(){t=V("Checkpoint "),n=V(s[0]),e=z(),r&&r.c(),o=gt()},m(i,c){_(i,t,c),_(i,n,c),_(i,e,c),r&&r.m(i,c),_(i,o,c)},p(i,c){1&c&&ht(n,i[0]),i[1]>0?r?r.p(i,c):(r=Vu(i),r.c(),r.m(o.parentNode,o)):r&&(r.d(1),r=null)},d(i){i&&(y(t),y(n),y(e),y(o)),r&&r.d(i)}}}function o_(s){let t;return{c(){t=V(s[2])},m(n,e){_(n,t,e)},p(n,e){4&e&&ht(t,n[2])},d(n){n&&y(t)}}}function r_(s){let t;return{c(){t=V(s[3])},m(n,e){_(n,t,e)},p(n,e){8&e&&ht(t,n[3])},d(n){n&&y(t)}}}function s_(s){let t;function n(r,i){return r[3]?r_:r[2]?o_:void 0}let e=n(s),o=e&&e(s);return{c(){o&&o.c(),t=gt()},m(r,i){o&&o.m(r,i),_(r,t,i)},p(r,i){e===(e=n(r))&&o?o.p(r,i):(o&&o.d(1),o=e&&e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&y(t),o&&o.d(r)}}}function Gu(s){let t,n,e;return n=new Qi({props:{totalAddedLines:s[4].totalAddedLines,totalRemovedLines:s[4].totalRemovedLines}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-checkpoint-summary")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};16&r&&(i.totalAddedLines=o[4].totalAddedLines),16&r&&(i.totalRemovedLines=o[4].totalRemovedLines),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function Yu(s){let t,n;return t=new se({props:{variant:"ghost-block",color:"neutral",size:1,class:"c-revert-button","data-testid":"revert-button",$$slots:{default:[a_]},$$scope:{ctx:s}}}),t.$on("click",function(){xe(s[7])&&s[7].apply(this,arguments)}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){s=e;const r={};256&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function i_(s){let t,n;return t=new I1({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function a_(s){let t,n;return t=new Nt({props:{triggerOn:[te.Hover],content:"Revert to this Checkpoint",$$slots:{default:[i_]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};256&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function c_(s){let t,n,e,o,r,i,c,a;e=new ui({}),r=new da({props:{size:1,shrink:!0,align:"left",$$slots:{grayText:[s_],text:[n_],leftIcon:[e_]},$$scope:{ctx:s}}});let l=s[5]&&Gu(s),u=!s[6]&&Yu(s);return{c(){t=D("div"),n=D("div"),g(e.$$.fragment),o=z(),g(r.$$.fragment),i=z(),l&&l.c(),c=z(),u&&u.c(),k(n,"class","c-checkpoint-tag"),k(t,"class","c-checkpoint-header svelte-htx8xt")},m(m,p){_(m,t,p),P(t,n),h(e,n,null),P(n,o),h(r,n,null),P(t,i),l&&l.m(t,null),P(t,c),u&&u.m(t,null),a=!0},p(m,[p]){const f={};271&p&&(f.$$scope={dirty:p,ctx:m}),r.$set(f),m[5]?l?(l.p(m,p),32&p&&d(l,1)):(l=Gu(m),l.c(),d(l,1),l.m(t,c)):l&&(Y(),$(l,1,1,()=>{l=null}),K()),m[6]?u&&(Y(),$(u,1,1,()=>{u=null}),K()):u?(u.p(m,p),64&p&&d(u,1)):(u=Yu(m),u.c(),d(u,1),u.m(t,null))},i(m){a||(d(e.$$.fragment,m),d(r.$$.fragment,m),d(l),d(u),a=!0)},o(m){$(e.$$.fragment,m),$(r.$$.fragment,m),$(l),$(u),a=!1},d(m){m&&y(t),v(e),v(r),l&&l.d(),u&&u.d()}}}function l_(s,t,n){let{displayCheckpointIdx:e}=t,{filesCount:o=0}=t,{timestamp:r=""}=t,{revertMessage:i}=t,{diffSummary:c={totalAddedLines:0,totalRemovedLines:0}}=t,{hasChanges:a=!1}=t,{isTarget:l=!1}=t,{onRevertClick:u}=t;return s.$$set=m=>{"displayCheckpointIdx"in m&&n(0,e=m.displayCheckpointIdx),"filesCount"in m&&n(1,o=m.filesCount),"timestamp"in m&&n(2,r=m.timestamp),"revertMessage"in m&&n(3,i=m.revertMessage),"diffSummary"in m&&n(4,c=m.diffSummary),"hasChanges"in m&&n(5,a=m.hasChanges),"isTarget"in m&&n(6,l=m.isTarget),"onRevertClick"in m&&n(7,u=m.onRevertClick)},[e,o,r,i,c,a,l,u]}class u_ extends ct{constructor(t){super(),lt(this,t,l_,c_,it,{displayCheckpointIdx:0,filesCount:1,timestamp:2,revertMessage:3,diffSummary:4,hasChanges:5,isTarget:6,onRevertClick:7})}}function Ku(s,t,n){const e=s.slice();return e[33]=t[n],e}function Xu(s){let t,n,e,o,r,i,c;function a(u){s[27](u)}let l={class:"c-checkpoint-collapsible",stickyHeader:!0,$$slots:{header:[f_],default:[p_]},$$scope:{ctx:s}};return s[3]!==void 0&&(l.collapsed=s[3]),n=new ss({props:l}),Gt.push(()=>ke(n,"collapsed",a)),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-checkpoint-container svelte-1e7odgw"),k(t,"data-checkpoint-number",s[2]),xt(t,"c-checkpoint-container--target-checkpoint",s[11]),xt(t,"c-checkpoint-container--dimmed-marker",s[10])},m(u,m){_(u,t,m),h(n,t,null),r=!0,i||(c=Lo(o=Yf.call(null,t,{onVisible:s[28],scrollTarget:document.body})),i=!0)},p(u,m){const p={};6522&m[0]|32&m[1]&&(p.$$scope={dirty:m,ctx:u}),!e&&8&m[0]&&(e=!0,p.collapsed=u[3],De(()=>e=!1)),n.$set(p),(!r||4&m[0])&&k(t,"data-checkpoint-number",u[2]),o&&xe(o.update)&&1&m[0]&&o.update.call(null,{onVisible:u[28],scrollTarget:document.body}),(!r||2048&m[0])&&xt(t,"c-checkpoint-container--target-checkpoint",u[11]),(!r||1024&m[0])&&xt(t,"c-checkpoint-container--dimmed-marker",u[10])},i(u){r||(d(n.$$.fragment,u),r=!0)},o(u){$(n.$$.fragment,u),r=!1},d(u){u&&y(t),v(n),i=!1,c()}}}function d_(s){let t,n,e;return n=new Ot({props:{size:1,color:"neutral",$$slots:{default:[m_]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-edits-list c-edits-list--empty svelte-1e7odgw")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};32&r[1]&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function $_(s){let t,n,e=ee(s[1]),o=[];for(let i=0;i<e.length;i+=1)o[i]=Ju(Ku(s,e,i));const r=i=>$(o[i],1,1,()=>{o[i]=null});return{c(){t=D("div");for(let i=0;i<o.length;i+=1)o[i].c();k(t,"class","c-edits-list svelte-1e7odgw")},m(i,c){_(i,t,c);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(t,null);n=!0},p(i,c){if(196610&c[0]){let a;for(e=ee(i[1]),a=0;a<e.length;a+=1){const l=Ku(i,e,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=Ju(l),o[a].c(),d(o[a],1),o[a].m(t,null))}for(Y(),a=e.length;a<o.length;a+=1)r(a);K()}},i(i){if(!n){for(let c=0;c<e.length;c+=1)d(o[c]);n=!0}},o(i){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(i){i&&y(t),rn(o,i)}}}function m_(s){let t;return{c(){t=V("No changes to show")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Ju(s){let t,n;function e(){return s[25](s[33])}function o(){return s[26](s[33])}return t=new ya({props:{qualifiedPathName:s[33].qualifiedPathName,lineChanges:s[33].changesSummary,onClickFile:e,onClickReview:o}}),{c(){g(t.$$.fragment)},m(r,i){h(t,r,i),n=!0},p(r,i){s=r;const c={};2&i[0]&&(c.qualifiedPathName=s[33].qualifiedPathName),2&i[0]&&(c.lineChanges=s[33].changesSummary),2&i[0]&&(c.onClickFile=e),2&i[0]&&(c.onClickReview=o),t.$set(c)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){v(t,r)}}}function p_(s){let t,n,e,o;const r=[$_,d_],i=[];function c(a,l){return a[4]?0:a[3]?-1:1}return~(t=c(s))&&(n=i[t]=r[t](s)),{c(){n&&n.c(),e=gt()},m(a,l){~t&&i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?~t&&i[t].p(a,l):(n&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K()),~t?(n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),~t&&i[t].d(a)}}}function f_(s){let t,n;return t=new u_({props:{slot:"header",displayCheckpointIdx:s[8],filesCount:s[1].length,timestamp:Xs(s[12]),revertMessage:s[6],diffSummary:s[5],hasChanges:s[4],isTarget:s[11],onRevertClick:s[18]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};256&o[0]&&(r.displayCheckpointIdx=e[8]),2&o[0]&&(r.filesCount=e[1].length),4096&o[0]&&(r.timestamp=Xs(e[12])),64&o[0]&&(r.revertMessage=e[6]),32&o[0]&&(r.diffSummary=e[5]),16&o[0]&&(r.hasChanges=e[4]),2048&o[0]&&(r.isTarget=e[11]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function g_(s){let t,n,e=(!s[9]||s[7])&&Xu(s);return{c(){e&&e.c(),t=gt()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,r){!o[9]||o[7]?e?(e.p(o,r),640&r[0]&&d(e,1)):(e=Xu(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function h_(s,t,n){let e,o,r,i,c,a,l,u,m,p,f,x,A,C,M,{turn:S}=t;const L=Mt("checkpointStore"),I=Mt("chatModel"),{targetCheckpointIdx:X,totalCheckpointCount:j,uuidToIdx:H}=L;kt(s,X,ut=>n(23,C=ut)),kt(s,j,ut=>n(22,A=ut)),kt(s,H,ut=>n(24,M=ut));let J=!0;function U(ut){I==null||I.extensionClient.openFile({repoRoot:ut.rootPath,pathName:ut.relPath,allowOutOfWorkspace:!0})}function O(ut){I==null||I.extensionClient.showAgentReview(ut,r,o,!1)}let Z=[],et=!1,Q=!1;return s.$$set=ut=>{"turn"in ut&&n(19,S=ut.turn)},s.$$.update=()=>{var ut,rt,mt;17301504&s.$$.dirty[0]&&n(2,e=M.get(S.uuid)??-1),524288&s.$$.dirty[0]&&n(12,o=S.toTimestamp),524288&s.$$.dirty[0]&&(r=S.fromTimestamp),12582916&s.$$.dirty[0]&&n(11,(rt=A,i=(ut=e)===(mt=C)||mt===void 0&&ut===rt-1)),12582916&s.$$.dirty[0]&&n(10,c=function(G,Tt,Bt){return G===Bt&&Bt!==void 0&&Bt<Tt-1}(e,A,C)),4194308&s.$$.dirty[0]&&n(9,a=e===A-1),4&s.$$.dirty[0]&&n(8,l=e+1),524288&s.$$.dirty[0]&&n(7,u=Ws(S)),524288&s.$$.dirty[0]&&n(6,m=Ws(S)?function(G){var Tt,Bt;if((Tt=G.revertTarget)!=null&&Tt.uuid){const _t=M.get(G.revertTarget.uuid);return _t===void 0?void 0:`Reverted to Checkpoint ${_t+1}`}return(Bt=G.revertTarget)!=null&&Bt.filePath?`Undid changes to ${G.revertTarget.filePath.relPath}`:void 0}(S):void 0),2621441&s.$$.dirty[0]&&et&&S&&!Q&&L.getCheckpointSummary(S).then(G=>{n(20,Z=G),n(21,Q=!0)}),1048576&s.$$.dirty[0]&&n(1,p=Z.filter(G=>G.changesSummary&&(G.changesSummary.totalAddedLines>0||G.changesSummary.totalRemovedLines>0))),2&s.$$.dirty[0]&&n(5,f=p.reduce((G,Tt)=>{var Bt,_t;return G.totalAddedLines+=((Bt=Tt.changesSummary)==null?void 0:Bt.totalAddedLines)??0,G.totalRemovedLines+=((_t=Tt.changesSummary)==null?void 0:_t.totalRemovedLines)??0,G},{totalAddedLines:0,totalRemovedLines:0})),2&s.$$.dirty[0]&&n(4,x=p.length>0)},[et,p,e,J,x,f,m,u,l,a,c,i,o,X,j,H,U,O,function(){L.revertToCheckpoint(S.uuid)},S,Z,Q,A,C,M,ut=>U(ut.qualifiedPathName),ut=>O(ut.qualifiedPathName),function(ut){J=ut,n(3,J)},()=>n(0,et=!0)]}class v_ extends ct{constructor(t){super(),lt(this,t,h_,g_,it,{turn:19},null,[-1,-1])}}const Zu={[ki.SUCCESS]:"success",[ki.FAILED]:"error",[ki.SKIPPED]:"skipped"},Qu={[pr.success]:"success",[pr.failure]:"error",[pr.running]:null,[pr.unknown]:"unknown",[pr.skipped]:"skipped"};function td(s){return s in Zu?Zu[s]:s in Qu?Qu[s]:null}function ed(s){switch(s){case"success":return"Success";case"error":return"Failed";case"skipped":return"Skipped";case"unknown":return"Unknown";case null:return"Running"}}function nd(s){let t,n,e;return n=new Ot({props:{size:1,type:"monospace",$$slots:{default:[w_]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-command-output__code-block svelte-1t0700a")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};16386&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function w_(s){let t;return{c(){t=V(s[1])},m(n,e){_(n,t,e)},p(n,e){2&e&&ht(t,n[1])},d(n){n&&y(t)}}}function od(s){let t,n,e,o;const r=[x_,y_],i=[];function c(a,l){return a[5]?0:1}return n=c(s),e=i[n]=r[n](s),{c(){t=D("div"),e.c(),k(t,"class","c-command-output__code-block c-command-output__code-block--output svelte-1t0700a")},m(a,l){_(a,t,l),i[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n===u?i[n].p(a,l):(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),e=i[n],e?e.p(a,l):(e=i[n]=r[n](a),e.c()),d(e,1),e.m(t,null))},i(a){o||(d(e),o=!0)},o(a){$(e),o=!1},d(a){a&&y(t),i[n].d()}}}function y_(s){let t,n;return t=new Ot({props:{size:1,type:"monospace",$$slots:{default:[b_]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};16388&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function x_(s){let t,n;return t=new Xp.Root({props:{$$slots:{default:[__]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};16452&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function b_(s){let t;return{c(){t=V(s[2])},m(n,e){_(n,t,e)},p(n,e){4&e&&ht(t,n[2])},d(n){n&&y(t)}}}function __(s){let t,n;return t=new s0({props:{text:s[2],lang:s[6]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.text=e[2]),64&o&&(r.lang=e[6]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function C_(s){let t,n,e,o,r=s[1]&&!s[0]&&nd(s),i=s[2]&&(!s[3]||s[3]!=="skipped")&&od(s);const c=s[12].default,a=Xt(c,s,s[14],null);return{c(){t=D("div"),r&&r.c(),n=z(),i&&i.c(),e=z(),a&&a.c(),k(t,"class","c-command-output__command-details")},m(l,u){_(l,t,u),r&&r.m(t,null),P(t,n),i&&i.m(t,null),P(t,e),a&&a.m(t,null),o=!0},p(l,u){l[1]&&!l[0]?r?(r.p(l,u),3&u&&d(r,1)):(r=nd(l),r.c(),d(r,1),r.m(t,n)):r&&(Y(),$(r,1,1,()=>{r=null}),K()),!l[2]||l[3]&&l[3]==="skipped"?i&&(Y(),$(i,1,1,()=>{i=null}),K()):i?(i.p(l,u),12&u&&d(i,1)):(i=od(l),i.c(),d(i,1),i.m(t,e)),a&&a.p&&(!o||16384&u)&&Jt(a,c,l,l[14],o?Qt(c,l[14],u,null):Zt(l[14]),null)},i(l){o||(d(r),d(i),d(a,l),o=!0)},o(l){$(r),$(i),$(a,l),o=!1},d(l){l&&y(t),r&&r.d(),i&&i.d(),a&&a.d(l)}}}function A_(s){let t;return{c(){t=D("div"),k(t,"class","c-command-output__collapsible-header__spacer svelte-1t0700a")},m(n,e){_(n,t,e)},i:N,o:N,d(n){n&&y(t)}}}function M_(s){let t,n;return t=new ui({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function k_(s){let t,n;return t=new Ot({props:{size:1,type:"monospace",$$slots:{default:[T_]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};16386&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function S_(s){let t,n;return t=new Ot({props:{size:1,weight:"medium",$$slots:{default:[E_]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};16385&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function T_(s){let t;return{c(){t=V(s[1])},m(n,e){_(n,t,e)},p(n,e){2&e&&ht(t,n[1])},d(n){n&&y(t)}}}function E_(s){let t;return{c(){t=V(s[0])},m(n,e){_(n,t,e)},p(n,e){1&e&&ht(t,n[0])},d(n){n&&y(t)}}}function I_(s){let t,n,e,o=s[3]==="skipped"&&rd(s);return n=new Nt({props:{content:ed(s[3]),triggerOn:[te.Hover],$$slots:{default:[D_]},$$scope:{ctx:s}}}),{c(){o&&o.c(),t=z(),g(n.$$.fragment)},m(r,i){o&&o.m(r,i),_(r,t,i),h(n,r,i),e=!0},p(r,i){r[3]==="skipped"?o?8&i&&d(o,1):(o=rd(r),o.c(),d(o,1),o.m(t.parentNode,t)):o&&(Y(),$(o,1,1,()=>{o=null}),K());const c={};8&i&&(c.content=ed(r[3])),16392&i&&(c.$$scope={dirty:i,ctx:r}),n.$set(c)},i(r){e||(d(o),d(n.$$.fragment,r),e=!0)},o(r){$(o),$(n.$$.fragment,r),e=!1},d(r){r&&y(t),o&&o.d(r),v(n,r)}}}function L_(s){let t,n,e;return n=new Tn({props:{size:1}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-command-output__status-icon c-command-output__status-icon--loading svelte-1t0700a")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function rd(s){let t,n;return t=new Ot({props:{size:1,$$slots:{default:[R_]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function R_(s){let t;return{c(){t=V("Skipped")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function D_(s){let t,n,e;var o=s[11](s[3]);return o&&(n=vn(o,{})),{c(){t=D("div"),n&&g(n.$$.fragment),k(t,"class","c-command-output__status-icon svelte-1t0700a"),xt(t,"c-command-output__status-icon--success",s[3]==="success"),xt(t,"c-command-output__status-icon--error",s[3]==="error"),xt(t,"c-command-output__status-icon--warning",s[3]==="skipped")},m(r,i){_(r,t,i),n&&h(n,t,null),e=!0},p(r,i){if(8&i&&o!==(o=r[11](r[3]))){if(n){Y();const c=n;$(c.$$.fragment,1,0,()=>{v(c,1)}),K()}o?(n=vn(o,{}),g(n.$$.fragment),d(n.$$.fragment,1),h(n,t,null)):n=null}(!e||8&i)&&xt(t,"c-command-output__status-icon--success",r[3]==="success"),(!e||8&i)&&xt(t,"c-command-output__status-icon--error",r[3]==="error"),(!e||8&i)&&xt(t,"c-command-output__status-icon--warning",r[3]==="skipped")},i(r){e||(n&&d(n.$$.fragment,r),e=!0)},o(r){n&&$(n.$$.fragment,r),e=!1},d(r){r&&y(t),n&&v(n)}}}function sd(s){let t,n;return t=new Nt({props:{content:s[7],align:"end",$$slots:{default:[N_]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};128&o&&(r.content=e[7]),17412&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function P_(s){let t,n;return t=new Hp({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function N_(s){let t,n;return t=new se({props:{variant:"ghost-block",color:"neutral",size:1,$$slots:{default:[P_]},$$scope:{ctx:s}}}),t.$on("click",s[13]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};16384&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function F_(s){let t,n,e,o,r,i,c,a,l,u,m,p;const f=[M_,A_],x=[];function A(H,J){return H[8]&&H[3]!=="skipped"?0:1}n=A(s),e=x[n]=f[n](s);const C=[S_,k_],M=[];function S(H,J){return H[0]?0:1}r=S(s),i=M[r]=C[r](s);const L=[L_,I_],I=[];function X(H,J){return H[9]?0:H[3]!==null?1:-1}~(l=X(s))&&(u=I[l]=L[l](s));let j=s[2]&&(!s[3]||s[3]!=="skipped")&&!s[9]&&sd(s);return{c(){t=D("div"),e.c(),o=z(),i.c(),c=z(),a=D("div"),u&&u.c(),m=z(),j&&j.c(),k(a,"class","c-command-output__status-indicator svelte-1t0700a"),k(t,"slot","header"),k(t,"class","c-command-output__collapsible-header svelte-1t0700a")},m(H,J){_(H,t,J),x[n].m(t,null),P(t,o),M[r].m(t,null),P(t,c),P(t,a),~l&&I[l].m(a,null),P(a,m),j&&j.m(a,null),p=!0},p(H,J){let U=n;n=A(H),n!==U&&(Y(),$(x[U],1,1,()=>{x[U]=null}),K(),e=x[n],e||(e=x[n]=f[n](H),e.c()),d(e,1),e.m(t,o));let O=r;r=S(H),r===O?M[r].p(H,J):(Y(),$(M[O],1,1,()=>{M[O]=null}),K(),i=M[r],i?i.p(H,J):(i=M[r]=C[r](H),i.c()),d(i,1),i.m(t,c));let Z=l;l=X(H),l===Z?~l&&I[l].p(H,J):(u&&(Y(),$(I[Z],1,1,()=>{I[Z]=null}),K()),~l?(u=I[l],u?u.p(H,J):(u=I[l]=L[l](H),u.c()),d(u,1),u.m(a,m)):u=null),!H[2]||H[3]&&H[3]==="skipped"||H[9]?j&&(Y(),$(j,1,1,()=>{j=null}),K()):j?(j.p(H,J),524&J&&d(j,1)):(j=sd(H),j.c(),d(j,1),j.m(a,null))},i(H){p||(d(e),d(i),d(u),d(j),p=!0)},o(H){$(e),$(i),$(u),$(j),p=!1},d(H){H&&y(t),x[n].d(),M[r].d(),~l&&I[l].d(),j&&j.d()}}}function z_(s){let t,n,e;return n=new ss({props:{collapsed:s[4],$$slots:{header:[F_],default:[C_]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-command-output__container svelte-1t0700a")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,[r]){const i={};16&r&&(i.collapsed=o[4]),18415&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function O_(s,t,n){let{$$slots:e={},$$scope:o}=t,{title:r=""}=t,{command:i=""}=t,{output:c=null}=t,{status:a=null}=t,{collapsed:l=!1}=t,{useMonaco:u=!1}=t,{monacoLang:m="bash"}=t,{viewButtonTooltip:p="View full output in editor"}=t,{showCollapseButton:f=!0}=t,{isLoading:x=!1}=t,{onViewOutput:A}=t;return s.$$set=C=>{"title"in C&&n(0,r=C.title),"command"in C&&n(1,i=C.command),"output"in C&&n(2,c=C.output),"status"in C&&n(3,a=C.status),"collapsed"in C&&n(4,l=C.collapsed),"useMonaco"in C&&n(5,u=C.useMonaco),"monacoLang"in C&&n(6,m=C.monacoLang),"viewButtonTooltip"in C&&n(7,p=C.viewButtonTooltip),"showCollapseButton"in C&&n(8,f=C.showCollapseButton),"isLoading"in C&&n(9,x=C.isLoading),"onViewOutput"in C&&n(10,A=C.onViewOutput),"$$scope"in C&&n(14,o=C.$$scope)},[r,i,c,a,l,u,m,p,f,x,A,function(C){return C==="success"||C==="skipped"?co:_p},e,C=>A(C,c),o]}class B_ extends ct{constructor(t){super(),lt(this,t,O_,z_,it,{title:0,command:1,output:2,status:3,collapsed:4,useMonaco:5,monacoLang:6,viewButtonTooltip:7,showCollapseButton:8,isLoading:9,onViewOutput:10})}}function id(s,t,n){const e=s.slice();return e[15]=t[n],e}function H_(s){let t,n,e,o,r;return n=new Ot({props:{size:1,color:"secondary",$$slots:{default:[q_]},$$scope:{ctx:s}}}),o=new Tn({props:{size:1}}),{c(){t=D("div"),g(n.$$.fragment),e=z(),g(o.$$.fragment),k(t,"class","c-agent-no-setup-logs svelte-12293rd")},m(i,c){_(i,t,c),h(n,t,null),P(t,e),h(o,t,null),r=!0},p(i,c){const a={};262144&c&&(a.$$scope={dirty:c,ctx:i}),n.$set(a)},i(i){r||(d(n.$$.fragment,i),d(o.$$.fragment,i),r=!0)},o(i){$(n.$$.fragment,i),$(o.$$.fragment,i),r=!1},d(i){i&&y(t),v(n),v(o)}}}function U_(s){let t,n,e,o,r,i,c,a,l,u,m,p,f,x,A,C,M,S;r=new se({props:{variant:"ghost",color:"neutral",size:1,class:"c-agent-setup-logs-toggle-button "+(s[2]?"c-agent-setup-logs-toggle-button--expanded":""),$$slots:{default:[j_]},$$scope:{ctx:s}}}),r.$on("click",s[7]);const L=[V_,W_],I=[];function X(et,Q){return et[0]?0:1}c=X(s),a=I[c]=L[c](s);const j=[X_,K_],H=[];function J(et,Q){return et[0]?0:1}m=J(s),p=H[m]=j[m](s);let U=ee(s[3].steps),O=[];for(let et=0;et<U.length;et+=1)O[et]=ad(id(s,U,et));const Z=et=>$(O[et],1,1,()=>{O[et]=null});return{c(){t=D("div"),n=D("div"),e=D("div"),o=D("div"),g(r.$$.fragment),i=z(),a.c(),l=z(),u=D("div"),p.c(),f=z(),x=D("div"),A=D("div");for(let et=0;et<O.length;et+=1)O[et].c();k(o,"class","c-agent-setup-logs-summary-left svelte-12293rd"),k(u,"class","c-agent-setup-logs-summary-icon svelte-12293rd"),k(e,"class","c-agent-setup-logs-summary-content svelte-12293rd"),k(n,"class","c-agent-setup-logs-summary svelte-12293rd"),k(n,"role","button"),k(n,"tabindex","0"),k(n,"aria-expanded",s[2]),k(n,"aria-controls","agent-setup-logs-details"),k(A,"class","c-agent-setup-logs svelte-12293rd"),k(x,"class","c-agent-setup-logs-wrapper svelte-12293rd"),xt(x,"is-hidden",!s[2]),k(t,"class","c-agent-setup-logs-container svelte-12293rd"),xt(t,"c-agent-setup-logs-container--loading",!s[0])},m(et,Q){_(et,t,Q),P(t,n),P(n,e),P(e,o),h(r,o,null),P(o,i),I[c].m(o,null),P(e,l),P(e,u),H[m].m(u,null),P(t,f),P(t,x),P(x,A);for(let ut=0;ut<O.length;ut+=1)O[ut]&&O[ut].m(A,null);s[13](t),C=!0,M||(S=[Et(n,"click",s[6]),Et(n,"keydown",s[8])],M=!0)},p(et,Q){const ut={};4&Q&&(ut.class="c-agent-setup-logs-toggle-button "+(et[2]?"c-agent-setup-logs-toggle-button--expanded":"")),262144&Q&&(ut.$$scope={dirty:Q,ctx:et}),r.$set(ut);let rt=c;c=X(et),c!==rt&&(Y(),$(I[rt],1,1,()=>{I[rt]=null}),K(),a=I[c],a||(a=I[c]=L[c](et),a.c()),d(a,1),a.m(o,null));let mt=m;if(m=J(et),m!==mt&&(Y(),$(H[mt],1,1,()=>{H[mt]=null}),K(),p=H[m],p||(p=H[m]=j[m](et),p.c()),d(p,1),p.m(u,null)),(!C||4&Q)&&k(n,"aria-expanded",et[2]),552&Q){let G;for(U=ee(et[3].steps),G=0;G<U.length;G+=1){const Tt=id(et,U,G);O[G]?(O[G].p(Tt,Q),d(O[G],1)):(O[G]=ad(Tt),O[G].c(),d(O[G],1),O[G].m(A,null))}for(Y(),G=U.length;G<O.length;G+=1)Z(G);K()}(!C||4&Q)&&xt(x,"is-hidden",!et[2]),(!C||1&Q)&&xt(t,"c-agent-setup-logs-container--loading",!et[0])},i(et){if(!C){d(r.$$.fragment,et),d(a),d(p);for(let Q=0;Q<U.length;Q+=1)d(O[Q]);C=!0}},o(et){$(r.$$.fragment,et),$(a),$(p),O=O.filter(Boolean);for(let Q=0;Q<O.length;Q+=1)$(O[Q]);C=!1},d(et){et&&y(t),v(r),I[c].d(),H[m].d(),rn(O,et),s[13](null),M=!1,Ye(S)}}}function q_(s){let t;return{c(){t=V("Waiting to start agent environment...")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function j_(s){let t,n;return t=new Po({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function W_(s){let t,n;return t=new Ot({props:{size:1,class:"c-agent-setup-logs-summary-text",$$slots:{default:[G_]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function V_(s){let t,n;return t=new Ot({props:{size:1,class:"c-agent-setup-logs-summary-text",$$slots:{default:[Y_]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function G_(s){let t;return{c(){t=V("Environment is being created...")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Y_(s){let t;return{c(){t=V("Environment created")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function K_(s){let t,n;return t=new Tn({props:{size:1}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function X_(s){let t,n;return t=new co({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function ad(s){let t,n;return t=new B_({props:{title:s[15].step_description,output:s[15].logs,status:td(s[15].status),isLoading:s[9](s[15].status),collapsed:!s[9](s[15].status),showCollapseButton:!!s[15].logs,viewButtonTooltip:"View full output in editor",onViewOutput:s[12]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.title=e[15].step_description),8&o&&(r.output=e[15].logs),8&o&&(r.status=td(e[15].status)),8&o&&(r.isLoading=e[9](e[15].status)),8&o&&(r.collapsed=!e[9](e[15].status)),8&o&&(r.showCollapseButton=!!e[15].logs),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function J_(s){let t,n,e,o;const r=[U_,H_],i=[];function c(a,l){return a[3]&&a[3].steps&&a[3].steps.length>0?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t===u?i[t].p(a,l):(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function Z_(s,t,n){let e,o,r,i,c;const a=Mt(on.key);kt(s,a,f=>n(11,i=f));const l=Mt("chatModel");let u=!1;function m(f){f&&l&&l.extensionClient.openScratchFile(f,"plaintext")}function p(){n(2,u=!u)}return s.$$.update=()=>{var f;2048&s.$$.dirty&&n(10,e=((f=i==null?void 0:i.currentAgent)==null?void 0:f.status)||Ge.agentUnspecified),1024&s.$$.dirty&&n(0,o=[Ge.agentIdle,Ge.agentRunning,Ge.agentFailed].includes(e)),2048&s.$$.dirty&&n(3,r=i==null?void 0:i.agentSetupLogs),1&s.$$.dirty&&n(2,u=!o)},[o,c,u,r,a,m,p,function(f){f.stopPropagation(),p()},function(f){f.key!=="Enter"&&f.key!==" "||(f.preventDefault(),p())},function(f){return f===pr.running&&!o},e,i,(f,x)=>m(x),function(f){Gt[f?"unshift":"push"](()=>{c=f,n(1,c)})}]}class Q_ extends ct{constructor(t){super(),lt(this,t,Z_,J_,it,{})}}function tC(s){let t;const n=s[3].default,e=Xt(n,s,s[4],null);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||16&r)&&Jt(e,n,o,o[4],t?Qt(n,o[4],r,null):Zt(o[4]),null)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function eC(s){let t,n;return t=new Kf({props:{class:"c-chat-floating-container c-chat-floating-container--"+s[0],xPos:s[1],yPos:s[2],$$slots:{default:[tC]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,[o]){const r={};1&o&&(r.class="c-chat-floating-container c-chat-floating-container--"+e[0]),2&o&&(r.xPos=e[1]),4&o&&(r.yPos=e[2]),16&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function nC(s,t,n){let{$$slots:e={},$$scope:o}=t,{position:r="bottom"}=t,{xPos:i="middle"}=t,{yPos:c=r==="top"?"top":"bottom"}=t;return s.$$set=a=>{"position"in a&&n(0,r=a.position),"xPos"in a&&n(1,i=a.xPos),"yPos"in a&&n(2,c=a.yPos),"$$scope"in a&&n(4,o=a.$$scope)},[r,i,c,e,o]}class oC extends ct{constructor(t){super(),lt(this,t,nC,eC,it,{position:0,xPos:1,yPos:2})}}function rC(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return{c(){t=ne("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=dn(t);n=$n(i,!0),i.forEach(y),this.h()},h(){n.a=null,ue(t,o)},m(r,i){mn(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M174.6 472.6c4.5 4.7 10.8 7.4 17.4 7.4s12.8-2.7 17.4-7.4l168-176c9.2-9.6 8.8-24.8-.8-33.9s-24.8-8.8-33.9.8L216 396.1V56c0-13.3-10.7-24-24-24s-24 10.7-24 24v340.1L41.4 263.4c-9.2-9.6-24.3-9.9-33.9-.8s-9.9 24.3-.8 33.9l168 176z"/>',t)},p(r,[i]){ue(t,o=Ue(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},1&i&&r[0]]))},i:N,o:N,d(r){r&&y(t)}}}function sC(s,t,n){return s.$$set=e=>{n(0,t=It(It({},t),ae(e)))},[t=ae(t)]}class iC extends ct{constructor(t){super(),lt(this,t,sC,rC,it,{})}}function cd(s){let t,n,e,o,r,i;return e=new se({props:{class:"c-chat-floating-button",variant:"outline",color:"neutral",size:1,radius:"full",$$slots:{default:[aC]},$$scope:{ctx:s}}}),e.$on("click",s[1]),{c(){t=D("div"),n=D("div"),g(e.$$.fragment),k(t,"class","c-msg-list-bottom-button svelte-1eg3it6")},m(c,a){_(c,t,a),P(t,n),h(e,n,null),i=!0},p(c,a){const l={};8&a&&(l.$$scope={dirty:a,ctx:c}),e.$set(l)},i(c){i||(d(e.$$.fragment,c),c&&_n(()=>{i&&(o||(o=cn(n,Es,{duration:150},!0)),o.run(1))}),c&&_n(()=>{i&&(r||(r=cn(t,Es,{duration:150},!0)),r.run(1))}),i=!0)},o(c){$(e.$$.fragment,c),c&&(o||(o=cn(n,Es,{duration:150},!1)),o.run(0)),c&&(r||(r=cn(t,Es,{duration:150},!1)),r.run(0)),i=!1},d(c){c&&y(t),v(e),c&&o&&o.end(),c&&r&&r.end()}}}function aC(s){let t,n;return t=new iC({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function cC(s){let t,n,e=s[0]&&cd(s);return{c(){e&&e.c(),t=gt()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,r){o[0]?e?(e.p(o,r),1&r&&d(e,1)):(e=cd(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function lC(s){let t,n;return t=new oC({props:{position:"bottom",$$slots:{default:[cC]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,[o]){const r={};9&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function uC(s,t,n){let{showScrollDown:e=!1}=t,{messageListElement:o=null}=t;return s.$$set=r=>{"showScrollDown"in r&&n(0,e=r.showScrollDown),"messageListElement"in r&&n(2,o=r.messageListElement)},[e,()=>{o&&xp(o,{smooth:!0})},o]}class dC extends ct{constructor(t){super(),lt(this,t,uC,lC,it,{showScrollDown:0,messageListElement:2})}}function $C(s){let t;return{c(){t=D("div"),t.innerHTML='<span class="c-paused-remote-agent__text svelte-av8nea">This agent is paused and will resume when you send a new message</span>',k(t,"class","c-paused-remote-agent svelte-av8nea")},m(n,e){_(n,t,e)},p:N,i:N,o:N,d(n){n&&y(t)}}}class mC extends ct{constructor(t){super(),lt(this,t,null,$C,it,{})}}function ld(s){let t,n;return{c(){t=V("Retrying in "),n=V(s[3])},m(e,o){_(e,t,o),_(e,n,o)},p(e,o){8&o&&ht(n,e[3])},d(e){e&&(y(t),y(n))}}}function ud(s){let t,n;return t=new he({props:{class:"c-remote-agent-error__button c-remote-agent-error__button--retry",variant:"soft",color:"neutral",size:1,$$slots:{default:[pC]},$$scope:{ctx:s}}}),t.$on("click",s[11]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};32832&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function pC(s){let t,n,e=s[6]?" now":"";return{c(){t=V("Retry"),n=V(e)},m(o,r){_(o,t,r),_(o,n,r)},p(o,r){64&r&&e!==(e=o[6]?" now":"")&&ht(n,e)},d(o){o&&(y(t),y(n))}}}function dd(s){let t,n;return t=new he({props:{class:"c-remote-agent-error__button c-remote-agent-error__button--delete",variant:"soft",color:"error",size:1,$$slots:{default:[fC]},$$scope:{ctx:s}}}),t.$on("click",s[12]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};32768&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function fC(s){let t;return{c(){t=V("Delete Agent")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function gC(s){let t,n,e,o,r,i,c,a,l,u=s[6]&&s[3]&&ld(s),m=s[4]&&ud(s),p=s[5]&&dd(s);return{c(){t=D("div"),n=D("div"),e=D("span"),o=V(s[7]),r=z(),u&&u.c(),i=z(),c=D("div"),m&&m.c(),a=z(),p&&p.c(),k(e,"class","c-remote-agent-error__message svelte-14lhvr1"),k(c,"class","c-remote-agent-error__actions"),k(n,"class","c-remote-agent-error__content svelte-14lhvr1"),k(t,"class","c-remote-agent-error svelte-14lhvr1"),xt(t,"c-remote-agent-error--unrecoverable",s[2])},m(f,x){_(f,t,x),P(t,n),P(n,e),P(e,o),P(e,r),u&&u.m(e,null),P(n,i),P(n,c),m&&m.m(c,null),P(c,a),p&&p.m(c,null),l=!0},p(f,[x]){(!l||128&x)&&ht(o,f[7]),f[6]&&f[3]?u?u.p(f,x):(u=ld(f),u.c(),u.m(e,null)):u&&(u.d(1),u=null),f[4]?m?(m.p(f,x),16&x&&d(m,1)):(m=ud(f),m.c(),d(m,1),m.m(c,a)):m&&(Y(),$(m,1,1,()=>{m=null}),K()),f[5]?p?(p.p(f,x),32&x&&d(p,1)):(p=dd(f),p.c(),d(p,1),p.m(c,null)):p&&(Y(),$(p,1,1,()=>{p=null}),K()),(!l||4&x)&&xt(t,"c-remote-agent-error--unrecoverable",f[2])},i(f){l||(d(m),d(p),l=!0)},o(f){$(m),$(p),l=!1},d(f){f&&y(t),u&&u.d(),m&&m.d(),p&&p.d()}}}function hC(s,t,n){let e,o,r,i,c,a,l,u,m,{error:p}=t,{onRetry:f}=t,{onDelete:x}=t;function A(){m&&(m(),m=void 0),i&&(m=e0(i,C=>{n(3,u=C)}))}return En(A),sr(()=>{m==null||m()}),s.$$set=C=>{"error"in C&&n(8,p=C.error),"onRetry"in C&&n(0,f=C.onRetry),"onDelete"in C&&n(1,x=C.onDelete)},s.$$.update=()=>{256&s.$$.dirty&&n(10,e="type"in p),1280&s.$$.dirty&&n(2,o=e&&p.type===Bp.agentFailed),256&s.$$.dirty&&n(7,r=p.errorMessage),1280&s.$$.dirty&&n(9,i=e?void 0:p.retryAt),512&s.$$.dirty&&n(6,c=i!==void 0),6&s.$$.dirty&&n(5,a=o&&x),1&s.$$.dirty&&n(4,l=f),512&s.$$.dirty&&i&&A()},[f,x,o,u,l,a,c,r,p,i,e,C=>{C.preventDefault(),f==null||f()},C=>{C.preventDefault(),x==null||x()}]}class O1 extends ct{constructor(t){super(),lt(this,t,hC,gC,it,{error:8,onRetry:0,onDelete:1})}}function $d(s,t,n){const e=s.slice();e[40]=t[n],e[43]=n;const o=e[43]+1===e[6].length;return e[41]=o,e}function md(s,t,n){const e=s.slice();e[44]=t[n].turn,e[45]=t[n].idx,e[48]=n;const o=e[41]&&e[48]+1===e[40].length;return e[46]=o,e}function pd(s){let t,n;return t=new Q_({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function vC(s){let t,n,e,o;const r=[CC,_C],i=[];function c(a,l){return a[8].enableRichCheckpointInfo?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?i[t].p(a,l):(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function wC(s){let t,n;return t=new L5({props:{group:s[40],chatModel:s[1],turn:s[44],turnIndex:s[45],isLastTurn:s[46],messageListContainer:s[0]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};64&o[0]&&(r.group=e[40]),2&o[0]&&(r.chatModel=e[1]),64&o[0]&&(r.turn=e[44]),64&o[0]&&(r.turnIndex=e[45]),64&o[0]&&(r.isLastTurn=e[46]),1&o[0]&&(r.messageListContainer=e[0]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function yC(s){let t,n;function e(){return s[31](s[44])}return t=new wa({props:{turn:s[44],preamble:A0,resendTurn:e,$$slots:{default:[AC]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,r){s=o;const i={};64&r[0]&&(i.turn=s[44]),68&r[0]&&(i.resendTurn=e),262208&r[0]|262144&r[1]&&(i.$$scope={dirty:r,ctx:s}),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){v(t,o)}}}function xC(s){let t,n;return t=new tx({props:{flagsModel:s[16],turn:s[44]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};65536&o[0]&&(r.flagsModel=e[16]),64&o[0]&&(r.turn=e[44]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function bC(s){let t,n;return t=new wa({props:{turn:s[44]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};64&o[0]&&(r.turn=e[44]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function _C(s){let t,n;return t=new t_({props:{turn:s[44]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};64&o[0]&&(r.turn=e[44]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function CC(s){let t,n;return t=new v_({props:{turn:s[44]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};64&o[0]&&(r.turn=e[44]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function AC(s){let t,n;return t=new Xf({props:{conversationModel:s[18],turn:s[44]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};262144&o[0]&&(r.conversationModel=e[18]),64&o[0]&&(r.turn=e[44]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function fd(s){let t,n,e,o;function r(){return s[32](s[44])}return{c(){t=D("div"),k(t,"class","c-msg-list__turn-seen")},m(i,c){_(i,t,c),e||(o=Lo(n=e5.call(null,t,{onSeen:r,track:s[44].seen_state!==js.seen})),e=!0)},p(i,c){s=i,n&&xe(n.update)&&64&c[0]&&n.update.call(null,{onSeen:r,track:s[44].seen_state!==js.seen})},d(i){i&&y(t),e=!1,o()}}}function gd(s,t){let n,e,o,r,i,c,a,l,u,m,p,f=mc(t[44]);const x=[bC,xC,yC,wC,vC],A=[];function C(S,L){return 64&L[0]&&(e=null),64&L[0]&&(o=null),64&L[0]&&(r=null),64&L[0]&&(i=null),64&L[0]&&(c=null),e==null&&(e=!!Pp(S[44])),e?0:(o==null&&(o=!!Np(S[44])),o?1:(r==null&&(r=!!ea(S[44])),r?2:(i==null&&(i=!!wg(S[44])),i?3:(c==null&&(c=!(!Xr(S[44])||S[44].status!==Ve.success)),c?4:-1))))}~(a=C(t,[-1,-1]))&&(l=A[a]=x[a](t));let M=f&&fd(t);return{key:s,first:null,c(){n=gt(),l&&l.c(),u=z(),M&&M.c(),m=gt(),this.first=n},m(S,L){_(S,n,L),~a&&A[a].m(S,L),_(S,u,L),M&&M.m(S,L),_(S,m,L),p=!0},p(S,L){let I=a;a=C(t=S,L),a===I?~a&&A[a].p(t,L):(l&&(Y(),$(A[I],1,1,()=>{A[I]=null}),K()),~a?(l=A[a],l?l.p(t,L):(l=A[a]=x[a](t),l.c()),d(l,1),l.m(u.parentNode,u)):l=null),64&L[0]&&(f=mc(t[44])),f?M?M.p(t,L):(M=fd(t),M.c(),M.m(m.parentNode,m)):M&&(M.d(1),M=null)},i(S){p||(d(l),p=!0)},o(S){$(l),p=!1},d(S){S&&(y(n),y(u),y(m)),~a&&A[a].d(S),M&&M.d(S)}}}function hd(s){let t,n,e,o,r;const i=[LC,IC,EC,TC,SC,kC,MC],c=[];function a(u,m){return u[12]?0:u[7].retryMessage?1:u[7].showResumingRemoteAgent?2:u[7].showPaused?3:u[7].showGeneratingResponse?4:u[7].showAwaitingUserInput?5:u[7].showStopped?6:-1}~(t=a(s))&&(n=c[t]=i[t](s));let l=s[7].showRunningSpacer&&vd();return{c(){n&&n.c(),e=z(),l&&l.c(),o=gt()},m(u,m){~t&&c[t].m(u,m),_(u,e,m),l&&l.m(u,m),_(u,o,m),r=!0},p(u,m){let p=t;t=a(u),t===p?~t&&c[t].p(u,m):(n&&(Y(),$(c[p],1,1,()=>{c[p]=null}),K()),~t?(n=c[t],n?n.p(u,m):(n=c[t]=i[t](u),n.c()),d(n,1),n.m(e.parentNode,e)):n=null),u[7].showRunningSpacer?l||(l=vd(),l.c(),l.m(o.parentNode,o)):l&&(l.d(1),l=null)},i(u){r||(d(n),r=!0)},o(u){$(n),r=!1},d(u){u&&(y(e),y(o)),~t&&c[t].d(u),l&&l.d(u)}}}function MC(s){let t,n;return t=new hx({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function kC(s){let t,n;return t=new sx({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function SC(s){let t,n;return t=new E1({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function TC(s){let t,n;return t=new mC({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function EC(s){let t,n;return t=new dx({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function IC(s){let t,n;return t=new px({props:{message:s[7].retryMessage}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};128&o[0]&&(r.message=e[7].retryMessage),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function LC(s){let t,n;return t=new O1({props:{error:s[12].error,onRetry:s[12].onRetry,onDelete:s[12].onDelete}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4096&o[0]&&(r.error=e[12].error),4096&o[0]&&(r.onRetry=e[12].onRetry),4096&o[0]&&(r.onDelete=e[12].onDelete),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function vd(s){let t;return{c(){t=D("div"),k(t,"class","c-agent-running-spacer svelte-t9khzq")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function RC(s){let t,n,e,o=[],r=new Map,i=ee(s[40]);const c=l=>l[44].request_id??`no-request-id-${l[45]}`;for(let l=0;l<i.length;l+=1){let u=md(s,i,l),m=c(u);r.set(m,o[l]=gd(m,u))}let a=s[41]&&hd(s);return{c(){for(let l=0;l<o.length;l+=1)o[l].c();t=z(),a&&a.c(),n=gt()},m(l,u){for(let m=0;m<o.length;m+=1)o[m]&&o[m].m(l,u);_(l,t,u),a&&a.m(l,u),_(l,n,u),e=!0},p(l,u){33882439&u[0]&&(i=ee(l[40]),Y(),o=Mr(o,u,c,1,l,i,r,t.parentNode,ns,gd,t,md),K()),l[41]?a?(a.p(l,u),64&u[0]&&d(a,1)):(a=hd(l),a.c(),d(a,1),a.m(n.parentNode,n)):a&&(Y(),$(a,1,1,()=>{a=null}),K())},i(l){if(!e){for(let u=0;u<i.length;u+=1)d(o[u]);d(a),e=!0}},o(l){for(let u=0;u<o.length;u+=1)$(o[u]);$(a),e=!1},d(l){l&&(y(t),y(n));for(let u=0;u<o.length;u+=1)o[u].d(l);a&&a.d(l)}}}function wd(s){let t,n;return t=new P5({props:{class:"c-msg-list__item--grouped",chatModel:s[1],isLastItem:s[41],userControlsScroll:s[3],requestId:s[40][0].turn.request_id,releaseScroll:s[33],messageListContainer:s[0],minHeight:s[41]&&!s[8].enableErgonomicsUpdate?s[11]:0,$$slots:{default:[RC]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};2&o[0]&&(r.chatModel=e[1]),64&o[0]&&(r.isLastItem=e[41]),8&o[0]&&(r.userControlsScroll=e[3]),64&o[0]&&(r.requestId=e[40][0].turn.request_id),8&o[0]&&(r.releaseScroll=e[33]),1&o[0]&&(r.messageListContainer=e[0]),2368&o[0]&&(r.minHeight=e[41]&&!e[8].enableErgonomicsUpdate?e[11]:0),332231&o[0]|262144&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function yd(s){let t,n;return t=new O1({props:{error:s[12].error,onRetry:s[12].onRetry,onDelete:s[12].onDelete}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4096&o[0]&&(r.error=e[12].error),4096&o[0]&&(r.onRetry=e[12].onRetry),4096&o[0]&&(r.onDelete=e[12].onDelete),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function xd(s){let t,n;return t=new dC({props:{messageListElement:s[0],showScrollDown:s[10]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o[0]&&(r.messageListElement=e[0]),1024&o[0]&&(r.showScrollDown=e[10]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function DC(s){let t,n,e,o,r,i,c,a,l,u,m=s[13]&&pd(),p=ee(s[6]),f=[];for(let M=0;M<p.length;M+=1)f[M]=wd($d(s,p,M));const x=M=>$(f[M],1,1,()=>{f[M]=null});let A=!s[15].length&&s[12]&&yd(s),C=s[14]&&xd(s);return{c(){t=D("div"),n=D("div"),m&&m.c(),e=z();for(let M=0;M<f.length;M+=1)f[M].c();o=z(),A&&A.c(),c=z(),C&&C.c(),k(n,"class","c-msg-list svelte-t9khzq"),xt(n,"c-msg-list--minimal",!s[8].fullFeatured),k(t,"class","c-msg-list-container svelte-t9khzq"),k(t,"data-testid","chat-message-list"),xt(t,"c-msg-list--minimal",!s[8].fullFeatured)},m(M,S){_(M,t,S),P(t,n),m&&m.m(n,null),P(n,e);for(let L=0;L<f.length;L+=1)f[L]&&f[L].m(n,null);P(n,o),A&&A.m(n,null),s[34](n),P(t,c),C&&C.m(t,null),a=!0,l||(u=[Lo(Q6.call(null,n,{onScrollIntoBottom:s[22],onScrollAwayFromBottom:s[23],onScroll:s[35]})),Lo(r=t5.call(null,n,{onHeightChange:s[36]})),Lo(i=n5.call(null,n,{items:s[9]})),Et(t,"mouseenter",s[37]),Et(t,"mouseleave",s[38])],l=!0)},p(M,S){if(M[13]?m?8192&S[0]&&d(m,1):(m=pd(),m.c(),d(m,1),m.m(n,e)):m&&(Y(),$(m,1,1,()=>{m=null}),K()),33888719&S[0]){let L;for(p=ee(M[6]),L=0;L<p.length;L+=1){const I=$d(M,p,L);f[L]?(f[L].p(I,S),d(f[L],1)):(f[L]=wd(I),f[L].c(),d(f[L],1),f[L].m(n,o))}for(Y(),L=p.length;L<f.length;L+=1)x(L);K()}!M[15].length&&M[12]?A?(A.p(M,S),36864&S[0]&&d(A,1)):(A=yd(M),A.c(),d(A,1),A.m(n,null)):A&&(Y(),$(A,1,1,()=>{A=null}),K()),r&&xe(r.update)&&32&S[0]&&r.update.call(null,{onHeightChange:M[36]}),i&&xe(i.update)&&512&S[0]&&i.update.call(null,{items:M[9]}),(!a||256&S[0])&&xt(n,"c-msg-list--minimal",!M[8].fullFeatured),M[14]?C?(C.p(M,S),16384&S[0]&&d(C,1)):(C=xd(M),C.c(),d(C,1),C.m(t,null)):C&&(Y(),$(C,1,1,()=>{C=null}),K()),(!a||256&S[0])&&xt(t,"c-msg-list--minimal",!M[8].fullFeatured)},i(M){if(!a){d(m);for(let S=0;S<p.length;S+=1)d(f[S]);d(A),d(C),a=!0}},o(M){$(m),f=f.filter(Boolean);for(let S=0;S<f.length;S+=1)$(f[S]);$(A),$(C),a=!1},d(M){M&&y(t),m&&m.d(),rn(f,M),A&&A.d(),s[34](null),C&&C.d(),l=!1,Ye(u)}}}function PC(s,t,n){let e,o,r,i,c,a,l,u,m,p,f,x,A,C,M,S,L,I,X=N,j=N,H=N,J=()=>(H(),H=oe(U,Ct=>n(30,I=Ct)),U);s.$$.on_destroy.push(()=>X()),s.$$.on_destroy.push(()=>j()),s.$$.on_destroy.push(()=>H());let{chatModel:U}=t;J();let{onboardingWorkspaceModel:O}=t,{msgListElement:Z}=t;const et=Mt("agentConversationModel"),{agentExchangeStatus:Q,isCurrConversationAgentic:ut}=et;kt(s,Q,Ct=>n(29,L=Ct)),kt(s,ut,Ct=>n(28,S=Ct));const rt=Mt(on.key);kt(s,rt,Ct=>n(27,M=Ct));let mt=!1,G=!1;function Tt(){n(3,mt=!0)}En(()=>{var Ct;((Ct=A.lastExchange)==null?void 0:Ct.seen_state)===js.unseen&&Tt()});let Bt=0;const _t=Ct=>A.markSeen(Ct);return s.$$set=Ct=>{"chatModel"in Ct&&J(n(1,U=Ct.chatModel)),"onboardingWorkspaceModel"in Ct&&n(2,O=Ct.onboardingWorkspaceModel),"msgListElement"in Ct&&n(0,Z=Ct.msgListElement)},s.$$.update=()=>{1073741824&s.$$.dirty[0]&&(n(17,e=I.currentConversationModel),X(),X=oe(e,Ct=>n(18,A=Ct))),1073741824&s.$$.dirty[0]&&(n(16,o=I.flags),j(),j=oe(o,Ct=>n(8,C=Ct))),2013266176&s.$$.dirty[0]&&n(26,r=C5(I,L,S,M,C.enableErgonomicsUpdate)),67108864&s.$$.dirty[0]&&n(15,i=r.chatHistory),67108864&s.$$.dirty[0]&&n(6,c=r.groupedChatHistory),67108864&s.$$.dirty[0]&&n(7,a=r.lastGroupConfig),67108864&s.$$.dirty[0]&&n(14,l=r.doShowFloatingButtons),67108864&s.$$.dirty[0]&&n(13,u=r.doShowAgentSetupLogs),128&s.$$.dirty[0]&&n(12,m=a.remoteAgentErrorConfig),32&s.$$.dirty[0]&&n(11,p=Bt),24&s.$$.dirty[0]&&n(10,f=mt&&G),64&s.$$.dirty[0]&&n(9,x=function(Ct){return Ct.map(Se=>{var Te;return(Te=Se[0])==null?void 0:Te.turn.timestamp}).filter(Boolean)??[]}(c))},[Z,U,O,mt,G,Bt,c,a,C,x,f,p,m,u,l,i,o,e,A,Q,ut,rt,function(){n(3,mt=!1)},function(){n(3,mt=!0)},Tt,_t,r,M,S,L,I,Ct=>O.retryProjectSummary(Ct),Ct=>_t(Ct),()=>n(3,mt=!0),function(Ct){Gt[Ct?"unshift":"push"](()=>{Z=Ct,n(0,Z)})},Ct=>{Ct<=1&&Tt()},Ct=>n(5,Bt=Ct),()=>n(4,G=!0),()=>n(4,G=!1)]}class NC extends ct{constructor(t){super(),lt(this,t,PC,DC,it,{chatModel:1,onboardingWorkspaceModel:2,msgListElement:0},null,[-1,-1])}}function FC(s){let t,n,e;return n=new J6({}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","l-center-contents svelte-xt741c")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function zC(s){let t,n,e=s[4],o=bd(s);return{c(){o.c(),t=gt()},m(r,i){o.m(r,i),_(r,t,i),n=!0},p(r,i){16&i&&it(e,e=r[4])?(Y(),$(o,1,1,N),K(),o=bd(r),o.c(),d(o,1),o.m(t.parentNode,t)):o.p(r,i)},i(r){n||(d(o),n=!0)},o(r){$(o),n=!1},d(r){r&&y(t),o.d(r)}}}function OC(s){let t,n;return t=new NC({props:{chatModel:s[0],onboardingWorkspaceModel:s[1]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.chatModel=e[0]),2&o&&(r.onboardingWorkspaceModel=e[1]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function BC(s){let t;return{c(){t=D("div"),k(t,"class","l-center-contents svelte-xt741c"),k(t,"data-testid","l-lazy-message-list-center-contents")},m(n,e){_(n,t,e)},p:N,i:N,o:N,d(n){n&&y(t)}}}function bd(s){let t,n,e,o;const r=[BC,OC],i=[];function c(a,l){return a[5]?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?i[t].p(a,l):(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function HC(s){let t,n,e,o;const r=[zC,FC],i=[];function c(a,l){return a[7]?0:a[3]?1:-1}return~(t=c(s))&&(n=i[t]=r[t](s)),{c(){n&&n.c(),e=gt()},m(a,l){~t&&i[t].m(a,l),_(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t===u?~t&&i[t].p(a,l):(n&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K()),~t?(n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),~t&&i[t].d(a)}}}function UC(s,t,n){let e,o,r,i,c,a,l,u,m,p,f,x,A=N,C=N,M=()=>(C(),C=oe(j,H=>n(13,f=H)),j),S=N,L=()=>(S(),S=oe(I,H=>n(14,x=H)),I);s.$$.on_destroy.push(()=>A()),s.$$.on_destroy.push(()=>C()),s.$$.on_destroy.push(()=>S());let{chatModel:I}=t;L();let{onboardingWorkspaceModel:X}=t,{remoteAgentsModel:j}=t;return M(),s.$$set=H=>{"chatModel"in H&&L(n(0,I=H.chatModel)),"onboardingWorkspaceModel"in H&&n(1,X=H.onboardingWorkspaceModel),"remoteAgentsModel"in H&&M(n(2,j=H.remoteAgentsModel))},s.$$.update=()=>{var H,J;8192&s.$$.dirty&&n(3,e=f.isActive&&!f.currentAgentId),8&s.$$.dirty&&n(7,o=!e),16384&s.$$.dirty&&(n(6,r=x.currentConversationModel),A(),A=oe(r,U=>n(12,p=U))),8192&s.$$.dirty&&n(8,i=f.currentAgentId),8192&s.$$.dirty&&n(9,c=f.isActive),8704&s.$$.dirty&&n(11,a=c&&((H=f.getCurrentChatHistory())==null?void 0:H.length)),8704&s.$$.dirty&&n(10,l=c&&((J=f.agentSetupLogs)==null?void 0:J.steps.length)!==0),7680&s.$$.dirty&&n(5,u=c?!a&&!l:p.chatHistory.length===0),4864&s.$$.dirty&&n(4,m=`${p.id}-${c?i:""}`)},[I,X,j,e,m,u,r,o,i,c,l,a,p,f,x]}class qC extends ct{constructor(t){super(),lt(this,t,UC,HC,it,{chatModel:0,onboardingWorkspaceModel:1,remoteAgentsModel:2})}}function jC(s){let t,n,e,o;return{c(){t=z(),n=D("div"),n.innerHTML='<div class="c-chat-input-dialog-hr svelte-p70shz"></div>',k(n,"class","c-chat-input-dialog-hr-handle svelte-p70shz"),k(n,"role","separator")},m(r,i){_(r,t,i),_(r,n,i),e||(o=[Et(document,"mousemove",s[1]),Et(document,"mouseup",s[2]),Et(n,"mousedown",s[0])],e=!0)},p:N,i:N,o:N,d(r){r&&(y(t),y(n)),e=!1,Ye(o)}}}function WC(s,t,n){let{inputArea:e}=t;const o=dp();let r;return s.$$set=i=>{"inputArea"in i&&n(3,e=i.inputArea)},[i=>{r={startY:i.clientY,initialHeight:e.offsetHeight},e==null||e.classList.add("is-dragging")},i=>{if(!r)return;const c=i.clientY-r.startY;n(3,e.style.height=`${Math.max(80,r.initialHeight-c)}px`,e)},()=>{r&&(o("dragEnd"),r=void 0,e==null||e.classList.remove("is-dragging"))},e]}class VC extends ct{constructor(t){super(),lt(this,t,WC,jC,it,{inputArea:3})}}function GC(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return{c(){t=ne("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=dn(t);n=$n(i,!0),i.forEach(y),this.h()},h(){n.a=null,ue(t,o)},m(r,i){mn(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M224 80v352h224c8.8 0 16-7.2 16-16V96c0-8.8-7.2-16-16-16zM0 96c0-35.3 28.7-64 64-64h384c35.3 0 64 28.7 64 64v320c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64zm64 24c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24s-10.7-24-24-24H88c-13.3 0-24 10.7-24 24m24 72c-13.3 0-24 10.7-24 24s10.7 24 24 24h48c13.3 0 24-10.7 24-24s-10.7-24-24-24zM64 312c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24s-10.7-24-24-24H88c-13.3 0-24 10.7-24 24"/>',t)},p(r,[i]){ue(t,o=Ue(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&r[0]]))},i:N,o:N,d(r){r&&y(t)}}}function YC(s,t,n){return s.$$set=e=>{n(0,t=It(It({},t),ae(e)))},[t=ae(t)]}class KC extends ct{constructor(t){super(),lt(this,t,YC,GC,it,{})}}function _d(s,t,n=200){return e=>function(o,r){const{onClose:i,isActive:c,threshold:a=200,resetTimeout:l=150}=r;let u,m=0,p=!1,f=!1,x={isTracking:!1,startedAtTop:!1,initialScrollTop:0,overscrollAmount:0};const A=S=>{if(!c())return;const{scrollTop:L}=o;return p||(p=!0,f=L===0,m=0,x={isTracking:f,startedAtTop:f,initialScrollTop:L,overscrollAmount:0}),f&&L===0&&S.deltaY<0&&(m+=Math.abs(S.deltaY),x.overscrollAmount=m,m>=a)?(i(),void C()):f&&L>0?(clearTimeout(u),void(u=setTimeout(()=>{C()},l))):void(f&&S.deltaY>0?C():Math.abs(S.deltaY)<7||(clearTimeout(u),u=setTimeout(()=>{C()},l)))},C=()=>{p=!1,f=!1,m=0,clearTimeout(u),x={isTracking:!1,startedAtTop:!1,initialScrollTop:0,overscrollAmount:0}},M=()=>{p&&f&&o.scrollTop>10&&C()};return o.addEventListener("wheel",A,{passive:!0}),o.addEventListener("scroll",M,{passive:!0}),{destroy(){o.removeEventListener("wheel",A),o.removeEventListener("scroll",M),clearTimeout(u)},update(S){Object.assign(r,S)}}}(e,{onClose:s,isActive:t,threshold:n})}const XC=s=>({}),Cd=s=>({}),JC=s=>({}),Ad=s=>({}),ZC=s=>({}),Md=s=>({});function QC(s){let t;return{c(){t=V(s[2])},m(n,e){_(n,t,e)},p(n,e){4&e&&ht(t,n[2])},d(n){n&&y(t)}}}function kd(s){let t,n;const e=s[4]["sort-options"],o=Xt(e,s,s[8],Ad);return{c(){t=D("div"),o&&o.c(),k(t,"class","l-threads-menu__sort-options svelte-k6qn47")},m(r,i){_(r,t,i),o&&o.m(t,null),n=!0},p(r,i){o&&o.p&&(!n||256&i)&&Jt(o,e,r,r[8],n?Qt(e,r[8],i,JC):Zt(r[8]),Ad)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&y(t),o&&o.d(r)}}}function Sd(s){let t,n;const e=s[4].body,o=Xt(e,s,s[8],Cd);return{c(){t=D("div"),o&&o.c(),k(t,"class","l-threads-menu__body svelte-k6qn47")},m(r,i){_(r,t,i),o&&o.m(t,null),n=!0},p(r,i){o&&o.p&&(!n||256&i)&&Jt(o,e,r,r[8],n?Qt(e,r[8],i,XC):Zt(r[8]),Cd)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&y(t),o&&o.d(r)}}}function t7(s){let t,n,e,o,r,i,c,a,l,u,m,p,f,x;i=new Ot({props:{size:1,weight:"regular",$$slots:{default:[QC]},$$scope:{ctx:s}}});const A=s[4].buttons,C=Xt(A,s,s[8],Md);let M=s[1]&&kd(s),S=s[1]&&Sd(s);return{c(){t=D("div"),n=D("div"),e=D("div"),o=D("div"),r=D("div"),g(i.$$.fragment),c=z(),a=D("div"),C&&C.c(),l=z(),M&&M.c(),u=z(),S&&S.c(),k(r,"class","l-threads-menu__title svelte-k6qn47"),k(r,"data-testid","threads-menu-header-title"),k(o,"class","l-threads-menu__header svelte-k6qn47"),k(o,"role","button"),k(o,"tabindex","0"),k(o,"data-testid","threads-menu-header"),k(e,"class","l-threads-menu__content svelte-k6qn47"),k(n,"class","l-threads-menu__wrapper svelte-k6qn47"),k(t,"data-testid","threads-menu"),k(t,"class",m=wr(`l-threads-menu ${s[3]}`)+" svelte-k6qn47"),xt(t,"l-threads-menu--active",s[1])},m(L,I){_(L,t,I),P(t,n),P(n,e),P(e,o),P(o,r),h(i,r,null),P(o,c),P(o,a),C&&C.m(a,null),P(e,l),M&&M.m(e,null),P(e,u),S&&S.m(e,null),s[7](t),p=!0,f||(x=[Et(o,"click",nr(qo(s[5]))),Et(o,"keydown",s[6])],f=!0)},p(L,[I]){const X={};260&I&&(X.$$scope={dirty:I,ctx:L}),i.$set(X),C&&C.p&&(!p||256&I)&&Jt(C,A,L,L[8],p?Qt(A,L[8],I,ZC):Zt(L[8]),Md),L[1]?M?(M.p(L,I),2&I&&d(M,1)):(M=kd(L),M.c(),d(M,1),M.m(e,u)):M&&(Y(),$(M,1,1,()=>{M=null}),K()),L[1]?S?(S.p(L,I),2&I&&d(S,1)):(S=Sd(L),S.c(),d(S,1),S.m(e,null)):S&&(Y(),$(S,1,1,()=>{S=null}),K()),(!p||8&I&&m!==(m=wr(`l-threads-menu ${L[3]}`)+" svelte-k6qn47"))&&k(t,"class",m),(!p||10&I)&&xt(t,"l-threads-menu--active",L[1])},i(L){p||(d(i.$$.fragment,L),d(C,L),d(M),d(S),p=!0)},o(L){$(i.$$.fragment,L),$(C,L),$(M),$(S),p=!1},d(L){L&&y(t),v(i),C&&C.d(L),M&&M.d(),S&&S.d(),s[7](null),f=!1,Ye(x)}}}function e7(s,t,n){let{$$slots:e={},$$scope:o}=t,{active:r=!1}=t,{element:i}=t,{title:c=""}=t,{class:a=""}=t;return s.$$set=l=>{"active"in l&&n(1,r=l.active),"element"in l&&n(0,i=l.element),"title"in l&&n(2,c=l.title),"class"in l&&n(3,a=l.class),"$$scope"in l&&n(8,o=l.$$scope)},[i,r,c,a,e,function(l){hn.call(this,s,l)},function(l){hn.call(this,s,l)},function(l){Gt[l?"unshift":"push"](()=>{i=l,n(0,i)})},o]}class n7 extends ct{constructor(t){super(),lt(this,t,e7,t7,it,{active:1,element:0,title:2,class:3})}}const o7=s=>({}),Td=s=>({}),r7=s=>({}),Ed=s=>({});function s7(s){let t,n;const e=s[2].title,o=Xt(e,s,s[6],Ed);return{c(){t=D("div"),o&&o.c(),k(t,"class","l-thread-menu-item__title svelte-1iwlval")},m(r,i){_(r,t,i),o&&o.m(t,null),n=!0},p(r,i){o&&o.p&&(!n||64&i)&&Jt(o,e,r,r[6],n?Qt(e,r[6],i,r7):Zt(r[6]),Ed)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&y(t),o&&o.d(r)}}}function i7(s){let t,n,e,o,r,i,c;n=new Ot({props:{size:1,weight:"regular",$$slots:{default:[s7]},$$scope:{ctx:s}}});const a=s[2].right,l=Xt(a,s,s[6],Td);return{c(){t=D("div"),g(n.$$.fragment),e=z(),o=D("div"),l&&l.c(),k(o,"class","l-thread-menu-item__right svelte-1iwlval"),k(t,"class","l-thread-menu-item svelte-1iwlval"),k(t,"data-testid","thread-menu-item"),k(t,"role","button"),k(t,"tabindex","0"),xt(t,"l-thread-menu-item--selected",s[0]&&s[1]),xt(t,"l-thread-menu-item--selectable",s[1])},m(u,m){_(u,t,m),h(n,t,null),P(t,e),P(t,o),l&&l.m(o,null),r=!0,i||(c=[Et(t,"click",s[3]),Et(t,"mousedown",s[4]),Et(t,"keydown",s[5])],i=!0)},p(u,[m]){const p={};64&m&&(p.$$scope={dirty:m,ctx:u}),n.$set(p),l&&l.p&&(!r||64&m)&&Jt(l,a,u,u[6],r?Qt(a,u[6],m,o7):Zt(u[6]),Td),(!r||3&m)&&xt(t,"l-thread-menu-item--selected",u[0]&&u[1]),(!r||2&m)&&xt(t,"l-thread-menu-item--selectable",u[1])},i(u){r||(d(n.$$.fragment,u),d(l,u),r=!0)},o(u){$(n.$$.fragment,u),$(l,u),r=!1},d(u){u&&y(t),v(n),l&&l.d(u),i=!1,Ye(c)}}}function a7(s,t,n){let{$$slots:e={},$$scope:o}=t,{selected:r=!1}=t,{isSelectable:i=!1}=t;return s.$$set=c=>{"selected"in c&&n(0,r=c.selected),"isSelectable"in c&&n(1,i=c.isSelectable),"$$scope"in c&&n(6,o=c.$$scope)},[r,i,e,function(c){hn.call(this,s,c)},function(c){hn.call(this,s,c)},function(c){hn.call(this,s,c)},o]}class B1 extends ct{constructor(t){super(),lt(this,t,a7,i7,it,{selected:0,isSelectable:1})}}function c7(s){let t,n,e,o;return{c(){t=D("div"),n=V(s[1]),k(t,"class","c-editable-text__text svelte-1kpc8s8"),k(t,"role","button"),k(t,"tabindex","0"),xt(t,"c-editable-text--disabled",s[3])},m(r,i){_(r,t,i),P(t,n),e||(o=Et(t,"dblclick",s[4]),e=!0)},p(r,i){2&i&&ht(n,r[1]),8&i&&xt(t,"c-editable-text--disabled",r[3])},i:N,o:N,d(r){r&&y(t),e=!1,o()}}}function l7(s){let t,n,e,o;function r(a){s[15](a)}function i(a){s[16](a)}let c={size:1,variant:"surface",placeholder:s[2]};return s[5]!==void 0&&(c.textInput=s[5]),s[6]!==void 0&&(c.value=s[6]),t=new os({props:c}),Gt.push(()=>ke(t,"textInput",r)),Gt.push(()=>ke(t,"value",i)),t.$on("click",d7),t.$on("keydown",s[7]),{c(){g(t.$$.fragment)},m(a,l){h(t,a,l),o=!0},p(a,l){const u={};4&l&&(u.placeholder=a[2]),!n&&32&l&&(n=!0,u.textInput=a[5],De(()=>n=!1)),!e&&64&l&&(e=!0,u.value=a[6],De(()=>e=!1)),t.$set(u)},i(a){o||(d(t.$$.fragment,a),o=!0)},o(a){$(t.$$.fragment,a),o=!1},d(a){v(t,a)}}}function u7(s){let t,n,e,o,r,i,c;const a=[l7,c7],l=[];function u(m,p){return!m[3]&&m[0]?0:1}return n=u(s),e=l[n]=a[n](s),{c(){t=z(),e.c(),o=gt()},m(m,p){_(m,t,p),l[n].m(m,p),_(m,o,p),r=!0,i||(c=Et(document.body,"click",s[8]),i=!0)},p(m,[p]){let f=n;n=u(m),n===f?l[n].p(m,p):(Y(),$(l[f],1,1,()=>{l[f]=null}),K(),e=l[n],e?e.p(m,p):(e=l[n]=a[n](m),e.c()),d(e,1),e.m(o.parentNode,o))},i(m){r||(d(e),r=!0)},o(m){$(e),r=!1},d(m){m&&(y(t),y(o)),l[n].d(m),i=!1,c()}}}const d7=s=>s.stopPropagation();function $7(s,t,n){let e,{isEditing:o=!1}=t,{value:r}=t,{cancelOnClickOutside:i=!0}=t,{placeholder:c=""}=t,{disabled:a=!1}=t,{onStartEdit:l}=t,{onAcceptEdit:u}=t,{onCancelEdit:m}=t,p=r;function f(A){o&&(u(p),n(0,o=!1),n(6,p=""),A==null||A.stopPropagation())}function x(A){o&&i&&(m(),n(0,o=!1),n(6,p=""),A==null||A.stopPropagation())}return s.$$set=A=>{"isEditing"in A&&n(0,o=A.isEditing),"value"in A&&n(1,r=A.value),"cancelOnClickOutside"in A&&n(9,i=A.cancelOnClickOutside),"placeholder"in A&&n(2,c=A.placeholder),"disabled"in A&&n(3,a=A.disabled),"onStartEdit"in A&&n(10,l=A.onStartEdit),"onAcceptEdit"in A&&n(11,u=A.onAcceptEdit),"onCancelEdit"in A&&n(12,m=A.onCancelEdit)},s.$$.update=()=>{32&s.$$.dirty&&(e==null||e.focus())},[o,r,c,a,function(A){o||a||(n(6,p=r),n(0,o=!0),l(),A==null||A.stopPropagation())},e,p,function(A){o&&(A.key==="Enter"?f(A):A.key==="Escape"&&x(A))},function(A){const C=A.target;C&&C.closest(`.${j1}`)||x(A)},i,l,u,m,f,x,function(A){e=A,n(5,e)},function(A){p=A,n(6,p)}]}class m7 extends ct{constructor(t){super(),lt(this,t,$7,u7,it,{isEditing:0,value:1,cancelOnClickOutside:9,placeholder:2,disabled:3,onStartEdit:10,onAcceptEdit:11,onCancelEdit:12,startEdit:4,acceptEdit:13,cancelEdit:14})}get startEdit(){return this.$$.ctx[4]}get acceptEdit(){return this.$$.ctx[13]}get cancelEdit(){return this.$$.ctx[14]}}function p7(s){let t,n;return{c(){t=ne("svg"),n=ne("path"),k(n,"fill-rule","evenodd"),k(n,"clip-rule","evenodd"),k(n,"d","M6 3.5C6 2.67157 6.67157 2 7.5 2C8.32843 2 9 2.67157 9 3.5C9 4.32843 8.32843 5 7.5 5C6.67157 5 6 4.32843 6 3.5ZM8 5.94999C9.14112 5.71836 10 4.70948 10 3.5C10 2.11929 8.88071 1 7.5 1C6.11929 1 5 2.11929 5 3.5C5 4.70948 5.85888 5.71836 7 5.94999V13.5C7 13.7761 7.22386 14 7.5 14C7.77614 14 8 13.7761 8 13.5V5.94999Z"),k(n,"fill","currentColor"),k(t,"width","15"),k(t,"height","15"),k(t,"viewBox","0 0 15 15"),k(t,"fill","none"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){_(e,t,o),P(t,n)},p:N,i:N,o:N,d(e){e&&y(t)}}}class f7 extends ct{constructor(t){super(),lt(this,t,null,p7,it,{})}}function g7(s){let t,n;return{c(){t=ne("svg"),n=ne("path"),k(n,"fill-rule","evenodd"),k(n,"clip-rule","evenodd"),k(n,"d","M10 3.5C10 4.70948 9.14112 5.71836 8 5.94999V13.5C8 13.7761 7.77614 14 7.5 14C7.22386 14 7 13.7761 7 13.5V5.94999C5.85888 5.71836 5 4.70948 5 3.5C5 2.11929 6.11929 1 7.5 1C8.88071 1 10 2.11929 10 3.5Z"),k(n,"fill","currentColor"),k(t,"width","15"),k(t,"height","15"),k(t,"viewBox","0 0 15 15"),k(t,"fill","none"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){_(e,t,o),P(t,n)},p:N,i:N,o:N,d(e){e&&y(t)}}}class h7 extends ct{constructor(t){super(),lt(this,t,null,g7,it,{})}}function v7(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return{c(){t=ne("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=dn(t);n=$n(i,!0),i.forEach(y),this.h()},h(){n.a=null,ue(t,o)},m(r,i){mn(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M280 360c0 13.3-10.7 24-24 24s-24-10.7-24-24V81.9l-95 95c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9L239 7c9.4-9.4 24.6-9.4 33.9 0L409 143c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-95-95zm32-8v-48h136c35.3 0 64 28.7 64 64v80c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64v-80c0-35.3 28.7-64 64-64h136v48H64c-8.8 0-16 7.2-16 16v80c0 8.8 7.2 16 16 16h384c8.8 0 16-7.2 16-16v-80c0-8.8-7.2-16-16-16zm72 56a24 24 0 1 1 48 0 24 24 0 1 1-48 0"/>',t)},p(r,[i]){ue(t,o=Ue(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&r[0]]))},i:N,o:N,d(r){r&&y(t)}}}function w7(s,t,n){return s.$$set=e=>{n(0,t=It(It({},t),ae(e)))},[t=ae(t)]}class H1 extends ct{constructor(t){super(),lt(this,t,w7,v7,it,{})}}async function U1(s,t){try{const n=await async function(r,i){const c={id:r.id,name:r.name,createdAtIso:r.createdAtIso,lastInteractedAtIso:r.lastInteractedAtIso,chatHistory:r.chatHistory,feedbackStates:r.feedbackStates,toolUseStates:r.toolUseStates,draftExchange:r.draftExchange,draftActiveContextIds:r.draftActiveContextIds,requestIds:r.requestIds,isPinned:r.isPinned,lastUrl:r.lastUrl,isShareable:r.isShareable,extraData:r.extraData,personaType:r.personaType,rootTaskUuid:r.rootTaskUuid},a={version:"1.0.0",exportedAt:new Date().toISOString(),conversation:c};i!=null&&i.includeMetadata&&(a.metadata={exportedBy:"Augment Debug Utils",notes:i.notes});const l=i!=null&&i.prettyPrint?2:void 0;return JSON.stringify(a,null,l)}(s,{includeMetadata:(t==null?void 0:t.includeMetadata)??!0,notes:t==null?void 0:t.notes,prettyPrint:(t==null?void 0:t.prettyPrint)??!0}),e=((t==null?void 0:t.filename)||s.name||"conversation").replace(/[/:*?"<>|\s]/g,"_"),o=`${e}_${new Date().toISOString().replace(/[:.]/g,"-").slice(0,19)}.json`;if(t!=null&&t.extensionClient)t.extensionClient.createFile(n,o);else{const r=new Blob([n],{type:"application/json"}),i=URL.createObjectURL(r),c=document.createElement("a");c.href=i,c.download=o,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(i)}}catch(n){throw console.error("Error downloading conversation as JSON:",n),n}}async function Id(s,t,n){const{conversation:e}=s,o={...e,id:(n==null?void 0:n.generateNewId)!==!1?crypto.randomUUID():e.id,name:n!=null&&n.namePrefix?`${n.namePrefix}${e.name||"Imported Conversation"}`:e.name,lastInteractedAtIso:new Date().toISOString()};n!=null&&n.markAsImported&&(o.extraData={...o.extraData,isImported:!0,importedAt:new Date().toISOString(),originalExportVersion:s.version});try{return t.saveConversation(o),t.saveImmediate(),o.id}catch(r){throw console.error("Error creating imported conversation:",r),new Error(`Failed to import conversation: ${r}`)}}async function q1(s,t){try{const n=document.createElement("input");n.type="file",n.accept=".json,application/json",n.style.display="none";const e=new Promise(a=>{n.onchange=()=>{a(n.files?n.files[0]:null)},n.oncancel=()=>{a(null)}});document.body.appendChild(n),n.click();const o=await e;if(document.body.removeChild(n),!o)return null;const r=await o.text(),i=JSON.parse(r);if(!function(a){if(!a||typeof a!="object")return!1;const l=a;if(typeof l.version!="string"||typeof l.exportedAt!="string"||!l.conversation||typeof l.conversation!="object")return!1;const u=l.conversation;return typeof u.id=="string"&&typeof u.createdAtIso=="string"&&typeof u.lastInteractedAtIso=="string"&&!!Array.isArray(u.chatHistory)&&!(!u.feedbackStates||typeof u.feedbackStates!="object")&&!!Array.isArray(u.requestIds)}(i))throw new Error("Invalid conversation export file format");const c=(t==null?void 0:t.repetitions)??1;if(c===1)return await Id(i,s,{generateNewId:(t==null?void 0:t.generateNewId)??!0,namePrefix:(t==null?void 0:t.namePrefix)??"[Imported] ",markAsImported:(t==null?void 0:t.markAsImported)??!0});{let a=null;for(let l=1;l<=c;l++){const u=t!=null&&t.namePrefix?`${t.namePrefix}${l} - `:`[Imported ${l}] `,m=await Id(i,s,{generateNewId:(t==null?void 0:t.generateNewId)??!0,namePrefix:u,markAsImported:(t==null?void 0:t.markAsImported)??!0});l===1&&(a=m)}return a}}catch(n){throw console.error("Error importing conversation from file:",n),n}}const y7=s=>({}),Ld=s=>({});function Rd(s){let t,n,e,o;const r=[b7,x7],i=[];function c(a,l){return a[8]?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n||(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function x7(s){let t,n;return t=new ao.Root({props:{color:"accent",size:1,variant:"soft",$$slots:{default:[_7]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function b7(s){let t,n;return t=new ao.Root({props:{color:"accent",size:1,variant:"solid",highContrast:!0,$$slots:{default:[C7]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function _7(s){let t;return{c(){t=V("Agent")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function C7(s){let t;return{c(){t=V("Agent")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function A7(s){let t,n,e,o,r,i=gn(s[2]);function c(u){s[29](u)}let a={value:Sn.getDisplayName(s[2]),placeholder:"Conversation name",onAcceptEdit:s[27],onStartEdit:l9,onCancelEdit:u9};s[0]!==void 0&&(a.isEditing=s[0]),n=new m7({props:a}),s[28](n),Gt.push(()=>ke(n,"isEditing",c));let l=i&&Rd(s);return{c(){t=D("span"),g(n.$$.fragment),o=z(),l&&l.c(),k(t,"class","l-thread-menu-item__title svelte-nvsyjc"),k(t,"data-testid","thread-menu-item-title"),k(t,"slot","title")},m(u,m){_(u,t,m),h(n,t,null),P(t,o),l&&l.m(t,null),r=!0},p(u,m){const p={};4&m[0]&&(p.value=Sn.getDisplayName(u[2])),12&m[0]&&(p.onAcceptEdit=u[27]),!e&&1&m[0]&&(e=!0,p.isEditing=u[0],De(()=>e=!1)),n.$set(p),4&m[0]&&(i=gn(u[2])),i?l?(l.p(u,m),4&m[0]&&d(l,1)):(l=Rd(u),l.c(),d(l,1),l.m(t,null)):l&&(Y(),$(l,1,1,()=>{l=null}),K())},i(u){r||(d(n.$$.fragment,u),d(l),r=!0)},o(u){$(n.$$.fragment,u),$(l),r=!1},d(u){u&&y(t),s[28](null),v(n),l&&l.d()}}}function M7(s){let t,n;return t=new yt.Root({props:{open:s[6],$$slots:{default:[e9]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};64&o[0]&&(r.open=e[6]),5862&o[0]|2&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function k7(s){let t,n,e,o;return t=new se({props:{size:1,variant:"soft",color:"success",title:"Save",$$slots:{default:[n9]},$$scope:{ctx:s}}}),t.$on("click",function(){xe(s[1].acceptEdit)&&s[1].acceptEdit.apply(this,arguments)}),e=new se({props:{size:1,variant:"soft",color:"neutral",title:"Cancel",$$slots:{default:[o9]},$$scope:{ctx:s}}}),e.$on("click",function(){xe(s[1].cancelEdit)&&s[1].cancelEdit.apply(this,arguments)}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){s=r;const c={};2&i[1]&&(c.$$scope={dirty:i,ctx:s}),t.$set(c);const a={};2&i[1]&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function S7(s){let t,n;return t=new cr({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function T7(s){let t,n,e;return n=new se({props:{variant:"ghost-block",color:"neutral",size:1,title:i9,$$slots:{default:[S7]},$$scope:{ctx:s}}}),n.$on("click",s[18]),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","l-thread-menu-item__options svelte-nvsyjc")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};2&r[1]&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function E7(s){let t;return{c(){t=V("Options")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Dd(s){let t,n;return t=new yt.Item({props:{class:"c-thread-menu__share-link",onSelect:s[19],$$slots:{iconLeft:[B7],default:[P7]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4&o[0]&&(r.onSelect=e[19]),128&o[0]|2&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function I7(s){let t;return{c(){t=V("Share link to session")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function L7(s){let t;return{c(){t=V("Unable to create link")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function R7(s){let t;return{c(){t=V("Link copied")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function D7(s){let t;return{c(){t=V("Creating link")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function P7(s){let t;function n(r,i){return r[7]==="retrieving"?D7:r[7]==="copied"?R7:r[7]==="failure"?L7:I7}let e=n(s),o=e(s);return{c(){o.c(),t=gt()},m(r,i){o.m(r,i),_(r,t,i)},p(r,i){e!==(e=n(r))&&(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&y(t),o.d(r)}}}function N7(s){let t,n;return t=new si({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function F7(s){let t,n;return t=new Ar({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function z7(s){let t,n;return t=new co({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function O7(s){let t,n;return t=new Tn({props:{size:1}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function B7(s){let t,n,e,o;const r=[O7,z7,F7,N7],i=[];function c(a,l){return a[7]==="retrieving"?0:a[7]==="copied"?1:a[7]==="failure"?2:3}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n||(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function H7(s){let t;return{c(){t=V("Rename")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function U7(s){let t,n;return t=new Tr({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function q7(s){let t,n=s[2].isPinned?"Unpin":"Pin";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){4&o[0]&&n!==(n=e[2].isPinned?"Unpin":"Pin")&&ht(t,n)},d(e){e&&y(t)}}}function j7(s){let t,n;return t=new h7({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function W7(s){let t,n;return t=new f7({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function V7(s){let t,n,e,o;const r=[W7,j7],i=[];function c(a,l){return a[2].isPinned?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n||(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function Pd(s){let t,n,e,o,r,i,c,a;return t=new yt.Separator({}),e=new yt.Label({props:{$$slots:{default:[G7]},$$scope:{ctx:s}}}),r=new yt.Item({props:{onSelect:s[22],$$slots:{iconLeft:[K7],default:[Y7]},$$scope:{ctx:s}}}),c=new yt.Item({props:{onSelect:s[23],$$slots:{iconLeft:[J7],default:[X7]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment),o=z(),g(r.$$.fragment),i=z(),g(c.$$.fragment)},m(l,u){h(t,l,u),_(l,n,u),h(e,l,u),_(l,o,u),h(r,l,u),_(l,i,u),h(c,l,u),a=!0},p(l,u){const m={};2&u[1]&&(m.$$scope={dirty:u,ctx:l}),e.$set(m);const p={};64&u[0]&&(p.onSelect=l[22]),2&u[1]&&(p.$$scope={dirty:u,ctx:l}),r.$set(p);const f={};64&u[0]&&(f.onSelect=l[23]),2&u[1]&&(f.$$scope={dirty:u,ctx:l}),c.$set(f)},i(l){a||(d(t.$$.fragment,l),d(e.$$.fragment,l),d(r.$$.fragment,l),d(c.$$.fragment,l),a=!0)},o(l){$(t.$$.fragment,l),$(e.$$.fragment,l),$(r.$$.fragment,l),$(c.$$.fragment,l),a=!1},d(l){l&&(y(n),y(o),y(i)),v(t,l),v(e,l),v(r,l),v(c,l)}}}function G7(s){let t;return{c(){t=V("Debug")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Y7(s){let t;return{c(){t=V("Export conversation")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function K7(s){let t,n;return t=new pp({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function X7(s){let t;return{c(){t=V("Import conversation")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function J7(s){let t,n;return t=new H1({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Z7(s){let t;return{c(){t=V("Delete")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Q7(s){let t,n;return t=new rs({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function t9(s){let t,n,e,o,r,i,c,a,l,u;t=new yt.Label({props:{$$slots:{default:[E7]},$$scope:{ctx:s}}});let m=s[10]&&s[2].isShareable&&Dd(s);o=new yt.Item({props:{onSelect:s[20],$$slots:{iconLeft:[U7],default:[H7]},$$scope:{ctx:s}}}),i=new yt.Item({props:{title:a9,onSelect:s[21],$$slots:{iconLeft:[V7],default:[q7]},$$scope:{ctx:s}}});let p=s[9]&&Pd(s);return l=new yt.Item({props:{title:c9,color:"error",onSelect:s[24],$$slots:{iconLeft:[Q7],default:[Z7]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),m&&m.c(),e=z(),g(o.$$.fragment),r=z(),g(i.$$.fragment),c=z(),p&&p.c(),a=z(),g(l.$$.fragment)},m(f,x){h(t,f,x),_(f,n,x),m&&m.m(f,x),_(f,e,x),h(o,f,x),_(f,r,x),h(i,f,x),_(f,c,x),p&&p.m(f,x),_(f,a,x),h(l,f,x),u=!0},p(f,x){const A={};2&x[1]&&(A.$$scope={dirty:x,ctx:f}),t.$set(A),f[10]&&f[2].isShareable?m?(m.p(f,x),1028&x[0]&&d(m,1)):(m=Dd(f),m.c(),d(m,1),m.m(e.parentNode,e)):m&&(Y(),$(m,1,1,()=>{m=null}),K());const C={};66&x[0]&&(C.onSelect=f[20]),2&x[1]&&(C.$$scope={dirty:x,ctx:f}),o.$set(C);const M={};4164&x[0]&&(M.onSelect=f[21]),4&x[0]|2&x[1]&&(M.$$scope={dirty:x,ctx:f}),i.$set(M),f[9]?p?(p.p(f,x),512&x[0]&&d(p,1)):(p=Pd(f),p.c(),d(p,1),p.m(a.parentNode,a)):p&&(Y(),$(p,1,1,()=>{p=null}),K());const S={};100&x[0]&&(S.onSelect=f[24]),2&x[1]&&(S.$$scope={dirty:x,ctx:f}),l.$set(S)},i(f){u||(d(t.$$.fragment,f),d(m),d(o.$$.fragment,f),d(i.$$.fragment,f),d(p),d(l.$$.fragment,f),u=!0)},o(f){$(t.$$.fragment,f),$(m),$(o.$$.fragment,f),$(i.$$.fragment,f),$(p),$(l.$$.fragment,f),u=!1},d(f){f&&(y(n),y(e),y(r),y(c),y(a)),v(t,f),m&&m.d(f),v(o,f),v(i,f),p&&p.d(f),v(l,f)}}}function e9(s){let t,n,e,o;return t=new yt.Trigger({props:{$$slots:{default:[T7]},$$scope:{ctx:s}}}),e=new yt.Content({props:{size:1,side:"bottom",align:"end",onClickOutside:s[25],onEscapeKeyDown:s[26],$$slots:{default:[t9]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};64&i[0]|2&i[1]&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};64&i[0]&&(a.onClickOutside=r[25]),64&i[0]&&(a.onEscapeKeyDown=r[26]),5862&i[0]|2&i[1]&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function n9(s){let t,n;return t=new co({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function o9(s){let t,n;return t=new Ar({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function r9(s){let t,n,e,o,r;const i=[k7,M7],c=[];function a(m,p){return m[0]?0:1}n=a(s),e=c[n]=i[n](s);const l=s[17].right,u=Xt(l,s,s[32],Ld);return{c(){t=D("div"),e.c(),o=z(),u&&u.c(),k(t,"slot","right"),k(t,"class","l-thread-menu-item__right svelte-nvsyjc")},m(m,p){_(m,t,p),c[n].m(t,null),P(t,o),u&&u.m(t,null),r=!0},p(m,p){let f=n;n=a(m),n===f?c[n].p(m,p):(Y(),$(c[f],1,1,()=>{c[f]=null}),K(),e=c[n],e?e.p(m,p):(e=c[n]=i[n](m),e.c()),d(e,1),e.m(t,o)),u&&u.p&&(!r||2&p[1])&&Jt(u,l,m,m[32],r?Qt(l,m[32],p,y7):Zt(m[32]),Ld)},i(m){r||(d(e),d(u,m),r=!0)},o(m){$(e),$(u,m),r=!1},d(m){m&&y(t),c[n].d(),u&&u.d(m)}}}function s9(s){let t,n;return t=new B1({props:{selected:s[8],isSelectable:!0,$$slots:{right:[r9],title:[A7]},$$scope:{ctx:s}}}),t.$on("click",s[30]),t.$on("keydown",function(){xe(yo("Enter",s[31]))&&yo("Enter",s[31]).apply(this,arguments)}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){s=e;const r={};256&o[0]&&(r.selected=s[8]),6127&o[0]|2&o[1]&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}const i9="Conversation Options",a9="Pin session",c9="Delete session",l9=()=>{},u9=()=>{};function d9(s,t,n){let e,o,r,i,c,a,l=N,u=()=>(l(),l=oe(A,U=>n(12,c=U)),A),m=N;s.$$.on_destroy.push(()=>l()),s.$$.on_destroy.push(()=>m());let{$$slots:p={},$$scope:f}=t,{conversation:x}=t,{chatModel:A}=t;u();let C,{onConversationClicked:M}=t,{deleteConversation:S}=t,{editableTitle:L}=t,{isEditingTitle:I=!1}=t,X=!1;async function j(U){if(U!==void 0&&C===void 0){n(7,C=x.lastUrl?"copied":"retrieving");try{const O=await A.getConversationUrl(U);navigator.clipboard.writeText(O),n(7,C="copied")}catch(O){console.error("Failed to get conversation URL: ",O),n(7,C="failure")}finally{setTimeout(()=>{n(6,X=!1),n(7,C=void 0)},1200)}}}async function H(){try{await U1(x,{includeMetadata:!0,notes:`Exported from thread menu on ${new Date().toISOString()}`,extensionClient:A.extensionClient})}catch(U){console.error("Failed to export conversation:",U)}}async function J(){try{const U=await q1(c,{generateNewId:!0,namePrefix:"[Imported] ",markAsImported:!0});U&&c.setCurrentConversation(U)}catch(U){console.error("Failed to import conversation:",U)}}return s.$$set=U=>{"conversation"in U&&n(2,x=U.conversation),"chatModel"in U&&u(n(3,A=U.chatModel)),"onConversationClicked"in U&&n(4,M=U.onConversationClicked),"deleteConversation"in U&&n(5,S=U.deleteConversation),"editableTitle"in U&&n(1,L=U.editableTitle),"isEditingTitle"in U&&n(0,I=U.isEditingTitle),"$$scope"in U&&n(32,f=U.$$scope)},s.$$.update=()=>{8&s.$$.dirty[0]&&(n(11,e=A.flags),m(),m=oe(e,U=>n(16,a=U))),65536&s.$$.dirty[0]&&n(10,o=a.enableShareService),65536&s.$$.dirty[0]&&n(9,r=a.enableConversationDebugUtils),13&s.$$.dirty[0]&&n(8,i=x.id===A.currentConversationId&&!I)},[I,L,x,A,M,S,X,C,i,r,o,e,c,j,H,J,a,p,()=>{n(6,X=!X)},()=>j(x.id),U=>{n(6,X=!1),L==null||L.startEdit(U)},()=>{c.toggleConversationPinned(x.id),n(6,X=!1)},async()=>{H(),n(6,X=!1)},async()=>{J(),n(6,X=!1)},async()=>{S(x.id),n(6,X=!1)},()=>n(6,X=!1),()=>n(6,X=!1),U=>{A.renameConversation(x.id,U)},function(U){Gt[U?"unshift":"push"](()=>{L=U,n(1,L)})},function(U){I=U,n(0,I)},()=>M(x.id),()=>M(x.id),f]}class $9 extends ct{constructor(t){super(),lt(this,t,d9,s9,it,{conversation:2,chatModel:3,onConversationClicked:4,deleteConversation:5,editableTitle:1,isEditingTitle:0},null,[-1,-1])}}function Nd(s,t,n){const e=s.slice();return e[10]=t[n],e}function Fd(s){let t,n,e,o,r,i;e=new B1({props:{$$slots:{right:[y9],title:[m9]},$$scope:{ctx:s}}});let c=ee(s[1]),a=[];for(let u=0;u<c.length;u+=1)a[u]=zd(Nd(s,c,u));const l=u=>$(a[u],1,1,()=>{a[u]=null});return{c(){t=D("div"),n=D("div"),g(e.$$.fragment),o=z(),r=D("div");for(let u=0;u<a.length;u+=1)a[u].c();k(n,"class","l-thread-group__header svelte-1c3ly67"),k(t,"class","l-thread-group")},m(u,m){_(u,t,m),P(t,n),h(e,n,null),P(t,o),P(t,r);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(r,null);i=!0},p(u,m){const p={};if(8227&m&&(p.$$scope={dirty:m,ctx:u}),e.$set(p),30&m){let f;for(c=ee(u[1]),f=0;f<c.length;f+=1){const x=Nd(u,c,f);a[f]?(a[f].p(x,m),d(a[f],1)):(a[f]=zd(x),a[f].c(),d(a[f],1),a[f].m(r,null))}for(Y(),f=c.length;f<a.length;f+=1)l(f);K()}},i(u){if(!i){d(e.$$.fragment,u);for(let m=0;m<c.length;m+=1)d(a[m]);i=!0}},o(u){$(e.$$.fragment,u),a=a.filter(Boolean);for(let m=0;m<a.length;m+=1)$(a[m]);i=!1},d(u){u&&y(t),v(e),rn(a,u)}}}function m9(s){let t,n;return{c(){t=D("span"),n=V(s[0]),k(t,"slot","title")},m(e,o){_(e,t,o),P(t,n)},p(e,o){1&o&&ht(n,e[0])},d(e){e&&y(t)}}}function p9(s){let t,n;return t=new cr({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function f9(s){let t,n;return t=new se({props:{variant:"ghost-block",color:"neutral",size:1,title:"Group options",$$slots:{default:[p9]},$$scope:{ctx:s}}}),t.$on("click",s[7]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};8192&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function g9(s){let t,n,e,o,r=s[1].length+"",i=s[1].length>1?"s":"";return{c(){t=V("Delete "),n=V(r),e=V(" thread"),o=V(i)},m(c,a){_(c,t,a),_(c,n,a),_(c,e,a),_(c,o,a)},p(c,a){2&a&&r!==(r=c[1].length+"")&&ht(n,r),2&a&&i!==(i=c[1].length>1?"s":"")&&ht(o,i)},d(c){c&&(y(t),y(n),y(e),y(o))}}}function h9(s){let t,n;return t=new rs({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function v9(s){let t,n;return t=new yt.Item({props:{color:"error",onSelect:s[6],$$slots:{iconLeft:[h9],default:[g9]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};8194&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function w9(s){let t,n,e,o;return t=new yt.Trigger({props:{$$slots:{default:[f9]},$$scope:{ctx:s}}}),e=new yt.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[v9]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};8224&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};8194&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function y9(s){let t,n,e;return n=new yt.Root({props:{open:s[5],triggerOn:[te.Hover,te.Click],onHoverStart:b9,onHoverEnd:s[8],onOpenChange:s[9],$$slots:{default:[w9]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"slot","right"),k(t,"class","l-thread-group__options")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};32&r&&(i.open=o[5]),32&r&&(i.onHoverEnd=o[8]),8226&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function zd(s){let t,n;return t=new $9({props:{conversation:s[10],chatModel:s[4],onConversationClicked:s[2],deleteConversation:s[3]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.conversation=e[10]),16&o&&(r.chatModel=e[4]),4&o&&(r.onConversationClicked=e[2]),8&o&&(r.deleteConversation=e[3]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function x9(s){let t,n,e=s[1].length>0&&Fd(s);return{c(){e&&e.c(),t=gt()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,[r]){o[1].length>0?e?(e.p(o,r),2&r&&d(e,1)):(e=Fd(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}const b9=()=>{};function _9(s,t,n){let{groupTitle:e}=t,{conversations:o}=t,{onConversationClicked:r}=t,{deleteConversation:i}=t,{chatModel:c}=t,a=!1;return s.$$set=l=>{"groupTitle"in l&&n(0,e=l.groupTitle),"conversations"in l&&n(1,o=l.conversations),"onConversationClicked"in l&&n(2,r=l.onConversationClicked),"deleteConversation"in l&&n(3,i=l.deleteConversation),"chatModel"in l&&n(4,c=l.chatModel)},[e,o,r,i,c,a,async function(){await c.deleteConversations(o.map(l=>l.id))},()=>n(5,a=!a),()=>n(5,a=!1),l=>{var u;l||(u=document.activeElement)!=null&&u.closest(".l-thread-group__options")&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()}]}class C9 extends ct{constructor(t){super(),lt(this,t,_9,x9,it,{groupTitle:0,conversations:1,onConversationClicked:2,deleteConversation:3,chatModel:4})}}function Od(s,t,n){const e=s.slice();return e[39]=t[n].label,e[40]=t[n].value,e}function Bd(s,t,n){const e=s.slice();return e[36]=t[n],e[38]=n,e}function Hd(s){let t,n,e={triggerOn:[te.Click],$$slots:{content:[I9],default:[M9]},$$scope:{ctx:s}};return t=new Nt({props:e}),s[28](t),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,r){const i={};2144&r[0]|4096&r[1]&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){s[28](null),v(t,o)}}}function A9(s){let t,n;return t=new si({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function M9(s){let t,n;return t=new se({props:{variant:"ghost-block",color:"neutral",size:1,title:"Share session",$$slots:{default:[A9]},$$scope:{ctx:s}}}),t.$on("click",s[27]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4096&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function k9(s){let t;return{c(){t=V("Copy link to thread")},m(n,e){_(n,t,e)},p:N,i:N,o:N,d(n){n&&y(t)}}}function S9(s){let t;return{c(){t=V(s[6])},m(n,e){_(n,t,e)},p(n,e){64&e[0]&&ht(t,n[6])},i:N,o:N,d(n){n&&y(t)}}}function T9(s){let t;return{c(){t=V("Copied link to clipboard!")},m(n,e){_(n,t,e)},p:N,i:N,o:N,d(n){n&&y(t)}}}function E9(s){let t,n,e,o;return n=new Tn({props:{size:1,useCurrentColor:!0}}),{c(){t=D("div"),g(n.$$.fragment),e=V(" Copying link...")},m(r,i){_(r,t,i),h(n,t,null),P(t,e),o=!0},p:N,i(r){o||(d(n.$$.fragment,r),o=!0)},o(r){$(n.$$.fragment,r),o=!1},d(r){r&&y(t),v(n)}}}function I9(s){let t,n,e,o;const r=[E9,T9,S9,k9],i=[];function c(a,l){return a[5]==="retrieving"?0:a[5]==="copied"?1:a[5]==="failure"?2:3}return n=c(s),e=i[n]=r[n](s),{c(){t=D("div"),e.c(),k(t,"slot","content")},m(a,l){_(a,t,l),i[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n===u?i[n].p(a,l):(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),e=i[n],e?e.p(a,l):(e=i[n]=r[n](a),e.c()),d(e,1),e.m(t,null))},i(a){o||(d(e),o=!0)},o(a){$(e),o=!1},d(a){a&&y(t),i[n].d()}}}function L9(s){let t,n;return t=new Po({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function R9(s){let t,n;return t=new Ji({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function D9(s){let t,n;return t=new se({props:{variant:"solid",color:"neutral",size:1,"data-testid":V9,$$slots:{default:[R9]},$$scope:{ctx:s}}}),t.$on("click",s[29]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4096&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function P9(s){let t,n,e;return n=new Qr({props:{icons:[`${qs.cmdOrCtrl}`,"L"]}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"slot","content"),k(t,"class","c-threads-menu__new-thread-tooltip-content svelte-113v40n")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function N9(s){let t,n,e,o,r,i,c=s[1].flags.enableShareService&&s[10]&&Hd(s);return e=new se({props:{variant:"ghost-block",color:"neutral",size:1,title:s[3]?Vd:Wd,$$slots:{default:[L9]},$$scope:{ctx:s}}}),e.$on("click",s[14]),e.$on("keydown",yo("Enter",s[14])),r=new Nt({props:{$$slots:{content:[P9],default:[D9]},$$scope:{ctx:s}}}),{c(){t=D("div"),c&&c.c(),n=z(),g(e.$$.fragment),o=z(),g(r.$$.fragment),k(t,"class","c-threads-menu__right-btns svelte-113v40n"),k(t,"slot","buttons")},m(a,l){_(a,t,l),c&&c.m(t,null),P(t,n),h(e,t,null),P(t,o),h(r,t,null),i=!0},p(a,l){a[1].flags.enableShareService&&a[10]?c?(c.p(a,l),1026&l[0]&&d(c,1)):(c=Hd(a),c.c(),d(c,1),c.m(t,n)):c&&(Y(),$(c,1,1,()=>{c=null}),K());const u={};8&l[0]&&(u.title=a[3]?Vd:Wd),4096&l[1]&&(u.$$scope={dirty:l,ctx:a}),e.$set(u);const m={};4096&l[1]&&(m.$$scope={dirty:l,ctx:a}),r.$set(m)},i(a){i||(d(c),d(e.$$.fragment,a),d(r.$$.fragment,a),i=!0)},o(a){$(c),$(e.$$.fragment,a),$(r.$$.fragment,a),i=!1},d(a){a&&y(t),c&&c.d(),v(e),v(r)}}}function F9(s){let t;return{c(){t=V("Sort by:")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function z9(s){let t,n=s[2]==="lastMessageTimestamp"?"Last Message":"Created Date";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){4&o[0]&&n!==(n=e[2]==="lastMessageTimestamp"?"Last Message":"Created Date")&&ht(t,n)},d(e){e&&y(t)}}}function O9(s){let t,n,e,o,r;return n=new Ot({props:{size:1,$$slots:{default:[z9]},$$scope:{ctx:s}}}),o=new Po({}),{c(){t=D("div"),g(n.$$.fragment),e=z(),g(o.$$.fragment),k(t,"class","c-threads-menu__sort-trigger svelte-113v40n")},m(i,c){_(i,t,c),h(n,t,null),P(t,e),h(o,t,null),r=!0},p(i,c){const a={};4&c[0]|4096&c[1]&&(a.$$scope={dirty:c,ctx:i}),n.$set(a)},i(i){r||(d(n.$$.fragment,i),d(o.$$.fragment,i),r=!0)},o(i){$(n.$$.fragment,i),$(o.$$.fragment,i),r=!1},d(i){i&&y(t),v(n),v(o)}}}function B9(s){let t,n,e=s[39]+"";return{c(){t=V(e),n=z()},m(o,r){_(o,t,r),_(o,n,r)},p:N,d(o){o&&(y(t),y(n))}}}function Ud(s){let t,n;function e(){return s[25](s[40])}return t=new yt.Item({props:{onSelect:e,highlight:s[2]===s[40],$$slots:{default:[B9]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,r){s=o;const i={};513&r[0]&&(i.onSelect=e),4&r[0]&&(i.highlight=s[2]===s[40]),4096&r[1]&&(i.$$scope={dirty:r,ctx:s}),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){v(t,o)}}}function H9(s){let t,n,e=ee(s[13]),o=[];for(let i=0;i<e.length;i+=1)o[i]=Ud(Od(s,e,i));const r=i=>$(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=gt()},m(i,c){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(i,c);_(i,t,c),n=!0},p(i,c){if(8709&c[0]){let a;for(e=ee(i[13]),a=0;a<e.length;a+=1){const l=Od(i,e,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=Ud(l),o[a].c(),d(o[a],1),o[a].m(t.parentNode,t))}for(Y(),a=e.length;a<o.length;a+=1)r(a);K()}},i(i){if(!n){for(let c=0;c<e.length;c+=1)d(o[c]);n=!0}},o(i){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(i){i&&y(t),rn(o,i)}}}function U9(s){let t,n,e,o;return t=new yt.Trigger({props:{$$slots:{default:[O9]},$$scope:{ctx:s}}}),e=new yt.Content({props:{size:1,side:"bottom",align:"start",$$slots:{default:[H9]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};4&i[0]|4096&i[1]&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};517&i[0]|4096&i[1]&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function q9(s){let t,n,e,o,r,i;e=new Ot({props:{size:1,weight:"medium",$$slots:{default:[F9]},$$scope:{ctx:s}}});let c={$$slots:{default:[U9]},$$scope:{ctx:s}};return r=new yt.Root({props:c}),s[26](r),{c(){t=D("div"),n=D("div"),g(e.$$.fragment),o=z(),g(r.$$.fragment),k(n,"class","c-threads-menu__sort-label svelte-113v40n"),k(t,"slot","sort-options"),k(t,"class","c-threads-menu__sort-options svelte-113v40n")},m(a,l){_(a,t,l),P(t,n),h(e,n,null),P(t,o),h(r,t,null),i=!0},p(a,l){const u={};4096&l[1]&&(u.$$scope={dirty:l,ctx:a}),e.$set(u);const m={};517&l[0]|4096&l[1]&&(m.$$scope={dirty:l,ctx:a}),r.$set(m)},i(a){i||(d(e.$$.fragment,a),d(r.$$.fragment,a),i=!0)},o(a){$(e.$$.fragment,a),$(r.$$.fragment,a),i=!1},d(a){a&&y(t),v(e),s[26](null),v(r)}}}function qd(s){let t,n,e,o;return n=new gp({props:{size:4}}),{c(){t=D("div"),g(n.$$.fragment),e=z(),k(t,"class","c-threads-menu__separator svelte-113v40n")},m(r,i){_(r,t,i),h(n,t,null),P(t,e),o=!0},i(r){o||(d(n.$$.fragment,r),o=!0)},o(r){$(n.$$.fragment,r),o=!1},d(r){r&&y(t),v(n)}}}function jd(s){let t,n,e,o;t=new C9({props:{groupTitle:s[36].groupTitle,conversations:s[36].conversations,onConversationClicked:s[17],deleteConversation:s[18],chatModel:s[1]}});let r=s[38]<s[4].length-1&&qd();return{c(){g(t.$$.fragment),n=z(),r&&r.c(),e=gt()},m(i,c){h(t,i,c),_(i,n,c),r&&r.m(i,c),_(i,e,c),o=!0},p(i,c){const a={};16&c[0]&&(a.groupTitle=i[36].groupTitle),16&c[0]&&(a.conversations=i[36].conversations),2&c[0]&&(a.chatModel=i[1]),t.$set(a),i[38]<i[4].length-1?r?16&c[0]&&d(r,1):(r=qd(),r.c(),d(r,1),r.m(e.parentNode,e)):r&&(Y(),$(r,1,1,()=>{r=null}),K())},i(i){o||(d(t.$$.fragment,i),d(r),o=!0)},o(i){$(t.$$.fragment,i),$(r),o=!1},d(i){i&&(y(n),y(e)),v(t,i),r&&r.d(i)}}}function j9(s){let t,n,e=ee(s[4]),o=[];for(let i=0;i<e.length;i+=1)o[i]=jd(Bd(s,e,i));const r=i=>$(o[i],1,1,()=>{o[i]=null});return{c(){t=D("div");for(let i=0;i<o.length;i+=1)o[i].c();k(t,"slot","body"),k(t,"data-testid","threads-menu-body")},m(i,c){_(i,t,c);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(t,null);n=!0},p(i,c){if(393234&c[0]){let a;for(e=ee(i[4]),a=0;a<e.length;a+=1){const l=Bd(i,e,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=jd(l),o[a].c(),d(o[a],1),o[a].m(t,null))}for(Y(),a=e.length;a<o.length;a+=1)r(a);K()}},i(i){if(!n){for(let c=0;c<e.length;c+=1)d(o[c]);n=!0}},o(i){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(i){i&&y(t),rn(o,i)}}}function W9(s){let t,n,e,o,r;function i(a){s[30](a)}let c={active:s[3],class:j1,title:Sn.getDisplayName(s[11]),$$slots:{body:[j9],"sort-options":[q9],buttons:[N9]},$$scope:{ctx:s}};return s[8]!==void 0&&(c.element=s[8]),t=new n7({props:c}),Gt.push(()=>ke(t,"element",i)),t.$on("click",s[14]),t.$on("keydown",yo("Enter",s[14])),{c(){g(t.$$.fragment)},m(a,l){h(t,a,l),e=!0,o||(r=[Et(window,"blur",s[19]),Et(window,"keydown",yo("Escape",s[15])),Et(window,"click",s[24],!0)],o=!0)},p(a,l){const u={};8&l[0]&&(u.active=a[3]),2048&l[0]&&(u.title=Sn.getDisplayName(a[11])),3839&l[0]|4096&l[1]&&(u.$$scope={dirty:l,ctx:a}),!n&&256&l[0]&&(n=!0,u.element=a[8],De(()=>n=!1)),t.$set(u)},i(a){e||(d(t.$$.fragment,a),e=!0)},o(a){$(t.$$.fragment,a),e=!1},d(a){v(t,a),o=!1,Ye(r)}}}const j1="js-threads-menu",V9="new-thread-button",Wd="Show Sessions",Vd="Collapse Sessions";var We=(s=>(s.Pinned="Pinned",s.Active="Active remote agents",s.Today="Today",s.New="New",s.ThisWeek="Last 7 days",s.ThisMonth="Last 30 days",s.Older="Older",s))(We||{});function G9(s,t,n){let e,o,r,i,c,a,l=N,u=()=>(l(),l=oe(f,Q=>n(1,i=Q)),f),m=N,p=N;s.$$.on_destroy.push(()=>l()),s.$$.on_destroy.push(()=>m()),s.$$.on_destroy.push(()=>p());let{chatModel:f}=t;u();let{onActiveChanged:x=()=>{}}=t,{active:A}=t,C=A||!1;const M=[We.Pinned,We.Active,We.Today,We.ThisWeek,We.ThisMonth,We.Older];let S=[];function L(Q){A===void 0&&C!==Q&&(n(3,C=Q),x(Q))}function I(){L(!1)}function X(){f.setCurrentConversation(),I()}let j,H=!1,J,U,O,Z="";async function et(Q){if(Q!==void 0){J&&(clearTimeout(void 0),J.requestOpen()),n(5,j="retrieving"),n(6,Z="");try{const ut=await f.getConversationUrl(Q);navigator.clipboard.writeText(ut),n(5,j="copied")}catch(ut){const rt=ut;n(5,j="failure"),n(6,Z=rt.message)}finally{setTimeout(()=>{J==null||J.requestClose()},1200)}}}return s.$$set=Q=>{"chatModel"in Q&&u(n(0,f=Q.chatModel)),"onActiveChanged"in Q&&n(21,x=Q.onActiveChanged),"active"in Q&&n(22,A=Q.active)},s.$$.update=()=>{2&s.$$.dirty[0]&&(n(12,e=i.sortConversationsBy),m(),m=oe(e,Q=>n(2,c=Q))),2&s.$$.dirty[0]&&(n(11,o=i.currentConversationModel),p(),p=oe(o,Q=>n(23,a=Q))),8388609&s.$$.dirty[0]&&n(10,r=!!a.id&&f.isConversationShareable(a.id)),7&s.$$.dirty[0]&&(Q=>{var G;const ut=new Map,rt=new Date(new Date().setHours(0,0,0,0)),mt=[{age:We.Today,date:rt},{age:We.ThisWeek,date:new Date(rt.getTime()-6048e5)},{age:We.ThisMonth,date:new Date(rt.getTime()-2592e6)}];for(const Tt of Q){const Bt=Sn.getTime(Tt,c);let _t=((G=mt.find(Ct=>Bt>=Ct.date))==null?void 0:G.age)||We.Older;Tt.isPinned&&(_t=We.Pinned),ut.set(_t,[...ut.get(_t)||[],Tt])}n(4,S=M.map(Tt=>({groupTitle:Tt,conversations:ut.get(Tt)||[]})).filter(Tt=>Tt.conversations.length>0))})(i.orderedConversations(c).filter(Q=>!!f.flags.enableAgentMode||!gn(Q)))},[f,i,c,C,S,j,Z,J,U,O,r,o,e,[{label:"Last Message",value:"lastMessageTimestamp"},{label:"Created Date",value:"createdAt"}],function(Q){L(!C),Q.stopPropagation(),Q.preventDefault()},I,X,function(Q){f.setCurrentConversation(Q),I()},async function(Q){try{H=!0,await i.deleteConversation(Q)}finally{H=!1}},function(){H||I()},et,x,A,a,Q=>{U&&Q.composedPath().includes(U)||I()},Q=>{f.setSortConversationsBy(Q),O==null||O.requestClose()},function(Q){Gt[Q?"unshift":"push"](()=>{O=Q,n(9,O)})},Q=>{et(o.id),Q.stopPropagation()},function(Q){Gt[Q?"unshift":"push"](()=>{J=Q,n(7,J)})},Q=>{X(),Q.stopPropagation()},function(Q){U=Q,n(8,U)}]}class Y9 extends ct{constructor(t){super(),lt(this,t,G9,W9,it,{chatModel:0,onActiveChanged:21,active:22},null,[-1,-1])}}const K9=1e3,X9=[We.New,We.Pinned,We.Active,We.Today,We.ThisWeek,We.ThisMonth,We.Older];function J9(s){return s.sort((t,n)=>n.sortTimestamp.getTime()-t.sortTimestamp.getTime())}function Z9(s,t,n){if(s.type==="remoteAgent"){const e=t===s.id?n:void 0;if(e)return e.exchanges.slice(0,20).map(r=>r.exchange.request_message||"").join(" ");const o=s.agent;return o?[o.session_summary||"",...o.turn_summaries||[]].join(" "):""}return s.conversation&&s.conversation.chatHistory?s.conversation.chatHistory.slice(0,20).filter(e=>ai(e)).map(e=>e.request_message||"").join(" "):""}function Q9(s){var n,e;if(!s.agent||!((e=(n=s.agent.workspace_setup)==null?void 0:n.starting_files)!=null&&e.github_commit_ref))return"";const t=s.agent.workspace_setup.starting_files.github_commit_ref.repository_url;return[t,Cp(t),ta(t)].filter(Boolean).join(" ")}function tA(s){let t,n;return t=new he({props:{size:1,variant:"soft",color:"neutral","data-testid":W1,$$slots:{iconLeft:[oA],default:[nA]},$$scope:{ctx:s}}}),t.$on("click",s[10]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1048576&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function eA(s){let t,n,e;return n=new _1.Root({props:{variant:"soft",color:"neutral",radius:"medium",size:1,dropdownSide:"bottom",dropdownAlign:"end",class:"c-agent-type-dropdown__button",onDropdownOpenChange:s[9],$$slots:{"dropdown-content":[lA],button:[cA]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","new-thread-dropdown svelte-a7mgt")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};1048633&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function nA(s){let t;return{c(){t=V("New")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function oA(s){let t,n;return t=new Ap({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function rA(s){let t;return{c(){t=V("New")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function sA(s){let t,n,e;var o=s[0].icon;return o&&(t=vn(o,{props:{slot:"iconLeft"}})),{c(){t&&g(t.$$.fragment),n=gt()},m(r,i){t&&h(t,r,i),_(r,n,i),e=!0},p(r,i){if(1&i&&o!==(o=r[0].icon)){if(t){Y();const c=t;$(c.$$.fragment,1,0,()=>{v(c,1)}),K()}o?(t=vn(o,{props:{slot:"iconLeft"}}),g(t.$$.fragment),d(t.$$.fragment,1),h(t,n.parentNode,n)):t=null}},i(r){e||(t&&d(t.$$.fragment,r),e=!0)},o(r){t&&$(t.$$.fragment,r),e=!1},d(r){r&&y(n),t&&v(t,r)}}}function iA(s){let t,n;return t=new he({props:{size:1,variant:"soft",color:"neutral","data-testid":W1,"data-split-button-main":!0,$$slots:{iconLeft:[sA],default:[rA]},$$scope:{ctx:s}}}),t.$on("click",s[8]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1048577&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function aA(s){let t,n,e,o,r,i;return r=new Qr({props:{icons:[`${qs.cmdOrCtrl}`,"L"]}}),{c(){t=D("div"),n=D("span"),e=V(s[3]),o=z(),g(r.$$.fragment),k(t,"slot","content"),k(t,"class","c-new-thread-dropdown__tooltip-content svelte-a7mgt")},m(c,a){_(c,t,a),P(t,n),P(n,e),P(t,o),h(r,t,null),i=!0},p(c,a){(!i||8&a)&&ht(e,c[3])},i(c){i||(d(r.$$.fragment,c),i=!0)},o(c){$(r.$$.fragment,c),i=!1},d(c){c&&y(t),v(r)}}}function cA(s){let t,n;return t=new Nt({props:{slot:"button",$$slots:{content:[aA],default:[iA]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1048585&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Gd(s){let t,n;return t=new br({props:{onSelect:s[11],isConversationAgentic:!0,tooltipSide:"right",tooltipContent:"Require approval for some tools","data-testid":$A}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Yd(s){let t,n;return t=new br({props:{onSelect:s[12],isBackgroundAgent:!0,tooltipSide:"right",tooltipContent:"Run background agents in the cloud","data-testid":mA}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function lA(s){let t,n,e,o,r;t=new br({props:{onSelect:s[10],isConversationAgentic:!1,tooltipSide:"right",tooltipContent:"Ask Augment","data-testid":dA}});let i=s[4]&&Gd(s),c=s[5]&&Yd(s);return{c(){g(t.$$.fragment),n=z(),i&&i.c(),e=z(),c&&c.c(),o=gt()},m(a,l){h(t,a,l),_(a,n,l),i&&i.m(a,l),_(a,e,l),c&&c.m(a,l),_(a,o,l),r=!0},p(a,l){a[4]?i?(i.p(a,l),16&l&&d(i,1)):(i=Gd(a),i.c(),d(i,1),i.m(e.parentNode,e)):i&&(Y(),$(i,1,1,()=>{i=null}),K()),a[5]?c?(c.p(a,l),32&l&&d(c,1)):(c=Yd(a),c.c(),d(c,1),c.m(o.parentNode,o)):c&&(Y(),$(c,1,1,()=>{c=null}),K())},i(a){r||(d(t.$$.fragment,a),d(i),d(c),r=!0)},o(a){$(t.$$.fragment,a),$(i),$(c),r=!1},d(a){a&&(y(n),y(e),y(o)),v(t,a),i&&i.d(a),c&&c.d(a)}}}function uA(s){let t,n,e,o;const r=[eA,tA],i=[];function c(a,l){return a[4]||a[5]?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t===u?i[t].p(a,l):(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}const W1="new-thread-button",dA="new-chat-thread-button",$A="new-local-agent-manual-thread-button",mA="new-remote-agent-thread-button";function pA(s,t,n){let e,o,r,i,c,a,l,u,m,p,f=N,x=N;s.$$.on_destroy.push(()=>f()),s.$$.on_destroy.push(()=>x());const A=Mt(on.key);kt(s,A,I=>n(14,u=I));const C=Mt(yr.key),M=Mt("chatModel");kt(s,M,I=>n(16,p=I));const S=Mt("agentConversationModel");function L(I){switch(I){case"remoteAgent":return tr.remoteAgent;case"localAgent":return tr.agent;case"chat":return tr.chat;default:return tr.unknown}}return s.$$.update=()=>{65536&s.$$.dirty&&n(5,e=!!M&&p.flags.enableBackgroundAgents),65536&s.$$.dirty&&n(4,o=!!M&&p.flags.enableAgentMode),57350&s.$$.dirty&&n(0,c=ri({isConversationAgentic:!!r&&m,agentExecutionMode:i?l:void 0,isBackgroundAgent:!!A&&u.isActive})),1&s.$$.dirty&&n(3,a=c.type==="remoteAgent"?"New Remote Agent":c.type==="localAgent"?"New Agent":"New Chat")},n(2,r=S==null?void 0:S.isCurrConversationAgentic),x(),x=oe(r,I=>n(15,m=I)),n(1,i=M==null?void 0:M.agentExecutionMode),f(),f=oe(i,I=>n(13,l=I)),[c,i,r,a,o,e,A,M,async function(){const I=L(c.type);await A.reportRemoteAgentNewThreadButtonEvent(mr.click,I),C.createThreadOfCurrentType()},async function(I){const X=L(c.type),j=I?mr.open:mr.close;await A.reportRemoteAgentNewThreadButtonEvent(j,X)},async function(){await A.reportRemoteAgentNewThreadButtonEvent(mr.click,tr.chat),C.createNewChatThread()},async function(){await A.reportRemoteAgentNewThreadButtonEvent(mr.click,tr.agent),C.createNewLocalAgentThread(l)},async function(){await A.reportRemoteAgentNewThreadButtonEvent(mr.click,tr.remoteAgent),C.createNewRemoteAgentThread()},l,u,m,p]}class fA extends ct{constructor(t){super(),lt(this,t,pA,uA,it,{})}}function Kd(s){let t;return{c(){t=D("div"),k(t,"class","update-indicator svelte-ef9b48")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function gA(s){let t,n,e,o;n=new ii({});let r=s[0]&&Kd();return{c(){t=D("div"),g(n.$$.fragment),e=z(),r&&r.c(),k(t,"class","remote-agent-icon svelte-ef9b48")},m(i,c){_(i,t,c),h(n,t,null),P(t,e),r&&r.m(t,null),o=!0},p(i,[c]){i[0]?r||(r=Kd(),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},i(i){o||(d(n.$$.fragment,i),o=!0)},o(i){$(n.$$.fragment,i),o=!1},d(i){i&&y(t),v(n),r&&r.d()}}}function hA(s,t,n){let{hasUpdates:e=!1}=t;return s.$$set=o=>{"hasUpdates"in o&&n(0,e=o.hasUpdates)},[e]}class vA extends ct{constructor(t){super(),lt(this,t,hA,gA,it,{hasUpdates:0})}}function wA(s){let t,n;return{c(){t=ne("svg"),n=ne("path"),k(n,"d","M11.45 7.25C11.9167 7.68333 12.15 8.21667 12.15 8.85C12.15 9.45 11.95 9.98333 11.55 10.45C11.15 10.8833 10.65 11.1333 10.05 11.2C9.45 11.2333 8.9 11.0833 8.4 10.75C7.93333 10.3833 7.63333 9.9 7.5 9.3C6.83333 9.26667 6.18333 9.08333 5.55 8.75C4.81667 8.38333 4.2 7.85 3.7 7.15V9.4C4.06667 9.46667 4.4 9.63333 4.7 9.9C5 10.1333 5.21667 10.4167 5.35 10.75C5.51667 11.0833 5.58333 11.4 5.55 11.7C5.55 12.2 5.41667 12.65 5.15 13.05C4.91667 13.4167 4.56667 13.7 4.1 13.9C3.66667 14.0667 3.21667 14.1 2.75 14C2.28333 13.9 1.88333 13.6833 1.55 13.35C1.21667 13.0167 1 12.6333 0.9 12.2C0.833333 11.7333 0.883333 11.2833 1.05 10.85C1.25 10.3833 1.53333 10.0167 1.9 9.75C2.16667 9.58333 2.45 9.46667 2.75 9.4V4.65C2.28333 4.55 1.88333 4.33333 1.55 4C1.21667 3.66667 1 3.26667 0.9 2.8C0.833333 2.33333 0.883333 1.88333 1.05 1.45C1.25 1.01667 1.53333 0.666666 1.9 0.4C2.3 0.133333 2.73333 0 3.2 0C3.53333 0 3.85 0.0666666 4.15 0.2C4.75 0.433333 5.16667 0.849999 5.4 1.45C5.53333 1.75 5.6 2.06667 5.6 2.4C5.6 2.86667 5.46667 3.3 5.2 3.7C4.93333 4.06667 4.58333 4.35 4.15 4.55C4.01667 4.61667 3.88333 4.65 3.75 4.65C3.85 5.65 4.25 6.5 4.95 7.2C5.65 7.9 6.5 8.3 7.5 8.4C7.53333 8.26667 7.56667 8.13333 7.6 8C7.8 7.56667 8.1 7.21667 8.5 6.95C8.96667 6.65 9.46667 6.53333 10 6.6C10.5667 6.63333 11.05 6.85 11.45 7.25ZM3.75 10.4C3.48333 10.3 3.21667 10.2833 2.95 10.35C2.68333 10.3833 2.43333 10.5167 2.2 10.75C2 10.95 1.86667 11.1833 1.8 11.45C1.76667 11.7167 1.8 11.9833 1.9 12.25C2.03333 12.5167 2.21667 12.7333 2.45 12.9C2.71667 13.0667 3.01667 13.1333 3.35 13.1C3.68333 13.0667 3.96667 12.9333 4.2 12.7C4.43333 12.4667 4.56667 12.1833 4.6 11.85C4.63333 11.5167 4.56667 11.2333 4.4 11C4.23333 10.7333 4.01667 10.5333 3.75 10.4ZM3.2 3.75C3.56667 3.75 3.86667 3.65 4.1 3.45C4.36667 3.21667 4.53333 2.93333 4.6 2.6C4.66667 2.26667 4.61667 1.96667 4.45 1.7C4.28333 1.4 4.05 1.2 3.75 1.1C3.48333 0.966667 3.21667 0.933333 2.95 1C2.68333 1.03333 2.43333 1.15 2.2 1.35C2 1.55 1.86667 1.8 1.8 2.1C1.76667 2.36667 1.8 2.63333 1.9 2.9C2.03333 3.13333 2.21667 3.33333 2.45 3.5C2.68333 3.66667 2.93333 3.75 3.2 3.75ZM10.8 9.9C10.9667 9.73333 11.0833 9.53333 11.15 9.3C11.2167 9.06667 11.2167 8.85 11.15 8.65C11.1167 8.41667 11.0167 8.21667 10.85 8.05C10.7167 7.85 10.5333 7.7 10.3 7.6C10.0667 7.5 9.8 7.48333 9.5 7.55C9.23333 7.58333 9 7.7 8.8 7.9C8.6 8.1 8.46667 8.35 8.4 8.65C8.33333 8.91667 8.35 9.16667 8.45 9.4C8.55 9.63333 8.68333 9.83333 8.85 10C9.05 10.1333 9.26667 10.2333 9.5 10.3C9.73333 10.3333 9.96667 10.3167 10.2 10.25C10.4333 10.1833 10.6333 10.0667 10.8 9.9Z"),k(t,"width","15"),k(t,"height","15"),k(t,"viewBox","-1 0 15 15"),k(t,"fill","currentColor"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){_(e,t,o),P(t,n)},p:N,i:N,o:N,d(e){e&&y(t)}}}class V1 extends ct{constructor(t){super(),lt(this,t,null,wA,it,{})}}function yA(s){let t,n;return t=new cr({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function xA(s){let t,n;return t=new se({props:{variant:"ghost-block",color:"neutral",size:.5,class:"c-agent-header__options-btn",$$slots:{default:[yA]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};134217728&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Xd(s){var i;let t,n,e,o=s[3]&&Jd(s),r=s[2]&&((i=s[0].conversation)==null?void 0:i.isShareable)&&Zd(s);return{c(){o&&o.c(),t=z(),r&&r.c(),n=gt()},m(c,a){o&&o.m(c,a),_(c,t,a),r&&r.m(c,a),_(c,n,a),e=!0},p(c,a){var l;c[3]?o?(o.p(c,a),8&a&&d(o,1)):(o=Jd(c),o.c(),d(o,1),o.m(t.parentNode,t)):o&&(Y(),$(o,1,1,()=>{o=null}),K()),c[2]&&((l=c[0].conversation)!=null&&l.isShareable)?r?(r.p(c,a),5&a&&d(r,1)):(r=Zd(c),r.c(),d(r,1),r.m(n.parentNode,n)):r&&(Y(),$(r,1,1,()=>{r=null}),K())},i(c){e||(d(o),d(r),e=!0)},o(c){$(o),$(r),e=!1},d(c){c&&(y(t),y(n)),o&&o.d(c),r&&r.d(c)}}}function Jd(s){let t,n;return t=new yt.Item({props:{onSelect:s[14],$$slots:{iconLeft:[_A],default:[bA]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};134217728&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function bA(s){let t;return{c(){t=V("Rename")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function _A(s){let t,n;return t=new Tr({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Zd(s){let t,n;return t=new yt.Item({props:{class:"c-thread-menu__share-link",onSelect:s[16],$$slots:{iconLeft:[DA],default:[TA]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};134217824&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function CA(s){let t;return{c(){t=V("Share link to session")},m(n,e){_(n,t,e)},p:N,d(n){n&&y(t)}}}function AA(s){let t;return{c(){t=V("Unable to create link")},m(n,e){_(n,t,e)},p:N,d(n){n&&y(t)}}}function MA(s){let t;return{c(){t=V("Link copied")},m(n,e){_(n,t,e)},p:N,d(n){n&&y(t)}}}function kA(s){let t;return{c(){t=V("Creating link")},m(n,e){_(n,t,e)},p:N,d(n){n&&y(t)}}}function SA(s){let t;return{c(){t=V(s[6])},m(n,e){_(n,t,e)},p(n,e){64&e&&ht(t,n[6])},d(n){n&&y(t)}}}function TA(s){let t;function n(r,i){return r[6]?SA:r[5]==="retrieving"?kA:r[5]==="copied"?MA:r[5]==="failure"?AA:CA}let e=n(s),o=e(s);return{c(){o.c(),t=gt()},m(r,i){o.m(r,i),_(r,t,i)},p(r,i){e===(e=n(r))&&o?o.p(r,i):(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&y(t),o.d(r)}}}function EA(s){let t,n;return t=new si({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function IA(s){let t,n;return t=new Ar({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function LA(s){let t,n;return t=new co({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function RA(s){let t,n;return t=new Tn({props:{size:1}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function DA(s){let t,n,e,o;const r=[RA,LA,IA,EA],i=[];function c(a,l){return a[5]==="retrieving"?0:a[5]==="copied"?1:a[5]==="failure"?2:3}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n||(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function PA(s){let t,n=s[0].isPinned?"Unpin":"Pin";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){1&o&&n!==(n=e[0].isPinned?"Unpin":"Pin")&&ht(t,n)},d(e){e&&y(t)}}}function NA(s){let t,n,e;return n=new la({}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","pin-icon")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function Qd(s){let t,n,e,o;return t=new yt.Item({props:{onSelect:s[15],$$slots:{iconLeft:[BA],default:[OA]},$$scope:{ctx:s}}}),e=new yt.Item({props:{onSelect:s[14],$$slots:{iconLeft:[UA],default:[HA]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};134218241&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};134217728&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function FA(s){let t;return{c(){t=V("Copy ID")},m(n,e){_(n,t,e)},p:N,d(n){n&&y(t)}}}function zA(s){let t,n=s[9].get(s[0].id)+"";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){513&o&&n!==(n=e[9].get(e[0].id)+"")&&ht(t,n)},d(e){e&&y(t)}}}function OA(s){let t,n;function e(i,c){return 513&c&&(t=null),t==null&&(t=!!i[9].get(i[0].id)),t?zA:FA}let o=e(s,-1),r=o(s);return{c(){r.c(),n=gt()},m(i,c){r.m(i,c),_(i,n,c)},p(i,c){o===(o=e(i,c))&&r?r.p(i,c):(r.d(1),r=o(i),r&&(r.c(),r.m(n.parentNode,n)))},d(i){i&&y(n),r.d(i)}}}function BA(s){let t,n;return t=new ma({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function HA(s){let t;return{c(){t=V("Rename")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function UA(s){let t,n;return t=new Tr({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function qA(s){let t;return{c(){t=V("Delete")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function jA(s){let t,n,e;return n=new rs({}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","trash-icon svelte-1l3udf2")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function t$(s){let t,n,e,o,r,i,c,a;return t=new yt.Separator({}),e=new yt.Label({props:{$$slots:{default:[WA]},$$scope:{ctx:s}}}),r=new yt.Item({props:{onSelect:s[21],$$slots:{iconLeft:[GA],default:[VA]},$$scope:{ctx:s}}}),c=new yt.Item({props:{onSelect:s[22],$$slots:{iconLeft:[KA],default:[YA]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment),o=z(),g(r.$$.fragment),i=z(),g(c.$$.fragment)},m(l,u){h(t,l,u),_(l,n,u),h(e,l,u),_(l,o,u),h(r,l,u),_(l,i,u),h(c,l,u),a=!0},p(l,u){const m={};134217728&u&&(m.$$scope={dirty:u,ctx:l}),e.$set(m);const p={};16&u&&(p.onSelect=l[21]),134217728&u&&(p.$$scope={dirty:u,ctx:l}),r.$set(p);const f={};16&u&&(f.onSelect=l[22]),134217728&u&&(f.$$scope={dirty:u,ctx:l}),c.$set(f)},i(l){a||(d(t.$$.fragment,l),d(e.$$.fragment,l),d(r.$$.fragment,l),d(c.$$.fragment,l),a=!0)},o(l){$(t.$$.fragment,l),$(e.$$.fragment,l),$(r.$$.fragment,l),$(c.$$.fragment,l),a=!1},d(l){l&&(y(n),y(o),y(i)),v(t,l),v(e,l),v(r,l),v(c,l)}}}function WA(s){let t;return{c(){t=V("Debug")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function VA(s){let t;return{c(){t=V("Export conversation")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function GA(s){let t,n;return t=new H1({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function YA(s){let t;return{c(){t=V("Import conversation")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function KA(s){let t,n;return t=new pp({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function e$(s){let t,n,e,o,r,i,c,a;return t=new yt.Separator({}),e=new yt.Label({props:{$$slots:{default:[XA]},$$scope:{ctx:s}}}),r=new yt.Item({props:{onSelect:s[23],$$slots:{default:[JA]},$$scope:{ctx:s}}}),c=new yt.Item({props:{onSelect:s[24],$$slots:{default:[ZA]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment),o=z(),g(r.$$.fragment),i=z(),g(c.$$.fragment)},m(l,u){h(t,l,u),_(l,n,u),h(e,l,u),_(l,o,u),h(r,l,u),_(l,i,u),h(c,l,u),a=!0},p(l,u){const m={};134217728&u&&(m.$$scope={dirty:u,ctx:l}),e.$set(m);const p={};1&u&&(p.onSelect=l[23]),134217728&u&&(p.$$scope={dirty:u,ctx:l}),r.$set(p);const f={};1&u&&(f.onSelect=l[24]),134217728&u&&(f.$$scope={dirty:u,ctx:l}),c.$set(f)},i(l){a||(d(t.$$.fragment,l),d(e.$$.fragment,l),d(r.$$.fragment,l),d(c.$$.fragment,l),a=!0)},o(l){$(t.$$.fragment,l),$(e.$$.fragment,l),$(r.$$.fragment,l),$(c.$$.fragment,l),a=!1},d(l){l&&(y(n),y(o),y(i)),v(t,l),v(e,l),v(r,l),v(c,l)}}}function XA(s){let t;return{c(){t=V("INTERNAL Debug Features")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function JA(s){let t;return{c(){t=V("Pause")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function ZA(s){let t;return{c(){t=V("Resume")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function QA(s){let t,n,e,o,r,i,c,a,l,u=s[1]!=="remoteAgent"&&Xd(s);e=new yt.Item({props:{onSelect:s[12],$$slots:{iconLeft:[NA],default:[PA]},$$scope:{ctx:s}}});let m=s[1]==="remoteAgent"&&Qd(s);i=new yt.Item({props:{color:"error",onSelect:s[13],$$slots:{iconLeft:[jA],default:[qA]},$$scope:{ctx:s}}});let p=s[1]!=="remoteAgent"&&s[7]&&t$(s),f=s[1]==="remoteAgent"&&s[8]&&e$(s);return{c(){t=D("div"),u&&u.c(),n=z(),g(e.$$.fragment),o=z(),m&&m.c(),r=z(),g(i.$$.fragment),c=z(),p&&p.c(),a=z(),f&&f.c(),k(t,"class","c-thread-menu svelte-1l3udf2")},m(x,A){_(x,t,A),u&&u.m(t,null),P(t,n),h(e,t,null),P(t,o),m&&m.m(t,null),P(t,r),h(i,t,null),P(t,c),p&&p.m(t,null),P(t,a),f&&f.m(t,null),l=!0},p(x,A){x[1]!=="remoteAgent"?u?(u.p(x,A),2&A&&d(u,1)):(u=Xd(x),u.c(),d(u,1),u.m(t,n)):u&&(Y(),$(u,1,1,()=>{u=null}),K());const C={};134217729&A&&(C.$$scope={dirty:A,ctx:x}),e.$set(C),x[1]==="remoteAgent"?m?(m.p(x,A),2&A&&d(m,1)):(m=Qd(x),m.c(),d(m,1),m.m(t,r)):m&&(Y(),$(m,1,1,()=>{m=null}),K());const M={};134217728&A&&(M.$$scope={dirty:A,ctx:x}),i.$set(M),x[1]!=="remoteAgent"&&x[7]?p?(p.p(x,A),130&A&&d(p,1)):(p=t$(x),p.c(),d(p,1),p.m(t,a)):p&&(Y(),$(p,1,1,()=>{p=null}),K()),x[1]==="remoteAgent"&&x[8]?f?(f.p(x,A),258&A&&d(f,1)):(f=e$(x),f.c(),d(f,1),f.m(t,null)):f&&(Y(),$(f,1,1,()=>{f=null}),K())},i(x){l||(d(u),d(e.$$.fragment,x),d(m),d(i.$$.fragment,x),d(p),d(f),l=!0)},o(x){$(u),$(e.$$.fragment,x),$(m),$(i.$$.fragment,x),$(p),$(f),l=!1},d(x){x&&y(t),u&&u.d(),v(e),m&&m.d(),v(i),p&&p.d(),f&&f.d()}}}function tM(s){let t,n,e,o;return t=new yt.Trigger({props:{$$slots:{default:[xA]},$$scope:{ctx:s}}}),e=new yt.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[QA]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};134217728&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};134218751&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function eM(s){let t,n,e;function o(i){s[25](i)}let r={nested:!1,$$slots:{default:[tM]},$$scope:{ctx:s}};return s[4]!==void 0&&(r.requestClose=s[4]),t=new yt.Root({props:r}),Gt.push(()=>ke(t,"requestClose",o)),{c(){g(t.$$.fragment)},m(i,c){h(t,i,c),e=!0},p(i,[c]){const a={};134218751&c&&(a.$$scope={dirty:c,ctx:i}),!n&&16&c&&(n=!0,a.requestClose=i[4],De(()=>n=!1)),t.$set(a)},i(i){e||(d(t.$$.fragment,i),e=!0)},o(i){$(t.$$.fragment,i),e=!1},d(i){v(t,i)}}}function nM(s,t,n){let e,o,r,i=Mt("chatModel");const c=Mt(on.key);let a,l,{thread:u}=t,{type:m="chat"}=t,{afterDelete:p}=t,{onTogglePinned:f}=t,{enableShareService:x=!1}=t,{onRename:A}=t,C="";const M=Fe(new Map);async function S(){var X;if(!((X=u.conversation)!=null&&X.id))return;const I=i==null?void 0:i.conversations[u.conversation.id];if(I)try{await U1(I,{includeMetadata:!0,notes:`Exported from thread menu on ${new Date().toISOString()}`,extensionClient:i.extensionClient})}catch(j){console.error("Failed to export conversation:",j)}}async function L(){try{const I=await q1(i,{generateNewId:!0,namePrefix:"[Imported] ",markAsImported:!0});I&&i.setCurrentConversation(I)}catch(I){console.error("Failed to import conversation:",I)}}return kt(s,M,I=>n(9,r=I)),s.$$set=I=>{"thread"in I&&n(0,u=I.thread),"type"in I&&n(1,m=I.type),"afterDelete"in I&&n(19,p=I.afterDelete),"onTogglePinned"in I&&n(20,f=I.onTogglePinned),"enableShareService"in I&&n(2,x=I.enableShareService),"onRename"in I&&n(3,A=I.onRename)},n(8,e=i.flags.enableDebugFeatures),n(7,o=i.flags.enableConversationDebugUtils),[u,m,x,A,a,l,C,o,e,r,c,M,function(){f?f():m==="remoteAgent"?c==null||c.toggleAgentPinned(u.id,u.isPinned||!1):i&&i.toggleConversationPinned(u.id)},async function(){if(m==="remoteAgent"){if(!await(c==null?void 0:c.deleteAgent(u.id)))return}else await i.deleteConversation(u.id);p==null||p()},function(){A==null||A(u.id,u.title),a()},function(){navigator.clipboard.writeText(u.id),M.update(I=>(I.set(u.id,"Copied!"),I)),setTimeout(()=>{M.update(I=>(I.delete(u.id),I))},1e3)},async function(){var X;if(!((X=u.conversation)!=null&&X.id)||l!==void 0)return;const I=i==null?void 0:i.conversations[u.conversation.id];n(5,l=I!=null&&I.lastUrl?"copied":"retrieving");try{if(i){const j=await i.getConversationUrl(u.conversation.id);navigator.clipboard.writeText(j),n(5,l="copied")}}catch(j){console.error("Failed to get conversation URL: ",j),n(6,C=j instanceof Error?j.message:"Unknown error"),n(5,l="failure")}finally{setTimeout(()=>{n(5,l=void 0)},1200)}},S,L,p,f,async()=>{S(),a()},async()=>{L(),a()},()=>c.pauseRemoteAgentWorkspace(u.id),()=>c.resumeRemoteAgentWorkspace(u.id),function(I){a=I,n(4,a)}]}class G1 extends ct{constructor(t){super(),lt(this,t,nM,eM,it,{thread:0,type:1,afterDelete:19,onTogglePinned:20,enableShareService:2,onRename:3})}}function n$(s,{delay:t=0,duration:n=400,easing:e=i0,axis:o="y",scale:r=0}={}){const i=getComputedStyle(s),c=+i.opacity,a=o==="y"?"height":"width",l=parseFloat(i[a]),u=o==="y"?"scaleY":"scaleX",m=o==="y"?["top","bottom"]:["left","right"],p=m.map(L=>`${L[0].toUpperCase()}${L.slice(1)}`),f=parseFloat(i[`padding${p[0]}`]||"0"),x=parseFloat(i[`padding${p[1]}`]||"0"),A=parseFloat(i[`margin${p[0]}`]||"0"),C=parseFloat(i[`margin${p[1]}`]||"0"),M=parseFloat(i[`border${p[0]}Width`]||"0"),S=parseFloat(i[`border${p[1]}Width`]||"0");return{delay:t,duration:n,easing:e,css:L=>{const I=r+(1-r)*L;return`overflow: hidden;opacity: ${L*c};${a}: ${L*l}px;padding-${m[0]}: ${L*f}px;padding-${m[1]}: ${L*x}px;margin-${m[0]}: ${L*A}px;margin-${m[1]}: ${L*C}px;border-${m[0]}-width: ${L*M}px;border-${m[1]}-width: ${L*S}px;transform: ${u}(${I});transform-origin: center;`}}}function o$(s,t,n){const e=s.slice();return e[35]=t[n],e[37]=n,e}function Ii(s){const t=s.slice(),n=t[8]?t[8](t[0].agent):{name:"Unknown",fullPath:"Unknown"};return t[38]=n,t}function oM(s){let t,n,e,o;var r=s[16].icon;return r&&(n=vn(r,{})),{c(){t=D("div"),n&&g(n.$$.fragment),k(t,"class",e="thread-type-icon thread-type-icon--"+s[16].type+" svelte-tvrz8f")},m(i,c){_(i,t,c),n&&h(n,t,null),o=!0},p(i,c){if(65536&c[0]&&r!==(r=i[16].icon)){if(n){Y();const a=n;$(a.$$.fragment,1,0,()=>{v(a,1)}),K()}r?(n=vn(r,{}),g(n.$$.fragment),d(n.$$.fragment,1),h(n,t,null)):n=null}(!o||65536&c[0]&&e!==(e="thread-type-icon thread-type-icon--"+i[16].type+" svelte-tvrz8f"))&&k(t,"class",e)},i(i){o||(n&&d(n.$$.fragment,i),o=!0)},o(i){n&&$(n.$$.fragment,i),o=!1},d(i){i&&y(t),n&&v(n)}}}function rM(s){let t,n;return t=new vA({props:{hasUpdates:s[0].type==="remoteAgent"&&s[0].has_updates}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o[0]&&(r.hasUpdates=e[0].type==="remoteAgent"&&e[0].has_updates),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function r$(s){let t,n,e;return n=new Nt({props:{nested:!1,hasPointerEvents:!1,content:s[0].isPinned?"Unpin thread":"Pin thread",triggerOn:[te.Hover],$$slots:{default:[sM]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","pin-icon svelte-tvrz8f"),xt(t,"is-pinned",s[0].isPinned)},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};1&r[0]&&(i.content=o[0].isPinned?"Unpin thread":"Pin thread"),65&r[0]|256&r[1]&&(i.$$scope={dirty:r,ctx:o}),n.$set(i),(!e||1&r[0])&&xt(t,"is-pinned",o[0].isPinned)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function sM(s){let t,n,e,o,r,i;return n=new w1({}),{c(){t=D("button"),g(n.$$.fragment),k(t,"class","pin-icon__button svelte-tvrz8f"),k(t,"type","button"),k(t,"aria-label",e=s[0].isPinned?"Unpin thread":"Pin thread")},m(c,a){_(c,t,a),h(n,t,null),o=!0,r||(i=[Et(t,"click",s[26]),Et(t,"keydown",s[27])],r=!0)},p(c,a){(!o||1&a[0]&&e!==(e=c[0].isPinned?"Unpin thread":"Pin thread"))&&k(t,"aria-label",e)},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&y(t),v(n),r=!1,Ye(i)}}}function s$(s){let t,n;return t=new Nt({props:{nested:!1,hasPointerEvents:!1,content:`Repository: ${s[38].fullPath}`,triggerOn:[te.Hover],$$slots:{default:[iM]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};257&o[0]&&(r.content=`Repository: ${e[38].fullPath}`),257&o[0]|256&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function iM(s){let t,n,e,o,r,i,c,a=s[38].name+"";return e=new V1({}),{c(){t=D("div"),n=D("div"),g(e.$$.fragment),o=z(),r=D("div"),i=V(a),k(n,"class","repo-pill-icon svelte-tvrz8f"),k(r,"class","repo-pill-text svelte-tvrz8f"),k(t,"class","repo-pill svelte-tvrz8f")},m(l,u){_(l,t,u),P(t,n),h(e,n,null),P(t,o),P(t,r),P(r,i),c=!0},p(l,u){(!c||257&u[0])&&a!==(a=l[38].name+"")&&ht(i,a)},i(l){c||(d(e.$$.fragment,l),c=!0)},o(l){$(e.$$.fragment,l),c=!1},d(l){l&&y(t),v(e)}}}function i$(s){let t,n;return t=new Nt({props:{nested:!1,hasPointerEvents:!1,triggerOn:[te.Hover],content:"Setup Script Agent",$$slots:{default:[aM]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function aM(s){let t,n,e;return n=new Jp({}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","setup-script-badge svelte-tvrz8f")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function a$(s){let t,n;return t=new Nt({props:{nested:!1,hasPointerEvents:!1,triggerOn:[te.Hover],content:_r(s[0],"conversation.hasDraft")?"Draft message":"New thread",$$slots:{default:[lM]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o[0]&&(r.content=_r(e[0],"conversation.hasDraft")?"Draft message":"New thread"),1&o[0]|256&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function cM(s){let t,n=_r(s[0],"conversation.hasDraft")?"Draft":"New";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){1&o[0]&&n!==(n=_r(e[0],"conversation.hasDraft")?"Draft":"New")&&ht(t,n)},d(e){e&&y(t)}}}function lM(s){let t,n,e;return n=new Ot({props:{size:1,$$slots:{default:[cM]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","draft-badge svelte-tvrz8f")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};1&r[0]|256&r[1]&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function uM(s){let t,n;return t=new Ot({props:{size:1,truncate:!0,weight:s[0].type==="remoteAgent"&&s[0].has_updates?"medium":"regular",$$slots:{default:[pM]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o[0]&&(r.weight=e[0].type==="remoteAgent"&&e[0].has_updates?"medium":"regular"),1&o[0]|256&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function dM(s){let t,n,e,o,r;function i(l){s[28](l)}function c(l){s[29](l)}let a={size:1,variant:"surface",class:"edit-title-input"};return s[14]!==void 0&&(a.textInput=s[14]),s[13]!==void 0&&(a.value=s[13]),n=new os({props:a}),Gt.push(()=>ke(n,"textInput",i)),Gt.push(()=>ke(n,"value",c)),n.$on("keydown",s[19]),n.$on("blur",s[30]),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","edit-title-container svelte-tvrz8f")},m(l,u){_(l,t,u),h(n,t,null),r=!0},p(l,u){const m={};!e&&16384&u[0]&&(e=!0,m.textInput=l[14],De(()=>e=!1)),!o&&8192&u[0]&&(o=!0,m.value=l[13],De(()=>o=!1)),n.$set(m)},i(l){r||(d(n.$$.fragment,l),r=!0)},o(l){$(n.$$.fragment,l),r=!1},d(l){l&&y(t),v(n)}}}function $M(s){let t,n;return t=new Ot({props:{size:1,truncate:!0,class:"draft-title",$$slots:{default:[fM]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o[0]|256&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function mM(s){let t,n;return t=new Ot({props:{size:1,truncate:!0,class:"setup-script-title",$$slots:{default:[gM]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};256&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function pM(s){let t,n=(s[0].title||s[22](s[0])||`New ${s[21][s[0].type]}`)+"";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){1&o[0]&&n!==(n=(e[0].title||e[22](e[0])||`New ${e[21][e[0].type]}`)+"")&&ht(t,n)},d(e){e&&y(t)}}}function fM(s){var e,o;let t,n=(s[0].title||((o=(e=s[0].conversation)==null?void 0:e.draftExchange)==null?void 0:o.request_message)||"New Thread")+"";return{c(){t=V(n)},m(r,i){_(r,t,i)},p(r,i){var c,a;1&i[0]&&n!==(n=(r[0].title||((a=(c=r[0].conversation)==null?void 0:c.draftExchange)==null?void 0:a.request_message)||"New Thread")+"")&&ht(t,n)},d(r){r&&y(t)}}}function gM(s){let t;return{c(){t=V("Generate a setup script")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function hM(s){let t,n,e,o,r,i,c=s[0].type==="remoteAgent"&&s[0].is_setup_script_agent&&i$(s),a=s[10]&&a$(s);const l=[mM,$M,dM,uM],u=[];function m(p,f){return p[0].type==="remoteAgent"&&p[0].is_setup_script_agent?0:p[10]?1:p[12]?2:3}return o=m(s),r=u[o]=l[o](s),{c(){t=D("div"),c&&c.c(),n=z(),a&&a.c(),e=z(),r.c(),k(t,"class","agent-title-content svelte-tvrz8f")},m(p,f){_(p,t,f),c&&c.m(t,null),P(t,n),a&&a.m(t,null),P(t,e),u[o].m(t,null),i=!0},p(p,f){p[0].type==="remoteAgent"&&p[0].is_setup_script_agent?c?1&f[0]&&d(c,1):(c=i$(p),c.c(),d(c,1),c.m(t,n)):c&&(Y(),$(c,1,1,()=>{c=null}),K()),p[10]?a?(a.p(p,f),1024&f[0]&&d(a,1)):(a=a$(p),a.c(),d(a,1),a.m(t,e)):a&&(Y(),$(a,1,1,()=>{a=null}),K());let x=o;o=m(p),o===x?u[o].p(p,f):(Y(),$(u[x],1,1,()=>{u[x]=null}),K(),r=u[o],r?r.p(p,f):(r=u[o]=l[o](p),r.c()),d(r,1),r.m(t,null))},i(p){i||(d(c),d(a),d(r),i=!0)},o(p){$(c),$(a),$(r),i=!1},d(p){p&&y(t),c&&c.d(),a&&a.d(),u[o].d()}}}function c$(s){let t,n,e,o,r;return n=new yg({props:{workspaceStatus:s[0].workspace_status,status:s[0].status,isExpanded:s[2]>330,hasUpdates:s[0].has_updates}}),o=new k1({props:{agentId:s[0].agent.remote_agent_id,status:s[0].status,workspaceStatus:s[0].workspace_status}}),{c(){t=D("div"),g(n.$$.fragment),e=z(),g(o.$$.fragment),k(t,"class","agent-status svelte-tvrz8f")},m(i,c){_(i,t,c),h(n,t,null),_(i,e,c),h(o,i,c),r=!0},p(i,c){const a={};1&c[0]&&(a.workspaceStatus=i[0].workspace_status),1&c[0]&&(a.status=i[0].status),4&c[0]&&(a.isExpanded=i[2]>330),1&c[0]&&(a.hasUpdates=i[0].has_updates),n.$set(a);const l={};1&c[0]&&(l.agentId=i[0].agent.remote_agent_id),1&c[0]&&(l.status=i[0].status),1&c[0]&&(l.workspaceStatus=i[0].workspace_status),o.$set(l)},i(i){r||(d(n.$$.fragment,i),d(o.$$.fragment,i),r=!0)},o(i){$(n.$$.fragment,i),$(o.$$.fragment,i),r=!1},d(i){i&&(y(t),y(e)),v(n),v(o,i)}}}function l$(s){let t,n,e=JSON.stringify(s[17].slice(-9)),o=d$(s);return{c(){o.c(),t=gt()},m(r,i){o.m(r,i),_(r,t,i),n=!0},p(r,i){131072&i[0]&&it(e,e=JSON.stringify(r[17].slice(-9)))?(Y(),$(o,1,1,N),K(),o=d$(r),o.c(),d(o,1),o.m(t.parentNode,t)):o.p(r,i)},i(r){n||(d(o),n=!0)},o(r){$(o),n=!1},d(r){r&&y(t),o.d(r)}}}function vM(s){let t,n;return{c(){t=D("div"),t.textContent="|",n=z(),k(t,"class","agent-chat-history__item svelte-tvrz8f")},m(e,o){_(e,t,o),_(e,n,o)},p:N,d(e){e&&(y(t),y(n))}}}function u$(s,t){let n,e,o;return e=new Nt({props:{delayDurationMs:0,content:Js(t[35]||"",170),side:"bottom",nested:!1,hasPointerEvents:!1,triggerOn:[te.Hover],$$slots:{default:[vM]},$$scope:{ctx:t}}}),{key:s,first:null,c(){n=gt(),g(e.$$.fragment),this.first=n},m(r,i){_(r,n,i),h(e,r,i),o=!0},p(r,i){t=r;const c={};131072&i[0]&&(c.content=Js(t[35]||"",170)),256&i[1]&&(c.$$scope={dirty:i,ctx:t}),e.$set(c)},i(r){o||(d(e.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(e,r)}}}function d$(s){let t,n,e=[],o=new Map,r=ee(s[17].slice(-9));const i=c=>c[35]+"-"+c[37];for(let c=0;c<r.length;c+=1){let a=o$(s,r,c),l=i(a);o.set(l,e[c]=u$(l,a))}return{c(){t=D("div");for(let c=0;c<e.length;c+=1)e[c].c();k(t,"class","agent-chat-history svelte-tvrz8f")},m(c,a){_(c,t,a);for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(t,null);n=!0},p(c,a){131072&a[0]&&(r=ee(c[17].slice(-9)),Y(),e=Mr(e,a,i,1,c,r,o,t,ns,u$,null,o$),K())},i(c){if(!n){for(let a=0;a<r.length;a+=1)d(e[a]);n=!0}},o(c){for(let a=0;a<e.length;a+=1)$(e[a]);n=!1},d(c){c&&y(t);for(let a=0;a<e.length;a+=1)e[a].d()}}}function $$(s){let t,n,e;return n=new G1({props:{thread:s[0],type:s[15],afterDelete:s[4],enableShareService:s[9],onTogglePinned:s[6],onRename:s[20]}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","agent-actions svelte-tvrz8f")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};1&r[0]&&(i.thread=o[0]),32768&r[0]&&(i.type=o[15]),16&r[0]&&(i.afterDelete=o[4]),512&r[0]&&(i.enableShareService=o[9]),64&r[0]&&(i.onTogglePinned=o[6]),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function m$(s){let t,n,e,o,r,i,c,a,l,u,m,p,f,x,A,C=s[0].type==="remoteAgent"&&s[0].agent&&s[7]&&s[7](s[0].agent);const M=[rM,oM],S=[];function L(U,O){return U[15]==="remoteAgent"?0:1}r=L(s),i=S[r]=M[r](s);let I=!s[10]&&s[3]&&s[0].isPinned&&r$(s),X=C&&s$(Ii(s));m=new Nt({props:{nested:!1,hasPointerEvents:!1,content:Js(s[0].title,200),triggerOn:[te.Hover],delayDurationMs:1e3,$$slots:{default:[hM]},$$scope:{ctx:s}}});let j=s[0].type==="remoteAgent"&&s[0].status&&c$(s),H=s[17].length>0&&l$(s),J=s[0].id!==or&&$$(s);return{c(){t=D("div"),n=D("div"),e=D("div"),o=D("div"),i.c(),c=z(),I&&I.c(),a=z(),X&&X.c(),l=z(),u=D("div"),g(m.$$.fragment),p=z(),j&&j.c(),f=z(),H&&H.c(),x=z(),J&&J.c(),k(o,"class","agent-icon svelte-tvrz8f"),k(u,"class","agent-title svelte-tvrz8f"),k(e,"class","agent-details--left svelte-tvrz8f"),k(n,"class","agent-details svelte-tvrz8f"),k(t,"class","agent-content svelte-tvrz8f")},m(U,O){_(U,t,O),P(t,n),P(n,e),P(e,o),S[r].m(o,null),P(e,c),I&&I.m(e,null),P(e,a),X&&X.m(e,null),P(e,l),P(e,u),h(m,u,null),P(n,p),j&&j.m(n,null),P(t,f),H&&H.m(t,null),P(t,x),J&&J.m(t,null),A=!0},p(U,O){let Z=r;r=L(U),r===Z?S[r].p(U,O):(Y(),$(S[Z],1,1,()=>{S[Z]=null}),K(),i=S[r],i?i.p(U,O):(i=S[r]=M[r](U),i.c()),d(i,1),i.m(o,null)),!U[10]&&U[3]&&U[0].isPinned?I?(I.p(U,O),1033&O[0]&&d(I,1)):(I=r$(U),I.c(),d(I,1),I.m(e,a)):I&&(Y(),$(I,1,1,()=>{I=null}),K()),129&O[0]&&(C=U[0].type==="remoteAgent"&&U[0].agent&&U[7]&&U[7](U[0].agent)),C?X?(X.p(Ii(U),O),129&O[0]&&d(X,1)):(X=s$(Ii(U)),X.c(),d(X,1),X.m(e,l)):X&&(Y(),$(X,1,1,()=>{X=null}),K());const et={};1&O[0]&&(et.content=Js(U[0].title,200)),29697&O[0]|256&O[1]&&(et.$$scope={dirty:O,ctx:U}),m.$set(et),U[0].type==="remoteAgent"&&U[0].status?j?(j.p(U,O),1&O[0]&&d(j,1)):(j=c$(U),j.c(),d(j,1),j.m(n,null)):j&&(Y(),$(j,1,1,()=>{j=null}),K()),U[17].length>0?H?(H.p(U,O),131072&O[0]&&d(H,1)):(H=l$(U),H.c(),d(H,1),H.m(t,x)):H&&(Y(),$(H,1,1,()=>{H=null}),K()),U[0].id!==or?J?(J.p(U,O),1&O[0]&&d(J,1)):(J=$$(U),J.c(),d(J,1),J.m(t,null)):J&&(Y(),$(J,1,1,()=>{J=null}),K())},i(U){A||(d(i),d(I),d(X),d(m.$$.fragment,U),d(j),d(H),d(J),A=!0)},o(U){$(i),$(I),$(X),$(m.$$.fragment,U),$(j),$(H),$(J),A=!1},d(U){U&&y(t),S[r].d(),I&&I.d(),X&&X.d(),v(m),j&&j.d(),H&&H.d(),J&&J.d()}}}function wM(s){let t,n,e,o,r,i,c=`${s[0].title}--${s[0].isPinned}`,a=m$(s);return{c(){t=D("div"),a.c(),k(t,"class",n="agent-row agent-row--"+s[0].type+" svelte-tvrz8f"),k(t,"role","button"),k(t,"tabindex","0"),k(t,"data-testid",yM),xt(t,"agent-row--active",s[1]),xt(t,"agent-row--new",s[10]),xt(t,"agent-row--setup-script",s[0].type==="remoteAgent"&&s[0].is_setup_script_agent)},m(l,u){_(l,t,u),a.m(t,null),o=!0,r||(i=[Et(t,"click",function(){xe(s[5])&&s[5].apply(this,arguments)}),Et(t,"keydown",s[31])],r=!0)},p(l,u){s=l,1&u[0]&&it(c,c=`${s[0].title}--${s[0].isPinned}`)?(Y(),$(a,1,1,N),K(),a=m$(s),a.c(),d(a,1),a.m(t,null)):a.p(s,u),(!o||1&u[0]&&n!==(n="agent-row agent-row--"+s[0].type+" svelte-tvrz8f"))&&k(t,"class",n),(!o||3&u[0])&&xt(t,"agent-row--active",s[1]),(!o||1025&u[0])&&xt(t,"agent-row--new",s[10]),(!o||1&u[0])&&xt(t,"agent-row--setup-script",s[0].type==="remoteAgent"&&s[0].is_setup_script_agent)},i(l){o||(d(a),_n(()=>{o&&(e||(e=cn(t,n$,{duration:150},!0)),e.run(1))}),o=!0)},o(l){$(a),e||(e=cn(t,n$,{duration:150},!1)),e.run(0),o=!1},d(l){l&&y(t),a.d(l),l&&e&&e.end(),r=!1,Ye(i)}}}const yM="thread-list-item";function _r(s,t){return t.split(".").reduce((n,e)=>n&&n[e]!==void 0?n[e]:void 0,s)}function Js(s="",t){return s.length<=t?s:s.slice(0,t-3)+"..."}function xM(s,t,n){let e,o,r,i,c,a,l,u,m=N;s.$$.on_destroy.push(()=>m());let p,{thread:f}=t,{isSelected:x=!1}=t,{containerWidth:A=0}=t,{isExpanded:C=!1}=t,{afterDelete:M}=t,{onSelect:S}=t,{onTogglePinned:L}=t,{isFromDifferentRepo:I=()=>!1}=t,{getRepoInfo:X=()=>({name:"Unknown",fullPath:"Unknown"})}=t,{enableShareService:j=!1}=t,H=Mt("chatModel"),J=Mt(on.key),U=!1,O=f.title;async function Z(et){if(et.trim()&&et!==f.title)if(f.type==="remoteAgent")try{J&&await J.updateRemoteAgentTitle(f.id,et)}catch(Q){console.error("Failed to update remote agent title:",Q)}else["chat","localAgent"].includes(f.type)&&H&&(H.renameConversation(f.id,et),n(0,f.title=et,f));n(12,U=!1)}return En(()=>{const et=Q=>{U&&p&&!p.contains(Q.target)&&Z(O)};return document.addEventListener("click",et),()=>{document.removeEventListener("click",et)}}),s.$$set=et=>{"thread"in et&&n(0,f=et.thread),"isSelected"in et&&n(1,x=et.isSelected),"containerWidth"in et&&n(2,A=et.containerWidth),"isExpanded"in et&&n(3,C=et.isExpanded),"afterDelete"in et&&n(4,M=et.afterDelete),"onSelect"in et&&n(5,S=et.onSelect),"onTogglePinned"in et&&n(6,L=et.onTogglePinned),"isFromDifferentRepo"in et&&n(7,I=et.isFromDifferentRepo),"getRepoInfo"in et&&n(8,X=et.getRepoInfo),"enableShareService"in et&&n(9,j=et.enableShareService)},s.$$.update=()=>{1&s.$$.dirty[0]&&n(17,e=(_r(f,"conversation.chatHistory")||[]).map(et=>et.request_message).filter(Boolean)),1&s.$$.dirty[0]&&n(10,o=f.isNew),1&s.$$.dirty[0]&&n(24,r=f.type==="localAgent"),1&s.$$.dirty[0]&&n(23,i=f.type==="remoteAgent"),58722304&s.$$.dirty[0]&&n(16,a=ri({isConversationAgentic:r,agentExecutionMode:c?u:void 0,isBackgroundAgent:i})),1025&s.$$.dirty[0]&&n(15,l=f.type||(o&&_r(f,"conversation.extraData.isRemoteAgentConversation")?"remoteAgent":"chat"))},n(11,c=H==null?void 0:H.agentExecutionMode),m(),m=oe(c,et=>n(25,u=et)),[f,x,A,C,M,S,L,I,X,j,o,c,U,O,p,l,a,e,Z,function(et){et.key==="Enter"?(et.preventDefault(),Z(O)):et.key==="Escape"&&(et.preventDefault(),n(13,O=f.title),n(12,U=!1))},function(){n(12,U=!0),n(13,O=f.title),setTimeout(()=>p==null?void 0:p.focus(),0)},{chat:"Chat",localAgent:"Local Agent",remoteAgent:"Remote Agent"},et=>{var ut;const Q=(((ut=et==null?void 0:et.conversation)==null?void 0:ut.chatHistory)||[]).find(rt=>rt.request_message);return Q&&Q.request_message||""},i,r,u,et=>{et.stopPropagation(),L(et)},et=>{et.key!=="Enter"&&et.key!==" "||(et.stopPropagation(),L(et))},function(et){p=et,n(14,p)},function(et){O=et,n(13,O)},()=>Z(O),et=>{et.key==="Enter"&&S()}]}class Y1 extends ct{constructor(t){super(),lt(this,t,xM,wM,it,{thread:0,isSelected:1,containerWidth:2,isExpanded:3,afterDelete:4,onSelect:5,onTogglePinned:6,isFromDifferentRepo:7,getRepoInfo:8,enableShareService:9},null,[-1,-1])}}function p$(s,t,n){const e=s.slice();return e[7]=t[n],e}function bM(s){var e;let t,n=s[3]!=="all"?`${((e=s[0].find(s[4]))==null?void 0:e.label)||""}`:"All";return{c(){t=V(n)},m(o,r){_(o,t,r)},p(o,r){var i;9&r&&n!==(n=o[3]!=="all"?`${((i=o[0].find(o[4]))==null?void 0:i.label)||""}`:"All")&&ht(t,n)},d(o){o&&y(t)}}}function _M(s){let t,n,e,o,r,i;return n=new Ot({props:{size:1,$$slots:{default:[bM]},$$scope:{ctx:s}}}),r=new Po({}),{c(){t=D("div"),g(n.$$.fragment),e=z(),o=D("div"),g(r.$$.fragment),k(o,"class","dropdown-indicator svelte-errogv"),k(t,"class","c-thread-type-filter-dropdown__trigger svelte-errogv")},m(c,a){_(c,t,a),h(n,t,null),P(t,e),P(t,o),h(r,o,null),i=!0},p(c,a){const l={};1033&a&&(l.$$scope={dirty:a,ctx:c}),n.$set(l)},i(c){i||(d(n.$$.fragment,c),d(r.$$.fragment,c),i=!0)},o(c){$(n.$$.fragment,c),$(r.$$.fragment,c),i=!1},d(c){c&&y(t),v(n),v(r)}}}function CM(s){let t,n=s[7].label+"";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){1&o&&n!==(n=e[7].label+"")&&ht(t,n)},d(e){e&&y(t)}}}function AM(s){let t,n,e,o,r,i,c,a,l=s[7].count+"";return e=new Ot({props:{size:2,$$slots:{default:[CM]},$$scope:{ctx:s}}}),{c(){t=D("div"),n=D("span"),g(e.$$.fragment),o=z(),r=D("span"),i=V(l),c=z(),k(n,"class","filter-label svelte-errogv"),k(r,"class","filter-count svelte-errogv"),k(t,"class","filter-item svelte-errogv")},m(u,m){_(u,t,m),P(t,n),h(e,n,null),P(t,o),P(t,r),P(r,i),_(u,c,m),a=!0},p(u,m){const p={};1025&m&&(p.$$scope={dirty:m,ctx:u}),e.$set(p),(!a||1&m)&&l!==(l=u[7].count+"")&&ht(i,l)},i(u){a||(d(e.$$.fragment,u),a=!0)},o(u){$(e.$$.fragment,u),a=!1},d(u){u&&(y(t),y(c)),v(e)}}}function f$(s){let t,n;function e(){return s[5](s[7])}return t=new yt.Item({props:{highlight:s[3]===s[7].value,onSelect:e,$$slots:{default:[AM]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,r){s=o;const i={};9&r&&(i.highlight=s[3]===s[7].value),7&r&&(i.onSelect=e),1025&r&&(i.$$scope={dirty:r,ctx:s}),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){v(t,o)}}}function MM(s){let t,n,e=ee(s[0]),o=[];for(let i=0;i<e.length;i+=1)o[i]=f$(p$(s,e,i));const r=i=>$(o[i],1,1,()=>{o[i]=null});return{c(){t=D("div");for(let i=0;i<o.length;i+=1)o[i].c();k(t,"class","filters-list svelte-errogv")},m(i,c){_(i,t,c);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(t,null);n=!0},p(i,c){if(15&c){let a;for(e=ee(i[0]),a=0;a<e.length;a+=1){const l=p$(i,e,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=f$(l),o[a].c(),d(o[a],1),o[a].m(t,null))}for(Y(),a=e.length;a<o.length;a+=1)r(a);K()}},i(i){if(!n){for(let c=0;c<e.length;c+=1)d(o[c]);n=!0}},o(i){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(i){i&&y(t),rn(o,i)}}}function kM(s){let t,n,e,o;return t=new yt.Trigger({props:{$$slots:{default:[_M]},$$scope:{ctx:s}}}),e=new yt.Content({props:{side:"bottom",align:"start",size:1,$$slots:{default:[MM]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};1033&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};1039&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function SM(s){let t,n,e,o;function r(c){s[6](c)}let i={$$slots:{default:[kM]},$$scope:{ctx:s}};return s[2]!==void 0&&(i.requestClose=s[2]),n=new yt.Root({props:i}),Gt.push(()=>ke(n,"requestClose",r)),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-thread-type-filter-dropdown")},m(c,a){_(c,t,a),h(n,t,null),o=!0},p(c,[a]){const l={};1039&a&&(l.$$scope={dirty:a,ctx:c}),!e&&4&a&&(e=!0,l.requestClose=c[2],De(()=>e=!1)),n.$set(l)},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&y(t),v(n)}}}function TM(s,t,n){let e,o=N,r=()=>(o(),o=oe(a,l=>n(3,e=l)),a);s.$$.on_destroy.push(()=>o());let i,{threadTypeFilters:c=[]}=t,{activeThreadTypeFilter:a=Fe("all")}=t;return r(),s.$$set=l=>{"threadTypeFilters"in l&&n(0,c=l.threadTypeFilters),"activeThreadTypeFilter"in l&&r(n(1,a=l.activeThreadTypeFilter))},[c,a,i,e,l=>l.value===e,l=>{a.set(l.value),i()},function(l){i=l,n(2,i)}]}class EM extends ct{constructor(t){super(),lt(this,t,TM,SM,it,{threadTypeFilters:0,activeThreadTypeFilter:1})}}function g$(s){return{isDragging:!1,startY:0,startHeight:0,currentHeight:s,hasUserResized:!1,hasDraggedThisClick:!1}}function Zs(s,t){const n=Math.floor(s-300);return Math.max(Math.min(t,n),0)}function h$(s,t,n){return n?(s.preventDefault(),{...t,isDragging:!0,hasDraggedThisClick:!1,startY:s.clientY,startHeight:t.currentHeight}):t}function v$(s,t,n,e){if(!e||!t.isDragging)return t;const o=s.clientY-t.startY,r=t.startHeight+o,i=Zs(n.windowHeight,n.maxContentHeight),c=Math.max(n.minHeight,Math.min(i,r));return{...t,hasDraggedThisClick:!0,currentHeight:c}}function w$(s){const t=s.isDragging;return{...s,isDragging:!1,hasUserResized:s.hasUserResized||t}}function y$(s){return{...s,hasDraggedThisClick:!1}}function x$(s,t){const n=Zs(t.windowHeight,t.maxContentHeight);if(s.currentHeight>n){const e=Math.max(t.minHeight,Math.min(n,s.currentHeight));return{...s,currentHeight:e}}return s}function b$(s,t,n){const e=s.slice();return e[122]=t[n],e[124]=n,e}function _$(s,t,n){const e=s.slice();return e[125]=t[n],e[127]=n,e}function C$(s,t,n){const e=s.slice();return e[128]=t[n],e}function A$(s,t,n){const e=s.slice();return e[125]=t[n],e[127]=n,e}function IM(s){let t;return{c(){t=V("Threads")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function M$(s){let t,n,e,o;return n=new EM({props:{threadTypeFilters:s[30],activeThreadTypeFilter:s[44]}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","svelte-1lid8lb")},m(r,i){_(r,t,i),h(n,t,null),o=!0},p(r,i){const c={};1073741824&i[0]&&(c.threadTypeFilters=r[30]),n.$set(c)},i(r){o||(d(n.$$.fragment,r),r&&_n(()=>{o&&(e||(e=cn(t,xo,{axis:"x",duration:150},!0)),e.run(1))}),o=!0)},o(r){$(n.$$.fragment,r),r&&(e||(e=cn(t,xo,{axis:"x",duration:150},!1)),e.run(0)),o=!1},d(r){r&&y(t),v(n),r&&e&&e.end()}}}function k$(s){let t,n,e,o,r,i,c=s[12]&&S$(s);return o=new Nt({props:{content:"Search threads",nested:!1,hasPointerEvents:!1,$$slots:{default:[NM]},$$scope:{ctx:s}}}),{c(){t=D("div"),c&&c.c(),n=z(),e=D("div"),g(o.$$.fragment),k(e,"class","search-icon svelte-1lid8lb"),xt(e,"is-active",s[12]),k(t,"class","search-container action-button svelte-1lid8lb"),xt(t,"is-active",s[12])},m(a,l){_(a,t,l),c&&c.m(t,null),P(t,n),P(t,e),h(o,e,null),i=!0},p(a,l){a[12]?c?(c.p(a,l),4096&l[0]&&d(c,1)):(c=S$(a),c.c(),d(c,1),c.m(t,n)):c&&(Y(),$(c,1,1,()=>{c=null}),K());const u={};1&l[0]|256&l[4]&&(u.$$scope={dirty:l,ctx:a}),o.$set(u),(!i||4096&l[0])&&xt(e,"is-active",a[12]),(!i||4096&l[0])&&xt(t,"is-active",a[12])},i(a){i||(d(c),d(o.$$.fragment,a),a&&_n(()=>{i&&(r||(r=cn(t,gr,{y:-2,duration:150},!0)),r.run(1))}),i=!0)},o(a){$(c),$(o.$$.fragment,a),a&&(r||(r=cn(t,gr,{y:-2,duration:150},!1)),r.run(0)),i=!1},d(a){a&&y(t),c&&c.d(),v(o),a&&r&&r.end()}}}function S$(s){var p,f;let t,n,e,o,r,i,c;function a(x){s[92](x)}function l(x){s[93](x)}let u={placeholder:`Search ${s[10]==="all"?"threads":(f=(p=s[30].find(s[91]))==null?void 0:p.label)==null?void 0:f.toLowerCase()}`,size:1,variant:"surface",class:"search-input",$$slots:{iconLeft:[LM]},$$scope:{ctx:s}};s[0]!==void 0&&(u.value=s[0]),s[11]!==void 0&&(u.textInput=s[11]),n=new os({props:u}),Gt.push(()=>ke(n,"value",a)),Gt.push(()=>ke(n,"textInput",l)),n.$on("keydown",s[94]),n.$on("focus",s[95]),n.$on("blur",s[96]);let m=s[0]&&T$(s);return{c(){t=D("div"),g(n.$$.fragment),r=z(),m&&m.c(),k(t,"class","search-field-container svelte-1lid8lb")},m(x,A){_(x,t,A),h(n,t,null),P(t,r),m&&m.m(t,null),c=!0},p(x,A){var M,S;const C={};1073742848&A[0]&&(C.placeholder=`Search ${x[10]==="all"?"threads":(S=(M=x[30].find(x[91]))==null?void 0:M.label)==null?void 0:S.toLowerCase()}`),256&A[4]&&(C.$$scope={dirty:A,ctx:x}),!e&&1&A[0]&&(e=!0,C.value=x[0],De(()=>e=!1)),!o&&2048&A[0]&&(o=!0,C.textInput=x[11],De(()=>o=!1)),n.$set(C),x[0]?m?(m.p(x,A),1&A[0]&&d(m,1)):(m=T$(x),m.c(),d(m,1),m.m(t,null)):m&&(Y(),$(m,1,1,()=>{m=null}),K())},i(x){c||(d(n.$$.fragment,x),d(m),x&&_n(()=>{c&&(i||(i=cn(t,xo,{axis:"x",duration:150},!0)),i.run(1))}),c=!0)},o(x){$(n.$$.fragment,x),$(m),x&&(i||(i=cn(t,xo,{axis:"x",duration:150},!1)),i.run(0)),c=!1},d(x){x&&y(t),v(n),m&&m.d(),x&&i&&i.end()}}}function LM(s){let t,n,e;return n=new Wp({}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","search-field-container__icon svelte-1lid8lb"),k(t,"slot","iconLeft")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function T$(s){let t,n,e;return n=new Nt({props:{content:"Clear search",nested:!1,$$slots:{default:[DM]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","clear-search-button svelte-1lid8lb")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};256&r[4]&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function RM(s){let t,n;return t=new ir({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function DM(s){let t,n;return t=new se({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[RM]},$$scope:{ctx:s}}}),t.$on("click",s[40]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};256&o[4]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function PM(s){let t,n;return t=new Wp({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function NM(s){let t,n;return t=new se({props:{variant:"ghost",color:s[0].trim()!==""?"accent":"neutral",size:1,$$slots:{default:[PM]},$$scope:{ctx:s}}}),t.$on("click",s[39]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o[0]&&(r.color=e[0].trim()!==""?"accent":"neutral"),256&o[4]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function E$(s){let t,n,e;return n=new Nt({props:{content:"Failed to reload remote agents. Click to retry. "+s[7],nested:!1,triggerOn:[te.Hover],hasPointerEvents:!1,$$slots:{default:[zM]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","reload-button svelte-1lid8lb")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};128&r[0]&&(i.content="Failed to reload remote agents. Click to retry. "+o[7]),256&r[4]&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function FM(s){let t,n;return t=new Yg({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function zM(s){let t,n;return t=new se({props:{variant:"ghost-block",color:"neutral",size:1,$$slots:{default:[FM]},$$scope:{ctx:s}}}),t.$on("click",s[98]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};256&o[4]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function I$(s){let t,n,e,o,r,i,c,a=[],l=new Map,u=ee(s[25]);const m=p=>`${p[128].groupTitle}`;for(let p=0;p<u.length;p+=1){let f=C$(s,u,p),x=m(f);l.set(x,a[p]=D$(x,f))}return{c(){t=D("div"),n=D("div");for(let p=0;p<a.length;p+=1)a[p].c();k(n,"class","agents-list-container__inner svelte-1lid8lb"),_n(()=>s[103].call(n)),k(t,"class","agents-list svelte-1lid8lb"),qn(t,"height",s[24]),qn(t,"max-height",s[23]),_n(()=>s[105].call(t))},m(p,f){_(p,t,f),P(t,n);for(let x=0;x<a.length;x+=1)a[x]&&a[x].m(n,null);e=Ri(n,s[103].bind(n)),s[104](t),o=Ri(t,s[105].bind(t)),r=!0,i||(c=Lo(s[41].call(null,t)),i=!0)},p(p,f){33587554&f[0]|805441560&f[1]|1&f[2]&&(u=ee(p[25]),Y(),a=Mr(a,f,m,1,p,u,l,n,ns,D$,null,C$),K()),(!r||16777216&f[0])&&qn(t,"height",p[24]),(!r||8388608&f[0])&&qn(t,"max-height",p[23])},i(p){if(!r){for(let f=0;f<u.length;f+=1)d(a[f]);r=!0}},o(p){for(let f=0;f<a.length;f+=1)$(a[f]);r=!1},d(p){p&&y(t);for(let f=0;f<a.length;f+=1)a[f].d();e(),s[104](null),o(),i=!1,c()}}}function L$(s){let t,n,e,o,r,i,c,a;return e=new Ot({props:{size:1,weight:"medium",color:"secondary",$$slots:{default:[OM]},$$scope:{ctx:s}}}),i=new yt.Root({props:{$$slots:{default:[WM]},$$scope:{ctx:s}}}),{c(){t=D("div"),n=D("div"),g(e.$$.fragment),o=z(),r=D("div"),g(i.$$.fragment),k(r,"class","thread-group-options svelte-1lid8lb"),k(n,"class","thread-group-header-content svelte-1lid8lb"),k(t,"class","thread-group-header svelte-1lid8lb")},m(l,u){_(l,t,u),P(t,n),h(e,n,null),P(n,o),P(n,r),h(i,r,null),a=!0},p(l,u){const m={};33554432&u[0]|256&u[4]&&(m.$$scope={dirty:u,ctx:l}),e.$set(m);const p={};33554432&u[0]|256&u[4]&&(p.$$scope={dirty:u,ctx:l}),i.$set(p)},i(l){a||(d(e.$$.fragment,l),d(i.$$.fragment,l),_n(()=>{a&&(c||(c=cn(t,xo,{duration:150},!0)),c.run(1))}),a=!0)},o(l){$(e.$$.fragment,l),$(i.$$.fragment,l),c||(c=cn(t,xo,{duration:150},!1)),c.run(0),a=!1},d(l){l&&y(t),v(e),v(i),l&&c&&c.end()}}}function OM(s){let t,n=s[128].groupTitle+"";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){33554432&o[0]&&n!==(n=e[128].groupTitle+"")&&ht(t,n)},d(e){e&&y(t)}}}function BM(s){let t,n;return t=new cr({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function HM(s){let t,n;return t=new se({props:{variant:"ghost-block",color:"neutral",size:1,title:"Group options",$$slots:{default:[BM]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};256&o[4]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function UM(s){let t,n,e,o,r=s[128].threads.length+"",i=s[128].threads.length>1?"s":"";return{c(){t=V("Delete "),n=V(r),e=V(" thread"),o=V(i)},m(c,a){_(c,t,a),_(c,n,a),_(c,e,a),_(c,o,a)},p(c,a){33554432&a[0]&&r!==(r=c[128].threads.length+"")&&ht(n,r),33554432&a[0]&&i!==(i=c[128].threads.length>1?"s":"")&&ht(o,i)},d(c){c&&(y(t),y(n),y(e),y(o))}}}function qM(s){let t,n;return t=new rs({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function jM(s){let t,n;function e(){return s[99](s[128])}return t=new yt.Item({props:{color:"error",onSelect:e,$$slots:{iconLeft:[qM],default:[UM]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,r){s=o;const i={};33554432&r[0]&&(i.onSelect=e),33554432&r[0]|256&r[4]&&(i.$$scope={dirty:r,ctx:s}),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){v(t,o)}}}function WM(s){let t,n,e,o;return t=new yt.Trigger({props:{$$slots:{default:[HM]},$$scope:{ctx:s}}}),e=new yt.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[jM]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};256&i[4]&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};33554432&i[0]|256&i[4]&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function R$(s,t){let n,e,o;function r(){return t[100](t[125],t[128],t[127])}function i(){return t[101](t[125])}function c(...a){return t[102](t[125],...a)}return e=new Y1({props:{thread:t[125],containerWidth:t[15],isSelected:t[8]===t[125].id,afterDelete:r,onSelect:i,onTogglePinned:c,isFromDifferentRepo:t[59],getRepoInfo:t[60],enableShareService:t[34],isExpanded:t[1]}}),{key:s,first:null,c(){n=gt(),g(e.$$.fragment),this.first=n},m(a,l){_(a,n,l),h(e,a,l),o=!0},p(a,l){t=a;const u={};33554432&l[0]&&(u.thread=t[125]),32768&l[0]&&(u.containerWidth=t[15]),33554688&l[0]&&(u.isSelected=t[8]===t[125].id),33554752&l[0]&&(u.afterDelete=r),33554464&l[0]&&(u.onSelect=i),33554432&l[0]&&(u.onTogglePinned=c),8&l[1]&&(u.enableShareService=t[34]),2&l[0]&&(u.isExpanded=t[1]),e.$set(u)},i(a){o||(d(e.$$.fragment,a),o=!0)},o(a){$(e.$$.fragment,a),o=!1},d(a){a&&y(n),v(e,a)}}}function D$(s,t){let n,e,o,r,i=[],c=new Map,a=t[128].groupTitle!==We.New&&L$(t),l=ee(t[128].threads);const u=m=>`${m[125].id}-${m[125].isPinned}-${m[127]}`;for(let m=0;m<l.length;m+=1){let p=A$(t,l,m),f=u(p);c.set(f,i[m]=R$(f,p))}return{key:s,first:null,c(){n=gt(),a&&a.c(),e=z();for(let m=0;m<i.length;m+=1)i[m].c();o=gt(),this.first=n},m(m,p){_(m,n,p),a&&a.m(m,p),_(m,e,p);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(m,p);_(m,o,p),r=!0},p(m,p){(t=m)[128].groupTitle!==We.New?a?(a.p(t,p),33554432&p[0]&&d(a,1)):(a=L$(t),a.c(),d(a,1),a.m(e.parentNode,e)):a&&(Y(),$(a,1,1,()=>{a=null}),K()),33587554&p[0]|805441560&p[1]&&(l=ee(t[128].threads),Y(),i=Mr(i,p,u,1,t,l,c,o.parentNode,ns,R$,o,A$),K())},i(m){if(!r){d(a);for(let p=0;p<l.length;p+=1)d(i[p]);r=!0}},o(m){$(a);for(let p=0;p<i.length;p+=1)$(i[p]);r=!1},d(m){m&&(y(n),y(e),y(o)),a&&a.d(m);for(let p=0;p<i.length;p+=1)i[p].d(m)}}}function P$(s){let t,n,e,o,r,i,c,a,l,u,m,p,f,x,A,C,M,S,L,I,X,j,H,J,U,O=[],Z=new Map;r=new Po({}),a=new ii({props:{class:"remote-agent-icon"}}),u=new Ot({props:{size:1,$$slots:{default:[VM]},$$scope:{ctx:s}}});let et=(s[19]>0||s[18]>0)&&N$(s);A=new Nt({props:{content:"Expand remote agents dashboard",nested:!1,triggerOn:[te.Hover],hasPointerEvents:!1,$$slots:{default:[YM]},$$scope:{ctx:s}}});let Q=ee(s[6]);const ut=rt=>rt[125].id;for(let rt=0;rt<Q.length;rt+=1){let mt=_$(s,Q,rt),G=ut(mt);Z.set(G,O[rt]=B$(G,mt))}return{c(){t=D("div"),n=D("div"),e=D("button"),o=D("div"),g(r.$$.fragment),c=z(),g(a.$$.fragment),l=z(),g(u.$$.fragment),m=z(),et&&et.c(),p=z(),f=D("div"),x=D("div"),g(A.$$.fragment),L=z(),I=D("div");for(let rt=0;rt<O.length;rt+=1)O[rt].c();k(o,"class",i="expand-toggle-button "+(s[9]?"expand-toggle-button--active":"")+" svelte-1lid8lb"),k(x,"class","home-panel-button svelte-1lid8lb"),k(f,"class","right-buttons svelte-1lid8lb"),k(e,"class",M="expand-toggle-button-container "+(s[9]?"expand-toggle-button-container--active":"")+" svelte-1lid8lb"),k(e,"aria-label",S=s[9]?"Hide recent remote agents":"Show recent remote agents"),k(e,"aria-expanded",s[9]),k(e,"type","button"),k(n,"class","active-remote-agents-header svelte-1lid8lb"),k(I,"class","active-remote-agents-list svelte-1lid8lb"),qn(I,"height",s[22]),qn(I,"max-height",s[21]),k(t,"class","active-remote-agents-section svelte-1lid8lb")},m(rt,mt){_(rt,t,mt),P(t,n),P(n,e),P(e,o),h(r,o,null),P(e,c),h(a,e,null),P(e,l),h(u,e,null),P(e,m),et&&et.m(e,null),P(e,p),P(e,f),P(f,x),h(A,x,null),P(t,L),P(t,I);for(let G=0;G<O.length;G+=1)O[G]&&O[G].m(I,null);s[110](I),H=!0,J||(U=[Et(e,"click",s[47]),Lo(s[42].call(null,I))],J=!0)},p(rt,mt){(!H||512&mt[0]&&i!==(i="expand-toggle-button "+(rt[9]?"expand-toggle-button--active":"")+" svelte-1lid8lb"))&&k(o,"class",i);const G={};1048576&mt[0]|256&mt[4]&&(G.$$scope={dirty:mt,ctx:rt}),u.$set(G),rt[19]>0||rt[18]>0?et?et.p(rt,mt):(et=N$(rt),et.c(),et.m(e,p)):et&&(et.d(1),et=null);const Tt={};4&mt[1]|256&mt[4]&&(Tt.$$scope={dirty:mt,ctx:rt}),A.$set(Tt),(!H||512&mt[0]&&M!==(M="expand-toggle-button-container "+(rt[9]?"expand-toggle-button-container--active":"")+" svelte-1lid8lb"))&&k(e,"class",M),(!H||512&mt[0]&&S!==(S=rt[9]?"Hide recent remote agents":"Show recent remote agents"))&&k(e,"aria-label",S),(!H||512&mt[0])&&k(e,"aria-expanded",rt[9]),33632&mt[0]|805441560&mt[1]&&(Q=ee(rt[6]),Y(),O=Mr(O,mt,ut,1,rt,Q,Z,I,ns,B$,null,_$),K()),(!H||4194304&mt[0])&&qn(I,"height",rt[22]),(!H||2097152&mt[0])&&qn(I,"max-height",rt[21])},i(rt){if(!H){d(r.$$.fragment,rt),d(a.$$.fragment,rt),d(u.$$.fragment,rt),d(A.$$.fragment,rt),rt&&_n(()=>{H&&(C||(C=cn(x,gr,{y:-2,duration:150},!0)),C.run(1))});for(let mt=0;mt<Q.length;mt+=1)d(O[mt]);rt&&_n(()=>{H&&(X||(X=cn(I,xo,{duration:150},!0)),X.run(1))}),rt&&_n(()=>{H&&(j||(j=cn(t,gr,{y:5,duration:150},!0)),j.run(1))}),H=!0}},o(rt){$(r.$$.fragment,rt),$(a.$$.fragment,rt),$(u.$$.fragment,rt),$(A.$$.fragment,rt),rt&&(C||(C=cn(x,gr,{y:-2,duration:150},!1)),C.run(0));for(let mt=0;mt<O.length;mt+=1)$(O[mt]);rt&&(X||(X=cn(I,xo,{duration:150},!1)),X.run(0)),rt&&(j||(j=cn(t,gr,{y:5,duration:150},!1)),j.run(0)),H=!1},d(rt){rt&&y(t),v(r),v(a),v(u),et&&et.d(),v(A),rt&&C&&C.end();for(let mt=0;mt<O.length;mt+=1)O[mt].d();s[110](null),rt&&X&&X.end(),rt&&j&&j.end(),J=!1,Ye(U)}}}function VM(s){let t,n,e,o=s[20]===1?"":"s";return{c(){t=V(s[20]),n=V(" recent remote agent"),e=V(o)},m(r,i){_(r,t,i),_(r,n,i),_(r,e,i)},p(r,i){1048576&i[0]&&ht(t,r[20]),1048576&i[0]&&o!==(o=r[20]===1?"":"s")&&ht(e,o)},d(r){r&&(y(t),y(n),y(e))}}}function N$(s){let t,n,e=s[19]>0&&F$(s),o=s[18]>0&&z$(s);return{c(){t=D("div"),e&&e.c(),n=z(),o&&o.c(),k(t,"class","remote-agent-indicators svelte-1lid8lb")},m(r,i){_(r,t,i),e&&e.m(t,null),P(t,n),o&&o.m(t,null)},p(r,i){r[19]>0?e?e.p(r,i):(e=F$(r),e.c(),e.m(t,n)):e&&(e.d(1),e=null),r[18]>0?o?o.p(r,i):(o=z$(r),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},d(r){r&&y(t),e&&e.d(),o&&o.d()}}}function F$(s){let t,n,e,o,r,i;return{c(){t=D("div"),n=D("div"),e=z(),o=D("span"),r=V(s[19]),k(n,"class","indicator-dot running-dot svelte-1lid8lb"),k(o,"class","indicator-count svelte-1lid8lb"),k(t,"class","indicator running-indicator svelte-1lid8lb"),k(t,"title",i=s[19]+" running agent"+(s[19]===1?"":"s"))},m(c,a){_(c,t,a),P(t,n),P(t,e),P(t,o),P(o,r)},p(c,a){524288&a[0]&&ht(r,c[19]),524288&a[0]&&i!==(i=c[19]+" running agent"+(c[19]===1?"":"s"))&&k(t,"title",i)},d(c){c&&y(t)}}}function z$(s){let t,n,e,o,r,i;return{c(){t=D("div"),n=D("div"),e=z(),o=D("span"),r=V(s[18]),k(n,"class","indicator-dot changes-dot svelte-1lid8lb"),k(o,"class","indicator-count svelte-1lid8lb"),k(t,"class","indicator changes-indicator svelte-1lid8lb"),k(t,"title",i=s[18]+" agent"+(s[18]===1?"":"s")+" with changes")},m(c,a){_(c,t,a),P(t,n),P(t,e),P(t,o),P(o,r)},p(c,a){262144&a[0]&&ht(r,c[18]),262144&a[0]&&i!==(i=c[18]+" agent"+(c[18]===1?"":"s")+" with changes")&&k(t,"title",i)},d(c){c&&y(t)}}}function GM(s){let t,n;return t=new KC({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function YM(s){let t,n;return t=new se({props:{variant:"ghost",color:s[33]?"accent":"neutral",size:1,$$slots:{default:[GM]},$$scope:{ctx:s}}}),t.$on("click",s[106]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4&o[1]&&(r.color=e[33]?"accent":"neutral"),256&o[4]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function O$(s){let t,n;function e(){return s[107](s[125],s[127])}function o(){return s[108](s[125])}function r(...i){return s[109](s[125],...i)}return t=new Y1({props:{thread:s[125],containerWidth:s[15],isSelected:s[8]===s[125].id,afterDelete:e,onSelect:o,onTogglePinned:r,isFromDifferentRepo:s[59],getRepoInfo:s[60],enableShareService:s[34],isExpanded:!1}}),{c(){g(t.$$.fragment)},m(i,c){h(t,i,c),n=!0},p(i,c){s=i;const a={};64&c[0]&&(a.thread=s[125]),32768&c[0]&&(a.containerWidth=s[15]),320&c[0]&&(a.isSelected=s[8]===s[125].id),320&c[0]&&(a.afterDelete=e),96&c[0]&&(a.onSelect=o),64&c[0]&&(a.onTogglePinned=r),8&c[1]&&(a.enableShareService=s[34]),t.$set(a)},i(i){n||(d(t.$$.fragment,i),n=!0)},o(i){$(t.$$.fragment,i),n=!1},d(i){v(t,i)}}}function B$(s,t){let n,e,o,r=t[9]&&O$(t);return{key:s,first:null,c(){n=gt(),r&&r.c(),e=gt(),this.first=n},m(i,c){_(i,n,c),r&&r.m(i,c),_(i,e,c),o=!0},p(i,c){(t=i)[9]?r?(r.p(t,c),512&c[0]&&d(r,1)):(r=O$(t),r.c(),d(r,1),r.m(e.parentNode,e)):r&&(Y(),$(r,1,1,()=>{r=null}),K())},i(i){o||(d(r),o=!0)},o(i){$(r),o=!1},d(i){i&&(y(n),y(e)),r&&r.d(i)}}}function KM(s){let t,n,e,o,r;const i=[ZM,JM],c=[];function a(l,u){return 1&u[0]&&(n=null),n==null&&(n=l[0].trim()!==""),n?0:1}return e=a(s,[-1,-1,-1,-1,-1]),o=c[e]=i[e](s),{c(){t=D("div"),o.c(),k(t,"class","empty-message svelte-1lid8lb")},m(l,u){_(l,t,u),c[e].m(t,null),r=!0},p(l,u){let m=e;e=a(l,u),e===m?c[e].p(l,u):(Y(),$(c[m],1,1,()=>{c[m]=null}),K(),o=c[e],o?o.p(l,u):(o=c[e]=i[e](l),o.c()),d(o,1),o.m(t,null))},i(l){r||(d(o),r=!0)},o(l){$(o),r=!1},d(l){l&&y(t),c[e].d()}}}function XM(s){let t,n=[],e=new Map,o=ee(s[29]);const r=i=>i[124];for(let i=0;i<o.length;i+=1){let c=b$(s,o,i),a=r(c);e.set(a,n[i]=H$(a))}return{c(){t=D("div");for(let i=0;i<n.length;i+=1)n[i].c();k(t,"class","loading-state svelte-1lid8lb")},m(i,c){_(i,t,c);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(t,null)},p(i,c){536870912&c[0]&&(o=ee(i[29]),n=Mr(n,c,r,1,i,o,e,t,Sf,H$,null,b$))},i:N,o:N,d(i){i&&y(t);for(let c=0;c<n.length;c+=1)n[c].d()}}}function JM(s){let t,n;return t=new Ot({props:{size:1,color:"secondary",$$slots:{default:[QM]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};256&o[4]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function ZM(s){let t,n;return t=new Ot({props:{size:1,color:"secondary",$$slots:{default:[tk]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o[0]|256&o[4]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function QM(s){let t;return{c(){t=V("Create a new thread to get started.")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function tk(s){let t,n,e;return{c(){t=V('No threads with "'),n=V(s[0]),e=V('" in the title.')},m(o,r){_(o,t,r),_(o,n,r),_(o,e,r)},p(o,r){1&r[0]&&ht(n,o[0])},d(o){o&&(y(t),y(n),y(e))}}}function H$(s,t){let n;return{key:s,first:null,c(){n=D("div"),n.innerHTML='<div class="agent-content svelte-1lid8lb"><div class="agent-details svelte-1lid8lb"><div class="agent-details--left svelte-1lid8lb"><div class="agent-icon"><div class="skeleton-dot svelte-1lid8lb"></div></div> <div class="skeleton-text svelte-1lid8lb"></div></div></div></div> ',k(n,"class","agent-row skeleton-row svelte-1lid8lb"),this.first=n},m(e,o){_(e,n,o)},p(e,o){},d(e){e&&y(n)}}}function U$(s){let t,n,e;return n=new Nt({props:{content:(s[1]?s[3].isDragging:s[4].isDragging)?void 0:"Drag to resize. Click or Esc to collapse",side:"bottom",hasPointerEvents:!1,offset:[0,8],$$slots:{default:[ek]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","resize-handle-container svelte-1lid8lb")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};26&r[0]&&(i.content=(o[1]?o[3].isDragging:o[4].isDragging)?void 0:"Drag to resize. Click or Esc to collapse"),26&r[0]|256&r[4]&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function ek(s){let t,n,e;return{c(){t=D("button"),t.innerHTML='<div class="resize-handle-line svelte-1lid8lb"><div class="resize-handle-dash svelte-1lid8lb"></div></div>',k(t,"class","resize-handle svelte-1lid8lb"),xt(t,"resize-handle--dragging",s[1]?s[3].isDragging:s[4].isDragging),xt(t,"resize-handle--expanded",s[1])},m(o,r){_(o,t,r),n||(e=[Et(t,"mousedown",function(){xe(s[1]?s[52]:s[55])&&(s[1]?s[52]:s[55]).apply(this,arguments)}),Et(t,"click",s[111])],n=!0)},p(o,r){s=o,26&r[0]&&xt(t,"resize-handle--dragging",s[1]?s[3].isDragging:s[4].isDragging),2&r[0]&&xt(t,"resize-handle--expanded",s[1])},d(o){o&&y(t),n=!1,Ye(e)}}}function nk(s){let t,n,e,o,r,i,c,a,l,u,m,p,f,x,A,C,M,S,L,I,X,j,H,J,U,O,Z,et,Q,ut,rt,mt;_n(s[90]),a=new Po({}),p=new Ot({props:{size:1,class:"header-text-main",$$slots:{default:[IM]},$$scope:{ctx:s}}});let G=!s[12]&&s[1]&&M$(s),Tt=s[1]&&k$(s),Bt=s[27]&&E$(s);j=new fA({});let _t=s[1]&&!s[28]&&!s[26]&&I$(s),Ct=s[20]>0&&P$(s);const Se=[XM,KM],Te=[];function sn(E,B){return E[28]?0:E[26]?1:-1}~(O=sn(s))&&(Z=Te[O]=Se[O](s));let q=(!s[0]&&s[1]||!s[1]&&s[9])&&U$(s);return{c(){t=D("div"),n=D("div"),e=D("div"),o=D("div"),r=D("div"),i=D("button"),c=D("div"),g(a.$$.fragment),u=z(),m=D("div"),g(p.$$.fragment),f=z(),x=D("div"),G&&G.c(),A=z(),Tt&&Tt.c(),S=z(),L=D("div"),Bt&&Bt.c(),I=z(),X=D("div"),g(j.$$.fragment),H=z(),_t&&_t.c(),J=z(),Ct&&Ct.c(),U=z(),Z&&Z.c(),et=z(),q&&q.c(),k(c,"class",l="expand-toggle-button "+(s[1]?"expand-toggle-button--active":"")+" svelte-1lid8lb"),k(m,"class","header-text svelte-1lid8lb"),k(x,"class","thread-type-filter svelte-1lid8lb"),k(i,"class",C="expand-toggle-button-container "+(s[1]?"expand-toggle-button-container--active":"")+" svelte-1lid8lb"),k(i,"aria-label",M=s[1]?"Collapse threads":"Expand threads"),k(i,"aria-expanded",s[1]),k(i,"type","button"),k(i,"data-testid",ok),k(r,"class","header-left svelte-1lid8lb"),k(X,"class","new-thread-dropdown svelte-1lid8lb"),k(L,"class","header-right svelte-1lid8lb"),k(o,"class","header svelte-1lid8lb"),k(e,"class","agents-list-container svelte-1lid8lb"),k(e,"role","region"),k(e,"aria-label","Remote agents list"),xt(e,"is-dragging",s[3].isDragging||s[4].isDragging),xt(e,"is-expanded",s[1]),k(n,"class","remote-agent-threads svelte-1lid8lb"),_n(()=>s[112].call(n)),k(t,"class","remote-agent-threads-container svelte-1lid8lb")},m(E,B){_(E,t,B),P(t,n),P(n,e),P(e,o),P(o,r),P(r,i),P(i,c),h(a,c,null),P(i,u),P(i,m),h(p,m,null),P(i,f),P(i,x),G&&G.m(x,null),P(i,A),Tt&&Tt.m(i,null),P(o,S),P(o,L),Bt&&Bt.m(L,null),P(L,I),P(L,X),h(j,X,null),P(e,H),_t&&_t.m(e,null),P(e,J),Ct&&Ct.m(e,null),P(n,U),~O&&Te[O].m(n,null),P(n,et),q&&q.m(n,null),Q=Ri(n,s[112].bind(n)),ut=!0,rt||(mt=[Et(window,"mousemove",s[88]),Et(window,"mouseup",s[89]),Et(window,"focus",s[49]),Et(window,"blur",s[50]),Et(window,"keydown",s[51]),Et(window,"resize",s[90]),Et(i,"click",s[46]),Et(i,"keydown",s[97])],rt=!0)},p(E,B){(!ut||2&B[0]&&l!==(l="expand-toggle-button "+(E[1]?"expand-toggle-button--active":"")+" svelte-1lid8lb"))&&k(c,"class",l);const nt={};256&B[4]&&(nt.$$scope={dirty:B,ctx:E}),p.$set(nt),!E[12]&&E[1]?G?(G.p(E,B),4098&B[0]&&d(G,1)):(G=M$(E),G.c(),d(G,1),G.m(x,null)):G&&(Y(),$(G,1,1,()=>{G=null}),K()),E[1]?Tt?(Tt.p(E,B),2&B[0]&&d(Tt,1)):(Tt=k$(E),Tt.c(),d(Tt,1),Tt.m(i,null)):Tt&&(Y(),$(Tt,1,1,()=>{Tt=null}),K()),(!ut||2&B[0]&&C!==(C="expand-toggle-button-container "+(E[1]?"expand-toggle-button-container--active":"")+" svelte-1lid8lb"))&&k(i,"class",C),(!ut||2&B[0]&&M!==(M=E[1]?"Collapse threads":"Expand threads"))&&k(i,"aria-label",M),(!ut||2&B[0])&&k(i,"aria-expanded",E[1]),E[27]?Bt?(Bt.p(E,B),134217728&B[0]&&d(Bt,1)):(Bt=E$(E),Bt.c(),d(Bt,1),Bt.m(L,I)):Bt&&(Y(),$(Bt,1,1,()=>{Bt=null}),K()),!E[1]||E[28]||E[26]?_t&&(Y(),$(_t,1,1,()=>{_t=null}),K()):_t?(_t.p(E,B),335544322&B[0]&&d(_t,1)):(_t=I$(E),_t.c(),d(_t,1),_t.m(e,J)),E[20]>0?Ct?(Ct.p(E,B),1048576&B[0]&&d(Ct,1)):(Ct=P$(E),Ct.c(),d(Ct,1),Ct.m(e,null)):Ct&&(Y(),$(Ct,1,1,()=>{Ct=null}),K()),(!ut||24&B[0])&&xt(e,"is-dragging",E[3].isDragging||E[4].isDragging),(!ut||2&B[0])&&xt(e,"is-expanded",E[1]);let at=O;O=sn(E),O===at?~O&&Te[O].p(E,B):(Z&&(Y(),$(Te[at],1,1,()=>{Te[at]=null}),K()),~O?(Z=Te[O],Z?Z.p(E,B):(Z=Te[O]=Se[O](E),Z.c()),d(Z,1),Z.m(n,et)):Z=null),!E[0]&&E[1]||!E[1]&&E[9]?q?(q.p(E,B),515&B[0]&&d(q,1)):(q=U$(E),q.c(),d(q,1),q.m(n,null)):q&&(Y(),$(q,1,1,()=>{q=null}),K())},i(E){ut||(d(a.$$.fragment,E),d(p.$$.fragment,E),d(G),d(Tt),d(Bt),d(j.$$.fragment,E),d(_t),d(Ct),d(Z),d(q),ut=!0)},o(E){$(a.$$.fragment,E),$(p.$$.fragment,E),$(G),$(Tt),$(Bt),$(j.$$.fragment,E),$(_t),$(Ct),$(Z),$(q),ut=!1},d(E){E&&y(t),v(a),v(p),G&&G.d(),Tt&&Tt.d(),Bt&&Bt.d(),v(j),_t&&_t.d(),Ct&&Ct.d(),~O&&Te[O].d(),q&&q.d(),Q(),rt=!1,Ye(mt)}}}const ok="threads-expand-button";function rk(s){if(s.id===or||s.type!=="remoteAgent")return!1;const t=new Date(s.updated_at),n=new Date().getTime()-t.getTime();return Math.floor(n/1e3/60/60)<168}const Ds=25;function q$(s){var t,n,e;return((e=(n=(t=s.workspace_setup)==null?void 0:t.starting_files)==null?void 0:n.github_commit_ref)==null?void 0:e.repository_url)||""}function sk(s,t,n){let e,o,r,i,c,a,l,u,m,p,f,x,A,C,M,S,L,I,X,j,H,J,U,O,Z,et,Q,ut,rt,mt,G,Tt,Bt,_t,Ct,Se,Te,sn,q,E,B,nt,at,wt,vt,Dt,ie,me,St,ze,Ze=N,ve=N;s.$$.on_destroy.push(()=>Ze()),s.$$.on_destroy.push(()=>ve());const Qe=or,Ee=Mt(on.key);kt(s,Ee,pt=>n(84,nt=pt));const In=Mt(Op);kt(s,In,pt=>n(85,ie=pt));const Be=Mt(xr.key),jn=Mt(yr.key);let{chatModelProp:wn}=t,Ke=wn||Mt("chatModel");kt(s,Ke,pt=>n(86,me=pt));const tn=Fe(!1);let en;function Bn(pt){if(!pt)return new Date(0);const we=x;return Sn.getTime(pt,we)}kt(s,tn,pt=>n(34,ze=pt)),En(async()=>{try{Be.getRemoteUrl(),Ke&&Ke.flags&&tn.update(()=>Ke.flags.enableShareService||!1)}catch(pt){console.error("Failed to get current repository URL:",pt)}});let An="",qe=!1;function Ln(){n(0,An=""),n(12,qe=!1)}let ro,Wn=0,Zn=0,qt=0;const Nn=_d(()=>{n(1,be=!1)},()=>be),Qn=_d(()=>{Me.set(!1)},()=>wt);async function Hn(pt,we){if(we&&we.stopPropagation(),!pt.isNew)if(pt.type==="remoteAgent"){const Ft=pt.isPinned||!1,je=await Ee.toggleAgentPinned(pt.id,Ft);In.update(fn=>{if(fn)return{...fn,pinnedAgents:je}}),Ee.reportRemoteAgentThreadListEvent(Ft?Bo.unpinAgent:Bo.pinAgent,Se.length,pt.id)}else["chat","localAgent"].includes(pt.type)&&Ke&&Ke.toggleConversationPinned(pt.id)}const Vn=Fe("all");kt(s,Vn,pt=>n(10,Dt=pt));let be=!1;const Me=Fe(!1);function He(){if(n(1,be=!be),be){Me.set(!1);const pt=$e.currentHeight||ce.defaultHeight,we=Zs(mt.windowHeight,mt.maxContentHeight),Ft=Math.max(mt.minHeight,Math.min(we,pt));n(3,$e={...$e,currentHeight:Ft})}}function Pt(){if(Me.update(pt=>!pt),n(1,be=!1),Ee.reportRemoteAgentThreadListEvent(wt?Bo.open:Bo.close,Se.length),wt){const pt=Zs(G.windowHeight,G.maxContentHeight),we=Math.max(G.minHeight,Math.min(pt,G.defaultHeight));n(4,pe={...pe,currentHeight:we})}}function Yt(pt){if(!pt)return!1;pt.type==="remoteAgent"&&pt.has_updates&&Ee.optimisticallyClearAgentUpdates(pt.id),Ee.setIsActive(pt.type==="remoteAgent");const we=jn.switchToThread(pt.type,pt.id,vt);return we&&(n(1,be=!1),Me.set(!1)),we}kt(s,Me,pt=>n(9,wt=pt));let Kt=0;const ce={threadItemHeight:Ds,minHeight:75,defaultHeight:375},_e={threadItemHeight:Ds,minHeight:25,defaultHeight:100};let Ie,$e=g$(ce.defaultHeight),pe=g$(_e.defaultHeight);function pn(pt){n(3,$e=v$(pt,$e,mt,be))}function Lt(){n(3,$e=w$($e)),setTimeout(()=>{n(3,$e=y$($e))},0)}function Un(pt){n(4,pe=v$(pt,pe,G,!be&&wt))}function Mn(){n(4,pe=w$(pe)),setTimeout(()=>{n(4,pe=y$(pe))},0)}const bo=Be.currentRepositoryUrl;function No(){nt.refreshAgentThreads()}async function _o(pt){const we=[],Ft=[];for(const je of pt)je.type==="remoteAgent"?Ft.push(je.id):we.push(je.id);await Ke.deleteConversations(we,void 0,Ft,Ee)}return kt(s,bo,pt=>n(114,at=pt)),s.$$set=pt=>{"chatModelProp"in pt&&n(63,wn=pt.chatModelProp)},s.$$.update=()=>{var pt,we;4194304&s.$$.dirty[2]&&n(82,e=nt.currentAgentId),4194304&s.$$.dirty[2]&&n(78,o=nt.agentOverviews||[]),16777216&s.$$.dirty[2]&&n(83,r=Ke?Object.values(me.orderedConversations()):[]),2097152&s.$$.dirty[2]&&n(81,i=r.find(Sn.isNew)),2621440&s.$$.dirty[2]&&n(80,c=Ke?r.filter(Ft=>{var je;return!((je=Ft.extraData)!=null&&je.isAgentConversation)&&Ft!==i}):[]),2621440&s.$$.dirty[2]&&n(79,a=Ke?r.filter(Ft=>{var je;return((je=Ft.extraData)==null?void 0:je.isAgentConversation)===!0&&Ft!==i}):[]),4194304&s.$$.dirty[2]&&n(71,l=nt.agentThreadsError),4194304&s.$$.dirty[2]&&n(70,u=nt.isLoading),4194304&s.$$.dirty[2]&&n(69,m=nt.hasFetchedOnce),8388608&s.$$.dirty[2]&&n(33,p=(pt=ie.state)==null?void 0:pt.activeWebviews.includes("home")),33554432&s.$$.dirty[2]&&(x=St||"lastMessageTimestamp"),16777216&s.$$.dirty[2]&&(n(31,A=me.agentExecutionMode),Ze(),Ze=oe(A,Ft=>n(115,vt=Ft))),22020096&s.$$.dirty[2]&&n(8,C=nt.isActive?e??Qe:me.currentConversationId),21495808&s.$$.dirty[2]&&n(75,M=(()=>{var Ft,je;if(nt.isActive){if(nt.isCreatingAgent)return;const fn=(Ft=me.currentConversationModel.draftExchange)==null?void 0:Ft.request_message;return{id:Qe,isNew:!0,type:"remoteAgent",title:fn,updated_at:new Date().toISOString(),started_at:new Date().toISOString(),isPinned:!1,conversation:void 0,sortTimestamp:new Date}}if(i)return{id:i.id,isNew:!0,type:(je=i.extraData)!=null&&je.isAgentConversation?"localAgent":"chat",title:"",updated_at:i.lastInteractedAtIso,started_at:i.createdAtIso,isPinned:!1,conversation:i,sortTimestamp:Bn(i)}})()),262144&s.$$.dirty[2]&&n(74,S=c.map(Ft=>({id:Ft.id,isNew:!1,type:"chat",title:Ft.name||"",updated_at:Ft.lastInteractedAtIso,started_at:Ft.createdAtIso,isPinned:Ft.isPinned,conversation:Ft,sortTimestamp:Bn(Ft)}))),131072&s.$$.dirty[2]&&n(73,L=a.map(Ft=>({id:Ft.id,isNew:!1,type:"localAgent",title:Ft.name||"",updated_at:Ft.lastInteractedAtIso,started_at:Ft.createdAtIso,isPinned:Ft.isPinned,conversation:Ft,sortTimestamp:Bn(Ft)}))),8388608&s.$$.dirty[2]&&n(77,I=((we=ie.state)==null?void 0:we.pinnedAgents)||{}),256&s.$$.dirty[0]|98304&s.$$.dirty[2]&&n(5,X=o.map(Ft=>({id:Ft.remote_agent_id,isNew:!1,type:"remoteAgent",title:Ft.title||Ft.session_summary,updated_at:Ft.updated_at,started_at:Ft.started_at,status:Ft.status,workspace_status:Ft.workspace_status,is_setup_script_agent:Ft.is_setup_script_agent,workspace_setup:Ft.workspace_setup||{},agent:Ft,sortTimestamp:new Date(Ft.updated_at||Ft.started_at),isPinned:I[Ft.remote_agent_id]||!1,has_updates:Ft.has_updates&&Ft.remote_agent_id!==C}))),256&s.$$.dirty[0]|8192&s.$$.dirty[2]&&n(76,j=M&&C===M.id),32&s.$$.dirty[0]|30720&s.$$.dirty[2]&&n(72,H=[j&&M,...S,...L,...X].filter(Boolean)),32&s.$$.dirty[0]|7168&s.$$.dirty[2]&&n(30,J=[{value:"all",label:"All threads",count:H.length},{value:"chat",label:"Chats",count:S.length},{value:"localAgent",label:"Local agents",count:L.length},{value:"remoteAgent",label:"Remote agents",count:X.length}].filter(Ft=>Ft.count>0)),1025&s.$$.dirty[0]|4195328&s.$$.dirty[2]&&n(66,U=H.filter(Ft=>(Dt==="all"||Ft.type===Dt)&&function(je,fn,Fo,Er){if(!fn.trim())return!0;const Vo=fn.toLowerCase().split(/\s+/).filter(bn=>bn.length>0),Go=[je.title,je.type==="remoteAgent"?Q9(je):"",Z9(je,Fo,Er)].filter(Boolean).join(" ").toLowerCase();return Vo.every(bn=>Go.includes(bn))}(Ft,An,nt.currentAgentId,nt.currentConversation))),512&s.$$.dirty[2]&&n(7,Z=l==null?void 0:l.errorMessage),384&s.$$.dirty[2]&&n(28,et=u&&!m),128&s.$$.dirty[0]|128&s.$$.dirty[2]&&n(27,Q=!!Z&&m),144&s.$$.dirty[2]&&n(26,ut=m&&U.length===0),2&s.$$.dirty[0]|16&s.$$.dirty[2]&&n(25,rt=be?function(Ft,je=K9){var Yo;const fn=new Map,Fo=new Date(new Date().setHours(0,0,0,0)),Er=[{age:We.Today,date:Fo},{age:We.ThisWeek,date:new Date(Fo.getTime()-6048e5)},{age:We.ThisMonth,date:new Date(Fo.getTime()-2592e6)}];for(const Rn of Ft){const lr=Rn.sortTimestamp;let so=((Yo=Er.find(us=>lr>=us.date))==null?void 0:Yo.age)||We.Older;Rn.isPinned&&(so=We.Pinned),Rn.isNew&&(so=We.New),fn.set(so,[...fn.get(so)||[],Rn])}const Vo=X9.map(Rn=>({groupTitle:Rn,threads:J9(fn.get(Rn)||[])})).filter(Rn=>Rn.threads.length>0);let Go=0;const bn=[];for(const Rn of Vo){const lr=[];for(const so of Rn.threads){if(Go>=je)break;lr.push(so),Go++}bn.push({groupTitle:Rn.groupTitle,threads:lr})}return bn}(U):[]),4&s.$$.dirty[0]|16&s.$$.dirty[2]&&n(68,mt={...ce,windowHeight:Kt,maxContentHeight:U.length*Ds}),16&s.$$.dirty[2]&&n(6,Se=U.filter(rk)),68&s.$$.dirty[0]&&n(67,G={..._e,windowHeight:Kt,maxContentHeight:Se.length*Ds}),10&s.$$.dirty[0]|64&s.$$.dirty[2]&&be&&n(3,$e=x$($e,mt)),530&s.$$.dirty[0]|32&s.$$.dirty[2]&&!be&&wt&&n(4,pe=x$(pe,G)),10&s.$$.dirty[0]&&n(24,Tt=be?`${$e.currentHeight}px`:""),10&s.$$.dirty[0]&&n(23,Bt=be?`${$e.currentHeight}px`:""),530&s.$$.dirty[0]&&n(22,_t=!be&&wt?`${pe.currentHeight}px`:""),530&s.$$.dirty[0]&&n(21,Ct=!be&&wt?`${pe.currentHeight}px`:""),64&s.$$.dirty[0]&&n(20,Te=Se.length),32&s.$$.dirty[0]&&n(65,sn=X.filter(Ft=>Ft.status===Ge.agentRunning||Ft.status===Ge.agentStarting)),8&s.$$.dirty[2]&&n(19,q=sn.length),32&s.$$.dirty[0]&&n(64,E=X.filter(Ft=>!!Ft.has_updates&&Ft.status===Ge.agentIdle)),4&s.$$.dirty[2]&&n(18,B=E.length)},n(32,f=Ke?Ke.sortConversationsBy:Fe("lastMessageTimestamp")),ve(),ve=oe(f,pt=>n(87,St=pt)),n(29,O=Array(3).fill(null)),[An,be,Kt,$e,pe,X,Se,Z,C,wt,Dt,en,qe,Wn,Zn,qt,ro,Ie,B,q,Te,Ct,_t,Bt,Tt,rt,ut,Q,et,O,J,A,f,p,ze,Ee,In,Ke,tn,function(){n(12,qe=!qe),n(1,be=qe),qe?setTimeout(()=>{en==null||en.focus()},30):n(0,An="")},Ln,Nn,Qn,Hn,Vn,Me,He,Pt,Yt,function(){Ee.setIsPanelFocused(!0)},function(){Ee.setIsPanelFocused(!1)},function(pt){pt.key==="Escape"&&(be?(n(1,be=!1),pt.preventDefault(),pt.stopPropagation()):wt&&(Me.set(!1),pt.preventDefault(),pt.stopPropagation()))},function(pt){n(3,$e=h$(pt,$e,be))},pn,Lt,function(pt){n(4,pe=h$(pt,pe,!be&&wt))},Un,Mn,bo,function(pt){if(!pt||typeof pt!="object"||!("workspace_setup"in pt))return!1;const we=q$(pt);return!!we&&!!at&&we!==at},function(pt){if(!pt||typeof pt!="object"||!("workspace_setup"in pt))return{name:"Unknown",fullPath:"Unknown"};const we=q$(pt);return{name:Cp(we),fullPath:ta(we)}},No,_o,wn,E,sn,U,G,mt,m,u,l,H,L,S,M,j,I,o,a,c,i,e,r,nt,ie,me,St,pt=>{pn(pt),Un(pt)},()=>{Lt(),Mn()},function(){n(2,Kt=window.innerHeight)},pt=>pt.value===Dt,function(pt){An=pt,n(0,An)},function(pt){en=pt,n(11,en)},pt=>{pt.key==="Escape"&&Ln()},()=>{n(12,qe=!0)},()=>{An.trim()||n(12,qe=!1)},pt=>{pt.key!=="Enter"&&pt.key!==" "||(He(),pt.stopPropagation(),pt.preventDefault())},pt=>{pt.stopPropagation(),No()},pt=>_o(pt.threads),(pt,we,Ft)=>{if(pt.type==="remoteAgent"&&Ee.reportRemoteAgentThreadListEvent(Bo.deleteAgent,Se.length,pt.id),C!==pt.id)return;const je=we.threads[Ft+1]||we.threads[Ft-1];je&&Yt(je)},pt=>{Yt(pt),pt.type==="remoteAgent"&&Ee.reportRemoteAgentThreadListEvent(Bo.selectAgent,X.length,pt.id)},(pt,we)=>Hn(pt,we),function(){Zn=this.clientHeight,n(14,Zn)},function(pt){Gt[pt?"unshift":"push"](()=>{ro=pt,n(16,ro)})},function(){Wn=this.clientHeight,n(13,Wn)},pt=>{pt.stopPropagation(),p?Ee.closeRemoteAgentHomePanel():Ee.showRemoteAgentHomePanel()},(pt,we)=>{if(pt.type==="remoteAgent"&&Ee.reportRemoteAgentThreadListEvent(Bo.deleteAgent,Se.length,pt.id),C!==pt.id)return;const Ft=Se[we+1]||Se[we-1];Ft&&Yt(Ft)},pt=>{Yt(pt),pt.type==="remoteAgent"&&Ee.reportRemoteAgentThreadListEvent(Bo.selectAgent,X.length,pt.id)},(pt,we)=>Hn(pt,we),function(pt){Gt[pt?"unshift":"push"](()=>{Ie=pt,n(17,Ie)})},()=>{if(be){if($e.hasDraggedThisClick)return;He()}else{if(pe.hasDraggedThisClick)return;Pt()}},function(){qt=this.clientWidth,n(15,qt)}]}class ik extends ct{constructor(t){super(),lt(this,t,sk,nk,it,{chatModelProp:63},null,[-1,-1,-1,-1,-1])}}function j$(s,t,n){const e=s.slice();e[21]=t[n];const o=e[1]===e[21].file.new_path||e[1]===e[21].file.old_path;return e[22]=o,e}function ak(s){let t,n,e;return n=new Ot({props:{size:1,color:"neutral",$$slots:{default:[lk]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-edits-list c-edits-list--empty svelte-ut8b0v")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};33554436&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function ck(s){let t,n,e,o;function r(c){s[19](c)}let i={class:"c-agent-edits-container__block-container",$$slots:{header:[yk],default:[gk]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.collapsed=s[0]),n=new ss({props:i}),Gt.push(()=>ke(n,"collapsed",r)),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-agent-edits-container svelte-ut8b0v")},m(c,a){_(c,t,a),h(n,t,null),o=!0},p(c,a){const l={};33558523&a&&(l.$$scope={dirty:a,ctx:c}),!e&&1&a&&(e=!0,l.collapsed=c[0],De(()=>e=!1)),n.$set(l)},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&y(t),v(n)}}}function lk(s){let t;return{c(){t=V(s[2])},m(n,e){_(n,t,e)},p(n,e){4&e&&ht(t,n[2])},d(n){n&&y(t)}}}function W$(s){let t,n;return t=new Nt({props:{content:"Toggle collapse unchanged regions",triggerOn:[te.Hover],$$slots:{default:[dk]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};33554432&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function uk(s){let t,n;return t=new Zp({props:{icon:"map"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function dk(s){let t,n;return t=new se({props:{color:"neutral",size:1,variant:"soft",$$slots:{default:[uk]},$$scope:{ctx:s}}}),t.$on("click",s[13]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};33554432&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function $k(s){let t,n,e=s[22]&&W$(s);return{c(){t=D("div"),e&&e.c(),k(t,"slot","actions")},m(o,r){_(o,t,r),e&&e.m(t,null),n=!0},p(o,r){o[22]?e?(e.p(o,r),386&r&&d(e,1)):(e=W$(o),e.c(),d(e,1),e.m(t,null)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d()}}}function V$(s){let t,n,e,o;function r(){return s[16](s[21])}function i(){return s[17](s[21])}function c(){return s[18](s[21])}return n=new ya({props:{qualifiedPathName:s[21].qualifiedPathName,lineChanges:s[21].changesSummary,isFocused:s[22],onClickFile:s[3]?r:void 0,onClickReview:s[4]?i:void 0,onClickRevert:s[5]?c:void 0,$$slots:{actions:[$k]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-edit")},m(a,l){_(a,t,l),h(n,t,null),o=!0},p(a,l){s=a;const u={};384&l&&(u.qualifiedPathName=s[21].qualifiedPathName),384&l&&(u.lineChanges=s[21].changesSummary),386&l&&(u.isFocused=s[22]),392&l&&(u.onClickFile=s[3]?r:void 0),400&l&&(u.onClickReview=s[4]?i:void 0),416&l&&(u.onClickRevert=s[5]?c:void 0),33554818&l&&(u.$$scope={dirty:l,ctx:s}),n.$set(u)},i(a){o||(d(n.$$.fragment,a),a&&_n(()=>{o&&(e||(e=cn(t,xo,{},!0)),e.run(1))}),o=!0)},o(a){$(n.$$.fragment,a),a&&(e||(e=cn(t,xo,{},!1)),e.run(0)),o=!1},d(a){a&&y(t),v(n),a&&e&&e.end()}}}function G$(s){let t,n,e;return n=new he({props:{color:"neutral",size:1,variant:"soft",$$slots:{default:[fk]},$$scope:{ctx:s}}}),n.$on("click",s[12]),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-show-more-container svelte-ut8b0v")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};33554816&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function mk(s){let t,n,e,o,r,i,c,a=s[7].length-es+"";return i=new Po({props:{slot:"iconRight"}}),{c(){t=D("span"),n=V("Show "),e=V(a),o=V(" more files"),r=z(),g(i.$$.fragment)},m(l,u){_(l,t,u),P(t,n),P(t,e),P(t,o),_(l,r,u),h(i,l,u),c=!0},p(l,u){(!c||128&u)&&a!==(a=l[7].length-es+"")&&ht(e,a)},i(l){c||(d(i.$$.fragment,l),c=!0)},o(l){$(i.$$.fragment,l),c=!1},d(l){l&&(y(t),y(r)),v(i,l)}}}function pk(s){let t,n,e,o;return e=new wp({props:{slot:"iconRight"}}),{c(){t=D("span"),t.textContent="Show less",n=z(),g(e.$$.fragment)},m(r,i){_(r,t,i),_(r,n,i),h(e,r,i),o=!0},p:N,i(r){o||(d(e.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),o=!1},d(r){r&&(y(t),y(n)),v(e,r)}}}function fk(s){let t,n,e,o;const r=[pk,mk],i=[];function c(a,l){return a[8]?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?i[t].p(a,l):(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function gk(s){let t,n,e,o,r=ee(s[8]?s[7]:s[7].slice(0,es)),i=[];for(let l=0;l<r.length;l+=1)i[l]=V$(j$(s,r,l));const c=l=>$(i[l],1,1,()=>{i[l]=null});let a=s[11]&&G$(s);return{c(){t=D("div"),n=D("div");for(let l=0;l<i.length;l+=1)i[l].c();e=z(),a&&a.c(),k(n,"class","c-edits-section svelte-ut8b0v"),k(t,"class","c-edits-list svelte-ut8b0v")},m(l,u){_(l,t,u),P(t,n);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(n,null);P(n,e),a&&a.m(n,null),o=!0},p(l,u){if(8634&u){let m;for(r=ee(l[8]?l[7]:l[7].slice(0,es)),m=0;m<r.length;m+=1){const p=j$(l,r,m);i[m]?(i[m].p(p,u),d(i[m],1)):(i[m]=V$(p),i[m].c(),d(i[m],1),i[m].m(n,e))}for(Y(),m=r.length;m<i.length;m+=1)c(m);K()}l[11]?a?(a.p(l,u),2048&u&&d(a,1)):(a=G$(l),a.c(),d(a,1),a.m(n,null)):a&&(Y(),$(a,1,1,()=>{a=null}),K())},i(l){if(!o){for(let u=0;u<r.length;u+=1)d(i[u]);d(a),o=!0}},o(l){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)$(i[u]);$(a),o=!1},d(l){l&&y(t),rn(i,l),a&&a.d()}}}function hk(s){let t,n,e,o,r;return o=new Zp({props:{icon:"diff-multiple"}}),{c(){t=D("div"),t.textContent="See full diff",n=z(),e=D("div"),g(o.$$.fragment),k(t,"class","c-agent-edits-header__buttons__text--long svelte-ut8b0v"),k(e,"class","c-agent-edits-header__buttons__text--short svelte-ut8b0v")},m(i,c){_(i,t,c),_(i,n,c),_(i,e,c),h(o,e,null),r=!0},p:N,i(i){r||(d(o.$$.fragment,i),r=!0)},o(i){$(o.$$.fragment,i),r=!1},d(i){i&&(y(t),y(n),y(e)),v(o)}}}function vk(s){let t,n;return t=new he({props:{color:"neutral",size:1,variant:"soft",disabled:s[9],$$slots:{default:[hk]},$$scope:{ctx:s}}}),t.$on("click",function(){xe(s[6])&&s[6].apply(this,arguments)}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){s=e;const r={};512&o&&(r.disabled=s[9]),33554432&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function wk(s){let t,n,e,o,r,i,c,a,l,u,m=s[7].length+"",p=s[7].length===1?"":"s";return l=new Nt({props:{content:s[9]?fc:void 0,$$slots:{default:[vk]},$$scope:{ctx:s}}}),{c(){t=D("div"),n=D("div"),e=V(m),o=V(" file"),r=V(p),i=V(" changed"),c=z(),a=D("div"),g(l.$$.fragment),k(n,"class","c-agent-edits-header__actions__count"),k(a,"class","c-agent-edits-header__buttons svelte-ut8b0v"),k(t,"class","c-agent-edits-header__actions svelte-ut8b0v"),k(t,"slot","text")},m(f,x){_(f,t,x),P(t,n),P(n,e),P(n,o),P(n,r),P(n,i),P(t,c),P(t,a),h(l,a,null),u=!0},p(f,x){(!u||128&x)&&m!==(m=f[7].length+"")&&ht(e,m),(!u||128&x)&&p!==(p=f[7].length===1?"":"s")&&ht(r,p);const A={};512&x&&(A.content=f[9]?fc:void 0),33555008&x&&(A.$$scope={dirty:x,ctx:f}),l.$set(A)},i(f){u||(d(l.$$.fragment,f),u=!0)},o(f){$(l.$$.fragment,f),u=!1},d(f){f&&y(t),v(l)}}}function yk(s){let t,n;return t=new z1({props:{filesCount:s[7].length,diffSummary:s[10],collapsed:s[0],hasChanges:!0,slot:"header",$$slots:{text:[wk]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};128&o&&(r.filesCount=e[7].length),1024&o&&(r.diffSummary=e[10]),1&o&&(r.collapsed=e[0]),33555136&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function xk(s){let t,n,e,o;const r=[ck,ak],i=[];function c(a,l){return a[7].length>0?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t===u?i[t].p(a,l):(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}const es=3;function bk(s,t,n){let e,o,r,i,c,{changedFiles:a=[]}=t,{collapsed:l=!1}=t,{focusedFilePath:u=null}=t,{emptyMessage:m="No changes to show"}=t,{onFileClick:p}=t,{onReviewClick:f}=t,{onRevertClick:x}=t,{onOpenDiffView:A}=t;const C=Mt("chatModel");let M=!1;return s.$$set=S=>{"changedFiles"in S&&n(14,a=S.changedFiles),"collapsed"in S&&n(0,l=S.collapsed),"focusedFilePath"in S&&n(1,u=S.focusedFilePath),"emptyMessage"in S&&n(2,m=S.emptyMessage),"onFileClick"in S&&n(3,p=S.onFileClick),"onReviewClick"in S&&n(4,f=S.onReviewClick),"onRevertClick"in S&&n(5,x=S.onRevertClick),"onOpenDiffView"in S&&n(6,A=S.onOpenDiffView)},s.$$.update=()=>{16384&s.$$.dirty&&n(15,o=a.map(S=>{const L=lc.generateDiff(S.old_path,S.new_path,S.old_contents||"",S.new_contents||""),I=lc.getDiffObjectStats(L),X={totalAddedLines:I.additions,totalRemovedLines:I.deletions};return{file:S,qualifiedPathName:{rootPath:"",relPath:S.new_path||S.old_path},changesSummary:X}})),32768&s.$$.dirty&&n(7,r=o.filter(S=>S.changesSummary.totalAddedLines>0||S.changesSummary.totalRemovedLines>0)),128&s.$$.dirty&&n(11,e=r.length>es),128&s.$$.dirty&&n(10,i=r.reduce((S,L)=>(S.totalAddedLines+=L.changesSummary.totalAddedLines,S.totalRemovedLines+=L.changesSummary.totalRemovedLines,S),{totalAddedLines:0,totalRemovedLines:0})),16384&s.$$.dirty&&n(9,c=a.length>Sg)},[l,u,m,p,f,x,A,r,M,c,i,e,function(){n(8,M=!M)},function(){C.extensionClient.toggleCollapseUnchangedRegions()},a,o,S=>p(S.file.new_path||S.file.old_path),S=>f(S.file),S=>x(S.file),function(S){l=S,n(0,l)}]}class _k extends ct{constructor(t){super(),lt(this,t,bk,xk,it,{changedFiles:14,collapsed:0,focusedFilePath:1,emptyMessage:2,onFileClick:3,onReviewClick:4,onRevertClick:5,onOpenDiffView:6})}}function Ck(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=It(o,e[r]);return{c(){t=ne("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=dn(t);n=$n(i,!0),i.forEach(y),this.h()},h(){n.a=null,ue(t,o)},m(r,i){mn(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M305.8 2.1C314.4 5.9 320 14.5 320 24v48h16c66.3 0 120 53.7 120 120v163.7c32.5 10.2 56 40.5 56 76.3 0 44.2-35.8 80-80 80s-80-35.8-80-80c0-35.8 23.5-66.1 56-76.3V192c0-39.8-32.2-72-72-72h-16v48c0 9.5-5.6 18.1-14.2 21.9s-18.8 2.3-25.8-4.1l-80-72c-5.1-4.6-7.9-11-7.9-17.8s2.9-13.3 7.9-17.8l80-72c7-6.3 17.2-7.9 25.8-4.1M112 80a32 32 0 1 0-64 0 32 32 0 1 0 64 0m-8 76.3v199.3c32.5 10.2 56 40.5 56 76.3 0 44.2-35.8 80-80 80s-80-35.8-80-80c0-35.8 23.5-66.1 56-76.3V156.3C23.5 146.1 0 115.8 0 80 0 35.8 35.8 0 80 0s80 35.8 80 80c0 35.8-23.5 66.1-56 76.3m8 275.7a32 32 0 1 0-64 0 32 32 0 1 0 64 0m320 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64"/>',t)},p(r,[i]){ue(t,o=Ue(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&r[0]]))},i:N,o:N,d(r){r&&y(t)}}}function Ak(s,t,n){return s.$$set=e=>{n(0,t=It(It({},t),ae(e)))},[t=ae(t)]}class Mk extends ct{constructor(t){super(),lt(this,t,Ak,Ck,it,{})}}function Y$(s){let t,n,e,o,r=s[8].length>0&&K$(s),i=s[10]&&!s[1]&&X$(s);return{c(){t=D("div"),n=D("div"),r&&r.c(),e=z(),i&&i.c(),k(n,"class","c-agent-footer__status svelte-1fkxsim"),k(t,"class","c-agent-footer svelte-1fkxsim")},m(c,a){_(c,t,a),P(t,n),r&&r.m(n,null),P(t,e),i&&i.m(t,null),o=!0},p(c,a){c[8].length>0?r?(r.p(c,a),256&a&&d(r,1)):(r=K$(c),r.c(),d(r,1),r.m(n,null)):r&&(Y(),$(r,1,1,()=>{r=null}),K()),c[10]&&!c[1]?i?(i.p(c,a),1026&a&&d(i,1)):(i=X$(c),i.c(),d(i,1),i.m(t,null)):i&&(Y(),$(i,1,1,()=>{i=null}),K())},i(c){o||(d(r),d(i),o=!0)},o(c){$(r),$(i),o=!1},d(c){c&&y(t),r&&r.d(),i&&i.d()}}}function K$(s){let t,n;return t=new _k({props:{changedFiles:s[8],collapsed:!s[11],focusedFilePath:s[7],emptyMessage:s[9]?"Loading...":"No changes to show",onReviewClick:s[18],onOpenDiffView:s[21],onFileClick:s[6]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};256&o&&(r.changedFiles=e[8]),2048&o&&(r.collapsed=!e[11]),128&o&&(r.focusedFilePath=e[7]),512&o&&(r.emptyMessage=e[9]?"Loading...":"No changes to show"),4364&o&&(r.onOpenDiffView=e[21]),64&o&&(r.onFileClick=e[6]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function X$(s){let t,n,e,o=s[8].length>0&&J$(s),r=!s[1]&&Z$(s);return{c(){t=D("div"),o&&o.c(),n=z(),r&&r.c(),k(t,"class","c-agent-footer__buttons svelte-1fkxsim")},m(i,c){_(i,t,c),o&&o.m(t,null),P(t,n),r&&r.m(t,null),e=!0},p(i,c){i[8].length>0?o?(o.p(i,c),256&c&&d(o,1)):(o=J$(i),o.c(),d(o,1),o.m(t,n)):o&&(Y(),$(o,1,1,()=>{o=null}),K()),i[1]?r&&(Y(),$(r,1,1,()=>{r=null}),K()):r?(r.p(i,c),2&c&&d(r,1)):(r=Z$(i),r.c(),d(r,1),r.m(t,null))},i(i){e||(d(o),d(r),e=!0)},o(i){$(o),$(r),e=!1},d(i){i&&y(t),o&&o.d(),r&&r.d()}}}function J$(s){let t,n,e;return n=new Nt({props:{triggerOn:[te.Hover],content:"Create a GitHub pull request with the changes",$$slots:{default:[Ik]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-agent-footer__button svelte-1fkxsim")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};67108884&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function kk(s){let t;return{c(){t=V("Create a PR")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Sk(s){let t;return{c(){t=V("Creating a PR...")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Tk(s){let t;function n(r,i){return r[4]?Sk:kk}let e=n(s),o=e(s);return{c(){o.c(),t=gt()},m(r,i){o.m(r,i),_(r,t,i)},p(r,i){e!==(e=n(r))&&(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&y(t),o.d(r)}}}function Ek(s){let t,n;return t=new Mk({props:{slot:"iconRight"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Ik(s){var e;let t,n;return t=new he({props:{size:2,variant:"soft",color:"neutral",class:"c-agent-footer__open-btn",disabled:[Ge.agentUnspecified,Ge.agentPending,Ge.agentStarting].includes((e=s[2])==null?void 0:e.status),$$slots:{iconRight:[Ek],default:[Tk]},$$scope:{ctx:s}}}),t.$on("click",s[19]),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,r){var c;const i={};4&r&&(i.disabled=[Ge.agentUnspecified,Ge.agentPending,Ge.agentStarting].includes((c=o[2])==null?void 0:c.status)),67108880&r&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){v(t,o)}}}function Z$(s){let t,n,e;return n=new Nt({props:{triggerOn:[te.Hover],content:"SSH into the remote agent's workspace in a new VSCode window",$$slots:{default:[zk]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-agent-footer__button svelte-1fkxsim")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};67109924&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function Lk(s){let t;return{c(){t=V("Open remote workspace")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Rk(s){let t;return{c(){t=V("Connecting...")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Dk(s){let t;function n(r,i){return r[5]?Rk:Lk}let e=n(s),o=e(s);return{c(){o.c(),t=gt()},m(r,i){o.m(r,i),_(r,t,i)},p(r,i){e!==(e=n(r))&&(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&y(t),o.d(r)}}}function Pk(s){let t,n;return t=new zp({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Nk(s){let t,n;return t=new Tn({props:{size:1,useCurrentColor:!0}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Fk(s){let t,n,e,o;const r=[Nk,Pk],i=[];function c(a,l){return a[5]?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n||(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function zk(s){var e;let t,n;return t=new he({props:{size:2,variant:"soft",color:"accent",class:"c-agent-footer__open-btn",disabled:[Ge.agentUnspecified,Ge.agentPending,Ge.agentStarting].includes((e=s[2])==null?void 0:e.status)||s[5],$$slots:{iconRight:[Fk],default:[Dk]},$$scope:{ctx:s}}}),t.$on("click",s[22]),{c(){g(t.$$.fragment)},m(o,r){h(t,o,r),n=!0},p(o,r){var c;const i={};36&r&&(i.disabled=[Ge.agentUnspecified,Ge.agentPending,Ge.agentStarting].includes((c=o[2])==null?void 0:c.status)||o[5]),67108896&r&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){v(t,o)}}}function Ok(s){let t,n,e,o;_n(s[20]);let r=s[2]&&Y$(s);return{c(){r&&r.c(),t=gt()},m(i,c){r&&r.m(i,c),_(i,t,c),n=!0,e||(o=Et(window,"resize",s[20]),e=!0)},p(i,[c]){i[2]?r?(r.p(i,c),4&c&&d(r,1)):(r=Y$(i),r.c(),d(r,1),r.m(t.parentNode,t)):r&&(Y(),$(r,1,1,()=>{r=null}),K())},i(i){n||(d(r),n=!0)},o(i){$(r),n=!1},d(i){i&&y(t),r&&r.d(i),e=!1,o()}}}function Bk(s,t,n){let e,o,r,i,c,a,l,u,m,p,f;const x=Mt(on.key);kt(s,x,J=>n(3,m=J));const A=Mt("chatModel");kt(s,A,J=>n(23,p=J));const C=Mt(Mp),M=Mt(xr.key),S=Fe(""),L=Jf(S);kt(s,L,J=>n(12,f=J)),En(async()=>{try{const{remoteUrl:J,error:U}=await M.getRemoteUrl();if(U)throw new Error(U);S.set(J)}catch(J){console.error("Failed to get current repository URL:",J)}});let I=!1,X=0;async function j(J){if(!J)return;const U=x.agentOverviews.find(O=>O.remote_agent_id===J);U&&await x.sshToRemoteAgent(U)}let H=!1;return s.$$.update=()=>{var J;1&s.$$.dirty&&n(11,e=X>660),8&s.$$.dirty&&n(2,o=m==null?void 0:m.currentAgent),4&s.$$.dirty&&n(10,r=o==null?void 0:o.remote_agent_id),8&s.$$.dirty&&n(9,i=m==null?void 0:m.isCurrentAgentDetailsLoading),8&s.$$.dirty&&n(8,c=n0(((J=m.currentConversation)==null?void 0:J.exchanges)??[])),8&s.$$.dirty&&n(7,a=m.focusedFilePath),8&s.$$.dirty&&n(1,l=m.isRemoteAgentSshWindow),2&s.$$.dirty&&n(6,u=l?U=>{A.extensionClient.openFile({repoRoot:"",pathName:U})}:void 0)},[X,l,o,m,I,H,u,a,c,i,r,e,f,x,A,C,L,j,async function(J){const U=J.new_path||J.old_path;m.openDiffInBuffer(J.old_contents||"",J.new_contents||"",U)},function(){var O;if(!((O=m.currentAgent)!=null&&O.remote_agent_id))return void console.error("No current agent ID found");x.reportRemoteAgentEvent({eventName:Rf.createdPR,remoteAgentId:m.currentAgent.remote_agent_id,eventData:{createdPRData:{}}}),n(4,I=!0);const J=p.currentConversationModel,U=J==null?void 0:J.selectedModelId;m.sendMessage("Please create a pull request with the changes you've made.",U??void 0).then(()=>{n(4,I=!1)}).catch(Z=>{console.error("Error sending PR creation request:",Z),n(4,I=!1)})},function(){n(0,X=window.innerHeight)},()=>{C.set(-1),m.showRemoteAgentDiffPanel({turnIdx:-1,changedFiles:c,userPrompt:"",sessionSummary:"",isShowingAggregateChanges:!0,isAgentFromDifferentRepo:f(o)})},()=>{n(5,H=!0),j(r).then(()=>{n(5,H=!1)})}]}class Hk extends ct{constructor(t){super(),lt(this,t,Bk,Ok,it,{})}}function Q$(s){var ut;let t,n,e,o,r,i,c,a,l,u,m,p,f,x,A,C,M,S,L,I,X,j;o=new Ot({props:{size:2,weight:"medium",$$slots:{default:[Uk]},$$scope:{ctx:s}}}),i=new Nt({props:{content:"View full script in editor",side:"bottom",$$slots:{default:[Wk]},$$scope:{ctx:s}}});const H=[Gk,Vk],J=[];function U(rt,mt){return rt[1].length>0?0:1}l=U(s),u=J[l]=H[l](s);let O=((ut=s[5])==null?void 0:ut.status)&&tm(s);function Z(rt){s[15](rt)}let et={placeholder:"Script name",size:2,$$slots:{iconLeft:[tS]},$$scope:{ctx:s}};s[2]!==void 0&&(et.value=s[2]),x=new os({props:et}),Gt.push(()=>ke(x,"value",Z)),x.$on("blur",s[16]),S=new Nt({props:{content:"Save the setup script in your machine's home directory",triggerOn:[te.Hover],$$slots:{default:[nS]},$$scope:{ctx:s}}}),I=new Nt({props:{content:"Save the setup script in the Git repository, for your team to use when you push your changes",triggerOn:[te.Hover],$$slots:{default:[rS]},$$scope:{ctx:s}}});let Q=s[4]&&em(s);return{c(){t=D("div"),n=D("div"),e=D("div"),g(o.$$.fragment),r=z(),g(i.$$.fragment),c=z(),a=D("div"),u.c(),m=z(),O&&O.c(),p=z(),f=D("div"),g(x.$$.fragment),C=z(),M=D("div"),g(S.$$.fragment),L=z(),g(I.$$.fragment),X=z(),Q&&Q.c(),k(e,"class","header-content__title svelte-bf326k"),k(a,"class","header-content__title svelte-bf326k"),k(n,"class","header-content svelte-bf326k"),k(M,"class","input-group location-buttons svelte-bf326k"),k(f,"class","save-bar-content svelte-bf326k"),k(t,"class","setup-script-save-bar svelte-bf326k")},m(rt,mt){_(rt,t,mt),P(t,n),P(n,e),h(o,e,null),P(e,r),h(i,e,null),P(n,c),P(n,a),J[l].m(a,null),P(a,m),O&&O.m(a,null),P(t,p),P(t,f),h(x,f,null),P(f,C),P(f,M),h(S,M,null),P(M,L),h(I,M,null),P(f,X),Q&&Q.m(f,null),j=!0},p(rt,mt){var Te;const G={};4194304&mt&&(G.$$scope={dirty:mt,ctx:rt}),o.$set(G);const Tt={};4194336&mt&&(Tt.$$scope={dirty:mt,ctx:rt}),i.$set(Tt);let Bt=l;l=U(rt),l===Bt?J[l].p(rt,mt):(Y(),$(J[Bt],1,1,()=>{J[Bt]=null}),K(),u=J[l],u?u.p(rt,mt):(u=J[l]=H[l](rt),u.c()),d(u,1),u.m(a,m)),(Te=rt[5])!=null&&Te.status?O?(O.p(rt,mt),32&mt&&d(O,1)):(O=tm(rt),O.c(),d(O,1),O.m(a,null)):O&&(Y(),$(O,1,1,()=>{O=null}),K());const _t={};4194304&mt&&(_t.$$scope={dirty:mt,ctx:rt}),!A&&4&mt&&(A=!0,_t.value=rt[2],De(()=>A=!1)),x.$set(_t);const Ct={};4194316&mt&&(Ct.$$scope={dirty:mt,ctx:rt}),S.$set(Ct);const Se={};4194316&mt&&(Se.$$scope={dirty:mt,ctx:rt}),I.$set(Se),rt[4]?Q?(Q.p(rt,mt),16&mt&&d(Q,1)):(Q=em(rt),Q.c(),d(Q,1),Q.m(f,null)):Q&&(Y(),$(Q,1,1,()=>{Q=null}),K())},i(rt){j||(d(o.$$.fragment,rt),d(i.$$.fragment,rt),d(u),d(O),d(x.$$.fragment,rt),d(S.$$.fragment,rt),d(I.$$.fragment,rt),d(Q),j=!0)},o(rt){$(o.$$.fragment,rt),$(i.$$.fragment,rt),$(u),$(O),$(x.$$.fragment,rt),$(S.$$.fragment,rt),$(I.$$.fragment,rt),$(Q),j=!1},d(rt){rt&&y(t),v(o),v(i),J[l].d(),O&&O.d(),v(x),v(S),v(I),Q&&Q.d()}}}function Uk(s){let t;return{c(){t=V("Setup script")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function qk(s){let t;return{c(){t=V("View")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function jk(s){let t,n;return t=new zp({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Wk(s){let t,n;return t=new he({props:{variant:"ghost-block",color:"neutral",size:1,$$slots:{iconLeft:[jk],default:[qk]},$$scope:{ctx:s}}}),t.$on("click",s[12]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4194304&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Vk(s){let t,n;return t=new Ot({props:{size:1,color:"secondary",class:"header-content__version-count",$$slots:{default:[Yk]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4194304&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Gk(s){let t,n,e,o,r,i,c;return n=new Nt({props:{content:s[0]===0?"":"Switch to previous script",triggerOn:[te.Hover],$$slots:{default:[Xk]},$$scope:{ctx:s}}}),o=new Ot({props:{size:1,color:"secondary",class:"header-content__version-count",$$slots:{default:[Jk]},$$scope:{ctx:s}}}),i=new Nt({props:{content:s[0]===s[1].length-1?"":"Switch to next script",triggerOn:[te.Hover],$$slots:{default:[Qk]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),e=z(),g(o.$$.fragment),r=z(),g(i.$$.fragment),k(t,"class","version-navigation svelte-bf326k")},m(a,l){_(a,t,l),h(n,t,null),P(t,e),h(o,t,null),P(t,r),h(i,t,null),c=!0},p(a,l){const u={};1&l&&(u.content=a[0]===0?"":"Switch to previous script"),4194305&l&&(u.$$scope={dirty:l,ctx:a}),n.$set(u);const m={};4194307&l&&(m.$$scope={dirty:l,ctx:a}),o.$set(m);const p={};3&l&&(p.content=a[0]===a[1].length-1?"":"Switch to next script"),4194307&l&&(p.$$scope={dirty:l,ctx:a}),i.$set(p)},i(a){c||(d(n.$$.fragment,a),d(o.$$.fragment,a),d(i.$$.fragment,a),c=!0)},o(a){$(n.$$.fragment,a),$(o.$$.fragment,a),$(i.$$.fragment,a),c=!1},d(a){a&&y(t),v(n),v(o),v(i)}}}function Yk(s){let t;return{c(){t=V("No versions")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Kk(s){let t,n;return t=new hp({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Xk(s){let t,n;return t=new se({props:{variant:"ghost-block",size:1,disabled:s[0]===0,title:"Previous version",$$slots:{default:[Kk]},$$scope:{ctx:s}}}),t.$on("click",s[13]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.disabled=e[0]===0),4194304&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Jk(s){let t,n,e,o=s[0]+1+"",r=s[1].length+"";return{c(){t=V(o),n=V(" of "),e=V(r)},m(i,c){_(i,t,c),_(i,n,c),_(i,e,c)},p(i,c){1&c&&o!==(o=i[0]+1+"")&&ht(t,o),2&c&&r!==(r=i[1].length+"")&&ht(e,r)},d(i){i&&(y(t),y(n),y(e))}}}function Zk(s){let t,n;return t=new Df({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Qk(s){let t,n;return t=new se({props:{variant:"ghost-block",size:1,disabled:s[0]===s[1].length-1,title:"Next version",$$slots:{default:[Zk]},$$scope:{ctx:s}}}),t.$on("click",s[14]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};3&o&&(r.disabled=e[0]===e[1].length-1),4194304&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function tm(s){let t,n,e;return n=new Zf({props:{commandResult:s[5].status===ye.completed?"success":s[5].status===ye.error?"error":"loading"}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","header-content__actions")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};32&r&&(i.commandResult=o[5].status===ye.completed?"success":o[5].status===ye.error?"error":"loading"),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function tS(s){let t,n;return t=new $a({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function eS(s){let t;return{c(){t=V("Save locally")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function nS(s){let t,n;return t=new he({props:{variant:"solid",color:"accent",disabled:s[3]||!s[2]||!nm,$$slots:{default:[eS]},$$scope:{ctx:s}}}),t.$on("click",s[17]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};12&o&&(r.disabled=e[3]||!e[2]||!nm),4194304&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function oS(s){let t;return{c(){t=V("Save in repo")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function rS(s){let t,n;return t=new he({props:{variant:"solid",color:"accent",disabled:s[3]||!s[2],$$slots:{default:[oS]},$$scope:{ctx:s}}}),t.$on("click",s[18]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};12&o&&(r.disabled=e[3]||!e[2]),4194304&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function em(s){let t,n,e;return n=new Ot({props:{size:1,color:"error",$$slots:{default:[sS]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","error-message svelte-bf326k")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};4194320&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function sS(s){let t;return{c(){t=V(s[4])},m(n,e){_(n,t,e)},p(n,e){16&e&&ht(t,n[4])},d(n){n&&y(t)}}}function iS(s){let t,n,e=s[1].length>0&&Q$(s);return{c(){e&&e.c(),t=gt()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,[r]){o[1].length>0?e?(e.p(o,r),2&r&&d(e,1)):(e=Q$(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}let nm="home";function aS(s,t,n){let e,o,r,i;const c=Mt(on.key);kt(s,c,C=>n(11,i=C));const a=Mt("chatModel");let l="setup.sh",u=!1,m="",p=0;const f=C=>{const M=document.querySelector(`[data-tool-id="${C}"]`);M&&M.scrollIntoView({behavior:"smooth",block:"start"})};function x(C=1){n(0,p=Math.max(0,Math.min(e.length-1,p+C)));const M=e[p];M!=null&&M.id&&(f(M.id),setTimeout(()=>{f(M.id)},500))}async function A(C){var M,S,L,I,X,j;if(l&&C)if(r!=null&&r.content)try{n(3,u=!0),n(4,m="");const H=l.endsWith(".sh")?l:`${l}.sh`,J=await c.saveSetupScript(H,r.content,C);let U;if(!J.success||!J.path)return void n(4,m=J.error||"Failed to save setup script");if(U=(await c.listSetupScripts()).find(Q=>Q.path===J.path),!U)return void n(4,m="Failed to save script");const O=i==null?void 0:i.currentAgent,Z=(L=(S=(M=O==null?void 0:O.workspace_setup)==null?void 0:M.starting_files)==null?void 0:S.github_commit_ref)==null?void 0:L.git_ref,et=(j=(X=(I=O==null?void 0:O.workspace_setup)==null?void 0:I.starting_files)==null?void 0:X.github_commit_ref)==null?void 0:j.repository_url;c.saveLastRemoteAgentSetup(et||null,Z||null,J.path),c.setCurrentAgent(void 0)}catch(H){n(4,m=H instanceof Error?H.message:"Unknown error occurred")}finally{n(3,u=!1)}else n(4,m="No script content to save");else n(4,m="Please provide both script name and location")}return s.$$.update=()=>{var M;var C;2048&s.$$.dirty&&n(1,(C=((M=i.currentConversation)==null?void 0:M.exchanges)||[],e=C&&Array.isArray(C)?C.flatMap(S=>(S.exchange.response_nodes||[]).filter(L=>{var I,X;return L.type===Hr.TOOL_USE&&((I=L.tool_use)==null?void 0:I.tool_name)==="setup-script"&&((X=L.tool_use)==null?void 0:X.input_json)}).map(L=>{var I;try{const X=typeof L.tool_use.input_json=="string"?JSON.parse(L.tool_use.input_json):L.tool_use.input_json,j=i.getToolUseState(L.tool_use.tool_use_id),H=((I=S.exchange)==null?void 0:I.request_id)||S.request_id||"";return H||console.warn("SetupScriptSaveBar: Missing request_id for an exchange",S),{content:X.script_content||"",timestamp:L.timestamp,status:j.phase,requestId:H,id:L.tool_use.tool_use_id}}catch(X){return console.error("Failed to parse setup script JSON:",X),null}})).filter(S=>S!==null&&S.content!==""):[])),2&s.$$.dirty&&n(10,o=e.length),1024&s.$$.dirty&&n(0,p=o-1),3&s.$$.dirty&&n(5,r=e[p])},[p,e,l,u,m,r,c,a,x,A,o,i,()=>{a.extensionClient.openScratchFile(r==null?void 0:r.content,"shellscript")},()=>x(-1),()=>x(1),function(C){l=C,n(2,l)},()=>{l?l.endsWith(".sh")||n(2,l+=".sh"):n(2,l="setup.sh")},()=>A("home"),()=>A("git")]}class cS extends ct{constructor(t){super(),lt(this,t,aS,iS,it,{})}}function om(s){let t,n;return t=new no({props:{color:s[3],size:1,$$slots:{icon:[mS],default:[lS]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.color=e[3]),2070&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function lS(s){let t,n,e=s[1]===zn.inProgress?` ${s[2].progress}%`:"";return{c(){t=V(s[4]),n=V(e)},m(o,r){_(o,t,r),_(o,n,r)},p(o,r){16&r&&ht(t,o[4]),6&r&&e!==(e=o[1]===zn.inProgress?` ${o[2].progress}%`:"")&&ht(n,e)},d(o){o&&(y(t),y(n))}}}function uS(s){let t,n,e;return n=new kp({}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-orientation-status--spin-icon svelte-1a8540p")},m(o,r){_(o,t,r),h(n,t,null),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function dS(s){let t,n;return t=new Jn({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function $S(s){let t,n;return t=new co({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function mS(s){let t,n,e,o;const r=[$S,dS,uS],i=[];function c(a,l){return a[1]===zn.succeeded?0:a[1]===zn.failed?1:2}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n||(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function pS(s){let t,n,e,o,r=s[0]&&om(s);return{c(){r&&r.c(),t=gt()},m(i,c){r&&r.m(i,c),_(i,t,c),n=!0,e||(o=Et(window,"message",s[5].onMessageFromExtension),e=!0)},p(i,[c]){i[0]?r?(r.p(i,c),1&c&&d(r,1)):(r=om(i),r.c(),d(r,1),r.m(t.parentNode,t)):r&&(Y(),$(r,1,1,()=>{r=null}),K())},i(i){n||(d(r),n=!0)},o(i){$(r),n=!1},d(i){i&&y(t),r&&r.d(i),e=!1,o()}}}function fS(s,t,n){let e,o;const r=new oi(xn),i=Fe({state:zn.idle});kt(s,i,p=>n(2,o=p));const c=On(i,p=>p.state);kt(s,c,p=>n(1,e=p));const a={handleMessageFromExtension:p=>!(!p.data||p.data.type!==Xe.orientationStatusUpdate)&&(i.set(p.data.data),!0)};let l,u;En(()=>{r.registerConsumer(a),xn.postMessage({type:Xe.getOrientationStatus})});let m=!1;return s.$$.update=()=>{var p;2&s.$$.dirty&&n(3,l=(p=e)===zn.succeeded?"success":p===zn.failed||p===zn.aborted?"error":"warning"),6&s.$$.dirty&&n(4,u=function(f,x){return f===zn.succeeded?"Orientation complete! Check out `.augment/rules` folder.":f===zn.failed?x.errorMessage?`Orientation failed: ${x.errorMessage}`:"Orientation failed":f===zn.aborted?x.errorMessage?`Orientation aborted: ${x.errorMessage}`:"Orientation aborted":"Orienting to codebase and creating rules in `.augment/rules` folder... "}(e,o)),3&s.$$.dirty&&(m?e!==zn.succeeded&&e!==zn.failed&&e!==zn.aborted||setTimeout(()=>{n(0,m=!1)},3e3):e===zn.inProgress&&n(0,m=!0))},[m,e,o,l,u,r,i,c]}class gS extends ct{constructor(t){super(),lt(this,t,fS,pS,it,{})}}function rm(s){let t,n;return t=new no({props:{color:"error",size:1,$$slots:{icon:[vS],default:[hS]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function hS(s){let t;return{c(){t=V("Syncing disabled")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function vS(s){let t,n;return t=new _p({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function wS(s){let t,n,e=s[1].syncEnabledState==="disabled"&&rm(s);return{c(){e&&e.c(),t=gt()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,[r]){o[1].syncEnabledState==="disabled"?e?2&r&&d(e,1):(e=rm(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function yS(s,t,n){let e,o=N,r=()=>(o(),o=oe(i,c=>n(1,e=c)),i);s.$$.on_destroy.push(()=>o());let{contextModel:i}=t;return r(),s.$$set=c=>{"contextModel"in c&&r(n(0,i=c.contextModel))},[i,e]}class xS extends ct{constructor(t){super(),lt(this,t,yS,wS,it,{contextModel:0})}}function sm(s){let t,n;return t=new no({props:{color:s[2],size:1,$$slots:{icon:[AS],default:[bS]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.color=e[2]),89&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function bS(s){var o;let t,n,e=((o=s[0])==null?void 0:o.status)===Eo.done?"":` ${s[4]}%`;return{c(){t=V(s[3]),n=V(e)},m(r,i){_(r,t,i),_(r,n,i)},p(r,i){var c;8&i&&ht(t,r[3]),17&i&&e!==(e=((c=r[0])==null?void 0:c.status)===Eo.done?"":` ${r[4]}%`)&&ht(n,e)},d(r){r&&(y(t),y(n))}}}function _S(s){let t,n,e;return n=new kp({}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-sync-status--spin-icon svelte-18a88kw")},m(o,r){_(o,t,r),h(n,t,null),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function CS(s){let t,n;return t=new co({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function AS(s){let t,n,e,o;const r=[CS,_S],i=[];function c(a,l){var u;return((u=a[0])==null?void 0:u.status)===Eo.done?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n||(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function MS(s){let t,n,e=!isNaN(s[4])&&s[1],o=e&&sm(s);return{c(){o&&o.c(),t=gt()},m(r,i){o&&o.m(r,i),_(r,t,i),n=!0},p(r,[i]){18&i&&(e=!isNaN(r[4])&&r[1]),e?o?(o.p(r,i),18&i&&d(o,1)):(o=sm(r),o.c(),d(o,1),o.m(t.parentNode,t)):o&&(Y(),$(o,1,1,()=>{o=null}),K())},i(r){n||(d(o),n=!0)},o(r){$(o),n=!1},d(r){r&&y(t),o&&o.d(r)}}}function kS(s,t,n){let e,o,r,i,{progress:c}=t;return s.$$set=a=>{"progress"in a&&n(0,c=a.progress)},s.$$.update=()=>{var a;1&s.$$.dirty&&n(4,e=!(a=c)||a.totalFiles<=0?NaN:a.status===Eo.done?100:Math.floor(a.syncedCount/a.totalFiles*100)),1&s.$$.dirty&&n(2,i=(c==null?void 0:c.status)===Eo.done?"success":"info"),1&s.$$.dirty&&n(3,o=(c==null?void 0:c.status)===Eo.done?"Indexing complete.":"Indexing codebase..."),3&s.$$.dirty&&(r?(c==null?void 0:c.status)===Eo.done&&setTimeout(()=>{n(1,r=!1)},3e3):c&&c.status!==Eo.done&&(c.status===Eo.longRunning||c.newlyTrackedFolders.length>0)&&n(1,r=!0))},n(1,r=!1),[c,r,i,o,e]}class SS extends ct{constructor(t){super(),lt(this,t,kS,MS,it,{progress:0})}}function TS(s){let t,n,e,o,r,i;return t=new xS({props:{contextModel:s[0]}}),e=new SS({props:{progress:s[1].syncProgress}}),r=new gS({}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment),o=z(),g(r.$$.fragment)},m(c,a){h(t,c,a),_(c,n,a),h(e,c,a),_(c,o,a),h(r,c,a),i=!0},p(c,[a]){const l={};1&a&&(l.contextModel=c[0]),t.$set(l);const u={};2&a&&(u.progress=c[1].syncProgress),e.$set(u)},i(c){i||(d(t.$$.fragment,c),d(e.$$.fragment,c),d(r.$$.fragment,c),i=!0)},o(c){$(t.$$.fragment,c),$(e.$$.fragment,c),$(r.$$.fragment,c),i=!1},d(c){c&&(y(n),y(o)),v(t,c),v(e,c),v(r,c)}}}function ES(s,t,n){let e,o=N,r=()=>(o(),o=oe(i,c=>n(1,e=c)),i);s.$$.on_destroy.push(()=>o());let{contextModel:i}=t;return r(),s.$$set=c=>{"contextModel"in c&&r(n(0,i=c.contextModel))},[i,e]}class IS extends ct{constructor(t){super(),lt(this,t,ES,TS,it,{contextModel:0})}}function LS(s){let t,n;return t=new cr({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function RS(s){let t,n;return t=new se({props:{variant:"ghost-block",color:"neutral",size:1,title:"Agent options",$$slots:{default:[LS]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};524288&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function im(s){let t,n;return t=new yt.Item({props:{onSelect:s[13],$$slots:{iconLeft:[PS],default:[DS]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.onSelect=e[13]),524288&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function DS(s){let t;return{c(){t=V("Rename")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function PS(s){let t,n;return t=new Tr({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function am(s){let t,n;return t=new yt.Item({props:{title:"Pin or unpin agent",onSelect:s[14],$$slots:{iconLeft:[FS],default:[NS]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};16&o&&(r.onSelect=e[14]),524296&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function NS(s){let t,n=s[3]?"Unpin":"Pin";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){8&o&&n!==(n=e[3]?"Unpin":"Pin")&&ht(t,n)},d(e){e&&y(t)}}}function FS(s){let t,n;return t=new la({props:{class:"pin-icon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function zS(s){let t;return{c(){t=V("Copy ID")},m(n,e){_(n,t,e)},p:N,d(n){n&&y(t)}}}function OS(s){let t,n=s[7].get(s[1])+"";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){130&o&&n!==(n=e[7].get(e[1])+"")&&ht(t,n)},d(e){e&&y(t)}}}function BS(s){let t,n;function e(i,c){return 130&c&&(t=null),t==null&&(t=!!i[7].get(i[1])),t?OS:zS}let o=e(s,-1),r=o(s);return{c(){r.c(),n=gt()},m(i,c){r.m(i,c),_(i,n,c)},p(i,c){o===(o=e(i,c))&&r?r.p(i,c):(r.d(1),r=o(i),r&&(r.c(),r.m(n.parentNode,n)))},d(i){i&&y(n),r.d(i)}}}function HS(s){let t,n;return t=new ma({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function US(s){let t;return{c(){t=V("Share")},m(n,e){_(n,t,e)},p:N,d(n){n&&y(t)}}}function qS(s){let t,n=s[8].get(s[1])+"";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){258&o&&n!==(n=e[8].get(e[1])+"")&&ht(t,n)},d(e){e&&y(t)}}}function jS(s){let t,n;function e(i,c){return 258&c&&(t=null),t==null&&(t=!!i[8].get(i[1])),t?qS:US}let o=e(s,-1),r=o(s);return{c(){r.c(),n=gt()},m(i,c){r.m(i,c),_(i,n,c)},p(i,c){o===(o=e(i,c))&&r?r.p(i,c):(r.d(1),r=o(i),r&&(r.c(),r.m(n.parentNode,n)))},d(i){i&&y(n),r.d(i)}}}function WS(s){let t,n;return t=new si({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function cm(s){let t,n,e,o,r,i;return t=new yt.Separator({}),e=new yt.Label({props:{$$slots:{default:[VS]},$$scope:{ctx:s}}}),r=new yt.Item({props:{disabled:!0,$$slots:{default:[GS]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment),o=z(),g(r.$$.fragment)},m(c,a){h(t,c,a),_(c,n,a),h(e,c,a),_(c,o,a),h(r,c,a),i=!0},p(c,a){const l={};524288&a&&(l.$$scope={dirty:a,ctx:c}),e.$set(l);const u={};524292&a&&(u.$$scope={dirty:a,ctx:c}),r.$set(u)},i(c){i||(d(t.$$.fragment,c),d(e.$$.fragment,c),d(r.$$.fragment,c),i=!0)},o(c){$(t.$$.fragment,c),$(e.$$.fragment,c),$(r.$$.fragment,c),i=!1},d(c){c&&(y(n),y(o)),v(t,c),v(e,c),v(r,c)}}}function VS(s){let t;return{c(){t=V("Branch")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function GS(s){let t;return{c(){t=V(s[2])},m(n,e){_(n,t,e)},p(n,e){4&e&&ht(t,n[2])},d(n){n&&y(t)}}}function YS(s){let t,n,e,o,r,i,c,a,l=s[5]&&im(s),u=s[4]&&am(s);e=new yt.Item({props:{onSelect:s[15],$$slots:{iconLeft:[HS],default:[BS]},$$scope:{ctx:s}}}),r=new yt.Item({props:{onSelect:s[16],$$slots:{iconLeft:[WS],default:[jS]},$$scope:{ctx:s}}});let m=s[2]&&cm(s);return{c(){l&&l.c(),t=z(),u&&u.c(),n=z(),g(e.$$.fragment),o=z(),g(r.$$.fragment),i=z(),m&&m.c(),c=gt()},m(p,f){l&&l.m(p,f),_(p,t,f),u&&u.m(p,f),_(p,n,f),h(e,p,f),_(p,o,f),h(r,p,f),_(p,i,f),m&&m.m(p,f),_(p,c,f),a=!0},p(p,f){p[5]?l?(l.p(p,f),32&f&&d(l,1)):(l=im(p),l.c(),d(l,1),l.m(t.parentNode,t)):l&&(Y(),$(l,1,1,()=>{l=null}),K()),p[4]?u?(u.p(p,f),16&f&&d(u,1)):(u=am(p),u.c(),d(u,1),u.m(n.parentNode,n)):u&&(Y(),$(u,1,1,()=>{u=null}),K());const x={};524418&f&&(x.$$scope={dirty:f,ctx:p}),e.$set(x);const A={};64&f&&(A.onSelect=p[16]),524546&f&&(A.$$scope={dirty:f,ctx:p}),r.$set(A),p[2]?m?(m.p(p,f),4&f&&d(m,1)):(m=cm(p),m.c(),d(m,1),m.m(c.parentNode,c)):m&&(Y(),$(m,1,1,()=>{m=null}),K())},i(p){a||(d(l),d(u),d(e.$$.fragment,p),d(r.$$.fragment,p),d(m),a=!0)},o(p){$(l),$(u),$(e.$$.fragment,p),$(r.$$.fragment,p),$(m),a=!1},d(p){p&&(y(t),y(n),y(o),y(i),y(c)),l&&l.d(p),u&&u.d(p),v(e,p),v(r,p),m&&m.d(p)}}}function KS(s){let t,n,e,o;return t=new yt.Trigger({props:{$$slots:{default:[RS]},$$scope:{ctx:s}}}),e=new yt.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[YS]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};524288&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};524799&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function XS(s){let t,n,e;function o(i){s[17](i)}let r={nested:!1,$$slots:{default:[KS]},$$scope:{ctx:s}};return s[6]!==void 0&&(r.requestClose=s[6]),t=new yt.Root({props:r}),Gt.push(()=>ke(t,"requestClose",o)),{c(){g(t.$$.fragment)},m(i,c){h(t,i,c),e=!0},p(i,[c]){const a={};524799&c&&(a.$$scope={dirty:c,ctx:i}),!n&&64&c&&(n=!0,a.requestClose=i[6],De(()=>n=!1)),t.$set(a)},i(i){e||(d(t.$$.fragment,i),e=!0)},o(i){$(t.$$.fragment,i),e=!1},d(i){v(t,i)}}}function JS(s,t,n){let e,o,{agentId:r}=t,{selectedBranch:i}=t,{isPinned:c=!1}=t,{togglePinned:a}=t,{enableRename:l=!1}=t,{isEditing:u=!1}=t,m=()=>{};const p=Fe(new Map);kt(s,p,M=>n(7,e=M));const f=Fe(new Map);kt(s,f,M=>n(8,o=M));const x=Mt(on.key);function A(){navigator.clipboard.writeText(r),p.update(M=>(M.set(r,"Copied!"),M)),setTimeout(()=>{p.update(M=>(M.delete(r),M))},1e3)}async function C(){try{const M=await(x==null?void 0:x.getConversationUrl(r));M&&navigator.clipboard.writeText(M),f.update(S=>(S.set(r,"Link copied!"),S)),setTimeout(()=>{f.update(S=>(S.delete(r),S))},1e3)}catch(M){console.error("Failed to get conversation URL: ",M)}}return s.$$set=M=>{"agentId"in M&&n(1,r=M.agentId),"selectedBranch"in M&&n(2,i=M.selectedBranch),"isPinned"in M&&n(3,c=M.isPinned),"togglePinned"in M&&n(4,a=M.togglePinned),"enableRename"in M&&n(5,l=M.enableRename),"isEditing"in M&&n(0,u=M.isEditing)},[u,r,i,c,a,l,m,e,o,p,f,A,C,()=>{setTimeout(()=>{n(0,u=!0)},20)},()=>{a()},()=>{A()},()=>{C(),m()},function(M){m=M,n(6,m)}]}class K1 extends ct{constructor(t){super(),lt(this,t,JS,XS,it,{agentId:1,selectedBranch:2,isPinned:3,togglePinned:4,enableRename:5,isEditing:0})}}function lm(s){let t,n,e,o;n=new Ot({props:{size:s[4],weight:s[9],color:s[10],$$slots:{default:[tT]},$$scope:{ctx:s}}});let r=s[8]&&um(s);return{c(){t=D("div"),g(n.$$.fragment),e=z(),r&&r.c(),k(t,"class","c-inline-edit-text-augment__input svelte-jmt5pf")},m(i,c){_(i,t,c),h(n,t,null),P(t,e),r&&r.m(t,null),o=!0},p(i,c){const a={};16&c[0]&&(a.size=i[4]),512&c[0]&&(a.weight=i[9]),1024&c[0]&&(a.color=i[10]),41100&c[0]|64&c[1]&&(a.$$scope={dirty:c,ctx:i}),n.$set(a),i[8]?r?(r.p(i,c),256&c[0]&&d(r,1)):(r=um(i),r.c(),d(r,1),r.m(t,null)):r&&(Y(),$(r,1,1,()=>{r=null}),K())},i(i){o||(d(n.$$.fragment,i),d(r),o=!0)},o(i){$(n.$$.fragment,i),$(r),o=!1},d(i){i&&y(t),v(n),r&&r.d()}}}function ZS(s){let t,n,e;return{c(){t=D("input"),qn(t,"field-sizing","content"),k(t,"class","c-inline-edit-text-augment__input-field svelte-jmt5pf"),k(t,"type","text"),k(t,"placeholder",s[2]),t.disabled=s[3]},m(o,r){_(o,t,r),s[33](t),vr(t,s[15]),n||(e=[Et(t,"input",s[34]),Et(t,"keydown",s[16]),Et(t,"blur",s[19])],n=!0)},p(o,r){4&r[0]&&k(t,"placeholder",o[2]),8&r[0]&&(t.disabled=o[3]),32768&r[0]&&t.value!==o[15]&&vr(t,o[15])},d(o){o&&y(t),s[33](null),n=!1,Ye(e)}}}function QS(s){let t,n,e;return{c(){t=D("textarea"),qn(t,"field-sizing","content"),k(t,"class","c-inline-edit-text-augment__input-field svelte-jmt5pf"),k(t,"placeholder",s[2]),t.disabled=s[3],k(t,"rows","1")},m(o,r){_(o,t,r),s[31](t),vr(t,s[15]),n||(e=[Et(t,"input",s[32]),Et(t,"keydown",s[16]),Et(t,"blur",s[19])],n=!0)},p(o,r){4&r[0]&&k(t,"placeholder",o[2]),8&r[0]&&(t.disabled=o[3]),32768&r[0]&&vr(t,o[15])},d(o){o&&y(t),s[31](null),n=!1,Ye(e)}}}function tT(s){let t;function n(r,i){return r[7]?QS:ZS}let e=n(s),o=e(s);return{c(){o.c(),t=gt()},m(r,i){o.m(r,i),_(r,t,i)},p(r,i){e===(e=n(r))&&o?o.p(r,i):(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&y(t),o.d(r)}}}function um(s){let t,n;return t=new se({props:{size:1,variant:s[11],color:s[12],disabled:s[3],$$slots:{default:[eT]},$$scope:{ctx:s}}}),t.$on("click",s[18]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};2048&o[0]&&(r.variant=e[11]),4096&o[0]&&(r.color=e[12]),8&o[0]&&(r.disabled=e[3]),64&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function eT(s){let t,n;return t=new pa({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function nT(s){let t,n=(s[0]||s[2])+"";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){5&o[0]&&n!==(n=(e[0]||e[2])+"")&&ht(t,n)},d(e){e&&y(t)}}}function oT(s){let t,n,e,o,r,i,c,a,l,u=s[6]&&!s[3]&&s[1]&&lm(s);const m=s[30].default,p=Xt(m,s,s[37],null),f=p||function(x){let A,C;return A=new Ot({props:{size:x[4],weight:x[9],color:x[10],value:x[0],placeholder:x[2],$$slots:{default:[nT]},$$scope:{ctx:x}}}),{c(){g(A.$$.fragment)},m(M,S){h(A,M,S),C=!0},p(M,S){const L={};16&S[0]&&(L.size=M[4]),512&S[0]&&(L.weight=M[9]),1024&S[0]&&(L.color=M[10]),1&S[0]&&(L.value=M[0]),4&S[0]&&(L.placeholder=M[2]),5&S[0]|64&S[1]&&(L.$$scope={dirty:S,ctx:M}),A.$set(L)},i(M){C||(d(A.$$.fragment,M),C=!0)},o(M){$(A.$$.fragment,M),C=!1},d(M){v(A,M)}}}(s);return{c(){t=D("div"),u&&u.c(),n=z(),e=D("div"),f&&f.c(),k(e,"class","c-inline-edit-text-augment__text svelte-jmt5pf"),k(e,"role","button"),k(e,"tabindex",o=s[6]&&!s[3]?0:void 0),k(e,"aria-label",r=s[0]||s[2]),xt(e,"c-inline-edit-text-augment__text--editable",s[6]&&!s[3]),k(t,"class",i="c-inline-edit-text-augment "+s[5]+" svelte-jmt5pf"),xt(t,"c-inline-edit-text-augment--is-editing",s[1]),xt(t,"c-inline-edit-text-augment--disabled",s[3]),xt(t,"c-inline-edit-text-augment--is-editable",s[6])},m(x,A){_(x,t,A),u&&u.m(t,null),P(t,n),P(t,e),f&&f.m(e,null),s[36](t),c=!0,a||(l=[Et(e,"click",s[20]),Et(e,"keydown",s[35])],a=!0)},p(x,A){x[6]&&!x[3]&&x[1]?u?(u.p(x,A),74&A[0]&&d(u,1)):(u=lm(x),u.c(),d(u,1),u.m(t,n)):u&&(Y(),$(u,1,1,()=>{u=null}),K()),p?p.p&&(!c||64&A[1])&&Jt(p,m,x,x[37],c?Qt(m,x[37],A,null):Zt(x[37]),null):f&&f.p&&(!c||1557&A[0])&&f.p(x,c?A:[-1,-1]),(!c||72&A[0]&&o!==(o=x[6]&&!x[3]?0:void 0))&&k(e,"tabindex",o),(!c||5&A[0]&&r!==(r=x[0]||x[2]))&&k(e,"aria-label",r),(!c||72&A[0])&&xt(e,"c-inline-edit-text-augment__text--editable",x[6]&&!x[3]),(!c||32&A[0]&&i!==(i="c-inline-edit-text-augment "+x[5]+" svelte-jmt5pf"))&&k(t,"class",i),(!c||34&A[0])&&xt(t,"c-inline-edit-text-augment--is-editing",x[1]),(!c||40&A[0])&&xt(t,"c-inline-edit-text-augment--disabled",x[3]),(!c||96&A[0])&&xt(t,"c-inline-edit-text-augment--is-editable",x[6])},i(x){c||(d(u),d(f,x),c=!0)},o(x){$(u),$(f,x),c=!1},d(x){x&&y(t),u&&u.d(),f&&f.d(x),s[36](null),a=!1,Ye(l)}}}function rT(s,t,n){let e,o,{$$slots:r={},$$scope:i}=t,{value:c=""}=t,{placeholder:a=""}=t,{disabled:l=!1}=t,{size:u=2}=t,{class:m=""}=t,{isEditing:p=!1}=t,{isEditable:f=!0}=t,{multiline:x=!0}=t,{showCommitButton:A=!0}=t,{commitOnBlur:C=!0}=t,{commitOnEnter:M=!0}=t,{allowCtrlEnterForNewline:S=!0}=t,{doubleClickToEdit:L=!0}=t,{singleClickToEdit:I=!1}=t,{weight:X}=t,{color:j}=t,{onCancelEdit:H=G=>{}}=t,{onStartEdit:J=()=>{}}=t,{onChange:U=(G,Tt)=>{}}=t,{outsideNode:O}=t,{commitButtonVariant:Z="classic"}=t,{commitButtonColor:et="accent"}=t,Q=c;function ut(){n(15,Q=c),n(1,p=!1),H(c)}function rt(){f&&!l&&(p||(J(),n(1,p=!0)),setTimeout(()=>{e==null||e.focus()},0))}function mt(){const G=Q.trim(),Tt=c;G!==Tt&&(n(0,c=G),U(G,Tt)),setTimeout(()=>{e==null||e.blur()},0),n(1,p=!1)}return En(()=>{const G=Tt=>{var Bt;p&&((Bt=O||o)==null?void 0:Bt.contains(Tt.target))===!1&&(C?mt():ut())};return document.addEventListener("click",G),()=>{document.removeEventListener("click",G)}}),s.$$set=G=>{"value"in G&&n(0,c=G.value),"placeholder"in G&&n(2,a=G.placeholder),"disabled"in G&&n(3,l=G.disabled),"size"in G&&n(4,u=G.size),"class"in G&&n(5,m=G.class),"isEditing"in G&&n(1,p=G.isEditing),"isEditable"in G&&n(6,f=G.isEditable),"multiline"in G&&n(7,x=G.multiline),"showCommitButton"in G&&n(8,A=G.showCommitButton),"commitOnBlur"in G&&n(21,C=G.commitOnBlur),"commitOnEnter"in G&&n(22,M=G.commitOnEnter),"allowCtrlEnterForNewline"in G&&n(23,S=G.allowCtrlEnterForNewline),"doubleClickToEdit"in G&&n(24,L=G.doubleClickToEdit),"singleClickToEdit"in G&&n(25,I=G.singleClickToEdit),"weight"in G&&n(9,X=G.weight),"color"in G&&n(10,j=G.color),"onCancelEdit"in G&&n(26,H=G.onCancelEdit),"onStartEdit"in G&&n(27,J=G.onStartEdit),"onChange"in G&&n(28,U=G.onChange),"outsideNode"in G&&n(29,O=G.outsideNode),"commitButtonVariant"in G&&n(11,Z=G.commitButtonVariant),"commitButtonColor"in G&&n(12,et=G.commitButtonColor),"$$scope"in G&&n(37,i=G.$$scope)},s.$$.update=()=>{3&s.$$.dirty[0]&&(p||n(15,Q=c)),2&s.$$.dirty[0]&&p&&rt()},[c,p,a,l,u,m,f,x,A,X,j,Z,et,e,o,Q,function(G){M&&G.key==="Enter"?x&&S&&(G.ctrlKey||G.metaKey||G.altKey||G.shiftKey)||(G.preventDefault(),mt()):G.key==="Escape"&&(G.preventDefault(),ut())},rt,mt,function(){C&&p&&mt()},function(G){(I||L&&G.detail===2)&&rt()},C,M,S,L,I,H,J,U,O,r,function(G){Gt[G?"unshift":"push"](()=>{e=G,n(13,e)})},function(){Q=this.value,n(15,Q),n(1,p),n(0,c)},function(G){Gt[G?"unshift":"push"](()=>{e=G,n(13,e)})},function(){Q=this.value,n(15,Q),n(1,p),n(0,c)},G=>{G.key==="Enter"&&rt()},function(G){Gt[G?"unshift":"push"](()=>{o=G,n(14,o)})},i]}class sT extends ct{constructor(t){super(),lt(this,t,rT,oT,it,{value:0,placeholder:2,disabled:3,size:4,class:5,isEditing:1,isEditable:6,multiline:7,showCommitButton:8,commitOnBlur:21,commitOnEnter:22,allowCtrlEnterForNewline:23,doubleClickToEdit:24,singleClickToEdit:25,weight:9,color:10,onCancelEdit:26,onStartEdit:27,onChange:28,outsideNode:29,commitButtonVariant:11,commitButtonColor:12},null,[-1,-1])}}const iT=s=>({}),dm=s=>({}),aT=s=>({}),$m=s=>({}),cT=s=>({}),mm=s=>({}),lT=s=>({}),pm=s=>({}),uT=s=>({}),fm=s=>({}),dT=s=>({}),gm=s=>({}),$T=s=>({}),hm=s=>({});function vm(s){let t,n;return t=new se({props:{size:.5,class:"c-thread-header__title-icon",variant:"ghost-block",disabled:!s[2],color:"neutral",title:"Edit Thread Title",$$slots:{default:[mT]},$$scope:{ctx:s}}}),t.$on("click",s[9]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.disabled=!e[2]),32768&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function mT(s){let t,n;const e=s[11].icon,o=Xt(e,s,s[15],gm);return{c(){t=D("span"),o&&o.c(),k(t,"class","c-thread-header__title-icon-content")},m(r,i){_(r,t,i),o&&o.m(t,null),n=!0},p(r,i){o&&o.p&&(!n||32768&i)&&Jt(o,e,r,r[15],n?Qt(e,r[15],i,dT):Zt(r[15]),gm)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&y(t),o&&o.d(r)}}}function wm(s){let t;const n=s[11].title,e=Xt(n,s,s[15],pm),o=e||function(r){let i,c;return i=new Nt({props:{content:"Rename",nested:!1,hasPointerEvents:!1,class:"c-thread-header__title-text",$$slots:{default:[pT]},$$scope:{ctx:r}}}),{c(){g(i.$$.fragment)},m(a,l){h(i,a,l),c=!0},p(a,l){const u={};32935&l&&(u.$$scope={dirty:l,ctx:a}),i.$set(u)},i(a){c||(d(i.$$.fragment,a),c=!0)},o(a){$(i.$$.fragment,a),c=!1},d(a){v(i,a)}}}(s);return{c(){o&&o.c()},m(r,i){o&&o.m(r,i),t=!0},p(r,i){e?e.p&&(!t||32768&i)&&Jt(e,n,r,r[15],t?Qt(n,r[15],i,lT):Zt(r[15]),pm):o&&o.p&&(!t||167&i)&&o.p(r,t?i:-1)},i(r){t||(d(o,r),t=!0)},o(r){$(o,r),t=!1},d(r){o&&o.d(r)}}}function pT(s){let t,n,e;function o(i){s[13](i)}let r={outsideNode:s[7],size:1,weight:"bold",value:s[1]||"New Thread",color:"primary",isEditable:s[2],showCommitButton:!1,singleClickToEdit:!0,onChange:s[5]};return s[0]!==void 0&&(r.isEditing=s[0]),t=new sT({props:r}),Gt.push(()=>ke(t,"isEditing",o)),{c(){g(t.$$.fragment)},m(i,c){h(t,i,c),e=!0},p(i,c){const a={};128&c&&(a.outsideNode=i[7]),2&c&&(a.value=i[1]||"New Thread"),4&c&&(a.isEditable=i[2]),32&c&&(a.onChange=i[5]),!n&&1&c&&(n=!0,a.isEditing=i[0],De(()=>n=!1)),t.$set(a)},i(i){e||(d(t.$$.fragment,i),e=!0)},o(i){$(t.$$.fragment,i),e=!1},d(i){v(t,i)}}}function ym(s){let t;const n=s[11]["title-actions"],e=Xt(n,s,s[15],mm);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||32768&r)&&Jt(e,n,o,o[15],t?Qt(n,o[15],r,cT):Zt(o[15]),mm)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function xm(s){let t,n;const e=s[11]["info-row"],o=Xt(e,s,s[15],$m);return{c(){t=D("div"),o&&o.c(),k(t,"class","c-thread-header__info-row svelte-16e10uw")},m(r,i){_(r,t,i),o&&o.m(t,null),n=!0},p(r,i){o&&o.p&&(!n||32768&i)&&Jt(o,e,r,r[15],n?Qt(e,r[15],i,aT):Zt(r[15]),$m)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&y(t),o&&o.d(r)}}}function fT(s){let t,n,e,o,r,i,c,a,l,u,m,p,f,x;_n(s[12]);const A=s[11].banner,C=Xt(A,s,s[15],hm);let M=s[4]&&vm(s);const S=s[11]["title-notice"],L=Xt(S,s,s[15],fm);let I=!s[3]&&wm(s),X=!s[0]&&ym(s),j=!s[8]&&xm(s);const H=s[11].status,J=Xt(H,s,s[15],dm);return{c(){t=D("div"),n=D("div"),C&&C.c(),e=z(),o=D("div"),M&&M.c(),r=z(),i=D("div"),L&&L.c(),c=z(),I&&I.c(),a=z(),X&&X.c(),l=z(),j&&j.c(),u=z(),m=D("div"),J&&J.c(),k(n,"class","c-thread-header__banner svelte-16e10uw"),k(i,"class","c-thread-header__title-main svelte-16e10uw"),k(o,"class","c-thread-header__title svelte-16e10uw"),k(m,"class","c-thread-header__status svelte-16e10uw"),k(t,"class","c-thread-header svelte-16e10uw"),xt(t,"c-thread-header--is-editing",s[2]&&s[0]),xt(t,"c-thread-header--is-editable",s[2])},m(U,O){_(U,t,O),P(t,n),C&&C.m(n,null),P(t,e),P(t,o),M&&M.m(o,null),P(o,r),P(o,i),L&&L.m(i,null),P(i,c),I&&I.m(i,null),P(o,a),X&&X.m(o,null),P(t,l),j&&j.m(t,null),P(t,u),P(t,m),J&&J.m(m,null),s[14](t),p=!0,f||(x=Et(window,"resize",s[12]),f=!0)},p(U,[O]){C&&C.p&&(!p||32768&O)&&Jt(C,A,U,U[15],p?Qt(A,U[15],O,$T):Zt(U[15]),hm),U[4]?M?(M.p(U,O),16&O&&d(M,1)):(M=vm(U),M.c(),d(M,1),M.m(o,r)):M&&(Y(),$(M,1,1,()=>{M=null}),K()),L&&L.p&&(!p||32768&O)&&Jt(L,S,U,U[15],p?Qt(S,U[15],O,uT):Zt(U[15]),fm),U[3]?I&&(Y(),$(I,1,1,()=>{I=null}),K()):I?(I.p(U,O),8&O&&d(I,1)):(I=wm(U),I.c(),d(I,1),I.m(i,null)),U[0]?X&&(Y(),$(X,1,1,()=>{X=null}),K()):X?(X.p(U,O),1&O&&d(X,1)):(X=ym(U),X.c(),d(X,1),X.m(o,null)),U[8]?j&&(Y(),$(j,1,1,()=>{j=null}),K()):j?(j.p(U,O),256&O&&d(j,1)):(j=xm(U),j.c(),d(j,1),j.m(t,u)),J&&J.p&&(!p||32768&O)&&Jt(J,H,U,U[15],p?Qt(H,U[15],O,iT):Zt(U[15]),dm),(!p||5&O)&&xt(t,"c-thread-header--is-editing",U[2]&&U[0]),(!p||4&O)&&xt(t,"c-thread-header--is-editable",U[2])},i(U){p||(d(C,U),d(M),d(L,U),d(I),d(X),d(j),d(J,U),p=!0)},o(U){$(C,U),$(M),$(L,U),$(I),$(X),$(j),$(J,U),p=!1},d(U){U&&y(t),C&&C.d(U),M&&M.d(),L&&L.d(U),I&&I.d(),X&&X.d(),j&&j.d(),J&&J.d(U),s[14](null),f=!1,x()}}}function gT(s,t,n){let e,o,{$$slots:r={},$$scope:i}=t,{title:c=""}=t,{isSquished:a=!1}=t,{isEditing:l=!1}=t,{isEditable:u=!0}=t,{hideTitle:m=!1}=t,{showEditIcon:p=!0}=t,{onRename:f=A=>{}}=t,x=0;return s.$$set=A=>{"title"in A&&n(1,c=A.title),"isSquished"in A&&n(10,a=A.isSquished),"isEditing"in A&&n(0,l=A.isEditing),"isEditable"in A&&n(2,u=A.isEditable),"hideTitle"in A&&n(3,m=A.hideTitle),"showEditIcon"in A&&n(4,p=A.showEditIcon),"onRename"in A&&n(5,f=A.onRename),"$$scope"in A&&n(15,i=A.$$scope)},s.$$.update=()=>{1088&s.$$.dirty&&n(8,e=a||x<700)},[l,c,u,m,p,f,x,o,e,function(){n(0,l=u&&!0)},a,r,function(){n(6,x=window.innerHeight)},function(A){l=A,n(0,l)},function(A){Gt[A?"unshift":"push"](()=>{o=A,n(7,o)})},i]}class X1 extends ct{constructor(t){super(),lt(this,t,gT,fT,it,{title:1,isSquished:10,isEditing:0,isEditable:2,hideTitle:3,showEditIcon:4,onRename:5})}}function bm(s){let t,n,e,o;function r(c){s[17](c)}let i={title:s[9]?"Generate a setup script":s[6],hideTitle:s[9],isEditable:!s[9],showEditIcon:!1,onRename:s[13],$$slots:{"info-row":[ET],"title-actions":[_T],"title-notice":[bT],banner:[yT],default:[hT]},$$scope:{ctx:s}};return s[4]!==void 0&&(i.isEditing=s[4]),n=new X1({props:i}),Gt.push(()=>ke(n,"isEditing",r)),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-agent-header svelte-12lv7h"),xt(t,"c-agent-header--setup-script",s[9]),xt(t,"is-in-remote",s[8])},m(c,a){_(c,t,a),h(n,t,null),o=!0},p(c,a){const l={};576&a&&(l.title=c[9]?"Generate a setup script":c[6]),512&a&&(l.hideTitle=c[9]),512&a&&(l.isEditable=!c[9]),264119&a&&(l.$$scope={dirty:a,ctx:c}),!e&&16&a&&(e=!0,l.isEditing=c[4],De(()=>e=!1)),n.$set(l),(!o||512&a)&&xt(t,"c-agent-header--setup-script",c[9]),(!o||256&a)&&xt(t,"is-in-remote",c[8])},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&y(t),v(n)}}}function _m(s){let t,n;return t=new ii({props:{slot:"icon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function hT(s){let t,n,e=s[9]&&_m();return{c(){e&&e.c(),t=gt()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,r){o[9]?e?512&r&&d(e,1):(e=_m(),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function vT(s){let t,n,e,o,r;return e=new Jp({}),{c(){t=D("span"),n=D("div"),g(e.$$.fragment),o=V(`
            Generate a setup script`),k(n,"class","c-setup-script-badge svelte-12lv7h"),k(t,"class","c-agent-header-banner__text svelte-12lv7h")},m(i,c){_(i,t,c),P(t,n),h(e,n,null),P(t,o),r=!0},i(i){r||(d(e.$$.fragment,i),r=!0)},o(i){$(e.$$.fragment,i),r=!1},d(i){i&&y(t),v(e)}}}function wT(s){let t,n,e,o,r;return n=new ii({}),{c(){t=D("div"),g(n.$$.fragment),e=z(),o=D("div"),o.innerHTML='<div class="c-agent-header-banner__text svelte-12lv7h">Running in the cloud</div> <div class="c-agent-header-banner__text c-agent-header-banner__text--secondary svelte-12lv7h">Workspace opened via SSH in this VSCode window</div>',k(o,"class","c-agent-header-banner__stack svelte-12lv7h"),k(t,"class","c-agent-header-banner__with-icon svelte-12lv7h")},m(i,c){_(i,t,c),h(n,t,null),P(t,e),P(t,o),r=!0},i(i){r||(d(n.$$.fragment,i),r=!0)},o(i){$(n.$$.fragment,i),r=!1},d(i){i&&y(t),v(n)}}}function Cm(s){let t,n;return t=new K1({props:{agentId:s[1],selectedBranch:s[5],isPinned:s[7],togglePinned:s[12]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.agentId=e[1]),32&o&&(r.selectedBranch=e[5]),128&o&&(r.isPinned=e[7]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function yT(s){var u;let t,n,e,o,r;const i=[wT,vT],c=[];function a(m,p){var f;return m[8]?0:(f=m[0])!=null&&f.is_setup_script_agent?1:-1}~(t=a(s))&&(n=c[t]=i[t](s));let l=s[1]&&(s[8]||((u=s[0])==null?void 0:u.is_setup_script_agent))&&Cm(s);return{c(){n&&n.c(),e=z(),o=D("div"),l&&l.c(),k(o,"class","c-agent-header__actions svelte-12lv7h")},m(m,p){~t&&c[t].m(m,p),_(m,e,p),_(m,o,p),l&&l.m(o,null),r=!0},p(m,p){var x;let f=t;t=a(m),t!==f&&(n&&(Y(),$(c[f],1,1,()=>{c[f]=null}),K()),~t?(n=c[t],n||(n=c[t]=i[t](m),n.c()),d(n,1),n.m(e.parentNode,e)):n=null),m[1]&&(m[8]||(x=m[0])!=null&&x.is_setup_script_agent)?l?(l.p(m,p),259&p&&d(l,1)):(l=Cm(m),l.c(),d(l,1),l.m(o,null)):l&&(Y(),$(l,1,1,()=>{l=null}),K())},i(m){r||(d(n),d(l),r=!0)},o(m){$(n),$(l),r=!1},d(m){m&&(y(e),y(o)),~t&&c[t].d(m),l&&l.d()}}}function Am(s){let t,n,e;return n=new Ot({props:{size:1,truncate:!0,weight:"medium",$$slots:{default:[xT]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-agent-title-content svelte-12lv7h")},m(o,r){_(o,t,r),h(n,t,null),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function xT(s){let t,n,e,o;return{c(){t=V("We've tasked an agent to generate a setup script for your repository."),n=D("span"),n.textContent="..",e=z(),o=D("span"),o.textContent=`Once created, save it to use in a new remote agent, to install dependencies &
                configure the env before the agent starts.`,k(n,"class","c-agent-title-content__long-text-alternative svelte-12lv7h"),k(o,"class","c-agent-title-content__long-text svelte-12lv7h")},m(r,i){_(r,t,i),_(r,n,i),_(r,e,i),_(r,o,i)},p:N,d(r){r&&(y(t),y(n),y(e),y(o))}}}function bT(s){let t,n,e=s[9]&&Am(s);return{c(){t=D("div"),e&&e.c(),k(t,"slot","title-notice")},m(o,r){_(o,t,r),e&&e.m(t,null),n=!0},p(o,r){o[9]?e?512&r&&d(e,1):(e=Am(o),e.c(),d(e,1),e.m(t,null)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d()}}}function Mm(s){let t,n,e;function o(i){s[16](i)}let r={agentId:s[1],selectedBranch:s[5],isPinned:s[7],togglePinned:s[12],enableRename:!0};return s[4]!==void 0&&(r.isEditing=s[4]),t=new K1({props:r}),Gt.push(()=>ke(t,"isEditing",o)),{c(){g(t.$$.fragment)},m(i,c){h(t,i,c),e=!0},p(i,c){const a={};2&c&&(a.agentId=i[1]),32&c&&(a.selectedBranch=i[5]),128&c&&(a.isPinned=i[7]),!n&&16&c&&(n=!0,a.isEditing=i[4],De(()=>n=!1)),t.$set(a)},i(i){e||(d(t.$$.fragment,i),e=!0)},o(i){$(t.$$.fragment,i),e=!1},d(i){v(t,i)}}}function _T(s){var o;let t,n,e=s[1]&&!(s[8]||(o=s[0])!=null&&o.is_setup_script_agent)&&Mm(s);return{c(){t=D("div"),e&&e.c(),k(t,"slot","title-actions"),k(t,"class","c-agent-header__menu svelte-12lv7h")},m(r,i){_(r,t,i),e&&e.m(t,null),n=!0},p(r,i){var c;!r[1]||r[8]||(c=r[0])!=null&&c.is_setup_script_agent?e&&(Y(),$(e,1,1,()=>{e=null}),K()):e?(e.p(r,i),259&i&&d(e,1)):(e=Mm(r),e.c(),d(e,1),e.m(t,null))},i(r){n||(d(e),n=!0)},o(r){$(e),n=!1},d(r){r&&y(t),e&&e.d()}}}function CT(s){let t;return{c(){t=V(s[10])},m(n,e){_(n,t,e)},p(n,e){1024&e&&ht(t,n[10])},d(n){n&&y(t)}}}function AT(s){let t,n,e;return n=new Ot({props:{size:1,$$slots:{default:[CT]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-agent-info-value svelte-12lv7h")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};263168&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function MT(s){let t,n,e,o,r;return n=new Kg({}),o=new Nt({props:{content:`Repository: ${s[2]}`,triggerOn:[te.Hover],$$slots:{default:[AT]},$$scope:{ctx:s}}}),{c(){t=D("a"),g(n.$$.fragment),e=z(),g(o.$$.fragment),k(t,"href",s[2]),k(t,"class","c-agent-info-item svelte-12lv7h")},m(i,c){_(i,t,c),h(n,t,null),P(t,e),h(o,t,null),r=!0},p(i,c){const a={};4&c&&(a.content=`Repository: ${i[2]}`),263168&c&&(a.$$scope={dirty:c,ctx:i}),o.$set(a),(!r||4&c)&&k(t,"href",i[2])},i(i){r||(d(n.$$.fragment,i),d(o.$$.fragment,i),r=!0)},o(i){$(n.$$.fragment,i),$(o.$$.fragment,i),r=!1},d(i){i&&y(t),v(n),v(o)}}}function kT(s){let t;return{c(){t=V(s[5])},m(n,e){_(n,t,e)},p(n,e){32&e&&ht(t,n[5])},d(n){n&&y(t)}}}function ST(s){let t,n,e;return n=new Ot({props:{size:1,$$slots:{default:[kT]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-agent-info-value svelte-12lv7h")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};262176&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function TT(s){let t,n,e,o,r,i;return n=new V1({}),o=new Nt({props:{content:`Started on branch: ${s[5]}`,triggerOn:[te.Hover],$$slots:{default:[ST]},$$scope:{ctx:s}}}),{c(){t=D("a"),g(n.$$.fragment),e=z(),g(o.$$.fragment),k(t,"href",r=`${s[2]}/tree/${s[5]}`),k(t,"class","c-agent-info-item svelte-12lv7h")},m(c,a){_(c,t,a),h(n,t,null),P(t,e),h(o,t,null),i=!0},p(c,a){const l={};32&a&&(l.content=`Started on branch: ${c[5]}`),262176&a&&(l.$$scope={dirty:a,ctx:c}),o.$set(l),(!i||36&a&&r!==(r=`${c[2]}/tree/${c[5]}`))&&k(t,"href",r)},i(c){i||(d(n.$$.fragment,c),d(o.$$.fragment,c),i=!0)},o(c){$(n.$$.fragment,c),$(o.$$.fragment,c),i=!1},d(c){c&&y(t),v(n),v(o)}}}function ET(s){let t,n,e,o,r;return n=new ao.Root({props:{color:"neutral",radius:"full",$$slots:{default:[MT]},$$scope:{ctx:s}}}),o=new ao.Root({props:{color:"neutral",radius:"full",$$slots:{default:[TT]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),e=z(),g(o.$$.fragment),k(t,"slot","info-row"),k(t,"class","c-agent-info-row svelte-12lv7h")},m(i,c){_(i,t,c),h(n,t,null),P(t,e),h(o,t,null),r=!0},p(i,c){const a={};263172&c&&(a.$$scope={dirty:c,ctx:i}),n.$set(a);const l={};262180&c&&(l.$$scope={dirty:c,ctx:i}),o.$set(l)},i(i){r||(d(n.$$.fragment,i),d(o.$$.fragment,i),r=!0)},o(i){$(n.$$.fragment,i),$(o.$$.fragment,i),r=!1},d(i){i&&y(t),v(n),v(o)}}}function IT(s){let t,n,e,o;_n(s[15]);let r=s[0]&&bm(s);return{c(){r&&r.c(),t=gt()},m(i,c){r&&r.m(i,c),_(i,t,c),n=!0,e||(o=Et(window,"resize",s[15]),e=!0)},p(i,[c]){i[0]?r?(r.p(i,c),1&c&&d(r,1)):(r=bm(i),r.c(),d(r,1),r.m(t.parentNode,t)):r&&(Y(),$(r,1,1,()=>{r=null}),K())},i(i){n||(d(r),n=!0)},o(i){$(r),n=!1},d(i){i&&y(t),r&&r.d(i),e=!1,o()}}}function LT(s,t,n){let e,o,r,i,c,a,l,u,m,p,f=0;const x=Mt(on.key);kt(s,x,C=>n(14,p=C));let A=!1;return s.$$.update=()=>{var C,M,S,L,I,X;16384&s.$$.dirty&&n(0,e=p==null?void 0:p.currentAgent),1&s.$$.dirty&&n(1,o=e==null?void 0:e.remote_agent_id),1&s.$$.dirty&&n(2,r=((S=(M=(C=e==null?void 0:e.workspace_setup)==null?void 0:C.starting_files)==null?void 0:M.github_commit_ref)==null?void 0:S.repository_url)||""),4&s.$$.dirty&&n(10,i=ta(r)),1&s.$$.dirty&&n(6,c=(e==null?void 0:e.title)??(e==null?void 0:e.session_summary)??""),1&s.$$.dirty&&n(9,a=(e==null?void 0:e.is_setup_script_agent)||!1),16386&s.$$.dirty&&n(7,l=o&&(p==null?void 0:p.pinnedAgents[o])||!1),16384&s.$$.dirty&&n(8,u=p==null?void 0:p.isRemoteAgentSshWindow),1&s.$$.dirty&&n(5,m=(X=(I=(L=e==null?void 0:e.workspace_setup)==null?void 0:L.starting_files)==null?void 0:I.github_commit_ref)==null?void 0:X.git_ref)},[e,o,r,f,A,m,c,l,u,a,i,x,function(){o&&(x==null||x.toggleAgentPinned(o,l))},async function(C){if(C.trim()&&C!==c&&o)try{x&&await x.updateRemoteAgentTitle(o,C)}catch(M){console.error("Failed to update remote agent title:",M)}},p,function(){n(3,f=window.innerHeight)},function(C){A=C,n(4,A)},function(C){A=C,n(4,A)}]}class RT extends ct{constructor(t){super(),lt(this,t,LT,IT,it,{})}}function DT(s){let t,n;return t=new Ap({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function PT(s){let t,n;return t=new Xg({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function NT(s){let t,n,e,o;const r=[PT,DT],i=[];function c(a,l){return a[1]?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n||(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function km(s){var r;let t,n,e,o;return t=new G1({props:{thread:s[4],type:s[1]?"localAgent":"chat",enableShareService:(r=s[2].flags)==null?void 0:r.enableShareService,onRename:s[8]}}),e=new Qf.Controls({}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(i,c){h(t,i,c),_(i,n,c),h(e,i,c),o=!0},p(i,c){var l;const a={};16&c&&(a.thread=i[4]),2&c&&(a.type=i[1]?"localAgent":"chat"),4&c&&(a.enableShareService=(l=i[2].flags)==null?void 0:l.enableShareService),t.$set(a)},i(i){o||(d(t.$$.fragment,i),d(e.$$.fragment,i),o=!0)},o(i){$(t.$$.fragment,i),$(e.$$.fragment,i),o=!1},d(i){i&&y(n),v(t,i),v(e,i)}}}function FT(s){let t,n,e=!s[5]&&km(s);return{c(){t=D("div"),e&&e.c(),k(t,"slot","title-actions"),k(t,"class","c-thread-header__menu svelte-eyi124")},m(o,r){_(o,t,r),e&&e.m(t,null),n=!0},p(o,r){o[5]?e&&(Y(),$(e,1,1,()=>{e=null}),K()):e?(e.p(o,r),32&r&&d(e,1)):(e=km(o),e.c(),d(e,1),e.m(t,null))},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d()}}}function zT(s){let t,n,e;function o(i){s[12](i)}let r={onRename:s[7],title:s[0],$$slots:{"title-actions":[FT],icon:[NT]},$$scope:{ctx:s}};return s[3]!==void 0&&(r.isEditing=s[3]),t=new X1({props:r}),Gt.push(()=>ke(t,"isEditing",o)),{c(){g(t.$$.fragment)},m(i,c){h(t,i,c),e=!0},p(i,[c]){const a={};1&c&&(a.title=i[0]),16438&c&&(a.$$scope={dirty:c,ctx:i}),!n&&8&c&&(n=!0,a.isEditing=i[3],De(()=>n=!1)),t.$set(a)},i(i){e||(d(t.$$.fragment,i),e=!0)},o(i){$(t.$$.fragment,i),e=!1},d(i){v(t,i)}}}function OT(s,t,n){let e,o,r,i,c,a,l,u;const m=Mt("chatModel");kt(s,m,f=>n(2,u=f));let p=!1;return s.$$.update=()=>{var f,x;4&s.$$.dirty&&n(11,e=u.currentConversationModel),2048&s.$$.dirty&&n(5,o=Sn.isNew(e)),4&s.$$.dirty&&n(10,r=u.currentConversationId||""),2048&s.$$.dirty&&n(1,i=((f=e==null?void 0:e.extraData)==null?void 0:f.isAgentConversation)===!0),1028&s.$$.dirty&&n(9,c=u.conversations[r]),514&s.$$.dirty&&n(0,a=(c==null?void 0:c.name)||((x=((c==null?void 0:c.chatHistory)||[]).find(A=>A.request_message))==null?void 0:x.request_message)||""||"New "+(i?"Agent":"Chat")),1539&s.$$.dirty&&n(4,l={id:r,type:i?"localAgent":"chat",title:a,isPinned:(c==null?void 0:c.isPinned)||!1,conversation:{id:r,isShareable:(c==null?void 0:c.isShareable)||!1}})},[a,i,u,p,l,o,m,function(f){m.renameConversation(r,f)},function(){setTimeout(()=>{n(3,p=!0)},10)},c,r,e,function(f){p=f,n(3,p)}]}class BT extends ct{constructor(t){super(),lt(this,t,OT,zT,it,{})}}function HT(s){let t,n;return t=new BT({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function UT(s){let t,n;return t=new RT({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function qT(s){let t,n,e,o;const r=[UT,HT],i=[];function c(a,l){var u;return(u=a[1])!=null&&u.isActive?0:a[0]?1:-1}return~(t=c(s))&&(n=i[t]=r[t](s)),{c(){n&&n.c(),e=gt()},m(a,l){~t&&i[t].m(a,l),_(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t!==u&&(n&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K()),~t?(n=i[t],n||(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),~t&&i[t].d(a)}}}function jT(s,t,n){let e,o,r;const i=Mt(on.key);kt(s,i,a=>n(1,r=a));const c=Mt("chatModel");return kt(s,c,a=>n(4,o=a)),s.$$.update=()=>{16&s.$$.dirty&&n(0,e=o.currentConversationId)},[e,r,i,c,o]}class WT extends ct{constructor(t){super(),lt(this,t,jT,qT,it,{})}}function Sm(s){let t,n,e;return n=new Nt({props:{class:"full-width-button",content:s[0],triggerOn:[te.Hover],$$slots:{default:[GT]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","create-agent-footer svelte-34my2")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};1&r&&(i.content=o[0]),131084&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function VT(s){let t;return{c(){t=V("Create agent")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function GT(s){let t,n;return t=new he({props:{variant:"solid",color:"accent",size:2,loading:s[3],disabled:s[2],$$slots:{default:[VT]},$$scope:{ctx:s}}}),t.$on("click",s[5]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.loading=e[3]),4&o&&(r.disabled=e[2]),131072&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function YT(s){let t,n,e=s[1]&&Sm(s);return{c(){e&&e.c(),t=gt()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,[r]){o[1]?e?(e.p(o,r),2&r&&d(e,1)):(e=Sm(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function KT(s,t,n){let e,o,r,i,c,a,l,u,m,p,f,x;const A=Mt(on.key);kt(s,A,L=>n(12,x=L));const C=Mt(xr.key),M=Mt("chatModel"),S=h1(A,M.currentConversationModel,C);return s.$$.update=()=>{var L,I,X;4096&s.$$.dirty&&n(8,e=((L=x.newAgentDraft)==null?void 0:L.commitRef)??null),4096&s.$$.dirty&&n(7,o=((I=x.newAgentDraft)==null?void 0:I.selectedBranch)??null),4096&s.$$.dirty&&(r=((X=x.newAgentDraft)==null?void 0:X.setupScript)??null),4096&s.$$.dirty&&n(3,i=x.isCreatingAgent),4096&s.$$.dirty&&n(11,c=!!x.maxRemoteAgents&&x.agentOverviews.length>=x.maxRemoteAgents),4096&s.$$.dirty&&n(10,a=!!x.maxActiveRemoteAgents&&x.agentOverviews.filter(j=>j.workspace_status===Jr.workspaceRunning).length>=x.maxActiveRemoteAgents),7168&s.$$.dirty&&n(9,l=c?`You have reached the maximum number of ${x.maxRemoteAgents} remote agents.`:a?`You have reached the maximum number of ${x.maxActiveRemoteAgents} active remote agents.`:""),4992&s.$$.dirty&&n(0,u=(()=>{var U;const j=(U=e==null?void 0:e.github_commit_ref)==null?void 0:U.repository_url,H=o==null?void 0:o.name,J=x.remoteAgentCreationError;return l||J||!j&&"Please select a repository"||!H&&"Please select a branch"||(!(j&&H)&&j&&H?"Loading branch data...":"")||""})()),1&s.$$.dirty&&n(2,m=!!u),4096&s.$$.dirty&&n(6,p=x.isActive&&!x.currentAgentId),64&s.$$.dirty&&n(1,f=p)},[u,f,m,i,A,async function(){try{await A.reportRemoteAgentSetupWindowEvent(jr.clickCreateAgent)}catch(L){console.error("Failed to report click create agent event:",L)}try{A.setRemoteAgentCreationError(null),S(),A.saveLastRemoteAgentSetup((e==null?void 0:e.github_commit_ref.repository_url)||null,(o==null?void 0:o.name)||null,(r==null?void 0:r.path)||null)}catch(L){console.error("Failed to create agent:",L)}},p,o,e,l,a,c,x]}class XT extends ct{constructor(t){super(),lt(this,t,KT,YT,it,{})}}function JT(s){let t;return{c(){t=V(`Agent Auto mode allows Augment to run commands automatically on your behalf without your
        explicit approval. Changes can be destructive -- proceed with caution.`)},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function ZT(s){let t;return{c(){t=V("Accept")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function QT(s){let t;return{c(){t=V("Back to Manual Mode")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function tE(s){let t,n,e,o,r,i,c,a;return n=new Ot({props:{size:2,$$slots:{default:[JT]},$$scope:{ctx:s}}}),r=new he({props:{size:1,variant:"solid",color:"accent",class:"c-agent-auto-mode-warning__button",$$slots:{default:[ZT]},$$scope:{ctx:s}}}),r.$on("click",s[1]),c=new he({props:{size:1,variant:"solid",color:"neutral",class:"c-agent-auto-mode-warning__button",$$slots:{default:[QT]},$$scope:{ctx:s}}}),c.$on("click",s[2]),{c(){t=D("div"),g(n.$$.fragment),e=z(),o=D("div"),g(r.$$.fragment),i=z(),g(c.$$.fragment),k(o,"class","c-agent-auto-mode-warning__buttons"),k(t,"class","c-agent-auto-mode-warning__content")},m(l,u){_(l,t,u),h(n,t,null),P(t,e),P(t,o),h(r,o,null),P(o,i),h(c,o,null),a=!0},p(l,u){const m={};8&u&&(m.$$scope={dirty:u,ctx:l}),n.$set(m);const p={};8&u&&(p.$$scope={dirty:u,ctx:l}),r.$set(p);const f={};8&u&&(f.$$scope={dirty:u,ctx:l}),c.$set(f)},i(l){a||(d(n.$$.fragment,l),d(r.$$.fragment,l),d(c.$$.fragment,l),a=!0)},o(l){$(n.$$.fragment,l),$(r.$$.fragment,l),$(c.$$.fragment,l),a=!1},d(l){l&&y(t),v(n),v(r),v(c)}}}function eE(s){let t,n;return t=new Jn({props:{slot:"icon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function nE(s){let t,n,e;return n=new no({props:{color:"warning",variant:"soft",size:1,$$slots:{icon:[eE],default:[tE]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-agent-auto-mode-warning svelte-ffctgo")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,[r]){const i={};8&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function oE(s){const t=Mt("agentConversationModel");return[t,()=>t.acceptAutoMode(),()=>t.rejectAutoMode()]}class rE extends ct{constructor(t){super(),lt(this,t,oE,nE,it,{})}}const sE=s=>({}),Tm=s=>({}),iE=s=>({}),Em=s=>({});function aE(s){let t;return{c(){t=V(s[0])},m(n,e){_(n,t,e)},p(n,e){1&e&&ht(t,n[0])},d(n){n&&y(t)}}}function cE(s){let t,n,e,o;const r=s[2]["left-content"],i=Xt(r,s,s[3],Em),c=i||function(u){let m,p;return m=new Ot({props:{size:1,color:"neutral",$$slots:{default:[aE]},$$scope:{ctx:u}}}),{c(){g(m.$$.fragment)},m(f,x){h(m,f,x),p=!0},p(f,x){const A={};9&x&&(A.$$scope={dirty:x,ctx:f}),m.$set(A)},i(f){p||(d(m.$$.fragment,f),p=!0)},o(f){$(m.$$.fragment,f),p=!1},d(f){v(m,f)}}}(s),a=s[2]["right-content"],l=Xt(a,s,s[3],Tm);return{c(){t=D("div"),c&&c.c(),n=z(),l&&l.c(),k(t,"class",e=wr(`c-chat-input-banner c-chat-input-banner--${s[1]}`)+" svelte-125x5mm")},m(u,m){_(u,t,m),c&&c.m(t,null),P(t,n),l&&l.m(t,null),o=!0},p(u,[m]){i?i.p&&(!o||8&m)&&Jt(i,r,u,u[3],o?Qt(r,u[3],m,iE):Zt(u[3]),Em):c&&c.p&&(!o||1&m)&&c.p(u,o?m:-1),l&&l.p&&(!o||8&m)&&Jt(l,a,u,u[3],o?Qt(a,u[3],m,sE):Zt(u[3]),Tm),(!o||2&m&&e!==(e=wr(`c-chat-input-banner c-chat-input-banner--${u[1]}`)+" svelte-125x5mm"))&&k(t,"class",e)},i(u){o||(d(c,u),d(l,u),o=!0)},o(u){$(c,u),$(l,u),o=!1},d(u){u&&y(t),c&&c.d(u),l&&l.d(u)}}}function lE(s,t,n){let{$$slots:e={},$$scope:o}=t,{text:r}=t,{color:i="accent"}=t;return s.$$set=c=>{"text"in c&&n(0,r=c.text),"color"in c&&n(1,i=c.color),"$$scope"in c&&n(3,o=c.$$scope)},[r,i,e,o]}class xa extends ct{constructor(t){super(),lt(this,t,lE,cE,it,{text:0,color:1})}}function uE(s){let t;return{c(){t=V("Upgrade Now")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Im(s){let t,n;return t=new Nt({props:{content:"Dismiss",triggerOn:[te.Hover],$$slots:{default:[$E]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};132&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function dE(s){let t,n;return t=new ir({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function $E(s){let t,n;return t=new se({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"dismiss-subscription-warning-button",$$slots:{default:[dE]},$$scope:{ctx:s}}}),t.$on("click",function(){xe(s[2])&&s[2].apply(this,arguments)}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){s=e;const r={};128&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function mE(s){let t,n,e,o,r;e=new he({props:{size:1,variant:"solid",color:s[4]?"error":"warning","data-testid":"subscription-page-button",$$slots:{default:[uE]},$$scope:{ctx:s}}}),e.$on("click",s[5]);let i=!s[0]&&!s[1]&&Im(s);return{c(){t=D("div"),n=D("div"),g(e.$$.fragment),o=z(),i&&i.c(),k(n,"class","l-subscription-warning__upgrade-btn svelte-1m82ryz"),xt(n,"is-error",s[4]),k(t,"class","l-subscription-warning__right svelte-1m82ryz"),k(t,"slot","right-content")},m(c,a){_(c,t,a),P(t,n),h(e,n,null),P(t,o),i&&i.m(t,null),r=!0},p(c,a){const l={};16&a&&(l.color=c[4]?"error":"warning"),128&a&&(l.$$scope={dirty:a,ctx:c}),e.$set(l),(!r||16&a)&&xt(n,"is-error",c[4]),c[0]||c[1]?i&&(Y(),$(i,1,1,()=>{i=null}),K()):i?(i.p(c,a),3&a&&d(i,1)):(i=Im(c),i.c(),d(i,1),i.m(t,null))},i(c){r||(d(e.$$.fragment,c),d(i),r=!0)},o(c){$(e.$$.fragment,c),$(i),r=!1},d(c){c&&y(t),v(e),i&&i.d()}}}function pE(s){let t,n;return t=new xa({props:{text:s[3],color:s[4]?"error":"warning",$$slots:{"right-content":[mE]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,[o]){const r={};8&o&&(r.text=e[3]),16&o&&(r.color=e[4]?"error":"warning"),151&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function fE(s,t,n){let e,{daysRemaining:o=null}=t,{isInactive:r=!1}=t,{usageBalanceDepleted:i=!1}=t,{onDismiss:c}=t,a="";return s.$$set=l=>{"daysRemaining"in l&&n(6,o=l.daysRemaining),"isInactive"in l&&n(0,r=l.isInactive),"usageBalanceDepleted"in l&&n(1,i=l.usageBalanceDepleted),"onDismiss"in l&&n(2,c=l.onDismiss)},s.$$.update=()=>{67&s.$$.dirty&&n(3,a=r?"Your subscription is no longer active":i?"You are out of user messages":`Your subscription expires in ${o} days`),3&s.$$.dirty&&n(4,e=r||i)},[r,i,c,a,e,function(){xn.postMessage({type:Xe.augmentLink,data:"https://app.augmentcode.com/account"})},o]}class gE extends ct{constructor(t){super(),lt(this,t,fE,pE,it,{daysRemaining:6,isInactive:0,usageBalanceDepleted:1,onDismiss:2})}}function hE(s){let t,n,e,o,r,i,c;return o=new Nt({props:{content:"Yes, never show again",triggerOn:[te.Hover],$$slots:{default:[yE]},$$scope:{ctx:s}}}),i=new Nt({props:{content:"No, dismiss once",triggerOn:[te.Hover],$$slots:{default:[bE]},$$scope:{ctx:s}}}),{c(){t=D("span"),t.textContent="Never show again?",n=z(),e=D("div"),g(o.$$.fragment),r=z(),g(i.$$.fragment),k(t,"class","l-thread-length-warning__confirmation-text svelte-et9fl8"),k(e,"class","l-thread-length-warning__confirmation-buttons svelte-et9fl8")},m(a,l){_(a,t,l),_(a,n,l),_(a,e,l),h(o,e,null),P(e,r),h(i,e,null),c=!0},p(a,l){const u={};128&l&&(u.$$scope={dirty:l,ctx:a}),o.$set(u);const m={};128&l&&(m.$$scope={dirty:l,ctx:a}),i.$set(m)},i(a){c||(d(o.$$.fragment,a),d(i.$$.fragment,a),c=!0)},o(a){$(o.$$.fragment,a),$(i.$$.fragment,a),c=!1},d(a){a&&(y(t),y(n),y(e)),v(o),v(i)}}}function vE(s){let t,n,e,o;return t=new Nt({props:{content:"New Thread",triggerOn:[te.Hover,te.Click],$$slots:{default:[CE]},$$scope:{ctx:s}}}),e=new Nt({props:{content:"Dismiss",triggerOn:[te.Hover],$$slots:{default:[ME]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};129&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};128&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function wE(s){let t,n;return t=new co({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function yE(s){let t,n;return t=new se({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"never-show-again-button",$$slots:{default:[wE]},$$scope:{ctx:s}}}),t.$on("click",s[3]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};128&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function xE(s){let t,n;return t=new ir({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function bE(s){let t,n;return t=new se({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"cancel-confirmation-button",$$slots:{default:[xE]},$$scope:{ctx:s}}}),t.$on("click",s[4]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};128&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function _E(s){let t,n;return t=new P1({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function CE(s){let t,n;return t=new se({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"new-thread-warning-button",$$slots:{default:[_E]},$$scope:{ctx:s}}}),t.$on("click",function(){xe(s[0])&&s[0].apply(this,arguments)}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){s=e;const r={};128&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function AE(s){let t,n;return t=new ir({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function ME(s){let t,n;return t=new se({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"dismiss-thread-warning-button",$$slots:{default:[AE]},$$scope:{ctx:s}}}),t.$on("click",s[2]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};128&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function kE(s){let t,n,e,o;const r=[vE,hE],i=[];function c(a,l){return a[1]?1:0}return n=c(s),e=i[n]=r[n](s),{c(){t=D("div"),e.c(),k(t,"class","l-thread-length-warning__buttons svelte-et9fl8"),k(t,"slot","right-content")},m(a,l){_(a,t,l),i[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n===u?i[n].p(a,l):(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),e=i[n],e?e.p(a,l):(e=i[n]=r[n](a),e.c()),d(e,1),e.m(t,null))},i(a){o||(d(e),o=!0)},o(a){$(e),o=!1},d(a){a&&y(t),i[n].d()}}}function SE(s){let t,n;return t=new xa({props:{text:"Long threads can lead to worse results.",$$slots:{"right-content":[kE]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,[o]){const r={};131&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function TE(s,t,n){let{onNewThreadClick:e}=t,{onDismiss:o}=t,{onNeverShowAgain:r}=t,i=!1;return s.$$set=c=>{"onNewThreadClick"in c&&n(0,e=c.onNewThreadClick),"onDismiss"in c&&n(5,o=c.onDismiss),"onNeverShowAgain"in c&&n(6,r=c.onNeverShowAgain)},[e,i,function(){n(1,i=!0)},function(){r()},function(){o()},o,r]}class EE extends ct{constructor(t){super(),lt(this,t,TE,SE,it,{onNewThreadClick:0,onDismiss:5,onNeverShowAgain:6})}}function IE(s){let t,n,e,o,r,i,c;return o=new Nt({props:{content:"Yes, hide for this session",triggerOn:[te.Hover],$$slots:{default:[DE]},$$scope:{ctx:s}}}),i=new Nt({props:{content:"No, dismiss once",triggerOn:[te.Hover],$$slots:{default:[NE]},$$scope:{ctx:s}}}),{c(){t=D("span"),t.textContent="Hide for this session?",n=z(),e=D("div"),g(o.$$.fragment),r=z(),g(i.$$.fragment),k(t,"class","l-conversation-history-warning__confirmation-text svelte-1py4g0t"),k(e,"class","l-conversation-history-warning__confirmation-buttons svelte-1py4g0t")},m(a,l){_(a,t,l),_(a,n,l),_(a,e,l),h(o,e,null),P(e,r),h(i,e,null),c=!0},p(a,l){const u={};128&l&&(u.$$scope={dirty:l,ctx:a}),o.$set(u);const m={};128&l&&(m.$$scope={dirty:l,ctx:a}),i.$set(m)},i(a){c||(d(o.$$.fragment,a),d(i.$$.fragment,a),c=!0)},o(a){$(o.$$.fragment,a),$(i.$$.fragment,a),c=!1},d(a){a&&(y(t),y(n),y(e)),v(o),v(i)}}}function LE(s){let t,n,e,o;return t=new Nt({props:{content:"Delete all conversations",triggerOn:[te.Hover,te.Click],$$slots:{default:[zE]},$$scope:{ctx:s}}}),e=new Nt({props:{content:"Dismiss",triggerOn:[te.Hover],$$slots:{default:[BE]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};129&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};128&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function RE(s){let t,n;return t=new co({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function DE(s){let t,n;return t=new se({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"hide-conversation-history-warning-for-session-button",$$slots:{default:[RE]},$$scope:{ctx:s}}}),t.$on("click",s[3]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};128&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function PE(s){let t,n;return t=new ir({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function NE(s){let t,n;return t=new se({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"cancel-conversation-history-confirmation-button",$$slots:{default:[PE]},$$scope:{ctx:s}}}),t.$on("click",s[4]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};128&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function FE(s){let t,n;return t=new Mf({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function zE(s){let t,n;return t=new se({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"delete-all-history-warning-button",$$slots:{default:[FE]},$$scope:{ctx:s}}}),t.$on("click",function(){xe(s[0])&&s[0].apply(this,arguments)}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){s=e;const r={};128&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function OE(s){let t,n;return t=new ir({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function BE(s){let t,n;return t=new se({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"dismiss-conversation-history-warning-button",$$slots:{default:[OE]},$$scope:{ctx:s}}}),t.$on("click",s[2]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};128&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function HE(s){let t,n,e,o;const r=[LE,IE],i=[];function c(a,l){return a[1]?1:0}return n=c(s),e=i[n]=r[n](s),{c(){t=D("div"),e.c(),k(t,"class","l-conversation-history-warning__buttons svelte-1py4g0t"),k(t,"slot","right-content")},m(a,l){_(a,t,l),i[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n===u?i[n].p(a,l):(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),e=i[n],e?e.p(a,l):(e=i[n]=r[n](a),e.c()),d(e,1),e.m(t,null))},i(a){o||(d(e),o=!0)},o(a){$(e),o=!1},d(a){a&&y(t),i[n].d()}}}function UE(s){let t,n;return t=new xa({props:{text:"Large conversation histories can lead to worse performance.",color:"warning",$$slots:{"right-content":[HE]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,[o]){const r={};131&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function qE(s,t,n){let{onDeleteAllHistory:e}=t,{onDismiss:o}=t,{onHideForSession:r}=t,i=!1;return s.$$set=c=>{"onDeleteAllHistory"in c&&n(0,e=c.onDeleteAllHistory),"onDismiss"in c&&n(5,o=c.onDismiss),"onHideForSession"in c&&n(6,r=c.onHideForSession)},[e,i,function(){n(1,i=!0)},function(){r()},function(){o()},o,r]}class jE extends ct{constructor(t){super(),lt(this,t,qE,UE,it,{onDeleteAllHistory:0,onDismiss:5,onHideForSession:6})}}class WE{constructor(t,n,e,o){$t(this,"_disposables",[]);$t(this,"_chatHistoryCheckpoints");$t(this,"_currentCheckpoint",Fe({request_id:crypto.randomUUID(),uuid:crypto.randomUUID(),chatItemType:Yr.agenticCheckpointDelimiter,status:Ve.draft,fromTimestamp:0,toTimestamp:Number.MAX_SAFE_INTEGER}));$t(this,"checkpoints");$t(this,"uuidToIdx");$t(this,"_targetCheckpointIdx",Fe(void 0));$t(this,"targetCheckpoint");$t(this,"isTargetCheckpointLatest");$t(this,"totalCheckpointCount");$t(this,"_targetCheckpointSummary",Fe([]));$t(this,"targetCheckpointSummary",Li(this._targetCheckpointSummary));$t(this,"targetCheckpointHasChanges",On(this.targetCheckpointSummary,t=>t.some(n=>{var e,o;return(((e=n.changesSummary)==null?void 0:e.totalAddedLines)??!1)||(((o=n.changesSummary)==null?void 0:o.totalRemovedLines)??!1)})));$t(this,"_doNothingOnAgentDisabled",t=>(...n)=>{this._flagsModel.enableAgentMode&&t(...n)});$t(this,"_doNothingOnNotAgentConversation",t=>(...n)=>{if(this._flagsModel.enableAgentMode&&gn(re(this._conversationModel)))return t(...n)});$t(this,"_refreshAgentEditsImmediate",async()=>{const t=this._targetCheckpoint;if(!t)return;const n=this._agentConversationModel?this._agentConversationModel.getBaselineTimestamp():0,e=await this.getCheckpointSummary({...t,fromTimestamp:n,toTimestamp:Number.MAX_SAFE_INTEGER});this._targetCheckpointSummary.set(e)});$t(this,"_refreshAgentEdits",vp(this._refreshAgentEditsImmediate,500,{leading:!0,trailing:!0}));$t(this,"_revertToTimestamp",this._doNothingOnNotAgentConversation(async t=>{await this._extensionClient.revertToTimestamp(t),this.createNewCheckpoint(),this._refreshAgentEdits()}));$t(this,"maybeCreateOriginalCheckpoint",this._doNothingOnNotAgentConversation(()=>{const t=re(this._conversationModel);t.chatHistory.some(Xr)||(Sn.isEmpty(t)||Sn.isNew(t))&&re(this.checkpoints).length===0&&this.createNewCheckpoint()}));$t(this,"dispose",()=>{this._disposables.forEach(t=>t.dispose())});this._flagsModel=t,this._conversationModel=n,this._extensionClient=e,this._agentConversationModel=o,this._chatHistoryCheckpoints=On([this._conversationModel],([r],i)=>{var a,l,u,m;const c=r.chatHistory.filter(Xr);(c==null?void 0:c.length)===((a=re(this._chatHistoryCheckpoints))==null?void 0:a.length)&&((l=c==null?void 0:c.at(-1))==null?void 0:l.uuid)===((m=(u=re(this._chatHistoryCheckpoints))==null?void 0:u.at(-1))==null?void 0:m.uuid)||(this._currentCheckpoint.update(p=>{var f;return{...p,fromTimestamp:((f=c.at(-1))==null?void 0:f.toTimestamp)??0,toTimestamp:Number.MAX_SAFE_INTEGER}}),i(c))}),this.checkpoints=On([this._chatHistoryCheckpoints,this._currentCheckpoint],([r,i])=>[...r,i].filter(c=>c.status!==Ve.draft)),this.totalCheckpointCount=On(this.checkpoints,r=>r.length),this.uuidToIdx=On(this.checkpoints,r=>new Map(r.map((i,c)=>[i.uuid,c]))),this.targetCheckpoint=On([this.targetCheckpointIdx,this.checkpoints],([r,i])=>i.at(r??-1)),this.isTargetCheckpointLatest=On([this.targetCheckpointIdx,this.checkpoints],([r,i])=>r===i.length-1||r===void 0),[this._conversationModel.onSendExchange(this._doNothingOnNotAgentConversation(()=>{re(this._currentCheckpoint).status===Ve.draft&&this._currentCheckpoint.update(r=>({...r,status:Ve.sent}))})),this.targetCheckpoint.subscribe(this._doNothingOnAgentDisabled(()=>{this._refreshAgentEdits()})),this.checkpoints.subscribe(this._doNothingOnAgentDisabled(()=>{re(this.isTargetCheckpointLatest)&&this._refreshAgentEdits()})),this._conversationModel.onNewConversation(()=>{this.targetCheckpointIdx.set(void 0),this._targetCheckpointSummary.set([]),this._refreshAgentEdits()}),this._conversationModel.onSendExchange(this._doNothingOnAgentDisabled(()=>this.targetCheckpointIdx.set(void 0)))].forEach(r=>{this._disposables.push({dispose:r})})}registerAgentConversationModel(t){this._agentConversationModel=t}get targetCheckpointIdx(){return{subscribe:this._targetCheckpointIdx.subscribe,set:()=>this._targetCheckpointIdx.set(void 0),update:()=>this._targetCheckpointIdx.set(void 0)}}get currentCheckpoint(){return this._currentCheckpoint}get _checkpoints(){return re(this.checkpoints)}get _targetCheckpoint(){return re(this.targetCheckpoint)}getCheckpointIdxForTimestamp(t){return this._checkpoints.findIndex(n=>n.fromTimestamp<=t&&n.toTimestamp>=t)}getCheckpointAtIdx(t){return this._checkpoints.at(t)}createNewCheckpoint(t={}){const n=re(this._currentCheckpoint),e=Date.now(),o={...n,status:Ve.success,toTimestamp:e,...t};this._currentCheckpoint.set({request_id:crypto.randomUUID(),uuid:crypto.randomUUID(),chatItemType:Yr.agenticCheckpointDelimiter,status:Ve.draft,fromTimestamp:e,toTimestamp:Number.MAX_SAFE_INTEGER}),this._conversationModel.addChatItem(o)}async getCheckpointSummary(t){return(await this._extensionClient.getAgentEditList(t.fromTimestamp,t.toTimestamp)).edits}async getCheckpointIdxSummary(t){const n=this._checkpoints.at(t);return n?this.getCheckpointSummary(n):[]}async revertToCheckpoint(t){const n=re(this.uuidToIdx).get(t);if(n===void 0)return!1;const e=this._checkpoints.at(n);if(!e)return!1;const o=re(this._conversationModel).id,r=await this._extensionClient.revertToTimestamp(e.toTimestamp);return(r||re(this._conversationModel).id===o)&&this.createNewCheckpoint({revertTarget:{uuid:t}}),r}async revertDocumentToTimestamp(t,n){const e=re(this._conversationModel).id,o=await this._extensionClient.revertToTimestamp(n,[t]);return o&&re(this._conversationModel).id===e&&this.createNewCheckpoint({revertTarget:{filePath:t}}),o}async acceptAll(){const t=this._checkpoints.at(-1);if(t){const n=t.toTimestamp;return gn(re(this._conversationModel))&&this._agentConversationModel&&this._agentConversationModel.updateBaselineTimestamp(n),await this._extensionClient.acceptAllAgentEdits(),this._refreshAgentEdits(),!0}return!1}async rejectAll(){var n;const t=await this._extensionClient.openConfirmationModal({title:"Discard All Changes",message:"Are you sure you want to discard all changes? This will apply to all changes whether made by the agent or yourself.",confirmButtonText:"Discard",cancelButtonText:"Cancel"});if(t){const e=((n=this._agentConversationModel)==null?void 0:n.getBaselineTimestamp())??0;gn(re(this._conversationModel))&&this._agentConversationModel&&this._agentConversationModel.updateBaselineTimestamp(e),await this._revertToTimestamp(e),this._refreshAgentEdits()}return t}handleMessageFromExtension(t){switch(t.data.type){case Xe.chatAgentEditListHasUpdates:this._refreshAgentEdits();break;case Xe.chatMemoryHasUpdates:x1.notifyMemoryUpdated()}return!0}async updateBaselineTimestamp(t){gn(re(this._conversationModel))&&this._agentConversationModel&&(this._agentConversationModel.updateBaselineTimestamp(t),this._refreshAgentEdits())}}function Qs(s){const t=Object.prototype.toString.call(s);return s instanceof Date||typeof s=="object"&&t==="[object Date]"?new s.constructor(+s):typeof s=="number"||t==="[object Number]"||typeof s=="string"||t==="[object String]"?new Date(s):new Date(NaN)}const VE=864e5;function Lm(s){const t=Qs(s);return t.setHours(0,0,0,0),t}function Rm(s){const t=Qs(s),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+s-+n}function GE(s,t){const n=Qs(s),e=Qs(t),o=Dm(n,e),r=Math.abs(function(c,a){const l=Lm(c),u=Lm(a),m=+l-Rm(l),p=+u-Rm(u);return Math.round((m-p)/VE)}(n,e));n.setDate(n.getDate()-o*r);const i=o*(r-+(Dm(n,e)===-o));return i===0?0:i}function Dm(s,t){const n=s.getFullYear()-t.getFullYear()||s.getMonth()-t.getMonth()||s.getDate()-t.getDate()||s.getHours()-t.getHours()||s.getMinutes()-t.getMinutes()||s.getSeconds()-t.getSeconds()||s.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}const fo=class fo{constructor(t,n,e){$t(this,"pollInterval",null);$t(this,"subscriptionInfo",Fe(null));$t(this,"isDismissed",Fe(!1));$t(this,"dispose",()=>{this.pollInterval&&(clearInterval(this.pollInterval),this.pollInterval=null)});if(this.extensionClient=t,e!==void 0)this.isDismissed.set(e);else try{const o=localStorage.getItem(fo.localStorageKey);if(o){const{dismissed:r,timestamp:i}=JSON.parse(o),c=new Date(i),a=new Date,l=c.toDateString()!==a.toDateString();r&&!l?this.isDismissed.set(!0):localStorage.removeItem(fo.localStorageKey)}}catch(o){console.error("Failed to read from localStorage:",o)}n!==void 0?this.subscriptionInfo.set(n):(this.fetchSubscriptionInfo(),this.startPolling())}get info(){return this.subscriptionInfo}get dismissed(){return this.isDismissed}dismiss(){this.isDismissed.set(!0);try{localStorage.setItem(fo.localStorageKey,JSON.stringify({dismissed:!0,timestamp:new Date().toISOString()}))}catch(t){console.error("Failed to write to localStorage:",t)}}shouldShowWarning(t){if(t==null)return!1;if(t.type==="inactive_subscription"||t.usageBalanceDepleted)return!0;if(t.type==="active_subscription"&&t.daysRemaining!==void 0){let n=!1;return this.isDismissed.subscribe(e=>n=e)(),!n&&t.daysRemaining<=fo.warningThresholdDays}return!1}async fetchSubscriptionInfo(){try{const t=await this.extensionClient.getSubscriptionInfo(),n=this.parseSubscriptionInfo(t);this.subscriptionInfo.set(n)}catch(t){console.error("Error fetching subscription info:",t)}}parseSubscriptionInfo(t){let n,e,o="unknown";if(t.data.enterprise)o="enterprise";else if(t.data.activeSubscription){if(o="active_subscription",t.data.activeSubscription.endDate){const r=new Date(t.data.activeSubscription.endDate);r.getFullYear()>2e3&&(n=Math.max(0,GE(r,new Date)))}e=t.data.activeSubscription.usageBalanceDepleted}else t.data.inactiveSubscription&&(o="inactive_subscription");return{type:o,daysRemaining:n,usageBalanceDepleted:e}}startPolling(){this.pollInterval=setInterval(()=>{this.fetchSubscriptionInfo()},fo.pollIntervalMs)}};$t(fo,"pollIntervalMs",3e4),$t(fo,"warningThresholdDays",14),$t(fo,"localStorageKey","subscription-warning-dismissed");let Xi=fo;const Pm="thread-length-warning-never-show",Nm="conversation-history-warning-hide-for-session";function Fm(s,t,n){const e=s.slice();return e[4]=t[n],e}function zm(s){let t,n,e;return n=new no({props:{variant:"soft",color:"warning",size:1,$$slots:{icon:[KE],default:[YE]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-file-warning svelte-i3ko6e")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};129&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function Om(s){let t,n,e=s[4]+"";return{c(){t=D("div"),n=V(e),k(t,"class","c-file-warning__line svelte-i3ko6e")},m(o,r){_(o,t,r),P(t,n)},p(o,r){1&r&&e!==(e=o[4]+"")&&ht(n,e)},d(o){o&&y(t)}}}function YE(s){let t,n=ee(s[0]),e=[];for(let o=0;o<n.length;o+=1)e[o]=Om(Fm(s,n,o));return{c(){t=D("div");for(let o=0;o<e.length;o+=1)e[o].c();k(t,"class","c-file-warning__message svelte-i3ko6e")},m(o,r){_(o,t,r);for(let i=0;i<e.length;i+=1)e[i]&&e[i].m(t,null)},p(o,r){if(1&r){let i;for(n=ee(o[0]),i=0;i<n.length;i+=1){const c=Fm(o,n,i);e[i]?e[i].p(c,r):(e[i]=Om(c),e[i].c(),e[i].m(t,null))}for(;i<e.length;i+=1)e[i].d(1);e.length=n.length}},d(o){o&&y(t),rn(e,o)}}}function KE(s){let t,n;return t=new Jn({props:{slot:"icon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function XE(s){let t,n,e=s[1]&&zm(s);return{c(){e&&e.c(),t=gt()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,[r]){o[1]?e?(e.p(o,r),2&r&&d(e,1)):(e=zm(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function JE(s,t,n){let e,o,r,{richTextContent:i}=t;return s.$$set=c=>{"richTextContent"in c&&n(2,i=c.richTextContent)},s.$$.update=()=>{4&s.$$.dirty&&n(3,e=m1(i)),8&s.$$.dirty&&n(1,{hasWarning:o,warningMessages:r}=e,o,(n(0,r),n(3,e),n(2,i)))},[r,o,i,e]}class ZE extends ct{constructor(t){super(),lt(this,t,JE,XE,it,{richTextContent:2})}}function Bm(s){let t,n;return t=new ik({props:{chatModelProp:s[33]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Hm(s){let t,n;return t=new WT({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function QE(s){let t,n,e,o=s[26]&&Bm(s),r=s[25]&&Hm();return{c(){t=D("div"),o&&o.c(),n=z(),r&&r.c(),k(t,"class","l-chat-header svelte-19xjh29")},m(i,c){_(i,t,c),o&&o.m(t,null),P(t,n),r&&r.m(t,null),e=!0},p(i,c){i[26]?o?(o.p(i,c),67108864&c[0]&&d(o,1)):(o=Bm(i),o.c(),d(o,1),o.m(t,n)):o&&(Y(),$(o,1,1,()=>{o=null}),K()),i[25]?r?33554432&c[0]&&d(r,1):(r=Hm(),r.c(),d(r,1),r.m(t,null)):r&&(Y(),$(r,1,1,()=>{r=null}),K())},i(i){e||(d(o),d(r),e=!0)},o(i){$(o),$(r),e=!1},d(i){i&&y(t),o&&o.d(),r&&r.d()}}}function Um(s){let t,n;return t=new Y9({props:{chatModel:s[33]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function tI(s){let t,n,e=s[24]&&Um(s);return{c(){t=D("div"),e&&e.c(),k(t,"class","l-chat-top-bars")},m(o,r){_(o,t,r),e&&e.m(t,null),n=!0},p(o,r){o[24]?e?(e.p(o,r),16777216&r[0]&&d(e,1)):(e=Um(o),e.c(),d(e,1),e.m(t,null)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d()}}}function eI(s){let t,n;return t=new qC({props:{chatModel:s[33],onboardingWorkspaceModel:s[39],remoteAgentsModel:s[34],slot:"message-area"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function nI(s){let t,n,e,o,r,i,c,a;n=new IS({props:{contextModel:s[31]}}),o=new _h({});let l=s[20]&&qm(),u=s[8].enableAgentMode&&s[7]&&jm(s),m=s[21]&&Wm(s);return{c(){t=D("div"),g(n.$$.fragment),e=z(),g(o.$$.fragment),r=z(),l&&l.c(),i=z(),u&&u.c(),c=z(),m&&m.c(),k(t,"class","l-chat-actions-area svelte-19xjh29")},m(p,f){_(p,t,f),h(n,t,null),P(t,e),h(o,t,null),P(t,r),l&&l.m(t,null),P(t,i),u&&u.m(t,null),P(t,c),m&&m.m(t,null),a=!0},p(p,f){p[20]?l?1048576&f[0]&&d(l,1):(l=qm(),l.c(),d(l,1),l.m(t,i)):l&&(Y(),$(l,1,1,()=>{l=null}),K()),p[8].enableAgentMode&&p[7]?u?(u.p(p,f),384&f[0]&&d(u,1)):(u=jm(p),u.c(),d(u,1),u.m(t,c)):u&&(Y(),$(u,1,1,()=>{u=null}),K()),p[21]?m?(m.p(p,f),2097152&f[0]&&d(m,1)):(m=Wm(p),m.c(),d(m,1),m.m(t,null)):m&&(Y(),$(m,1,1,()=>{m=null}),K())},i(p){a||(d(n.$$.fragment,p),d(o.$$.fragment,p),d(l),d(u),d(m),a=!0)},o(p){$(n.$$.fragment,p),$(o.$$.fragment,p),$(l),$(u),$(m),a=!1},d(p){p&&y(t),v(n),v(o),l&&l.d(),u&&u.d(),m&&m.d()}}}function oI(s){let t,n;return t=new cS({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function rI(s){let t,n;return t=new Hk({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function qm(s){let t,n;return t=new wh({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function jm(s){let t,n,e,o;const r=[iI,sI],i=[];function c(a,l){return a[29]?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=gt()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K(),n=i[t],n||(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function sI(s){let t,n;return t=new yb({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function iI(s){let t,n;return t=new rE({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Wm(s){let t,n;return t=new $h({props:{card:s[6].currentCard,flagsModel:s[8]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};64&o[0]&&(r.card=e[6].currentCard),256&o[0]&&(r.flagsModel=e[8]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function aI(s){let t,n,e,o,r;const i=[rI,oI,nI],c=[];function a(l,u){var m;return l[17]?0:l[4].isActive&&((m=l[4].currentAgent)!=null&&m.is_setup_script_agent)&&l[4].currentConversation?1:l[23]?2:-1}return~(t=a(s))&&(n=c[t]=i[t](s)),o=new ZE({props:{richTextContent:s[10]}}),{c(){n&&n.c(),e=z(),g(o.$$.fragment)},m(l,u){~t&&c[t].m(l,u),_(l,e,u),h(o,l,u),r=!0},p(l,u){let m=t;t=a(l),t===m?~t&&c[t].p(l,u):(n&&(Y(),$(c[m],1,1,()=>{c[m]=null}),K()),~t?(n=c[t],n?n.p(l,u):(n=c[t]=i[t](l),n.c()),d(n,1),n.m(e.parentNode,e)):n=null);const p={};1024&u[0]&&(p.richTextContent=l[10]),o.$set(p)},i(l){r||(d(n),d(o.$$.fragment,l),r=!0)},o(l){$(n),$(o.$$.fragment,l),r=!1},d(l){l&&y(e),~t&&c[t].d(l),v(o,l)}}}function Vm(s){let t,n,e;function o(i){s[71](i)}let r={};return s[9]!==void 0&&(r.inputArea=s[9]),t=new VC({props:r}),Gt.push(()=>ke(t,"inputArea",o)),t.$on("dragEnd",s[72]),{c(){g(t.$$.fragment)},m(i,c){h(t,i,c),e=!0},p(i,c){const a={};!n&&512&c[0]&&(n=!0,a.inputArea=i[9],De(()=>n=!1)),t.$set(a)},i(i){e||(d(t.$$.fragment,i),e=!0)},o(i){$(t.$$.fragment,i),e=!1},d(i){v(t,i)}}}function cI(s){let t,n,e=s[12]&&Vm(s);return{c(){e&&e.c(),t=gt()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,r){o[12]?e?(e.p(o,r),4096&r[0]&&d(e,1)):(e=Vm(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function lI(s){let t,n,e,o;function r(c){s[69](c)}let i={editable:!s[29],placeholder:s[22],$$slots:{banner:[pI]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.richTextEditorRoot=s[0]),n=new S1({props:i}),Gt.push(()=>ke(n,"richTextEditorRoot",r)),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","l-input-area-design-system svelte-19xjh29"),xt(t,"l-input-area-design-system--tall",s[16]),xt(t,"l-input-area-design-system--shrunk",s[15]),xt(t,"l-input-area-design-system--editor-focused",s[28]),xt(t,"l-input-area-design-system--has-banner",s[11])},m(c,a){_(c,t,a),h(n,t,null),s[70](t),o=!0},p(c,a){const l={};536870912&a[0]&&(l.editable=!c[29]),4194304&a[0]&&(l.placeholder=c[22]),262182&a[0]|134217728&a[2]&&(l.$$scope={dirty:a,ctx:c}),!e&&1&a[0]&&(e=!0,l.richTextEditorRoot=c[0],De(()=>e=!1)),n.$set(l),(!o||65536&a[0])&&xt(t,"l-input-area-design-system--tall",c[16]),(!o||32768&a[0])&&xt(t,"l-input-area-design-system--shrunk",c[15]),(!o||268435456&a[0])&&xt(t,"l-input-area-design-system--editor-focused",c[28]),(!o||2048&a[0])&&xt(t,"l-input-area-design-system--has-banner",c[11])},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&y(t),v(n),s[70](null)}}}function uI(s){let t,n,e;return n=new S1({props:{editable:!0,hasSendButton:!1}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","l-chat-setup-area l-input-area-design-system svelte-19xjh29")},m(o,r){_(o,t,r),h(n,t,null),s[66](t),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n),s[66](null)}}}function dI(s){let t,n;return t=new EE({props:{onNewThreadClick:s[68],onDismiss:s[45],onNeverShowAgain:s[46]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function $I(s){let t,n;return t=new jE({props:{onDeleteAllHistory:s[44],onDismiss:s[42],onHideForSession:s[43]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function mI(s){let t,n;return t=new gE({props:{daysRemaining:s[5].daysRemaining??null,usageBalanceDepleted:s[5].usageBalanceDepleted||!1,isInactive:s[5].type==="inactive_subscription",onDismiss:s[67]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};32&o[0]&&(r.daysRemaining=e[5].daysRemaining??null),32&o[0]&&(r.usageBalanceDepleted=e[5].usageBalanceDepleted||!1),32&o[0]&&(r.isInactive=e[5].type==="inactive_subscription"),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function pI(s){let t,n,e,o;const r=[mI,$I,dI],i=[];function c(a,l){return a[2]&&a[5]?0:a[18]?1:a[1]?2:-1}return~(t=c(s))&&(n=i[t]=r[t](s)),{c(){n&&n.c(),e=gt()},m(a,l){~t&&i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?~t&&i[t].p(a,l):(n&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K()),~t?(n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),~t&&i[t].d(a)}}}function fI(s){let t,n,e,o;const r=[uI,lI],i=[];function c(a,l){return a[13]?0:a[13]?-1:1}return~(t=c(s))&&(n=i[t]=r[t](s)),{c(){n&&n.c(),e=gt()},m(a,l){~t&&i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?~t&&i[t].p(a,l):(n&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K()),~t?(n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),~t&&i[t].d(a)}}}function gI(s){let t,n;return t=new XT({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function hI(s){let t,n,e,o,r;return n=new q6({props:{$$slots:{"footer-area":[gI],"input-area":[fI],"divider-area":[cI],"actions-area":[aI],"message-area":[eI],"floating-area":[tI],"header-area":[QE]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","chat svelte-19xjh29")},m(i,c){_(i,t,c),h(n,t,null),e=!0,o||(r=[Et(window,"message",s[30].onMessageFromExtension),Et(window,"beforeunload",s[64]),Et(window,"keydown",s[65])],o=!0)},p(i,c){const a={};938983415&c[0]|134217728&c[2]&&(a.$$scope={dirty:c,ctx:i}),n.$set(a)},i(i){e||(d(n.$$.fragment,i),e=!0)},o(i){$(n.$$.fragment,i),e=!1},d(i){i&&y(t),v(n),o=!1,Ye(r)}}}function vI(s,t,n){let e,o,r,i,c,a,l,u,m,p,f,x,A,C,M,S,L,I,X,j,H,J,U,O,Z,et,Q,ut,rt,mt,G,Tt,Bt,_t,Ct,Se,Te,sn=N,q=N,E=N;s.$$.on_destroy.push(()=>sn()),s.$$.on_destroy.push(()=>q()),s.$$.on_destroy.push(()=>E());let{initialConversation:B}=t,{initialFlags:nt}=t,{initialSubscriptionInfo:at}=t,{initialSubscriptionDismissed:wt}=t;const vt=new oi(xn);let Dt,ie=new tg,me=new C0;kt(s,me,Pt=>n(6,G=Pt)),vt.registerConsumer(me);let St=new eg(vt,xn,ie,{initialConversation:B,initialFlags:nt,onLoaded:()=>{if(St.flags.enableAgentMode){const Pt=et.currentChatMode;Pt?Pt===Di.remoteAgent&&St.flags.enableBackgroundAgents?en.handleSetToBackgroundAgent():Pt===Di.agent?en.handleSetToAgent(re(et.agentExecutionMode)):en.handleSetToChat():en.handleSetToAgent(re(et.agentExecutionMode))}else Dt.setToChat()}});kt(s,St,Pt=>n(3,et=Pt));const ze=new sc(vt),Ze=new xr(vt),ve=new on({msgBroker:vt,isActive:!1,flagsModel:St.flags,host:xn,gitRefModel:Ze});kt(s,ve,Pt=>n(4,Q=Pt));let Qe=new Vi(St.currentConversationModel,St.extensionClient,St,ve);const Ee=new WE(St.flags,St.currentConversationModel,St.extensionClient);vt.registerConsumer(Ee),vt.registerConsumer(St),vt.registerConsumer(St.specialContextInputModel),Dt=new mh(St,Qe,Ee,ze);const In=new wo(St,St.extensionClient,St.currentConversationModel,Dt);vt.registerConsumer(In);const{showAutoModeWarning:Be}=Dt;kt(s,Be,Pt=>n(29,Te=Pt));const jn=new pc(vt);vt.registerConsumer(ve),Fn(on.key,ve),Fn(xr.key,Ze),Fn(pc.key,jn),Fn(wo.key,In),Fn(sc.key,ze);const wn=Fe(-1);Fn(Mp,wn);const Ke={agentOverviews:[],selectedAgentId:void 0,activeWebviews:["chat"],pinnedAgents:{}},tn=new S0(vt,Ke,xg,bg);kt(s,tn,Pt=>n(63,Ct=Pt)),vt.registerConsumer(tn),Fn(Op,tn);const en=new yr(St,Dt,ve);vt.registerConsumer(en),Fn(yr.key,en),St.setChatModeModel(en);let Bn=tn.state;const An=new Zh(St,Dt);vt.registerConsumer(An);const qe=new Xi(St.extensionClient,at,wt),Ln=new M0(St,St.flags);vt.registerConsumer(Ln);const ro=new k0;Cg(St),Fn("agentConversationModel",Dt),Fn("toolsWebviewModel",Qe),Fn("checkpointStore",Ee),Fn("slashCommandModel",An),Fn("modelRegistry",ro),Fn("subscriptionModel",qe);const Wn=et.flags;kt(s,Wn,Pt=>n(8,Bt=Pt));const{isCurrConversationAgentic:Zn}=Dt;kt(s,Zn,Pt=>n(7,Tt=Pt));let qt=0,Nn=!1;const Qn=qe.info;kt(s,Qn,Pt=>n(5,ut=Pt));const Hn=qe.dismissed;kt(s,Hn,Pt=>n(60,rt=Pt)),vt.registerConsumer(new class{constructor(Pt){this._agentConversationModel=Pt}handleMessageFromExtension(Pt){return Pt.data.type===Xe.resetAgentOnboarding&&(this._agentConversationModel.resetOnboarding(),!0)}}(Dt));let Vn,be=!1,Me,He;return En(()=>{Q.isRemoteAgentSshWindow&&Q.remoteAgentSshWindowId&&(en.setToRemoteAgent(Q.remoteAgentSshWindowId),ve.setCurrentAgent(Q.remoteAgentSshWindowId),ve.setIsActive(!0));const Pt=[Qe.dispose,ve.dispose,qe.dispose,ze==null?void 0:ze.dispose];return()=>{Pt.forEach(Yt=>Yt==null?void 0:Yt())}}),ng(),s.$$set=Pt=>{"initialConversation"in Pt&&n(49,B=Pt.initialConversation),"initialFlags"in Pt&&n(50,nt=Pt.initialFlags),"initialSubscriptionInfo"in Pt&&n(51,at=Pt.initialSubscriptionInfo),"initialSubscriptionDismissed"in Pt&&n(52,wt=Pt.initialSubscriptionDismissed)},s.$$.update=()=>{var Pt,Yt,Kt;16&s.$$.dirty[0]&&((ce,_e,Ie)=>{_e&&ce.update($e=>{if(!$e)return Ie;const pe=new Set($e.activeWebviews);return _e.isActive?pe.add("chat"):pe.delete("chat"),{...$e,activeWebviews:Array.from(pe),agentOverviews:_e.agentOverviews,selectedAgentId:_e.currentAgentId,pinnedAgents:_e.pinnedAgents}})})(tn,Q,Ke),16&s.$$.dirty[0]|2&s.$$.dirty[2]&&((ce,_e,Ie,$e,pe)=>{if(JSON.stringify(ce)!==JSON.stringify(_e.state)&&_e){const{selectedAgentId:pn,pinnedAgents:Lt}=_e.state||{};pn!==Ie.currentAgentId&&($e.extensionClient.showAugmentPanel(),Ie.setIsActive(!0),pe.setToRemoteAgent(pn),Ie.setCurrentAgent(pn)),Lt&&JSON.stringify(Lt)!==JSON.stringify(Ie.pinnedAgents)&&Ie.setPinnedAgents(Lt)}})(Bn,Ct,Q,St,en),8&s.$$.dirty[0]&&ro.registerModels(Object.entries(et.flags.modelRegistry||{}).map(([ce,_e])=>({name:ce,id:_e}))),16&s.$$.dirty[0]&&n(58,e=!Q.isRemoteAgentSshWindow),8&s.$$.dirty[0]&&(n(27,o=et.flagsLoaded),q(),q=oe(o,ce=>n(62,_t=ce))),272&s.$$.dirty[0]&&n(59,r=Bt.doUseNewDraftFunctionality||Q.isActive),256&s.$$.dirty[0]|402653184&s.$$.dirty[1]|1&s.$$.dirty[2]&&n(26,i=_t&&Bt.fullFeatured&&e&&r),256&s.$$.dirty[0]|1&s.$$.dirty[2]&&n(25,c=_t&&Bt.doUseNewDraftFunctionality&&Bt.fullFeatured),256&s.$$.dirty[0]|402653184&s.$$.dirty[1]|1&s.$$.dirty[2]&&n(24,a=_t&&!r&&Bt.fullFeatured&&e),16&s.$$.dirty[0]&&n(57,l=yp(Q)),67108864&s.$$.dirty[1]&&n(23,u=!l.doHideStatusBars),16&s.$$.dirty[0]&&n(56,m=Q.isCreatingAgent||Q.isActive&&((Pt=Q.currentAgent)==null?void 0:Pt.status)===Ge.agentStarting),144&s.$$.dirty[0]|33554432&s.$$.dirty[1]&&n(22,p=m?"Remote Agent is starting":Q.isActive?Q.currentAgentId?"Ask Remote Agent to edit code, run tests, create a pull request":"Fix this bug, tackle this ticket, review comments in my pull request":Tt?"Ask or instruct Augment Agent":"Ask or instruct Augment"),64&s.$$.dirty[0]&&n(21,f=G.actions.length>0),64&s.$$.dirty[0]&&n(20,x=G.actions.includes(nn.allActionsComplete)),8&s.$$.dirty[0]&&(n(19,A=et.currentConversationModel.totalCharactersStore),sn(),sn=oe(A,ce=>n(61,mt=ce))),16&s.$$.dirty[0]|1077936128&s.$$.dirty[1]&&n(18,C=(()=>{if(!Tf()||function(){try{const _e=sessionStorage.getItem(Nm);return!!_e&&JSON.parse(_e).hideForSession===!0}catch(_e){return console.error("Failed to read conversation history warning preference from sessionStorage:",_e),!1}}()||Q.isActive||qt>0&&Date.now()-qt<36e5)return!1;const ce=St.flags.conversationHistorySizeThresholdBytes/2;return mt>ce})()),16&s.$$.dirty[0]|1082130432&s.$$.dirty[1]&&n(1,M=!Nn&&!function(){try{const ce=localStorage.getItem(Pm);return!!ce&&JSON.parse(ce).neverShow===!0}catch(ce){return console.error("Failed to read thread length warning preference from localStorage:",ce),!1}}()&&mt>6e5&&!Q.isActive),16&s.$$.dirty[0]&&n(17,S=Q.isActive&&Q.currentAgent&&!((Yt=Q.currentAgent)!=null&&Yt.is_setup_script_agent)),32&s.$$.dirty[0]|536870912&s.$$.dirty[1]&&n(2,L=!(!ut||rt)&&qe.shouldShowWarning(ut)),16&s.$$.dirty[0]&&(ce=>{const _e=ce.isRemoteAgentSshWindow,Ie=ce.remoteAgentSshWindowId;be===_e&&Vn===Ie||(be=_e,Vn=Ie,_e&&Ie&&(en.setToRemoteAgent(Ie),ce.setCurrentAgent(Ie),ce.setIsActive(!0)))})(Q),16&s.$$.dirty[0]&&n(16,I=Q.isActive),16&s.$$.dirty[0]&&n(15,X=Q.isActive&&Q.currentAgentId),1&s.$$.dirty[0]&&(n(14,j=((Kt=He==null?void 0:He.isFocused)==null?void 0:Kt.call(He))||Fe(!1)),E(),E=oe(j,ce=>n(28,Se=ce))),16&s.$$.dirty[0]&&n(13,H=Q.isActive&&!Q.currentAgentId),6&s.$$.dirty[0]&&n(11,U=L||M),8&s.$$.dirty[0]&&n(55,O=et.currentConversationModel.draftExchange),16777216&s.$$.dirty[1]&&n(10,Z=O==null?void 0:O.rich_text_json_repr)},n(12,J=!0),[He,M,L,et,Q,ut,G,Tt,Bt,Me,Z,U,!0,H,j,X,I,S,C,A,x,f,p,u,a,c,i,o,Se,Te,vt,ie,me,St,ve,Be,tn,en,qe,Ln,Wn,Zn,function(){n(53,qt=Date.now())},function(){(function(){try{const Pt={hideForSession:!0,timestamp:new Date().toISOString()};sessionStorage.setItem(Nm,JSON.stringify(Pt))}catch(Pt){console.error("Failed to save conversation history warning preference to sessionStorage:",Pt)}})(),n(53,qt=Date.now())},async function(){const Pt=Object.keys(St.conversations);Pt.length>0&&await St.deleteConversations(Pt)},function(){n(54,Nn=!0)},function(){(function(){try{const Pt={neverShow:!0,timestamp:new Date().toISOString()};localStorage.setItem(Pm,JSON.stringify(Pt))}catch(Pt){console.error("Failed to save thread length warning preference to localStorage:",Pt)}})(),n(54,Nn=!0)},Qn,Hn,B,nt,at,wt,qt,Nn,O,m,l,e,r,rt,mt,_t,Ct,()=>{et.saveImmediate()},Pt=>function(Yt,Kt,ce,_e,Ie){var $e,pe;Yt.key==="Enter"&&!Yt.shiftKey&&Ie&&Ie.isFocused&&!re(Ie.isFocused())&&Ie.forceFocus(),!Yt.ctrlKey&&!Yt.metaKey||Yt.key!=="l"||Yt.shiftKey||(_e?_e.createThreadOfCurrentType():ce.isActive?ce.setCurrentAgent(void 0):(Kt.setCurrentConversation(),Kt.extensionClient.reportWebviewClientEvent(hr.chatNewConversation)),Yt.preventDefault()),!Yt.ctrlKey&&!Yt.metaKey||Yt.key!=="."||Yt.shiftKey||_e&&(_e.toggleChatAgentMode(),Yt.preventDefault()),(Yt.ctrlKey||Yt.metaKey)&&Yt.key==="."&&Yt.shiftKey&&_e&&(_e.toggleChatAgentMode(!0),Yt.preventDefault()),Kt.flags.enableDebugFeatures&&!ce.isActive&&((Yt.ctrlKey||Yt.metaKey)&&Yt.shiftKey&&Yt.key==="l"&&(Kt.popCurrentConversation(),Yt.preventDefault()),Yt.altKey&&Yt.code==="BracketRight"&&(Kt.setCurrentConversation(($e=Kt.nextConversation)==null?void 0:$e.id,!1),Yt.preventDefault()),Yt.altKey&&Yt.code==="BracketLeft"&&(Kt.setCurrentConversation((pe=Kt.previousConversation)==null?void 0:pe.id,!1),Yt.preventDefault()),(Yt.ctrlKey||Yt.metaKey)&&Yt.key==="]"&&(Kt.currentConversationModel.focusModel.focusNext(),Yt.preventDefault()),(Yt.ctrlKey||Yt.metaKey)&&Yt.key==="["&&(Kt.currentConversationModel.focusModel.focusPrev(),Yt.preventDefault()),Yt.key==="Escape"&&(Kt.currentConversationModel.focusModel.setFocusIdx(void 0),Yt.preventDefault()))}(Pt,St,ve,en,He),function(Pt){Gt[Pt?"unshift":"push"](()=>{Me=Pt,n(9,Me)})},()=>qe.dismiss(),()=>St.setCurrentConversation(),function(Pt){He=Pt,n(0,He)},function(Pt){Gt[Pt?"unshift":"push"](()=>{Me=Pt,n(9,Me)})},function(Pt){Me=Pt,n(9,Me)},()=>{X&&(He==null||He.requestFocus())}]}class wI extends ct{constructor(t){super(),lt(this,t,vI,hI,it,{initialConversation:49,initialFlags:50,initialSubscriptionInfo:51,initialSubscriptionDismissed:52},null,[-1,-1,-1])}}function Gm(s){let t,n,e,o,r,i,c,a;n=new Ot({props:{size:1,$$slots:{default:[yI]},$$scope:{ctx:s}}}),o=new Ot({props:{size:1,$$slots:{default:[xI]},$$scope:{ctx:s}}}),i=new Ot({props:{size:1,$$slots:{default:[bI]},$$scope:{ctx:s}}});let l=s[0]!=="intellij"&&Km(s);return{c(){t=D("div"),g(n.$$.fragment),e=z(),g(o.$$.fragment),r=z(),g(i.$$.fragment),c=z(),l&&l.c(),k(t,"class","c-augment-features svelte-1jb2nyh")},m(u,m){_(u,t,m),h(n,t,null),P(t,e),h(o,t,null),P(t,r),h(i,t,null),P(t,c),l&&l.m(t,null),a=!0},p(u,m){const p={};2&m&&(p.$$scope={dirty:m,ctx:u}),n.$set(p);const f={};2&m&&(f.$$scope={dirty:m,ctx:u}),o.$set(f);const x={};3&m&&(x.$$scope={dirty:m,ctx:u}),i.$set(x),u[0]!=="intellij"?l?1&m&&d(l,1):(l=Km(u),l.c(),d(l,1),l.m(t,null)):l&&(Y(),$(l,1,1,()=>{l=null}),K())},i(u){a||(d(n.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),d(l),a=!0)},o(u){$(n.$$.fragment,u),$(o.$$.fragment,u),$(i.$$.fragment,u),$(l),a=!1},d(u){u&&y(t),v(n),v(o),v(i),l&&l.d()}}}function yI(s){let t;return{c(){t=V("Augment Features:")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function xI(s){let t,n,e;return{c(){t=D("a"),t.textContent="Chat",n=V(` &
      `),e=D("a"),e.textContent="Agent,",k(t,"href","https://docs.augmentcode.com/using-augment/chat"),k(t,"class","svelte-1jb2nyh"),k(e,"href","https://docs.augmentcode.com/using-augment/agent"),k(e,"class","svelte-1jb2nyh")},m(o,r){_(o,t,r),_(o,n,r),_(o,e,r)},p:N,d(o){o&&(y(t),y(n),y(e))}}}function Ym(s){let t,n,e;return{c(){t=V(`,
        `),n=D("a"),n.textContent="Instructions",e=V(","),k(n,"href","https://docs.augmentcode.com/using-augment/instructions"),k(n,"class","svelte-1jb2nyh")},m(o,r){_(o,t,r),_(o,n,r),_(o,e,r)},d(o){o&&(y(t),y(n),y(e))}}}function bI(s){let t,n,e=s[0]!=="intellij"&&Ym();return{c(){t=D("a"),t.textContent="Code Completions",e&&e.c(),n=gt(),k(t,"href","https://docs.augmentcode.com/using-augment/completions"),k(t,"class","svelte-1jb2nyh")},m(o,r){_(o,t,r),e&&e.m(o,r),_(o,n,r)},p(o,r){o[0]!=="intellij"?e||(e=Ym(),e.c(),e.m(n.parentNode,n)):e&&(e.d(1),e=null)},d(o){o&&(y(t),y(n)),e&&e.d(o)}}}function Km(s){let t,n;return t=new Ot({props:{size:1,$$slots:{default:[_I]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function _I(s){let t;return{c(){t=D("a"),t.textContent="Next Edit",k(t,"href","https://docs.augmentcode.com/using-augment/next-edit"),k(t,"class","svelte-1jb2nyh")},m(n,e){_(n,t,e)},p:N,d(n){n&&y(t)}}}function CI(s){let t,n,e=s[0]!==void 0&&Gm(s);return{c(){e&&e.c(),t=gt()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,[r]){o[0]!==void 0?e?(e.p(o,r),1&r&&d(e,1)):(e=Gm(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function AI(s,t,n){let{client:e}=t;return s.$$set=o=>{"client"in o&&n(0,e=o.client)},[e]}class J1 extends ct{constructor(t){super(),lt(this,t,AI,CI,it,{client:0})}}function MI(s){let t,n;return{c(){t=ne("svg"),n=ne("ellipse"),k(n,"cx","51"),k(n,"cy","4.5"),k(n,"rx","51"),k(n,"ry","4.5"),k(n,"fill","currentColor"),k(t,"width","102"),k(t,"height","9"),k(t,"viewBox","0 0 102 9"),k(t,"fill","none"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){_(e,t,o),P(t,n)},p:N,i:N,o:N,d(e){e&&y(t)}}}class kI extends ct{constructor(t){super(),lt(this,t,null,MI,it,{})}}function Xm(s){let t,n,e;return n=new kI({}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-augment-logo-animated__shadow svelte-hwxi20")},m(o,r){_(o,t,r),h(n,t,null),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function SI(s){let t,n,e,o;const r=s[8].default,i=Xt(r,s,s[7],null),c=i||function(l){let u,m;return u=new a0({}),{c(){g(u.$$.fragment)},m(p,f){h(u,p,f),m=!0},i(p){m||(d(u.$$.fragment,p),m=!0)},o(p){$(u.$$.fragment,p),m=!1},d(p){v(u,p)}}}();let a=s[0]&&Xm();return{c(){t=D("div"),n=D("div"),c&&c.c(),e=z(),a&&a.c(),k(n,"class","c-augment-logo-animated__icon svelte-hwxi20"),k(t,"class","c-augment-logo-animated svelte-hwxi20"),k(t,"style",s[2]),xt(t,"c-augment-logo-animated--animated",s[1])},m(l,u){_(l,t,u),P(t,n),c&&c.m(n,null),P(t,e),a&&a.m(t,null),o=!0},p(l,[u]){i&&i.p&&(!o||128&u)&&Jt(i,r,l,l[7],o?Qt(r,l[7],u,null):Zt(l[7]),null),l[0]?a?1&u&&d(a,1):(a=Xm(),a.c(),d(a,1),a.m(t,null)):a&&(Y(),$(a,1,1,()=>{a=null}),K()),(!o||4&u)&&k(t,"style",l[2]),(!o||2&u)&&xt(t,"c-augment-logo-animated--animated",l[1])},i(l){o||(d(c,l),d(a),o=!0)},o(l){$(c,l),$(a),o=!1},d(l){l&&y(t),c&&c.d(l),a&&a.d()}}}function TI(s,t,n){let e,o,{$$slots:r={},$$scope:i}=t,{heightPx:c=160}=t,{floatHeight:a=20}=t,{animationDuration:l=3}=t,{showShadow:u=!0}=t,{animated:m=!0}=t;return s.$$set=p=>{"heightPx"in p&&n(3,c=p.heightPx),"floatHeight"in p&&n(4,a=p.floatHeight),"animationDuration"in p&&n(5,l=p.animationDuration),"showShadow"in p&&n(0,u=p.showShadow),"animated"in p&&n(1,m=p.animated),"$$scope"in p&&n(7,i=p.$$scope)},s.$$.update=()=>{8&s.$$.dirty&&n(6,e=Math.round(.875*c)),120&s.$$.dirty&&n(2,o=`
    --augment-logo-height: ${c}px;
    --augment-logo-icon-size: ${e}px;
    --augment-logo-float-height: ${a}px;
    --animation-duration: ${l}s;
  `)},[u,m,o,c,a,l,e,i,r]}class ba extends ct{constructor(t){super(),lt(this,t,TI,SI,it,{heightPx:3,floatHeight:4,animationDuration:5,showShadow:0,animated:1})}}const EI=s=>({}),Jm=s=>({}),II=s=>({}),Zm=s=>({});function Qm(s){let t,n;const e=s[2].logo,o=Xt(e,s,s[1],Zm);return{c(){t=D("div"),o&&o.c(),k(t,"class","c-onboarding-layout__logo svelte-72kwkw")},m(r,i){_(r,t,i),o&&o.m(t,null),n=!0},p(r,i){o&&o.p&&(!n||2&i)&&Jt(o,e,r,r[1],n?Qt(e,r[1],i,II):Zt(r[1]),Zm)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&y(t),o&&o.d(r)}}}function tp(s){let t,n;const e=s[2].error,o=Xt(e,s,s[1],Jm);return{c(){t=D("div"),o&&o.c(),k(t,"class","c-onboarding-layout__error svelte-72kwkw")},m(r,i){_(r,t,i),o&&o.m(t,null),n=!0},p(r,i){o&&o.p&&(!n||2&i)&&Jt(o,e,r,r[1],n?Qt(e,r[1],i,EI):Zt(r[1]),Jm)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&y(t),o&&o.d(r)}}}function LI(s){let t,n,e,o,r,i=s[0].logo&&Qm(s);const c=s[2].default,a=Xt(c,s,s[1],null);let l=s[0].error&&tp(s);return{c(){t=D("div"),i&&i.c(),n=z(),e=D("div"),a&&a.c(),o=z(),l&&l.c(),k(e,"class","c-onboarding-layout__content svelte-72kwkw"),k(t,"class","c-onboarding-layout svelte-72kwkw"),xt(t,"c-onboarding-layout__has-logo",s[0].logo)},m(u,m){_(u,t,m),i&&i.m(t,null),P(t,n),P(t,e),a&&a.m(e,null),P(t,o),l&&l.m(t,null),r=!0},p(u,[m]){u[0].logo?i?(i.p(u,m),1&m&&d(i,1)):(i=Qm(u),i.c(),d(i,1),i.m(t,n)):i&&(Y(),$(i,1,1,()=>{i=null}),K()),a&&a.p&&(!r||2&m)&&Jt(a,c,u,u[1],r?Qt(c,u[1],m,null):Zt(u[1]),null),u[0].error?l?(l.p(u,m),1&m&&d(l,1)):(l=tp(u),l.c(),d(l,1),l.m(t,null)):l&&(Y(),$(l,1,1,()=>{l=null}),K()),(!r||1&m)&&xt(t,"c-onboarding-layout__has-logo",u[0].logo)},i(u){r||(d(i),d(a,u),d(l),r=!0)},o(u){$(i),$(a,u),$(l),r=!1},d(u){u&&y(t),i&&i.d(),a&&a.d(u),l&&l.d()}}}function RI(s,t,n){let{$$slots:e={},$$scope:o}=t;const r=$p(e);return s.$$set=i=>{"$$scope"in i&&n(1,o=i.$$scope)},[r,o,e]}class $i extends ct{constructor(t){super(),lt(this,t,RI,LI,it,{})}}function DI(s){let t;return{c(){t=V(s[0])},m(n,e){_(n,t,e)},p(n,e){1&e&&ht(t,n[0])},d(n){n&&y(t)}}}function PI(s){let t;return{c(){t=V(s[1])},m(n,e){_(n,t,e)},p(n,e){2&e&&ht(t,n[1])},d(n){n&&y(t)}}}function NI(s){let t,n,e,o,r;return n=new Ot({props:{size:2,weight:"bold",class:"c-sign-in__welcome",$$slots:{default:[DI]},$$scope:{ctx:s}}}),o=new Ot({props:{size:1,$$slots:{default:[PI]},$$scope:{ctx:s}}}),{c(){t=D("div"),g(n.$$.fragment),e=z(),g(o.$$.fragment),k(t,"class","c-sign-in__title svelte-yuxz62")},m(i,c){_(i,t,c),h(n,t,null),P(t,e),h(o,t,null),r=!0},p(i,[c]){const a={};5&c&&(a.$$scope={dirty:c,ctx:i}),n.$set(a);const l={};6&c&&(l.$$scope={dirty:c,ctx:i}),o.$set(l)},i(i){r||(d(n.$$.fragment,i),d(o.$$.fragment,i),r=!0)},o(i){$(n.$$.fragment,i),$(o.$$.fragment,i),r=!1},d(i){i&&y(t),v(n),v(o)}}}function FI(s,t,n){let{title:e}=t,{subtitle:o}=t;return s.$$set=r=>{"title"in r&&n(0,e=r.title),"subtitle"in r&&n(1,o=r.subtitle)},[e,o]}class Z1 extends ct{constructor(t){super(),lt(this,t,FI,NI,it,{title:0,subtitle:1})}}function zI(s){let t,n,e,o,r,i;return{c(){t=ne("svg"),n=ne("g"),e=ne("path"),o=ne("defs"),r=ne("clipPath"),i=ne("rect"),k(e,"d","M16 7.99201C16 3.58042 12.416 0 8 0C3.584 0 0 3.58042 0 7.99201C0 10.4216 1.104 12.6114 2.832 14.0819C2.848 14.0979 2.864 14.0979 2.864 14.1139C3.008 14.2258 3.152 14.3377 3.312 14.4496C3.392 14.4975 3.456 14.5614 3.536 14.6254C4.816 15.4885 6.352 16 8.016 16C9.68 16 11.216 15.4885 12.496 14.6254C12.576 14.5774 12.64 14.5135 12.72 14.4655C12.864 14.3536 13.024 14.2418 13.168 14.1299C13.184 14.1139 13.2 14.1139 13.2 14.0979C14.896 12.6114 16 10.4216 16 7.99201ZM8 14.993C6.496 14.993 5.12 14.5135 3.984 13.7143C4 13.5864 4.032 13.4585 4.064 13.3307C4.16 12.979 4.304 12.6434 4.48 12.3397C4.656 12.036 4.864 11.7642 5.12 11.5245C5.36 11.2847 5.648 11.0609 5.936 10.8851C6.24 10.7093 6.56 10.5814 6.912 10.4855C7.264 10.3896 7.632 10.3417 8 10.3417C8.592 10.3417 9.136 10.4535 9.632 10.6613C10.128 10.8691 10.56 11.1568 10.928 11.5085C11.296 11.8761 11.584 12.3077 11.792 12.8032C11.904 13.0909 11.984 13.3946 12.032 13.7143C10.88 14.5135 9.504 14.993 8 14.993ZM5.552 7.59241C5.408 7.27273 5.344 6.92108 5.344 6.56943C5.344 6.21778 5.408 5.86613 5.552 5.54645C5.696 5.22677 5.888 4.93906 6.128 4.6993C6.368 4.45954 6.656 4.26773 6.976 4.12388C7.296 3.98002 7.648 3.91608 8 3.91608C8.368 3.91608 8.704 3.98002 9.024 4.12388C9.344 4.26773 9.632 4.45954 9.872 4.6993C10.112 4.93906 10.304 5.22677 10.448 5.54645C10.592 5.86613 10.656 6.21778 10.656 6.56943C10.656 6.93706 10.592 7.27273 10.448 7.59241C10.304 7.91209 10.112 8.1998 9.872 8.43956C9.632 8.67932 9.344 8.87113 9.024 9.01499C8.384 9.28671 7.6 9.28671 6.96 9.01499C6.64 8.87113 6.352 8.67932 6.112 8.43956C5.872 8.1998 5.68 7.91209 5.552 7.59241ZM12.976 12.8991C12.976 12.8671 12.96 12.8511 12.96 12.8192C12.8 12.3237 12.576 11.8442 12.272 11.4126C11.968 10.981 11.616 10.5974 11.184 10.2777C10.864 10.038 10.512 9.83017 10.144 9.67033C10.32 9.55844 10.48 9.41459 10.608 9.28671C10.848 9.04695 11.056 8.79121 11.232 8.5035C11.408 8.21579 11.536 7.91209 11.632 7.57642C11.728 7.24076 11.76 6.9051 11.76 6.56943C11.76 6.04196 11.664 5.54645 11.472 5.0989C11.28 4.65135 11.008 4.25175 10.656 3.9001C10.32 3.56444 9.904 3.29271 9.456 3.1009C9.008 2.90909 8.512 2.81319 7.984 2.81319C7.456 2.81319 6.96 2.90909 6.512 3.1009C6.064 3.29271 5.648 3.56444 5.312 3.91608C4.976 4.25175 4.704 4.66733 4.512 5.11489C4.32 5.56244 4.224 6.05794 4.224 6.58541C4.224 6.93706 4.272 7.27273 4.368 7.59241C4.464 7.92807 4.592 8.23177 4.768 8.51948C4.928 8.80719 5.152 9.06294 5.392 9.3027C5.536 9.44655 5.696 9.57443 5.872 9.68631C5.488 9.86214 5.136 10.0699 4.832 10.3097C4.416 10.6294 4.048 11.013 3.744 11.4286C3.44 11.8601 3.216 12.3237 3.056 12.8352C3.04 12.8671 3.04 12.8991 3.04 12.9151C1.776 11.6364 0.992 9.91009 0.992 7.99201C0.992 4.13986 4.144 0.991009 8 0.991009C11.856 0.991009 15.008 4.13986 15.008 7.99201C15.008 9.91009 14.224 11.6364 12.976 12.8991Z"),k(e,"fill","currentColor"),k(n,"clip-path","url(#clip0_9570_7560)"),k(i,"width","16"),k(i,"height","16"),k(i,"fill","currentColor"),k(r,"id","clip0_9570_7560"),k(t,"width","16"),k(t,"height","16"),k(t,"viewBox","0 0 16 16"),k(t,"fill","none"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(c,a){_(c,t,a),P(t,n),P(n,e),P(t,o),P(o,r),P(r,i)},p:N,i:N,o:N,d(c){c&&y(t)}}}class OI extends ct{constructor(t){super(),lt(this,t,null,zI,it,{})}}function BI(s){let t;return{c(){t=V("Sign In")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function HI(s){let t,n;return t=new OI({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function UI(s){let t,n,e,o,r,i,c;return n=new Z1({props:{title:"Welcome!",subtitle:"Please sign in below."}}),o=new he({props:{variant:"solid",color:"accent","data-testid":"sign-in-button",$$slots:{iconLeft:[HI],default:[BI]},$$scope:{ctx:s}}}),o.$on("click",s[1]),i=new J1({props:{client:s[0]}}),{c(){t=D("div"),g(n.$$.fragment),e=z(),g(o.$$.fragment),r=z(),g(i.$$.fragment),k(t,"class","c-sign-in svelte-77uw5c")},m(a,l){_(a,t,l),h(n,t,null),P(t,e),h(o,t,null),P(t,r),h(i,t,null),c=!0},p(a,l){const u={};8&l&&(u.$$scope={dirty:l,ctx:a}),o.$set(u);const m={};1&l&&(m.client=a[0]),i.$set(m)},i(a){c||(d(n.$$.fragment,a),d(o.$$.fragment,a),d(i.$$.fragment,a),c=!0)},o(a){$(n.$$.fragment,a),$(o.$$.fragment,a),$(i.$$.fragment,a),c=!1},d(a){a&&y(t),v(n),v(o),v(i)}}}function qI(s){let t,n;return t=new ba({props:{slot:"logo"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function jI(s){let t,n,e,o;return t=new $i({props:{$$slots:{logo:[qI],default:[UI]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(r,i){h(t,r,i),n=!0,e||(o=Et(window,"message",s[2]),e=!0)},p(r,[i]){const c={};9&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){v(t,r),e=!1,o()}}}function WI(s,t,n){let e;return xn.postMessage({type:Xe.signInLoaded}),[e,function(){xn.postMessage({type:Xe.mainPanelPerformAction,data:"sign-in"})},o=>{const r=o.data;r.type===Xe.signInLoadedResponse&&n(0,e=r.data.client)}]}class VI extends ct{constructor(t){super(),lt(this,t,WI,jI,it,{})}}const GI=s=>({}),ep=s=>({slot:"icon"}),YI=s=>({}),np=s=>({slot:"icon"});function KI(s){let t,n;return t=new no({props:{variant:"soft",size:1,color:s[0],$$slots:{icon:[QI],default:[ZI]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.color=e[0]),74&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function XI(s){let t,n,e,o;return t=new no({props:{variant:"soft",size:1,color:s[0],$$slots:{default:[tL]},$$scope:{ctx:s}}}),e=new no({props:{variant:"soft",size:1,color:"info",$$slots:{icon:[nL],default:[eL]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=z(),g(e.$$.fragment)},m(r,i){h(t,r,i),_(r,n,i),h(e,r,i),o=!0},p(r,i){const c={};1&i&&(c.color=r[0]),66&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};68&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),v(t,r),v(e,r)}}}function op(s){let t,n;return t=new se({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[JI]},$$scope:{ctx:s}}}),t.$on("click",s[5]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};64&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function JI(s){let t,n;return t=new Ar({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function ZI(s){let t,n,e,o;n=new ar({props:{markdown:s[1]}});let r=!!s[3]&&op(s);return{c(){t=D("div"),g(n.$$.fragment),e=z(),r&&r.c(),k(t,"class","c-callout-wrapper svelte-fh6sa8")},m(i,c){_(i,t,c),h(n,t,null),P(t,e),r&&r.m(t,null),o=!0},p(i,c){const a={};2&c&&(a.markdown=i[1]),n.$set(a),i[3]?r?(r.p(i,c),8&c&&d(r,1)):(r=op(i),r.c(),d(r,1),r.m(t,null)):r&&(Y(),$(r,1,1,()=>{r=null}),K())},i(i){o||(d(n.$$.fragment,i),d(r),o=!0)},o(i){$(n.$$.fragment,i),$(r),o=!1},d(i){i&&y(t),v(n),r&&r.d()}}}function QI(s){let t;const n=s[4].icon,e=Xt(n,s,s[6],ep);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r)&&Jt(e,n,o,o[6],t?Qt(n,o[6],r,GI):Zt(o[6]),ep)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function tL(s){let t,n;return t=new ar({props:{markdown:s[1]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.markdown=e[1]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function eL(s){let t,n;return t=new ar({props:{markdown:s[2]}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.markdown=e[2]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function nL(s){let t;const n=s[4].icon,e=Xt(n,s,s[6],np);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r)&&Jt(e,n,o,o[6],t?Qt(n,o[6],r,YI):Zt(o[6]),np)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function oL(s){let t,n,e,o,r;const i=[XI,KI],c=[];function a(m,p){return m[2]?0:1}n=a(s),e=c[n]=i[n](s);const l=s[4].default,u=Xt(l,s,s[6],null);return{c(){t=D("div"),e.c(),o=z(),u&&u.c(),k(t,"class","c-base-card svelte-fh6sa8")},m(m,p){_(m,t,p),c[n].m(t,null),P(t,o),u&&u.m(t,null),r=!0},p(m,[p]){let f=n;n=a(m),n===f?c[n].p(m,p):(Y(),$(c[f],1,1,()=>{c[f]=null}),K(),e=c[n],e?e.p(m,p):(e=c[n]=i[n](m),e.c()),d(e,1),e.m(t,o)),u&&u.p&&(!r||64&p)&&Jt(u,l,m,m[6],r?Qt(l,m[6],p,null):Zt(m[6]),null)},i(m){r||(d(e),d(u,m),r=!0)},o(m){$(e),$(u,m),r=!1},d(m){m&&y(t),c[n].d(),u&&u.d(m)}}}function rL(s,t,n){let{$$slots:e={},$$scope:o}=t,{color:r}=t,{description:i}=t,{callout:c}=t,{onClose:a}=t;return s.$$set=l=>{"color"in l&&n(0,r=l.color),"description"in l&&n(1,i=l.description),"callout"in l&&n(2,c=l.callout),"onClose"in l&&n(3,a=l.onClose),"$$scope"in l&&n(6,o=l.$$scope)},[r,i,c,a,e,()=>a(),o]}class _a extends ct{constructor(t){super(),lt(this,t,rL,oL,it,{color:0,description:1,callout:2,onClose:3})}}function rp(s,t,n){const e=s.slice();return e[9]=t[n].text,e[10]=t[n].action,e[11]=t[n].appearance,e}const sL=s=>({}),sp=s=>({slot:"icon"});function iL(s){let t,n,e=s[9]+"";return{c(){t=V(e),n=z()},m(o,r){_(o,t,r),_(o,n,r)},p(o,r){4&r&&e!==(e=o[9]+"")&&ht(t,e)},d(o){o&&(y(t),y(n))}}}function ip(s){let t,n;return t=new he({props:{size:2,variant:"solid",color:s[11]?s[11]:"accent",class:"c-btns-card__button",title:s[9],$$slots:{default:[iL]},$$scope:{ctx:s}}}),t.$on("click",function(){return s[7](s[10])}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){s=e;const r={};4&o&&(r.color=s[11]?s[11]:"accent"),4&o&&(r.title=s[9]),260&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function ap(s){let t,n;return t=new u1({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function aL(s){let t,n,e,o,r=ee(s[2]),i=[];for(let l=0;l<r.length;l+=1)i[l]=ip(rp(s,r,l));const c=l=>$(i[l],1,1,()=>{i[l]=null});let a=s[3]&&ap();return{c(){t=D("div");for(let l=0;l<i.length;l+=1)i[l].c();n=z(),a&&a.c(),e=gt(),k(t,"class","c-btns-card__buttons svelte-1701q2d")},m(l,u){_(l,t,u);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(t,null);_(l,n,u),a&&a.m(l,u),_(l,e,u),o=!0},p(l,u){if(36&u){let m;for(r=ee(l[2]),m=0;m<r.length;m+=1){const p=rp(l,r,m);i[m]?(i[m].p(p,u),d(i[m],1)):(i[m]=ip(p),i[m].c(),d(i[m],1),i[m].m(t,null))}for(Y(),m=r.length;m<i.length;m+=1)c(m);K()}l[3]?a?8&u&&d(a,1):(a=ap(),a.c(),d(a,1),a.m(e.parentNode,e)):a&&(Y(),$(a,1,1,()=>{a=null}),K())},i(l){if(!o){for(let u=0;u<r.length;u+=1)d(i[u]);d(a),o=!0}},o(l){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)$(i[u]);$(a),o=!1},d(l){l&&(y(t),y(n),y(e)),rn(i,l),a&&a.d(l)}}}function cL(s){let t;const n=s[6].icon,e=Xt(n,s,s[8],sp);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||256&r)&&Jt(e,n,o,o[8],t?Qt(n,o[8],r,sL):Zt(o[8]),sp)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function lL(s){let t,n;return t=new _a({props:{color:s[1],description:s[0],callout:s[4],$$slots:{icon:[cL],default:[aL]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,[o]){const r={};2&o&&(r.color=e[1]),1&o&&(r.description=e[0]),16&o&&(r.callout=e[4]),268&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function uL(s,t,n){let{$$slots:e={},$$scope:o}=t,{description:r}=t,{color:i}=t,{buttons:c=[]}=t,{inProgress:a=!1}=t,{callout:l}=t;function u(m){xn.postMessage({type:Xe.mainPanelPerformAction,data:m})}return s.$$set=m=>{"description"in m&&n(0,r=m.description),"color"in m&&n(1,i=m.color),"buttons"in m&&n(2,c=m.buttons),"inProgress"in m&&n(3,a=m.inProgress),"callout"in m&&n(4,l=m.callout),"$$scope"in m&&n(8,o=m.$$scope)},[r,i,c,a,l,u,e,m=>u(m),o]}class ls extends ct{constructor(t){super(),lt(this,t,uL,lL,it,{description:0,color:1,buttons:2,inProgress:3,callout:4})}}function dL(s){return{c:N,m:N,p:N,i:N,o:N,d:N}}function $L(s){let t,n;return t=new _a({props:{color:"warning",description:"Current workspace contains your home directory. Augment cannot upload your home directory to the cloud. Please open a different workspace",$$slots:{icon:[wL]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function mL(s){let t,n;return t=new _a({props:{color:"warning",description:`The workspace you have opened exceeds Augment's ${s[2].maxTrackableFileCount} file upload limit. Please use a .augmentignore or .gitignore to exclude files from being uploaded, or open a smaller workspace.`,$$slots:{icon:[yL]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.description=`The workspace you have opened exceeds Augment's ${e[2].maxTrackableFileCount} file upload limit. Please use a .augmentignore or .gitignore to exclude files from being uploaded, or open a smaller workspace.`),8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function pL(s){let t,n;return t=new ls({props:{color:"neutral",description:"To provide the best quality responses, Augment will index your code in our secure cloud. Your data always stays secure and private. [Learn More](https://docs.augmentcode.com/setup-augment/workspace-indexing)",callout:s[2].userTier==="community"?"You are subscribed to the Community plan, we may use any code you share to train our AI models.":void 0,buttons:[{text:"Enable Indexing",action:"grant-sync-permission"}],$$slots:{icon:[xL]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.callout=e[2].userTier==="community"?"You are subscribed to the Community plan, we may use any code you share to train our AI models.":void 0),8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function fL(s){let t,n;return t=new ls({props:{color:"warning",description:"Codeium suggestions will collide with Augment's suggestions. Turn off Codeium to fix this.",buttons:[{text:"Disable Codeium",action:"disable-codeium"}],$$slots:{icon:[bL]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function gL(s){let t,n;return t=new ls({props:{color:"warning",description:"GitHub Copilot suggestions will collide with Augment's suggestions. Turn off Copilot to fix this.",buttons:[{text:"Disable Github Copilot",action:"disable-github-copilot"}],$$slots:{icon:[_L]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function hL(s){let t,n;return t=new ls({props:{color:"neutral",description:"Please complete the sign-in process in your browser.",buttons:[{text:"Cancel",action:"cancel-sign-in",appearance:"neutral"}],inProgress:!0,$$slots:{icon:[CL]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function vL(s){let t,n;return t=new ls({props:{color:"neutral",description:"Welcome to Augment! Sign in to your existing account or create a new one to get started.",buttons:[{text:"Start using Augment",action:"sign-in"}],$$slots:{icon:[AL]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function wL(s){let t,n;return t=new Jn({props:{slot:"icon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function yL(s){let t,n;return t=new Jn({props:{slot:"icon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function xL(s){let t,n;return t=new jo({props:{slot:"icon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function bL(s){let t,n;return t=new Jn({props:{slot:"icon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function _L(s){let t,n;return t=new Jn({props:{slot:"icon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function CL(s){let t,n;return t=new jo({props:{slot:"icon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function AL(s){let t,n;return t=new jo({props:{slot:"icon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function ML(s){let t,n,e,o;const r=[vL,hL,gL,fL,pL,mL,$L,dL],i=[];function c(a,l){return a[0]===nn.signInRequired?0:a[0]===ha.signInInProgress?1:a[0]===nn.disableCopilot?2:a[0]===nn.disableCodeium?3:a[0]===nn.syncingPermissionNeeded?4:a[0]===nn.workspaceTooLarge?5:a[0]===nn.uploadingHomeDir?6:a[0]===nn.allActionsComplete?7:-1}return~(t=c(s))&&(n=i[t]=r[t](s)),{c(){n&&n.c(),e=gt()},m(a,l){~t&&i[t].m(a,l),_(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t===u?~t&&i[t].p(a,l):(n&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K()),~t?(n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),~t&&i[t].d(a)}}}function kL(s,t,n){let e,o=N,r=()=>(o(),o=oe(c,a=>n(2,e=a)),c);s.$$.on_destroy.push(()=>o());let{card:i}=t,{flagsModel:c}=t;return r(),s.$$set=a=>{"card"in a&&n(0,i=a.card),"flagsModel"in a&&r(n(1,c=a.flagsModel))},[i,c,e]}class SL extends ct{constructor(t){super(),lt(this,t,kL,ML,it,{card:0,flagsModel:1})}}class TL{constructor(){$t(this,"subscribers",new Set);$t(this,"_actions",[]);$t(this,"_currentIndex",0);$t(this,"subscribe",t=>(this.subscribers.add(t),t(this),()=>{this.subscribers.delete(t)}))}get currentCard(){return this.actions[this._currentIndex]}notifySubscribers(){this.subscribers.forEach(t=>t(this))}get actions(){return this._actions}handleMessageFromExtension(t){const n=t.data;return n.type===Xe.mainPanelActions&&(this.onActionsUpdates(n.data),!0)}onActionsUpdates(t){this._actions=t,this._currentIndex=0,this.notifySubscribers()}nextAction(){this._currentIndex=(this._currentIndex+1)%this._actions.length,this.notifySubscribers()}prevAction(){this._currentIndex=(this._currentIndex-1+this._actions.length)%this._actions.length,this.notifySubscribers()}isCollapsible(t){return t===nn.allActionsComplete}}function EL(s){let t,n,e;return t=new hp({}),{c(){g(t.$$.fragment),n=V(`
        Back`)},m(o,r){h(t,o,r),_(o,n,r),e=!0},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){$(t.$$.fragment,o),e=!1},d(o){o&&y(n),v(t,o)}}}function IL(s){let t;return{c(){t=V("Index Codebase")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function LL(s){let t;return{c(){t=V(`Indexing allows Augment to make tailored code suggestions and explain common practices or
        patterns.`)},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function RL(s){let t;return{c(){t=D("a"),t.textContent="Learn More",k(t,"href","https://docs.augmentcode.com/setup-augment/workspace-indexing"),k(t,"class","svelte-f8zg6u")},m(n,e){_(n,t,e)},p:N,d(n){n&&y(t)}}}function DL(s){let t,n,e;return n=new Ot({props:{size:1,$$slots:{default:[RL]},$$scope:{ctx:s}}}),{c(){t=V(`Your data always stays secure, private and anonymized.
        `),g(n.$$.fragment)},m(o,r){_(o,t,r),h(n,o,r),e=!0},p(o,r){const i={};4096&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n,o)}}}function PL(s){let t,n=(s[2]??cp)+"";return{c(){t=V(n)},m(e,o){_(e,t,o)},p(e,o){4&o&&n!==(n=(e[2]??cp)+"")&&ht(t,n)},d(e){e&&y(t)}}}function NL(s){let t,n;return t=new og({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function FL(s){let t,n;return t=new he({props:{variant:"outline",color:"neutral",size:2,$$slots:{iconLeft:[NL],default:[PL]},$$scope:{ctx:s}}}),t.$on("click",s[7]),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,o){const r={};4100&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function zL(s){let t;return{c(){t=V("Index Codebase")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function OL(s){let t,n,e,o,r,i,c,a,l,u,m,p,f,x=fp(),A=x&&function(C){let M,S,L;return S=new he({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[EL]},$$scope:{ctx:C}}}),S.$on("click",C[8]),{c(){M=D("div"),g(S.$$.fragment),k(M,"class","c-back-button-container svelte-f8zg6u")},m(I,X){_(I,M,X),h(S,M,null),L=!0},p(I,X){const j={};4096&X&&(j.$$scope={dirty:X,ctx:I}),S.$set(j)},i(I){L||(d(S.$$.fragment,I),L=!0)},o(I){$(S.$$.fragment,I),L=!1},d(I){I&&y(M),v(S)}}}(s);return e=new Ot({props:{size:2,weight:"bold",class:"c-awaiting-syncing-permission__title",$$slots:{default:[IL]},$$scope:{ctx:s}}}),i=new Ot({props:{size:1,$$slots:{default:[LL]},$$scope:{ctx:s}}}),a=new Ot({props:{size:1,$$slots:{default:[DL]},$$scope:{ctx:s}}}),u=new Nt({props:{content:"Open a new project",$$slots:{default:[FL]},$$scope:{ctx:s}}}),p=new he({props:{variant:"solid",color:"accent",size:2,disabled:!s[2]||s[3],loading:s[1],$$slots:{default:[zL]},$$scope:{ctx:s}}}),p.$on("click",s[6]),{c(){A&&A.c(),t=z(),n=D("div"),g(e.$$.fragment),o=z(),r=D("div"),g(i.$$.fragment),c=z(),g(a.$$.fragment),l=z(),g(u.$$.fragment),m=z(),g(p.$$.fragment),k(r,"class","c-awaiting-syncing-permission__text svelte-f8zg6u"),k(n,"class","c-awaiting-syncing-permission svelte-f8zg6u")},m(C,M){A&&A.m(C,M),_(C,t,M),_(C,n,M),h(e,n,null),P(n,o),P(n,r),h(i,r,null),P(r,c),h(a,r,null),P(n,l),h(u,n,null),P(n,m),h(p,n,null),f=!0},p(C,M){x&&A.p(C,M);const S={};4096&M&&(S.$$scope={dirty:M,ctx:C}),e.$set(S);const L={};4096&M&&(L.$$scope={dirty:M,ctx:C}),i.$set(L);const I={};4096&M&&(I.$$scope={dirty:M,ctx:C}),a.$set(I);const X={};4100&M&&(X.$$scope={dirty:M,ctx:C}),u.$set(X);const j={};12&M&&(j.disabled=!C[2]||C[3]),2&M&&(j.loading=C[1]),4096&M&&(j.$$scope={dirty:M,ctx:C}),p.$set(j)},i(C){f||(d(A),d(e.$$.fragment,C),d(i.$$.fragment,C),d(a.$$.fragment,C),d(u.$$.fragment,C),d(p.$$.fragment,C),f=!0)},o(C){$(A),$(e.$$.fragment,C),$(i.$$.fragment,C),$(a.$$.fragment,C),$(u.$$.fragment,C),$(p.$$.fragment,C),f=!1},d(C){C&&(y(t),y(n)),A&&A.d(C),v(e),v(i),v(a),v(u),v(p)}}}function BL(s){let t,n,e;return n=new SL({props:{card:s[0].currentCard,flagsModel:s[5]}}),{c(){t=D("div"),g(n.$$.fragment),k(t,"slot","error")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p(o,r){const i={};1&r&&(i.card=o[0].currentCard),n.$set(i)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function HL(s){let t,n,e,o;return t=new $i({props:{$$slots:{error:[BL],default:[OL]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(r,i){h(t,r,i),n=!0,e||(o=Et(window,"message",s[9]),e=!0)},p(r,[i]){const c={};4111&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){v(t,r),e=!1,o()}}}const cp="Open a folder";function UL(s,t,n){let e;const o=new oi(xn);let r=new TL;kt(s,r,m=>n(0,e=m)),o.registerConsumer(r);const i=new Qp,c=new t1(xn,o,i);let a,l=!1,u=!1;return xn.postMessage({type:Xe.awaitingSyncingPermissionLoaded}),s.$$.update=()=>{1&s.$$.dirty&&n(3,u=e.currentCard===nn.workspaceTooLarge||e.currentCard===nn.uploadingHomeDir)},[e,l,a,u,r,i,function(){n(1,l=!0),c.grantSyncPermission()},function(){c.openProjectFolder()},function(){c.closeProjectFolder()},function(m){const p=m.data;switch(p.type){case Xe.awaitingSyncingPermissionInitialize:{const{enableDebugFeatures:f,maxTrackableFileCount:x,userTier:A}=p.data;n(2,a=p.data.workspaceName),i.update({enableDebugFeatures:f,maxTrackableFileCount:x,userTier:A});break}case Xe.mainPanelActions:r.onActionsUpdates(function(f){const x=new Set([nn.workspaceNotSelected,nn.workspaceTooLarge,nn.uploadingHomeDir]);return f.filter(A=>x.has(A))}(p.data))}}]}class qL extends ct{constructor(t){super(),lt(this,t,UL,HL,it,{})}}function jL(s){let t,n;return{c(){t=ne("svg"),n=ne("path"),k(n,"fill-rule","evenodd"),k(n,"clip-rule","evenodd"),k(n,"d","M8.14645 3.14645C8.34171 2.95118 8.65829 2.95118 8.85355 3.14645L12.8536 7.14645C13.0488 7.34171 13.0488 7.65829 12.8536 7.85355L8.85355 11.8536C8.65829 12.0488 8.34171 12.0488 8.14645 11.8536C7.95118 11.6583 7.95118 11.3417 8.14645 11.1464L11.2929 8H2.5C2.22386 8 2 7.77614 2 7.5C2 7.22386 2.22386 7 2.5 7H11.2929L8.14645 3.85355C7.95118 3.65829 7.95118 3.34171 8.14645 3.14645Z"),k(n,"fill","currentColor"),k(t,"width","15"),k(t,"height","15"),k(t,"viewBox","0 0 15 15"),k(t,"fill","none"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){_(e,t,o),P(t,n)},p:N,i:N,o:N,d(e){e&&y(t)}}}class WL extends ct{constructor(t){super(),lt(this,t,null,jL,it,{})}}function VL(s){let t,n;return{c(){t=ne("svg"),n=ne("path"),k(n,"fill-rule","evenodd"),k(n,"clip-rule","evenodd"),k(n,"d","M2 3.5C2 3.22386 2.22386 3 2.5 3H12.5C12.7761 3 13 3.22386 13 3.5V9.5C13 9.77614 12.7761 10 12.5 10H2.5C2.22386 10 2 9.77614 2 9.5V3.5ZM2 10.9146C1.4174 10.7087 1 10.1531 1 9.5V3.5C1 2.67157 1.67157 2 2.5 2H12.5C13.3284 2 14 2.67157 14 3.5V9.5C14 10.1531 13.5826 10.7087 13 10.9146V11.5C13 12.3284 12.3284 13 11.5 13H3.5C2.67157 13 2 12.3284 2 11.5V10.9146ZM12 11V11.5C12 11.7761 11.7761 12 11.5 12H3.5C3.22386 12 3 11.7761 3 11.5V11H12ZM5 6.5C5 6.22386 5.22386 6 5.5 6H7V4.5C7 4.22386 7.22386 4 7.5 4C7.77614 4 8 4.22386 8 4.5V6H9.5C9.77614 6 10 6.22386 10 6.5C10 6.77614 9.77614 7 9.5 7H8V8.5C8 8.77614 7.77614 9 7.5 9C7.22386 9 7 8.77614 7 8.5V7H5.5C5.22386 7 5 6.77614 5 6.5Z"),k(n,"fill","currentColor"),k(t,"width","15"),k(t,"height","15"),k(t,"viewBox","0 0 15 15"),k(t,"fill","none"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){_(e,t,o),P(t,n)},p:N,i:N,o:N,d(e){e&&y(t)}}}class GL extends ct{constructor(t){super(),lt(this,t,null,VL,it,{})}}function YL(s){let t;return{c(){t=V("Create a new project")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function KL(s){let t,n;return t=new Tr({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function lp(s){let t,n,e,o,r,i,c;function a(m){s[9](m)}function l(m){s[10](m)}let u={color:s[2]?"error":"neutral",placeholder:"Project Name"};return s[1]!==void 0&&(u.value=s[1]),s[3]!==void 0&&(u.textInput=s[3]),n=new os({props:u}),Gt.push(()=>ke(n,"value",a)),Gt.push(()=>ke(n,"textInput",l)),n.$on("keydown",s[11]),i=new se({props:{disabled:s[4],$$slots:{default:[XL]},$$scope:{ctx:s}}}),i.$on("click",s[12]),{c(){t=D("div"),g(n.$$.fragment),r=z(),g(i.$$.fragment),k(t,"class","c-folder-selection__project-name-input svelte-1hmau15")},m(m,p){_(m,t,p),h(n,t,null),P(t,r),h(i,t,null),c=!0},p(m,p){const f={};4&p&&(f.color=m[2]?"error":"neutral"),!e&&2&p&&(e=!0,f.value=m[1],De(()=>e=!1)),!o&&8&p&&(o=!0,f.textInput=m[3],De(()=>o=!1)),n.$set(f);const x={};16&p&&(x.disabled=m[4]),16384&p&&(x.$$scope={dirty:p,ctx:m}),i.$set(x)},i(m){c||(d(n.$$.fragment,m),d(i.$$.fragment,m),c=!0)},o(m){$(n.$$.fragment,m),$(i.$$.fragment,m),c=!1},d(m){m&&y(t),v(n),v(i)}}}function XL(s){let t,n;return t=new WL({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function JL(s){let t;return{c(){t=V("Open a local folder")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function ZL(s){let t,n;return t=new Gp({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function QL(s){let t;return{c(){t=V("Clone a repository")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function tR(s){let t,n;return t=new GL({props:{slot:"iconLeft"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function eR(s){let t,n,e,o,r,i,c,a,l,u,m,p,f;n=new Z1({props:{title:"Welcome back!",subtitle:"Please open a project folder to begin."}}),r=new he({props:{variant:"outline",color:"neutral",size:2,alignment:"left",$$slots:{iconLeft:[KL],default:[YL]},$$scope:{ctx:s}}}),r.$on("click",s[8]);let x=s[0]&&lp(s);return a=new he({props:{variant:"outline",color:"neutral",size:2,alignment:"left",$$slots:{iconLeft:[ZL],default:[JL]},$$scope:{ctx:s}}}),a.$on("click",s[6]),u=new he({props:{variant:"outline",color:"neutral",size:2,alignment:"left",$$slots:{iconLeft:[tR],default:[QL]},$$scope:{ctx:s}}}),u.$on("click",s[7]),p=new J1({}),{c(){t=D("div"),g(n.$$.fragment),e=z(),o=D("div"),g(r.$$.fragment),i=z(),x&&x.c(),c=z(),g(a.$$.fragment),l=z(),g(u.$$.fragment),m=z(),g(p.$$.fragment),k(o,"class","c-folder-selection__buttons svelte-1hmau15"),k(t,"class","c-folder-selection svelte-1hmau15")},m(A,C){_(A,t,C),h(n,t,null),P(t,e),P(t,o),h(r,o,null),P(o,i),x&&x.m(o,null),P(o,c),h(a,o,null),P(o,l),h(u,o,null),P(t,m),h(p,t,null),f=!0},p(A,C){const M={};16384&C&&(M.$$scope={dirty:C,ctx:A}),r.$set(M),A[0]?x?(x.p(A,C),1&C&&d(x,1)):(x=lp(A),x.c(),d(x,1),x.m(o,c)):x&&(Y(),$(x,1,1,()=>{x=null}),K());const S={};16384&C&&(S.$$scope={dirty:C,ctx:A}),a.$set(S);const L={};16384&C&&(L.$$scope={dirty:C,ctx:A}),u.$set(L)},i(A){f||(d(n.$$.fragment,A),d(r.$$.fragment,A),d(x),d(a.$$.fragment,A),d(u.$$.fragment,A),d(p.$$.fragment,A),f=!0)},o(A){$(n.$$.fragment,A),$(r.$$.fragment,A),$(x),$(a.$$.fragment,A),$(u.$$.fragment,A),$(p.$$.fragment,A),f=!1},d(A){A&&y(t),v(n),v(r),x&&x.d(),v(a),v(u),v(p)}}}function nR(s){let t,n;return t=new ba({props:{slot:"logo"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function up(s){let t,n;return t=new no({props:{variant:"soft",color:"error",size:1,$$slots:{icon:[rR],default:[oR]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function oR(s){let t;return{c(){t=V("Must contain only letters, numbers, hyphens, underscores, and spaces")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function rR(s){let t,n;return t=new Jn({props:{slot:"icon"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function sR(s){let t,n,e=s[2]&&up(s);return{c(){t=D("div"),e&&e.c(),k(t,"slot","error")},m(o,r){_(o,t,r),e&&e.m(t,null),n=!0},p(o,r){o[2]?e?4&r&&d(e,1):(e=up(o),e.c(),d(e,1),e.m(t,null)):e&&(Y(),$(e,1,1,()=>{e=null}),K())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d()}}}function iR(s){let t,n;return t=new $i({props:{$$slots:{error:[sR],logo:[nR],default:[eR]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,[o]){const r={};16415&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function aR(s,t,n){const e=new t1(xn,new oi(xn),new Qp);function o(u){e.createProject(u)}let r,i=!1,c="",a=!0,l=!1;return s.$$.update=()=>{7&s.$$.dirty&&(n(2,l=!/^[a-zA-Z0-9\-_ ]+$/.test(c)&&c.trim().length>0),n(4,a=!i||!c.trim().length||l))},[i,c,l,r,a,o,function(){e.openProjectFolder()},function(){e.cloneRepository()},function(){i?n(0,i=!1):(n(0,i=!0),setTimeout(()=>{r==null||r.focus()},0))},function(u){c=u,n(1,c)},function(u){r=u,n(3,r)},u=>{u.key!=="Enter"||a||(u.preventDefault(),o(c.trim()))},()=>o(c.trim())]}class cR extends ct{constructor(t){super(),lt(this,t,aR,iR,it,{})}}function lR(s){let t,n,e;return n=new Tn({}),{c(){t=D("div"),g(n.$$.fragment),k(t,"class","c-loading")},m(o,r){_(o,t,r),h(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),v(n)}}}function uR(s){let t,n;return t=new ba({props:{slot:"logo"}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function dR(s){let t,n;return t=new $i({props:{$$slots:{logo:[uR],default:[lR]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},p(e,[o]){const r={};1&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}class $R extends ct{constructor(t){super(),lt(this,t,null,dR,it,{})}}function mR(s){let t,n;return t=new cR({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function pR(s){let t,n;return t=new qL({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function fR(s){let t,n;return t=new wI({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function gR(s){let t,n;return t=new VI({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function hR(s){let t,n;return t=new $R({}),{c(){g(t.$$.fragment)},m(e,o){h(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function vR(s){let t,n,e,o;const r=[hR,gR,fR,pR,mR],i=[];function c(a,l){return a[0]===Br.loading?0:a[0]===Br.signIn?1:a[0]===Br.chat?2:a[0]===Br.awaitingSyncingPermission?3:a[0]===Br.folderSelection?4:-1}return~(n=c(s))&&(e=i[n]=r[n](s)),{c(){t=D("main"),e&&e.c()},m(a,l){_(a,t,l),~n&&i[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n!==u&&(e&&(Y(),$(i[u],1,1,()=>{i[u]=null}),K()),~n?(e=i[n],e||(e=i[n]=r[n](a),e.c()),d(e,1),e.m(t,null)):e=null)},i(a){o||(d(e),o=!0)},o(a){$(e),o=!1},d(a){a&&y(t),~n&&i[n].d()}}}function wR(s){let t,n,e,o;return t=new Xp.Root({props:{$$slots:{default:[vR]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},m(r,i){h(t,r,i),n=!0,e||(o=Et(window,"message",s[1]),e=!0)},p(r,[i]){const c={};5&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){v(t,r),e=!1,o()}}}function yR(s,t,n){let e;return xn.postMessage({type:Xe.mainPanelLoaded}),[e,o=>{const r=o.data;r.type===Xe.mainPanelDisplayApp&&n(0,e=r.data)}]}class xR extends ct{constructor(t){super(),lt(this,t,yR,wR,it,{})}}(async function(){xn&&xn.initialize&&await xn.initialize(),new xR({target:document.getElementById("app")})})();export{WL as A,V1 as B,n2 as a,wD as b};
