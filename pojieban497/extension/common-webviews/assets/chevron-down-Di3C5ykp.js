var _f=Object.defineProperty;var Tu=i=>{throw TypeError(i)};var yf=(i,n,s)=>n in i?_f(i,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[n]=s;var y=(i,n,s)=>yf(i,typeof n!="symbol"?n+"":n,s),mf=(i,n,s)=>n.has(i)||Tu("Cannot "+s);var Eu=(i,n,s)=>n.has(i)?Tu("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(i):n.set(i,s);var jr=(i,n,s)=>(mf(i,n,"access private method"),s);import{g as vf,h as xf,b as wf,c as bf,p as kf,C as Sf,i as Rt,d as If,f as Fe,F as Tf,j as Cu,k as Ri,l as Ru,m as Ef,s as Cf,n as $n,W as Rf,o as Ot,R as Af,q as Ai,r as Au,t as qi,u as qu,v as Mi,E as Ui,w as Oi,x as qf,y as Mf}from"./index-DaLJ_QUV.js";import{a as Uf}from"./async-messaging-BnYTstSc.js";import{W as L}from"./IconButtonAugment-CVWbWfwx.js";import{P as It,b as Fi,C as ht,I as Nr,a as ne,E as Of}from"./message-broker-D_dlQCzo.js";import{C as Ff}from"./types-CGlLNakm.js";import{n as $f,f as Lf,i as Df}from"./file-paths-BhRi9crS.js";import{A as Pf,al as Mu,B as Ln,S as Yu,i as Qu,s as Ju,f as gn,a as Ku,H as Xu,w as tc,x as ec,y as nc,e as Jr,g as Kr,z as rc,h as sc,n as Xr,j as ts}from"./SpinnerAugment-CCR7AGk-.js";var $e,zf=(i=>(i.readFile="read-file",i.saveFile="save-file",i.editFile="edit-file",i.clarify="clarify",i.onboardingSubAgent="onboarding-sub-agent",i.launchProcess="launch-process",i.killProcess="kill-process",i.readProcess="read-process",i.writeProcess="write-process",i.listProcesses="list-processes",i.waitProcess="wait-process",i.openBrowser="open-browser",i.strReplaceEditor="str-replace-editor",i.remember="remember",i.diagnostics="diagnostics",i.setupScript="setup-script",i.readTerminal="read-terminal",i.gitCommitRetrieval="git-commit-retrieval",i.spawnSubAgent="spawn-sub-agent",i))(zf||{}),Hf=(i=>(i.remoteToolHost="remoteToolHost",i.localToolHost="localToolHost",i.sidecarToolHost="sidecarToolHost",i.mcpHost="mcpHost",i))(Hf||{}),Di=(i=>(i[i.ContentText=0]="ContentText",i[i.ContentImage=1]="ContentImage",i))(Di||{}),jf=(i=>(i[i.Unknown=0]="Unknown",i[i.WebSearch=1]="WebSearch",i[i.GitHubApi=8]="GitHubApi",i[i.Linear=12]="Linear",i[i.Jira=13]="Jira",i[i.Confluence=14]="Confluence",i[i.Notion=15]="Notion",i[i.Supabase=16]="Supabase",i[i.Glean=17]="Glean",i))(jf||{});function Uu(i){const n=$e[i];return typeof n!="string"?i.toString():n[0].toLowerCase()+n.substring(1).replace(/[A-Z]/g,s=>"_"+s.toLowerCase())}(function(i){i[i.Canceled=1]="Canceled",i[i.Unknown=2]="Unknown",i[i.InvalidArgument=3]="InvalidArgument",i[i.DeadlineExceeded=4]="DeadlineExceeded",i[i.NotFound=5]="NotFound",i[i.AlreadyExists=6]="AlreadyExists",i[i.PermissionDenied=7]="PermissionDenied",i[i.ResourceExhausted=8]="ResourceExhausted",i[i.FailedPrecondition=9]="FailedPrecondition",i[i.Aborted=10]="Aborted",i[i.OutOfRange=11]="OutOfRange",i[i.Unimplemented=12]="Unimplemented",i[i.Internal=13]="Internal",i[i.Unavailable=14]="Unavailable",i[i.DataLoss=15]="DataLoss",i[i.Unauthenticated=16]="Unauthenticated"})($e||($e={}));class Oe extends Error{constructor(n,s=$e.Unknown,a,u,l){super(function(h,g){return h.length?`[${Uu(g)}] ${h}`:`[${Uu(g)}]`}(n,s)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=n,this.code=s,this.metadata=new Headers(a??{}),this.details=u??[],this.cause=l}static from(n,s=$e.Unknown){return n instanceof Oe?n:n instanceof Error?n.name=="AbortError"?new Oe(n.message,$e.Canceled):new Oe(n.message,s,void 0,void 0,n):new Oe(String(n),s,void 0,void 0,n)}static[Symbol.hasInstance](n){return n instanceof Error&&(Object.getPrototypeOf(n)===Oe.prototype||n.name==="ConnectError"&&"code"in n&&typeof n.code=="number"&&"metadata"in n&&"details"in n&&Array.isArray(n.details)&&"rawMessage"in n&&typeof n.rawMessage=="string"&&"cause"in n)}findDetails(n){const s=n.kind==="message"?{getMessage:u=>u===n.typeName?n:void 0}:n,a=[];for(const u of this.details){if("desc"in u){s.getMessage(u.desc.typeName)&&a.push(vf(u.desc,u.value));continue}const l=s.getMessage(u.type);if(l)try{a.push(xf(l,u.value))}catch{}}return a}}var Nf=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,s=i[Symbol.asyncIterator];return s?s.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n);function a(u){n[u]=i[u]&&function(l){return new Promise(function(h,g){(function(x,k,w,q){Promise.resolve(q).then(function(C){x({value:C,done:w})},k)})(h,g,(l=i[u](l)).done,l.value)})}}},Nn=function(i){return this instanceof Nn?(this.v=i,this):new Nn(i)},Bf=function(i,n,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,u=s.apply(i,n||[]),l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",function(q){return function(C){return Promise.resolve(C).then(q,k)}}),a[Symbol.asyncIterator]=function(){return this},a;function h(q,C){u[q]&&(a[q]=function(F){return new Promise(function(Q,ft){l.push([q,F,Q,ft])>1||g(q,F)})},C&&(a[q]=C(a[q])))}function g(q,C){try{(F=u[q](C)).value instanceof Nn?Promise.resolve(F.value.v).then(x,k):w(l[0][2],F)}catch(Q){w(l[0][3],Q)}var F}function x(q){g("next",q)}function k(q){g("throw",q)}function w(q,C){q(C),l.shift(),l.length&&g(l[0][0],l[0][1])}},Wf=function(i){var n,s;return n={},a("next"),a("throw",function(u){throw u}),a("return"),n[Symbol.iterator]=function(){return this},n;function a(u,l){n[u]=i[u]?function(h){return(s=!s)?{value:Nn(i[u](h)),done:!1}:l?l(h):h}:l}},ic=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,s=i[Symbol.asyncIterator];return s?s.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n);function a(u){n[u]=i[u]&&function(l){return new Promise(function(h,g){(function(x,k,w,q){Promise.resolve(q).then(function(C){x({value:C,done:w})},k)})(h,g,(l=i[u](l)).done,l.value)})}}},_n=function(i){return this instanceof _n?(this.v=i,this):new _n(i)},Gf=function(i){var n,s;return n={},a("next"),a("throw",function(u){throw u}),a("return"),n[Symbol.iterator]=function(){return this},n;function a(u,l){n[u]=i[u]?function(h){return(s=!s)?{value:_n(i[u](h)),done:!1}:l?l(h):h}:l}},Zf=function(i,n,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,u=s.apply(i,n||[]),l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",function(q){return function(C){return Promise.resolve(C).then(q,k)}}),a[Symbol.asyncIterator]=function(){return this},a;function h(q,C){u[q]&&(a[q]=function(F){return new Promise(function(Q,ft){l.push([q,F,Q,ft])>1||g(q,F)})},C&&(a[q]=C(a[q])))}function g(q,C){try{(F=u[q](C)).value instanceof _n?Promise.resolve(F.value.v).then(x,k):w(l[0][2],F)}catch(Q){w(l[0][3],Q)}var F}function x(q){g("next",q)}function k(q){g("throw",q)}function w(q,C){q(C),l.shift(),l.length&&g(l[0][0],l[0][1])}};function Vf(i,n){return function(s,a){const u={};for(const l of s.methods){const h=a(l);h!=null&&(u[l.localName]=h)}return u}(i,s=>{switch(s.methodKind){case"unary":return function(a,u){return async function(l,h){var g,x;const k=await a.unary(u,h==null?void 0:h.signal,h==null?void 0:h.timeoutMs,h==null?void 0:h.headers,l,h==null?void 0:h.contextValues);return(g=h==null?void 0:h.onHeader)===null||g===void 0||g.call(h,k.header),(x=h==null?void 0:h.onTrailer)===null||x===void 0||x.call(h,k.trailer),k.message}}(n,s);case"server_streaming":return function(a,u){return function(l,h){return Ou(a.stream(u,h==null?void 0:h.signal,h==null?void 0:h.timeoutMs,h==null?void 0:h.headers,function(g){return Bf(this,arguments,function*(){yield Nn(yield*Wf(Nf(g)))})}([l]),h==null?void 0:h.contextValues),h)}}(n,s);case"client_streaming":return function(a,u){return async function(l,h){var g,x,k,w,q,C;const F=await a.stream(u,h==null?void 0:h.signal,h==null?void 0:h.timeoutMs,h==null?void 0:h.headers,l,h==null?void 0:h.contextValues);let Q;(q=h==null?void 0:h.onHeader)===null||q===void 0||q.call(h,F.header);let ft=0;try{for(var Z,xt=!0,Ft=ic(F.message);!(g=(Z=await Ft.next()).done);xt=!0)w=Z.value,xt=!1,Q=w,ft++}catch(Zt){x={error:Zt}}finally{try{xt||g||!(k=Ft.return)||await k.call(Ft)}finally{if(x)throw x.error}}if(!Q)throw new Oe("protocol error: missing response message",$e.Unimplemented);if(ft>1)throw new Oe("protocol error: received extra messages for client streaming method",$e.Unimplemented);return(C=h==null?void 0:h.onTrailer)===null||C===void 0||C.call(h,F.trailer),Q}}(n,s);case"bidi_streaming":return function(a,u){return function(l,h){return Ou(a.stream(u,h==null?void 0:h.signal,h==null?void 0:h.timeoutMs,h==null?void 0:h.headers,l,h==null?void 0:h.contextValues),h)}}(n,s);default:return null}})}function Ou(i,n){const s=function(){return Zf(this,arguments,function*(){var a,u;const l=yield _n(i);(a=n==null?void 0:n.onHeader)===null||a===void 0||a.call(n,l.header),yield _n(yield*Gf(ic(l.message))),(u=n==null?void 0:n.onTrailer)===null||u===void 0||u.call(n,l.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>s.next()})}}function Yf(i,n,s=1e3){let a=null,u=0;const l=Pf(n),h=()=>{const g=(()=>{const x=Date.now();if(a!==null&&x-u<s)return a;const k=i();return a=k,u=x,k})();l.set(g)};return{subscribe:l.subscribe,resetCache:()=>{a=null,h()},updateStore:h}}var ac=(i=>(i[i.unset=0]="unset",i[i.positive=1]="positive",i[i.negative=2]="negative",i))(ac||{});function zt(i,n){return n in i&&i[n]!==void 0}function Qf(i){return zt(i,"file")}function Jf(i){return zt(i,"recentFile")}function Kf(i){return zt(i,"folder")}function Xf(i){return zt(i,"sourceFolder")}function np(i){return zt(i,"sourceFolderGroup")}function rp(i){return zt(i,"selection")}function td(i){return zt(i,"externalSource")}function sp(i){return zt(i,"allDefaultContext")}function ip(i){return zt(i,"clearContext")}function ap(i){return zt(i,"userGuidelines")}function op(i){return zt(i,"agentMemories")}function oc(i){return zt(i,"personality")}function ed(i){return zt(i,"rule")}const up={allDefaultContext:!0,label:"Default Context",id:"allDefaultContext"},cp={clearContext:!0,label:"Clear Context",id:"clearContext"},lp={userGuidelines:{overLimit:!1,contents:"",lengthLimit:2e3},label:"User Guidelines",id:"userGuidelines"},hp={agentMemories:{},label:"Agent Memories",id:"agentMemories"},Fu=[{personality:{type:It.DEFAULT,description:"Expert software engineer - trusted coding agent, at your service!"},label:"Agent Auggie",name:"auggie-personality-agent-default",id:"auggie-personality-agent-default"},{personality:{type:It.PROTOTYPER,description:"Fast and loose - let's get it done, boss!"},label:"Prototyper Auggie",name:"auggie-personality-prototyper",id:"auggie-personality-prototyper"},{personality:{type:It.BRAINSTORM,description:"Thoughtful and creative - thinking through all possibilities..."},label:"Brainstorm Auggie",name:"auggie-personality-brainstorm",id:"auggie-personality-brainstorm"},{personality:{type:It.REVIEWER,description:"Code detective - finding issues and analyzing implications"},label:"Reviewer Auggie",name:"auggie-personality-reviewer",id:"auggie-personality-reviewer"}];function fp(i){return zt(i,"group")}function dp(i){const n=new Map;return i.forEach(s=>{Qf(s)?n.set("file",[...n.get("file")??[],s]):Jf(s)?n.set("recentFile",[...n.get("recentFile")??[],s]):Kf(s)?n.set("folder",[...n.get("folder")??[],s]):td(s)?n.set("externalSource",[...n.get("externalSource")??[],s]):Xf(s)?n.set("sourceFolder",[...n.get("sourceFolder")??[],s]):oc(s)?n.set("personality",[...n.get("personality")??[],s]):ed(s)&&n.set("rule",[...n.get("rule")??[],s])}),[{label:"Personalities",id:"personalities",group:{type:"personality",materialIcon:"person",items:n.get("personality")??[]}},{label:"Files",id:"files",group:{type:"file",materialIcon:"insert_drive_file",items:n.get("file")??[]}},{label:"Folders",id:"folders",group:{type:"folder",materialIcon:"folder",items:n.get("folder")??[]}},{label:"Source Folders",id:"sourceFolders",group:{type:"sourceFolder",materialIcon:"folder_managed",items:n.get("sourceFolder")??[]}},{label:"Recently Opened Files",id:"recentlyOpenedFiles",group:{type:"recentFile",materialIcon:"insert_drive_file",items:n.get("recentFile")??[]}},{label:"Documentation",id:"externalSources",group:{type:"externalSource",materialIcon:"link",items:n.get("externalSource")??[]}},{label:"Rules",id:"rules",group:{type:"rule",materialIcon:"rule",items:n.get("rule")??[]}}].filter(s=>s.group.items.length>0)}function nd(i){const n=kf({rootPath:i.repoRoot,relPath:i.pathName}),s={label:$f(i.pathName).split("/").filter(a=>a.trim()!=="").pop()||"",name:n,id:n};if(i.fullRange){const a=`:L${i.fullRange.startLineNumber}-${i.fullRange.endLineNumber}`;s.label+=a,s.name+=a,s.id+=a}else if(i.range){const a=`:L${i.range.start}-${i.range.stop}`;s.label+=a,s.name+=a,s.id+=a}return s}function rd(i){const n=i.path.split("/"),s=n[n.length-1],a=s.endsWith(".md")?s.slice(0,-3):s,u=`${wf}/${bf}/${i.path}`;return{label:a,name:u,id:u}}function sd(i){var s;if(!i)return Nr.IMAGE_FORMAT_UNSPECIFIED;switch((s=i.split("/")[1])==null?void 0:s.toLowerCase()){case"jpeg":case"jpg":return Nr.JPEG;case"png":return Nr.PNG;default:return Nr.IMAGE_FORMAT_UNSPECIFIED}}function pp(i,n){return i.map(s=>s.type===Di.ContentText?{type:Fi.CONTENT_TEXT,text_content:s.text_content}:s.type===Di.ContentImage&&s.image_content&&n?{type:Fi.CONTENT_IMAGE,image_content:{image_data:s.image_content.image_data,format:sd(s.image_content.media_type)}}:{type:Fi.CONTENT_TEXT,text_content:"[Error: Invalid content node]"})}function id(i=[]){let n;for(const s of i){if(s.type===ht.TOOL_USE)return s;s.type===ht.TOOL_USE_START&&(n=s)}return n}const ad="__NEW_AGENT__";function od(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Je={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function $u(i){Je=i}const uc=/[&<>"']/,ud=new RegExp(uc.source,"g"),cc=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,cd=new RegExp(cc.source,"g"),ld={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Lu=i=>ld[i];function Gt(i,n){if(n){if(uc.test(i))return i.replace(ud,Lu)}else if(cc.test(i))return i.replace(cd,Lu);return i}const hd=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function fd(i){return i.replace(hd,(n,s)=>(s=s.toLowerCase())==="colon"?":":s.charAt(0)==="#"?s.charAt(1)==="x"?String.fromCharCode(parseInt(s.substring(2),16)):String.fromCharCode(+s.substring(1)):"")}const dd=/(^|[^\[])\^/g;function st(i,n){let s=typeof i=="string"?i:i.source;n=n||"";const a={replace:(u,l)=>{let h=typeof l=="string"?l:l.source;return h=h.replace(dd,"$1"),s=s.replace(u,h),a},getRegex:()=>new RegExp(s,n)};return a}function Du(i){try{i=encodeURI(i).replace(/%25/g,"%")}catch{return null}return i}const zn={exec:()=>null};function Pu(i,n){const s=i.replace(/\|/g,(u,l,h)=>{let g=!1,x=l;for(;--x>=0&&h[x]==="\\";)g=!g;return g?"|":" |"}).split(/ \|/);let a=0;if(s[0].trim()||s.shift(),s.length>0&&!s[s.length-1].trim()&&s.pop(),n)if(s.length>n)s.splice(n);else for(;s.length<n;)s.push("");for(;a<s.length;a++)s[a]=s[a].trim().replace(/\\\|/g,"|");return s}function Br(i,n,s){const a=i.length;if(a===0)return"";let u=0;for(;u<a;){const l=i.charAt(a-u-1);if(l!==n||s){if(l===n||!s)break;u++}else u++}return i.slice(0,a-u)}function zu(i,n,s,a){const u=n.href,l=n.title?Gt(n.title):null,h=i[1].replace(/\\([\[\]])/g,"$1");if(i[0].charAt(0)!=="!"){a.state.inLink=!0;const g={type:"link",raw:s,href:u,title:l,text:h,tokens:a.inlineTokens(h)};return a.state.inLink=!1,g}return{type:"image",raw:s,href:u,title:l,text:Gt(h)}}class es{constructor(n){y(this,"options");y(this,"rules");y(this,"lexer");this.options=n||Je}space(n){const s=this.rules.block.newline.exec(n);if(s&&s[0].length>0)return{type:"space",raw:s[0]}}code(n){const s=this.rules.block.code.exec(n);if(s){const a=s[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:s[0],codeBlockStyle:"indented",text:this.options.pedantic?a:Br(a,`
`)}}}fences(n){const s=this.rules.block.fences.exec(n);if(s){const a=s[0],u=function(l,h){const g=l.match(/^(\s+)(?:```)/);if(g===null)return h;const x=g[1];return h.split(`
`).map(k=>{const w=k.match(/^\s+/);if(w===null)return k;const[q]=w;return q.length>=x.length?k.slice(x.length):k}).join(`
`)}(a,s[3]||"");return{type:"code",raw:a,lang:s[2]?s[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):s[2],text:u}}}heading(n){const s=this.rules.block.heading.exec(n);if(s){let a=s[2].trim();if(/#$/.test(a)){const u=Br(a,"#");this.options.pedantic?a=u.trim():u&&!/ $/.test(u)||(a=u.trim())}return{type:"heading",raw:s[0],depth:s[1].length,text:a,tokens:this.lexer.inline(a)}}}hr(n){const s=this.rules.block.hr.exec(n);if(s)return{type:"hr",raw:s[0]}}blockquote(n){const s=this.rules.block.blockquote.exec(n);if(s){const a=Br(s[0].replace(/^ *>[ \t]?/gm,""),`
`),u=this.lexer.state.top;this.lexer.state.top=!0;const l=this.lexer.blockTokens(a);return this.lexer.state.top=u,{type:"blockquote",raw:s[0],tokens:l,text:a}}}list(n){let s=this.rules.block.list.exec(n);if(s){let a=s[1].trim();const u=a.length>1,l={type:"list",raw:"",ordered:u,start:u?+a.slice(0,-1):"",loose:!1,items:[]};a=u?`\\d{1,9}\\${a.slice(-1)}`:`\\${a}`,this.options.pedantic&&(a=u?a:"[*+-]");const h=new RegExp(`^( {0,3}${a})((?:[	 ][^\\n]*)?(?:\\n|$))`);let g="",x="",k=!1;for(;n;){let w=!1;if(!(s=h.exec(n))||this.rules.block.hr.test(n))break;g=s[0],n=n.substring(g.length);let q=s[2].split(`
`,1)[0].replace(/^\t+/,xt=>" ".repeat(3*xt.length)),C=n.split(`
`,1)[0],F=0;this.options.pedantic?(F=2,x=q.trimStart()):(F=s[2].search(/[^ ]/),F=F>4?1:F,x=q.slice(F),F+=s[1].length);let Q=!1;if(!q&&/^ *$/.test(C)&&(g+=C+`
`,n=n.substring(C.length+1),w=!0),!w){const xt=new RegExp(`^ {0,${Math.min(3,F-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),Ft=new RegExp(`^ {0,${Math.min(3,F-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),Zt=new RegExp(`^ {0,${Math.min(3,F-1)}}(?:\`\`\`|~~~)`),ke=new RegExp(`^ {0,${Math.min(3,F-1)}}#`);for(;n;){const at=n.split(`
`,1)[0];if(C=at,this.options.pedantic&&(C=C.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),Zt.test(C)||ke.test(C)||xt.test(C)||Ft.test(n))break;if(C.search(/[^ ]/)>=F||!C.trim())x+=`
`+C.slice(F);else{if(Q||q.search(/[^ ]/)>=4||Zt.test(q)||ke.test(q)||Ft.test(q))break;x+=`
`+C}Q||C.trim()||(Q=!0),g+=at+`
`,n=n.substring(at.length+1),q=C.slice(F)}}l.loose||(k?l.loose=!0:/\n *\n *$/.test(g)&&(k=!0));let ft,Z=null;this.options.gfm&&(Z=/^\[[ xX]\] /.exec(x),Z&&(ft=Z[0]!=="[ ] ",x=x.replace(/^\[[ xX]\] +/,""))),l.items.push({type:"list_item",raw:g,task:!!Z,checked:ft,loose:!1,text:x,tokens:[]}),l.raw+=g}l.items[l.items.length-1].raw=g.trimEnd(),l.items[l.items.length-1].text=x.trimEnd(),l.raw=l.raw.trimEnd();for(let w=0;w<l.items.length;w++)if(this.lexer.state.top=!1,l.items[w].tokens=this.lexer.blockTokens(l.items[w].text,[]),!l.loose){const q=l.items[w].tokens.filter(F=>F.type==="space"),C=q.length>0&&q.some(F=>/\n.*\n/.test(F.raw));l.loose=C}if(l.loose)for(let w=0;w<l.items.length;w++)l.items[w].loose=!0;return l}}html(n){const s=this.rules.block.html.exec(n);if(s)return{type:"html",block:!0,raw:s[0],pre:s[1]==="pre"||s[1]==="script"||s[1]==="style",text:s[0]}}def(n){const s=this.rules.block.def.exec(n);if(s){const a=s[1].toLowerCase().replace(/\s+/g," "),u=s[2]?s[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",l=s[3]?s[3].substring(1,s[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):s[3];return{type:"def",tag:a,raw:s[0],href:u,title:l}}}table(n){const s=this.rules.block.table.exec(n);if(!s||!/[:|]/.test(s[2]))return;const a=Pu(s[1]),u=s[2].replace(/^\||\| *$/g,"").split("|"),l=s[3]&&s[3].trim()?s[3].replace(/\n[ \t]*$/,"").split(`
`):[],h={type:"table",raw:s[0],header:[],align:[],rows:[]};if(a.length===u.length){for(const g of u)/^ *-+: *$/.test(g)?h.align.push("right"):/^ *:-+: *$/.test(g)?h.align.push("center"):/^ *:-+ *$/.test(g)?h.align.push("left"):h.align.push(null);for(const g of a)h.header.push({text:g,tokens:this.lexer.inline(g)});for(const g of l)h.rows.push(Pu(g,h.header.length).map(x=>({text:x,tokens:this.lexer.inline(x)})));return h}}lheading(n){const s=this.rules.block.lheading.exec(n);if(s)return{type:"heading",raw:s[0],depth:s[2].charAt(0)==="="?1:2,text:s[1],tokens:this.lexer.inline(s[1])}}paragraph(n){const s=this.rules.block.paragraph.exec(n);if(s){const a=s[1].charAt(s[1].length-1)===`
`?s[1].slice(0,-1):s[1];return{type:"paragraph",raw:s[0],text:a,tokens:this.lexer.inline(a)}}}text(n){const s=this.rules.block.text.exec(n);if(s)return{type:"text",raw:s[0],text:s[0],tokens:this.lexer.inline(s[0])}}escape(n){const s=this.rules.inline.escape.exec(n);if(s)return{type:"escape",raw:s[0],text:Gt(s[1])}}tag(n){const s=this.rules.inline.tag.exec(n);if(s)return!this.lexer.state.inLink&&/^<a /i.test(s[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(s[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(s[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(s[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:s[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:s[0]}}link(n){const s=this.rules.inline.link.exec(n);if(s){const a=s[2].trim();if(!this.options.pedantic&&/^</.test(a)){if(!/>$/.test(a))return;const h=Br(a.slice(0,-1),"\\");if((a.length-h.length)%2==0)return}else{const h=function(g,x){if(g.indexOf(x[1])===-1)return-1;let k=0;for(let w=0;w<g.length;w++)if(g[w]==="\\")w++;else if(g[w]===x[0])k++;else if(g[w]===x[1]&&(k--,k<0))return w;return-1}(s[2],"()");if(h>-1){const g=(s[0].indexOf("!")===0?5:4)+s[1].length+h;s[2]=s[2].substring(0,h),s[0]=s[0].substring(0,g).trim(),s[3]=""}}let u=s[2],l="";if(this.options.pedantic){const h=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(u);h&&(u=h[1],l=h[3])}else l=s[3]?s[3].slice(1,-1):"";return u=u.trim(),/^</.test(u)&&(u=this.options.pedantic&&!/>$/.test(a)?u.slice(1):u.slice(1,-1)),zu(s,{href:u&&u.replace(this.rules.inline.anyPunctuation,"$1"),title:l&&l.replace(this.rules.inline.anyPunctuation,"$1")},s[0],this.lexer)}}reflink(n,s){let a;if((a=this.rules.inline.reflink.exec(n))||(a=this.rules.inline.nolink.exec(n))){const u=s[(a[2]||a[1]).replace(/\s+/g," ").toLowerCase()];if(!u){const l=a[0].charAt(0);return{type:"text",raw:l,text:l}}return zu(a,u,a[0],this.lexer)}}emStrong(n,s,a=""){let u=this.rules.inline.emStrongLDelim.exec(n);if(u&&!(u[3]&&a.match(/[\p{L}\p{N}]/u))&&(!(u[1]||u[2])||!a||this.rules.inline.punctuation.exec(a))){const l=[...u[0]].length-1;let h,g,x=l,k=0;const w=u[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(w.lastIndex=0,s=s.slice(-1*n.length+l);(u=w.exec(s))!=null;){if(h=u[1]||u[2]||u[3]||u[4]||u[5]||u[6],!h)continue;if(g=[...h].length,u[3]||u[4]){x+=g;continue}if((u[5]||u[6])&&l%3&&!((l+g)%3)){k+=g;continue}if(x-=g,x>0)continue;g=Math.min(g,g+x+k);const q=[...u[0]][0].length,C=n.slice(0,l+u.index+q+g);if(Math.min(l,g)%2){const Q=C.slice(1,-1);return{type:"em",raw:C,text:Q,tokens:this.lexer.inlineTokens(Q)}}const F=C.slice(2,-2);return{type:"strong",raw:C,text:F,tokens:this.lexer.inlineTokens(F)}}}}codespan(n){const s=this.rules.inline.code.exec(n);if(s){let a=s[2].replace(/\n/g," ");const u=/[^ ]/.test(a),l=/^ /.test(a)&&/ $/.test(a);return u&&l&&(a=a.substring(1,a.length-1)),a=Gt(a,!0),{type:"codespan",raw:s[0],text:a}}}br(n){const s=this.rules.inline.br.exec(n);if(s)return{type:"br",raw:s[0]}}del(n){const s=this.rules.inline.del.exec(n);if(s)return{type:"del",raw:s[0],text:s[2],tokens:this.lexer.inlineTokens(s[2])}}autolink(n){const s=this.rules.inline.autolink.exec(n);if(s){let a,u;return s[2]==="@"?(a=Gt(s[1]),u="mailto:"+a):(a=Gt(s[1]),u=a),{type:"link",raw:s[0],text:a,href:u,tokens:[{type:"text",raw:a,text:a}]}}}url(n){var a;let s;if(s=this.rules.inline.url.exec(n)){let u,l;if(s[2]==="@")u=Gt(s[0]),l="mailto:"+u;else{let h;do h=s[0],s[0]=((a=this.rules.inline._backpedal.exec(s[0]))==null?void 0:a[0])??"";while(h!==s[0]);u=Gt(s[0]),l=s[1]==="www."?"http://"+s[0]:s[0]}return{type:"link",raw:s[0],text:u,href:l,tokens:[{type:"text",raw:u,text:u}]}}}inlineText(n){const s=this.rules.inline.text.exec(n);if(s){let a;return a=this.lexer.state.inRawBlock?s[0]:Gt(s[0]),{type:"text",raw:s[0],text:a}}}}const Bn=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,lc=/(?:[*+-]|\d{1,9}[.)])/,hc=st(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,lc).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Ni=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Bi=/(?!\s*\])(?:\\.|[^\[\]\\])+/,pd=st(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Bi).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),gd=st(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,lc).getRegex(),ss="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Wi=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,_d=st("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Wi).replace("tag",ss).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Hu=st(Ni).replace("hr",Bn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ss).getRegex(),Gi={blockquote:st(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Hu).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:pd,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:Bn,html:_d,lheading:hc,list:gd,newline:/^(?: *(?:\n|$))+/,paragraph:Hu,table:zn,text:/^[^\n]+/},ju=st("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Bn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ss).getRegex(),yd={...Gi,table:ju,paragraph:st(Ni).replace("hr",Bn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ju).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ss).getRegex()},md={...Gi,html:st(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Wi).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:zn,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:st(Ni).replace("hr",Bn).replace("heading",` *#{1,6} *[^
]`).replace("lheading",hc).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},fc=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,dc=/^( {2,}|\\)\n(?!\s*$)/,Wn="\\p{P}\\p{S}",vd=st(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Wn).getRegex(),xd=st(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Wn).getRegex(),wd=st("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Wn).getRegex(),bd=st("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Wn).getRegex(),kd=st(/\\([punct])/,"gu").replace(/punct/g,Wn).getRegex(),Sd=st(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Id=st(Wi).replace("(?:-->|$)","-->").getRegex(),Td=st("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Id).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ns=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Ed=st(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",ns).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Nu=st(/^!?\[(label)\]\[(ref)\]/).replace("label",ns).replace("ref",Bi).getRegex(),Bu=st(/^!?\[(ref)\](?:\[\])?/).replace("ref",Bi).getRegex(),Zi={_backpedal:zn,anyPunctuation:kd,autolink:Sd,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:dc,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:zn,emStrongLDelim:xd,emStrongRDelimAst:wd,emStrongRDelimUnd:bd,escape:fc,link:Ed,nolink:Bu,punctuation:vd,reflink:Nu,reflinkSearch:st("reflink|nolink(?!\\()","g").replace("reflink",Nu).replace("nolink",Bu).getRegex(),tag:Td,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:zn},Cd={...Zi,link:st(/^!?\[(label)\]\((.*?)\)/).replace("label",ns).getRegex(),reflink:st(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ns).getRegex()},Pi={...Zi,escape:st(fc).replace("])","~|])").getRegex(),url:st(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Rd={...Pi,br:st(dc).replace("{2,}","*").getRegex(),text:st(Pi.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Wr={normal:Gi,gfm:yd,pedantic:md},Dn={normal:Zi,gfm:Pi,breaks:Rd,pedantic:Cd};class fe{constructor(n){y(this,"tokens");y(this,"options");y(this,"state");y(this,"tokenizer");y(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=n||Je,this.options.tokenizer=this.options.tokenizer||new es,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const s={block:Wr.normal,inline:Dn.normal};this.options.pedantic?(s.block=Wr.pedantic,s.inline=Dn.pedantic):this.options.gfm&&(s.block=Wr.gfm,this.options.breaks?s.inline=Dn.breaks:s.inline=Dn.gfm),this.tokenizer.rules=s}static get rules(){return{block:Wr,inline:Dn}}static lex(n,s){return new fe(s).lex(n)}static lexInline(n,s){return new fe(s).inlineTokens(n)}lex(n){n=n.replace(/\r\n|\r/g,`
`),this.blockTokens(n,this.tokens);for(let s=0;s<this.inlineQueue.length;s++){const a=this.inlineQueue[s];this.inlineTokens(a.src,a.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(n,s=[]){let a,u,l,h;for(n=this.options.pedantic?n.replace(/\t/g,"    ").replace(/^ +$/gm,""):n.replace(/^( *)(\t+)/gm,(g,x,k)=>x+"    ".repeat(k.length));n;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(g=>!!(a=g.call({lexer:this},n,s))&&(n=n.substring(a.raw.length),s.push(a),!0))))if(a=this.tokenizer.space(n))n=n.substring(a.raw.length),a.raw.length===1&&s.length>0?s[s.length-1].raw+=`
`:s.push(a);else if(a=this.tokenizer.code(n))n=n.substring(a.raw.length),u=s[s.length-1],!u||u.type!=="paragraph"&&u.type!=="text"?s.push(a):(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue[this.inlineQueue.length-1].src=u.text);else if(a=this.tokenizer.fences(n))n=n.substring(a.raw.length),s.push(a);else if(a=this.tokenizer.heading(n))n=n.substring(a.raw.length),s.push(a);else if(a=this.tokenizer.hr(n))n=n.substring(a.raw.length),s.push(a);else if(a=this.tokenizer.blockquote(n))n=n.substring(a.raw.length),s.push(a);else if(a=this.tokenizer.list(n))n=n.substring(a.raw.length),s.push(a);else if(a=this.tokenizer.html(n))n=n.substring(a.raw.length),s.push(a);else if(a=this.tokenizer.def(n))n=n.substring(a.raw.length),u=s[s.length-1],!u||u.type!=="paragraph"&&u.type!=="text"?this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title}):(u.raw+=`
`+a.raw,u.text+=`
`+a.raw,this.inlineQueue[this.inlineQueue.length-1].src=u.text);else if(a=this.tokenizer.table(n))n=n.substring(a.raw.length),s.push(a);else if(a=this.tokenizer.lheading(n))n=n.substring(a.raw.length),s.push(a);else{if(l=n,this.options.extensions&&this.options.extensions.startBlock){let g=1/0;const x=n.slice(1);let k;this.options.extensions.startBlock.forEach(w=>{k=w.call({lexer:this},x),typeof k=="number"&&k>=0&&(g=Math.min(g,k))}),g<1/0&&g>=0&&(l=n.substring(0,g+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l)))u=s[s.length-1],h&&u.type==="paragraph"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=u.text):s.push(a),h=l.length!==n.length,n=n.substring(a.raw.length);else if(a=this.tokenizer.text(n))n=n.substring(a.raw.length),u=s[s.length-1],u&&u.type==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=u.text):s.push(a);else if(n){const g="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(g);break}throw new Error(g)}}return this.state.top=!0,s}inline(n,s=[]){return this.inlineQueue.push({src:n,tokens:s}),s}inlineTokens(n,s=[]){let a,u,l,h,g,x,k=n;if(this.tokens.links){const w=Object.keys(this.tokens.links);if(w.length>0)for(;(h=this.tokenizer.rules.inline.reflinkSearch.exec(k))!=null;)w.includes(h[0].slice(h[0].lastIndexOf("[")+1,-1))&&(k=k.slice(0,h.index)+"["+"a".repeat(h[0].length-2)+"]"+k.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(h=this.tokenizer.rules.inline.blockSkip.exec(k))!=null;)k=k.slice(0,h.index)+"["+"a".repeat(h[0].length-2)+"]"+k.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(h=this.tokenizer.rules.inline.anyPunctuation.exec(k))!=null;)k=k.slice(0,h.index)+"++"+k.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;n;)if(g||(x=""),g=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(w=>!!(a=w.call({lexer:this},n,s))&&(n=n.substring(a.raw.length),s.push(a),!0))))if(a=this.tokenizer.escape(n))n=n.substring(a.raw.length),s.push(a);else if(a=this.tokenizer.tag(n))n=n.substring(a.raw.length),u=s[s.length-1],u&&a.type==="text"&&u.type==="text"?(u.raw+=a.raw,u.text+=a.text):s.push(a);else if(a=this.tokenizer.link(n))n=n.substring(a.raw.length),s.push(a);else if(a=this.tokenizer.reflink(n,this.tokens.links))n=n.substring(a.raw.length),u=s[s.length-1],u&&a.type==="text"&&u.type==="text"?(u.raw+=a.raw,u.text+=a.text):s.push(a);else if(a=this.tokenizer.emStrong(n,k,x))n=n.substring(a.raw.length),s.push(a);else if(a=this.tokenizer.codespan(n))n=n.substring(a.raw.length),s.push(a);else if(a=this.tokenizer.br(n))n=n.substring(a.raw.length),s.push(a);else if(a=this.tokenizer.del(n))n=n.substring(a.raw.length),s.push(a);else if(a=this.tokenizer.autolink(n))n=n.substring(a.raw.length),s.push(a);else if(this.state.inLink||!(a=this.tokenizer.url(n))){if(l=n,this.options.extensions&&this.options.extensions.startInline){let w=1/0;const q=n.slice(1);let C;this.options.extensions.startInline.forEach(F=>{C=F.call({lexer:this},q),typeof C=="number"&&C>=0&&(w=Math.min(w,C))}),w<1/0&&w>=0&&(l=n.substring(0,w+1))}if(a=this.tokenizer.inlineText(l))n=n.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(x=a.raw.slice(-1)),g=!0,u=s[s.length-1],u&&u.type==="text"?(u.raw+=a.raw,u.text+=a.text):s.push(a);else if(n){const w="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(w);break}throw new Error(w)}}else n=n.substring(a.raw.length),s.push(a);return s}}class rs{constructor(n){y(this,"options");this.options=n||Je}code(n,s,a){var l;const u=(l=(s||"").match(/^\S*/))==null?void 0:l[0];return n=n.replace(/\n$/,"")+`
`,u?'<pre><code class="language-'+Gt(u)+'">'+(a?n:Gt(n,!0))+`</code></pre>
`:"<pre><code>"+(a?n:Gt(n,!0))+`</code></pre>
`}blockquote(n){return`<blockquote>
${n}</blockquote>
`}html(n,s){return n}heading(n,s,a){return`<h${s}>${n}</h${s}>
`}hr(){return`<hr>
`}list(n,s,a){const u=s?"ol":"ul";return"<"+u+(s&&a!==1?' start="'+a+'"':"")+`>
`+n+"</"+u+`>
`}listitem(n,s,a){return`<li>${n}</li>
`}checkbox(n){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(n){return`<p>${n}</p>
`}table(n,s){return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+s+`</table>
`}tablerow(n){return`<tr>
${n}</tr>
`}tablecell(n,s){const a=s.header?"th":"td";return(s.align?`<${a} align="${s.align}">`:`<${a}>`)+n+`</${a}>
`}strong(n){return`<strong>${n}</strong>`}em(n){return`<em>${n}</em>`}codespan(n){return`<code>${n}</code>`}br(){return"<br>"}del(n){return`<del>${n}</del>`}link(n,s,a){const u=Du(n);if(u===null)return a;let l='<a href="'+(n=u)+'"';return s&&(l+=' title="'+s+'"'),l+=">"+a+"</a>",l}image(n,s,a){const u=Du(n);if(u===null)return a;let l=`<img src="${n=u}" alt="${a}"`;return s&&(l+=` title="${s}"`),l+=">",l}text(n){return n}}class Vi{strong(n){return n}em(n){return n}codespan(n){return n}del(n){return n}html(n){return n}text(n){return n}link(n,s,a){return""+a}image(n,s,a){return""+a}br(){return""}}class de{constructor(n){y(this,"options");y(this,"renderer");y(this,"textRenderer");this.options=n||Je,this.options.renderer=this.options.renderer||new rs,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Vi}static parse(n,s){return new de(s).parse(n)}static parseInline(n,s){return new de(s).parseInline(n)}parse(n,s=!0){let a="";for(let u=0;u<n.length;u++){const l=n[u];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[l.type]){const h=l,g=this.options.extensions.renderers[h.type].call({parser:this},h);if(g!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type)){a+=g||"";continue}}switch(l.type){case"space":continue;case"hr":a+=this.renderer.hr();continue;case"heading":{const h=l;a+=this.renderer.heading(this.parseInline(h.tokens),h.depth,fd(this.parseInline(h.tokens,this.textRenderer)));continue}case"code":{const h=l;a+=this.renderer.code(h.text,h.lang,!!h.escaped);continue}case"table":{const h=l;let g="",x="";for(let w=0;w<h.header.length;w++)x+=this.renderer.tablecell(this.parseInline(h.header[w].tokens),{header:!0,align:h.align[w]});g+=this.renderer.tablerow(x);let k="";for(let w=0;w<h.rows.length;w++){const q=h.rows[w];x="";for(let C=0;C<q.length;C++)x+=this.renderer.tablecell(this.parseInline(q[C].tokens),{header:!1,align:h.align[C]});k+=this.renderer.tablerow(x)}a+=this.renderer.table(g,k);continue}case"blockquote":{const h=l,g=this.parse(h.tokens);a+=this.renderer.blockquote(g);continue}case"list":{const h=l,g=h.ordered,x=h.start,k=h.loose;let w="";for(let q=0;q<h.items.length;q++){const C=h.items[q],F=C.checked,Q=C.task;let ft="";if(C.task){const Z=this.renderer.checkbox(!!F);k?C.tokens.length>0&&C.tokens[0].type==="paragraph"?(C.tokens[0].text=Z+" "+C.tokens[0].text,C.tokens[0].tokens&&C.tokens[0].tokens.length>0&&C.tokens[0].tokens[0].type==="text"&&(C.tokens[0].tokens[0].text=Z+" "+C.tokens[0].tokens[0].text)):C.tokens.unshift({type:"text",text:Z+" "}):ft+=Z+" "}ft+=this.parse(C.tokens,k),w+=this.renderer.listitem(ft,Q,!!F)}a+=this.renderer.list(w,g,x);continue}case"html":{const h=l;a+=this.renderer.html(h.text,h.block);continue}case"paragraph":{const h=l;a+=this.renderer.paragraph(this.parseInline(h.tokens));continue}case"text":{let h=l,g=h.tokens?this.parseInline(h.tokens):h.text;for(;u+1<n.length&&n[u+1].type==="text";)h=n[++u],g+=`
`+(h.tokens?this.parseInline(h.tokens):h.text);a+=s?this.renderer.paragraph(g):g;continue}default:{const h='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(h),"";throw new Error(h)}}}return a}parseInline(n,s){s=s||this.renderer;let a="";for(let u=0;u<n.length;u++){const l=n[u];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[l.type]){const h=this.options.extensions.renderers[l.type].call({parser:this},l);if(h!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(l.type)){a+=h||"";continue}}switch(l.type){case"escape":{const h=l;a+=s.text(h.text);break}case"html":{const h=l;a+=s.html(h.text);break}case"link":{const h=l;a+=s.link(h.href,h.title,this.parseInline(h.tokens,s));break}case"image":{const h=l;a+=s.image(h.href,h.title,h.text);break}case"strong":{const h=l;a+=s.strong(this.parseInline(h.tokens,s));break}case"em":{const h=l;a+=s.em(this.parseInline(h.tokens,s));break}case"codespan":{const h=l;a+=s.codespan(h.text);break}case"br":a+=s.br();break;case"del":{const h=l;a+=s.del(this.parseInline(h.tokens,s));break}case"text":{const h=l;a+=s.text(h.text);break}default:{const h='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(h),"";throw new Error(h)}}}return a}}class Hn{constructor(n){y(this,"options");this.options=n||Je}preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}}y(Hn,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var Qe,zi,pc,Vu;const Ve=new(Vu=class{constructor(...i){Eu(this,Qe);y(this,"defaults",{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null});y(this,"options",this.setOptions);y(this,"parse",jr(this,Qe,zi).call(this,fe.lex,de.parse));y(this,"parseInline",jr(this,Qe,zi).call(this,fe.lexInline,de.parseInline));y(this,"Parser",de);y(this,"Renderer",rs);y(this,"TextRenderer",Vi);y(this,"Lexer",fe);y(this,"Tokenizer",es);y(this,"Hooks",Hn);this.use(...i)}walkTokens(i,n){var a,u;let s=[];for(const l of i)switch(s=s.concat(n.call(this,l)),l.type){case"table":{const h=l;for(const g of h.header)s=s.concat(this.walkTokens(g.tokens,n));for(const g of h.rows)for(const x of g)s=s.concat(this.walkTokens(x.tokens,n));break}case"list":{const h=l;s=s.concat(this.walkTokens(h.items,n));break}default:{const h=l;(u=(a=this.defaults.extensions)==null?void 0:a.childTokens)!=null&&u[h.type]?this.defaults.extensions.childTokens[h.type].forEach(g=>{const x=h[g].flat(1/0);s=s.concat(this.walkTokens(x,n))}):h.tokens&&(s=s.concat(this.walkTokens(h.tokens,n)))}}return s}use(...i){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return i.forEach(s=>{const a={...s};if(a.async=this.defaults.async||a.async||!1,s.extensions&&(s.extensions.forEach(u=>{if(!u.name)throw new Error("extension name required");if("renderer"in u){const l=n.renderers[u.name];n.renderers[u.name]=l?function(...h){let g=u.renderer.apply(this,h);return g===!1&&(g=l.apply(this,h)),g}:u.renderer}if("tokenizer"in u){if(!u.level||u.level!=="block"&&u.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const l=n[u.level];l?l.unshift(u.tokenizer):n[u.level]=[u.tokenizer],u.start&&(u.level==="block"?n.startBlock?n.startBlock.push(u.start):n.startBlock=[u.start]:u.level==="inline"&&(n.startInline?n.startInline.push(u.start):n.startInline=[u.start]))}"childTokens"in u&&u.childTokens&&(n.childTokens[u.name]=u.childTokens)}),a.extensions=n),s.renderer){const u=this.defaults.renderer||new rs(this.defaults);for(const l in s.renderer){if(!(l in u))throw new Error(`renderer '${l}' does not exist`);if(l==="options")continue;const h=l,g=s.renderer[h],x=u[h];u[h]=(...k)=>{let w=g.apply(u,k);return w===!1&&(w=x.apply(u,k)),w||""}}a.renderer=u}if(s.tokenizer){const u=this.defaults.tokenizer||new es(this.defaults);for(const l in s.tokenizer){if(!(l in u))throw new Error(`tokenizer '${l}' does not exist`);if(["options","rules","lexer"].includes(l))continue;const h=l,g=s.tokenizer[h],x=u[h];u[h]=(...k)=>{let w=g.apply(u,k);return w===!1&&(w=x.apply(u,k)),w}}a.tokenizer=u}if(s.hooks){const u=this.defaults.hooks||new Hn;for(const l in s.hooks){if(!(l in u))throw new Error(`hook '${l}' does not exist`);if(l==="options")continue;const h=l,g=s.hooks[h],x=u[h];Hn.passThroughHooks.has(l)?u[h]=k=>{if(this.defaults.async)return Promise.resolve(g.call(u,k)).then(q=>x.call(u,q));const w=g.call(u,k);return x.call(u,w)}:u[h]=(...k)=>{let w=g.apply(u,k);return w===!1&&(w=x.apply(u,k)),w}}a.hooks=u}if(s.walkTokens){const u=this.defaults.walkTokens,l=s.walkTokens;a.walkTokens=function(h){let g=[];return g.push(l.call(this,h)),u&&(g=g.concat(u.call(this,h))),g}}this.defaults={...this.defaults,...a}}),this}setOptions(i){return this.defaults={...this.defaults,...i},this}lexer(i,n){return fe.lex(i,n??this.defaults)}parser(i,n){return de.parse(i,n??this.defaults)}},Qe=new WeakSet,zi=function(i,n){return(s,a)=>{const u={...a},l={...this.defaults,...u};this.defaults.async===!0&&u.async===!1&&(l.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),l.async=!0);const h=jr(this,Qe,pc).call(this,!!l.silent,!!l.async);if(s==null)return h(new Error("marked(): input parameter is undefined or null"));if(typeof s!="string")return h(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));if(l.hooks&&(l.hooks.options=l),l.async)return Promise.resolve(l.hooks?l.hooks.preprocess(s):s).then(g=>i(g,l)).then(g=>l.hooks?l.hooks.processAllTokens(g):g).then(g=>l.walkTokens?Promise.all(this.walkTokens(g,l.walkTokens)).then(()=>g):g).then(g=>n(g,l)).then(g=>l.hooks?l.hooks.postprocess(g):g).catch(h);try{l.hooks&&(s=l.hooks.preprocess(s));let g=i(s,l);l.hooks&&(g=l.hooks.processAllTokens(g)),l.walkTokens&&this.walkTokens(g,l.walkTokens);let x=n(g,l);return l.hooks&&(x=l.hooks.postprocess(x)),x}catch(g){return h(g)}}},pc=function(i,n){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,i){const a="<p>An error occurred:</p><pre>"+Gt(s.message+"",!0)+"</pre>";return n?Promise.resolve(a):a}if(n)return Promise.reject(s);throw s}},Vu);function rt(i,n){return Ve.parse(i,n)}function Yr(i){var n;return((n=i.extraData)==null?void 0:n.isAgentConversation)===!0}rt.options=rt.setOptions=function(i){return Ve.setOptions(i),rt.defaults=Ve.defaults,$u(rt.defaults),rt},rt.getDefaults=od,rt.defaults=Je,rt.use=function(...i){return Ve.use(...i),rt.defaults=Ve.defaults,$u(rt.defaults),rt},rt.walkTokens=function(i,n){return Ve.walkTokens(i,n)},rt.parseInline=Ve.parseInline,rt.Parser=de,rt.parser=de.parse,rt.Renderer=rs,rt.TextRenderer=Vi,rt.Lexer=fe,rt.lexer=fe.lex,rt.Tokenizer=es,rt.Hooks=Hn,rt.parse=rt,rt.options,rt.setOptions,rt.use,rt.walkTokens,rt.parseInline,de.parse,fe.lex;var Ad=(i=>(i[i.active=0]="active",i[i.inactive=1]="inactive",i))(Ad||{});const gp=async(i,n)=>{if(!Yr(i)||n.chatItemType!==void 0||!(n!=null&&n.request_message))return;const s=Sf.create();s.setFlag(Rt.start);try{await qd(i,n,s)}catch(a){s.setFlag(Rt.exceptionThrown),console.error("Failed to classify and distill memories",a)}finally{s.setFlag(Rt.end),i.extensionClient.reportAgentSessionEvent({eventName:If.classifyAndDistill,conversationId:i.id,eventData:{classifyAndDistillData:s}})}},qd=async(i,n,s)=>{const a=crypto.randomUUID();s.setRequestId(Rt.memoriesRequestId,a);const u=Mu(i).id;s.setFlag(Rt.startSendSilentExchange);const{responseText:l,requestId:h}=await i.sendSilentExchange({model_id:i.selectedModelId??void 0,request_message:n.request_message,disableRetrieval:!0,disableSelectedCodeDetails:!0,memoriesInfo:{isClassifyAndDistill:!0}});if(s.setStringStats(Rt.sendSilentExchangeResponseStats,l),h?s.setRequestId(Rt.sendSilentExchangeRequestId,h):s.setFlag(Rt.noRequestId),Mu(i).id!==u)return void s.setFlag(Rt.conversationChanged);let g;try{let k=l;try{const w=rt.lexer(l);w.length===1&&w[0].type==="code"&&w[0].text&&(k=w[0].text)}catch(w){console.warn("Markdown lexing failed during response parsing, attempting to parse as raw string:",w)}g=JSON.parse(k)}catch{throw s.setFlag(Rt.invalidResponse),new Error("Invalid response from classify and distill")}if(typeof g.explanation!="string"||typeof g.content!="string"||typeof g.worthRemembering!="boolean")throw s.setFlag(Rt.invalidResponse),new Error("Invalid response from classify and distill");s.setStringStats(Rt.explanationStats,g.explanation),s.setStringStats(Rt.contentStats,g.content),s.setFlag(Rt.worthRemembering,g.worthRemembering);const x=g.worthRemembering?g.content:void 0;x&&Ud(i,x,a,s)},_p=i=>{var a;const n=i.chatHistory.at(-1);if(!n||!St(n))return Ye.notRunning;if(!(n.status===tt.success||n.status===tt.failed||n.status===tt.cancelled))return Ye.running;const s=(((a=n.structured_output_nodes)==null?void 0:a.filter(u=>u.type===ht.TOOL_USE&&!!u.tool_use))??[]).at(-1);if(!s)return Ye.notRunning;switch(i.getToolUseState(n.request_id,s.tool_use.tool_use_id).phase){case Fe.runnable:return Ye.awaitingUserAction;case Fe.cancelled:return Ye.notRunning;default:return Ye.running}},Hi=i=>St(i)&&!!i.request_message,is=i=>i.chatHistory.findLast(n=>Hi(n)),yp=i=>{const n=is(i);if(n!=null&&n.structured_output_nodes){const s=n.structured_output_nodes.find(a=>a.type===ht.AGENT_MEMORY);if(s)try{const{memoriesRequestId:a,memory:u}=JSON.parse(s.content);return{memoriesRequestId:a,memory:u}}catch(a){return void console.error("Failed to parse JSON from agent memory node",a)}}},mp=i=>Md(i,n=>{var s;return!!((s=n.structured_output_nodes)!=null&&s.some(a=>{var u;return a.type===ht.TOOL_USE&&((u=a.tool_use)==null?void 0:u.tool_name)==="remember"}))}).length>0,Md=(i,n)=>{const s=is(i);return s!=null&&s.request_id?i.historyFrom(s.request_id,!0).filter(a=>St(a)&&(!n||n(a))):[]},vp=i=>{var a;const n=i.chatHistory.at(-1);if(!(n!=null&&n.request_id)||!St(n))return!1;const s=((a=n.structured_output_nodes)==null?void 0:a.filter(u=>u.type===ht.TOOL_USE))??[];for(const u of s)if(u.tool_use&&i.getToolUseState(n.request_id,u.tool_use.tool_use_id).phase===Fe.runnable)return i.updateToolUseState({requestId:n.request_id,toolUseId:u.tool_use.tool_use_id,phase:Fe.cancelled}),!0;return!1},Ud=(i,n,s,a)=>{const u=JSON.stringify({memoriesRequestId:s,memory:n}),l=is(i);l!=null&&l.request_id?(a.setRequestId(Rt.lastUserExchangeRequestId,l.request_id),i.updateChatItem(l.request_id,{...l,structured_output_nodes:[...l.structured_output_nodes??[],{id:0,type:ht.AGENT_MEMORY,content:u}]})):a.setFlag(Rt.noLastUserExchangeRequestId)},xp=(i,n)=>{const s=is(i);if(!(s!=null&&s.request_id)||s.request_id!==n)return!1;const a=(s.structured_output_nodes||[]).filter(u=>u.type!==ht.AGENT_MEMORY);return a.length!==(s.structured_output_nodes||[]).length&&(i.updateChatItem(n,{...s,structured_output_nodes:a}),!0)};function Od(i,n){const s=i.customPersonalityPrompts;if(s)switch(n){case It.DEFAULT:if(s.agent&&s.agent.trim()!=="")return s.agent;break;case It.PROTOTYPER:if(s.prototyper&&s.prototyper.trim()!=="")return s.prototyper;break;case It.BRAINSTORM:if(s.brainstorm&&s.brainstorm.trim()!=="")return s.brainstorm;break;case It.REVIEWER:if(s.reviewer&&s.reviewer.trim()!=="")return s.reviewer}return Fd[n]}const Fd={[It.DEFAULT]:`
# Agent Auggie Personality Description
You are Augment Agent, an agentic coding AI assistant.
Focus on helping the user with their coding tasks efficiently.

## Rules:
- You have no restrictions on the tools you may use
- Follow the original system instructions
  `,[It.PROTOTYPER]:`
# Prototyper Auggie Personality Description
You are Prototyper Auggie, an agentic coding AI assistant focused on building prototypes and visual applications.

## Your approach:
- Be fast and action-oriented
- Implement things quickly to show results
- Open webpages to demonstrate functionality
- Focus on building something visual and interactive
- Use modern frameworks and tools to create working prototypes
- Prioritize getting a working demo over perfect architecture
- Show progress frequently with visual results
- Prefer to act and run tools, rather than asking for permission
- Only ask for permission if there is something potentially very dangerous or irreversible

## Implementation preferences:
- When user does not specify which frameworks to use, default to modern frameworks, e.g. React with vite or next.js
- Initialize projects using CLI tools instead of writing from scratch
- For database and auth, use Supabase as a good default option
- Before using open-browser to show the app, use curl to check for errors
- Remember that modern frameworks have hot reload, so avoid calling open-browser multiple times

## Rules:
- For extremely destructive or irreversible actions, you should ask for permission
- For other tasks, you must proceed without asking for permission
  `,[It.BRAINSTORM]:`
# Brainstorm Auggie Personality Description
You are Brainstorm Auggie, an agentic coding AI assistant focused on planning and brainstorming solutions.

## Your approach:
- Be slow, careful, and thorough in your analysis
- Look through all upstream/downstream APIs to understand implications
- Focus on finding a comprehensive plan that solves the user's query
- Do not run commands, create code, or implement solutions directly
- Your job is to be introspective and think deeply about the problem
- Brainstorm multiple approaches and evaluate their tradeoffs
- Consider edge cases and potential issues with each approach

## Planning preferences:
- Analyze the codebase thoroughly before suggesting changes
- Consider multiple implementation options with pros and cons
- Identify potential risks and challenges for each approach
- Create detailed, step-by-step plans for implementation
- Provide reasoning for architectural decisions
- Consider performance, maintainability, and scalability
- Do not execute the plan - your role is to provide guidance only

## Rules:
- Prefer information gathering and non-destructive tools
- Prefer non-destructive and non-modifying tools
- You must never execute code, modify the codebase, or make changes
- Consider using Mermaid diagrams to help visualize complex concepts
- Once you have a proposal, please examine it critically, and do a revision before finalizing
  `,[It.REVIEWER]:`
# Reviewer Auggie Personality Description
You are Reviewer Auggie, an agentic coding AI assistant focused on reviewing code changes and identifying potential issues.

## Your approach:
- Act like a code detective to find potential bugs and issues
- Use git commands to analyze changes against the merge base
- Be super inquisitive and look for anything suspicious
- Build a mental model of what is happening in the code change
- Analyze API implications and downstream effects
- Guard the codebase from potential negative side effects
- Focus on understanding the changes from first principles

## Review preferences:
- Use git and GitHub tools to get code history information
- Compare changes against the logical base or merge base
- Look for edge cases and potential bugs
- Analyze API contracts and potential breaking changes
- Consider performance implications
- Check for security vulnerabilities
- Verify test coverage for the changes

## Rules:
- Use git commands and GitHub API to analyze code changes
- Be thorough and methodical in your analysis
- Focus on finding potential issues rather than implementing solutions
- Provide constructive feedback with specific examples
- Consider both the technical implementation and the broader impact
  `},Qr="temp-fe";class Wt{constructor(n,s,a,u){y(this,"_state");y(this,"_subscribers",new Set);y(this,"_focusModel",new Tf);y(this,"_onSendExchangeListeners",[]);y(this,"_onNewConversationListeners",[]);y(this,"_onHistoryDeleteListeners",[]);y(this,"_onBeforeChangeConversationListeners",[]);y(this,"_totalCharactersCacheThrottleMs",1e3);y(this,"_totalCharactersStore");y(this,"subscribe",n=>(this._subscribers.add(n),n(this),()=>{this._subscribers.delete(n)}));y(this,"setConversation",(n,s=!0,a=!0)=>{const u=n.id!==this._state.id;u&&a&&(n.toolUseStates=Object.fromEntries(Object.entries(n.toolUseStates??{}).map(([h,g])=>{if(g.requestId&&g.toolUseId){const{requestId:x,toolUseId:k}=Cu(h);return x===g.requestId&&k===g.toolUseId||console.warn("Tool use state key does not match request and tool use IDs. Got key ",h,"but object has ",Ri(g)),[h,g]}return[h,{...g,...Cu(h)}]})),(n=this._notifyBeforeChangeConversation(this._state,n)).lastInteractedAtIso=new Date().toISOString()),s&&u&&this.isValid&&(this.saveDraftActiveContextIds(),this._unloadContextFromConversation(this._state));const l=Wt.isEmpty(n);if(u&&l){const h=this._state.draftExchange;h&&(n.draftExchange=h)}return this._state=n,this._focusModel.setItems(this._state.chatHistory.filter(St)),this._focusModel.initFocusIdx(-1),this._subscribers.forEach(h=>h(this)),this._saveConversation(this._state),u&&(this._loadContextFromConversation(n),this.loadDraftActiveContextIds(),this._onNewConversationListeners.forEach(h=>h())),!0});y(this,"update",n=>{this.setConversation({...this._state,...n}),this._totalCharactersStore.updateStore()});y(this,"toggleIsPinned",()=>{this.update({isPinned:!this.isPinned})});y(this,"setName",n=>{this.update({name:n})});y(this,"setSelectedModelId",n=>{this.update({selectedModelId:n})});y(this,"updateFeedback",(n,s)=>{this.update({feedbackStates:{...this._state.feedbackStates,[n]:s}})});y(this,"updateToolUseState",n=>{this.update({toolUseStates:{...this._state.toolUseStates,[Ri(n)]:n}})});y(this,"getToolUseState",(n,s)=>n===void 0||s===void 0||this.toolUseStates===void 0?{phase:Fe.unknown,requestId:n??"",toolUseId:s??""}:this.toolUseStates[Ri({requestId:n,toolUseId:s})]||{phase:Fe.new});y(this,"getLastToolUseState",()=>{var a;const n=this.lastExchange;if(!n)return{phase:Fe.unknown};const s=function(u=[]){let l;for(const h of u){if(h.type===ht.TOOL_USE)return h;h.type===ht.TOOL_USE_START&&(l=h)}return l}(n==null?void 0:n.structured_output_nodes);return s?this.getToolUseState(n.request_id,(a=s.tool_use)==null?void 0:a.tool_use_id):{phase:Fe.unknown}});y(this,"addExchange",n=>{const s=[...this._state.chatHistory,n];let a;St(n)&&(a=n.request_id?{...this._state.feedbackStates,[n.request_id]:{selectedRating:ac.unset,feedbackNote:""}}:void 0),this.update({chatHistory:s,...a?{feedbackStates:a}:{},lastUrl:void 0})});y(this,"resetShareUrl",()=>{this.update({lastUrl:void 0})});y(this,"updateExchangeById",(n,s,a=!1)=>{var g;const u=this.exchangeWithRequestId(s);if(u===null)return console.warn("No exchange with this request ID found."),!1;a&&n.response_text!==void 0&&(n.response_text=(u.response_text??"")+(n.response_text??"")),a&&(n.structured_output_nodes=function(x=[]){const k=id(x);return k&&k.type===ht.TOOL_USE?x.filter(w=>w.type!==ht.TOOL_USE_START):x}([...u.structured_output_nodes??[],...n.structured_output_nodes??[]])),n.stop_reason!==u.stop_reason&&u.stop_reason&&n.stop_reason===Ff.REASON_UNSPECIFIED&&(n.stop_reason=u.stop_reason),a&&n.workspace_file_chunks!==void 0&&(n.workspace_file_chunks=[...u.workspace_file_chunks??[],...n.workspace_file_chunks??[]]);const l=(g=(n.structured_output_nodes||[]).find(x=>x.type===ht.MAIN_TEXT_FINISHED))==null?void 0:g.content;l&&l!==n.response_text&&(n.response_text=l);let h=this._state.isShareable||$i({...u,...n});return this.update({chatHistory:this.chatHistory.map(x=>x.request_id===s?{...x,...n}:x),isShareable:h}),!0});y(this,"clearMessagesFromHistory",n=>{this.update({chatHistory:this.chatHistory.filter(s=>!s.request_id||!n.has(s.request_id))}),this._extensionClient.clearMetadataFor({requestIds:Array.from(n)})});y(this,"clearHistory",()=>{this._extensionClient.clearMetadataFor({requestIds:this.requestIds}),this.update({chatHistory:[]})});y(this,"clearHistoryFrom",async(n,s=!0)=>{const a=this.historyFrom(n,s),u=a.map(l=>l.request_id).filter(l=>l!==void 0);this.update({chatHistory:this.historyTo(n,!s)}),this._extensionClient.clearMetadataFor({requestIds:u}),a.forEach(l=>{this._onHistoryDeleteListeners.forEach(h=>h(l))})});y(this,"clearMessageFromHistory",n=>{this.update({chatHistory:this.chatHistory.filter(s=>s.request_id!==n)}),this._extensionClient.clearMetadataFor({requestIds:[n]})});y(this,"historyTo",(n,s=!1)=>{const a=this.chatHistory.findIndex(u=>u.request_id===n);return a===-1?[]:this.chatHistory.slice(0,s?a+1:a)});y(this,"historyFrom",(n,s=!0)=>{const a=this.chatHistory.findIndex(u=>u.request_id===n);return a===-1?[]:this.chatHistory.slice(s?a:a+1)});y(this,"resendLastExchange",async()=>{const n=this.lastExchange;if(n&&!this.awaitingReply)return this.resendTurn(n)});y(this,"resendTurn",n=>this.awaitingReply?Promise.resolve():(this._removeTurn(n),this.sendExchange({chatItemType:n.chatItemType,request_message:n.request_message,rich_text_json_repr:n.rich_text_json_repr,status:tt.draft,mentioned_items:n.mentioned_items,structured_request_nodes:n.structured_request_nodes,disableSelectedCodeDetails:n.disableSelectedCodeDetails,chatHistory:n.chatHistory,model_id:n.model_id},!1,n.request_id)));y(this,"_removeTurn",n=>{this.update({chatHistory:this.chatHistory.filter(s=>s!==n&&(!n.request_id||s.request_id!==n.request_id))})});y(this,"exchangeWithRequestId",n=>this.chatHistory.find(s=>s.request_id===n)||null);y(this,"resetTotalCharactersCache",()=>{this._totalCharactersStore.resetCache()});y(this,"historySummaryVersion",1);y(this,"markSeen",async n=>{if(!n.request_id||!this.chatHistory.find(a=>a.request_id===n.request_id))return;const s={seen_state:At.seen};this.update({chatHistory:this.chatHistory.map(a=>a.request_id===n.request_id?{...a,...s}:a)})});y(this,"createStructuredRequestNodes",n=>this._jsonToStructuredRequest(n));y(this,"saveDraftMentions",n=>{if(!this.draftExchange)return;const s=n.filter(a=>!a.personality);this.update({draftExchange:{...this.draftExchange,mentioned_items:s}})});y(this,"saveDraftActiveContextIds",()=>{const n=this._specialContextInputModel.recentActiveItems.map(s=>s.id);this.update({draftActiveContextIds:n})});y(this,"loadDraftActiveContextIds",()=>{const n=new Set(this.draftActiveContextIds??[]),s=this._specialContextInputModel.recentItems.filter(u=>n.has(u.id)||u.recentFile||u.selection||u.sourceFolder),a=this._specialContextInputModel.recentItems.filter(u=>!(n.has(u.id)||u.recentFile||u.selection||u.sourceFolder));this._specialContextInputModel.markItemsActive(s.reverse()),this._specialContextInputModel.markItemsInactive(a.reverse())});y(this,"saveDraftExchange",(n,s)=>{var h,g,x;const a=n!==((h=this.draftExchange)==null?void 0:h.request_message),u=s!==((g=this.draftExchange)==null?void 0:g.rich_text_json_repr);if(!a&&!u)return;const l=(x=this.draftExchange)==null?void 0:x.mentioned_items;this.update({draftExchange:{request_message:n,rich_text_json_repr:s,mentioned_items:l,status:tt.draft}})});y(this,"clearDraftExchange",()=>{const n=this.draftExchange;return this.update({draftExchange:void 0}),n});y(this,"sendDraftExchange",()=>{if(this._extensionClient.triggerUsedChatMetric(),!this.canSendDraft||!this.draftExchange)return!1;const n=this.clearDraftExchange();if(!n)return!1;const s=this._chatFlagModel.enableChatMultimodal&&n.rich_text_json_repr?this._jsonToStructuredRequest(n.rich_text_json_repr):void 0;return this.sendExchange({...n,structured_request_nodes:s,model_id:this.selectedModelId??void 0}).then(()=>{var h,g;const a=!this.name&&this.chatHistory.length===1&&((h=this.firstExchange)==null?void 0:h.request_id)===this.chatHistory[0].request_id,u=Yr(this)&&((g=this._state.extraData)==null?void 0:g.hasAgentOnboarded)&&(l=this.chatHistory,l.filter(x=>Hi(x))).length===2;var l;this._chatFlagModel.summaryTitles&&(a||u)&&this.updateConversationTitle()}).finally(()=>{var a;Yr(this)&&this._extensionClient.reportAgentRequestEvent({eventName:Ru.sentUserMessage,conversationId:this.id,requestId:((a=this.lastExchange)==null?void 0:a.request_id)??"UNKNOWN_REQUEST_ID",chatHistoryLength:this.chatHistory.length})}),this.focusModel.setFocusIdx(void 0),!0});y(this,"cancelMessage",async()=>{var n;this.canCancelMessage&&((n=this.lastExchange)!=null&&n.request_id)&&(this.updateExchangeById({status:tt.cancelled},this.lastExchange.request_id),await this._extensionClient.cancelChatStream(this.lastExchange.request_id))});y(this,"sendInstructionExchange",async(n,s)=>{let a=`${Qr}-${crypto.randomUUID()}`;const u={status:tt.sent,request_id:a,request_message:n,model_id:this.selectedModelId??void 0,structured_output_nodes:[],seen_state:At.unseen,timestamp:new Date().toISOString()};this.addExchange(u);for await(const l of this._extensionClient.sendInstructionMessage(u,s)){if(!this.updateExchangeById(l,a,!0))return;a=l.request_id||a}});y(this,"updateConversationTitle",async()=>{const{responseText:n}=await this.sendSummaryExchange();this.update({name:n})});y(this,"sendSummaryExchange",()=>{const n={status:tt.sent,request_message:"Please provide a clear and concise summary of our conversation so far. The summary must be less than 6 words long. The summary must contain the key points of the conversation. The summary must be in the form of a title which will represent the conversation. The response should not include any additional formatting such as wrapping the response with quotation marks.",model_id:this.selectedModelId??void 0,chatItemType:pn.summaryTitle,disableRetrieval:!0,disableSelectedCodeDetails:!0};return this.sendSilentExchange(n)});y(this,"generateCommitMessage",async()=>{let n=`${Qr}-${crypto.randomUUID()}`;const s={status:tt.sent,request_id:n,request_message:"Please generate a commit message based on the diff of my staged and unstaged changes.",model_id:this.selectedModelId??void 0,mentioned_items:[],seen_state:At.unseen,chatItemType:pn.generateCommitMessage,disableSelectedCodeDetails:!0,chatHistory:[],timestamp:new Date().toISOString()};this.addExchange(s);for await(const a of this._extensionClient.generateCommitMessage()){if(!this.updateExchangeById(a,n,!0))return;n=a.request_id||n}});y(this,"sendExchange",async(n,s=!1,a)=>{var g;this.updateLastInteraction();let u=`${Qr}-${crypto.randomUUID()}`,l=this._chatFlagModel.isModelIdValid(n.model_id)?n.model_id:void 0;if(this._chatFlagModel.doUseNewDraftFunctionality&&Wt.isNew(this._state)){const x=crypto.randomUUID(),k=this._state.id;try{await this._extensionClient.migrateConversationId(k,x)}catch(w){console.error("Failed to migrate conversation checkpoints:",w)}this._state={...this._state,id:x},this._saveConversation(this._state,!0),this._extensionClient.setCurrentConversation(x),this._subscribers.forEach(w=>w(this))}n=Gu(n);let h={status:tt.sent,request_id:u,request_message:n.request_message,rich_text_json_repr:n.rich_text_json_repr,model_id:l,mentioned_items:n.mentioned_items,structured_output_nodes:n.structured_output_nodes,seen_state:At.unseen,chatItemType:n.chatItemType,disableSelectedCodeDetails:n.disableSelectedCodeDetails,chatHistory:n.chatHistory,structured_request_nodes:n.structured_request_nodes,timestamp:new Date().toISOString()};this.addExchange(h),this._loadContextFromExchange(h),this._onSendExchangeListeners.forEach(x=>x(h)),this._chatFlagModel.useHistorySummary&&await this.maybeAddHistorySummaryNode()&&this._clearStaleHistorySummaryNodes(),h=await this._addIdeStateNode(h),this.updateExchangeById({structured_request_nodes:h.structured_request_nodes},u,!1);for await(const x of this.sendUserMessage(u,h,s,a)){if(((g=this.exchangeWithRequestId(u))==null?void 0:g.status)!==tt.sent||!this.updateExchangeById(x,u,!0))return;u=x.request_id||u}});y(this,"sendSuggestedQuestion",n=>{this.sendExchange({request_message:n,status:tt.draft}),this._extensionClient.triggerUsedChatMetric(),this._extensionClient.reportWebviewClientEvent(Ef.chatUseSuggestedQuestion)});y(this,"recoverAllExchanges",async()=>{await Promise.all(this.recoverableExchanges.map(this.recoverExchange))});y(this,"recoverExchange",async n=>{var u;if(!n.request_id||n.status!==tt.sent)return;let s=n.request_id;const a=(u=n.structured_output_nodes)==null?void 0:u.filter(l=>l.type===ht.AGENT_MEMORY);this.updateExchangeById({...n,response_text:"",structured_output_nodes:a??[]},s);for await(const l of this.getChatStream(n)){if(!this.updateExchangeById(l,s,!0))return;s=l.request_id||s}});y(this,"_loadContextFromConversation",n=>{n.chatHistory.forEach(s=>{St(s)&&this._loadContextFromExchange(s)})});y(this,"_loadContextFromExchange",n=>{n.mentioned_items&&(this._specialContextInputModel.updateItems(n.mentioned_items,[]),this._specialContextInputModel.markItemsActive(n.mentioned_items))});y(this,"_unloadContextFromConversation",n=>{n.chatHistory.forEach(s=>{St(s)&&this._unloadContextFromExchange(s)})});y(this,"_unloadContextFromExchange",n=>{n.mentioned_items&&this._specialContextInputModel.updateItems([],n.mentioned_items)});y(this,"updateLastInteraction",()=>{this.update({lastInteractedAtIso:new Date().toISOString()})});y(this,"_jsonToStructuredRequest",n=>{const s=[],a=l=>{var g;const h=s.at(-1);if((h==null?void 0:h.type)===ne.TEXT){const x=((g=h.text_node)==null?void 0:g.content)??"",k={...h,text_node:{content:x+l}};s[s.length-1]=k}else s.push({id:s.length,type:ne.TEXT,text_node:{content:l}})},u=l=>{var h,g,x,k;if(l.type==="doc"||l.type==="paragraph")for(const w of l.content??[])u(w);else if(l.type==="hardBreak")a(`
`);else if(l.type==="text")a(l.text??"");else if(l.type==="file"){if(typeof((h=l.attrs)==null?void 0:h.src)!="string")return void console.error("File source is not a string: ",(g=l.attrs)==null?void 0:g.src);if(l.attrs.isLoading)return;const w=(x=l.attrs)==null?void 0:x.title,q=Lf(w);Df(w)?s.push({id:s.length,type:ne.IMAGE_ID,image_id_node:{image_id:l.attrs.src,format:q}}):s.push({id:s.length,type:ne.FILE_ID,file_id_node:{file_id:l.attrs.src,file_name:w}})}else if(l.type==="mention"){const w=(k=l.attrs)==null?void 0:k.data;w&&oc(w)?s.push({id:s.length,type:ne.TEXT,text_node:{content:Od(this._chatFlagModel,w.personality.type)}}):a(`@\`${(w==null?void 0:w.name)??(w==null?void 0:w.id)}\``)}};return u(n),s});this._extensionClient=n,this._chatFlagModel=s,this._specialContextInputModel=a,this._saveConversation=u,this._state={...Wt.create()},this._totalCharactersStore=this._createTotalCharactersStore()}_createTotalCharactersStore(){return Yf(()=>{let n=0;const s=this._state.chatHistory;return this._convertHistoryToExchanges(s).forEach(a=>{n+=JSON.stringify(a).length}),this._state.draftExchange&&(n+=JSON.stringify(this._state.draftExchange).length),n},0,this._totalCharactersCacheThrottleMs)}async decidePersonaType(){var n;try{return(((n=(await this._extensionClient.getWorkspaceInfo()).trackedFileCount)==null?void 0:n.reduce((a,u)=>a+u,0))||0)<=4?It.PROTOTYPER:It.DEFAULT}catch(s){return console.error("Error determining persona type:",s),It.DEFAULT}}static create(n={}){const s=new Date().toISOString();return{id:n.id||crypto.randomUUID(),name:void 0,createdAtIso:s,lastInteractedAtIso:s,chatHistory:[],feedbackStates:{},toolUseStates:{},draftExchange:void 0,draftActiveContextIds:void 0,selectedModelId:void 0,requestIds:[],isPinned:!1,lastUrl:void 0,isShareable:!1,extraData:{},personaType:It.DEFAULT,...n}}static toSentenceCase(n){return n.charAt(0).toUpperCase()+n.slice(1)}static getDisplayName(n){if(n.name)return n.name;const s=n.chatHistory.find(St);return s&&s.request_message?Wt.toSentenceCase(s.request_message):Yr(n)?"New Agent":"New Chat"}static isNew(n){return n.id===ad}static isEmpty(n){var u;const s=n.chatHistory.filter(l=>St(l)),a=n.chatHistory.filter(l=>Ld(l));return s.length===0&&a.length===0&&!((u=n.draftExchange)!=null&&u.request_message)}static isNamed(n){return n.name!==void 0&&n.name!==""}static getTime(n,s){return s==="lastMessageTimestamp"?Wt.lastMessageTimestamp(n):s==="lastInteractedAt"?Wt.lastInteractedAt(n):Wt.createdAt(n)}static createdAt(n){return new Date(n.createdAtIso)}static lastInteractedAt(n){return new Date(n.lastInteractedAtIso)}static lastMessageTimestamp(n){var a;const s=(a=n.chatHistory.findLast(St))==null?void 0:a.timestamp;return s?new Date(s):this.createdAt(n)}static isValid(n){return n.id!==void 0&&(!Wt.isEmpty(n)||Wt.isNamed(n))}onBeforeChangeConversation(n){return this._onBeforeChangeConversationListeners.push(n),()=>{this._onBeforeChangeConversationListeners=this._onBeforeChangeConversationListeners.filter(s=>s!==n)}}_notifyBeforeChangeConversation(n,s){let a=s;for(const u of this._onBeforeChangeConversationListeners){const l=u(n,a);l!==void 0&&(a=l)}return a}get extraData(){return this._state.extraData}set extraData(n){this.update({extraData:n})}get focusModel(){return this._focusModel}get isValid(){return Wt.isValid(this._state)}get id(){return this._state.id}get name(){return this._state.name}get personaType(){return this._state.personaType??It.DEFAULT}get rootTaskUuid(){return this._state.rootTaskUuid}set rootTaskUuid(n){this.update({rootTaskUuid:n})}get displayName(){return Wt.getDisplayName(this._state)}get createdAtIso(){return this._state.createdAtIso}get createdAt(){return Wt.createdAt(this._state)}get chatHistory(){return this._state.chatHistory}get feedbackStates(){return this._state.feedbackStates}get toolUseStates(){return this._state.toolUseStates}get draftExchange(){return this._state.draftExchange}get selectedModelId(){return this._state.selectedModelId}get isPinned(){return!!this._state.isPinned}get extensionClient(){return this._extensionClient}addChatItem(n){this.addExchange(n)}get requestIds(){return this._state.chatHistory.map(n=>n.request_id).filter(n=>n!==void 0)}get hasDraft(){var a;const n=(((a=this.draftExchange)==null?void 0:a.request_message)??"").trim()!=="",s=this.hasImagesInDraft();return n||s}hasImagesInDraft(){var a;const n=(a=this.draftExchange)==null?void 0:a.rich_text_json_repr;if(!n)return!1;const s=u=>Array.isArray(u)?u.some(s):!!u&&(u.type==="file"||!(!u.content||!Array.isArray(u.content))&&u.content.some(s));return s(n)}get canSendDraft(){return this.hasDraft&&!this.awaitingReply}get canCancelMessage(){return this.awaitingReply}get firstExchange(){return this.chatHistory.find(St)??null}get lastExchange(){return this.chatHistory.findLast(St)??null}get canClearHistory(){return this._state.chatHistory.length!==0&&!this.awaitingReply}get recoverableExchanges(){return this._state.chatHistory.filter(n=>St(n)&&n.status===tt.sent)}get successfulMessages(){return this._state.chatHistory.filter(n=>$i(n)||jn(n)||Gr(n))}get totalCharactersStore(){return this._totalCharactersStore}_convertHistoryToExchanges(n){if(n.length===0)return[];const s=n.findLastIndex(u=>Gr(u)&&u.summaryVersion===this.historySummaryVersion);this._chatFlagModel.useHistorySummary&&s>0&&(console.info("Using history summary node found at index %d",s),n=n.slice(s));const a=[];for(const u of n)if($i(u))a.push(Wu(u));else if(jn(u)&&u.fromTimestamp!==void 0&&u.toTimestamp!==void 0){if(u.revertTarget){const l=$d(u,1),h={request_message:"",response_text:"",request_id:u.request_id||crypto.randomUUID(),request_nodes:[l],response_nodes:[]};a.push(h)}}else this._chatFlagModel.useHistorySummary&&Gr(u)&&u.summaryVersion===this.historySummaryVersion&&a.push(Wu(u));return a}get awaitingReply(){return this.lastExchange!==null&&this.lastExchange.status===tt.sent}get lastInteractedAtIso(){return this._state.lastInteractedAtIso}get draftActiveContextIds(){return this._state.draftActiveContextIds}async sendSilentExchange(n){const s=crypto.randomUUID();let a,u="";const l=await this._addIdeStateNode(Gu({...n,request_id:s,status:tt.sent,timestamp:new Date().toISOString()}));for await(const h of this.sendUserMessage(s,l,!0))h.response_text&&(u+=h.response_text),h.request_id&&(a=h.request_id);return{responseText:u,requestId:a}}async*getChatStream(n){n.request_id&&(yield*this._extensionClient.getExistingChatStream(n,{flags:this._chatFlagModel}))}_createStreamStateHandlers(n,s,a){return[]}async*sendUserMessage(n,s,a,u){var q;const l=this._specialContextInputModel.chatActiveContext;let h;if(s.chatHistory!==void 0)h=s.chatHistory;else{let C=this.successfulMessages;if(s.chatItemType===pn.summaryTitle){const F=C.findIndex(Q=>Q.chatItemType!==pn.agentOnboarding&&Hi(Q));F!==-1&&(C=C.slice(F))}h=this._convertHistoryToExchanges(C)}let g=this.personaType;if(s.structured_request_nodes){const C=s.structured_request_nodes.find(F=>F.type===ne.CHANGE_PERSONALITY);C&&C.change_personality_node&&(g=C.change_personality_node.personality_type)}const x={text:s.request_message,chatHistory:h,silent:a,modelId:s.model_id,context:l,userSpecifiedFiles:l.userSpecifiedFiles,externalSourceIds:(q=l.externalSources)==null?void 0:q.map(C=>C.id),disableRetrieval:s.disableRetrieval??!1,disableSelectedCodeDetails:s.disableSelectedCodeDetails??!1,nodes:s.structured_request_nodes,memoriesInfo:s.memoriesInfo,personaType:g,conversationId:this.id,createdTimestamp:Date.now(),requestIdOverride:u},k=this._createStreamStateHandlers(n,x,{flags:this._chatFlagModel}),w=this._extensionClient.startChatStreamWithRetry(n,x,{flags:this._chatFlagModel});for await(const C of w){let F=C;for(const Q of k)F=Q.handleChunk(F)??F;yield F}for(const C of k)yield*C.handleComplete()}onSendExchange(n){return this._onSendExchangeListeners.push(n),()=>{this._onSendExchangeListeners=this._onSendExchangeListeners.filter(s=>s!==n)}}onNewConversation(n){return this._onNewConversationListeners.push(n),()=>{this._onNewConversationListeners=this._onNewConversationListeners.filter(s=>s!==n)}}onHistoryDelete(n){return this._onHistoryDeleteListeners.push(n),()=>{this._onHistoryDeleteListeners=this._onHistoryDeleteListeners.filter(s=>s!==n)}}updateChatItem(n,s){return this.chatHistory.find(a=>a.request_id===n)===null?(console.warn("No exchange with this request ID found."),!1):(this.update({chatHistory:this.chatHistory.map(a=>a.request_id===n?{...a,...s}:a)}),!0)}async _addIdeStateNode(n){let s,a=(n.structured_request_nodes??[]).filter(u=>u.type!==ne.IDE_STATE);try{s=await this._extensionClient.getChatRequestIdeState()}catch(u){console.error("Failed to add IDE state to exchange:",u)}return s?(a=[...a,{id:gc(a)+1,type:ne.IDE_STATE,ide_state_node:s}],{...n,structured_request_nodes:a}):n}async maybeAddHistorySummaryNode(){var Ft,Zt,ke;const n=this._chatFlagModel.historySummaryPrompt;if(!n||n.trim()==="")return!1;const s=this._convertHistoryToExchanges(this.chatHistory),[a,u]=Cf(s,this._chatFlagModel.historySummaryLowerChars,this._chatFlagModel.historySummaryMaxChars);if(a.length===0)return!1;const l=JSON.stringify(s).length,h=JSON.stringify(a).length,g=JSON.stringify(u).length,x={totalHistoryCharCount:l,totalHistoryExchangeCount:s.length,headCharCount:h,headExchangeCount:a.length,headLastRequestId:((Ft=a.at(-1))==null?void 0:Ft.request_id)??"",tailCharCount:g,tailExchangeCount:u.length,tailLastRequestId:((Zt=u.at(-1))==null?void 0:Zt.request_id)??"",summaryCharCount:0,summarizationDurationMs:0};let k=((ke=a.at(-1))==null?void 0:ke.response_nodes)??[],w=k.filter(at=>at.type===ht.TOOL_USE);w.length>0&&(a.at(-1).response_nodes=k.filter(at=>at.type!==ht.TOOL_USE)),console.info("Summarizing %d turns of conversation history.",a.length);const q=Date.now(),{responseText:C,requestId:F}=await this.sendSilentExchange({request_message:n,disableRetrieval:!0,disableSelectedCodeDetails:!0,chatHistory:a}),Q=Date.now();x.summaryCharCount=C.length,x.summarizationDurationMs=Q-q,this._extensionClient.reportAgentRequestEvent({eventName:Ru.chatHistorySummarization,conversationId:this.id,requestId:F??"UNKNOWN_REQUEST_ID",chatHistoryLength:this.chatHistory.length,eventData:{chatHistorySummarizationData:x}});const ft={chatItemType:pn.historySummary,summaryVersion:this.historySummaryVersion,request_id:F,request_message:n,response_text:C,structured_output_nodes:[{id:w.map(at=>at.id).reduce((at,Le)=>Math.max(at,Le),-1)+1,type:ht.RAW_RESPONSE,content:C},...w],status:tt.success,seen_state:At.seen,timestamp:new Date().toISOString()},Z=this.chatHistory.findLastIndex(at=>at.request_id===a.at(-1).request_id)+1;console.info("Adding a history summary node at index %d",Z);const xt=[...this._state.chatHistory];return xt.splice(Z,0,ft),this.update({chatHistory:xt}),!0}_clearStaleHistorySummaryNodes(){this.update({chatHistory:this.chatHistory.filter(n=>!Gr(n)||n.summaryVersion===this.historySummaryVersion)})}}function $d(i,n){const s=(jn(i),i.fromTimestamp),a=(jn(i),i.toTimestamp),u=jn(i)&&i.revertTarget!==void 0;return{id:n,type:ne.CHECKPOINT_REF,checkpoint_ref_node:{request_id:i.request_id||"",from_timestamp:s,to_timestamp:a,source:u?Of.CHECKPOINT_REVERT:void 0}}}function Wu(i){const n=(i.structured_output_nodes??[]).filter(s=>s.type===ht.RAW_RESPONSE||s.type===ht.TOOL_USE||s.type===ht.TOOL_USE_START).map(s=>s.type===ht.TOOL_USE_START?{...s,tool_use:{...s.tool_use,input_json:"{}"},type:ht.TOOL_USE}:s);return{request_message:i.request_message,response_text:i.response_text??"",request_id:i.request_id||"",request_nodes:i.structured_request_nodes??[],response_nodes:n}}function gc(i){return i.length>0?Math.max(...i.map(n=>n.id)):0}function Gu(i){var n;if(i.request_message.length>0&&!((n=i.structured_request_nodes)!=null&&n.some(s=>s.type===ne.TEXT))){let s=i.structured_request_nodes??[];return s=[...s,{id:gc(s)+1,type:ne.TEXT,text_node:{content:i.request_message}}],{...i,structured_request_nodes:s}}return i}const wp="augment-welcome";var tt=(i=>(i.draft="draft",i.sent="sent",i.failed="failed",i.success="success",i.cancelled="cancelled",i))(tt||{}),Ye=(i=>(i.running="running",i.awaitingUserAction="awaiting-user-action",i.notRunning="not-running",i))(Ye||{}),At=(i=>(i.seen="seen",i.unseen="unseen",i))(At||{}),pn=(i=>(i.signInWelcome="sign-in-welcome",i.generateCommitMessage="generate-commit-message",i.summaryResponse="summary-response",i.summaryTitle="summary-title",i.educateFeatures="educate-features",i.agentOnboarding="agent-onboarding",i.agenticTurnDelimiter="agentic-turn-delimiter",i.agenticRevertDelimiter="agentic-revert-delimiter",i.agenticCheckpointDelimiter="agentic-checkpoint-delimiter",i.exchange="exchange",i.exchangePointer="exchange-pointer",i.historySummary="history-summary",i))(pn||{});function Zu(i){return St(i)||Dd(i)||Pd(i)}function St(i){return!!i&&(i.chatItemType===void 0||i.chatItemType==="agent-onboarding")}function $i(i){return St(i)&&i.status==="success"}function Ld(i){return!!i&&i.chatItemType==="exchange-pointer"}function bp(i){return i.chatItemType==="sign-in-welcome"}function Dd(i){return i.chatItemType==="generate-commit-message"}function kp(i){return i.chatItemType==="summary-response"}function Sp(i){return i.chatItemType==="educate-features"}function Pd(i){return i.chatItemType==="agent-onboarding"}function Ip(i){return i.chatItemType==="agentic-turn-delimiter"}function jn(i){return i.chatItemType==="agentic-checkpoint-delimiter"}function Gr(i){return i.chatItemType==="history-summary"}function Tp(i){return i.revertTarget!==void 0}function Ep(i,n){const s=function(u){if(!u)return;const l=u.findLast(h=>Zu(h.turn));return l?l.turn:void 0}(i);if(!((s==null?void 0:s.status)==="success"||(s==null?void 0:s.status)==="failed"||(s==null?void 0:s.status)==="cancelled"))return!1;const a=function(u){return u?u.findLast(h=>{var g;return!((g=h.turn.request_id)!=null&&g.startsWith(Qr))&&Zu(h.turn)}):void 0}(i);return(a==null?void 0:a.turn.request_id)===n.request_id}function Cp(i){var n;return((n=i.structured_output_nodes)==null?void 0:n.some(s=>s.type===ht.TOOL_USE))??!1}function Rp(i){var n;return((n=i.structured_request_nodes)==null?void 0:n.some(s=>s.type===ne.TOOL_RESULT))??!1}function Ap(i){return!(!i||typeof i!="object")&&(!("request_id"in i)||typeof i.request_id=="string")&&(!("seen_state"in i)||i.seen_state==="seen"||i.seen_state==="unseen")}function qp(i){return(i==null?void 0:i.status)==="success"||(i==null?void 0:i.status)==="failed"||(i==null?void 0:i.status)==="cancelled"}function Mp(i){if(!i)return;const n=i.filter(s=>St(s.turn)).map(s=>{return"response_text"in(a=s.turn)?a.response_text??"":"";var a}).filter(s=>s.length>0);return n.length>0?n.join(`
`):void 0}async function*zd(i,n=1e3){for(;i>0;)yield i,await new Promise(s=>setTimeout(s,Math.min(n,i))),i-=n}class Hd{constructor(n,s,a,u=5,l=4e3,h){y(this,"_isCancelled",!1);this.requestId=n,this.chatMessage=s,this.startStreamFn=a,this.maxRetries=u,this.baseDelay=l,this.flags=h}cancel(){this._isCancelled=!0}async*getStream(){let n=0,s=0,a=!1;try{for(;!this._isCancelled;){const u=this.startStreamFn({...this.chatMessage,createdTimestamp:Date.now()},this.flags?{flags:this.flags}:void 0);let l,h,g=!1,x=!0;for await(const k of u){if(k.status===tt.failed){if(k.isRetriable!==!0||a)return yield k;g=!0,x=k.shouldBackoff??!0,l=k.display_error_message,h=k.request_id;break}a=!0,yield k}if(!g)return;if(this._isCancelled)return yield this.createCancelledStatus();if(n++,n>this.maxRetries)return void(yield{request_id:h??this.requestId,seen_state:At.unseen,status:tt.failed,display_error_message:l,isRetriable:!1});if(x){const k=this.baseDelay*2**s;s++;for await(const w of zd(k))yield{request_id:this.requestId,status:tt.sent,display_error_message:`Service temporarily unavailable. Retrying in ${Math.floor(w/1e3)} seconds... (Attempt ${n} of ${this.maxRetries})`,isRetriable:!0}}yield{request_id:this.requestId,status:tt.sent,display_error_message:`Generating response... (Attempt ${n+1})`,isRetriable:!0}}this._isCancelled&&(yield this.createCancelledStatus())}catch(u){yield{request_id:this.requestId,seen_state:At.unseen,status:tt.failed,display_error_message:u instanceof Error?u.message:String(u)}}}createCancelledStatus(){return{request_id:this.requestId,seen_state:At.unseen,status:tt.cancelled}}}class jd{constructor(n){y(this,"getHydratedTask",async n=>{const s={type:$n.getHydratedTaskRequest,data:{uuid:n}};return(await this._asyncMsgSender.sendToSidecar(s,3e4)).data.task});y(this,"createTask",async(n,s,a)=>{const u={type:$n.createTaskRequest,data:{name:n,description:s,parentTaskUuid:a}};return(await this._asyncMsgSender.sendToSidecar(u,3e4)).data.uuid});y(this,"updateTask",async(n,s,a)=>{const u={type:$n.updateTaskRequest,data:{uuid:n,updates:s,updatedBy:a}};await this._asyncMsgSender.sendToSidecar(u,3e4)});y(this,"setCurrentRootTaskUuid",n=>{const s={type:$n.setCurrentRootTaskUuid,data:{uuid:n}};this._asyncMsgSender.sendToSidecar(s)});y(this,"updateHydratedTask",async(n,s)=>{const a={type:$n.updateHydratedTaskRequest,data:{task:n,updatedBy:s}};return(await this._asyncMsgSender.sendToSidecar(a,3e4)).data});this._asyncMsgSender=n}}class Up{constructor(n,s,a){y(this,"_taskClient");y(this,"getChatInitData",async()=>{const n=await this._asyncMsgSender.send({type:L.chatLoaded},3e4);if(n.data.enableDebugFeatures)try{console.log("Running hello world test...");const s=await async function(a){return(await Vf(Mf,new qf({sendMessage:l=>{a.postMessage(l)},onReceiveMessage:l=>{const h=g=>{l(g.data)};return window.addEventListener("message",h),()=>{window.removeEventListener("message",h)}}})).testMethod({foo:"bar"},{timeoutMs:1e3})).result}(this._host);console.log("Hello world result:",s)}catch(s){console.error("Hello world error:",s)}return n.data});y(this,"reportWebviewClientEvent",n=>{this._asyncMsgSender.send({type:L.reportWebviewClientMetric,data:{webviewName:Rf.chat,client_metric:n,value:1}})});y(this,"reportAgentSessionEvent",n=>{this._asyncMsgSender.sendToSidecar({type:Ot.reportAgentSessionEvent,data:n})});y(this,"reportAgentRequestEvent",n=>{this._asyncMsgSender.sendToSidecar({type:Ot.reportAgentRequestEvent,data:n})});y(this,"getSuggestions",async(n,s=!1)=>{const a={rootPath:"",relPath:n},u=this.findFiles(a,6),l=this.findRecentlyOpenedFiles(a,6),h=this.findFolders(a,3),g=this.findExternalSources(n,s),x=this._flags.enableRules?this.findRules(n,6):Promise.resolve([]),[k,w,q,C,F]=await Promise.all([Pn(u,[]),Pn(l,[]),Pn(h,[]),Pn(g,[]),Pn(x,[])]),Q=(Z,xt)=>({...nd(Z),[xt]:Z}),ft=[...k.map(Z=>Q(Z,"file")),...q.map(Z=>Q(Z,"folder")),...w.map(Z=>Q(Z,"recentFile")),...C.map(Z=>({label:Z.name,name:Z.name,id:Z.id,externalSource:Z})),...F.map(Z=>({...rd(Z),rule:Z}))];if(this._flags.enablePersonalities){const Z=this.getPersonalities(n);Z.length>0&&ft.push(...Z)}return ft});y(this,"getPersonalities",n=>{if(!this._flags.enablePersonalities)return[];if(n==="")return Fu;const s=n.toLowerCase();return Fu.filter(a=>{const u=a.personality.description.toLowerCase(),l=a.label.toLowerCase();return u.includes(s)||l.includes(s)})});y(this,"sendAction",n=>{this._host.postMessage({type:L.mainPanelPerformAction,data:n})});y(this,"showAugmentPanel",()=>{this._asyncMsgSender.send({type:L.showAugmentPanel})});y(this,"showNotification",n=>{this._host.postMessage({type:L.showNotification,data:n})});y(this,"openConfirmationModal",async n=>(await this._asyncMsgSender.send({type:L.openConfirmationModal,data:n},1e9)).data.ok);y(this,"clearMetadataFor",n=>{this._host.postMessage({type:L.chatClearMetadata,data:n})});y(this,"resolvePath",async(n,s=void 0)=>{const a=await this._asyncMsgSender.send({type:L.resolveFileRequest,data:{...n,exactMatch:!0,maxResults:1,searchScope:s}},5e3);if(a.data)return a.data});y(this,"resolveSymbols",async(n,s)=>(await this._asyncMsgSender.send({type:L.findSymbolRequest,data:{query:n,searchScope:s}},3e4)).data);y(this,"getDiagnostics",async()=>(await this._asyncMsgSender.send({type:L.getDiagnosticsRequest},1e3)).data);y(this,"findFiles",async(n,s=12)=>(await this._asyncMsgSender.send({type:L.findFileRequest,data:{...n,maxResults:s}},5e3)).data);y(this,"findFolders",async(n,s=12)=>(await this._asyncMsgSender.send({type:L.findFolderRequest,data:{...n,maxResults:s}},5e3)).data);y(this,"findRecentlyOpenedFiles",async(n,s=12)=>(await this._asyncMsgSender.send({type:L.findRecentlyOpenedFilesRequest,data:{...n,maxResults:s}},5e3)).data);y(this,"findExternalSources",async(n,s=!1)=>this._flags.enableExternalSourcesInChat?s?[]:(await this._asyncMsgSender.send({type:L.findExternalSourcesRequest,data:{query:n,source_types:[]}},5e3)).data.sources??[]:[]);y(this,"findRules",async(n,s=12)=>(await this._asyncMsgSender.sendToSidecar({type:Af.getRulesListRequest,data:{query:n,maxResults:s}})).data.rules);y(this,"openFile",n=>{this._host.postMessage({type:L.openFile,data:n})});y(this,"saveFile",n=>this._host.postMessage({type:L.saveFile,data:n}));y(this,"loadFile",n=>this._host.postMessage({type:L.loadFile,data:n}));y(this,"openMemoriesFile",()=>{this._host.postMessage({type:L.openMemoriesFile})});y(this,"canShowTerminal",async(n,s)=>{try{return(await this._asyncMsgSender.send({type:L.canShowTerminal,data:{terminalId:n,command:s}},5e3)).data.canShow}catch(a){return console.error("Failed to check if terminal can be shown:",a),!1}});y(this,"showTerminal",async(n,s)=>{try{return(await this._asyncMsgSender.send({type:L.showTerminal,data:{terminalId:n,command:s}},5e3)).data.success}catch(a){return console.error("Failed to show terminal:",a),!1}});y(this,"createFile",(n,s)=>{this._host.postMessage({type:L.chatCreateFile,data:{code:n,relPath:s}})});y(this,"openScratchFile",async(n,s="shellscript")=>{await this._asyncMsgSender.send({type:L.openScratchFileRequest,data:{content:n,language:s}},1e4)});y(this,"resolveWorkspaceFileChunk",async n=>{try{return(await this._asyncMsgSender.send({type:L.resolveWorkspaceFileChunkRequest,data:n},5e3)).data}catch{return}});y(this,"smartPaste",n=>{this._host.postMessage({type:L.chatSmartPaste,data:n})});y(this,"getHydratedTask",async n=>this._taskClient.getHydratedTask(n));y(this,"updateHydratedTask",async(n,s)=>this._taskClient.updateHydratedTask(n,s));y(this,"setCurrentRootTaskUuid",n=>{this._taskClient.setCurrentRootTaskUuid(n)});y(this,"createTask",async(n,s,a)=>this._taskClient.createTask(n,s,a));y(this,"updateTask",async(n,s,a)=>this._taskClient.updateTask(n,s,a));y(this,"saveChat",async(n,s,a)=>this._asyncMsgSender.send({type:L.saveChat,data:{conversationId:n,chatHistory:s,title:a}},5e3));y(this,"updateUserGuidelines",n=>{this._host.postMessage({type:L.updateUserGuidelines,data:n})});y(this,"updateWorkspaceGuidelines",n=>{this._host.postMessage({type:L.updateWorkspaceGuidelines,data:n})});y(this,"openSettingsPage",n=>{this._host.postMessage({type:L.openSettingsPage,data:n})});y(this,"_activeRetryStreams",new Map);y(this,"cancelChatStream",async n=>{var s;(s=this._activeRetryStreams.get(n))==null||s.cancel(),await this._asyncMsgSender.send({type:L.chatUserCancel,data:{requestId:n}},1e4)});y(this,"sendUserRating",async(n,s,a,u="")=>{const l={requestId:n,rating:a,note:u,mode:s},h={type:L.chatRating,data:l};return(await this._asyncMsgSender.send(h,3e4)).data});y(this,"triggerUsedChatMetric",()=>{this._host.postMessage({type:L.usedChat})});y(this,"createProject",n=>{this._host.postMessage({type:L.mainPanelCreateProject,data:{name:n}})});y(this,"openProjectFolder",()=>{this._host.postMessage({type:L.mainPanelPerformAction,data:"open-folder"})});y(this,"closeProjectFolder",()=>{this._host.postMessage({type:L.mainPanelPerformAction,data:"close-folder"})});y(this,"cloneRepository",()=>{this._host.postMessage({type:L.mainPanelPerformAction,data:"clone-repository"})});y(this,"grantSyncPermission",()=>{this._host.postMessage({type:L.mainPanelPerformAction,data:"grant-sync-permission"})});y(this,"callTool",async(n,s,a,u,l,h)=>{const g={type:L.callTool,data:{chatRequestId:n,toolUseId:s,name:a,input:u,chatHistory:l,conversationId:h}};return(await this._asyncMsgSender.send(g,0)).data});y(this,"cancelToolRun",async(n,s)=>{const a={type:L.cancelToolRun,data:{requestId:n,toolUseId:s}};await this._asyncMsgSender.send(a,0)});y(this,"checkSafe",async n=>{const s={type:Ai.checkToolCallSafeRequest,data:n};return(await this._asyncMsgSender.sendToSidecar(s,0)).data});y(this,"closeAllToolProcesses",async()=>{await this._asyncMsgSender.sendToSidecar({type:Ai.closeAllToolProcesses},0)});y(this,"getToolIdentifier",async n=>{const s={type:Ai.getToolIdentifierRequest,data:{toolName:n}};return(await this._asyncMsgSender.sendToSidecar(s,0)).data});y(this,"setChatMode",n=>{this._asyncMsgSender.send({type:L.chatModeChanged,data:{mode:n}})});y(this,"setLastUsedChatMode",n=>{this._asyncMsgSender.send({type:L.chatSetLastUsedChatMode,data:{mode:n}}).catch(s=>{console.error("Failed to set last used chat mode:",s)})});y(this,"getAgentEditList",async(n,s)=>{const a={type:Ot.getEditListRequest,data:{fromTimestamp:n,toTimestamp:s}};return(await this._asyncMsgSender.sendToSidecar(a,3e4)).data});y(this,"hasChangesSince",async n=>{const s={type:Ot.getEditListRequest,data:{fromTimestamp:n,toTimestamp:Number.MAX_SAFE_INTEGER}};return(await this._asyncMsgSender.sendToSidecar(s,3e4)).data.edits.filter(a=>{var u,l;return((u=a.changesSummary)==null?void 0:u.totalAddedLines)||((l=a.changesSummary)==null?void 0:l.totalRemovedLines)}).length>0});y(this,"getToolCallCheckpoint",async n=>{const s={type:L.getToolCallCheckpoint,data:{requestId:n}};return(await this._asyncMsgSender.send(s,3e4)).data.checkpointNumber});y(this,"setCurrentConversation",n=>{this._asyncMsgSender.sendToSidecar({type:Ot.setCurrentConversation,data:{conversationId:n}})});y(this,"migrateConversationId",async(n,s)=>{await this._asyncMsgSender.sendToSidecar({type:Ot.migrateConversationId,data:{oldConversationId:n,newConversationId:s}},3e4)});y(this,"showAgentReview",(n,s,a,u=!0,l)=>{this._asyncMsgSender.sendToSidecar({type:Ot.chatReviewAgentFile,data:{qualifiedPathName:n,fromTimestamp:s,toTimestamp:a,retainFocus:u,useNativeDiffIfAvailable:l}})});y(this,"acceptAllAgentEdits",async()=>(await this._asyncMsgSender.sendToSidecar({type:Ot.chatAgentEditAcceptAll}),!0));y(this,"revertToTimestamp",async(n,s)=>(await this._asyncMsgSender.sendToSidecar({type:Ot.revertToTimestamp,data:{timestamp:n,qualifiedPathNames:s}}),!0));y(this,"getAgentOnboardingPrompt",async()=>(await this._asyncMsgSender.send({type:L.chatGetAgentOnboardingPromptRequest,data:{}},3e4)).data.prompt);y(this,"getAgentEditChangesByRequestId",async n=>{const s={type:Ot.getEditChangesByRequestIdRequest,data:{requestId:n}};return(await this._asyncMsgSender.sendToSidecar(s,3e4)).data});y(this,"getAgentEditContentsByRequestId",async n=>{const s={type:Ot.getAgentEditContentsByRequestId,data:{requestId:n}};return(await this._asyncMsgSender.sendToSidecar(s,3e4)).data});y(this,"triggerInitialOrientation",()=>{this._host.postMessage({type:L.triggerInitialOrientation})});y(this,"getWorkspaceInfo",async()=>{try{return(await this._asyncMsgSender.send({type:L.getWorkspaceInfoRequest},5e3)).data}catch(n){return console.error("Error getting workspace info:",n),{}}});y(this,"toggleCollapseUnchangedRegions",()=>{this._host.postMessage({type:L.toggleCollapseUnchangedRegions})});y(this,"checkAgentAutoModeApproval",async()=>(await this._asyncMsgSender.send({type:L.checkAgentAutoModeApproval},5e3)).data);y(this,"setAgentAutoModeApproved",async n=>{await this._asyncMsgSender.send({type:L.setAgentAutoModeApproved,data:n},5e3)});y(this,"checkHasEverUsedAgent",async()=>(await this._asyncMsgSender.sendToSidecar({type:Ot.checkHasEverUsedAgent},5e3)).data);y(this,"setHasEverUsedAgent",async n=>{await this._asyncMsgSender.sendToSidecar({type:Ot.setHasEverUsedAgent,data:n},5e3)});y(this,"checkHasEverUsedRemoteAgent",async()=>(await this._asyncMsgSender.sendToSidecar({type:Ot.checkHasEverUsedRemoteAgent},5e3)).data);y(this,"setHasEverUsedRemoteAgent",async n=>{await this._asyncMsgSender.sendToSidecar({type:Ot.setHasEverUsedRemoteAgent,data:n},5e3)});y(this,"getChatRequestIdeState",async()=>{const n={type:L.getChatRequestIdeStateRequest};return(await this._asyncMsgSender.send(n,3e4)).data});y(this,"reportError",n=>{this._host.postMessage({type:L.reportError,data:n})});this._host=n,this._asyncMsgSender=s,this._flags=a,this._taskClient=new jd(s)}async*generateCommitMessage(){const n={type:L.generateCommitMessage},s=this._asyncMsgSender.stream(n,3e4,6e4);yield*Li(s,()=>{},this._flags.retryChatStreamTimeouts)}async*sendInstructionMessage(n,s){const a={instruction:n.request_message??"",selectedCodeDetails:s,requestId:n.request_id},u={type:L.chatInstructionMessage,data:a},l=this._asyncMsgSender.stream(u,3e4,6e4);yield*async function*(h){let g;try{for await(const x of h)g=x.data.requestId,yield{request_id:g,response_text:x.data.text,seen_state:At.unseen,status:tt.sent};yield{request_id:g,seen_state:At.unseen,status:tt.success}}catch{yield{request_id:g,seen_state:At.unseen,status:tt.failed}}}(l)}async openGuidelines(n){this._host.postMessage({type:L.openGuidelines,data:n})}async*getExistingChatStream(n,s){if(!n.request_id)return;const a=s==null?void 0:s.flags.enablePreferenceCollection,u=a?1e9:6e4,l=a?1e9:3e5,h={type:L.chatGetStreamRequest,data:{requestId:n.request_id}},g=this._asyncMsgSender.stream(h,u,l);yield*Li(g,this.reportError,this._flags.retryChatStreamTimeouts)}async*startChatStream(n,s){const a=s==null?void 0:s.flags.enablePreferenceCollection,u=a?1e9:1e5,l=a?1e9:3e5,h={type:L.chatUserMessage,data:n},g=this._asyncMsgSender.stream(h,u,l);yield*Li(g,this.reportError,this._flags.retryChatStreamTimeouts)}async checkToolExists(n){return(await this._asyncMsgSender.send({type:L.checkToolExists,toolName:n},0)).exists}async saveImage(n,s){const a=Au(await qi(n)),u=s??`${await qu(await Mi(a))}.${n.name.split(".").at(-1)}`;return(await this._asyncMsgSender.send({type:L.chatSaveImageRequest,data:{filename:u,data:a}},1e4)).data}async saveAttachment(n,s){const a=Au(await qi(n)),u=s??`${await qu(await Mi(a))}.${n.name.split(".").at(-1)}`;return(await this._asyncMsgSender.send({type:L.chatSaveAttachmentRequest,data:{filename:u,data:a}},1e4)).data}async loadImage(n){const s=await this._asyncMsgSender.send({type:L.chatLoadImageRequest,data:n},1e4),a=s.data?await Mi(s.data):void 0;if(!a)return;let u="application/octet-stream";const l=n.split(".").at(-1);l==="png"?u="image/png":l!=="jpg"&&l!=="jpeg"||(u="image/jpeg");const h=new File([a],n,{type:u});return await qi(h)}async deleteImage(n){await this._asyncMsgSender.send({type:L.chatDeleteImageRequest,data:n},1e4)}async*startChatStreamWithRetry(n,s,a){const u=new Hd(n,s,(l,h)=>this.startChatStream(l,h),(a==null?void 0:a.maxRetries)??5,4e3,a==null?void 0:a.flags);this._activeRetryStreams.set(n,u);try{yield*u.getStream()}finally{this._activeRetryStreams.delete(n)}}async getSubscriptionInfo(){return await this._asyncMsgSender.send({type:L.getSubscriptionInfo},5e3)}async loadExchanges(n,s){if(s.length===0)return[];const a={type:Ui.loadExchangesByUuidsRequest,data:{conversationId:n,uuids:s}};return(await this._asyncMsgSender.sendToSidecar(a,3e4)).data.exchanges}async saveExchanges(n,s){if(s.length===0)return;const a={type:Ui.saveExchangesRequest,data:{conversationId:n,exchanges:s}};await this._asyncMsgSender.sendToSidecar(a,3e4)}async deleteConversationExchanges(n){const s={type:Ui.deleteConversationExchangesRequest,data:{conversationId:n}};await this._asyncMsgSender.sendToSidecar(s,3e4)}async loadConversationToolUseStates(n){const s={type:Oi.loadConversationToolUseStatesRequest,data:{conversationId:n}};return(await this._asyncMsgSender.sendToSidecar(s,3e4)).data.toolUseStates}async saveToolUseStates(n,s){if(Object.keys(s).length===0)return;const a={type:Oi.saveToolUseStatesRequest,data:{conversationId:n,toolUseStates:s}};await this._asyncMsgSender.sendToSidecar(a,3e4)}async deleteConversationToolUseStates(n){const s={type:Oi.deleteConversationToolUseStatesRequest,data:{conversationId:n}};await this._asyncMsgSender.sendToSidecar(s,3e4)}}async function*Li(i,n=()=>{},s){let a;try{for await(const u of i){if(a=u.data.requestId,u.data.error)return yield{request_id:a,seen_state:At.unseen,status:tt.failed,display_error_message:u.data.error.displayErrorMessage,isRetriable:u.data.error.isRetriable,shouldBackoff:u.data.error.shouldBackoff};const l={request_id:a,response_text:u.data.text,workspace_file_chunks:u.data.workspaceFileChunks,structured_output_nodes:Nd(u.data.nodes),seen_state:At.unseen,status:tt.sent};u.data.stop_reason!=null&&(l.stop_reason=u.data.stop_reason),yield l}yield{request_id:a,seen_state:At.unseen,status:tt.success}}catch(u){let l,h;if(n({originalRequestId:a||"",sanitizedMessage:u instanceof Error?u.message:String(u),stackTrace:u instanceof Error&&u.stack||"",diagnostics:[{key:"error_class",value:"Extension-WebView Error"}]}),u instanceof Uf&&s)switch(u.name){case"MessageTimeout":l=!0,h=!1;break;case"StreamTimeout":case"InvalidResponse":l=!1}yield{request_id:a,seen_state:At.unseen,status:tt.failed,isRetriable:l,shouldBackoff:h}}}async function Pn(i,n){try{return await i}catch(s){return console.warn(`Error while resolving promise: ${s}`),n}}function Nd(i){if(!i)return i;let n=!1;return i.filter(s=>s.type!==ht.TOOL_USE||!n&&(n=!0,!0))}var Zr,Vr,ji={exports:{}};Zr=ji,Vr=ji.exports,(function(){var i,n="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",u=16,l=32,h=64,g=128,x=256,k=1/0,w=9007199254740991,q=NaN,C=4294967295,F=[["ary",g],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",l],["partialRight",h],["rearg",x]],Q="[object Arguments]",ft="[object Array]",Z="[object Boolean]",xt="[object Date]",Ft="[object Error]",Zt="[object Function]",ke="[object GeneratorFunction]",at="[object Map]",Le="[object Number]",pe="[object Object]",Yi="[object Promise]",yn="[object RegExp]",re="[object Set]",mn="[object String]",Gn="[object Symbol]",vn="[object WeakMap]",xn="[object ArrayBuffer]",Ke="[object DataView]",as="[object Float32Array]",os="[object Float64Array]",us="[object Int8Array]",cs="[object Int16Array]",ls="[object Int32Array]",hs="[object Uint8Array]",fs="[object Uint8ClampedArray]",ds="[object Uint16Array]",ps="[object Uint32Array]",_c=/\b__p \+= '';/g,yc=/\b(__p \+=) '' \+/g,mc=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Qi=/&(?:amp|lt|gt|quot|#39);/g,Ji=/[&<>"']/g,vc=RegExp(Qi.source),xc=RegExp(Ji.source),wc=/<%-([\s\S]+?)%>/g,bc=/<%([\s\S]+?)%>/g,Ki=/<%=([\s\S]+?)%>/g,kc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Sc=/^\w*$/,Ic=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gs=/[\\^$.*+?()[\]{}|]/g,Tc=RegExp(gs.source),_s=/^\s+/,Ec=/\s/,Cc=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Rc=/\{\n\/\* \[wrapped with (.+)\] \*/,Ac=/,? & /,qc=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Mc=/[()=,{}\[\]\/\s]/,Uc=/\\(\\)?/g,Oc=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Xi=/\w*$/,Fc=/^[-+]0x[0-9a-f]+$/i,$c=/^0b[01]+$/i,Lc=/^\[object .+?Constructor\]$/,Dc=/^0o[0-7]+$/i,Pc=/^(?:0|[1-9]\d*)$/,zc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Zn=/($^)/,Hc=/['\n\r\u2028\u2029\\]/g,Vn="\\ud800-\\udfff",ta="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ea="\\u2700-\\u27bf",na="a-z\\xdf-\\xf6\\xf8-\\xff",ra="A-Z\\xc0-\\xd6\\xd8-\\xde",sa="\\ufe0e\\ufe0f",ia="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",jc="['’]",Nc="["+Vn+"]",aa="["+ia+"]",Yn="["+ta+"]",oa="\\d+",Bc="["+ea+"]",ua="["+na+"]",ca="[^"+Vn+ia+oa+ea+na+ra+"]",ys="\\ud83c[\\udffb-\\udfff]",la="[^"+Vn+"]",ms="(?:\\ud83c[\\udde6-\\uddff]){2}",vs="[\\ud800-\\udbff][\\udc00-\\udfff]",Xe="["+ra+"]",ha="\\u200d",fa="(?:"+ua+"|"+ca+")",Wc="(?:"+Xe+"|"+ca+")",da="(?:['’](?:d|ll|m|re|s|t|ve))?",pa="(?:['’](?:D|LL|M|RE|S|T|VE))?",ga="(?:"+Yn+"|"+ys+")?",_a="["+sa+"]?",ya=_a+ga+"(?:"+ha+"(?:"+[la,ms,vs].join("|")+")"+_a+ga+")*",Gc="(?:"+[Bc,ms,vs].join("|")+")"+ya,Zc="(?:"+[la+Yn+"?",Yn,ms,vs,Nc].join("|")+")",Vc=RegExp(jc,"g"),Yc=RegExp(Yn,"g"),xs=RegExp(ys+"(?="+ys+")|"+Zc+ya,"g"),Qc=RegExp([Xe+"?"+ua+"+"+da+"(?="+[aa,Xe,"$"].join("|")+")",Wc+"+"+pa+"(?="+[aa,Xe+fa,"$"].join("|")+")",Xe+"?"+fa+"+"+da,Xe+"+"+pa,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",oa,Gc].join("|"),"g"),Jc=RegExp("["+ha+Vn+ta+sa+"]"),Kc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tl=-1,ot={};ot[as]=ot[os]=ot[us]=ot[cs]=ot[ls]=ot[hs]=ot[fs]=ot[ds]=ot[ps]=!0,ot[Q]=ot[ft]=ot[xn]=ot[Z]=ot[Ke]=ot[xt]=ot[Ft]=ot[Zt]=ot[at]=ot[Le]=ot[pe]=ot[yn]=ot[re]=ot[mn]=ot[vn]=!1;var it={};it[Q]=it[ft]=it[xn]=it[Ke]=it[Z]=it[xt]=it[as]=it[os]=it[us]=it[cs]=it[ls]=it[at]=it[Le]=it[pe]=it[yn]=it[re]=it[mn]=it[Gn]=it[hs]=it[fs]=it[ds]=it[ps]=!0,it[Ft]=it[Zt]=it[vn]=!1;var el={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},nl=parseFloat,rl=parseInt,ma=typeof Ln=="object"&&Ln&&Ln.Object===Object&&Ln,sl=typeof self=="object"&&self&&self.Object===Object&&self,bt=ma||sl||Function("return this")(),ws=Vr&&!Vr.nodeType&&Vr,De=ws&&Zr&&!Zr.nodeType&&Zr,va=De&&De.exports===ws,bs=va&&ma.process,Vt=function(){try{var v=De&&De.require&&De.require("util").types;return v||bs&&bs.binding&&bs.binding("util")}catch{}}(),xa=Vt&&Vt.isArrayBuffer,wa=Vt&&Vt.isDate,ba=Vt&&Vt.isMap,ka=Vt&&Vt.isRegExp,Sa=Vt&&Vt.isSet,Ia=Vt&&Vt.isTypedArray;function Ht(v,T,E){switch(E.length){case 0:return v.call(T);case 1:return v.call(T,E[0]);case 2:return v.call(T,E[0],E[1]);case 3:return v.call(T,E[0],E[1],E[2])}return v.apply(T,E)}function il(v,T,E,U){for(var B=-1,K=v==null?0:v.length;++B<K;){var yt=v[B];T(U,yt,E(yt),v)}return U}function Yt(v,T){for(var E=-1,U=v==null?0:v.length;++E<U&&T(v[E],E,v)!==!1;);return v}function al(v,T){for(var E=v==null?0:v.length;E--&&T(v[E],E,v)!==!1;);return v}function Ta(v,T){for(var E=-1,U=v==null?0:v.length;++E<U;)if(!T(v[E],E,v))return!1;return!0}function Se(v,T){for(var E=-1,U=v==null?0:v.length,B=0,K=[];++E<U;){var yt=v[E];T(yt,E,v)&&(K[B++]=yt)}return K}function Qn(v,T){return!(v==null||!v.length)&&tn(v,T,0)>-1}function ks(v,T,E){for(var U=-1,B=v==null?0:v.length;++U<B;)if(E(T,v[U]))return!0;return!1}function lt(v,T){for(var E=-1,U=v==null?0:v.length,B=Array(U);++E<U;)B[E]=T(v[E],E,v);return B}function Ie(v,T){for(var E=-1,U=T.length,B=v.length;++E<U;)v[B+E]=T[E];return v}function Ss(v,T,E,U){var B=-1,K=v==null?0:v.length;for(U&&K&&(E=v[++B]);++B<K;)E=T(E,v[B],B,v);return E}function ol(v,T,E,U){var B=v==null?0:v.length;for(U&&B&&(E=v[--B]);B--;)E=T(E,v[B],B,v);return E}function Is(v,T){for(var E=-1,U=v==null?0:v.length;++E<U;)if(T(v[E],E,v))return!0;return!1}var ul=Ts("length");function Ea(v,T,E){var U;return E(v,function(B,K,yt){if(T(B,K,yt))return U=K,!1}),U}function Jn(v,T,E,U){for(var B=v.length,K=E+(U?1:-1);U?K--:++K<B;)if(T(v[K],K,v))return K;return-1}function tn(v,T,E){return T==T?function(U,B,K){for(var yt=K-1,oe=U.length;++yt<oe;)if(U[yt]===B)return yt;return-1}(v,T,E):Jn(v,Ca,E)}function cl(v,T,E,U){for(var B=E-1,K=v.length;++B<K;)if(U(v[B],T))return B;return-1}function Ca(v){return v!=v}function Ra(v,T){var E=v==null?0:v.length;return E?Cs(v,T)/E:q}function Ts(v){return function(T){return T==null?i:T[v]}}function Es(v){return function(T){return v==null?i:v[T]}}function Aa(v,T,E,U,B){return B(v,function(K,yt,oe){E=U?(U=!1,K):T(E,K,yt,oe)}),E}function Cs(v,T){for(var E,U=-1,B=v.length;++U<B;){var K=T(v[U]);K!==i&&(E=E===i?K:E+K)}return E}function Rs(v,T){for(var E=-1,U=Array(v);++E<v;)U[E]=T(E);return U}function qa(v){return v&&v.slice(0,Fa(v)+1).replace(_s,"")}function jt(v){return function(T){return v(T)}}function As(v,T){return lt(T,function(E){return v[E]})}function wn(v,T){return v.has(T)}function Ma(v,T){for(var E=-1,U=v.length;++E<U&&tn(T,v[E],0)>-1;);return E}function Ua(v,T){for(var E=v.length;E--&&tn(T,v[E],0)>-1;);return E}var ll=Es({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),hl=Es({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function fl(v){return"\\"+el[v]}function en(v){return Jc.test(v)}function qs(v){var T=-1,E=Array(v.size);return v.forEach(function(U,B){E[++T]=[B,U]}),E}function Oa(v,T){return function(E){return v(T(E))}}function Te(v,T){for(var E=-1,U=v.length,B=0,K=[];++E<U;){var yt=v[E];yt!==T&&yt!==a||(v[E]=a,K[B++]=E)}return K}function Kn(v){var T=-1,E=Array(v.size);return v.forEach(function(U){E[++T]=U}),E}function dl(v){var T=-1,E=Array(v.size);return v.forEach(function(U){E[++T]=[U,U]}),E}function nn(v){return en(v)?function(T){for(var E=xs.lastIndex=0;xs.test(T);)++E;return E}(v):ul(v)}function se(v){return en(v)?function(T){return T.match(xs)||[]}(v):function(T){return T.split("")}(v)}function Fa(v){for(var T=v.length;T--&&Ec.test(v.charAt(T)););return T}var pl=Es({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),rn=function v(T){var E,U=(T=T==null?bt:rn.defaults(bt.Object(),T,rn.pick(bt,Xc))).Array,B=T.Date,K=T.Error,yt=T.Function,oe=T.Math,ut=T.Object,Ms=T.RegExp,gl=T.String,Qt=T.TypeError,Xn=U.prototype,_l=yt.prototype,sn=ut.prototype,tr=T["__core-js_shared__"],er=_l.toString,nt=sn.hasOwnProperty,yl=0,$a=(E=/[^.]+$/.exec(tr&&tr.keys&&tr.keys.IE_PROTO||""))?"Symbol(src)_1."+E:"",nr=sn.toString,ml=er.call(ut),vl=bt._,xl=Ms("^"+er.call(nt).replace(gs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rr=va?T.Buffer:i,Ee=T.Symbol,sr=T.Uint8Array,La=rr?rr.allocUnsafe:i,ir=Oa(ut.getPrototypeOf,ut),Da=ut.create,Pa=sn.propertyIsEnumerable,ar=Xn.splice,za=Ee?Ee.isConcatSpreadable:i,bn=Ee?Ee.iterator:i,Pe=Ee?Ee.toStringTag:i,or=function(){try{var t=Be(ut,"defineProperty");return t({},"",{}),t}catch{}}(),wl=T.clearTimeout!==bt.clearTimeout&&T.clearTimeout,bl=B&&B.now!==bt.Date.now&&B.now,kl=T.setTimeout!==bt.setTimeout&&T.setTimeout,ur=oe.ceil,cr=oe.floor,Us=ut.getOwnPropertySymbols,Sl=rr?rr.isBuffer:i,Ha=T.isFinite,Il=Xn.join,Tl=Oa(ut.keys,ut),mt=oe.max,Tt=oe.min,El=B.now,Cl=T.parseInt,ja=oe.random,Rl=Xn.reverse,Os=Be(T,"DataView"),kn=Be(T,"Map"),Fs=Be(T,"Promise"),an=Be(T,"Set"),Sn=Be(T,"WeakMap"),In=Be(ut,"create"),lr=Sn&&new Sn,on={},Al=We(Os),ql=We(kn),Ml=We(Fs),Ul=We(an),Ol=We(Sn),hr=Ee?Ee.prototype:i,Tn=hr?hr.valueOf:i,Na=hr?hr.toString:i;function f(t){if(pt(t)&&!G(t)&&!(t instanceof J)){if(t instanceof Jt)return t;if(nt.call(t,"__wrapped__"))return Wo(t)}return new Jt(t)}var un=function(){function t(){}return function(e){if(!dt(e))return{};if(Da)return Da(e);t.prototype=e;var r=new t;return t.prototype=i,r}}();function fr(){}function Jt(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function J(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=C,this.__views__=[]}function ze(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}function ge(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}function _e(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}function He(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new _e;++e<r;)this.add(t[e])}function ie(t){var e=this.__data__=new ge(t);this.size=e.size}function Ba(t,e){var r=G(t),o=!r&&Ge(t),c=!r&&!o&&Me(t),d=!r&&!o&&!c&&fn(t),p=r||o||c||d,_=p?Rs(t.length,gl):[],m=_.length;for(var S in t)!e&&!nt.call(t,S)||p&&(S=="length"||c&&(S=="offset"||S=="parent")||d&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||xe(S,m))||_.push(S);return _}function Wa(t){var e=t.length;return e?t[Gs(0,e-1)]:i}function Fl(t,e){return Tr($t(t),je(e,0,t.length))}function $l(t){return Tr($t(t))}function $s(t,e,r){(r!==i&&!ae(t[e],r)||r===i&&!(e in t))&&ye(t,e,r)}function En(t,e,r){var o=t[e];nt.call(t,e)&&ae(o,r)&&(r!==i||e in t)||ye(t,e,r)}function dr(t,e){for(var r=t.length;r--;)if(ae(t[r][0],e))return r;return-1}function Ll(t,e,r,o){return Ce(t,function(c,d,p){e(o,c,r(c),p)}),o}function Ga(t,e){return t&&ce(e,wt(e),t)}function ye(t,e,r){e=="__proto__"&&or?or(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Ls(t,e){for(var r=-1,o=e.length,c=U(o),d=t==null;++r<o;)c[r]=d?i:yi(t,e[r]);return c}function je(t,e,r){return t==t&&(r!==i&&(t=t<=r?t:r),e!==i&&(t=t>=e?t:e)),t}function Kt(t,e,r,o,c,d){var p,_=1&e,m=2&e,S=4&e;if(r&&(p=c?r(t,o,c,d):r(t)),p!==i)return p;if(!dt(t))return t;var b=G(t);if(b){if(p=function(I){var A=I.length,H=new I.constructor(A);return A&&typeof I[0]=="string"&&nt.call(I,"index")&&(H.index=I.index,H.input=I.input),H}(t),!_)return $t(t,p)}else{var R=Et(t),O=R==Zt||R==ke;if(Me(t))return yo(t,_);if(R==pe||R==Q||O&&!c){if(p=m||O?{}:$o(t),!_)return m?function(I,A){return ce(I,Oo(I),A)}(t,function(I,A){return I&&ce(A,Dt(A),I)}(p,t)):function(I,A){return ce(I,ai(I),A)}(t,Ga(p,t))}else{if(!it[R])return c?t:{};p=function(I,A,H){var M,W=I.constructor;switch(A){case xn:return Xs(I);case Z:case xt:return new W(+I);case Ke:return function(N,X){var D=X?Xs(N.buffer):N.buffer;return new N.constructor(D,N.byteOffset,N.byteLength)}(I,H);case as:case os:case us:case cs:case ls:case hs:case fs:case ds:case ps:return mo(I,H);case at:return new W;case Le:case mn:return new W(I);case yn:return function(N){var X=new N.constructor(N.source,Xi.exec(N));return X.lastIndex=N.lastIndex,X}(I);case re:return new W;case Gn:return M=I,Tn?ut(Tn.call(M)):{}}}(t,R,_)}}d||(d=new ie);var $=d.get(t);if($)return $;d.set(t,p),cu(t)?t.forEach(function(I){p.add(Kt(I,e,r,I,t,d))}):ou(t)&&t.forEach(function(I,A){p.set(A,Kt(I,e,r,A,t,d))});var P=b?i:(S?m?ri:ni:m?Dt:wt)(t);return Yt(P||t,function(I,A){P&&(I=t[A=I]),En(p,A,Kt(I,e,r,A,t,d))}),p}function Za(t,e,r){var o=r.length;if(t==null)return!o;for(t=ut(t);o--;){var c=r[o],d=e[c],p=t[c];if(p===i&&!(c in t)||!d(p))return!1}return!0}function Va(t,e,r){if(typeof t!="function")throw new Qt(n);return On(function(){t.apply(i,r)},e)}function Cn(t,e,r,o){var c=-1,d=Qn,p=!0,_=t.length,m=[],S=e.length;if(!_)return m;r&&(e=lt(e,jt(r))),o?(d=ks,p=!1):e.length>=200&&(d=wn,p=!1,e=new He(e));t:for(;++c<_;){var b=t[c],R=r==null?b:r(b);if(b=o||b!==0?b:0,p&&R==R){for(var O=S;O--;)if(e[O]===R)continue t;m.push(b)}else d(e,R,o)||m.push(b)}return m}f.templateSettings={escape:wc,evaluate:bc,interpolate:Ki,variable:"",imports:{_:f}},f.prototype=fr.prototype,f.prototype.constructor=f,Jt.prototype=un(fr.prototype),Jt.prototype.constructor=Jt,J.prototype=un(fr.prototype),J.prototype.constructor=J,ze.prototype.clear=function(){this.__data__=In?In(null):{},this.size=0},ze.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ze.prototype.get=function(t){var e=this.__data__;if(In){var r=e[t];return r===s?i:r}return nt.call(e,t)?e[t]:i},ze.prototype.has=function(t){var e=this.__data__;return In?e[t]!==i:nt.call(e,t)},ze.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=In&&e===i?s:e,this},ge.prototype.clear=function(){this.__data__=[],this.size=0},ge.prototype.delete=function(t){var e=this.__data__,r=dr(e,t);return!(r<0||(r==e.length-1?e.pop():ar.call(e,r,1),--this.size,0))},ge.prototype.get=function(t){var e=this.__data__,r=dr(e,t);return r<0?i:e[r][1]},ge.prototype.has=function(t){return dr(this.__data__,t)>-1},ge.prototype.set=function(t,e){var r=this.__data__,o=dr(r,t);return o<0?(++this.size,r.push([t,e])):r[o][1]=e,this},_e.prototype.clear=function(){this.size=0,this.__data__={hash:new ze,map:new(kn||ge),string:new ze}},_e.prototype.delete=function(t){var e=Ir(this,t).delete(t);return this.size-=e?1:0,e},_e.prototype.get=function(t){return Ir(this,t).get(t)},_e.prototype.has=function(t){return Ir(this,t).has(t)},_e.prototype.set=function(t,e){var r=Ir(this,t),o=r.size;return r.set(t,e),this.size+=r.size==o?0:1,this},He.prototype.add=He.prototype.push=function(t){return this.__data__.set(t,s),this},He.prototype.has=function(t){return this.__data__.has(t)},ie.prototype.clear=function(){this.__data__=new ge,this.size=0},ie.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},ie.prototype.get=function(t){return this.__data__.get(t)},ie.prototype.has=function(t){return this.__data__.has(t)},ie.prototype.set=function(t,e){var r=this.__data__;if(r instanceof ge){var o=r.__data__;if(!kn||o.length<199)return o.push([t,e]),this.size=++r.size,this;r=this.__data__=new _e(o)}return r.set(t,e),this.size=r.size,this};var Ce=bo(ue),Ya=bo(Ps,!0);function Dl(t,e){var r=!0;return Ce(t,function(o,c,d){return r=!!e(o,c,d)}),r}function pr(t,e,r){for(var o=-1,c=t.length;++o<c;){var d=t[o],p=e(d);if(p!=null&&(_===i?p==p&&!Bt(p):r(p,_)))var _=p,m=d}return m}function Qa(t,e){var r=[];return Ce(t,function(o,c,d){e(o,c,d)&&r.push(o)}),r}function kt(t,e,r,o,c){var d=-1,p=t.length;for(r||(r=Ql),c||(c=[]);++d<p;){var _=t[d];e>0&&r(_)?e>1?kt(_,e-1,r,o,c):Ie(c,_):o||(c[c.length]=_)}return c}var Ds=ko(),Ja=ko(!0);function ue(t,e){return t&&Ds(t,e,wt)}function Ps(t,e){return t&&Ja(t,e,wt)}function gr(t,e){return Se(e,function(r){return we(t[r])})}function Ne(t,e){for(var r=0,o=(e=Ae(e,t)).length;t!=null&&r<o;)t=t[le(e[r++])];return r&&r==o?t:i}function Ka(t,e,r){var o=e(t);return G(t)?o:Ie(o,r(t))}function qt(t){return t==null?t===i?"[object Undefined]":"[object Null]":Pe&&Pe in ut(t)?function(e){var r=nt.call(e,Pe),o=e[Pe];try{e[Pe]=i;var c=!0}catch{}var d=nr.call(e);return c&&(r?e[Pe]=o:delete e[Pe]),d}(t):function(e){return nr.call(e)}(t)}function zs(t,e){return t>e}function Pl(t,e){return t!=null&&nt.call(t,e)}function zl(t,e){return t!=null&&e in ut(t)}function Hs(t,e,r){for(var o=r?ks:Qn,c=t[0].length,d=t.length,p=d,_=U(d),m=1/0,S=[];p--;){var b=t[p];p&&e&&(b=lt(b,jt(e))),m=Tt(b.length,m),_[p]=!r&&(e||c>=120&&b.length>=120)?new He(p&&b):i}b=t[0];var R=-1,O=_[0];t:for(;++R<c&&S.length<m;){var $=b[R],P=e?e($):$;if($=r||$!==0?$:0,!(O?wn(O,P):o(S,P,r))){for(p=d;--p;){var I=_[p];if(!(I?wn(I,P):o(t[p],P,r)))continue t}O&&O.push(P),S.push($)}}return S}function Rn(t,e,r){var o=(t=zo(t,e=Ae(e,t)))==null?t:t[le(te(e))];return o==null?i:Ht(o,t,r)}function Xa(t){return pt(t)&&qt(t)==Q}function An(t,e,r,o,c){return t===e||(t==null||e==null||!pt(t)&&!pt(e)?t!=t&&e!=e:function(d,p,_,m,S,b){var R=G(d),O=G(p),$=R?ft:Et(d),P=O?ft:Et(p),I=($=$==Q?pe:$)==pe,A=(P=P==Q?pe:P)==pe,H=$==P;if(H&&Me(d)){if(!Me(p))return!1;R=!0,I=!1}if(H&&!I)return b||(b=new ie),R||fn(d)?Uo(d,p,_,m,S,b):function(D,j,vt,_t,Ut,ct,Ct){switch(vt){case Ke:if(D.byteLength!=j.byteLength||D.byteOffset!=j.byteOffset)return!1;D=D.buffer,j=j.buffer;case xn:return!(D.byteLength!=j.byteLength||!ct(new sr(D),new sr(j)));case Z:case xt:case Le:return ae(+D,+j);case Ft:return D.name==j.name&&D.message==j.message;case yn:case mn:return D==j+"";case at:var he=qs;case re:var Ue=1&_t;if(he||(he=Kn),D.size!=j.size&&!Ue)return!1;var Fr=Ct.get(D);if(Fr)return Fr==j;_t|=2,Ct.set(D,j);var Ei=Uo(he(D),he(j),_t,Ut,ct,Ct);return Ct.delete(D),Ei;case Gn:if(Tn)return Tn.call(D)==Tn.call(j)}return!1}(d,p,$,_,m,S,b);if(!(1&_)){var M=I&&nt.call(d,"__wrapped__"),W=A&&nt.call(p,"__wrapped__");if(M||W){var N=M?d.value():d,X=W?p.value():p;return b||(b=new ie),S(N,X,_,m,b)}}return!!H&&(b||(b=new ie),function(D,j,vt,_t,Ut,ct){var Ct=1&vt,he=ni(D),Ue=he.length,Fr=ni(j),Ei=Fr.length;if(Ue!=Ei&&!Ct)return!1;for(var $r=Ue;$r--;){var Ze=he[$r];if(!(Ct?Ze in j:nt.call(j,Ze)))return!1}var ku=ct.get(D),Su=ct.get(j);if(ku&&Su)return ku==j&&Su==D;var Lr=!0;ct.set(D,j),ct.set(j,D);for(var Ci=Ct;++$r<Ue;){var Dr=D[Ze=he[$r]],Pr=j[Ze];if(_t)var Iu=Ct?_t(Pr,Dr,Ze,j,D,ct):_t(Dr,Pr,Ze,D,j,ct);if(!(Iu===i?Dr===Pr||Ut(Dr,Pr,vt,_t,ct):Iu)){Lr=!1;break}Ci||(Ci=Ze=="constructor")}if(Lr&&!Ci){var zr=D.constructor,Hr=j.constructor;zr==Hr||!("constructor"in D)||!("constructor"in j)||typeof zr=="function"&&zr instanceof zr&&typeof Hr=="function"&&Hr instanceof Hr||(Lr=!1)}return ct.delete(D),ct.delete(j),Lr}(d,p,_,m,S,b))}(t,e,r,o,An,c))}function js(t,e,r,o){var c=r.length,d=c,p=!o;if(t==null)return!d;for(t=ut(t);c--;){var _=r[c];if(p&&_[2]?_[1]!==t[_[0]]:!(_[0]in t))return!1}for(;++c<d;){var m=(_=r[c])[0],S=t[m],b=_[1];if(p&&_[2]){if(S===i&&!(m in t))return!1}else{var R=new ie;if(o)var O=o(S,b,m,t,e,R);if(!(O===i?An(b,S,3,o,R):O))return!1}}return!0}function to(t){return!(!dt(t)||(e=t,$a&&$a in e))&&(we(t)?xl:Lc).test(We(t));var e}function eo(t){return typeof t=="function"?t:t==null?Pt:typeof t=="object"?G(t)?so(t[0],t[1]):ro(t):bu(t)}function Ns(t){if(!Un(t))return Tl(t);var e=[];for(var r in ut(t))nt.call(t,r)&&r!="constructor"&&e.push(r);return e}function Hl(t){if(!dt(t))return function(c){var d=[];if(c!=null)for(var p in ut(c))d.push(p);return d}(t);var e=Un(t),r=[];for(var o in t)(o!="constructor"||!e&&nt.call(t,o))&&r.push(o);return r}function Bs(t,e){return t<e}function no(t,e){var r=-1,o=Lt(t)?U(t.length):[];return Ce(t,function(c,d,p){o[++r]=e(c,d,p)}),o}function ro(t){var e=ii(t);return e.length==1&&e[0][2]?Do(e[0][0],e[0][1]):function(r){return r===t||js(r,t,e)}}function so(t,e){return oi(t)&&Lo(e)?Do(le(t),e):function(r){var o=yi(r,t);return o===i&&o===e?mi(r,t):An(e,o,3)}}function _r(t,e,r,o,c){t!==e&&Ds(e,function(d,p){if(c||(c=new ie),dt(d))(function(m,S,b,R,O,$,P){var I=ci(m,b),A=ci(S,b),H=P.get(A);if(H)$s(m,b,H);else{var M=$?$(I,A,b+"",m,S,P):i,W=M===i;if(W){var N=G(A),X=!N&&Me(A),D=!N&&!X&&fn(A);M=A,N||X||D?G(I)?M=I:gt(I)?M=$t(I):X?(W=!1,M=yo(A,!0)):D?(W=!1,M=mo(A,!0)):M=[]:Fn(A)||Ge(A)?(M=I,Ge(I)?M=fu(I):dt(I)&&!we(I)||(M=$o(A))):W=!1}W&&(P.set(A,M),O(M,A,R,$,P),P.delete(A)),$s(m,b,M)}})(t,e,p,r,_r,o,c);else{var _=o?o(ci(t,p),d,p+"",t,e,c):i;_===i&&(_=d),$s(t,p,_)}},Dt)}function io(t,e){var r=t.length;if(r)return xe(e+=e<0?r:0,r)?t[e]:i}function ao(t,e,r){e=e.length?lt(e,function(d){return G(d)?function(p){return Ne(p,d.length===1?d[0]:d)}:d}):[Pt];var o=-1;e=lt(e,jt(z()));var c=no(t,function(d,p,_){var m=lt(e,function(S){return S(d)});return{criteria:m,index:++o,value:d}});return function(d,p){var _=d.length;for(d.sort(p);_--;)d[_]=d[_].value;return d}(c,function(d,p){return function(_,m,S){for(var b=-1,R=_.criteria,O=m.criteria,$=R.length,P=S.length;++b<$;){var I=vo(R[b],O[b]);if(I)return b>=P?I:I*(S[b]=="desc"?-1:1)}return _.index-m.index}(d,p,r)})}function oo(t,e,r){for(var o=-1,c=e.length,d={};++o<c;){var p=e[o],_=Ne(t,p);r(_,p)&&qn(d,Ae(p,t),_)}return d}function Ws(t,e,r,o){var c=o?cl:tn,d=-1,p=e.length,_=t;for(t===e&&(e=$t(e)),r&&(_=lt(t,jt(r)));++d<p;)for(var m=0,S=e[d],b=r?r(S):S;(m=c(_,b,m,o))>-1;)_!==t&&ar.call(_,m,1),ar.call(t,m,1);return t}function uo(t,e){for(var r=t?e.length:0,o=r-1;r--;){var c=e[r];if(r==o||c!==d){var d=c;xe(c)?ar.call(t,c,1):Ys(t,c)}}return t}function Gs(t,e){return t+cr(ja()*(e-t+1))}function Zs(t,e){var r="";if(!t||e<1||e>w)return r;do e%2&&(r+=t),(e=cr(e/2))&&(t+=t);while(e);return r}function Y(t,e){return li(Po(t,e,Pt),t+"")}function jl(t){return Wa(dn(t))}function Nl(t,e){var r=dn(t);return Tr(r,je(e,0,r.length))}function qn(t,e,r,o){if(!dt(t))return t;for(var c=-1,d=(e=Ae(e,t)).length,p=d-1,_=t;_!=null&&++c<d;){var m=le(e[c]),S=r;if(m==="__proto__"||m==="constructor"||m==="prototype")return t;if(c!=p){var b=_[m];(S=o?o(b,m,_):i)===i&&(S=dt(b)?b:xe(e[c+1])?[]:{})}En(_,m,S),_=_[m]}return t}var co=lr?function(t,e){return lr.set(t,e),t}:Pt,Bl=or?function(t,e){return or(t,"toString",{configurable:!0,enumerable:!1,value:xi(e),writable:!0})}:Pt;function Wl(t){return Tr(dn(t))}function Xt(t,e,r){var o=-1,c=t.length;e<0&&(e=-e>c?0:c+e),(r=r>c?c:r)<0&&(r+=c),c=e>r?0:r-e>>>0,e>>>=0;for(var d=U(c);++o<c;)d[o]=t[o+e];return d}function Gl(t,e){var r;return Ce(t,function(o,c,d){return!(r=e(o,c,d))}),!!r}function yr(t,e,r){var o=0,c=t==null?o:t.length;if(typeof e=="number"&&e==e&&c<=2147483647){for(;o<c;){var d=o+c>>>1,p=t[d];p!==null&&!Bt(p)&&(r?p<=e:p<e)?o=d+1:c=d}return c}return Vs(t,e,Pt,r)}function Vs(t,e,r,o){var c=0,d=t==null?0:t.length;if(d===0)return 0;for(var p=(e=r(e))!=e,_=e===null,m=Bt(e),S=e===i;c<d;){var b=cr((c+d)/2),R=r(t[b]),O=R!==i,$=R===null,P=R==R,I=Bt(R);if(p)var A=o||P;else A=S?P&&(o||O):_?P&&O&&(o||!$):m?P&&O&&!$&&(o||!I):!$&&!I&&(o?R<=e:R<e);A?c=b+1:d=b}return Tt(d,4294967294)}function lo(t,e){for(var r=-1,o=t.length,c=0,d=[];++r<o;){var p=t[r],_=e?e(p):p;if(!r||!ae(_,m)){var m=_;d[c++]=p===0?0:p}}return d}function ho(t){return typeof t=="number"?t:Bt(t)?q:+t}function Nt(t){if(typeof t=="string")return t;if(G(t))return lt(t,Nt)+"";if(Bt(t))return Na?Na.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Re(t,e,r){var o=-1,c=Qn,d=t.length,p=!0,_=[],m=_;if(r)p=!1,c=ks;else if(d>=200){var S=e?null:Vl(t);if(S)return Kn(S);p=!1,c=wn,m=new He}else m=e?[]:_;t:for(;++o<d;){var b=t[o],R=e?e(b):b;if(b=r||b!==0?b:0,p&&R==R){for(var O=m.length;O--;)if(m[O]===R)continue t;e&&m.push(R),_.push(b)}else c(m,R,r)||(m!==_&&m.push(R),_.push(b))}return _}function Ys(t,e){return(t=zo(t,e=Ae(e,t)))==null||delete t[le(te(e))]}function fo(t,e,r,o){return qn(t,e,r(Ne(t,e)),o)}function mr(t,e,r,o){for(var c=t.length,d=o?c:-1;(o?d--:++d<c)&&e(t[d],d,t););return r?Xt(t,o?0:d,o?d+1:c):Xt(t,o?d+1:0,o?c:d)}function po(t,e){var r=t;return r instanceof J&&(r=r.value()),Ss(e,function(o,c){return c.func.apply(c.thisArg,Ie([o],c.args))},r)}function Qs(t,e,r){var o=t.length;if(o<2)return o?Re(t[0]):[];for(var c=-1,d=U(o);++c<o;)for(var p=t[c],_=-1;++_<o;)_!=c&&(d[c]=Cn(d[c]||p,t[_],e,r));return Re(kt(d,1),e,r)}function go(t,e,r){for(var o=-1,c=t.length,d=e.length,p={};++o<c;){var _=o<d?e[o]:i;r(p,t[o],_)}return p}function Js(t){return gt(t)?t:[]}function Ks(t){return typeof t=="function"?t:Pt}function Ae(t,e){return G(t)?t:oi(t,e)?[t]:Bo(et(t))}var Zl=Y;function qe(t,e,r){var o=t.length;return r=r===i?o:r,!e&&r>=o?t:Xt(t,e,r)}var _o=wl||function(t){return bt.clearTimeout(t)};function yo(t,e){if(e)return t.slice();var r=t.length,o=La?La(r):new t.constructor(r);return t.copy(o),o}function Xs(t){var e=new t.constructor(t.byteLength);return new sr(e).set(new sr(t)),e}function mo(t,e){var r=e?Xs(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function vo(t,e){if(t!==e){var r=t!==i,o=t===null,c=t==t,d=Bt(t),p=e!==i,_=e===null,m=e==e,S=Bt(e);if(!_&&!S&&!d&&t>e||d&&p&&m&&!_&&!S||o&&p&&m||!r&&m||!c)return 1;if(!o&&!d&&!S&&t<e||S&&r&&c&&!o&&!d||_&&r&&c||!p&&c||!m)return-1}return 0}function xo(t,e,r,o){for(var c=-1,d=t.length,p=r.length,_=-1,m=e.length,S=mt(d-p,0),b=U(m+S),R=!o;++_<m;)b[_]=e[_];for(;++c<p;)(R||c<d)&&(b[r[c]]=t[c]);for(;S--;)b[_++]=t[c++];return b}function wo(t,e,r,o){for(var c=-1,d=t.length,p=-1,_=r.length,m=-1,S=e.length,b=mt(d-_,0),R=U(b+S),O=!o;++c<b;)R[c]=t[c];for(var $=c;++m<S;)R[$+m]=e[m];for(;++p<_;)(O||c<d)&&(R[$+r[p]]=t[c++]);return R}function $t(t,e){var r=-1,o=t.length;for(e||(e=U(o));++r<o;)e[r]=t[r];return e}function ce(t,e,r,o){var c=!r;r||(r={});for(var d=-1,p=e.length;++d<p;){var _=e[d],m=o?o(r[_],t[_],_,r,t):i;m===i&&(m=t[_]),c?ye(r,_,m):En(r,_,m)}return r}function vr(t,e){return function(r,o){var c=G(r)?il:Ll,d=e?e():{};return c(r,t,z(o,2),d)}}function cn(t){return Y(function(e,r){var o=-1,c=r.length,d=c>1?r[c-1]:i,p=c>2?r[2]:i;for(d=t.length>3&&typeof d=="function"?(c--,d):i,p&&Mt(r[0],r[1],p)&&(d=c<3?i:d,c=1),e=ut(e);++o<c;){var _=r[o];_&&t(e,_,o,d)}return e})}function bo(t,e){return function(r,o){if(r==null)return r;if(!Lt(r))return t(r,o);for(var c=r.length,d=e?c:-1,p=ut(r);(e?d--:++d<c)&&o(p[d],d,p)!==!1;);return r}}function ko(t){return function(e,r,o){for(var c=-1,d=ut(e),p=o(e),_=p.length;_--;){var m=p[t?_:++c];if(r(d[m],m,d)===!1)break}return e}}function So(t){return function(e){var r=en(e=et(e))?se(e):i,o=r?r[0]:e.charAt(0),c=r?qe(r,1).join(""):e.slice(1);return o[t]()+c}}function ln(t){return function(e){return Ss(xu(vu(e).replace(Vc,"")),t,"")}}function Mn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=un(t.prototype),o=t.apply(r,e);return dt(o)?o:r}}function Io(t){return function(e,r,o){var c=ut(e);if(!Lt(e)){var d=z(r,3);e=wt(e),r=function(_){return d(c[_],_,c)}}var p=t(e,r,o);return p>-1?c[d?e[p]:p]:i}}function To(t){return ve(function(e){var r=e.length,o=r,c=Jt.prototype.thru;for(t&&e.reverse();o--;){var d=e[o];if(typeof d!="function")throw new Qt(n);if(c&&!p&&Sr(d)=="wrapper")var p=new Jt([],!0)}for(o=p?o:r;++o<r;){var _=Sr(d=e[o]),m=_=="wrapper"?si(d):i;p=m&&ui(m[0])&&m[1]==424&&!m[4].length&&m[9]==1?p[Sr(m[0])].apply(p,m[3]):d.length==1&&ui(d)?p[_]():p.thru(d)}return function(){var S=arguments,b=S[0];if(p&&S.length==1&&G(b))return p.plant(b).value();for(var R=0,O=r?e[R].apply(this,S):b;++R<r;)O=e[R].call(this,O);return O}})}function xr(t,e,r,o,c,d,p,_,m,S){var b=e&g,R=1&e,O=2&e,$=24&e,P=512&e,I=O?i:Mn(t);return function A(){for(var H=arguments.length,M=U(H),W=H;W--;)M[W]=arguments[W];if($)var N=hn(A),X=function(_t,Ut){for(var ct=_t.length,Ct=0;ct--;)_t[ct]===Ut&&++Ct;return Ct}(M,N);if(o&&(M=xo(M,o,c,$)),d&&(M=wo(M,d,p,$)),H-=X,$&&H<S){var D=Te(M,N);return Ro(t,e,xr,A.placeholder,r,M,D,_,m,S-H)}var j=R?r:this,vt=O?j[t]:t;return H=M.length,_?M=function(_t,Ut){for(var ct=_t.length,Ct=Tt(Ut.length,ct),he=$t(_t);Ct--;){var Ue=Ut[Ct];_t[Ct]=xe(Ue,ct)?he[Ue]:i}return _t}(M,_):P&&H>1&&M.reverse(),b&&m<H&&(M.length=m),this&&this!==bt&&this instanceof A&&(vt=I||Mn(vt)),vt.apply(j,M)}}function Eo(t,e){return function(r,o){return function(c,d,p,_){return ue(c,function(m,S,b){d(_,p(m),S,b)}),_}(r,t,e(o),{})}}function wr(t,e){return function(r,o){var c;if(r===i&&o===i)return e;if(r!==i&&(c=r),o!==i){if(c===i)return o;typeof r=="string"||typeof o=="string"?(r=Nt(r),o=Nt(o)):(r=ho(r),o=ho(o)),c=t(r,o)}return c}}function ti(t){return ve(function(e){return e=lt(e,jt(z())),Y(function(r){var o=this;return t(e,function(c){return Ht(c,o,r)})})})}function br(t,e){var r=(e=e===i?" ":Nt(e)).length;if(r<2)return r?Zs(e,t):e;var o=Zs(e,ur(t/nn(e)));return en(e)?qe(se(o),0,t).join(""):o.slice(0,t)}function Co(t){return function(e,r,o){return o&&typeof o!="number"&&Mt(e,r,o)&&(r=o=i),e=be(e),r===i?(r=e,e=0):r=be(r),function(c,d,p,_){for(var m=-1,S=mt(ur((d-c)/(p||1)),0),b=U(S);S--;)b[_?S:++m]=c,c+=p;return b}(e,r,o=o===i?e<r?1:-1:be(o),t)}}function kr(t){return function(e,r){return typeof e=="string"&&typeof r=="string"||(e=ee(e),r=ee(r)),t(e,r)}}function Ro(t,e,r,o,c,d,p,_,m,S){var b=8&e;e|=b?l:h,4&(e&=~(b?h:l))||(e&=-4);var R=[t,e,c,b?d:i,b?p:i,b?i:d,b?i:p,_,m,S],O=r.apply(i,R);return ui(t)&&Ho(O,R),O.placeholder=o,jo(O,t,e)}function ei(t){var e=oe[t];return function(r,o){if(r=ee(r),(o=o==null?0:Tt(V(o),292))&&Ha(r)){var c=(et(r)+"e").split("e");return+((c=(et(e(c[0]+"e"+(+c[1]+o)))+"e").split("e"))[0]+"e"+(+c[1]-o))}return e(r)}}var Vl=an&&1/Kn(new an([,-0]))[1]==k?function(t){return new an(t)}:ki;function Ao(t){return function(e){var r=Et(e);return r==at?qs(e):r==re?dl(e):function(o,c){return lt(c,function(d){return[d,o[d]]})}(e,t(e))}}function me(t,e,r,o,c,d,p,_){var m=2&e;if(!m&&typeof t!="function")throw new Qt(n);var S=o?o.length:0;if(S||(e&=-97,o=c=i),p=p===i?p:mt(V(p),0),_=_===i?_:V(_),S-=c?c.length:0,e&h){var b=o,R=c;o=c=i}var O=m?i:si(t),$=[t,e,r,o,c,b,R,d,p,_];if(O&&function(I,A){var H=I[1],M=A[1],W=H|M,N=W<131,X=M==g&&H==8||M==g&&H==x&&I[7].length<=A[8]||M==384&&A[7].length<=A[8]&&H==8;if(!N&&!X)return I;1&M&&(I[2]=A[2],W|=1&H?0:4);var D=A[3];if(D){var j=I[3];I[3]=j?xo(j,D,A[4]):D,I[4]=j?Te(I[3],a):A[4]}(D=A[5])&&(j=I[5],I[5]=j?wo(j,D,A[6]):D,I[6]=j?Te(I[5],a):A[6]),(D=A[7])&&(I[7]=D),M&g&&(I[8]=I[8]==null?A[8]:Tt(I[8],A[8])),I[9]==null&&(I[9]=A[9]),I[0]=A[0],I[1]=W}($,O),t=$[0],e=$[1],r=$[2],o=$[3],c=$[4],!(_=$[9]=$[9]===i?m?0:t.length:mt($[9]-S,0))&&24&e&&(e&=-25),e&&e!=1)P=e==8||e==u?function(I,A,H){var M=Mn(I);return function W(){for(var N=arguments.length,X=U(N),D=N,j=hn(W);D--;)X[D]=arguments[D];var vt=N<3&&X[0]!==j&&X[N-1]!==j?[]:Te(X,j);return(N-=vt.length)<H?Ro(I,A,xr,W.placeholder,i,X,vt,i,i,H-N):Ht(this&&this!==bt&&this instanceof W?M:I,this,X)}}(t,e,_):e!=l&&e!=33||c.length?xr.apply(i,$):function(I,A,H,M){var W=1&A,N=Mn(I);return function X(){for(var D=-1,j=arguments.length,vt=-1,_t=M.length,Ut=U(_t+j),ct=this&&this!==bt&&this instanceof X?N:I;++vt<_t;)Ut[vt]=M[vt];for(;j--;)Ut[vt++]=arguments[++D];return Ht(ct,W?H:this,Ut)}}(t,e,r,o);else var P=function(I,A,H){var M=1&A,W=Mn(I);return function N(){return(this&&this!==bt&&this instanceof N?W:I).apply(M?H:this,arguments)}}(t,e,r);return jo((O?co:Ho)(P,$),t,e)}function qo(t,e,r,o){return t===i||ae(t,sn[r])&&!nt.call(o,r)?e:t}function Mo(t,e,r,o,c,d){return dt(t)&&dt(e)&&(d.set(e,t),_r(t,e,i,Mo,d),d.delete(e)),t}function Yl(t){return Fn(t)?i:t}function Uo(t,e,r,o,c,d){var p=1&r,_=t.length,m=e.length;if(_!=m&&!(p&&m>_))return!1;var S=d.get(t),b=d.get(e);if(S&&b)return S==e&&b==t;var R=-1,O=!0,$=2&r?new He:i;for(d.set(t,e),d.set(e,t);++R<_;){var P=t[R],I=e[R];if(o)var A=p?o(I,P,R,e,t,d):o(P,I,R,t,e,d);if(A!==i){if(A)continue;O=!1;break}if($){if(!Is(e,function(H,M){if(!wn($,M)&&(P===H||c(P,H,r,o,d)))return $.push(M)})){O=!1;break}}else if(P!==I&&!c(P,I,r,o,d)){O=!1;break}}return d.delete(t),d.delete(e),O}function ve(t){return li(Po(t,i,Vo),t+"")}function ni(t){return Ka(t,wt,ai)}function ri(t){return Ka(t,Dt,Oo)}var si=lr?function(t){return lr.get(t)}:ki;function Sr(t){for(var e=t.name+"",r=on[e],o=nt.call(on,e)?r.length:0;o--;){var c=r[o],d=c.func;if(d==null||d==t)return c.name}return e}function hn(t){return(nt.call(f,"placeholder")?f:t).placeholder}function z(){var t=f.iteratee||wi;return t=t===wi?eo:t,arguments.length?t(arguments[0],arguments[1]):t}function Ir(t,e){var r,o,c=t.__data__;return((o=typeof(r=e))=="string"||o=="number"||o=="symbol"||o=="boolean"?r!=="__proto__":r===null)?c[typeof e=="string"?"string":"hash"]:c.map}function ii(t){for(var e=wt(t),r=e.length;r--;){var o=e[r],c=t[o];e[r]=[o,c,Lo(c)]}return e}function Be(t,e){var r=function(o,c){return o==null?i:o[c]}(t,e);return to(r)?r:i}var ai=Us?function(t){return t==null?[]:(t=ut(t),Se(Us(t),function(e){return Pa.call(t,e)}))}:Si,Oo=Us?function(t){for(var e=[];t;)Ie(e,ai(t)),t=ir(t);return e}:Si,Et=qt;function Fo(t,e,r){for(var o=-1,c=(e=Ae(e,t)).length,d=!1;++o<c;){var p=le(e[o]);if(!(d=t!=null&&r(t,p)))break;t=t[p]}return d||++o!=c?d:!!(c=t==null?0:t.length)&&Mr(c)&&xe(p,c)&&(G(t)||Ge(t))}function $o(t){return typeof t.constructor!="function"||Un(t)?{}:un(ir(t))}function Ql(t){return G(t)||Ge(t)||!!(za&&t&&t[za])}function xe(t,e){var r=typeof t;return!!(e=e??w)&&(r=="number"||r!="symbol"&&Pc.test(t))&&t>-1&&t%1==0&&t<e}function Mt(t,e,r){if(!dt(r))return!1;var o=typeof e;return!!(o=="number"?Lt(r)&&xe(e,r.length):o=="string"&&e in r)&&ae(r[e],t)}function oi(t,e){if(G(t))return!1;var r=typeof t;return!(r!="number"&&r!="symbol"&&r!="boolean"&&t!=null&&!Bt(t))||Sc.test(t)||!kc.test(t)||e!=null&&t in ut(e)}function ui(t){var e=Sr(t),r=f[e];if(typeof r!="function"||!(e in J.prototype))return!1;if(t===r)return!0;var o=si(r);return!!o&&t===o[0]}(Os&&Et(new Os(new ArrayBuffer(1)))!=Ke||kn&&Et(new kn)!=at||Fs&&Et(Fs.resolve())!=Yi||an&&Et(new an)!=re||Sn&&Et(new Sn)!=vn)&&(Et=function(t){var e=qt(t),r=e==pe?t.constructor:i,o=r?We(r):"";if(o)switch(o){case Al:return Ke;case ql:return at;case Ml:return Yi;case Ul:return re;case Ol:return vn}return e});var Jl=tr?we:Ii;function Un(t){var e=t&&t.constructor;return t===(typeof e=="function"&&e.prototype||sn)}function Lo(t){return t==t&&!dt(t)}function Do(t,e){return function(r){return r!=null&&r[t]===e&&(e!==i||t in ut(r))}}function Po(t,e,r){return e=mt(e===i?t.length-1:e,0),function(){for(var o=arguments,c=-1,d=mt(o.length-e,0),p=U(d);++c<d;)p[c]=o[e+c];c=-1;for(var _=U(e+1);++c<e;)_[c]=o[c];return _[e]=r(p),Ht(t,this,_)}}function zo(t,e){return e.length<2?t:Ne(t,Xt(e,0,-1))}function ci(t,e){if((e!=="constructor"||typeof t[e]!="function")&&e!="__proto__")return t[e]}var Ho=No(co),On=kl||function(t,e){return bt.setTimeout(t,e)},li=No(Bl);function jo(t,e,r){var o=e+"";return li(t,function(c,d){var p=d.length;if(!p)return c;var _=p-1;return d[_]=(p>1?"& ":"")+d[_],d=d.join(p>2?", ":" "),c.replace(Cc,`{
/* [wrapped with `+d+`] */
`)}(o,function(c,d){return Yt(F,function(p){var _="_."+p[0];d&p[1]&&!Qn(c,_)&&c.push(_)}),c.sort()}(function(c){var d=c.match(Rc);return d?d[1].split(Ac):[]}(o),r)))}function No(t){var e=0,r=0;return function(){var o=El(),c=16-(o-r);if(r=o,c>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Tr(t,e){var r=-1,o=t.length,c=o-1;for(e=e===i?o:e;++r<e;){var d=Gs(r,c),p=t[d];t[d]=t[r],t[r]=p}return t.length=e,t}var Bo=function(t){var e=Ar(t,function(o){return r.size===500&&r.clear(),o}),r=e.cache;return e}(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Ic,function(r,o,c,d){e.push(c?d.replace(Uc,"$1"):o||r)}),e});function le(t){if(typeof t=="string"||Bt(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function We(t){if(t!=null){try{return er.call(t)}catch{}try{return t+""}catch{}}return""}function Wo(t){if(t instanceof J)return t.clone();var e=new Jt(t.__wrapped__,t.__chain__);return e.__actions__=$t(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Kl=Y(function(t,e){return gt(t)?Cn(t,kt(e,1,gt,!0)):[]}),Xl=Y(function(t,e){var r=te(e);return gt(r)&&(r=i),gt(t)?Cn(t,kt(e,1,gt,!0),z(r,2)):[]}),th=Y(function(t,e){var r=te(e);return gt(r)&&(r=i),gt(t)?Cn(t,kt(e,1,gt,!0),i,r):[]});function Go(t,e,r){var o=t==null?0:t.length;if(!o)return-1;var c=r==null?0:V(r);return c<0&&(c=mt(o+c,0)),Jn(t,z(e,3),c)}function Zo(t,e,r){var o=t==null?0:t.length;if(!o)return-1;var c=o-1;return r!==i&&(c=V(r),c=r<0?mt(o+c,0):Tt(c,o-1)),Jn(t,z(e,3),c,!0)}function Vo(t){return t!=null&&t.length?kt(t,1):[]}function Yo(t){return t&&t.length?t[0]:i}var eh=Y(function(t){var e=lt(t,Js);return e.length&&e[0]===t[0]?Hs(e):[]}),nh=Y(function(t){var e=te(t),r=lt(t,Js);return e===te(r)?e=i:r.pop(),r.length&&r[0]===t[0]?Hs(r,z(e,2)):[]}),rh=Y(function(t){var e=te(t),r=lt(t,Js);return(e=typeof e=="function"?e:i)&&r.pop(),r.length&&r[0]===t[0]?Hs(r,i,e):[]});function te(t){var e=t==null?0:t.length;return e?t[e-1]:i}var sh=Y(Qo);function Qo(t,e){return t&&t.length&&e&&e.length?Ws(t,e):t}var ih=ve(function(t,e){var r=t==null?0:t.length,o=Ls(t,e);return uo(t,lt(e,function(c){return xe(c,r)?+c:c}).sort(vo)),o});function hi(t){return t==null?t:Rl.call(t)}var ah=Y(function(t){return Re(kt(t,1,gt,!0))}),oh=Y(function(t){var e=te(t);return gt(e)&&(e=i),Re(kt(t,1,gt,!0),z(e,2))}),uh=Y(function(t){var e=te(t);return e=typeof e=="function"?e:i,Re(kt(t,1,gt,!0),i,e)});function fi(t){if(!t||!t.length)return[];var e=0;return t=Se(t,function(r){if(gt(r))return e=mt(r.length,e),!0}),Rs(e,function(r){return lt(t,Ts(r))})}function Jo(t,e){if(!t||!t.length)return[];var r=fi(t);return e==null?r:lt(r,function(o){return Ht(e,i,o)})}var ch=Y(function(t,e){return gt(t)?Cn(t,e):[]}),lh=Y(function(t){return Qs(Se(t,gt))}),hh=Y(function(t){var e=te(t);return gt(e)&&(e=i),Qs(Se(t,gt),z(e,2))}),fh=Y(function(t){var e=te(t);return e=typeof e=="function"?e:i,Qs(Se(t,gt),i,e)}),dh=Y(fi),ph=Y(function(t){var e=t.length,r=e>1?t[e-1]:i;return r=typeof r=="function"?(t.pop(),r):i,Jo(t,r)});function Ko(t){var e=f(t);return e.__chain__=!0,e}function Er(t,e){return e(t)}var gh=ve(function(t){var e=t.length,r=e?t[0]:0,o=this.__wrapped__,c=function(d){return Ls(d,t)};return!(e>1||this.__actions__.length)&&o instanceof J&&xe(r)?((o=o.slice(r,+r+(e?1:0))).__actions__.push({func:Er,args:[c],thisArg:i}),new Jt(o,this.__chain__).thru(function(d){return e&&!d.length&&d.push(i),d})):this.thru(c)}),_h=vr(function(t,e,r){nt.call(t,r)?++t[r]:ye(t,r,1)}),yh=Io(Go),mh=Io(Zo);function Xo(t,e){return(G(t)?Yt:Ce)(t,z(e,3))}function tu(t,e){return(G(t)?al:Ya)(t,z(e,3))}var vh=vr(function(t,e,r){nt.call(t,r)?t[r].push(e):ye(t,r,[e])}),xh=Y(function(t,e,r){var o=-1,c=typeof e=="function",d=Lt(t)?U(t.length):[];return Ce(t,function(p){d[++o]=c?Ht(e,p,r):Rn(p,e,r)}),d}),wh=vr(function(t,e,r){ye(t,r,e)});function Cr(t,e){return(G(t)?lt:no)(t,z(e,3))}var bh=vr(function(t,e,r){t[r?0:1].push(e)},function(){return[[],[]]}),kh=Y(function(t,e){if(t==null)return[];var r=e.length;return r>1&&Mt(t,e[0],e[1])?e=[]:r>2&&Mt(e[0],e[1],e[2])&&(e=[e[0]]),ao(t,kt(e,1),[])}),Rr=bl||function(){return bt.Date.now()};function eu(t,e,r){return e=r?i:e,e=t&&e==null?t.length:e,me(t,g,i,i,i,i,e)}function nu(t,e){var r;if(typeof e!="function")throw new Qt(n);return t=V(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=i),r}}var di=Y(function(t,e,r){var o=1;if(r.length){var c=Te(r,hn(di));o|=l}return me(t,o,e,r,c)}),ru=Y(function(t,e,r){var o=3;if(r.length){var c=Te(r,hn(ru));o|=l}return me(e,o,t,r,c)});function su(t,e,r){var o,c,d,p,_,m,S=0,b=!1,R=!1,O=!0;if(typeof t!="function")throw new Qt(n);function $(M){var W=o,N=c;return o=c=i,S=M,p=t.apply(N,W)}function P(M){var W=M-m;return m===i||W>=e||W<0||R&&M-S>=d}function I(){var M=Rr();if(P(M))return A(M);_=On(I,function(W){var N=e-(W-m);return R?Tt(N,d-(W-S)):N}(M))}function A(M){return _=i,O&&o?$(M):(o=c=i,p)}function H(){var M=Rr(),W=P(M);if(o=arguments,c=this,m=M,W){if(_===i)return function(N){return S=N,_=On(I,e),b?$(N):p}(m);if(R)return _o(_),_=On(I,e),$(m)}return _===i&&(_=On(I,e)),p}return e=ee(e)||0,dt(r)&&(b=!!r.leading,d=(R="maxWait"in r)?mt(ee(r.maxWait)||0,e):d,O="trailing"in r?!!r.trailing:O),H.cancel=function(){_!==i&&_o(_),S=0,o=m=c=_=i},H.flush=function(){return _===i?p:A(Rr())},H}var Sh=Y(function(t,e){return Va(t,1,e)}),Ih=Y(function(t,e,r){return Va(t,ee(e)||0,r)});function Ar(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new Qt(n);var r=function(){var o=arguments,c=e?e.apply(this,o):o[0],d=r.cache;if(d.has(c))return d.get(c);var p=t.apply(this,o);return r.cache=d.set(c,p)||d,p};return r.cache=new(Ar.Cache||_e),r}function qr(t){if(typeof t!="function")throw new Qt(n);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ar.Cache=_e;var Th=Zl(function(t,e){var r=(e=e.length==1&&G(e[0])?lt(e[0],jt(z())):lt(kt(e,1),jt(z()))).length;return Y(function(o){for(var c=-1,d=Tt(o.length,r);++c<d;)o[c]=e[c].call(this,o[c]);return Ht(t,this,o)})}),pi=Y(function(t,e){var r=Te(e,hn(pi));return me(t,l,i,e,r)}),iu=Y(function(t,e){var r=Te(e,hn(iu));return me(t,h,i,e,r)}),Eh=ve(function(t,e){return me(t,x,i,i,i,e)});function ae(t,e){return t===e||t!=t&&e!=e}var Ch=kr(zs),Rh=kr(function(t,e){return t>=e}),Ge=Xa(function(){return arguments}())?Xa:function(t){return pt(t)&&nt.call(t,"callee")&&!Pa.call(t,"callee")},G=U.isArray,Ah=xa?jt(xa):function(t){return pt(t)&&qt(t)==xn};function Lt(t){return t!=null&&Mr(t.length)&&!we(t)}function gt(t){return pt(t)&&Lt(t)}var Me=Sl||Ii,qh=wa?jt(wa):function(t){return pt(t)&&qt(t)==xt};function gi(t){if(!pt(t))return!1;var e=qt(t);return e==Ft||e=="[object DOMException]"||typeof t.message=="string"&&typeof t.name=="string"&&!Fn(t)}function we(t){if(!dt(t))return!1;var e=qt(t);return e==Zt||e==ke||e=="[object AsyncFunction]"||e=="[object Proxy]"}function au(t){return typeof t=="number"&&t==V(t)}function Mr(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=w}function dt(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function pt(t){return t!=null&&typeof t=="object"}var ou=ba?jt(ba):function(t){return pt(t)&&Et(t)==at};function uu(t){return typeof t=="number"||pt(t)&&qt(t)==Le}function Fn(t){if(!pt(t)||qt(t)!=pe)return!1;var e=ir(t);if(e===null)return!0;var r=nt.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&er.call(r)==ml}var _i=ka?jt(ka):function(t){return pt(t)&&qt(t)==yn},cu=Sa?jt(Sa):function(t){return pt(t)&&Et(t)==re};function Ur(t){return typeof t=="string"||!G(t)&&pt(t)&&qt(t)==mn}function Bt(t){return typeof t=="symbol"||pt(t)&&qt(t)==Gn}var fn=Ia?jt(Ia):function(t){return pt(t)&&Mr(t.length)&&!!ot[qt(t)]},Mh=kr(Bs),Uh=kr(function(t,e){return t<=e});function lu(t){if(!t)return[];if(Lt(t))return Ur(t)?se(t):$t(t);if(bn&&t[bn])return function(r){for(var o,c=[];!(o=r.next()).done;)c.push(o.value);return c}(t[bn]());var e=Et(t);return(e==at?qs:e==re?Kn:dn)(t)}function be(t){return t?(t=ee(t))===k||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:t===0?t:0}function V(t){var e=be(t),r=e%1;return e==e?r?e-r:e:0}function hu(t){return t?je(V(t),0,C):0}function ee(t){if(typeof t=="number")return t;if(Bt(t))return q;if(dt(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=dt(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=qa(t);var r=$c.test(t);return r||Dc.test(t)?rl(t.slice(2),r?2:8):Fc.test(t)?q:+t}function fu(t){return ce(t,Dt(t))}function et(t){return t==null?"":Nt(t)}var Oh=cn(function(t,e){if(Un(e)||Lt(e))ce(e,wt(e),t);else for(var r in e)nt.call(e,r)&&En(t,r,e[r])}),du=cn(function(t,e){ce(e,Dt(e),t)}),Or=cn(function(t,e,r,o){ce(e,Dt(e),t,o)}),Fh=cn(function(t,e,r,o){ce(e,wt(e),t,o)}),$h=ve(Ls),Lh=Y(function(t,e){t=ut(t);var r=-1,o=e.length,c=o>2?e[2]:i;for(c&&Mt(e[0],e[1],c)&&(o=1);++r<o;)for(var d=e[r],p=Dt(d),_=-1,m=p.length;++_<m;){var S=p[_],b=t[S];(b===i||ae(b,sn[S])&&!nt.call(t,S))&&(t[S]=d[S])}return t}),Dh=Y(function(t){return t.push(i,Mo),Ht(pu,i,t)});function yi(t,e,r){var o=t==null?i:Ne(t,e);return o===i?r:o}function mi(t,e){return t!=null&&Fo(t,e,zl)}var Ph=Eo(function(t,e,r){e!=null&&typeof e.toString!="function"&&(e=nr.call(e)),t[e]=r},xi(Pt)),zh=Eo(function(t,e,r){e!=null&&typeof e.toString!="function"&&(e=nr.call(e)),nt.call(t,e)?t[e].push(r):t[e]=[r]},z),Hh=Y(Rn);function wt(t){return Lt(t)?Ba(t):Ns(t)}function Dt(t){return Lt(t)?Ba(t,!0):Hl(t)}var jh=cn(function(t,e,r){_r(t,e,r)}),pu=cn(function(t,e,r,o){_r(t,e,r,o)}),Nh=ve(function(t,e){var r={};if(t==null)return r;var o=!1;e=lt(e,function(d){return d=Ae(d,t),o||(o=d.length>1),d}),ce(t,ri(t),r),o&&(r=Kt(r,7,Yl));for(var c=e.length;c--;)Ys(r,e[c]);return r}),Bh=ve(function(t,e){return t==null?{}:function(r,o){return oo(r,o,function(c,d){return mi(r,d)})}(t,e)});function gu(t,e){if(t==null)return{};var r=lt(ri(t),function(o){return[o]});return e=z(e),oo(t,r,function(o,c){return e(o,c[0])})}var _u=Ao(wt),yu=Ao(Dt);function dn(t){return t==null?[]:As(t,wt(t))}var Wh=ln(function(t,e,r){return e=e.toLowerCase(),t+(r?mu(e):e)});function mu(t){return vi(et(t).toLowerCase())}function vu(t){return(t=et(t))&&t.replace(zc,ll).replace(Yc,"")}var Gh=ln(function(t,e,r){return t+(r?"-":"")+e.toLowerCase()}),Zh=ln(function(t,e,r){return t+(r?" ":"")+e.toLowerCase()}),Vh=So("toLowerCase"),Yh=ln(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}),Qh=ln(function(t,e,r){return t+(r?" ":"")+vi(e)}),Jh=ln(function(t,e,r){return t+(r?" ":"")+e.toUpperCase()}),vi=So("toUpperCase");function xu(t,e,r){return t=et(t),(e=r?i:e)===i?function(o){return Kc.test(o)}(t)?function(o){return o.match(Qc)||[]}(t):function(o){return o.match(qc)||[]}(t):t.match(e)||[]}var wu=Y(function(t,e){try{return Ht(t,i,e)}catch(r){return gi(r)?r:new K(r)}}),Kh=ve(function(t,e){return Yt(e,function(r){r=le(r),ye(t,r,di(t[r],t))}),t});function xi(t){return function(){return t}}var Xh=To(),tf=To(!0);function Pt(t){return t}function wi(t){return eo(typeof t=="function"?t:Kt(t,1))}var ef=Y(function(t,e){return function(r){return Rn(r,t,e)}}),nf=Y(function(t,e){return function(r){return Rn(t,r,e)}});function bi(t,e,r){var o=wt(e),c=gr(e,o);r!=null||dt(e)&&(c.length||!o.length)||(r=e,e=t,t=this,c=gr(e,wt(e)));var d=!(dt(r)&&"chain"in r&&!r.chain),p=we(t);return Yt(c,function(_){var m=e[_];t[_]=m,p&&(t.prototype[_]=function(){var S=this.__chain__;if(d||S){var b=t(this.__wrapped__);return(b.__actions__=$t(this.__actions__)).push({func:m,args:arguments,thisArg:t}),b.__chain__=S,b}return m.apply(t,Ie([this.value()],arguments))})}),t}function ki(){}var rf=ti(lt),sf=ti(Ta),af=ti(Is);function bu(t){return oi(t)?Ts(le(t)):function(e){return function(r){return Ne(r,e)}}(t)}var of=Co(),uf=Co(!0);function Si(){return[]}function Ii(){return!1}var Ti,cf=wr(function(t,e){return t+e},0),lf=ei("ceil"),hf=wr(function(t,e){return t/e},1),ff=ei("floor"),df=wr(function(t,e){return t*e},1),pf=ei("round"),gf=wr(function(t,e){return t-e},0);return f.after=function(t,e){if(typeof e!="function")throw new Qt(n);return t=V(t),function(){if(--t<1)return e.apply(this,arguments)}},f.ary=eu,f.assign=Oh,f.assignIn=du,f.assignInWith=Or,f.assignWith=Fh,f.at=$h,f.before=nu,f.bind=di,f.bindAll=Kh,f.bindKey=ru,f.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return G(t)?t:[t]},f.chain=Ko,f.chunk=function(t,e,r){e=(r?Mt(t,e,r):e===i)?1:mt(V(e),0);var o=t==null?0:t.length;if(!o||e<1)return[];for(var c=0,d=0,p=U(ur(o/e));c<o;)p[d++]=Xt(t,c,c+=e);return p},f.compact=function(t){for(var e=-1,r=t==null?0:t.length,o=0,c=[];++e<r;){var d=t[e];d&&(c[o++]=d)}return c},f.concat=function(){var t=arguments.length;if(!t)return[];for(var e=U(t-1),r=arguments[0],o=t;o--;)e[o-1]=arguments[o];return Ie(G(r)?$t(r):[r],kt(e,1))},f.cond=function(t){var e=t==null?0:t.length,r=z();return t=e?lt(t,function(o){if(typeof o[1]!="function")throw new Qt(n);return[r(o[0]),o[1]]}):[],Y(function(o){for(var c=-1;++c<e;){var d=t[c];if(Ht(d[0],this,o))return Ht(d[1],this,o)}})},f.conforms=function(t){return function(e){var r=wt(e);return function(o){return Za(o,e,r)}}(Kt(t,1))},f.constant=xi,f.countBy=_h,f.create=function(t,e){var r=un(t);return e==null?r:Ga(r,e)},f.curry=function t(e,r,o){var c=me(e,8,i,i,i,i,i,r=o?i:r);return c.placeholder=t.placeholder,c},f.curryRight=function t(e,r,o){var c=me(e,u,i,i,i,i,i,r=o?i:r);return c.placeholder=t.placeholder,c},f.debounce=su,f.defaults=Lh,f.defaultsDeep=Dh,f.defer=Sh,f.delay=Ih,f.difference=Kl,f.differenceBy=Xl,f.differenceWith=th,f.drop=function(t,e,r){var o=t==null?0:t.length;return o?Xt(t,(e=r||e===i?1:V(e))<0?0:e,o):[]},f.dropRight=function(t,e,r){var o=t==null?0:t.length;return o?Xt(t,0,(e=o-(e=r||e===i?1:V(e)))<0?0:e):[]},f.dropRightWhile=function(t,e){return t&&t.length?mr(t,z(e,3),!0,!0):[]},f.dropWhile=function(t,e){return t&&t.length?mr(t,z(e,3),!0):[]},f.fill=function(t,e,r,o){var c=t==null?0:t.length;return c?(r&&typeof r!="number"&&Mt(t,e,r)&&(r=0,o=c),function(d,p,_,m){var S=d.length;for((_=V(_))<0&&(_=-_>S?0:S+_),(m=m===i||m>S?S:V(m))<0&&(m+=S),m=_>m?0:hu(m);_<m;)d[_++]=p;return d}(t,e,r,o)):[]},f.filter=function(t,e){return(G(t)?Se:Qa)(t,z(e,3))},f.flatMap=function(t,e){return kt(Cr(t,e),1)},f.flatMapDeep=function(t,e){return kt(Cr(t,e),k)},f.flatMapDepth=function(t,e,r){return r=r===i?1:V(r),kt(Cr(t,e),r)},f.flatten=Vo,f.flattenDeep=function(t){return t!=null&&t.length?kt(t,k):[]},f.flattenDepth=function(t,e){return t!=null&&t.length?kt(t,e=e===i?1:V(e)):[]},f.flip=function(t){return me(t,512)},f.flow=Xh,f.flowRight=tf,f.fromPairs=function(t){for(var e=-1,r=t==null?0:t.length,o={};++e<r;){var c=t[e];o[c[0]]=c[1]}return o},f.functions=function(t){return t==null?[]:gr(t,wt(t))},f.functionsIn=function(t){return t==null?[]:gr(t,Dt(t))},f.groupBy=vh,f.initial=function(t){return t!=null&&t.length?Xt(t,0,-1):[]},f.intersection=eh,f.intersectionBy=nh,f.intersectionWith=rh,f.invert=Ph,f.invertBy=zh,f.invokeMap=xh,f.iteratee=wi,f.keyBy=wh,f.keys=wt,f.keysIn=Dt,f.map=Cr,f.mapKeys=function(t,e){var r={};return e=z(e,3),ue(t,function(o,c,d){ye(r,e(o,c,d),o)}),r},f.mapValues=function(t,e){var r={};return e=z(e,3),ue(t,function(o,c,d){ye(r,c,e(o,c,d))}),r},f.matches=function(t){return ro(Kt(t,1))},f.matchesProperty=function(t,e){return so(t,Kt(e,1))},f.memoize=Ar,f.merge=jh,f.mergeWith=pu,f.method=ef,f.methodOf=nf,f.mixin=bi,f.negate=qr,f.nthArg=function(t){return t=V(t),Y(function(e){return io(e,t)})},f.omit=Nh,f.omitBy=function(t,e){return gu(t,qr(z(e)))},f.once=function(t){return nu(2,t)},f.orderBy=function(t,e,r,o){return t==null?[]:(G(e)||(e=e==null?[]:[e]),G(r=o?i:r)||(r=r==null?[]:[r]),ao(t,e,r))},f.over=rf,f.overArgs=Th,f.overEvery=sf,f.overSome=af,f.partial=pi,f.partialRight=iu,f.partition=bh,f.pick=Bh,f.pickBy=gu,f.property=bu,f.propertyOf=function(t){return function(e){return t==null?i:Ne(t,e)}},f.pull=sh,f.pullAll=Qo,f.pullAllBy=function(t,e,r){return t&&t.length&&e&&e.length?Ws(t,e,z(r,2)):t},f.pullAllWith=function(t,e,r){return t&&t.length&&e&&e.length?Ws(t,e,i,r):t},f.pullAt=ih,f.range=of,f.rangeRight=uf,f.rearg=Eh,f.reject=function(t,e){return(G(t)?Se:Qa)(t,qr(z(e,3)))},f.remove=function(t,e){var r=[];if(!t||!t.length)return r;var o=-1,c=[],d=t.length;for(e=z(e,3);++o<d;){var p=t[o];e(p,o,t)&&(r.push(p),c.push(o))}return uo(t,c),r},f.rest=function(t,e){if(typeof t!="function")throw new Qt(n);return Y(t,e=e===i?e:V(e))},f.reverse=hi,f.sampleSize=function(t,e,r){return e=(r?Mt(t,e,r):e===i)?1:V(e),(G(t)?Fl:Nl)(t,e)},f.set=function(t,e,r){return t==null?t:qn(t,e,r)},f.setWith=function(t,e,r,o){return o=typeof o=="function"?o:i,t==null?t:qn(t,e,r,o)},f.shuffle=function(t){return(G(t)?$l:Wl)(t)},f.slice=function(t,e,r){var o=t==null?0:t.length;return o?(r&&typeof r!="number"&&Mt(t,e,r)?(e=0,r=o):(e=e==null?0:V(e),r=r===i?o:V(r)),Xt(t,e,r)):[]},f.sortBy=kh,f.sortedUniq=function(t){return t&&t.length?lo(t):[]},f.sortedUniqBy=function(t,e){return t&&t.length?lo(t,z(e,2)):[]},f.split=function(t,e,r){return r&&typeof r!="number"&&Mt(t,e,r)&&(e=r=i),(r=r===i?C:r>>>0)?(t=et(t))&&(typeof e=="string"||e!=null&&!_i(e))&&!(e=Nt(e))&&en(t)?qe(se(t),0,r):t.split(e,r):[]},f.spread=function(t,e){if(typeof t!="function")throw new Qt(n);return e=e==null?0:mt(V(e),0),Y(function(r){var o=r[e],c=qe(r,0,e);return o&&Ie(c,o),Ht(t,this,c)})},f.tail=function(t){var e=t==null?0:t.length;return e?Xt(t,1,e):[]},f.take=function(t,e,r){return t&&t.length?Xt(t,0,(e=r||e===i?1:V(e))<0?0:e):[]},f.takeRight=function(t,e,r){var o=t==null?0:t.length;return o?Xt(t,(e=o-(e=r||e===i?1:V(e)))<0?0:e,o):[]},f.takeRightWhile=function(t,e){return t&&t.length?mr(t,z(e,3),!1,!0):[]},f.takeWhile=function(t,e){return t&&t.length?mr(t,z(e,3)):[]},f.tap=function(t,e){return e(t),t},f.throttle=function(t,e,r){var o=!0,c=!0;if(typeof t!="function")throw new Qt(n);return dt(r)&&(o="leading"in r?!!r.leading:o,c="trailing"in r?!!r.trailing:c),su(t,e,{leading:o,maxWait:e,trailing:c})},f.thru=Er,f.toArray=lu,f.toPairs=_u,f.toPairsIn=yu,f.toPath=function(t){return G(t)?lt(t,le):Bt(t)?[t]:$t(Bo(et(t)))},f.toPlainObject=fu,f.transform=function(t,e,r){var o=G(t),c=o||Me(t)||fn(t);if(e=z(e,4),r==null){var d=t&&t.constructor;r=c?o?new d:[]:dt(t)&&we(d)?un(ir(t)):{}}return(c?Yt:ue)(t,function(p,_,m){return e(r,p,_,m)}),r},f.unary=function(t){return eu(t,1)},f.union=ah,f.unionBy=oh,f.unionWith=uh,f.uniq=function(t){return t&&t.length?Re(t):[]},f.uniqBy=function(t,e){return t&&t.length?Re(t,z(e,2)):[]},f.uniqWith=function(t,e){return e=typeof e=="function"?e:i,t&&t.length?Re(t,i,e):[]},f.unset=function(t,e){return t==null||Ys(t,e)},f.unzip=fi,f.unzipWith=Jo,f.update=function(t,e,r){return t==null?t:fo(t,e,Ks(r))},f.updateWith=function(t,e,r,o){return o=typeof o=="function"?o:i,t==null?t:fo(t,e,Ks(r),o)},f.values=dn,f.valuesIn=function(t){return t==null?[]:As(t,Dt(t))},f.without=ch,f.words=xu,f.wrap=function(t,e){return pi(Ks(e),t)},f.xor=lh,f.xorBy=hh,f.xorWith=fh,f.zip=dh,f.zipObject=function(t,e){return go(t||[],e||[],En)},f.zipObjectDeep=function(t,e){return go(t||[],e||[],qn)},f.zipWith=ph,f.entries=_u,f.entriesIn=yu,f.extend=du,f.extendWith=Or,bi(f,f),f.add=cf,f.attempt=wu,f.camelCase=Wh,f.capitalize=mu,f.ceil=lf,f.clamp=function(t,e,r){return r===i&&(r=e,e=i),r!==i&&(r=(r=ee(r))==r?r:0),e!==i&&(e=(e=ee(e))==e?e:0),je(ee(t),e,r)},f.clone=function(t){return Kt(t,4)},f.cloneDeep=function(t){return Kt(t,5)},f.cloneDeepWith=function(t,e){return Kt(t,5,e=typeof e=="function"?e:i)},f.cloneWith=function(t,e){return Kt(t,4,e=typeof e=="function"?e:i)},f.conformsTo=function(t,e){return e==null||Za(t,e,wt(e))},f.deburr=vu,f.defaultTo=function(t,e){return t==null||t!=t?e:t},f.divide=hf,f.endsWith=function(t,e,r){t=et(t),e=Nt(e);var o=t.length,c=r=r===i?o:je(V(r),0,o);return(r-=e.length)>=0&&t.slice(r,c)==e},f.eq=ae,f.escape=function(t){return(t=et(t))&&xc.test(t)?t.replace(Ji,hl):t},f.escapeRegExp=function(t){return(t=et(t))&&Tc.test(t)?t.replace(gs,"\\$&"):t},f.every=function(t,e,r){var o=G(t)?Ta:Dl;return r&&Mt(t,e,r)&&(e=i),o(t,z(e,3))},f.find=yh,f.findIndex=Go,f.findKey=function(t,e){return Ea(t,z(e,3),ue)},f.findLast=mh,f.findLastIndex=Zo,f.findLastKey=function(t,e){return Ea(t,z(e,3),Ps)},f.floor=ff,f.forEach=Xo,f.forEachRight=tu,f.forIn=function(t,e){return t==null?t:Ds(t,z(e,3),Dt)},f.forInRight=function(t,e){return t==null?t:Ja(t,z(e,3),Dt)},f.forOwn=function(t,e){return t&&ue(t,z(e,3))},f.forOwnRight=function(t,e){return t&&Ps(t,z(e,3))},f.get=yi,f.gt=Ch,f.gte=Rh,f.has=function(t,e){return t!=null&&Fo(t,e,Pl)},f.hasIn=mi,f.head=Yo,f.identity=Pt,f.includes=function(t,e,r,o){t=Lt(t)?t:dn(t),r=r&&!o?V(r):0;var c=t.length;return r<0&&(r=mt(c+r,0)),Ur(t)?r<=c&&t.indexOf(e,r)>-1:!!c&&tn(t,e,r)>-1},f.indexOf=function(t,e,r){var o=t==null?0:t.length;if(!o)return-1;var c=r==null?0:V(r);return c<0&&(c=mt(o+c,0)),tn(t,e,c)},f.inRange=function(t,e,r){return e=be(e),r===i?(r=e,e=0):r=be(r),function(o,c,d){return o>=Tt(c,d)&&o<mt(c,d)}(t=ee(t),e,r)},f.invoke=Hh,f.isArguments=Ge,f.isArray=G,f.isArrayBuffer=Ah,f.isArrayLike=Lt,f.isArrayLikeObject=gt,f.isBoolean=function(t){return t===!0||t===!1||pt(t)&&qt(t)==Z},f.isBuffer=Me,f.isDate=qh,f.isElement=function(t){return pt(t)&&t.nodeType===1&&!Fn(t)},f.isEmpty=function(t){if(t==null)return!0;if(Lt(t)&&(G(t)||typeof t=="string"||typeof t.splice=="function"||Me(t)||fn(t)||Ge(t)))return!t.length;var e=Et(t);if(e==at||e==re)return!t.size;if(Un(t))return!Ns(t).length;for(var r in t)if(nt.call(t,r))return!1;return!0},f.isEqual=function(t,e){return An(t,e)},f.isEqualWith=function(t,e,r){var o=(r=typeof r=="function"?r:i)?r(t,e):i;return o===i?An(t,e,i,r):!!o},f.isError=gi,f.isFinite=function(t){return typeof t=="number"&&Ha(t)},f.isFunction=we,f.isInteger=au,f.isLength=Mr,f.isMap=ou,f.isMatch=function(t,e){return t===e||js(t,e,ii(e))},f.isMatchWith=function(t,e,r){return r=typeof r=="function"?r:i,js(t,e,ii(e),r)},f.isNaN=function(t){return uu(t)&&t!=+t},f.isNative=function(t){if(Jl(t))throw new K("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return to(t)},f.isNil=function(t){return t==null},f.isNull=function(t){return t===null},f.isNumber=uu,f.isObject=dt,f.isObjectLike=pt,f.isPlainObject=Fn,f.isRegExp=_i,f.isSafeInteger=function(t){return au(t)&&t>=-9007199254740991&&t<=w},f.isSet=cu,f.isString=Ur,f.isSymbol=Bt,f.isTypedArray=fn,f.isUndefined=function(t){return t===i},f.isWeakMap=function(t){return pt(t)&&Et(t)==vn},f.isWeakSet=function(t){return pt(t)&&qt(t)=="[object WeakSet]"},f.join=function(t,e){return t==null?"":Il.call(t,e)},f.kebabCase=Gh,f.last=te,f.lastIndexOf=function(t,e,r){var o=t==null?0:t.length;if(!o)return-1;var c=o;return r!==i&&(c=(c=V(r))<0?mt(o+c,0):Tt(c,o-1)),e==e?function(d,p,_){for(var m=_+1;m--;)if(d[m]===p)return m;return m}(t,e,c):Jn(t,Ca,c,!0)},f.lowerCase=Zh,f.lowerFirst=Vh,f.lt=Mh,f.lte=Uh,f.max=function(t){return t&&t.length?pr(t,Pt,zs):i},f.maxBy=function(t,e){return t&&t.length?pr(t,z(e,2),zs):i},f.mean=function(t){return Ra(t,Pt)},f.meanBy=function(t,e){return Ra(t,z(e,2))},f.min=function(t){return t&&t.length?pr(t,Pt,Bs):i},f.minBy=function(t,e){return t&&t.length?pr(t,z(e,2),Bs):i},f.stubArray=Si,f.stubFalse=Ii,f.stubObject=function(){return{}},f.stubString=function(){return""},f.stubTrue=function(){return!0},f.multiply=df,f.nth=function(t,e){return t&&t.length?io(t,V(e)):i},f.noConflict=function(){return bt._===this&&(bt._=vl),this},f.noop=ki,f.now=Rr,f.pad=function(t,e,r){t=et(t);var o=(e=V(e))?nn(t):0;if(!e||o>=e)return t;var c=(e-o)/2;return br(cr(c),r)+t+br(ur(c),r)},f.padEnd=function(t,e,r){t=et(t);var o=(e=V(e))?nn(t):0;return e&&o<e?t+br(e-o,r):t},f.padStart=function(t,e,r){t=et(t);var o=(e=V(e))?nn(t):0;return e&&o<e?br(e-o,r)+t:t},f.parseInt=function(t,e,r){return r||e==null?e=0:e&&(e=+e),Cl(et(t).replace(_s,""),e||0)},f.random=function(t,e,r){if(r&&typeof r!="boolean"&&Mt(t,e,r)&&(e=r=i),r===i&&(typeof e=="boolean"?(r=e,e=i):typeof t=="boolean"&&(r=t,t=i)),t===i&&e===i?(t=0,e=1):(t=be(t),e===i?(e=t,t=0):e=be(e)),t>e){var o=t;t=e,e=o}if(r||t%1||e%1){var c=ja();return Tt(t+c*(e-t+nl("1e-"+((c+"").length-1))),e)}return Gs(t,e)},f.reduce=function(t,e,r){var o=G(t)?Ss:Aa,c=arguments.length<3;return o(t,z(e,4),r,c,Ce)},f.reduceRight=function(t,e,r){var o=G(t)?ol:Aa,c=arguments.length<3;return o(t,z(e,4),r,c,Ya)},f.repeat=function(t,e,r){return e=(r?Mt(t,e,r):e===i)?1:V(e),Zs(et(t),e)},f.replace=function(){var t=arguments,e=et(t[0]);return t.length<3?e:e.replace(t[1],t[2])},f.result=function(t,e,r){var o=-1,c=(e=Ae(e,t)).length;for(c||(c=1,t=i);++o<c;){var d=t==null?i:t[le(e[o])];d===i&&(o=c,d=r),t=we(d)?d.call(t):d}return t},f.round=pf,f.runInContext=v,f.sample=function(t){return(G(t)?Wa:jl)(t)},f.size=function(t){if(t==null)return 0;if(Lt(t))return Ur(t)?nn(t):t.length;var e=Et(t);return e==at||e==re?t.size:Ns(t).length},f.snakeCase=Yh,f.some=function(t,e,r){var o=G(t)?Is:Gl;return r&&Mt(t,e,r)&&(e=i),o(t,z(e,3))},f.sortedIndex=function(t,e){return yr(t,e)},f.sortedIndexBy=function(t,e,r){return Vs(t,e,z(r,2))},f.sortedIndexOf=function(t,e){var r=t==null?0:t.length;if(r){var o=yr(t,e);if(o<r&&ae(t[o],e))return o}return-1},f.sortedLastIndex=function(t,e){return yr(t,e,!0)},f.sortedLastIndexBy=function(t,e,r){return Vs(t,e,z(r,2),!0)},f.sortedLastIndexOf=function(t,e){if(t!=null&&t.length){var r=yr(t,e,!0)-1;if(ae(t[r],e))return r}return-1},f.startCase=Qh,f.startsWith=function(t,e,r){return t=et(t),r=r==null?0:je(V(r),0,t.length),e=Nt(e),t.slice(r,r+e.length)==e},f.subtract=gf,f.sum=function(t){return t&&t.length?Cs(t,Pt):0},f.sumBy=function(t,e){return t&&t.length?Cs(t,z(e,2)):0},f.template=function(t,e,r){var o=f.templateSettings;r&&Mt(t,e,r)&&(e=i),t=et(t),e=Or({},e,o,qo);var c,d,p=Or({},e.imports,o.imports,qo),_=wt(p),m=As(p,_),S=0,b=e.interpolate||Zn,R="__p += '",O=Ms((e.escape||Zn).source+"|"+b.source+"|"+(b===Ki?Oc:Zn).source+"|"+(e.evaluate||Zn).source+"|$","g"),$="//# sourceURL="+(nt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tl+"]")+`
`;t.replace(O,function(A,H,M,W,N,X){return M||(M=W),R+=t.slice(S,X).replace(Hc,fl),H&&(c=!0,R+=`' +
__e(`+H+`) +
'`),N&&(d=!0,R+=`';
`+N+`;
__p += '`),M&&(R+=`' +
((__t = (`+M+`)) == null ? '' : __t) +
'`),S=X+A.length,A}),R+=`';
`;var P=nt.call(e,"variable")&&e.variable;if(P){if(Mc.test(P))throw new K("Invalid `variable` option passed into `_.template`")}else R=`with (obj) {
`+R+`
}
`;R=(d?R.replace(_c,""):R).replace(yc,"$1").replace(mc,"$1;"),R="function("+(P||"obj")+`) {
`+(P?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(c?", __e = _.escape":"")+(d?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+R+`return __p
}`;var I=wu(function(){return yt(_,$+"return "+R).apply(i,m)});if(I.source=R,gi(I))throw I;return I},f.times=function(t,e){if((t=V(t))<1||t>w)return[];var r=C,o=Tt(t,C);e=z(e),t-=C;for(var c=Rs(o,e);++r<t;)e(r);return c},f.toFinite=be,f.toInteger=V,f.toLength=hu,f.toLower=function(t){return et(t).toLowerCase()},f.toNumber=ee,f.toSafeInteger=function(t){return t?je(V(t),-9007199254740991,w):t===0?t:0},f.toString=et,f.toUpper=function(t){return et(t).toUpperCase()},f.trim=function(t,e,r){if((t=et(t))&&(r||e===i))return qa(t);if(!t||!(e=Nt(e)))return t;var o=se(t),c=se(e);return qe(o,Ma(o,c),Ua(o,c)+1).join("")},f.trimEnd=function(t,e,r){if((t=et(t))&&(r||e===i))return t.slice(0,Fa(t)+1);if(!t||!(e=Nt(e)))return t;var o=se(t);return qe(o,0,Ua(o,se(e))+1).join("")},f.trimStart=function(t,e,r){if((t=et(t))&&(r||e===i))return t.replace(_s,"");if(!t||!(e=Nt(e)))return t;var o=se(t);return qe(o,Ma(o,se(e))).join("")},f.truncate=function(t,e){var r=30,o="...";if(dt(e)){var c="separator"in e?e.separator:c;r="length"in e?V(e.length):r,o="omission"in e?Nt(e.omission):o}var d=(t=et(t)).length;if(en(t)){var p=se(t);d=p.length}if(r>=d)return t;var _=r-nn(o);if(_<1)return o;var m=p?qe(p,0,_).join(""):t.slice(0,_);if(c===i)return m+o;if(p&&(_+=m.length-_),_i(c)){if(t.slice(_).search(c)){var S,b=m;for(c.global||(c=Ms(c.source,et(Xi.exec(c))+"g")),c.lastIndex=0;S=c.exec(b);)var R=S.index;m=m.slice(0,R===i?_:R)}}else if(t.indexOf(Nt(c),_)!=_){var O=m.lastIndexOf(c);O>-1&&(m=m.slice(0,O))}return m+o},f.unescape=function(t){return(t=et(t))&&vc.test(t)?t.replace(Qi,pl):t},f.uniqueId=function(t){var e=++yl;return et(t)+e},f.upperCase=Jh,f.upperFirst=vi,f.each=Xo,f.eachRight=tu,f.first=Yo,bi(f,(Ti={},ue(f,function(t,e){nt.call(f.prototype,e)||(Ti[e]=t)}),Ti),{chain:!1}),f.VERSION="4.17.21",Yt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){f[t].placeholder=f}),Yt(["drop","take"],function(t,e){J.prototype[t]=function(r){r=r===i?1:mt(V(r),0);var o=this.__filtered__&&!e?new J(this):this.clone();return o.__filtered__?o.__takeCount__=Tt(r,o.__takeCount__):o.__views__.push({size:Tt(r,C),type:t+(o.__dir__<0?"Right":"")}),o},J.prototype[t+"Right"]=function(r){return this.reverse()[t](r).reverse()}}),Yt(["filter","map","takeWhile"],function(t,e){var r=e+1,o=r==1||r==3;J.prototype[t]=function(c){var d=this.clone();return d.__iteratees__.push({iteratee:z(c,3),type:r}),d.__filtered__=d.__filtered__||o,d}}),Yt(["head","last"],function(t,e){var r="take"+(e?"Right":"");J.prototype[t]=function(){return this[r](1).value()[0]}}),Yt(["initial","tail"],function(t,e){var r="drop"+(e?"":"Right");J.prototype[t]=function(){return this.__filtered__?new J(this):this[r](1)}}),J.prototype.compact=function(){return this.filter(Pt)},J.prototype.find=function(t){return this.filter(t).head()},J.prototype.findLast=function(t){return this.reverse().find(t)},J.prototype.invokeMap=Y(function(t,e){return typeof t=="function"?new J(this):this.map(function(r){return Rn(r,t,e)})}),J.prototype.reject=function(t){return this.filter(qr(z(t)))},J.prototype.slice=function(t,e){t=V(t);var r=this;return r.__filtered__&&(t>0||e<0)?new J(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==i&&(r=(e=V(e))<0?r.dropRight(-e):r.take(e-t)),r)},J.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},J.prototype.toArray=function(){return this.take(C)},ue(J.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),c=f[o?"take"+(e=="last"?"Right":""):e],d=o||/^find/.test(e);c&&(f.prototype[e]=function(){var p=this.__wrapped__,_=o?[1]:arguments,m=p instanceof J,S=_[0],b=m||G(p),R=function(H){var M=c.apply(f,Ie([H],_));return o&&O?M[0]:M};b&&r&&typeof S=="function"&&S.length!=1&&(m=b=!1);var O=this.__chain__,$=!!this.__actions__.length,P=d&&!O,I=m&&!$;if(!d&&b){p=I?p:new J(this);var A=t.apply(p,_);return A.__actions__.push({func:Er,args:[R],thisArg:i}),new Jt(A,O)}return P&&I?t.apply(this,_):(A=this.thru(R),P?o?A.value()[0]:A.value():A)})}),Yt(["pop","push","shift","sort","splice","unshift"],function(t){var e=Xn[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",o=/^(?:pop|shift)$/.test(t);f.prototype[t]=function(){var c=arguments;if(o&&!this.__chain__){var d=this.value();return e.apply(G(d)?d:[],c)}return this[r](function(p){return e.apply(G(p)?p:[],c)})}}),ue(J.prototype,function(t,e){var r=f[e];if(r){var o=r.name+"";nt.call(on,o)||(on[o]=[]),on[o].push({name:e,func:r})}}),on[xr(i,2).name]=[{name:"wrapper",func:i}],J.prototype.clone=function(){var t=new J(this.__wrapped__);return t.__actions__=$t(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=$t(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=$t(this.__views__),t},J.prototype.reverse=function(){if(this.__filtered__){var t=new J(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},J.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,r=G(t),o=e<0,c=r?t.length:0,d=function(X,D,j){for(var vt=-1,_t=j.length;++vt<_t;){var Ut=j[vt],ct=Ut.size;switch(Ut.type){case"drop":X+=ct;break;case"dropRight":D-=ct;break;case"take":D=Tt(D,X+ct);break;case"takeRight":X=mt(X,D-ct)}}return{start:X,end:D}}(0,c,this.__views__),p=d.start,_=d.end,m=_-p,S=o?_:p-1,b=this.__iteratees__,R=b.length,O=0,$=Tt(m,this.__takeCount__);if(!r||!o&&c==m&&$==m)return po(t,this.__actions__);var P=[];t:for(;m--&&O<$;){for(var I=-1,A=t[S+=e];++I<R;){var H=b[I],M=H.iteratee,W=H.type,N=M(A);if(W==2)A=N;else if(!N){if(W==1)continue t;break t}}P[O++]=A}return P},f.prototype.at=gh,f.prototype.chain=function(){return Ko(this)},f.prototype.commit=function(){return new Jt(this.value(),this.__chain__)},f.prototype.next=function(){this.__values__===i&&(this.__values__=lu(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},f.prototype.plant=function(t){for(var e,r=this;r instanceof fr;){var o=Wo(r);o.__index__=0,o.__values__=i,e?c.__wrapped__=o:e=o;var c=o;r=r.__wrapped__}return c.__wrapped__=t,e},f.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof J){var e=t;return this.__actions__.length&&(e=new J(this)),(e=e.reverse()).__actions__.push({func:Er,args:[hi],thisArg:i}),new Jt(e,this.__chain__)}return this.thru(hi)},f.prototype.toJSON=f.prototype.valueOf=f.prototype.value=function(){return po(this.__wrapped__,this.__actions__)},f.prototype.first=f.prototype.head,bn&&(f.prototype[bn]=function(){return this}),f}();De?((De.exports=rn)._=rn,ws._=rn):bt._=rn}).call(Ln);var Op=ji.exports;function Bd(i){let n,s,a=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],u={};for(let l=0;l<a.length;l+=1)u=gn(u,a[l]);return{c(){n=Ku("svg"),s=new Xu(!0),this.h()},l(l){n=tc(l,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var h=ec(n);s=nc(h,!0),h.forEach(Jr),this.h()},h(){s.a=null,Kr(n,u)},m(l,h){rc(l,n,h),s.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M304 24c0 13.3 10.7 24 24 24h102.1L207 271c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l223-223L464 184c0 13.3 10.7 24 24 24s24-10.7 24-24V24c0-13.3-10.7-24-24-24H328c-13.3 0-24 10.7-24 24M72 32C32.2 32 0 64.2 0 104v336c0 39.8 32.2 72 72 72h336c39.8 0 72-32.2 72-72V312c0-13.3-10.7-24-24-24s-24 10.7-24 24v128c0 13.3-10.7 24-24 24H72c-13.3 0-24-10.7-24-24V104c0-13.3 10.7-24 24-24h128c13.3 0 24-10.7 24-24s-10.7-24-24-24z"/>',n)},p(l,[h]){Kr(n,u=sc(a,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&h&&l[0]]))},i:Xr,o:Xr,d(l){l&&Jr(n)}}}function Wd(i,n,s){return i.$$set=a=>{s(0,n=gn(gn({},n),ts(a)))},[n=ts(n)]}class Fp extends Yu{constructor(n){super(),Qu(this,n,Wd,Bd,Ju,{})}}function Gd(i){let n,s,a=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],u={};for(let l=0;l<a.length;l+=1)u=gn(u,a[l]);return{c(){n=Ku("svg"),s=new Xu(!0),this.h()},l(l){n=tc(l,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var h=ec(n);s=nc(h,!0),h.forEach(Jr),this.h()},h(){s.a=null,Kr(n,u)},m(l,h){rc(l,n,h),s.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M239 401c9.4 9.4 24.6 9.4 33.9 0L465 209c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-175 175L81 175c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9z"/>',n)},p(l,[h]){Kr(n,u=sc(a,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&h&&l[0]]))},i:Xr,o:Xr,d(l){l&&Jr(n)}}}function Zd(i,n,s){return i.$$set=a=>{s(0,n=gn(gn({},n),ts(a)))},[n=ts(n)]}class $p extends Yu{constructor(n){super(),Qu(this,n,Zd,Gd,Ju,{})}}export{Rp as $,Fp as A,ap as B,$p as C,rp as D,Up as E,oc as F,ed as G,np as H,op as I,Ad as J,dp as K,zf as L,fp as M,ad as N,sp as O,cp as P,lp as Q,jf as R,At as S,Hf as T,up as U,ip as V,bp as W,Dd as X,Sp as Y,Pd as Z,jn as _,tt as a,Cp as a0,Ep as a1,Tp as a2,Ap as a3,Zu as a4,wp as a5,Ld as a6,hp as a7,nd as a8,rd as a9,ac as aa,Mp as ab,qp as ac,pn as b,Yr as c,_p as d,Ye as e,Wt as f,gp as g,yp as h,kp as i,is as j,mp as k,Op as l,$i as m,Wu as n,St as o,Di as p,pp as q,xp as r,vp as s,id as t,Ip as u,Qf as v,Jf as w,Kf as x,td as y,Xf as z};
