const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./dagre-4EVJKHTY-B1UDkM8p.js","./graph-QlpbzBy_.js","./_baseUniq-BZR-g_Tv.js","./layout-qEowUjoT.js","./_basePickBy-CGLNSDSN.js","./clone-DnjIwQsI.js","./index-DaLJ_QUV.js","./message-broker-D_dlQCzo.js","./IconButtonAugment-CVWbWfwx.js","./SpinnerAugment-CCR7AGk-.js","./SpinnerAugment-DnPofOlT.css","./IconButtonAugment-Bjt0RBxO.css","./async-messaging-BnYTstSc.js","./TextTooltipAugment-QVDAcl-O.js","./TextTooltipAugment-BiroygYm.css","./CardAugment-Cjl8BxE0.js","./CardAugment-BuBr3xQZ.css","./BaseTextInput-BomIiYnE.js","./BaseTextInput-DuK8hbkY.css","./index-BYh6wkDD.css","./chevron-down-Di3C5ykp.js","./types-CGlLNakm.js","./file-paths-BhRi9crS.js","./CalloutAugment-D1eOn47Z.js","./CalloutAugment-Dvw-pMXw.css","./folder-opened-D6WrI8wv.js","./folder-opened-hTsrGIsd.css","./index-B60hMJvm.js","./diff-utils-C44al88x.js","./LanguageIcon-7PvQ76S5.js","./preload-helper-Dv6uf1Os.js","./LanguageIcon-CbFzDG5Z.css","./index-DJGUS2rb.js","./index-McRKs1sU.css","./diff-utils-DTcQ2vsq.css","./keypress-DD1aQVr0.js","./await_block-B-Au3vut.js","./chat-context-CfYmajw8.js","./types-DDm27S8B.js","./utils-DRvqjT1k.js","./ra-diff-ops-model-CfFedGkc.js","./CollapseButtonAugment-DvFOUTxy.js","./CollapseButtonAugment-CLLTFP8m.css","./ButtonAugment-JhlUwgSi.js","./ButtonAugment-zn72hvQy.css","./mcp-logo-CwhjBp6K.js","./MaterialIcon-BiH6zpoH.js","./MaterialIcon-BO_oU5T3.css","./CopyButton-COVKPqeG.js","./copy-CzH8IZOA.js","./copy-Do68LBjG.css","./CopyButton-B0_wR17F.css","./ellipsis-DUJFhkV3.js","./IconFilePath-C7r3gamb.js","./next-edit-types-904A5ehg.js","./IconFilePath-CiKel2Kp.css","./Filespan-Dq3a1CK8.js","./Filespan-uhpSTama.css","./terminal-CqA-6nrc.js","./pen-to-square-CrZjDplM.js","./augment-logo-Bf5bIaNf.js","./TextAreaAugment-20MWk3hd.js","./TextAreaAugment-J75lFxU7.css","./c4Diagram-6F5ED5ID-CuzE8puF.js","./chunk-ASOPGD6M-DkmeZ-Qj.js","./flowDiagram-7ASYPVHJ-GRZnpaaP.js","./chunk-5HRBRIJM-CFRje7L9.js","./channel-CsNhYFVB.js","./erDiagram-6RL3IURR-kwNuqXys.js","./gitGraphDiagram-NRZ2UAAF-Bpvhskpn.js","./chunk-TMUBEWPD-CvNH0-zB.js","./chunk-KFBOBJHC-DOPZazs4.js","./gitGraph-YCYPL57B-B_pczVXt.js","./ganttDiagram-NTVNEXSI-D7YdA9UD.js","./linear-C9w-4RzH.js","./init-g68aIKmP.js","./infoDiagram-A4XQUW5V-CKLmwys-.js","./pieDiagram-YF2LJOPJ-Lf6dgsbU.js","./arc-D20_GW2v.js","./ordinal-_rw2EY4v.js","./quadrantDiagram-OS5C2QUG-DTx9BwEM.js","./xychartDiagram-6QU3TZC5-BQvH0Ysa.js","./requirementDiagram-MIRIMTAZ-Ddvql52_.js","./sequenceDiagram-G6AWOVSC-BaAENNFq.js","./classDiagram-LNE6IOMH-DtUoYsG1.js","./chunk-T2TOU4HS-DZ6cxCMy.js","./classDiagram-v2-MQ7JQ4JX-DtUoYsG1.js","./stateDiagram-MAYHULR4-DUjX442G.js","./chunk-7U56Z5CX-BjUND6F_.js","./stateDiagram-v2-4JROLMXI-DZYaSgnS.js","./journeyDiagram-G5WM74LC-B6fZxQ98.js","./timeline-definition-U7ZMHBDA-Cik82_CL.js","./mindmap-definition-GWI6TPTV-D7dUh7dC.js","./cytoscape.esm-B0yNE0-9.js","./kanban-definition-QRCXZQQD-myRUp3Ry.js","./sankeyDiagram-Y46BX6SQ-Csv87wOU.js","./diagram-QW4FP2JN-DuQXaqm6.js","./blockDiagram-ZHA2E4KO-3qxwaP20.js","./architectureDiagram-UYN6MBPD-zs3Wlbta.js"])))=>i.map(i=>d[i]);
var g_=Object.defineProperty;var qp=r=>{throw TypeError(r)};var m_=(r,t,n)=>t in r?g_(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n;var V=(r,t,n)=>m_(r,typeof t!="symbol"?t+"":t,n),Qc=(r,t,n)=>t.has(r)||qp("Cannot "+n);var D=(r,t,n)=>(Qc(r,t,"read from private field"),n?n.call(r):t.get(r)),ie=(r,t,n)=>t.has(r)?qp("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,n),Lt=(r,t,n,e)=>(Qc(r,t,"write to private field"),e?e.call(r,n):t.set(r,n),n),xt=(r,t,n)=>(Qc(r,t,"access private method"),n);var Sa=(r,t,n,e)=>({set _(o){Lt(r,t,o,n)},get _(){return D(r,t,e)}});import{G as $_,H as jp,P as Kc,O as Jc,Q as y_,m as Gr,D as Ie,_ as x_,z as vy,f as $t,a as b_,b as Wp,c as Hp,U as gl,V as ml,d as $l,T as w_}from"./index-DaLJ_QUV.js";import{E as v_,f as br,a5 as tu,N as _n,m as Bi,b as yl,S as ai,c as Uu,o as Vp,a as an,a6 as Gp,v as __,w as Zp,D as Yp,x as k_,z as Xp,y as C_,B as Qp,a7 as S_,J as tn,G as Kp,F as T_,a8 as eu,a9 as M_,A as _y,aa as Sn,C as A_,p as Jp,l as L_,L as dn,n as ky,ab as E_,ac as B_}from"./chevron-down-Di3C5ykp.js";import{S as vi,W as Ee,I as xe,e as Gt,h as xl,i as I_,u as rd,o as od}from"./IconButtonAugment-CVWbWfwx.js";import{S as nt,i as rt,s as ot,f as lt,a as Bt,H as Oe,w as ze,x as Ne,y as Re,e as v,g as Ht,z as Pe,h as Zt,n as H,j as jt,A as _e,al as ce,C as sa,ak as Do,aw as tf,b as T,c as S,d as O,N as dt,u as f,q as Y,t as m,r as X,T as yt,D as I,E as _,F as k,G as C,a0 as W,a2 as ht,aj as $c,ag as Jt,a6 as Kt,ah as Vt,X as J,J as Ot,K as zt,L as Nt,M as Rt,V as ut,a1 as un,at as Nn,Z as Pt,_ as re,$ as oe,a8 as Qr,a9 as me,ac as Gs,Y as An,ad as Be,ab as Ge,a7 as Co,ai as Kr,I as yc,a3 as xo,ay as sd,az as id,B as ef,U as nf,a4 as xc,a5 as rf,R as ia,Q as aa,av as bl,aa as Ze,W as wl,am as F_,ax as Cy}from"./SpinnerAugment-CCR7AGk-.js";import{C as D_}from"./CalloutAugment-D1eOn47Z.js";import{d as ad,T as he,o as Sy,H as Ty,a as Jn,f as O_}from"./TextTooltipAugment-QVDAcl-O.js";import{P as z_,K as My,F as N_,a as Ay,C as R_}from"./folder-opened-D6WrI8wv.js";import{t as qu}from"./index-B60hMJvm.js";import{d as Ly,C as ld,P as Ey,O as la,M as By,h as P_,j as U_,a as of,i as q_,b as j_,e as W_,f as sf}from"./diff-utils-C44al88x.js";import{o as en}from"./keypress-DD1aQVr0.js";import{h as Is,u as cd}from"./await_block-B-Au3vut.js";import{g as Zs,R as Qo}from"./chat-context-CfYmajw8.js";import{C as ud,a as Iy,g as Fy,b as H_,c as V_,T as G_}from"./CollapseButtonAugment-DvFOUTxy.js";import{S as hd,b as Z_,M as Y_}from"./index-DJGUS2rb.js";import{i as X_,n as Q_,a as vl,g as af}from"./file-paths-BhRi9crS.js";import{B as Lr}from"./ButtonAugment-JhlUwgSi.js";import{k as K_,m as J_,n as tk,o as ek,U as nk,h as rk,j as dd,C as pd,e as Dy,R as ok,p as sk,F as bc,f as ik,i as ak,D as lk,T as ck,M as fd,d as In,b as uk,G as hk,L as dk,N as pk,J as fk,c as gk,S as mk,a as $k,q as Nr,g as yk}from"./mcp-logo-CwhjBp6K.js";import{M as gd}from"./MaterialIcon-BiH6zpoH.js";import{C as Ys}from"./CopyButton-COVKPqeG.js";import{S as ca}from"./copy-CzH8IZOA.js";import{E as Oy}from"./ellipsis-DUJFhkV3.js";import{l as xk,_ as bk,o as wk,k as md,I as vk}from"./IconFilePath-C7r3gamb.js";import{F as So}from"./Filespan-Dq3a1CK8.js";import{_ as be}from"./preload-helper-Dv6uf1Os.js";import{C as zy}from"./CardAugment-Cjl8BxE0.js";import{a as _k,L as nu,C as Ny,c as ru}from"./message-broker-D_dlQCzo.js";import{T as kk}from"./terminal-CqA-6nrc.js";import{P as Ry}from"./pen-to-square-CrZjDplM.js";import{d as Ck,a as lf,e as ou,f as Sk}from"./utils-DRvqjT1k.js";import{e as li,U as cf,L as Tk}from"./LanguageIcon-7PvQ76S5.js";import"./BaseTextInput-BomIiYnE.js";import{A as Mk}from"./augment-logo-Bf5bIaNf.js";import{T as Ak}from"./TextAreaAugment-20MWk3hd.js";function Lk(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},r[0]],o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return{c(){t=Bt("svg"),n=new Oe(!0),this.h()},l(s){t=ze(s,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Ne(t);n=Re(i,!0),i.forEach(v),this.h()},h(){n.a=null,Ht(t,o)},m(s,i){Pe(s,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M448 224c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64C28.7 32 0 60.7 0 96v64c0 35.3 28.7 64 64 64h168v86.1l-23-23c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64c9.4 9.4 24.6 9.4 33.9 0l64-64c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-23 23V224h168zM64 288c-35.3 0-64 28.7-64 64v64c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64v-64c0-35.3-28.7-64-64-64h-74.3c4.8 16 2.2 33.8-7.7 48h82c8.8 0 16 7.2 16 16v64c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16v-64c0-8.8 7.2-16 16-16h82c-9.9-14.2-12.5-32-7.7-48z"/>',t)},p(s,[i]){Ht(t,o=Zt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&s[0]]))},i:H,o:H,d(s){s&&v(t)}}}function Ek(r,t,n){return r.$$set=e=>{n(0,t=lt(lt({},t),jt(e)))},[t=jt(t)]}class Py extends nt{constructor(t){super(),rt(this,t,Ek,Lk,ot,{})}}function Fe(r,t){return r==null?t:typeof r=="string"?r:t}class Bk{constructor(t=!0,n=setTimeout){V(this,"_notify",new Set);V(this,"_clearTimeout",t=>{t.timeoutId&&clearTimeout(t.timeoutId)});V(this,"_schedule",t=>{if(!this._started||t.date&&(t.timeout=t.date.getTime()-Date.now(),t.timeout<0))return;const n=this._setTimeout;t.timeoutId=n(this._handle,t.timeout,t)});V(this,"_handle",t=>{t.notify(),t.date?this._notify.delete(t):t.once||this._schedule(t)});V(this,"dispose",()=>{this._notify.forEach(this._clearTimeout),this._notify.clear()});this._started=t,this._setTimeout=n}start(){return this._started||(this._started=!0,this._notify.forEach(this._schedule)),this}stop(){return this._started=!1,this._notify.forEach(this._clearTimeout),this}get isStarted(){return this._started}set isStarted(t){t?this.start():this.stop()}once(t,n){return this._register(t,n,!0)}interval(t,n){return this._register(t,n,!1)}at(t,n){return this._register(0,n,!1,typeof t=="number"?new Date(Date.now()+t):t)}reschedule(){this._notify.forEach(t=>{this._clearTimeout(t),this._schedule(t)})}_register(t,n,e,o){if(!t&&!o)return()=>{};const s={timeout:t,notify:n,once:e,date:o};return this._notify.add(s),this._schedule(s),()=>{this._clearTimeout(s),this._notify.delete(s)}}}class Ik{constructor(t=0,n=0,e=new Bk,o=_e("busy"),s=_e(!1)){V(this,"unsubNotify");V(this,"unsubMessage");V(this,"activity",()=>{this.idleStatus.set("busy"),this.idleScheduler.reschedule()});V(this,"focus",t=>{this.focusAfterIdle.set(t)});this._idleNotifyTimeout=t,this._idleMessageTimeout=n,this.idleScheduler=e,this.idleStatus=o,this.focusAfterIdle=s,this.idleNotifyTimeout=t,this.idleMessageTimeout=n}set idleMessageTimeout(t){var n;this._idleMessageTimeout!==t&&(this._idleMessageTimeout=t,(n=this.unsubMessage)==null||n.call(this),this.unsubMessage=this.idleScheduler.once(t,()=>{this.idleStatus.set("idle-message")}))}set idleNotifyTimeout(t){var n;this._idleNotifyTimeout!==t&&(this._idleNotifyTimeout=t,(n=this.unsubNotify)==null||n.call(this),this.unsubNotify=this.idleScheduler.once(t,()=>{this.idleStatus.set("idle-notify")}))}get idleMessageTimeout(){return this._idleMessageTimeout}get idleNotifyTimeout(){return this._idleNotifyTimeout}get notifyEnabled(){return this._idleNotifyTimeout>0}get messageEnabled(){return this._idleMessageTimeout>0}dispose(){var t,n;(t=this.unsubNotify)==null||t.call(this),(n=this.unsubMessage)==null||n.call(this),this.idleScheduler.dispose(),this.idleStatus.set("busy"),this.focusAfterIdle.set(!1)}}var Ga=(r=>(r.send="send",r.addTask="addTask",r))(Ga||{});const mH=[{id:"send",label:"Send to Agent",icon:z_,description:"Send message to agent"},{id:"addTask",label:"Add Task",icon:Py,description:"Add task with the message content"}];class Fk{constructor(){V(this,"_mode",_e(Ga.send));V(this,"_currentMode",Ga.send);this._mode.subscribe(t=>{this._currentMode=t})}get mode(){return this._mode}setMode(t){this._mode.set(t)}getCurrentMode(){return this._currentMode}initializeFromState(t){t&&Object.values(Ga).includes(t)&&this._mode.set(t)}}const Ta=_e("idle");var on=(r=>(r.manual="manual",r.auto="auto",r))(on||{});class Dk{constructor(t,n,e,o={}){V(this,"_state",{currentConversationId:void 0,conversations:{},agentExecutionMode:"manual",isPanelCollapsed:!0,displayedAnnouncements:[]});V(this,"extensionClient");V(this,"_chatFlagsModel");V(this,"_currConversationModel");V(this,"_chatModeModel");V(this,"_sendModeModel");V(this,"_currentChatMode");V(this,"_flagsLoaded",_e(!1));V(this,"subscribers",new Set);V(this,"idleMessageModel",new Ik);V(this,"isPanelCollapsed");V(this,"agentExecutionMode");V(this,"sortConversationsBy");V(this,"displayedAnnouncements");V(this,"onLoaded",async()=>{var e,o;const t=await this.extensionClient.getChatInitData(),n=!this._chatFlagsModel.doUseNewDraftFunctionality&&(t.enableBackgroundAgents||t.enableNewThreadsList);this._chatFlagsModel.update({enableEditableHistory:t.enableEditableHistory??!1,enablePreferenceCollection:t.enablePreferenceCollection??!1,enableRetrievalDataCollection:t.enableRetrievalDataCollection??!1,enableDebugFeatures:t.enableDebugFeatures??!1,enableRichTextHistory:t.useRichTextHistory??!0,modelDisplayNameToId:t.modelDisplayNameToId??{},fullFeatured:t.fullFeatured??!0,smallSyncThreshold:t.smallSyncThreshold??J_,bigSyncThreshold:t.bigSyncThreshold??tk,enableExternalSourcesInChat:t.enableExternalSourcesInChat??!1,enableSmartPaste:t.enableSmartPaste??!1,enableDirectApply:t.enableDirectApply??!1,summaryTitles:t.summaryTitles??!1,suggestedEditsAvailable:t.suggestedEditsAvailable??!1,enableShareService:t.enableShareService??!1,maxTrackableFileCount:t.maxTrackableFileCount??ek,enableDesignSystemRichTextEditor:t.enableDesignSystemRichTextEditor??!1,enableSources:t.enableSources??!1,enableChatMermaidDiagrams:t.enableChatMermaidDiagrams??!1,smartPastePrecomputeMode:t.smartPastePrecomputeMode??vi.visibleHover,useNewThreadsMenu:t.useNewThreadsMenu??!1,enableChatMermaidDiagramsMinVersion:t.enableChatMermaidDiagramsMinVersion??!1,idleNewSessionMessageTimeoutMs:t.idleNewSessionMessageTimeoutMs,idleNewSessionNotificationTimeoutMs:t.idleNewSessionNotificationTimeoutMs,enableChatMultimodal:t.enableChatMultimodal??!1,enableAgentMode:t.enableAgentMode??!1,agentMemoriesFilePathName:t.agentMemoriesFilePathName,enableRichCheckpointInfo:t.enableRichCheckpointInfo??!1,userTier:t.userTier??"unknown",truncateChatHistory:t.truncateChatHistory??!1,enableBackgroundAgents:t.enableBackgroundAgents??!1,enableNewThreadsList:t.enableNewThreadsList??!1,enableVirtualizedMessageList:t.enableVirtualizedMessageList??!1,customPersonalityPrompts:t.customPersonalityPrompts??{},enablePersonalities:t.enablePersonalities??!1,enableRules:t.enableRules??!1,memoryClassificationOnFirstToken:t.memoryClassificationOnFirstToken??!1,enableGenerateCommitMessage:t.enableGenerateCommitMessage??!1,doUseNewDraftFunctionality:(t.enableBackgroundAgents??!1)||(t.enableNewThreadsList??!1),enablePromptEnhancer:t.enablePromptEnhancer??!1,modelRegistry:t.modelRegistry??{},enableModelRegistry:t.enableModelRegistry??!1,enableTaskList:t.enableTaskList??!1,enableAgentAutoMode:t.enableAgentAutoMode??!1,enableExchangeStorage:t.enableExchangeStorage??!1,enableToolUseStateStorage:t.enableToolUseStateStorage??!1,clientAnnouncement:t.clientAnnouncement??"",useHistorySummary:t.useHistorySummary??!1,historySummaryMaxChars:t.historySummaryMaxChars??0,historySummaryLowerChars:t.historySummaryLowerChars??0,historySummaryPrompt:t.historySummaryPrompt??"",conversationHistorySizeThresholdBytes:t.conversationHistorySizeThresholdBytes??0,retryChatStreamTimeouts:t.retryChatStreamTimeouts??!1}),this._chatFlagsModel.enableAgentAutoMode||this.agentExecutionMode.set("manual"),this._currentChatMode=t.currentChatMode,n&&this.onDoUseNewDraftFunctionalityChanged(),this._flagsLoaded.set(!0),(o=(e=this.options).onLoaded)==null||o.call(e),this.notifySubscribers()});V(this,"subscribe",t=>(this.subscribers.add(t),t(this),()=>{this.subscribers.delete(t)}));V(this,"initialize",t=>{this._state={...this._state,...this._host.getState()},this._chatFlagsModel.fullFeatured&&((t==null?void 0:t.id)!==tu&&this.currentConversationId!==tu||(delete this._state.conversations[tu],this.setCurrentConversationToWelcome())),this._chatFlagsModel.subscribe(n=>{this.idleMessageModel.idleNotifyTimeout=n.idleNewSessionNotificationTimeoutMs,this.idleMessageModel.idleMessageTimeout=n.idleNewSessionMessageTimeoutMs}),this._state.conversations=Object.fromEntries(Object.entries(this._state.conversations).filter(([n,e])=>n===_n||br.isValid(e))),this.initializeIsShareableState(),t?this.setCurrentConversation(t.id):this.setCurrentConversation(this.currentConversationId),this.subscribe(()=>this.idleMessageModel.activity()),this.setState(this._state)});V(this,"initializeIsShareableState",()=>{const t={...this._state.conversations};for(const[n,e]of Object.entries(t)){if(e.isShareable)continue;const o=e.chatHistory.some(s=>Bi(s));t[n]={...e,isShareable:o}}this._state.conversations=t});V(this,"updateChatState",t=>{this._state={...this._state,...t};const n=this._state.conversations,e=new Set;for(const[o,s]of Object.entries(n))s.isPinned&&e.add(o);this.setState(this._state),this.notifySubscribers()});V(this,"saveImmediate",()=>{this._setStateWithDehydration(this._state)});V(this,"setState",ad(t=>{this._setStateWithDehydration(t)},1e3,{maxWait:15e3}));V(this,"notifySubscribers",()=>{this.subscribers.forEach(t=>t(this))});V(this,"withWebviewClientEvent",(t,n)=>(...e)=>(this.extensionClient.reportWebviewClientEvent(t),n(...e)));V(this,"onDoUseNewDraftFunctionalityChanged",()=>{const t=!!this._state.conversations[_n];if(this.currentConversationId&&this.currentConversationId!==_n&&this._state.conversations[this.currentConversationId]&&br.isEmpty(this._state.conversations[this.currentConversationId])&&!t){const n={...this._state.conversations[this.currentConversationId],id:_n};this._state.conversations[_n]=n,this.deleteConversationIds(new Set([this.currentConversationId])),this._state.currentConversationId=_n,this._currConversationModel.setConversation(n)}});V(this,"setCurrentConversationToWelcome",()=>{this.setCurrentConversation(),this._currConversationModel.setName("Welcome to Augment"),this._currConversationModel.addChatItem({chatItemType:yl.educateFeatures,request_id:crypto.randomUUID(),seen_state:ai.seen})});V(this,"popCurrentConversation",async()=>{var n,e;const t=this.currentConversationId;t&&await this.deleteConversation(t,((n=this.nextConversation)==null?void 0:n.id)??((e=this.previousConversation)==null?void 0:e.id))});V(this,"setCurrentConversation",async(t,n=!0,e)=>{if(t===this.currentConversationId&&(e!=null&&e.noopIfSameConversation))return;let o;if(this.flags.doUseNewDraftFunctionality){t===void 0&&(t=_n);const i=this._state.conversations[t];o=i?await this._hydrateConversation(i):br.create({personaType:await this._currConversationModel.decidePersonaType(),rootTaskUuid:e==null?void 0:e.newTaskUuid}),t===_n&&(o.id=_n),e!=null&&e.newTaskUuid&&(o.rootTaskUuid=e.newTaskUuid)}else if(t===void 0)this.deleteInvalidConversations(Uu(this._currConversationModel)?"agent":"chat"),o=br.create({personaType:await this._currConversationModel.decidePersonaType()});else{const i=this._state.conversations[t];o=i?await this._hydrateConversation(i):br.create({personaType:await this._currConversationModel.decidePersonaType(),rootTaskUuid:e==null?void 0:e.newTaskUuid})}const s=this.conversations[this._currConversationModel.id]===void 0;this._currConversationModel.setConversation(o,!s,n),this._currConversationModel.recoverAllExchanges(),this._currConversationModel.resetTotalCharactersCache()});V(this,"saveConversation",(t,n)=>{this.updateChatState({conversations:{...this._state.conversations,[t.id]:t},currentConversationId:t.id}),n&&delete this._state.conversations[_n]});V(this,"isConversationShareable",t=>{var n;return((n=this._state.conversations[t])==null?void 0:n.isShareable)??!0});V(this,"setSortConversationsBy",t=>{this.sortConversationsBy.set(t),this.updateChatState({})});V(this,"getConversationUrl",async t=>{const n=this._state.conversations[t];if(n.lastUrl)return n.lastUrl;Ta.set("copying");const e=n==null?void 0:n.chatHistory,o=e.reduce((a,l)=>(Bi(l)&&a.push({request_id:l.request_id||"",request_message:l.request_message,response_text:l.response_text||""}),a),[]);if(o.length===0)throw new Error("No chat history to share");const s=br.getDisplayName(n),i=await this.extensionClient.saveChat(t,o,s);if(i.data){let a=i.data.url;return this.updateChatState({conversations:{...this._state.conversations,[t]:{...n,lastUrl:a}}}),a}throw new Error("Failed to create URL")});V(this,"shareConversation",async t=>{if(t!==void 0)try{const n=await this.getConversationUrl(t);if(!n)return void Ta.set("idle");navigator.clipboard.writeText(n),Ta.set("copied")}catch{Ta.set("failed")}});V(this,"deleteConversations",async(t,n=void 0,e=[],o)=>{const s=t.length+e.length;if(await this.extensionClient.openConfirmationModal({title:"Delete Conversation",message:`Are you sure you want to delete ${s>1?"these conversations":"this conversation"}?`,confirmButtonText:"Delete",cancelButtonText:"Cancel"})){if(t.length>0){const i=new Set(t);this.deleteConversationIds(i)}if(e.length>0&&o)for(const i of e)try{await o.deleteAgent(i,!0)}catch(a){console.error(`Failed to delete remote agent ${i}:`,a)}this.currentConversationId&&t.includes(this.currentConversationId)&&this.setCurrentConversation(n)}});V(this,"deleteConversation",async(t,n=void 0)=>{await this.deleteConversations([t],n)});V(this,"deleteConversationIds",async t=>{var e;const n=[];for(const o of t){const s=((e=this._state.conversations[o])==null?void 0:e.requestIds)??[];n.push(...s)}for(const o of Object.values(this._state.conversations))if(t.has(o.id)){for(const i of o.chatHistory)Vp(i)&&this.deleteImagesInExchange(i);const s=o.draftExchange;s&&this.deleteImagesInExchange(s)}for(const o of t){try{await this.extensionClient.deleteConversationExchanges(o)}catch(s){console.error(`Failed to delete exchanges for conversation ${o}:`,s)}if(this.flags.enableToolUseStateStorage)try{await this.extensionClient.deleteConversationToolUseStates(o)}catch(s){console.error(`Failed to delete tool use states for conversation ${o}:`,s)}}this.updateChatState({conversations:Object.fromEntries(Object.entries(this._state.conversations).filter(([o])=>!t.has(o)))}),this.extensionClient.clearMetadataFor({requestIds:n,conversationIds:Array.from(t)})});V(this,"deleteImagesInExchange",t=>{const n=new Set([...t.rich_text_json_repr?this.findImagesInJson(t.rich_text_json_repr):[],...t.structured_request_nodes?this.findImagesInStructuredRequest(t.structured_request_nodes):[]]);for(const e of n)this.deleteImage(e)});V(this,"findImagesInJson",t=>{const n=[],e=o=>{var s,i;if(o.type==="file"&&((s=o.attrs)!=null&&s.src)){const a=(i=o.attrs)==null?void 0:i.src;X_(a)&&n.push(o.attrs.src)}else if((o.type==="doc"||o.type==="paragraph")&&o.content)for(const a of o.content)e(a)};return e(t),n});V(this,"findImagesInStructuredRequest",t=>t.reduce((e,o)=>(o.type===_k.IMAGE_ID&&o.image_id_node&&e.push(o.image_id_node.image_id),e),[]));V(this,"toggleConversationPinned",t=>{const n=this._state.conversations[t],e={...n,isPinned:!n.isPinned};this.updateChatState({conversations:{...this._state.conversations,[t]:e}}),t===this.currentConversationId&&this._currConversationModel.toggleIsPinned()});V(this,"renameConversation",(t,n)=>{const e={...this._state.conversations[t],name:n};this.updateChatState({conversations:{...this._state.conversations,[t]:e}}),t===this.currentConversationId&&this._currConversationModel.setName(n)});V(this,"smartPaste",(t,n,e,o)=>{const s=this._currConversationModel.historyTo(t,!0).filter(i=>Bi(i)).map(i=>({request_message:i.request_message,response_text:i.response_text||"",request_id:i.request_id||""}));this.extensionClient.smartPaste({generatedCode:n,chatHistory:s,targetFile:e??void 0,options:o})});V(this,"saveImage",async t=>await this.extensionClient.saveImage(t));V(this,"saveAttachment",async t=>await this.extensionClient.saveAttachment(t));V(this,"deleteImage",async t=>await this.extensionClient.deleteImage(t));V(this,"renderImage",async t=>await this.extensionClient.loadImage(t));this._asyncMsgSender=t,this._host=n,this._specialContextInputModel=e,this.options=o,this._chatFlagsModel=new K_(o.initialFlags),this.extensionClient=new v_(this._host,this._asyncMsgSender,this._chatFlagsModel),this._currConversationModel=new br(this.extensionClient,this._chatFlagsModel,this._specialContextInputModel,this.saveConversation),this._sendModeModel=new Fk,this.initialize(o.initialConversation);const s=this._state.isPanelCollapsed??this._state.isAgentEditsCollapsed??this._state.isTaskListCollapsed??!0;this.isPanelCollapsed=_e(s),this.agentExecutionMode=_e(this._state.agentExecutionMode??"manual"),this.sortConversationsBy=_e(this._state.sortConversationsBy??"lastMessageTimestamp"),this.displayedAnnouncements=_e(this._state.displayedAnnouncements??[]),this._sendModeModel.initializeFromState(this._state.sendMode),this.onLoaded()}setChatModeModel(t){this._chatModeModel=t}get currentChatMode(){return this._currentChatMode}setCurrentChatMode(t){this._currentChatMode=t,this.extensionClient.setLastUsedChatMode(t)}get flagsLoaded(){return this._flagsLoaded}async _setStateWithDehydration(t){const n={};if(t.conversations)for(const[e,o]of Object.entries(t.conversations))try{n[e]=await this._dehydrateConversation(o)}catch(s){console.warn(`Failed to dehydrate conversation ${e}:`,s),n[e]=o}this._host.setState({...t,conversations:n,isPanelCollapsed:ce(this.isPanelCollapsed),agentExecutionMode:ce(this.agentExecutionMode),sortConversationsBy:ce(this.sortConversationsBy),displayedAnnouncements:ce(this.displayedAnnouncements),sendMode:this._sendModeModel.getCurrentMode()})}get flags(){return this._chatFlagsModel}get specialContextInputModel(){return this._specialContextInputModel}get currentConversationId(){return this._state.currentConversationId}get currentConversationModel(){return this._currConversationModel}get conversations(){return this._state.conversations}get sendModeModel(){return this._sendModeModel}get chatModeModel(){return this._chatModeModel}orderedConversations(t,n="desc",e){const o=t||this._state.sortConversationsBy||"lastMessageTimestamp";let s=Object.values(this._state.conversations);return e&&(s=s.filter(e)),s.sort((i,a)=>{const l=br.getTime(i,o).getTime(),c=br.getTime(a,o).getTime();return n==="asc"?l-c:c-l})}get nextConversation(){if(!this.currentConversationId)return;const t=this.orderedConversations(),n=t.findIndex(e=>e.id===this.currentConversationId);return t.length>n+1?t[n+1]:void 0}get previousConversation(){if(!this.currentConversationId)return;const t=this.orderedConversations(),n=t.findIndex(e=>e.id===this.currentConversationId);return n>0?t[n-1]:void 0}get host(){return this._host}deleteInvalidConversations(t="all"){const n=Object.keys(this.conversations).filter(e=>{if(e===_n)return!1;const o=!br.isValid(this.conversations[e]),s=Uu(this.conversations[e]);return o&&(t==="agent"&&s||t==="chat"&&!s||t==="all")});n.length&&this.deleteConversationIds(new Set(n))}get lastMessageTimestamp(){const t=this.currentConversationModel.lastExchange;return t==null?void 0:t.timestamp}handleMessageFromExtension(t){const n=t.data;if(n.type===Ee.newThread){if("data"in n&&n.data){const e=n.data.mode;(async()=>(await this.setCurrentConversation(),e&&this._chatModeModel?e.toLowerCase()==="agent"?await this._chatModeModel.setToAgent("manual"):e.toLowerCase()==="chat"?this._chatModeModel.setToChat():console.warn("Unknown chat mode:",e):e&&console.warn("ChatModeModel not available, cannot set mode:",e)))()}else this.setCurrentConversation();return!0}return!1}async _dehydrateConversation(t){let n=t;return this.flags.enableExchangeStorage&&(n=await this._dehydrateExchanges(n)),this.flags.enableToolUseStateStorage&&(n=await this._dehydrateToolUseStates(n)),n}async _dehydrateExchanges(t){const n=[],e=[];for(const o of t.chatHistory)if(Vp(o)){const s=o,i=s.request_id||crypto.randomUUID(),a={request_message:s.request_message,response_text:s.response_text||"",request_id:i,request_nodes:s.structured_request_nodes,response_nodes:s.structured_output_nodes,uuid:i,conversationId:t.id,status:s.status===an.success?"success":s.status===an.failed?"failed":"sent",timestamp:s.timestamp||new Date().toISOString(),seen_state:s.seen_state===ai.seen?"seen":"unseen"};n.push(a);const l={chatItemType:yl.exchangePointer,exchangeUuid:i,timestamp:s.timestamp,request_message:s.request_message,status:s.status,hasResponse:!!s.response_text,isStreaming:s.status===an.sent,seen_state:s.seen_state};e.push(l)}else e.push(o);if(n.length>0)try{await this.extensionClient.saveExchanges(t.id,n)}catch{return t}return{...t,chatHistory:e}}async _dehydrateToolUseStates(t){if(!this.flags.enableToolUseStateStorage||!t.toolUseStates||Object.keys(t.toolUseStates).length===0)return t;try{return await this.extensionClient.saveToolUseStates(t.id,t.toolUseStates),{...t,toolUseStates:{}}}catch(n){return console.warn(`Failed to store tool use states for conversation ${t.id}:`,n),t}}async _hydrateConversation(t){let n=t;return this.flags.enableExchangeStorage&&(n=await this._hydrateExchanges(n)),this.flags.enableToolUseStateStorage&&(n=await this._hydrateToolUseStates(n)),n}async _hydrateExchanges(t){const n=[];for(const s of t.chatHistory)Gp(s)&&n.push(s.exchangeUuid);let e=new Map;if(n.length>0)try{e=new Map((await this.extensionClient.loadExchanges(t.id,n)).map(s=>[s.uuid,s]))}catch(s){console.warn(`Failed to load exchanges for conversation ${t.id}:`,s)}const o=t.chatHistory.map(s=>{if(Gp(s)){const i=e.get(s.exchangeUuid);return i?{chatItemType:void 0,timestamp:i.timestamp,request_message:i.request_message,response_text:i.response_text||"",status:i.status==="success"?an.success:i.status==="failed"?an.failed:an.sent,seen_state:i.seen_state==="seen"?ai.seen:ai.unseen,request_id:i.request_id,structured_request_nodes:i.request_nodes,structured_output_nodes:i.response_nodes}:{chatItemType:void 0,timestamp:s.timestamp,request_message:s.request_message||"",response_text:"",status:s.status||an.sent,seen_state:s.seen_state||ai.unseen,request_id:s.request_id}}return s});return{...t,chatHistory:o}}async _hydrateToolUseStates(t){if(!this.flags.enableToolUseStateStorage)return t;try{const n=await this.extensionClient.loadConversationToolUseStates(t.id);return{...t,toolUseStates:n}}catch(n){return console.warn(`Failed to load tool use states for conversation ${t.id}:`,n),t}}}V(Dk,"NEW_AGENT_KEY",_n);const ls=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,uf=new Set,ju=typeof process=="object"&&process?process:{},Uy=(r,t,n,e)=>{typeof ju.emitWarning=="function"?ju.emitWarning(r,t,n,e):console.error(`[${n}] ${t}: ${r}`)};let _l=globalThis.AbortController,hf=globalThis.AbortSignal;var yy;if(_l===void 0){hf=class{constructor(){V(this,"onabort");V(this,"_onabort",[]);V(this,"reason");V(this,"aborted",!1)}addEventListener(n,e){this._onabort.push(e)}},_l=class{constructor(){V(this,"signal",new hf);t()}abort(n){var e,o;if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(const s of this.signal._onabort)s(n);(o=(e=this.signal).onabort)==null||o.call(e,n)}}};let r=((yy=ju.env)==null?void 0:yy.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const t=()=>{r&&(r=!1,Uy("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}const ro=r=>r&&r===Math.floor(r)&&r>0&&isFinite(r),qy=r=>ro(r)?r<=Math.pow(2,8)?Uint8Array:r<=Math.pow(2,16)?Uint16Array:r<=Math.pow(2,32)?Uint32Array:r<=Number.MAX_SAFE_INTEGER?Za:null:null;class Za extends Array{constructor(t){super(t),this.fill(0)}}var Tr,ws;let Ok=(Tr=class{constructor(t,n){V(this,"heap");V(this,"length");if(!D(Tr,ws))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new n(t),this.length=0}static create(t){const n=qy(t);if(!n)return[];Lt(Tr,ws,!0);const e=new Tr(t,n);return Lt(Tr,ws,!1),e}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}},ws=new WeakMap,ie(Tr,ws,!1),Tr);var xy,by,ir,Wn,ar,lr,vs,_s,He,cr,qe,Se,qt,kn,Hn,yn,Ke,ur,Je,hr,dr,Vn,pr,po,Cn,pt,Hu,qo,Hr,ra,Gn,jy,jo,ks,oa,oo,so,Vu,Ya,Xa,ke,Gu,_i,io,Zu;const _p=class _p{constructor(t){ie(this,pt);ie(this,ir);ie(this,Wn);ie(this,ar);ie(this,lr);ie(this,vs);ie(this,_s);V(this,"ttl");V(this,"ttlResolution");V(this,"ttlAutopurge");V(this,"updateAgeOnGet");V(this,"updateAgeOnHas");V(this,"allowStale");V(this,"noDisposeOnSet");V(this,"noUpdateTTL");V(this,"maxEntrySize");V(this,"sizeCalculation");V(this,"noDeleteOnFetchRejection");V(this,"noDeleteOnStaleGet");V(this,"allowStaleOnFetchAbort");V(this,"allowStaleOnFetchRejection");V(this,"ignoreFetchAbort");ie(this,He);ie(this,cr);ie(this,qe);ie(this,Se);ie(this,qt);ie(this,kn);ie(this,Hn);ie(this,yn);ie(this,Ke);ie(this,ur);ie(this,Je);ie(this,hr);ie(this,dr);ie(this,Vn);ie(this,pr);ie(this,po);ie(this,Cn);ie(this,qo,()=>{});ie(this,Hr,()=>{});ie(this,ra,()=>{});ie(this,Gn,()=>!1);ie(this,jo,t=>{});ie(this,ks,(t,n,e)=>{});ie(this,oa,(t,n,e,o)=>{if(e||o)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});V(this,xy,"LRUCache");const{max:n=0,ttl:e,ttlResolution:o=1,ttlAutopurge:s,updateAgeOnGet:i,updateAgeOnHas:a,allowStale:l,dispose:c,disposeAfter:u,noDisposeOnSet:h,noUpdateTTL:d,maxSize:p=0,maxEntrySize:g=0,sizeCalculation:$,fetchMethod:b,memoMethod:y,noDeleteOnFetchRejection:x,noDeleteOnStaleGet:M,allowStaleOnFetchRejection:L,allowStaleOnFetchAbort:A,ignoreFetchAbort:B}=t;if(n!==0&&!ro(n))throw new TypeError("max option must be a nonnegative integer");const E=n?qy(n):Array;if(!E)throw new Error("invalid max value: "+n);if(Lt(this,ir,n),Lt(this,Wn,p),this.maxEntrySize=g||D(this,Wn),this.sizeCalculation=$,this.sizeCalculation){if(!D(this,Wn)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(y!==void 0&&typeof y!="function")throw new TypeError("memoMethod must be a function if defined");if(Lt(this,_s,y),b!==void 0&&typeof b!="function")throw new TypeError("fetchMethod must be a function if specified");if(Lt(this,vs,b),Lt(this,po,!!b),Lt(this,qe,new Map),Lt(this,Se,new Array(n).fill(void 0)),Lt(this,qt,new Array(n).fill(void 0)),Lt(this,kn,new E(n)),Lt(this,Hn,new E(n)),Lt(this,yn,0),Lt(this,Ke,0),Lt(this,ur,Ok.create(n)),Lt(this,He,0),Lt(this,cr,0),typeof c=="function"&&Lt(this,ar,c),typeof u=="function"?(Lt(this,lr,u),Lt(this,Je,[])):(Lt(this,lr,void 0),Lt(this,Je,void 0)),Lt(this,pr,!!D(this,ar)),Lt(this,Cn,!!D(this,lr)),this.noDisposeOnSet=!!h,this.noUpdateTTL=!!d,this.noDeleteOnFetchRejection=!!x,this.allowStaleOnFetchRejection=!!L,this.allowStaleOnFetchAbort=!!A,this.ignoreFetchAbort=!!B,this.maxEntrySize!==0){if(D(this,Wn)!==0&&!ro(D(this,Wn)))throw new TypeError("maxSize must be a positive integer if specified");if(!ro(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");xt(this,pt,jy).call(this)}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!M,this.updateAgeOnGet=!!i,this.updateAgeOnHas=!!a,this.ttlResolution=ro(o)||o===0?o:1,this.ttlAutopurge=!!s,this.ttl=e||0,this.ttl){if(!ro(this.ttl))throw new TypeError("ttl must be a positive integer if specified");xt(this,pt,Hu).call(this)}if(D(this,ir)===0&&this.ttl===0&&D(this,Wn)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!D(this,ir)&&!D(this,Wn)){const F="LRU_CACHE_UNBOUNDED";(U=>!uf.has(U))(F)&&(uf.add(F),Uy("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",F,_p))}}static unsafeExposeInternals(t){return{starts:D(t,dr),ttls:D(t,Vn),sizes:D(t,hr),keyMap:D(t,qe),keyList:D(t,Se),valList:D(t,qt),next:D(t,kn),prev:D(t,Hn),get head(){return D(t,yn)},get tail(){return D(t,Ke)},free:D(t,ur),isBackgroundFetch:n=>{var e;return xt(e=t,pt,ke).call(e,n)},backgroundFetch:(n,e,o,s)=>{var i;return xt(i=t,pt,Xa).call(i,n,e,o,s)},moveToTail:n=>{var e;return xt(e=t,pt,_i).call(e,n)},indexes:n=>{var e;return xt(e=t,pt,oo).call(e,n)},rindexes:n=>{var e;return xt(e=t,pt,so).call(e,n)},isStale:n=>{var e;return D(e=t,Gn).call(e,n)}}}get max(){return D(this,ir)}get maxSize(){return D(this,Wn)}get calculatedSize(){return D(this,cr)}get size(){return D(this,He)}get fetchMethod(){return D(this,vs)}get memoMethod(){return D(this,_s)}get dispose(){return D(this,ar)}get disposeAfter(){return D(this,lr)}getRemainingTTL(t){return D(this,qe).has(t)?1/0:0}*entries(){for(const t of xt(this,pt,oo).call(this))D(this,qt)[t]===void 0||D(this,Se)[t]===void 0||xt(this,pt,ke).call(this,D(this,qt)[t])||(yield[D(this,Se)[t],D(this,qt)[t]])}*rentries(){for(const t of xt(this,pt,so).call(this))D(this,qt)[t]===void 0||D(this,Se)[t]===void 0||xt(this,pt,ke).call(this,D(this,qt)[t])||(yield[D(this,Se)[t],D(this,qt)[t]])}*keys(){for(const t of xt(this,pt,oo).call(this)){const n=D(this,Se)[t];n===void 0||xt(this,pt,ke).call(this,D(this,qt)[t])||(yield n)}}*rkeys(){for(const t of xt(this,pt,so).call(this)){const n=D(this,Se)[t];n===void 0||xt(this,pt,ke).call(this,D(this,qt)[t])||(yield n)}}*values(){for(const t of xt(this,pt,oo).call(this))D(this,qt)[t]===void 0||xt(this,pt,ke).call(this,D(this,qt)[t])||(yield D(this,qt)[t])}*rvalues(){for(const t of xt(this,pt,so).call(this))D(this,qt)[t]===void 0||xt(this,pt,ke).call(this,D(this,qt)[t])||(yield D(this,qt)[t])}[(by=Symbol.iterator,xy=Symbol.toStringTag,by)](){return this.entries()}find(t,n={}){for(const e of xt(this,pt,oo).call(this)){const o=D(this,qt)[e],s=xt(this,pt,ke).call(this,o)?o.__staleWhileFetching:o;if(s!==void 0&&t(s,D(this,Se)[e],this))return this.get(D(this,Se)[e],n)}}forEach(t,n=this){for(const e of xt(this,pt,oo).call(this)){const o=D(this,qt)[e],s=xt(this,pt,ke).call(this,o)?o.__staleWhileFetching:o;s!==void 0&&t.call(n,s,D(this,Se)[e],this)}}rforEach(t,n=this){for(const e of xt(this,pt,so).call(this)){const o=D(this,qt)[e],s=xt(this,pt,ke).call(this,o)?o.__staleWhileFetching:o;s!==void 0&&t.call(n,s,D(this,Se)[e],this)}}purgeStale(){let t=!1;for(const n of xt(this,pt,so).call(this,{allowStale:!0}))D(this,Gn).call(this,n)&&(xt(this,pt,io).call(this,D(this,Se)[n],"expire"),t=!0);return t}info(t){const n=D(this,qe).get(t);if(n===void 0)return;const e=D(this,qt)[n],o=xt(this,pt,ke).call(this,e)?e.__staleWhileFetching:e;if(o===void 0)return;const s={value:o};if(D(this,Vn)&&D(this,dr)){const i=D(this,Vn)[n],a=D(this,dr)[n];if(i&&a){const l=i-(ls.now()-a);s.ttl=l,s.start=Date.now()}}return D(this,hr)&&(s.size=D(this,hr)[n]),s}dump(){const t=[];for(const n of xt(this,pt,oo).call(this,{allowStale:!0})){const e=D(this,Se)[n],o=D(this,qt)[n],s=xt(this,pt,ke).call(this,o)?o.__staleWhileFetching:o;if(s===void 0||e===void 0)continue;const i={value:s};if(D(this,Vn)&&D(this,dr)){i.ttl=D(this,Vn)[n];const a=ls.now()-D(this,dr)[n];i.start=Math.floor(Date.now()-a)}D(this,hr)&&(i.size=D(this,hr)[n]),t.unshift([e,i])}return t}load(t){this.clear();for(const[n,e]of t){if(e.start){const o=Date.now()-e.start;e.start=ls.now()-o}this.set(n,e.value,e)}}set(t,n,e={}){var d,p,g,$,b;if(n===void 0)return this.delete(t),this;const{ttl:o=this.ttl,start:s,noDisposeOnSet:i=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:l}=e;let{noUpdateTTL:c=this.noUpdateTTL}=e;const u=D(this,oa).call(this,t,n,e.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),xt(this,pt,io).call(this,t,"set"),this;let h=D(this,He)===0?void 0:D(this,qe).get(t);if(h===void 0)h=D(this,He)===0?D(this,Ke):D(this,ur).length!==0?D(this,ur).pop():D(this,He)===D(this,ir)?xt(this,pt,Ya).call(this,!1):D(this,He),D(this,Se)[h]=t,D(this,qt)[h]=n,D(this,qe).set(t,h),D(this,kn)[D(this,Ke)]=h,D(this,Hn)[h]=D(this,Ke),Lt(this,Ke,h),Sa(this,He)._++,D(this,ks).call(this,h,u,l),l&&(l.set="add"),c=!1;else{xt(this,pt,_i).call(this,h);const y=D(this,qt)[h];if(n!==y){if(D(this,po)&&xt(this,pt,ke).call(this,y)){y.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:x}=y;x===void 0||i||(D(this,pr)&&((d=D(this,ar))==null||d.call(this,x,t,"set")),D(this,Cn)&&((p=D(this,Je))==null||p.push([x,t,"set"])))}else i||(D(this,pr)&&((g=D(this,ar))==null||g.call(this,y,t,"set")),D(this,Cn)&&(($=D(this,Je))==null||$.push([y,t,"set"])));if(D(this,jo).call(this,h),D(this,ks).call(this,h,u,l),D(this,qt)[h]=n,l){l.set="replace";const x=y&&xt(this,pt,ke).call(this,y)?y.__staleWhileFetching:y;x!==void 0&&(l.oldValue=x)}}else l&&(l.set="update")}if(o===0||D(this,Vn)||xt(this,pt,Hu).call(this),D(this,Vn)&&(c||D(this,ra).call(this,h,o,s),l&&D(this,Hr).call(this,l,h)),!i&&D(this,Cn)&&D(this,Je)){const y=D(this,Je);let x;for(;x=y==null?void 0:y.shift();)(b=D(this,lr))==null||b.call(this,...x)}return this}pop(){var t;try{for(;D(this,He);){const n=D(this,qt)[D(this,yn)];if(xt(this,pt,Ya).call(this,!0),xt(this,pt,ke).call(this,n)){if(n.__staleWhileFetching)return n.__staleWhileFetching}else if(n!==void 0)return n}}finally{if(D(this,Cn)&&D(this,Je)){const n=D(this,Je);let e;for(;e=n==null?void 0:n.shift();)(t=D(this,lr))==null||t.call(this,...e)}}}has(t,n={}){const{updateAgeOnHas:e=this.updateAgeOnHas,status:o}=n,s=D(this,qe).get(t);if(s!==void 0){const i=D(this,qt)[s];if(xt(this,pt,ke).call(this,i)&&i.__staleWhileFetching===void 0)return!1;if(!D(this,Gn).call(this,s))return e&&D(this,qo).call(this,s),o&&(o.has="hit",D(this,Hr).call(this,o,s)),!0;o&&(o.has="stale",D(this,Hr).call(this,o,s))}else o&&(o.has="miss");return!1}peek(t,n={}){const{allowStale:e=this.allowStale}=n,o=D(this,qe).get(t);if(o===void 0||!e&&D(this,Gn).call(this,o))return;const s=D(this,qt)[o];return xt(this,pt,ke).call(this,s)?s.__staleWhileFetching:s}async fetch(t,n={}){const{allowStale:e=this.allowStale,updateAgeOnGet:o=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:i=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:h=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:d=this.allowStaleOnFetchRejection,ignoreFetchAbort:p=this.ignoreFetchAbort,allowStaleOnFetchAbort:g=this.allowStaleOnFetchAbort,context:$,forceRefresh:b=!1,status:y,signal:x}=n;if(!D(this,po))return y&&(y.fetch="get"),this.get(t,{allowStale:e,updateAgeOnGet:o,noDeleteOnStaleGet:s,status:y});const M={allowStale:e,updateAgeOnGet:o,noDeleteOnStaleGet:s,ttl:i,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:h,allowStaleOnFetchRejection:d,allowStaleOnFetchAbort:g,ignoreFetchAbort:p,status:y,signal:x};let L=D(this,qe).get(t);if(L===void 0){y&&(y.fetch="miss");const A=xt(this,pt,Xa).call(this,t,L,M,$);return A.__returned=A}{const A=D(this,qt)[L];if(xt(this,pt,ke).call(this,A)){const U=e&&A.__staleWhileFetching!==void 0;return y&&(y.fetch="inflight",U&&(y.returnedStale=!0)),U?A.__staleWhileFetching:A.__returned=A}const B=D(this,Gn).call(this,L);if(!b&&!B)return y&&(y.fetch="hit"),xt(this,pt,_i).call(this,L),o&&D(this,qo).call(this,L),y&&D(this,Hr).call(this,y,L),A;const E=xt(this,pt,Xa).call(this,t,L,M,$),F=E.__staleWhileFetching!==void 0&&e;return y&&(y.fetch=B?"stale":"refresh",F&&B&&(y.returnedStale=!0)),F?E.__staleWhileFetching:E.__returned=E}}async forceFetch(t,n={}){const e=await this.fetch(t,n);if(e===void 0)throw new Error("fetch() returned undefined");return e}memo(t,n={}){const e=D(this,_s);if(!e)throw new Error("no memoMethod provided to constructor");const{context:o,forceRefresh:s,...i}=n,a=this.get(t,i);if(!s&&a!==void 0)return a;const l=e(t,a,{options:i,context:o});return this.set(t,l,i),l}get(t,n={}){const{allowStale:e=this.allowStale,updateAgeOnGet:o=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:i}=n,a=D(this,qe).get(t);if(a!==void 0){const l=D(this,qt)[a],c=xt(this,pt,ke).call(this,l);return i&&D(this,Hr).call(this,i,a),D(this,Gn).call(this,a)?(i&&(i.get="stale"),c?(i&&e&&l.__staleWhileFetching!==void 0&&(i.returnedStale=!0),e?l.__staleWhileFetching:void 0):(s||xt(this,pt,io).call(this,t,"expire"),i&&e&&(i.returnedStale=!0),e?l:void 0)):(i&&(i.get="hit"),c?l.__staleWhileFetching:(xt(this,pt,_i).call(this,a),o&&D(this,qo).call(this,a),l))}i&&(i.get="miss")}delete(t){return xt(this,pt,io).call(this,t,"delete")}clear(){return xt(this,pt,Zu).call(this,"delete")}};ir=new WeakMap,Wn=new WeakMap,ar=new WeakMap,lr=new WeakMap,vs=new WeakMap,_s=new WeakMap,He=new WeakMap,cr=new WeakMap,qe=new WeakMap,Se=new WeakMap,qt=new WeakMap,kn=new WeakMap,Hn=new WeakMap,yn=new WeakMap,Ke=new WeakMap,ur=new WeakMap,Je=new WeakMap,hr=new WeakMap,dr=new WeakMap,Vn=new WeakMap,pr=new WeakMap,po=new WeakMap,Cn=new WeakMap,pt=new WeakSet,Hu=function(){const t=new Za(D(this,ir)),n=new Za(D(this,ir));Lt(this,Vn,t),Lt(this,dr,n),Lt(this,ra,(s,i,a=ls.now())=>{if(n[s]=i!==0?a:0,t[s]=i,i!==0&&this.ttlAutopurge){const l=setTimeout(()=>{D(this,Gn).call(this,s)&&xt(this,pt,io).call(this,D(this,Se)[s],"expire")},i+1);l.unref&&l.unref()}}),Lt(this,qo,s=>{n[s]=t[s]!==0?ls.now():0}),Lt(this,Hr,(s,i)=>{if(t[i]){const a=t[i],l=n[i];if(!a||!l)return;s.ttl=a,s.start=l,s.now=e||o();const c=s.now-l;s.remainingTTL=a-c}});let e=0;const o=()=>{const s=ls.now();if(this.ttlResolution>0){e=s;const i=setTimeout(()=>e=0,this.ttlResolution);i.unref&&i.unref()}return s};this.getRemainingTTL=s=>{const i=D(this,qe).get(s);if(i===void 0)return 0;const a=t[i],l=n[i];return!a||!l?1/0:a-((e||o())-l)},Lt(this,Gn,s=>{const i=n[s],a=t[s];return!!a&&!!i&&(e||o())-i>a})},qo=new WeakMap,Hr=new WeakMap,ra=new WeakMap,Gn=new WeakMap,jy=function(){const t=new Za(D(this,ir));Lt(this,cr,0),Lt(this,hr,t),Lt(this,jo,n=>{Lt(this,cr,D(this,cr)-t[n]),t[n]=0}),Lt(this,oa,(n,e,o,s)=>{if(xt(this,pt,ke).call(this,e))return 0;if(!ro(o)){if(!s)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(o=s(e,n),!ro(o))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return o}),Lt(this,ks,(n,e,o)=>{if(t[n]=e,D(this,Wn)){const s=D(this,Wn)-t[n];for(;D(this,cr)>s;)xt(this,pt,Ya).call(this,!0)}Lt(this,cr,D(this,cr)+t[n]),o&&(o.entrySize=e,o.totalCalculatedSize=D(this,cr))})},jo=new WeakMap,ks=new WeakMap,oa=new WeakMap,oo=function*({allowStale:t=this.allowStale}={}){if(D(this,He))for(let n=D(this,Ke);xt(this,pt,Vu).call(this,n)&&(!t&&D(this,Gn).call(this,n)||(yield n),n!==D(this,yn));)n=D(this,Hn)[n]},so=function*({allowStale:t=this.allowStale}={}){if(D(this,He))for(let n=D(this,yn);xt(this,pt,Vu).call(this,n)&&(!t&&D(this,Gn).call(this,n)||(yield n),n!==D(this,Ke));)n=D(this,kn)[n]},Vu=function(t){return t!==void 0&&D(this,qe).get(D(this,Se)[t])===t},Ya=function(t){var s,i;const n=D(this,yn),e=D(this,Se)[n],o=D(this,qt)[n];return D(this,po)&&xt(this,pt,ke).call(this,o)?o.__abortController.abort(new Error("evicted")):(D(this,pr)||D(this,Cn))&&(D(this,pr)&&((s=D(this,ar))==null||s.call(this,o,e,"evict")),D(this,Cn)&&((i=D(this,Je))==null||i.push([o,e,"evict"]))),D(this,jo).call(this,n),t&&(D(this,Se)[n]=void 0,D(this,qt)[n]=void 0,D(this,ur).push(n)),D(this,He)===1?(Lt(this,yn,Lt(this,Ke,0)),D(this,ur).length=0):Lt(this,yn,D(this,kn)[n]),D(this,qe).delete(e),Sa(this,He)._--,n},Xa=function(t,n,e,o){const s=n===void 0?void 0:D(this,qt)[n];if(xt(this,pt,ke).call(this,s))return s;const i=new _l,{signal:a}=e;a==null||a.addEventListener("abort",()=>i.abort(a.reason),{signal:i.signal});const l={signal:i.signal,options:e,context:o},c=(p,g=!1)=>{const{aborted:$}=i.signal,b=e.ignoreFetchAbort&&p!==void 0;if(e.status&&($&&!g?(e.status.fetchAborted=!0,e.status.fetchError=i.signal.reason,b&&(e.status.fetchAbortIgnored=!0)):e.status.fetchResolved=!0),$&&!b&&!g)return u(i.signal.reason);const y=h;return D(this,qt)[n]===h&&(p===void 0?y.__staleWhileFetching?D(this,qt)[n]=y.__staleWhileFetching:xt(this,pt,io).call(this,t,"fetch"):(e.status&&(e.status.fetchUpdated=!0),this.set(t,p,l.options))),p},u=p=>{const{aborted:g}=i.signal,$=g&&e.allowStaleOnFetchAbort,b=$||e.allowStaleOnFetchRejection,y=b||e.noDeleteOnFetchRejection,x=h;if(D(this,qt)[n]===h&&(!y||x.__staleWhileFetching===void 0?xt(this,pt,io).call(this,t,"fetch"):$||(D(this,qt)[n]=x.__staleWhileFetching)),b)return e.status&&x.__staleWhileFetching!==void 0&&(e.status.returnedStale=!0),x.__staleWhileFetching;if(x.__returned===x)throw p};e.status&&(e.status.fetchDispatched=!0);const h=new Promise((p,g)=>{var b;const $=(b=D(this,vs))==null?void 0:b.call(this,t,s,l);$&&$ instanceof Promise&&$.then(y=>p(y===void 0?void 0:y),g),i.signal.addEventListener("abort",()=>{e.ignoreFetchAbort&&!e.allowStaleOnFetchAbort||(p(void 0),e.allowStaleOnFetchAbort&&(p=y=>c(y,!0)))})}).then(c,p=>(e.status&&(e.status.fetchRejected=!0,e.status.fetchError=p),u(p))),d=Object.assign(h,{__abortController:i,__staleWhileFetching:s,__returned:void 0});return n===void 0?(this.set(t,d,{...l.options,status:void 0}),n=D(this,qe).get(t)):D(this,qt)[n]=d,d},ke=function(t){if(!D(this,po))return!1;const n=t;return!!n&&n instanceof Promise&&n.hasOwnProperty("__staleWhileFetching")&&n.__abortController instanceof _l},Gu=function(t,n){D(this,Hn)[n]=t,D(this,kn)[t]=n},_i=function(t){t!==D(this,Ke)&&(t===D(this,yn)?Lt(this,yn,D(this,kn)[t]):xt(this,pt,Gu).call(this,D(this,Hn)[t],D(this,kn)[t]),xt(this,pt,Gu).call(this,D(this,Ke),t),Lt(this,Ke,t))},io=function(t,n){var o,s,i,a;let e=!1;if(D(this,He)!==0){const l=D(this,qe).get(t);if(l!==void 0)if(e=!0,D(this,He)===1)xt(this,pt,Zu).call(this,n);else{D(this,jo).call(this,l);const c=D(this,qt)[l];if(xt(this,pt,ke).call(this,c)?c.__abortController.abort(new Error("deleted")):(D(this,pr)||D(this,Cn))&&(D(this,pr)&&((o=D(this,ar))==null||o.call(this,c,t,n)),D(this,Cn)&&((s=D(this,Je))==null||s.push([c,t,n]))),D(this,qe).delete(t),D(this,Se)[l]=void 0,D(this,qt)[l]=void 0,l===D(this,Ke))Lt(this,Ke,D(this,Hn)[l]);else if(l===D(this,yn))Lt(this,yn,D(this,kn)[l]);else{const u=D(this,Hn)[l];D(this,kn)[u]=D(this,kn)[l];const h=D(this,kn)[l];D(this,Hn)[h]=D(this,Hn)[l]}Sa(this,He)._--,D(this,ur).push(l)}}if(D(this,Cn)&&((i=D(this,Je))!=null&&i.length)){const l=D(this,Je);let c;for(;c=l==null?void 0:l.shift();)(a=D(this,lr))==null||a.call(this,...c)}return e},Zu=function(t){var n,e,o;for(const s of xt(this,pt,so).call(this,{allowStale:!0})){const i=D(this,qt)[s];if(xt(this,pt,ke).call(this,i))i.__abortController.abort(new Error("deleted"));else{const a=D(this,Se)[s];D(this,pr)&&((n=D(this,ar))==null||n.call(this,i,a,t)),D(this,Cn)&&((e=D(this,Je))==null||e.push([i,a,t]))}}if(D(this,qe).clear(),D(this,qt).fill(void 0),D(this,Se).fill(void 0),D(this,Vn)&&D(this,dr)&&(D(this,Vn).fill(0),D(this,dr).fill(0)),D(this,hr)&&D(this,hr).fill(0),Lt(this,yn,0),Lt(this,Ke,0),D(this,ur).length=0,Lt(this,cr,0),Lt(this,He,0),D(this,Cn)&&D(this,Je)){const s=D(this,Je);let i;for(;i=s==null?void 0:s.shift();)(o=D(this,lr))==null||o.call(this,...i)}};let Wu=_p;class $H{constructor(){V(this,"_syncStatus",{status:$_.done,foldersProgress:[]});V(this,"_syncEnabledState",jp.initializing);V(this,"_workspaceGuidelines",[]);V(this,"_openUserGuidelinesInput",!1);V(this,"_userGuidelines");V(this,"_contextStore",new zk);V(this,"_prevOpenFiles",[]);V(this,"_disableContext",!1);V(this,"_enableAgentMemories",!1);V(this,"subscribers",new Set);V(this,"subscribe",t=>(this.subscribers.add(t),t(this),()=>{this.subscribers.delete(t)}));V(this,"handleMessageFromExtension",t=>{const n=t.data;switch(n.type){case Ee.sourceFoldersUpdated:this.onSourceFoldersUpdated(n.data.sourceFolders);break;case Ee.sourceFoldersSyncStatus:this.onSyncStatusUpdated(n.data);break;case Ee.fileRangesSelected:this.updateSelections(n.data);break;case Ee.currentlyOpenFiles:this.setCurrentlyOpenFiles(n.data);break;case Ee.syncEnabledState:this.onSyncEnabledStateUpdate(n.data);break;case Ee.updateGuidelinesState:this.onGuidelinesStateUpdate(n.data);break;default:return!1}return!0});V(this,"onSourceFoldersUpdated",t=>{const n=this.sourceFolders;t=this.updateSourceFoldersWithGuidelines(t),this._contextStore.update(t.map(e=>({sourceFolder:e,status:tn.active,label:e.folderRoot,showWarning:e.guidelinesOverLimit,id:e.folderRoot+String(e.guidelinesOverLimit)})),n,e=>e.id),this.notifySubscribers()});V(this,"onSyncStatusUpdated",t=>{this._syncStatus=t,this.notifySubscribers()});V(this,"disableContext",()=>{this._disableContext=!0,this.notifySubscribers()});V(this,"enableContext",()=>{this._disableContext=!1,this.notifySubscribers()});V(this,"addFile",t=>{this.addFiles([t])});V(this,"addFiles",t=>{this.updateFiles(t,[])});V(this,"removeFile",t=>{this.removeFiles([t])});V(this,"removeFiles",t=>{this.updateFiles([],t)});V(this,"updateItems",(t,n)=>{this.updateItemsInplace(t,n),this.notifySubscribers()});V(this,"updateItemsInplace",(t,n)=>{this._contextStore.update(t,n,e=>e.id)});V(this,"updateFiles",(t,n)=>{const e=i=>({file:i,...eu(i)}),o=t.map(e),s=n.map(e);this._contextStore.update(o,s,i=>i.id),this.notifySubscribers()});V(this,"updateRules",(t,n)=>{const e=i=>({rule:i,...M_(i)}),o=t.map(e),s=n.map(e);this._contextStore.update(o,s,i=>i.id),this.notifySubscribers()});V(this,"enableAgentMemories",()=>{this._enableAgentMemories=!0,this.notifySubscribers()});V(this,"disableAgentMemories",()=>{this._enableAgentMemories=!1,this.notifySubscribers()});V(this,"setCurrentlyOpenFiles",t=>{const n=t.map(o=>({recentFile:o,...eu(o)})),e=this._prevOpenFiles;this._prevOpenFiles=n,this._contextStore.update(n,e,o=>o.id),e.forEach(o=>{const s=this._contextStore.peekKey(o.id);s!=null&&s.recentFile&&(s.file=s.recentFile,delete s.recentFile)}),n.forEach(o=>{const s=this._contextStore.peekKey(o.id);s!=null&&s.file&&(s.recentFile=s.file,delete s.file)}),this.notifySubscribers()});V(this,"onSyncEnabledStateUpdate",t=>{this._syncEnabledState=t,this.notifySubscribers()});V(this,"updateUserGuidelines",(t,n)=>{const e=this.userGuidelines,o=t.overLimit||((n==null?void 0:n.overLimit)??!1),s={userGuidelines:t,label:"User Guidelines",id:"userGuidelines",status:tn.active,referenceCount:1,showWarning:o,rulesAndGuidelinesState:n};this._contextStore.update([s],e,i=>{var a;return i.id+String((a=i.userGuidelines)==null?void 0:a.overLimit)}),this.notifySubscribers()});V(this,"onGuidelinesStateUpdate",t=>{var o;this._userGuidelines=t.userGuidelines,this._workspaceGuidelines=t.workspaceGuidelines??[];const n=t.userGuidelines,e=this.userGuidelines;if(n||t.rulesAndGuidelines||e.length>0){const s=n||{overLimit:!1,contents:"",lengthLimit:((o=t.rulesAndGuidelines)==null?void 0:o.lengthLimit)??2e3};this.updateUserGuidelines(s,t.rulesAndGuidelines)}this.onSourceFoldersUpdated(this.sourceFolders.map(s=>s.sourceFolder))});V(this,"updateSourceFoldersWithGuidelines",t=>t.map(n=>{const e=this._workspaceGuidelines.find(o=>o.workspaceFolder===n.folderRoot);return{...n,guidelinesOverLimit:(e==null?void 0:e.overLimit)??!1,guidelinesLengthLimit:(e==null?void 0:e.lengthLimit)??2e3}}));V(this,"toggleStatus",t=>{this._contextStore.toggleStatus(t.id),this.notifySubscribers()});V(this,"updateExternalSources",(t,n)=>{this._contextStore.update(t,n,e=>e.id),this.notifySubscribers()});V(this,"clearFiles",()=>{this._contextStore.update([],this.files,t=>t.id),this.notifySubscribers()});V(this,"updateSelections",t=>{const n=this._contextStore.values.filter(Yp),e=t.map(o=>({selection:o,...eu(o)}));this._contextStore.update([],n,o=>o.id),this._contextStore.update(e,[],o=>o.id),this.notifySubscribers()});V(this,"maybeHandleDelete",({editor:t})=>{if(t.state.selection.empty&&t.state.selection.$anchor.pos===1&&this.recentActiveItems.length>0){const n=this.recentActiveItems[0];return this.markInactive(n),!0}return!1});V(this,"markInactive",t=>{this.markItemsInactive([t])});V(this,"markItemsInactive",t=>{t.forEach(n=>{this._contextStore.setStatus(n.id,tn.inactive)}),this.notifySubscribers()});V(this,"markAllInactive",()=>{this.markItemsInactive(this.recentActiveItems)});V(this,"markActive",t=>{this.markItemsActive([t])});V(this,"markItemsActive",t=>{t.forEach(n=>{this._contextStore.setStatus(n.id,tn.active)}),this.notifySubscribers()});V(this,"markAllActive",()=>{this.markItemsActive(this.recentInactiveItems)});V(this,"unpin",t=>{this._contextStore.unpin(t.id),this.notifySubscribers()});V(this,"togglePinned",t=>{this._contextStore.togglePinned(t.id),this.notifySubscribers()});V(this,"notifySubscribers",()=>{this.subscribers.forEach(t=>t(this))});this.clearFiles()}get files(){return this._disableContext?[]:this._contextStore.values.filter(t=>__(t)&&!Zp(t))}get recentFiles(){return this._disableContext?[]:this._contextStore.values.filter(Zp)}get userGuidelinesText(){var t;return((t=this._userGuidelines)==null?void 0:t.contents)??""}get selections(){return this._disableContext?[]:this._contextStore.values.filter(Yp)}get folders(){return this._disableContext?[]:this._contextStore.values.filter(k_)}get sourceFolders(){return this._disableContext?[]:this._contextStore.values.filter(Xp)}get externalSources(){return this._disableContext?[]:this._contextStore.values.filter(C_)}get userGuidelines(){return this._contextStore.values.filter(Qp)}get agentMemories(){return[{...S_,status:this._enableAgentMemories?tn.active:tn.inactive,referenceCount:1}]}get rules(){return this._contextStore.values.filter(t=>Kp(t))}get activeFiles(){return this._disableContext?[]:this.files.filter(t=>t.status===tn.active)}get activeRecentFiles(){return this._disableContext?[]:this.recentFiles.filter(t=>t.status===tn.active)}get activeExternalSources(){return this._disableContext?[]:this.externalSources.filter(t=>t.status===tn.active)}get activeSelections(){return this._disableContext?[]:this.selections.filter(t=>t.status===tn.active)}get activeSourceFolders(){return this._disableContext?[]:this.sourceFolders.filter(t=>t.status===tn.active)}get activeRules(){return this._disableContext?[]:this.rules.filter(t=>t.status===tn.active)}get syncStatus(){return this._syncStatus.status}get syncEnabledState(){return this._syncEnabledState}get syncProgress(){var l;if(this.syncEnabledState===jp.disabled||!this._syncStatus.foldersProgress)return;const t=this._syncStatus.foldersProgress.filter(c=>c.progress!==void 0);if(t.length===0)return;const n=t.reduce((c,u)=>{var h;return c+(((h=u==null?void 0:u.progress)==null?void 0:h.trackedFiles)??0)},0),e=t.reduce((c,u)=>{var h;return c+(((h=u==null?void 0:u.progress)==null?void 0:h.backlogSize)??0)},0),o=Math.max(n,0),s=Math.min(Math.max(e,0),o),i=o-s,a=[];for(const c of t)(l=c==null?void 0:c.progress)!=null&&l.newlyTracked&&a.push(c.folderRoot);return{status:this._syncStatus.status,totalFiles:o,syncedCount:i,backlogSize:s,newlyTrackedFolders:a}}get contextCounts(){return this._contextStore.values.length??0}get chatActiveContext(){return{userSpecifiedFiles:[...this.activeFiles.map(t=>({rootPath:t.file.repoRoot,relPath:t.file.pathName}))],ruleFiles:this.activeRules.map(t=>t.rule),recentFiles:this.activeRecentFiles.map(t=>({rootPath:t.recentFile.repoRoot,relPath:t.recentFile.pathName})),externalSources:this.activeExternalSources.map(t=>t.externalSource),selections:this.activeSelections.map(t=>t.selection),sourceFolders:this.activeSourceFolders.map(t=>({rootPath:t.sourceFolder.folderRoot,relPath:""}))}}get recentItems(){return this._disableContext?this.userGuidelines:[...this._contextStore.values.filter(t=>!(Xp(t)||Qp(t)||T_(t)||Kp(t))),...this.sourceFolders,...this.rules,...this.userGuidelines,...this.agentMemories]}get recentActiveItems(){return this.recentItems.filter(t=>t.status===tn.active)}get recentInactiveItems(){return this.recentItems.filter(t=>t.status===tn.inactive)}get isContextDisabled(){return this._disableContext}}class zk{constructor(){V(this,"_cache",new Wu({max:1e3}));V(this,"peekKey",t=>this._cache.get(t,{updateAgeOnGet:!1}));V(this,"clear",()=>{this._cache.clear()});V(this,"update",(t,n,e)=>{t.forEach(o=>this.addInPlace(o,e)),n.forEach(o=>this.removeInPlace(o,e))});V(this,"removeFromStore",(t,n)=>{const e=n(t);this._cache.delete(e)});V(this,"addInPlace",(t,n)=>{const e=n(t),o=t.referenceCount??1,s=this._cache.get(e),i=t.status??(s==null?void 0:s.status)??tn.active;s?(s.referenceCount+=o,s.status=i,s.pinned=t.pinned??s.pinned,s.showWarning=t.showWarning??s.showWarning,"userGuidelines"in t&&t.userGuidelines&&"userGuidelines"in s&&(s.userGuidelines=t.userGuidelines),"rulesAndGuidelinesState"in t&&t.rulesAndGuidelinesState&&"rulesAndGuidelinesState"in s&&(s.rulesAndGuidelinesState=t.rulesAndGuidelinesState)):this._cache.set(e,{...t,pinned:void 0,referenceCount:o,status:i})});V(this,"removeInPlace",(t,n)=>{const e=n(t),o=this._cache.get(e);o&&(o.referenceCount-=1,o.referenceCount===0&&this._cache.delete(e))});V(this,"setStatus",(t,n)=>{const e=this._cache.get(t);e&&(e.status=n)});V(this,"togglePinned",t=>{const n=this._cache.peek(t);n&&(n.pinned?this.unpin(t):this.pin(t))});V(this,"pin",t=>{const n=this._cache.peek(t);n&&!n.pinned&&(n.pinned=!0,n.referenceCount+=1)});V(this,"unpin",t=>{const n=this._cache.peek(t);n&&n.pinned&&(n.pinned=!1,n.referenceCount-=1,n.referenceCount===0&&this._cache.delete(t))});V(this,"toggleStatus",t=>{const n=this._cache.get(t);n&&(n.status=n.status===tn.active?tn.inactive:tn.active)})}get store(){return Object.fromEntries(this._cache.entries())}get values(){return[...this._cache.values()]}}class Wy{constructor(t){V(this,"_githubTimeoutMs",3e4);V(this,"_currentRepositoryUrl",_e(void 0));this._asyncMsgSender=t}async listUserRepos(){try{const t=await this._asyncMsgSender.send({type:Ee.listGithubReposForAuthenticatedUserRequest},this._githubTimeoutMs);return{repos:t.data.repos,error:t.data.error,isDevDeploy:t.data.isDevDeploy}}catch(t){return console.error("Failed to list user repos:",t),{repos:[],error:`Error: ${t instanceof Error?t.message:String(t)}`}}}async listRepoBranches(t,n){try{const e=await this._asyncMsgSender.send({type:Ee.listGithubRepoBranchesRequest,data:{repo:t,page:n}},this._githubTimeoutMs);return{branches:e.data.branches,hasNextPage:e.data.hasNextPage,nextPage:e.data.nextPage,error:e.data.error,isDevDeploy:e.data.isDevDeploy}}catch(e){return console.error("Failed to list repo branches:",e),{branches:[],hasNextPage:!1,nextPage:0,error:`Error: ${e instanceof Error?e.message:String(e)}`}}}async getGithubRepo(t){try{const n=await this._asyncMsgSender.send({type:Ee.getGithubRepoRequest,data:{repo:t}},this._githubTimeoutMs);return{repo:n.data.repo,error:n.data.error,isDevDeploy:n.data.isDevDeploy}}catch(n){return console.error("Failed to get GitHub repo:",n),{repo:t,error:`Error: ${n instanceof Error?n.message:String(n)}`}}}async getCurrentLocalBranch(){try{return(await this._asyncMsgSender.send({type:Ee.getCurrentLocalBranchRequest},1e4)).data.branch}catch(t){return void console.error("Failed to get current local branch:",t)}}async listBranches(t=""){try{return{branches:(await this._asyncMsgSender.send({type:Ee.getGitBranchesRequest,data:{prefix:t}},1e4)).data.branches}}catch(n){return console.error("Failed to fetch branches:",n),{branches:[]}}}async getWorkspaceDiff(t){try{return(await this._asyncMsgSender.send({type:Ee.getWorkspaceDiffRequest,data:{branchName:t}},1e4)).data.diff}catch(n){return console.error("Failed to get workspace diff:",n),""}}get currentRepositoryUrl(){return this._currentRepositoryUrl}async getRemoteUrl(){const t=ce(this._currentRepositoryUrl);if(t)return{remoteUrl:t};try{const n=await this._asyncMsgSender.send({type:Ee.getRemoteUrlRequest},1e4);return n.data.error?this._currentRepositoryUrl.set(void 0):this._currentRepositoryUrl.set(n.data.remoteUrl),{remoteUrl:n.data.remoteUrl}}catch(n){return console.error("Failed to get remote url:",n),{remoteUrl:"",error:`Error: ${n instanceof Error?n.message:String(n)}`}}}async fetch(){try{await this._asyncMsgSender.send({type:Ee.gitFetchRequest},1e4)}catch(t){console.error("Failed to fetch remote branch:",t)}}async isGitRepository(){try{return(await this._asyncMsgSender.send({type:Ee.isGitRepositoryRequest},1e4)).data.isGitRepository}catch(t){return console.error("Failed to check if is git repository:",t),!1}}async isGithubAuthenticated(){try{return(await this._asyncMsgSender.send({type:Ee.isGithubAuthenticatedRequest},this._githubTimeoutMs)).data.isAuthenticated}catch(t){return console.error("Failed to check GitHub authentication status:",t),!1}}async authenticateGithub(){try{const t=await this._asyncMsgSender.send({type:Ee.authenticateGithubRequest},this._githubTimeoutMs);return{success:t.data.success,message:t.data.message,url:t.data.url}}catch(t){return console.error("Failed to authenticate with GitHub:",t),{success:!1,message:`Error: ${t instanceof Error?t.message:String(t)}`}}}async revokeGithubAccess(){try{const t=await this._asyncMsgSender.send({type:Ee.revokeGithubAccessRequest},1e4);return{success:t.data.success,message:t.data.message}}catch(t){return console.error("Failed to revoke GitHub access:",t),{success:!1,message:`Error: ${t instanceof Error?t.message:String(t)}`}}}}V(Wy,"key","gitReferenceModel");const Nk={doHideStatusBars:!1,doHideSlashActions:!1,doHideAtMentions:!1,doHideNewThreadButton:!1,doHideMultimodalActions:!1,doHideContextBar:!1,doShowTurnSelector:!1},Rk={doHideStatusBars:!0,doHideSlashActions:!0,doHideAtMentions:!0,doHideNewThreadButton:!0,doHideMultimodalActions:!0,doHideContextBar:!0,doShowTurnSelector:!0},Pk="selectedTurnIndex";function Uk(r){let t=Nk;return r!=null&&r.isActive&&(t=Rk,r.isRemoteAgentSshWindow&&(t.doHideAtMentions=!1)),t}var qk=xk,jk=/\s/,Wk=function(r){for(var t=r.length;t--&&jk.test(r.charAt(t)););return t},Hk=/^\s+/,Vk=bk,Gk=wk,Zk=function(r){return r&&r.slice(0,Wk(r)+1).replace(Hk,"")},df=md,Yk=function(r){return typeof r=="symbol"||Gk(r)&&Vk(r)=="[object Symbol]"},Xk=/^[-+]0x[0-9a-f]+$/i,Qk=/^0b[01]+$/i,Kk=/^0o[0-7]+$/i,Jk=parseInt,tC=function(r){if(typeof r=="number")return r;if(Yk(r))return NaN;if(df(r)){var t=typeof r.valueOf=="function"?r.valueOf():r;r=df(t)?t+"":t}if(typeof r!="string")return r===0?r:+r;r=Zk(r);var n=Qk.test(r);return n||Kk.test(r)?Jk(r.slice(2),n?2:8):Xk.test(r)?NaN:+r},eC=md,su=function(){return qk.Date.now()},pf=tC,nC=Math.max,rC=Math.min,oC=function(r,t,n){var e,o,s,i,a,l,c=0,u=!1,h=!1,d=!0;if(typeof r!="function")throw new TypeError("Expected a function");function p(x){var M=e,L=o;return e=o=void 0,c=x,i=r.apply(L,M)}function g(x){var M=x-l;return l===void 0||M>=t||M<0||h&&x-c>=s}function $(){var x=su();if(g(x))return b(x);a=setTimeout($,function(M){var L=t-(M-l);return h?rC(L,s-(M-c)):L}(x))}function b(x){return a=void 0,d&&e?p(x):(e=o=void 0,i)}function y(){var x=su(),M=g(x);if(e=arguments,o=this,l=x,M){if(a===void 0)return function(L){return c=L,a=setTimeout($,t),u?p(L):i}(l);if(h)return clearTimeout(a),a=setTimeout($,t),p(l)}return a===void 0&&(a=setTimeout($,t)),i}return t=pf(t)||0,eC(n)&&(u=!!n.leading,s=(h="maxWait"in n)?nC(pf(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d),y.cancel=function(){a!==void 0&&clearTimeout(a),c=0,e=l=o=a=void 0},y.flush=function(){return a===void 0?i:b(su())},y},sC=oC,iC=md,aC=function(r,t,n){var e=!0,o=!0;if(typeof r!="function")throw new TypeError("Expected a function");return iC(n)&&(e="leading"in n?!!n.leading:e,o="trailing"in n?!!n.trailing:o),sC(r,t,{leading:e,maxWait:t,trailing:o})};const lC=sa(aC);function cC(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},r[0]],o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return{c(){t=Bt("svg"),n=new Oe(!0),this.h()},l(s){t=ze(s,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Ne(t);n=Re(i,!0),i.forEach(v),this.h()},h(){n.a=null,Ht(t,o)},m(s,i){Pe(s,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M160 368c26.5 0 48 21.5 48 48v16l72.5-54.4c8.3-6.2 18.4-9.6 28.8-9.6H448c8.8 0 16-7.2 16-16V64c0-8.8-7.2-16-16-16H64c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16zm48 124-.2.2-5.1 3.8-17.1 12.8c-4.8 3.6-11.3 4.2-16.8 1.5s-8.8-8.2-8.8-14.3v-80H64c-35.3 0-64-28.7-64-64V64C0 28.7 28.7 0 64 0h384c35.3 0 64 28.7 64 64v288c0 35.3-28.7 64-64 64H309.3z"/>',t)},p(s,[i]){Ht(t,o=Zt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&s[0]]))},i:H,o:H,d(s){s&&v(t)}}}function uC(r,t,n){return r.$$set=e=>{n(0,t=lt(lt({},t),jt(e)))},[t=jt(t)]}class hC extends nt{constructor(t){super(),rt(this,t,uC,cC,ot,{})}}function dC(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 640 512"},r[0]],o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return{c(){t=Bt("svg"),n=new Oe(!0),this.h()},l(s){t=ze(s,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Ne(t);n=Re(i,!0),i.forEach(v),this.h()},h(){n.a=null,Ht(t,o)},m(s,i){Pe(s,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M410.8 134.2c-19.3 8.6-42 3.5-55.9-12.5C332.8 96.1 300.3 80 264 80c-66.3 0-120 53.7-120 120v.2c0 20.4-12.8 38.5-32 45.3-37.4 13.2-64 48.8-64 90.5 0 53 43 96 96 96h363.3c.6-.1 1.3-.1 1.9-.2 46.2-2.7 82.8-41 82.8-87.8 0-36-21.6-67.1-52.8-80.7-20.1-8.8-31.6-30-28.1-51.7.6-3.8.9-7.7.9-11.7 0-39.8-32.2-72-72-72-10.5 0-20.4 2.2-29.2 6.2zM512 479.8v.2H144C64.5 480 0 415.5 0 336c0-62.7 40.1-116 96-135.8v-.2c0-92.8 75.2-168 168-168 50.9 0 96.4 22.6 127.3 58.3C406.2 83.7 422.6 80 440 80c66.3 0 120 53.7 120 120 0 6.6-.5 13-1.5 19.3 48 21 81.5 68.9 81.5 124.7 0 72.4-56.6 131.6-128 135.8"/>',t)},p(s,[i]){Ht(t,o=Zt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 640 512"},1&i&&s[0]]))},i:H,o:H,d(s){s&&v(t)}}}function pC(r,t,n){return r.$$set=e=>{n(0,t=lt(lt({},t),jt(e)))},[t=jt(t)]}class fC extends nt{constructor(t){super(),rt(this,t,pC,dC,ot,{})}}function gC(r){const{isConversationAgentic:t,agentExecutionMode:n,isBackgroundAgent:e}=r;return e?{icon:fC,type:"remoteAgent",primaryText:"Remote Agent",bannerText:"Running in the cloud"}:t?(n===on.manual||on.auto,{icon:nk,type:"localAgent",primaryText:"Agent",bannerText:"Running locally"}):{icon:hC,type:"chat",primaryText:"Chat",bannerText:"Running locally"}}class Hy{constructor(t,n,e){V(this,"_prevRemoteAgentWindowOpts",{remoteAgentId:void 0,isRemoteAgentSshWindow:!1});this._chatModel=t,this._agentConversationModel=n,this._remoteAgentsModel=e,this._remoteAgentsModel.subscribe(o=>{o.isRemoteAgentSshWindow===this._prevRemoteAgentWindowOpts.isRemoteAgentSshWindow&&o.remoteAgentSshWindowId===this._prevRemoteAgentWindowOpts.remoteAgentId||(this._prevRemoteAgentWindowOpts={remoteAgentId:o.remoteAgentSshWindowId,isRemoteAgentSshWindow:o.isRemoteAgentSshWindow},this.handleisRemoteAgentSshWindow(o))})}handleisRemoteAgentSshWindow(t){t.isRemoteAgentSshWindow&&this.setToRemoteAgent(t.remoteAgentSshWindowId)}getCurrentModeSelectorMode(){const t=ce(this._agentConversationModel.isCurrConversationAgentic);return this._remoteAgentsModel.isActive?Kc.remoteAgent:t?Kc.agent:Kc.chat}async reportModeSelectorEvent(t,n){try{const e=n||this.getCurrentModeSelectorMode();await this._remoteAgentsModel.reportChatModeEvent(t,e)}catch(e){console.error("Failed to report chat mode event:",e)}}reportModeSelectorOpen(){this.reportModeSelectorEvent(Jc.open)}reportModeSelectorClose(){this.reportModeSelectorEvent(Jc.close)}reportModeSelectorInit(){this.reportModeSelectorEvent(Jc.init)}async toggleChatAgentMode(t=!1){t?await this.toggleChatAgentModeReverse():await this.toggleChatAgentModeForward()}async toggleChatAgentModeForward(){const t=ce(this._agentConversationModel.isCurrConversationAgentic),n=ce(this._chatModel.agentExecutionMode),e=this._remoteAgentsModel.isActive,o=this._chatModel.flags.enableBackgroundAgents,s=this._chatModel.flags.enableAgentAutoMode;e?this.handleSetToChat():t?t&&n===on.manual&&s?await this.handleSetToAgent(on.auto):t&&n===on.auto&&o?(this.handleSetToBackgroundAgent(),this._chatModel.agentExecutionMode.set(on.manual)):this.handleSetToChat():await this.handleSetToAgent(on.manual)}async toggleChatAgentModeReverse(){const t=ce(this._agentConversationModel.isCurrConversationAgentic),n=ce(this._chatModel.agentExecutionMode),e=this._remoteAgentsModel.isActive,o=this._chatModel.flags.enableBackgroundAgents,s=this._chatModel.flags.enableAgentAutoMode;e?await this.handleSetToAgent(on.auto):t?t&&n===on.auto?await this.handleSetToAgent(on.manual):(t&&on.manual,this.handleSetToChat()):o?this.handleSetToBackgroundAgent():s?await this.handleSetToAgent(on.auto):await this.handleSetToAgent(on.manual)}get isRemoteAgentSshWindow(){return this._remoteAgentsModel.isRemoteAgentSshWindow}get remoteAgentSshWindowId(){return this._remoteAgentsModel.remoteAgentSshWindowId}get isRemoteAgentActive(){return this._remoteAgentsModel.isActive}setToChat(){this.isRemoteAgentSshWindow||(this._agentConversationModel?(this._remoteAgentsModel.setIsActive(!1),this._agentConversationModel.setToChat(),this._agentConversationModel.refreshAutoModeAcceptance(),this._chatModel.currentConversationModel.resetTotalCharactersCache(),this._chatModel.setCurrentChatMode(nu.chat)):console.error("AgentConversationModel is not initialized"))}async setToAgent(t){this.isRemoteAgentSshWindow||(this._agentConversationModel?(this._remoteAgentsModel.setIsActive(!1),await this._agentConversationModel.setToAgentic(),this._chatModel.agentExecutionMode.set(t),await this._agentConversationModel.refreshAutoModeAcceptance(),this._chatModel.currentConversationModel.resetTotalCharactersCache(),this._chatModel.setCurrentChatMode(nu.agent)):console.error("AgentConversationModel is not initialized"))}async setToRemoteAgent(t){var n;if(this._agentConversationModel){if(this.isRemoteAgentSshWindow&&(t&&this.remoteAgentSshWindowId&&t!==this.remoteAgentSshWindowId&&(t=this.remoteAgentSshWindowId),!t&&this.remoteAgentSshWindowId&&(t=this.remoteAgentSshWindowId)),this._remoteAgentsModel.setIsActive(!0),t)this._remoteAgentsModel.setCurrentAgent(t);else if(t===null)this._remoteAgentsModel.clearCurrentAgent();else if(!((n=this._remoteAgentsModel)!=null&&n.currentAgent)){const e=this._remoteAgentsModel.agentOverviews.length>0?this._remoteAgentsModel.agentOverviews[0]:void 0;e&&this._remoteAgentsModel.setCurrentAgent(e.remote_agent_id)}this._chatModel.currentConversationModel.resetTotalCharactersCache(),this._chatModel.setCurrentChatMode(nu.remoteAgent)}else console.error("AgentConversationModel is not initialized")}async createOrUseThread(t,n){if(t==="chat")await this._chatModel.setCurrentConversation(void 0,!0,{noopIfSameConversation:!0}),this.setToChat();else if(t==="localAgent"){await this._chatModel.setCurrentConversation(void 0,!0,{noopIfSameConversation:!0});const e=n??ce(this._chatModel.agentExecutionMode)??on.manual;await this.setToAgent(e)}else t==="remoteAgent"&&(this._remoteAgentsModel.setIsActive(!0),this.setToRemoteAgent(null))}async createNewChatThread(){await this.createOrUseThread("chat")}async createNewLocalAgentThread(t){await this.createOrUseThread("localAgent",t)}async createNewRemoteAgentThread(){await this.createOrUseThread("remoteAgent")}async createThreadOfCurrentType(){const t=ce(this._agentConversationModel.isCurrConversationAgentic),n=ce(this._chatModel.agentExecutionMode),e=gC({isConversationAgentic:t,agentExecutionMode:n,isBackgroundAgent:ce(this._remoteAgentsModel).isActive});if(e.type==="remoteAgent")await this.createNewRemoteAgentThread();else if(e.type==="localAgent"){const o=n||on.manual;await this.createNewLocalAgentThread(o)}else e.type,await this.createNewChatThread()}findLatestChatThread(){const t=this._chatModel.orderedConversations().filter(n=>{var e;return!((e=n.extraData)!=null&&e.isAgentConversation)&&n.id!==_n});return t.length>0?t[0].id:void 0}findLatestLocalAgentThread(){const t=this._chatModel.orderedConversations().filter(n=>{var e,o;return((e=n.extraData)==null?void 0:e.isAgentConversation)===!0&&!((o=n.extraData)!=null&&o.isRemoteAgentConversation)&&n.id!==_n});return t.length>0?t[0].id:void 0}findLatestRemoteAgentThread(){if(this._remoteAgentsModel.currentAgent)return this._remoteAgentsModel.currentAgent.remote_agent_id;const t=this._remoteAgentsModel.agentOverviews||[];return t.length>0?t[0].remote_agent_id:void 0}handleSetToChat(){const t=this.findLatestChatThread();t?this.switchToThread("chat",t):this.createNewChatThread()}async handleSetToAgent(t){const n=this.findLatestLocalAgentThread();n?this.switchToThread("localAgent",n,t):this.createNewLocalAgentThread(t)}handleSetToBackgroundAgent(){if(!this._remoteAgentsModel)return void console.error("No remote agents model found");const t=this.findLatestRemoteAgentThread();t?this.switchToThread("remoteAgent",t):this.createNewRemoteAgentThread()}switchToThread(t,n,e=on.manual){return(!this.isRemoteAgentSshWindow||!(t!=="remoteAgent"||this.remoteAgentSshWindowId&&n!==this.remoteAgentSshWindowId))&&(t==="remoteAgent"?n===_n?this.setToRemoteAgent(null):this.setToRemoteAgent(n):this._chatModel.setCurrentConversation(n,!0,{noopIfSameConversation:!0}).then(async()=>{t==="chat"?this.setToChat():await this.setToAgent(e)}),!0)}handleMessageFromExtension(t){const n=t.data;return n.type===Ee.remoteAgentSelectAgentId&&(this.setToRemoteAgent(n.data.agentId),!0)}}V(Hy,"key","chatModeModel");var ee=(r=>(r.NOT_STARTED="NOT_STARTED",r.IN_PROGRESS="IN_PROGRESS",r.CANCELLED="CANCELLED",r.COMPLETE="COMPLETE",r))(ee||{}),xn=(r=>(r.USER="USER",r.AGENT="AGENT",r))(xn||{}),Vy={},kl={},Cl={};let Ma;Object.defineProperty(Cl,"__esModule",{value:!0}),Cl.default=function(){if(!Ma&&(Ma=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ma))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ma(mC)};const mC=new Uint8Array(16);var $o={},Go={},Sl={};Object.defineProperty(Sl,"__esModule",{value:!0}),Sl.default=void 0;Sl.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Object.defineProperty(Go,"__esModule",{value:!0}),Go.default=void 0;var Aa,$C=(Aa=Sl)&&Aa.__esModule?Aa:{default:Aa},yC=function(r){return typeof r=="string"&&$C.default.test(r)};Go.default=yC,Object.defineProperty($o,"__esModule",{value:!0}),$o.default=void 0,$o.unsafeStringify=Gy;var xC=function(r){return r&&r.__esModule?r:{default:r}}(Go);const nn=[];for(let r=0;r<256;++r)nn.push((r+256).toString(16).slice(1));function Gy(r,t=0){return nn[r[t+0]]+nn[r[t+1]]+nn[r[t+2]]+nn[r[t+3]]+"-"+nn[r[t+4]]+nn[r[t+5]]+"-"+nn[r[t+6]]+nn[r[t+7]]+"-"+nn[r[t+8]]+nn[r[t+9]]+"-"+nn[r[t+10]]+nn[r[t+11]]+nn[r[t+12]]+nn[r[t+13]]+nn[r[t+14]]+nn[r[t+15]]}var bC=function(r,t=0){const n=Gy(r,t);if(!(0,xC.default)(n))throw TypeError("Stringified UUID is invalid");return n};$o.default=bC,Object.defineProperty(kl,"__esModule",{value:!0}),kl.default=void 0;var wC=function(r){return r&&r.__esModule?r:{default:r}}(Cl),vC=$o;let ff,iu,au=0,lu=0;var _C=function(r,t,n){let e=t&&n||0;const o=t||new Array(16);let s=(r=r||{}).node||ff,i=r.clockseq!==void 0?r.clockseq:iu;if(s==null||i==null){const d=r.random||(r.rng||wC.default)();s==null&&(s=ff=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),i==null&&(i=iu=16383&(d[6]<<8|d[7]))}let a=r.msecs!==void 0?r.msecs:Date.now(),l=r.nsecs!==void 0?r.nsecs:lu+1;const c=a-au+(l-lu)/1e4;if(c<0&&r.clockseq===void 0&&(i=i+1&16383),(c<0||a>au)&&r.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");au=a,lu=l,iu=i,a+=122192928e5;const u=(1e4*(268435455&a)+l)%4294967296;o[e++]=u>>>24&255,o[e++]=u>>>16&255,o[e++]=u>>>8&255,o[e++]=255&u;const h=a/4294967296*1e4&268435455;o[e++]=h>>>8&255,o[e++]=255&h,o[e++]=h>>>24&15|16,o[e++]=h>>>16&255,o[e++]=i>>>8|128,o[e++]=255&i;for(let d=0;d<6;++d)o[e+d]=s[d];return t||(0,vC.unsafeStringify)(o)};kl.default=_C;var Tl={},fo={},qi={};Object.defineProperty(qi,"__esModule",{value:!0}),qi.default=void 0;var kC=function(r){return r&&r.__esModule?r:{default:r}}(Go),CC=function(r){if(!(0,kC.default)(r))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(r.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(r.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(r.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(r.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};qi.default=CC,Object.defineProperty(fo,"__esModule",{value:!0}),fo.URL=fo.DNS=void 0,fo.default=function(r,t,n){function e(o,s,i,a){var l;if(typeof o=="string"&&(o=function(u){u=unescape(encodeURIComponent(u));const h=[];for(let d=0;d<u.length;++d)h.push(u.charCodeAt(d));return h}(o)),typeof s=="string"&&(s=(0,TC.default)(s)),((l=s)===null||l===void 0?void 0:l.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+o.length);if(c.set(s),c.set(o,s.length),c=n(c),c[6]=15&c[6]|t,c[8]=63&c[8]|128,i){a=a||0;for(let u=0;u<16;++u)i[a+u]=c[u];return i}return(0,SC.unsafeStringify)(c)}try{e.name=r}catch{}return e.DNS=Zy,e.URL=Yy,e};var SC=$o,TC=function(r){return r&&r.__esModule?r:{default:r}}(qi);const Zy="6ba7b810-9dad-11d1-80b4-00c04fd430c8";fo.DNS=Zy;const Yy="6ba7b811-9dad-11d1-80b4-00c04fd430c8";fo.URL=Yy;var Ml={};function gf(r){return 14+(r+64>>>9<<4)+1}function go(r,t){const n=(65535&r)+(65535&t);return(r>>16)+(t>>16)+(n>>16)<<16|65535&n}function wc(r,t,n,e,o,s){return go(function(i,a){return i<<a|i>>>32-a}(go(go(t,r),go(e,s)),o),n)}function pn(r,t,n,e,o,s,i){return wc(t&n|~t&e,r,t,o,s,i)}function fn(r,t,n,e,o,s,i){return wc(t&e|n&~e,r,t,o,s,i)}function gn(r,t,n,e,o,s,i){return wc(t^n^e,r,t,o,s,i)}function mn(r,t,n,e,o,s,i){return wc(n^(t|~e),r,t,o,s,i)}Object.defineProperty(Ml,"__esModule",{value:!0}),Ml.default=void 0;var MC=function(r){if(typeof r=="string"){const t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(let n=0;n<t.length;++n)r[n]=t.charCodeAt(n)}return function(t){const n=[],e=32*t.length,o="0123456789abcdef";for(let s=0;s<e;s+=8){const i=t[s>>5]>>>s%32&255,a=parseInt(o.charAt(i>>>4&15)+o.charAt(15&i),16);n.push(a)}return n}(function(t,n){t[n>>5]|=128<<n%32,t[gf(n)-1]=n;let e=1732584193,o=-271733879,s=-1732584194,i=271733878;for(let a=0;a<t.length;a+=16){const l=e,c=o,u=s,h=i;e=pn(e,o,s,i,t[a],7,-680876936),i=pn(i,e,o,s,t[a+1],12,-389564586),s=pn(s,i,e,o,t[a+2],17,606105819),o=pn(o,s,i,e,t[a+3],22,-1044525330),e=pn(e,o,s,i,t[a+4],7,-176418897),i=pn(i,e,o,s,t[a+5],12,1200080426),s=pn(s,i,e,o,t[a+6],17,-1473231341),o=pn(o,s,i,e,t[a+7],22,-45705983),e=pn(e,o,s,i,t[a+8],7,1770035416),i=pn(i,e,o,s,t[a+9],12,-1958414417),s=pn(s,i,e,o,t[a+10],17,-42063),o=pn(o,s,i,e,t[a+11],22,-1990404162),e=pn(e,o,s,i,t[a+12],7,1804603682),i=pn(i,e,o,s,t[a+13],12,-40341101),s=pn(s,i,e,o,t[a+14],17,-1502002290),o=pn(o,s,i,e,t[a+15],22,1236535329),e=fn(e,o,s,i,t[a+1],5,-165796510),i=fn(i,e,o,s,t[a+6],9,-1069501632),s=fn(s,i,e,o,t[a+11],14,643717713),o=fn(o,s,i,e,t[a],20,-373897302),e=fn(e,o,s,i,t[a+5],5,-701558691),i=fn(i,e,o,s,t[a+10],9,38016083),s=fn(s,i,e,o,t[a+15],14,-660478335),o=fn(o,s,i,e,t[a+4],20,-405537848),e=fn(e,o,s,i,t[a+9],5,568446438),i=fn(i,e,o,s,t[a+14],9,-1019803690),s=fn(s,i,e,o,t[a+3],14,-187363961),o=fn(o,s,i,e,t[a+8],20,1163531501),e=fn(e,o,s,i,t[a+13],5,-1444681467),i=fn(i,e,o,s,t[a+2],9,-51403784),s=fn(s,i,e,o,t[a+7],14,1735328473),o=fn(o,s,i,e,t[a+12],20,-1926607734),e=gn(e,o,s,i,t[a+5],4,-378558),i=gn(i,e,o,s,t[a+8],11,-2022574463),s=gn(s,i,e,o,t[a+11],16,1839030562),o=gn(o,s,i,e,t[a+14],23,-35309556),e=gn(e,o,s,i,t[a+1],4,-1530992060),i=gn(i,e,o,s,t[a+4],11,1272893353),s=gn(s,i,e,o,t[a+7],16,-155497632),o=gn(o,s,i,e,t[a+10],23,-1094730640),e=gn(e,o,s,i,t[a+13],4,681279174),i=gn(i,e,o,s,t[a],11,-358537222),s=gn(s,i,e,o,t[a+3],16,-722521979),o=gn(o,s,i,e,t[a+6],23,76029189),e=gn(e,o,s,i,t[a+9],4,-640364487),i=gn(i,e,o,s,t[a+12],11,-421815835),s=gn(s,i,e,o,t[a+15],16,530742520),o=gn(o,s,i,e,t[a+2],23,-995338651),e=mn(e,o,s,i,t[a],6,-198630844),i=mn(i,e,o,s,t[a+7],10,1126891415),s=mn(s,i,e,o,t[a+14],15,-1416354905),o=mn(o,s,i,e,t[a+5],21,-57434055),e=mn(e,o,s,i,t[a+12],6,1700485571),i=mn(i,e,o,s,t[a+3],10,-1894986606),s=mn(s,i,e,o,t[a+10],15,-1051523),o=mn(o,s,i,e,t[a+1],21,-2054922799),e=mn(e,o,s,i,t[a+8],6,1873313359),i=mn(i,e,o,s,t[a+15],10,-30611744),s=mn(s,i,e,o,t[a+6],15,-1560198380),o=mn(o,s,i,e,t[a+13],21,1309151649),e=mn(e,o,s,i,t[a+4],6,-145523070),i=mn(i,e,o,s,t[a+11],10,-1120210379),s=mn(s,i,e,o,t[a+2],15,718787259),o=mn(o,s,i,e,t[a+9],21,-343485551),e=go(e,l),o=go(o,c),s=go(s,u),i=go(i,h)}return[e,o,s,i]}(function(t){if(t.length===0)return[];const n=8*t.length,e=new Uint32Array(gf(n));for(let o=0;o<n;o+=8)e[o>>5]|=(255&t[o/8])<<o%32;return e}(r),8*r.length))};Ml.default=MC,Object.defineProperty(Tl,"__esModule",{value:!0}),Tl.default=void 0;var AC=Xy(fo),LC=Xy(Ml);function Xy(r){return r&&r.__esModule?r:{default:r}}var EC=(0,AC.default)("v3",48,LC.default);Tl.default=EC;var Al={},Ll={};Object.defineProperty(Ll,"__esModule",{value:!0}),Ll.default=void 0;var BC={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};Ll.default=BC,Object.defineProperty(Al,"__esModule",{value:!0}),Al.default=void 0;var mf=Qy(Ll),IC=Qy(Cl),FC=$o;function Qy(r){return r&&r.__esModule?r:{default:r}}var DC=function(r,t,n){if(mf.default.randomUUID&&!t&&!r)return mf.default.randomUUID();const e=(r=r||{}).random||(r.rng||IC.default)();if(e[6]=15&e[6]|64,e[8]=63&e[8]|128,t){n=n||0;for(let o=0;o<16;++o)t[n+o]=e[o];return t}return(0,FC.unsafeStringify)(e)};Al.default=DC;var El={},Bl={};function OC(r,t,n,e){switch(r){case 0:return t&n^~t&e;case 1:case 3:return t^n^e;case 2:return t&n^t&e^n&e}}function cu(r,t){return r<<t|r>>>32-t}Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.default=void 0;var zC=function(r){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){const i=unescape(encodeURIComponent(r));r=[];for(let a=0;a<i.length;++a)r.push(i.charCodeAt(a))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);const e=r.length/4+2,o=Math.ceil(e/16),s=new Array(o);for(let i=0;i<o;++i){const a=new Uint32Array(16);for(let l=0;l<16;++l)a[l]=r[64*i+4*l]<<24|r[64*i+4*l+1]<<16|r[64*i+4*l+2]<<8|r[64*i+4*l+3];s[i]=a}s[o-1][14]=8*(r.length-1)/Math.pow(2,32),s[o-1][14]=Math.floor(s[o-1][14]),s[o-1][15]=8*(r.length-1)&4294967295;for(let i=0;i<o;++i){const a=new Uint32Array(80);for(let p=0;p<16;++p)a[p]=s[i][p];for(let p=16;p<80;++p)a[p]=cu(a[p-3]^a[p-8]^a[p-14]^a[p-16],1);let l=n[0],c=n[1],u=n[2],h=n[3],d=n[4];for(let p=0;p<80;++p){const g=Math.floor(p/20),$=cu(l,5)+OC(g,c,u,h)+d+t[g]+a[p]>>>0;d=h,h=u,u=cu(c,30)>>>0,c=l,l=$}n[0]=n[0]+l>>>0,n[1]=n[1]+c>>>0,n[2]=n[2]+u>>>0,n[3]=n[3]+h>>>0,n[4]=n[4]+d>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]};Bl.default=zC,Object.defineProperty(El,"__esModule",{value:!0}),El.default=void 0;var NC=Ky(fo),RC=Ky(Bl);function Ky(r){return r&&r.__esModule?r:{default:r}}var PC=(0,NC.default)("v5",80,RC.default);El.default=PC;var Il={};Object.defineProperty(Il,"__esModule",{value:!0}),Il.default=void 0;Il.default="00000000-0000-0000-0000-000000000000";var Fl={};Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.default=void 0;var UC=function(r){return r&&r.__esModule?r:{default:r}}(Go),qC=function(r){if(!(0,UC.default)(r))throw TypeError("Invalid UUID");return parseInt(r.slice(14,15),16)};function Yu(r,t){if(!(r&&t&&r.length&&t.length))throw new Error("Bad alphabet");this.srcAlphabet=r,this.dstAlphabet=t}Fl.default=qC,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return i.default}});var t=u(kl),n=u(Tl),e=u(Al),o=u(El),s=u(Il),i=u(Fl),a=u(Go),l=u($o),c=u(qi);function u(h){return h&&h.__esModule?h:{default:h}}}(Vy),Yu.prototype.convert=function(r){var t,n,e,o={},s=this.srcAlphabet.length,i=this.dstAlphabet.length,a=r.length,l=typeof r=="string"?"":[];if(!this.isValid(r))throw new Error('Number "'+r+'" contains of non-alphabetic digits ('+this.srcAlphabet+")");if(this.srcAlphabet===this.dstAlphabet)return r;for(t=0;t<a;t++)o[t]=this.srcAlphabet.indexOf(r[t]);do{for(n=0,e=0,t=0;t<a;t++)(n=n*s+o[t])>=i?(o[e++]=parseInt(n/i,10),n%=i):e>0&&(o[e++]=0);a=e,l=this.dstAlphabet.slice(n,n+1).concat(l)}while(e!==0);return l},Yu.prototype.isValid=function(r){for(var t=0;t<r.length;++t)if(this.srcAlphabet.indexOf(r[t])===-1)return!1;return!0};var jC=Yu;function ki(r,t){var n=new jC(r,t);return function(e){return n.convert(e)}}ki.BIN="01",ki.OCT="01234567",ki.DEC="0123456789",ki.HEX="0123456789abcdef";var WC=ki;const{v4:uu,validate:HC}=Vy,La=WC,hu={cookieBase90:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!#$%&'()*+-./:<=>?@[]^_`{|}~",flickrBase58:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",uuid25Base36:"0123456789abcdefghijklmnopqrstuvwxyz"},VC={consistentLength:!0};let du;const $f=(r,t,n)=>{const e=t(r.toLowerCase().replace(/-/g,""));return n&&n.consistentLength?e.padStart(n.shortIdLength,n.paddingChar):e},yf=(r,t)=>{const n=t(r).padStart(32,"0").match(/(\w{8})(\w{4})(\w{4})(\w{4})(\w{12})/);return[n[1],n[2],n[3],n[4],n[5]].join("-")};var GC=(()=>{const r=(t,n)=>{const e=t||hu.flickrBase58,o={...VC,...n};if([...new Set(Array.from(e))].length!==e.length)throw new Error("The provided Alphabet has duplicate characters resulting in unreliable results");const s=(i=e.length,Math.ceil(Math.log(2**128)/Math.log(i)));var i;const a={shortIdLength:s,consistentLength:o.consistentLength,paddingChar:e[0]},l=La(La.HEX,e),c=La(e,La.HEX),u=()=>$f(uu(),l,a),h={alphabet:e,fromUUID:d=>$f(d,l,a),maxLength:s,generate:u,new:u,toUUID:d=>yf(d,c),uuid:uu,validate:(d,p=!1)=>{if(!d||typeof d!="string")return!1;const g=o.consistentLength?d.length===s:d.length<=s,$=d.split("").every(b=>e.includes(b));return p===!1?g&&$:g&&$&&HC(yf(d,c))}};return Object.freeze(h),h};return r.constants=hu,r.uuid=uu,r.generate=()=>(du||(du=r(hu.flickrBase58).generate),du()),r})();const ZC=sa(GC),Jy={[ee.NOT_STARTED]:"[ ]",[ee.IN_PROGRESS]:"[/]",[ee.COMPLETE]:"[x]",[ee.CANCELLED]:"[-]"},t2=ZC(void 0,{consistentLength:!0});function e2(r,t){if(r.uuid===t)return r;if(r.subTasksData)for(const n of r.subTasksData){const e=e2(n,t);if(e)return e}}function Dl(r,t={}){const{shallow:n=!1,excludeUuid:e=!1,shortUuid:o=!0}=t;return n2(r,{shallow:n,excludeUuid:e,shortUuid:o}).join(`
`)}function n2(r,t={}){const{shallow:n=!1,excludeUuid:e=!1,shortUuid:o=!0}=t;let s="";e||(s=`UUID:${o?function(l){try{return t2.fromUUID(l)}catch{return l}}(r.uuid):r.uuid} `);const i=`${Jy[r.state]} ${s}NAME:${r.name} DESCRIPTION:${r.description}`;if(n||!r.subTasksData||r.subTasksData.length===0)return[i];const a=(r.subTasksData||[]).map(l=>n2(l,t).map(c=>`-${c}`)).flat();return[i,...a]}function Xu(r,t){var e;const n=(e=r.subTasksData)==null?void 0:e.map(o=>Xu(o,t));return{...r,uuid:t!=null&&t.keepUuid?r.uuid:crypto.randomUUID(),subTasks:(n==null?void 0:n.map(o=>o.uuid))||[],subTasksData:n}}function Qu(r,t={}){if(!r.trim())throw new Error("Empty markdown");const n=r.split(`
`);let e=0;for(const c of n)if(c.trim()&&xf(c)===0)try{Ku(c,t),e++}catch{}if(e===0)throw new Error("No root task found");if(e>1)throw new Error(`Multiple root tasks found (${e}). There can only be one root task per conversation. All other tasks must be subtasks (indented with dashes). Root task format: [ ] UUID:xxx NAME:yyy DESCRIPTION:zzz (no dashes). Subtask format: -[ ] UUID:xxx NAME:yyy DESCRIPTION:zzz (with dashes).`);const o=r.split(`
`);function s(){for(;o.length>0;){const c=o.shift(),u=xf(c);try{return{task:Ku(c,t),level:u}}catch{}}}const i=s();if(!i)throw new Error("No root task found");const a=[i.task];let l;for(;l=s();){const c=a[l.level-1];if(!c)throw new Error(`Invalid markdown: level ${l.level+1} has no parent
Line: ${l.task.name} is missing a parent
Current tasks: 
${Dl(i.task)}`);c.subTasksData&&c.subTasks||(c.subTasks=[],c.subTasksData=[]),c.subTasksData.push(l.task),c.subTasks.push(l.task.uuid),a[l.level]=l.task,a.splice(l.level+1)}return i.task}function xf(r){let t=0,n=0;for(;n<r.length&&(r[n]===" "||r[n]==="	");)r[n]===" "?t+=.5:r[n]==="	"&&(t+=1),n++;for(;n<r.length&&r[n]==="-";)t+=1,n++;return Math.floor(t)}function Ku(r,t={}){const{excludeUuid:n=!1,shortUuid:e=!0}=t;let o=0;for(;o<r.length&&(r[o]===" "||r[o]==="	"||r[o]==="-");)o++;const s=r.substring(o),i=s.match(/^\s*\[([ x\-/?])\]/);if(!i)throw new Error(`Invalid task line: ${r} (missing state)`);const a=i[1],l=Object.entries(Jy).reduce((p,[g,$])=>(p[$.substring(1,2)]=g,p),{})[a]||ee.NOT_STARTED,c=s.substring(i.index+i[0].length).trim();let u,h,d;if(n){const p=/(?:name|NAME):([^]*?)(?=(?:description|DESCRIPTION):)(?:description|DESCRIPTION):(.*)$/i,g=c.match(p);if(!g){const $=/\b(?:name|NAME):/i.test(c),b=/\b(?:description|DESCRIPTION):/i.test(c);throw!$||!b?new Error(`Invalid task line: ${r} (missing required fields)`):c.toLowerCase().indexOf("name:")<c.toLowerCase().indexOf("description:")?new Error(`Invalid task line: ${r} (invalid format)`):new Error(`Invalid task line: ${r} (incorrect field order)`)}if(h=g[1].trim(),d=g[2].trim(),!h)throw new Error(`Invalid task line: ${r} (missing required fields)`);u=crypto.randomUUID()}else{const p=/(?:uuid|UUID):([^]*?)(?=(?:name|NAME):)(?:name|NAME):([^]*?)(?=(?:description|DESCRIPTION):)(?:description|DESCRIPTION):(.*)$/i,g=c.match(p);if(!g){const $=/\b(?:uuid|UUID):/i.test(c),b=/\b(?:name|NAME):/i.test(c),y=/\b(?:description|DESCRIPTION):/i.test(c);if(!$||!b||!y)throw new Error(`Invalid task line: ${r} (missing required fields)`);const x=c.toLowerCase().indexOf("uuid:"),M=c.toLowerCase().indexOf("name:"),L=c.toLowerCase().indexOf("description:");throw x<M&&M<L?new Error(`Invalid task line: ${r} (invalid format)`):new Error(`Invalid task line: ${r} (incorrect field order)`)}if(u=g[1].trim(),h=g[2].trim(),d=g[3].trim(),!u||!h)throw new Error(`Invalid task line: ${r} (missing required fields)`);if(u==="NEW_UUID")u=crypto.randomUUID();else if(e)try{u=function($){try{return t2.toUUID($)}catch{return $}}(u)}catch{}}return{uuid:u,name:h,description:d,state:l,subTasks:[],lastUpdated:Date.now(),lastUpdatedBy:xn.USER}}const Xs=r=>({uuid:crypto.randomUUID(),name:"New Task",description:"New task description",state:ee.NOT_STARTED,subTasks:[],lastUpdated:Date.now(),lastUpdatedBy:xn.USER,...r}),bf=Xs({name:"Task 1.1",description:"This is the first sub task",state:ee.IN_PROGRESS}),wf=Xs({name:"Task 1.2.1",description:"This is a nested sub task, child of Task 1.2",state:ee.NOT_STARTED}),vf=Xs({name:"Task 1.2.2",description:"This is another nested sub task, child of Task 1.2",state:ee.IN_PROGRESS}),_f=Xs({name:"Task 1.2",description:"This is the second sub task",state:ee.COMPLETE,subTasks:[wf.uuid,vf.uuid],subTasksData:[wf,vf]}),kf=Xs({name:"Task 1.3",description:"This is the third sub task",state:ee.CANCELLED}),YC=Dl(Xs({name:"Task 1",description:"This is the first task",state:ee.NOT_STARTED,subTasks:[bf.uuid,_f.uuid,kf.uuid],subTasksData:[bf,_f,kf]}));function r2(r){const t=r.split(`
`);let n=null;const e={created:[],updated:[],deleted:[]};for(const o of t){const s=o.trim();if(s!=="## Created Tasks")if(s!=="## Updated Tasks")if(s!=="## Deleted Tasks"){if(n&&(s.startsWith("[ ]")||s.startsWith("[/]")||s.startsWith("[x]")||s.startsWith("[-]")))try{const i=Ku(s,{excludeUuid:!1,shortUuid:!0});i&&e[n].push(i)}catch{}}else n="deleted";else n="updated";else n="created"}return e}function $d(r){const t=r.match(/Created: (\d+), Updated: (\d+), Deleted: (\d+)/);if(t)return{created:parseInt(t[1],10),updated:parseInt(t[2],10),deleted:parseInt(t[3],10)};const n=r2(o2(r));return{created:n.created.length,updated:n.updated.length,deleted:n.deleted.length}}function o2(r){const t=r.indexOf("# Task Changes");if(t===-1)return"";const n=r.substring(t),e=[`
New and Updated Tasks:`,`
Remember:`,`

---`];let o=n.length;for(const a of e){const l=n.indexOf(a);l!==-1&&l<o&&(o=l)}const s=n.substring(0,o),i=s.indexOf(`
`);return i===-1?"":s.substring(i+1).trim()}function XC(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},r[0]],o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return{c(){t=Bt("svg"),n=new Oe(!0),this.h()},l(s){t=ze(s,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Ne(t);n=Re(i,!0),i.forEach(v),this.h()},h(){n.a=null,Ht(t,o)},m(s,i){Pe(s,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M464 256a208 208 0 1 0-416 0 208 208 0 1 0 416 0M0 256a256 256 0 1 1 512 0 256 256 0 1 1-512 0"/>',t)},p(s,[i]){Ht(t,o=Zt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&s[0]]))},i:H,o:H,d(s){s&&v(t)}}}function QC(r,t,n){return r.$$set=e=>{n(0,t=lt(lt({},t),jt(e)))},[t=jt(t)]}class KC extends nt{constructor(t){super(),rt(this,t,QC,XC,ot,{})}}function JC(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},r[0]],o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return{c(){t=Bt("svg"),n=new Oe(!0),this.h()},l(s){t=ze(s,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Ne(t);n=Re(i,!0),i.forEach(v),this.h()},h(){n.a=null,Ht(t,o)},m(s,i){Pe(s,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M464 256c0-114.9-93.1-208-208-208v416c114.9 0 208-93.1 208-208M0 256a256 256 0 1 1 512 0 256 256 0 1 1-512 0"/>',t)},p(s,[i]){Ht(t,o=Zt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&s[0]]))},i:H,o:H,d(s){s&&v(t)}}}function t4(r,t,n){return r.$$set=e=>{n(0,t=lt(lt({},t),jt(e)))},[t=jt(t)]}class e4 extends nt{constructor(t){super(),rt(this,t,t4,JC,ot,{})}}function Ju(r){switch(r){case ee.IN_PROGRESS:return"info";case ee.COMPLETE:return"success";case ee.CANCELLED:return"error";case ee.NOT_STARTED:default:return"neutral"}}function Cf(r){switch(r){case ee.IN_PROGRESS:return"In Progress";case ee.COMPLETE:return"Completed";case ee.CANCELLED:return"Cancelled";case ee.NOT_STARTED:default:return"Not Started"}}function s2(r){switch(r){case ee.IN_PROGRESS:return e4;case ee.COMPLETE:return dd;case ee.CANCELLED:return rk;case ee.NOT_STARTED:default:return KC}}function Sf(r){if(!r)return;let t,n,e=-1;return function o(s,i){if(i>0&&s.state===ee.IN_PROGRESS&&((!s.subTasksData||s.subTasksData.length===0)&&(t=s),i>=e&&(n=s,e=i)),s.subTasksData&&s.subTasksData.length>0)for(const a of s.subTasksData)o(a,i+1)}(r,0),t||n}function Fs(r){if(!r)return{completed:0,total:0};let t=0,n=0;return function e(o,s=0){if(s>0&&(n++,o.state===ee.COMPLETE&&t++),o.subTasksData&&o.subTasksData.length>0)for(const i of o.subTasksData)e(i,s+1)}(r),{completed:t,total:n}}const mc=class mc extends Event{constructor(t){super(mc.type),this.task=t}};V(mc,"type","task-added");let Ii=mc;const Ui=class Ui{constructor(t,n,e,o){V(this,"_eventTarget",new EventTarget);V(this,"_disposables",[]);V(this,"rootTaskUuid");V(this,"_rootTask",_e(void 0));V(this,"rootTask",tf(this._rootTask));V(this,"activeTask",Do(this._rootTask,t=>Sf(t)));V(this,"taskProgress",Do(this._rootTask,t=>Fs(t)));V(this,"_isImportingExporting",_e(!1));V(this,"isImportingExporting",tf(this._isImportingExporting));V(this,"canShowTaskList");V(this,"refreshTasksThrottled");V(this,"_backlinks",_e({}));V(this,"uuidToTask",Do(this._rootTask,t=>{const n=new Map;if(!t)return n;const e={},o=t?[t]:[];for(;o.length>0;){const s=o.pop();if(n.set(s.uuid,s),s.subTasksData){o.push(...s.subTasksData);for(const i of s.subTasks)e[i]=s.uuid}}return this._backlinks.set(e),n}));this._chatModel=t,this._extensionClient=n,this._conversationModel=e,this._agentConversationModel=o,this.refreshTasksThrottled=lC(()=>{this.refreshTasks().catch(console.error)},Ui.REFRESH_THROTTLE_MS),this.rootTaskUuid=Do(this._conversationModel,s=>s.rootTaskUuid),this._disposables.push({dispose:this.rootTaskUuid.subscribe(async s=>{s&&(this._extensionClient.setCurrentRootTaskUuid(s),await this.refreshTasks())})}),this._disposables.push({dispose:this._conversationModel.onNewConversation(async()=>{await this._maybeInitializeConversationRootTask()})}),this.canShowTaskList=Do([this._chatModel.flags,this._agentConversationModel.isCurrConversationAgentic],([s,i])=>s.enableTaskList&&i),this._maybeInitializeConversationRootTask()}static createReadOnlyStore(t){const n=_e(t),e=new Map;if(t){const o=[t];for(;o.length>0;){const s=o.pop();e.set(s.uuid,s),s.subTasksData&&o.push(...s.subTasksData)}}return{rootTaskUuid:_e(t==null?void 0:t.uuid),rootTask:n,activeTask:_e(Sf(t)),taskProgress:_e(Fs(t)),canShowTaskList:_e(!0),uuidToTask:_e(e),createTask:()=>Promise.resolve(""),updateTask:()=>Promise.resolve(),getHydratedTask:()=>Promise.resolve(void 0),cloneHydratedTask:()=>Promise.resolve(void 0),refreshTasks:()=>Promise.resolve(),refreshTasksThrottled:()=>{},updateTaskListStatuses:()=>Promise.resolve(),syncTaskListWithConversation:()=>Promise.resolve(),deleteTask:()=>Promise.resolve(),getParentTask:()=>{},addNewTaskAfter:()=>Promise.resolve(void 0),saveHydratedTask:()=>Promise.resolve(),runHydratedTask:()=>Promise.resolve(),dispose:()=>{},handleMessageFromExtension:()=>!1,runAllTasks:()=>Promise.resolve(),exportTask:()=>Promise.resolve(),exportTasksToMarkdown:()=>Promise.resolve(),importTasksFromMarkdown:()=>Promise.resolve(),isImportingExporting:_e(!1),onTaskAdded:()=>()=>{}}}dispose(){for(const t of this._disposables)t.dispose();this._disposables=[]}handleMessageFromExtension(t){return!1}async createTask(t,n,e){const o=await this._extensionClient.createTask(t,n,e);await this.refreshTasks();const s=ce(this.rootTask);return s&&this._eventTarget.dispatchEvent(new Ii(s)),o}async updateTask(t,n,e){await this._extensionClient.updateTask(t,n,e),await this.refreshTasks()}async getHydratedTask(t){return this._extensionClient.getHydratedTask(t)}async refreshTasks(){const t=ce(this.rootTaskUuid);if(t){const n=await this._extensionClient.getHydratedTask(t);this._rootTask.set(n)}else this._rootTask.set(void 0)}async syncTaskListWithConversation(t){await this._updateTaskList(t,"Update the task list to reflect the current state of the conversation. Add any new tasks that have been created, update the status of existing tasks, and remove any tasks that are no longer relevant. The updated task list should reflect the current state of the conversation. If the tasks are not detailed enough, please add new tasks to fill in the steps you think are necessary, provide more details by adding more information to the description, or add sub-tasks",["You should add new tasks if any tasks are missing.","You should update the details of tasks if their details are outdated.","You should update the status of tasks if their status is outdated.","You should remove any tasks that are no longer relevant by not including them in the task list."])}async updateTaskListStatuses(t){await this._updateTaskList(t,"Update the status of each task in the list to reflect the current state of the conversation.",["You may update the status of tasks if necessary.","Do not add any new tasks.","Do not remove any tasks.","Do not update the details of any tasks."])}async _maybeInitializeConversationRootTask(){const t=ce(this.rootTaskUuid);if(t)return t;const n=`Root task for conversation ${ce(this._conversationModel).id}`,e=await this._extensionClient.createTask("Current Task List",n);return this._conversationModel.rootTaskUuid=e,this._extensionClient.setCurrentRootTaskUuid(e),e}async _updateTaskList(t,n="",e=[]){try{const o=ce(this._rootTask);if(!o)return;const s=e2(o,t);if(!s)return;const i=Dl(s),a=n+`
Follow these rules when updating the task list:
`+(e==null?void 0:e.join(`
`))+`
Maintain the hierarchical structure, given by the \`Example task list structure\`, with proper indentation. If a task is new, give it a UUID of "NEW_UUID". Always structure each task with [ ] for not started, [/] for in progress, [x] for completed, and [-] for cancelled. 
Example task list structure: 
`+YC+`

Current working task list - This is ACTUAL working task list to use, read from, and modify:
`+i+`

Only output the updated markdown without any additional explanation. Do not include any sentences before or after the markdown, ONLY the markdown itself. Do not use a tool call, just return the markdown in plaintext, without tools, or anything else. Just plaintext markdown.`,{responseText:l}=await this._conversationModel.sendSilentExchange({request_message:a,disableSelectedCodeDetails:!0});console.log("Updating task list for conversation",ce(this._conversationModel).id),console.log({instructions:a,currentTaskListMarkdown:i,enhancedTaskList:l});const c=Qu(l);c.uuid=s.uuid;const{created:u,updated:h,deleted:d}=await this._extensionClient.updateHydratedTask(c,xn.AGENT);console.log("Task tree update results:",{created:u,updated:h,deleted:d})}finally{await this.refreshTasks()}}getParentTask(t){const n=ce(this._backlinks)[t];if(n)return ce(this.uuidToTask).get(n)}async addNewTaskAfter(t,n){const e=this.getParentTask(t);if(!e)return;const o=e.subTasks.indexOf(t);if(o===-1)return;const s=await this.cloneHydratedTask(n);return s?(e.subTasks.splice(o+1,0,s.uuid),await this.saveHydratedTask(e),s):void 0}async deleteTask(t){var e;const n=ce(this._backlinks)[t];if(n){const o=await this.getHydratedTask(n);if(!o)return;o.subTasks=o.subTasks.filter(s=>s!==t),o.subTasksData=(e=o.subTasksData)==null?void 0:e.filter(s=>s.uuid!==t),await this.updateTask(o.uuid,{subTasks:o.subTasks},xn.USER)}else{const o=ce(this._rootTask);if(!o||!o.subTasks.includes(t))return;const s=o.subTasks.filter(i=>i!==t);await this.updateTask(o.uuid,{subTasks:s},xn.USER)}}async saveHydratedTask(t){await this._extensionClient.updateHydratedTask(t,xn.USER),await this.refreshTasks()}async cloneHydratedTask(t){const n=Xu(t),e=await this.createTask(n.name,n.description);if(e)return n.uuid=e,await this._extensionClient.updateHydratedTask(n,xn.USER),await this.getHydratedTask(e)}async runAllTasks(){const t=ce(this._rootTask);t&&this.runHydratedTask(t,{message:"Please run all tasks in the current task list to completion",includeTaskMention:!1})}async runHydratedTask(t,n){const e=this._chatModel.currentConversationId;if(await this._agentConversationModel.interruptAgent(),e!==this._chatModel.currentConversationId)return;if(n!=null&&n.newConversation){const a=await this.cloneHydratedTask(t);if(!a)return;const l=await this.createTask(t.name,t.description);if(await this.saveHydratedTask({uuid:l,name:t.name,description:t.description,state:ee.NOT_STARTED,subTasks:[a.uuid],subTasksData:[a],lastUpdated:Date.now(),lastUpdatedBy:xn.USER}),e!==this._chatModel.currentConversationId)return;await this._chatModel.setCurrentConversation(void 0,!0,{newTaskUuid:l})}const o=[{type:"text",text:(n==null?void 0:n.message)??"Please shift focus to work on the following task, and mark it as completed when you are done: "}],{includeTaskMention:s=!0}=n??{};s&&o.push({type:"mention",attrs:{id:`UUID:${t.uuid} NAME:${t.name} DESCRIPTION:${t.description}`,label:t.name,data:{...t,id:`UUID:${t.uuid} NAME:${t.name} DESCRIPTION:${t.description}`,label:t.name}}});const i={type:"doc",content:[{type:"paragraph",content:o}]};await this._chatModel.currentConversationModel.sendExchange({request_message:"",rich_text_json_repr:i,structured_request_nodes:this._chatModel.currentConversationModel.createStructuredRequestNodes(i),status:an.draft,model_id:this._chatModel.currentConversationModel.selectedModelId??void 0}),await this.refreshTasks()}async exportTask(t,n){try{this._isImportingExporting.set(!0);const e=(n==null?void 0:n.format)||"markdown";let o,s,i;if(e!=="markdown")throw new Error(`Unsupported export format: ${e}`);o=Dl(t,{excludeUuid:!0,shallow:n==null?void 0:n.shallow}),s="md",(n==null?void 0:n.fileName)?i=n.fileName:i=`${((n==null?void 0:n.baseName)||t.name||"Task").replace(/[/:*?"<>|\s]/g,"_")}_${new Date().toISOString().replace(/[:.]/g,"-").slice(0,19)}.${s}`,this._extensionClient.createFile(o,i)}catch(e){console.error("Error exporting task:",e)}finally{this._isImportingExporting.set(!1)}}async exportTasksToMarkdown(){const t=ce(this._rootTask);if(!t)return;const n=ce(this._conversationModel).name||"Tasks";await this.exportTask(t,{baseName:n,format:"markdown"})}async importTasksFromMarkdown(){try{this._isImportingExporting.set(!0);const t=document.createElement("input");t.type="file",t.accept=".md,text/markdown",t.style.display="none";const n=new Promise(o=>{t.onchange=()=>{o(t.files?t.files[0]:null)},t.oncancel=()=>{o(null)}});document.body.appendChild(t),t.click();const e=await n;if(document.body.removeChild(t),e){const o=await e.text();await this._processImportedFileContent(o)}}catch(t){console.error("Error importing tasks from markdown:",t)}finally{this._isImportingExporting.set(!1)}}async _processImportedFileContent(t){try{if(!t.trim())return void console.error("Empty file content");const n=Qu(t,{excludeUuid:!0});if(!n)return void console.error("Failed to parse task tree from markdown");const e=ce(this._rootTask);if(!e)return void console.error("No root task found");const o=(n.subTasksData||[]).map(u=>Xu(u,{keepUuid:!1})),s=e.subTasksData||[],i=e.subTasks||[],a=[...s,...o],l=[...i,...o.map(u=>u.uuid)],c={...e,subTasks:l,subTasksData:a};await this._extensionClient.updateHydratedTask(c,xn.USER),await this.refreshTasks()}catch(n){console.error("Error processing imported file content:",n)}}onTaskAdded(t){const n=e=>t(e);return this._eventTarget.addEventListener(Ii.type,n),()=>{this._eventTarget.removeEventListener(Ii.type,n)}}};V(Ui,"key","currentConversationTaskStore"),V(Ui,"REFRESH_THROTTLE_MS",2e3);let Er=Ui;const n4=navigator.platform.toUpperCase().indexOf("MAC")>=0;var yd=(r=>(r.cmd="",r.shift="",r.plus="+",r.minus="-",r.at="@",r.arrowUp="",r.arrowDown="",r.enter="",r.esc="",r.backspace="",r))(yd||{}),i2=(r=>(r.leftBracket="[",r.rightBracket="]",r.forwardSlash="/",r.backSlash="\\",r.ctrl="Ctrl",r.L="L",r.R="R",r))(i2||{});const a2={cmdOrCtrl:n4?"":"Ctrl"};function r4(r){let t,n;return{c(){t=Bt("svg"),n=Bt("path"),T(n,"fill-rule","evenodd"),T(n,"clip-rule","evenodd"),T(n,"d","M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z"),T(n,"fill","currentColor"),T(t,"width","15"),T(t,"height","15"),T(t,"viewBox","0 0 15 15"),T(t,"fill","none"),T(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){S(e,t,o),O(t,n)},p:H,i:H,o:H,d(e){e&&v(t)}}}new Set(Object.values(i2));class l2 extends nt{constructor(t){super(),rt(this,t,null,r4,ot,{})}}function o4(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},r[0]],o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return{c(){t=Bt("svg"),n=new Oe(!0),this.h()},l(s){t=ze(s,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Ne(t);n=Re(i,!0),i.forEach(v),this.h()},h(){n.a=null,Ht(t,o)},m(s,i){Pe(s,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M345 137c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-119 119L73 103c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l119 119L39 375c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l119-119L311 409c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-119-119z"/>',t)},p(s,[i]){Ht(t,o=Zt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},1&i&&s[0]]))},i:H,o:H,d(s){s&&v(t)}}}function s4(r,t,n){return r.$$set=e=>{n(0,t=lt(lt({},t),jt(e)))},[t=jt(t)]}class i4 extends nt{constructor(t){super(),rt(this,t,s4,o4,ot,{})}}function a4(r){let t,n;return{c(){t=Bt("svg"),n=Bt("path"),T(n,"fill-rule","evenodd"),T(n,"clip-rule","evenodd"),T(n,"d","M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z"),T(n,"fill","currentColor"),T(t,"width","15"),T(t,"height","15"),T(t,"viewBox","0 0 15 15"),T(t,"fill","none"),T(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){S(e,t,o),O(t,n)},p:H,i:H,o:H,d(e){e&&v(t)}}}class th extends nt{constructor(t){super(),rt(this,t,null,a4,ot,{})}}function c2(r){if(!r)return"";const t=r instanceof Date?r:new Date(r),n=new Date().getTime()-t.getTime(),e=Math.floor(n/1e3),o=Math.floor(e/60);return Math.floor(o/60)<24?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString([],{month:"short",day:"numeric"})+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function eh(r){if(!r)return"";const t=r instanceof Date?r:new Date(r);return t.toLocaleDateString([],{year:"numeric",month:"short",day:"numeric"})+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function Tf(r){let t,n,e,o;const s=[c4,l4],i=[];function a(l,c){return l[1]?0:1}return t=a(r),n=i[t]=s[t](r),{c(){n.c(),e=dt()},m(l,c){i[t].m(l,c),S(l,e,c),o=!0},p(l,c){let u=t;t=a(l),t===u?i[t].p(l,c):(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),n=i[t],n?n.p(l,c):(n=i[t]=s[t](l),n.c()),f(n,1),n.m(e.parentNode,e))},i(l){o||(f(n),o=!0)},o(l){m(n),o=!1},d(l){l&&v(e),i[t].d(l)}}}function l4(r){let t,n,e,o;return n=new yt({props:{color:r[3],size:r[4],$$slots:{default:[u4]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class",e="c-timestamp-display "+r[5]+" svelte-88hlq")},m(s,i){S(s,t,i),k(n,t,null),o=!0},p(s,i){const a={};8&i&&(a.color=s[3]),16&i&&(a.size=s[4]),321&i&&(a.$$scope={dirty:i,ctx:s}),n.$set(a),(!o||32&i&&e!==(e="c-timestamp-display "+s[5]+" svelte-88hlq"))&&T(t,"class",e)},i(s){o||(f(n.$$.fragment,s),o=!0)},o(s){m(n.$$.fragment,s),o=!1},d(s){s&&v(t),C(n)}}}function c4(r){let t,n;return t=new he({props:{content:eh(r[0]),side:r[2],$$slots:{default:[d4]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1&o&&(s.content=eh(e[0])),4&o&&(s.side=e[2]),377&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function u4(r){let t,n=r[6](r[0])+"";return{c(){t=W(n)},m(e,o){S(e,t,o)},p(e,o){65&o&&n!==(n=e[6](e[0])+"")&&ht(t,n)},d(e){e&&v(t)}}}function h4(r){let t,n=r[6](r[0])+"";return{c(){t=W(n)},m(e,o){S(e,t,o)},p(e,o){65&o&&n!==(n=e[6](e[0])+"")&&ht(t,n)},d(e){e&&v(t)}}}function d4(r){let t,n,e,o;return n=new yt({props:{color:r[3],size:r[4],$$slots:{default:[h4]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class",e="c-timestamp-display "+r[5]+" svelte-88hlq")},m(s,i){S(s,t,i),k(n,t,null),o=!0},p(s,i){const a={};8&i&&(a.color=s[3]),16&i&&(a.size=s[4]),321&i&&(a.$$scope={dirty:i,ctx:s}),n.$set(a),(!o||32&i&&e!==(e="c-timestamp-display "+s[5]+" svelte-88hlq"))&&T(t,"class",e)},i(s){o||(f(n.$$.fragment,s),o=!0)},o(s){m(n.$$.fragment,s),o=!1},d(s){s&&v(t),C(n)}}}function p4(r){let t,n,e=r[0]&&Tf(r);return{c(){e&&e.c(),t=dt()},m(o,s){e&&e.m(o,s),S(o,t,s),n=!0},p(o,[s]){o[0]?e?(e.p(o,s),1&s&&f(e,1)):(e=Tf(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d(o)}}}const f4={time:c2,timeDateFull:eh,timeDate:function(r){return(r instanceof Date?r:new Date(r)).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})}};function g4(r,t,n){let e,{timestamp:o}=t,{showTooltip:s=!0}=t,{tooltipSide:i="right"}=t,{textColor:a="secondary"}=t,{textSize:l=1}=t,{format:c=c2}=t,{class:u=""}=t;return r.$$set=h=>{"timestamp"in h&&n(0,o=h.timestamp),"showTooltip"in h&&n(1,s=h.showTooltip),"tooltipSide"in h&&n(2,i=h.tooltipSide),"textColor"in h&&n(3,a=h.textColor),"textSize"in h&&n(4,l=h.textSize),"format"in h&&n(7,c=h.format),"class"in h&&n(5,u=h.class)},r.$$.update=()=>{128&r.$$.dirty&&n(6,e=typeof c=="function"?c:f4[c])},[o,s,i,a,l,u,e,c]}class m4 extends nt{constructor(t){super(),rt(this,t,g4,p4,ot,{timestamp:0,showTooltip:1,tooltipSide:2,textColor:3,textSize:4,format:7,class:5})}}function $4(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},r[0]],o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return{c(){t=Bt("svg"),n=new Oe(!0),this.h()},l(s){t=ze(s,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Ne(t);n=Re(i,!0),i.forEach(v),this.h()},h(){n.a=null,Ht(t,o)},m(s,i){Pe(s,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M209 7c-9.4-9.4-24.6-9.4-33.9 0L39 143c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l95-95L168 488c0 13.3 10.7 24 24 24s24-10.7 24-24V81.9l95 95c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9z"/>',t)},p(s,[i]){Ht(t,o=Zt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},1&i&&s[0]]))},i:H,o:H,d(s){s&&v(t)}}}function y4(r,t,n){return r.$$set=e=>{n(0,t=lt(lt({},t),jt(e)))},[t=jt(t)]}class u2 extends nt{constructor(t){super(),rt(this,t,y4,$4,ot,{})}}function x4(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},r[0]],o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return{c(){t=Bt("svg"),n=new Oe(!0),this.h()},l(s){t=ze(s,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Ne(t);n=Re(i,!0),i.forEach(v),this.h()},h(){n.a=null,Ht(t,o)},m(s,i){Pe(s,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M175 505c9.4 9.4 24.6 9.4 33.9 0L345 369c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-95 95L216 24c0-13.3-10.7-24-24-24s-24 10.7-24 24v406.1L73 335c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9z"/>',t)},p(s,[i]){Ht(t,o=Zt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},1&i&&s[0]]))},i:H,o:H,d(s){s&&v(t)}}}function b4(r,t,n){return r.$$set=e=>{n(0,t=lt(lt({},t),jt(e)))},[t=jt(t)]}class w4 extends nt{constructor(t){super(),rt(this,t,b4,x4,ot,{})}}const h2=Symbol("conversationNavigationItems");function yH(r={all:[]}){const t=_e(r);return $c(h2,t),t}function v4(){return Jt(h2)}function Mf(r){let t,n,e,o,s,i,a,l;return n=new y_({props:{size:1,orientation:"vertical"}}),s=new he({props:{side:"top",offset:[0,5],nested:!1,$$slots:{content:[C4],default:[k4]},$$scope:{ctx:r}}}),a=new he({props:{side:"top",offset:[0,5],nested:!1,$$slots:{content:[M4],default:[T4]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),e=J(),o=I("div"),_(s.$$.fragment),i=J(),_(a.$$.fragment),T(o,"class","c-conversation-navigation__buttons svelte-1thjivl"),T(t,"class","c-conversation-navigation svelte-1thjivl")},m(c,u){S(c,t,u),k(n,t,null),O(t,e),O(t,o),k(s,o,null),O(o,i),k(a,o,null),l=!0},p(c,u){const h={};258&u&&(h.$$scope={dirty:u,ctx:c}),s.$set(h);const d={};257&u&&(d.$$scope={dirty:u,ctx:c}),a.$set(d)},i(c){l||(f(n.$$.fragment,c),f(s.$$.fragment,c),f(a.$$.fragment,c),l=!0)},o(c){m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),l=!1},d(c){c&&v(t),C(n),C(s),C(a)}}}function _4(r){let t,n;return t=new u2({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function k4(r){let t,n;return t=new xe({props:{variant:"ghost-block",color:"neutral",size:.5,disabled:!r[1],$$slots:{default:[_4]},$$scope:{ctx:r}}}),t.$on("click",r[4]),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};2&o&&(s.disabled=!e[1]),256&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function C4(r){let t,n,e,o;return e=new My({props:{icons:[`${a2.cmdOrCtrl}`,`${yd.arrowUp}`]}}),{c(){t=I("div"),n=W(`Up
          `),_(e.$$.fragment),T(t,"slot","content"),T(t,"class","c-conversation-navigation__tooltip svelte-1thjivl")},m(s,i){S(s,t,i),O(t,n),k(e,t,null),o=!0},p:H,i(s){o||(f(e.$$.fragment,s),o=!0)},o(s){m(e.$$.fragment,s),o=!1},d(s){s&&v(t),C(e)}}}function S4(r){let t,n;return t=new w4({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function T4(r){let t,n;return t=new xe({props:{variant:"ghost-block",color:"neutral",size:.5,disabled:!r[0],$$slots:{default:[S4]},$$scope:{ctx:r}}}),t.$on("click",r[3]),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1&o&&(s.disabled=!e[0]),256&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function M4(r){let t,n,e,o;return e=new My({props:{icons:[`${a2.cmdOrCtrl}`,`${yd.arrowDown}`]}}),{c(){t=I("div"),n=W(`Down
          `),_(e.$$.fragment),T(t,"slot","content"),T(t,"class","c-conversation-navigation__tooltip svelte-1thjivl")},m(s,i){S(s,t,i),O(t,n),k(e,t,null),o=!0},p:H,i(s){o||(f(e.$$.fragment,s),o=!0)},o(s){m(e.$$.fragment,s),o=!1},d(s){s&&v(t),C(e)}}}function A4(r){let t,n,e,o,s=(r[0]||r[1])&&Mf(r);return{c(){s&&s.c(),t=dt()},m(i,a){s&&s.m(i,a),S(i,t,a),n=!0,e||(o=Kt(window,"keydown",r[5]),e=!0)},p(i,[a]){i[0]||i[1]?s?(s.p(i,a),3&a&&f(s,1)):(s=Mf(i),s.c(),f(s,1),s.m(t.parentNode,t)):s&&(Y(),m(s,1,1,()=>{s=null}),X())},i(i){n||(f(s),n=!0)},o(i){m(s),n=!1},d(i){i&&v(t),s&&s.d(i),e=!1,o()}}}function L4(r,t,n){let e,o,s,i;const a=v4();function l(){o&&s&&s(o.offsetTop)}function c(){e&&s&&s(e.offsetTop)}return Vt(r,a,u=>n(6,i=u)),r.$$.update=()=>{64&r.$$.dirty&&n(1,e=i.prev),64&r.$$.dirty&&n(0,o=i.next),64&r.$$.dirty&&(s=i.scrollTo)},[o,e,a,l,c,function(u){if(u.shiftKey||u.altKey)return;const h=u.metaKey||u.ctrlKey;h&&u.key==="ArrowUp"&&e?(u.preventDefault(),c()):h&&u.key==="ArrowDown"&&o&&(u.preventDefault(),l())},i]}function E4(r){let t,n;const e=r[2].default,o=Ot(e,r,r[1],null);return{c(){t=I("div"),o&&o.c(),T(t,"data-timestamp-id",r[0])},m(s,i){S(s,t,i),o&&o.m(t,null),n=!0},p(s,[i]){o&&o.p&&(!n||2&i)&&zt(o,e,s,s[1],n?Rt(e,s[1],i,null):Nt(s[1]),null),(!n||1&i)&&T(t,"data-timestamp-id",s[0])},i(s){n||(f(o,s),n=!0)},o(s){m(o,s),n=!1},d(s){s&&v(t),o&&o.d(s)}}}function B4(r,t,n){let{$$slots:e={},$$scope:o}=t,{id:s}=t;return r.$$set=i=>{"id"in i&&n(0,s=i.id),"$$scope"in i&&n(1,o=i.$$scope)},[s,o,e]}const I4={Controls:class extends nt{constructor(r){super(),rt(this,r,L4,A4,ot,{})}},Item:class extends nt{constructor(r){super(),rt(this,r,B4,E4,ot,{id:0})}}},F4=r=>({}),Af=r=>({}),D4=r=>({}),Lf=r=>({}),O4=r=>({}),Ef=r=>({}),z4=r=>({}),Bf=r=>({});function N4(r){var i;let t,n,e,o,s;return t=new I4.Item({props:{id:String(r[1]),$$slots:{default:[P4]},$$scope:{ctx:r}}}),o=new D_({props:{color:r[2],size:1,variant:"soft",class:"c-chat-message__content "+((i=r[3])!=null&&i.enableDesignSystemRichTextEditor?"c-chat-message__content--rich-text":""),$$slots:{default:[U4]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment),n=J(),e=I("div"),_(o.$$.fragment),T(e,"class","c-chat-message--user svelte-g6py6x")},m(a,l){k(t,a,l),S(a,n,l),S(a,e,l),k(o,e,null),s=!0},p(a,l){const c={};2&l&&(c.id=String(a[1])),34&l&&(c.$$scope={dirty:l,ctx:a}),t.$set(c);const u={};4&l&&(u.color=a[2]),32&l&&(u.$$scope={dirty:l,ctx:a}),o.$set(u)},i(a){s||(f(t.$$.fragment,a),f(o.$$.fragment,a),s=!0)},o(a){m(t.$$.fragment,a),m(o.$$.fragment,a),s=!1},d(a){a&&(v(n),v(e)),C(t,a),C(o)}}}function R4(r){let t,n;const e=r[4].content,o=Ot(e,r,r[5],Bf);return{c(){t=I("div"),o&&o.c(),T(t,"class","c-chat-message__content svelte-g6py6x")},m(s,i){S(s,t,i),o&&o.m(t,null),n=!0},p(s,i){o&&o.p&&(!n||32&i)&&zt(o,e,s,s[5],n?Rt(e,s[5],i,z4):Nt(s[5]),Bf)},i(s){n||(f(o,s),n=!0)},o(s){m(o,s),n=!1},d(s){s&&v(t),o&&o.d(s)}}}function P4(r){let t,n;return t=new m4({props:{timestamp:r[1]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};2&o&&(s.timestamp=e[1]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function U4(r){let t;const n=r[4].content,e=Ot(n,r,r[5],Ef);return{c(){e&&e.c()},m(o,s){e&&e.m(o,s),t=!0},p(o,s){e&&e.p&&(!t||32&s)&&zt(e,n,o,o[5],t?Rt(n,o[5],s,O4):Nt(o[5]),Ef)},i(o){t||(f(e,o),t=!0)},o(o){m(e,o),t=!1},d(o){e&&e.d(o)}}}function q4(r){let t,n,e,o,s,i;const a=[R4,N4],l=[];function c(g,$){return g[0]?0:1}n=c(r),e=l[n]=a[n](r);const u=r[4].footer,h=Ot(u,r,r[5],Lf),d=r[4].edit,p=Ot(d,r,r[5],Af);return{c(){t=I("div"),e.c(),o=J(),h&&h.c(),s=J(),p&&p.c(),T(t,"class","c-chat-message svelte-g6py6x"),ut(t,"c-chat-message--augment",r[0])},m(g,$){S(g,t,$),l[n].m(t,null),S(g,o,$),h&&h.m(g,$),S(g,s,$),p&&p.m(g,$),i=!0},p(g,[$]){let b=n;n=c(g),n===b?l[n].p(g,$):(Y(),m(l[b],1,1,()=>{l[b]=null}),X(),e=l[n],e?e.p(g,$):(e=l[n]=a[n](g),e.c()),f(e,1),e.m(t,null)),(!i||1&$)&&ut(t,"c-chat-message--augment",g[0]),h&&h.p&&(!i||32&$)&&zt(h,u,g,g[5],i?Rt(u,g[5],$,D4):Nt(g[5]),Lf),p&&p.p&&(!i||32&$)&&zt(p,d,g,g[5],i?Rt(d,g[5],$,F4):Nt(g[5]),Af)},i(g){i||(f(e),f(h,g),f(p,g),i=!0)},o(g){m(e),m(h,g),m(p,g),i=!1},d(g){g&&(v(t),v(o),v(s)),l[n].d(),h&&h.d(g),p&&p.d(g)}}}function j4(r,t,n){let{$$slots:e={},$$scope:o}=t,{isAugment:s=!1}=t,{timestamp:i}=t;const a=Jt("chatModel"),l=a==null?void 0:a.flags;let c;return r.$$set=u=>{"isAugment"in u&&n(0,s=u.isAugment),"timestamp"in u&&n(1,i=u.timestamp),"$$scope"in u&&n(5,o=u.$$scope)},r.$$.update=()=>{1&r.$$.dirty&&n(2,c=s?"accent":"neutral")},[s,i,c,l,e,o]}class W4 extends nt{constructor(t){super(),rt(this,t,j4,q4,ot,{isAugment:0,timestamp:1})}}function If(r,t,n){const e=r.slice();return e[2]=t[n],e}function H4(r){let t,n,e;var o=r[2].icon;return o&&(t=Nn(o,{})),{c(){t&&_(t.$$.fragment),n=J()},m(s,i){t&&k(t,s,i),S(s,n,i),e=!0},p(s,i){if(1&i&&o!==(o=s[2].icon)){if(t){Y();const a=t;m(a.$$.fragment,1,0,()=>{C(a,1)}),X()}o?(t=Nn(o,{}),_(t.$$.fragment),f(t.$$.fragment,1),k(t,n.parentNode,n)):t=null}},i(s){e||(t&&f(t.$$.fragment,s),e=!0)},o(s){t&&m(t.$$.fragment,s),e=!1},d(s){s&&v(n),t&&C(t,s)}}}function Ff(r){let t,n;function e(...o){return r[1](r[2],...o)}return t=new ca({props:{"data-testid":`${r[2].id}-button`,variant:"ghost-block",size:1,defaultColor:"neutral",disabled:r[2].disabled,icon:!0,stickyColor:!1,onClick:e,tooltip:{neutral:r[2].label,success:r[2].successMessage},$$slots:{default:[H4]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(o,s){k(t,o,s),n=!0},p(o,s){r=o;const i={};1&s&&(i["data-testid"]=`${r[2].id}-button`),1&s&&(i.disabled=r[2].disabled),1&s&&(i.onClick=e),1&s&&(i.tooltip={neutral:r[2].label,success:r[2].successMessage}),33&s&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){C(t,o)}}}function V4(r){let t,n,e=Gt(r[0]),o=[];for(let i=0;i<e.length;i+=1)o[i]=Ff(If(r,e,i));const s=i=>m(o[i],1,1,()=>{o[i]=null});return{c(){t=I("div");for(let i=0;i<o.length;i+=1)o[i].c();T(t,"class","c-message-actions svelte-1d46yf0")},m(i,a){S(i,t,a);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(t,null);n=!0},p(i,[a]){if(1&a){let l;for(e=Gt(i[0]),l=0;l<e.length;l+=1){const c=If(i,e,l);o[l]?(o[l].p(c,a),f(o[l],1)):(o[l]=Ff(c),o[l].c(),f(o[l],1),o[l].m(t,null))}for(Y(),l=e.length;l<o.length;l+=1)s(l);X()}},i(i){if(!n){for(let a=0;a<e.length;a+=1)f(o[a]);n=!0}},o(i){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)m(o[a]);n=!1},d(i){i&&v(t),un(o,i)}}}function G4(r,t,n){let{items:e}=t;return r.$$set=o=>{"items"in o&&n(0,e=o.items)},[e,(o,s)=>(o.action(s),o.successMessage?"success":"neutral")]}class Z4 extends nt{constructor(t){super(),rt(this,t,G4,V4,ot,{items:0})}}function Y4(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},r[0]],o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return{c(){t=Bt("svg"),n=new Oe(!0),this.h()},l(s){t=ze(s,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Ne(t);n=Re(i,!0),i.forEach(v),this.h()},h(){n.a=null,Ht(t,o)},m(s,i){Pe(s,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M280 64h40c35.3 0 64 28.7 64 64v320c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128c0-35.3 28.7-64 64-64h49.6C121 27.5 153.3 0 192 0s71 27.5 78.4 64zM64 112c-8.8 0-16 7.2-16 16v320c0 8.8 7.2 16 16 16h256c8.8 0 16-7.2 16-16V128c0-8.8-7.2-16-16-16h-16v24c0 13.3-10.7 24-24 24H104c-13.3 0-24-10.7-24-24v-24zm128-8a24 24 0 1 0 0-48 24 24 0 1 0 0 48"/>',t)},p(s,[i]){Ht(t,o=Zt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},1&i&&s[0]]))},i:H,o:H,d(s){s&&v(t)}}}function X4(r,t,n){return r.$$set=e=>{n(0,t=lt(lt({},t),jt(e)))},[t=jt(t)]}class Q4 extends nt{constructor(t){super(),rt(this,t,X4,Y4,ot,{})}}function K4(r){return r!==void 0}function vc(r,t){const{onVisible:n,onHidden:e,scrollTarget:o,threshold:s=.25,visibilityDuration:i=250,throttleDuration:a=100,ignoreScroll:l=!1}=t;let c=!1,u=null,h=!1,d=null;const p=new IntersectionObserver(y=>{y.forEach(x=>{c=x.isIntersecting,$()})},{threshold:s}),g=()=>{u!==null&&(clearTimeout(u),u=null),d!==null&&(clearTimeout(d),d=null)},$=qu(()=>{c&&!h?u===null&&(u=setTimeout(()=>{n==null||n(),u=null},i)):(e==null||e(),g())},a),b=qu(()=>{l||(h=!0,g(),d=setTimeout(()=>{h=!1,$()},a))},a);return p.observe(r),o.addEventListener("scroll",b,!0),{destroy(){p.disconnect(),o.removeEventListener("scroll",b),u!==null&&clearTimeout(u),d!==null&&clearTimeout(d)}}}function xd(r,t){const n=vc(r,{...t,onVisible:()=>{t.onVisible&&(t.onVisible(),n.destroy())},onHidden:()=>{t.onHidden&&(t.onHidden(),n.destroy())}});return{destroy:()=>{n.destroy()}}}var Ol=(r=>(r.directory="Directory",r.file="File",r.other="Other",r))(Ol||{});function J4(r){let t,n,e;return{c(){t=Bt("svg"),n=Bt("path"),e=Bt("path"),T(n,"fill-rule","evenodd"),T(n,"clip-rule","evenodd"),T(n,"d","M6 2.97184V2.98361H5.91083C5.71113 2.98361 5.5238 3.02427 5.34802 3.10513C5.17461 3.18275 5.02193 3.28942 4.89086 3.42437C4.76421 3.55475 4.66135 3.71034 4.58238 3.89205C4.50833 4.07152 4.47134 4.26019 4.47134 4.45902C4.47134 4.68725 4.4753 4.9134 4.48321 5.13749C4.49125 5.36105 4.49127 5.58262 4.48324 5.80219C4.47914 6.01973 4.46082 6.2333 4.42826 6.44285C4.39513 6.65175 4.33913 6.85263 4.26039 7.04464C4.18091 7.23843 4.07258 7.42254 3.93616 7.59702C3.82345 7.74119 3.68538 7.87538 3.52283 8C3.68538 8.12462 3.82345 8.25881 3.93616 8.40298C4.07258 8.57746 4.18091 8.76157 4.26039 8.95536C4.33921 9.14757 4.39513 9.35024 4.42823 9.56312C4.46084 9.76883 4.47914 9.98246 4.48324 10.2039C4.49127 10.4195 4.49125 10.6411 4.48321 10.8686C4.4753 11.0885 4.47134 11.3127 4.47134 11.541C4.47134 11.744 4.50838 11.9346 4.58223 12.1137C4.66104 12.2911 4.76386 12.4469 4.89086 12.5818C5.02194 12.7126 5.17396 12.8191 5.34763 12.9008C5.52346 12.9777 5.71095 13.0164 5.91083 13.0164H6V13.2V14H5.91083C5.59743 14 5.29407 13.9384 5.00128 13.8153C4.70818 13.692 4.44942 13.5153 4.22578 13.285C4.00311 13.0558 3.83793 12.805 3.73283 12.5323L3.73232 12.531C3.63387 12.265 3.56819 11.9903 3.53535 11.7072L3.53516 11.7055C3.50677 11.4215 3.4987 11.1316 3.51084 10.8357C3.52272 10.5462 3.52866 10.2567 3.52866 9.96721C3.52866 9.76883 3.48986 9.58047 3.41201 9.40108L3.41129 9.39942C3.33659 9.21871 3.23428 9.0637 3.10412 8.93352L3.10221 8.93161C2.97577 8.79762 2.82457 8.69156 2.64742 8.61396L2.64601 8.61334C2.47001 8.53238 2.28465 8.4918 2.08917 8.4918H2V8.4V7.6V7.5082H2.08917C2.28497 7.5082 2.4706 7.46954 2.64672 7.3925C2.82466 7.31055 2.97644 7.20405 3.10317 7.07358C3.23423 6.93866 3.33687 6.78296 3.4116 6.60601L3.412 6.60507C3.48974 6.42594 3.52866 6.23556 3.52866 6.03279C3.52866 5.74329 3.52272 5.45379 3.51084 5.16428C3.4987 4.86844 3.50678 4.5805 3.53519 4.30053L3.53533 4.29917C3.56814 4.01201 3.63382 3.7352 3.73233 3.46898L3.73282 3.46766C3.83792 3.19498 4.00311 2.94422 4.22578 2.71498C4.44942 2.48474 4.70818 2.30798 5.00128 2.18473C5.29407 2.06161 5.59743 2 5.91083 2H6V2.97184Z"),T(n,"fill","currentColor"),T(e,"fill-rule","evenodd"),T(e,"clip-rule","evenodd"),T(e,"d","M10 13.0282L10 13.0164L10.0892 13.0164C10.2889 13.0164 10.4762 12.9757 10.652 12.8949C10.8254 12.8173 10.9781 12.7106 11.1091 12.5756C11.2358 12.4452 11.3386 12.2897 11.4176 12.1079C11.4917 11.9285 11.5287 11.7398 11.5287 11.541C11.5287 11.3128 11.5247 11.0866 11.5168 10.8625C11.5087 10.6389 11.5087 10.4174 11.5168 10.1978C11.5209 9.98027 11.5392 9.7667 11.5717 9.55715C11.6049 9.34825 11.6609 9.14737 11.7396 8.95536C11.8191 8.76157 11.9274 8.57746 12.0638 8.40298C12.1765 8.25881 12.3146 8.12462 12.4772 8C12.3146 7.87538 12.1765 7.74119 12.0638 7.59702C11.9274 7.42254 11.8191 7.23843 11.7396 7.04464C11.6608 6.85243 11.6049 6.64976 11.5718 6.43688C11.5392 6.23117 11.5209 6.01754 11.5168 5.79605C11.5087 5.58049 11.5088 5.35894 11.5168 5.13142C11.5247 4.91145 11.5287 4.68727 11.5287 4.45902C11.5287 4.25596 11.4916 4.0654 11.4178 3.88628C11.339 3.70889 11.2361 3.55305 11.1091 3.41823C10.9781 3.28736 10.826 3.18092 10.6524 3.09917C10.4765 3.0223 10.2891 2.98361 10.0892 2.98361L10 2.98361L10 2.8L10 2L10.0892 2C10.4026 2 10.7059 2.06161 10.9987 2.18473C11.2918 2.30798 11.5506 2.48474 11.7742 2.71498C11.9969 2.94422 12.1621 3.19499 12.2672 3.46766L12.2677 3.46897C12.3661 3.73502 12.4318 4.00971 12.4646 4.29285L12.4648 4.29454C12.4932 4.57848 12.5013 4.86842 12.4892 5.16428C12.4773 5.45379 12.4713 5.74329 12.4713 6.03279C12.4713 6.23117 12.5101 6.41953 12.588 6.59892L12.5887 6.60058C12.6634 6.78129 12.7657 6.9363 12.8959 7.06648L12.8978 7.06839C13.0242 7.20238 13.1754 7.30844 13.3526 7.38604L13.354 7.38666C13.53 7.46762 13.7153 7.5082 13.9108 7.5082L14 7.5082L14 7.6L14 8.4L14 8.4918L13.9108 8.4918C13.715 8.4918 13.5294 8.53046 13.3533 8.6075C13.1753 8.68945 13.0236 8.79595 12.8968 8.92642C12.7658 9.06134 12.6631 9.21704 12.5884 9.39399L12.588 9.39493C12.5103 9.57406 12.4713 9.76444 12.4713 9.96721C12.4713 10.2567 12.4773 10.5462 12.4892 10.8357C12.5013 11.1316 12.4932 11.4195 12.4648 11.6995L12.4647 11.7008C12.4319 11.988 12.3662 12.2648 12.2677 12.531L12.2672 12.5323C12.1621 12.805 11.9969 13.0558 11.7742 13.285C11.5506 13.5153 11.2918 13.692 10.9987 13.8153C10.7059 13.9384 10.4026 14 10.0892 14L10 14L10 13.0282Z"),T(e,"fill","currentColor"),T(t,"width","16"),T(t,"height","16"),T(t,"viewBox","0 0 16 16"),T(t,"fill","none"),T(t,"xmlns","http://www.w3.org/2000/svg")},m(o,s){S(o,t,s),O(t,n),O(t,e)},p:H,i:H,o:H,d(o){o&&v(t)}}}class t5 extends nt{constructor(t){super(),rt(this,t,null,J4,ot,{})}}const e5=r=>({}),Df=r=>({});function n5(r){let t,n,e,o,s;const i=r[3].icon,a=Ot(i,r,r[9],Df),l=r[3].default,c=Ot(l,r,r[9],null);return{c(){t=I("span"),a&&a.c(),n=J(),c&&c.c(),T(t,"class","c-chat-codespan__content svelte-17rwp8y"),T(t,"role","button"),T(t,"tabindex","0")},m(u,h){S(u,t,h),a&&a.m(t,null),O(t,n),c&&c.m(t,null),e=!0,o||(s=[Kt(t,"click",r[4]),Kt(t,"keydown",r[5]),Kt(t,"cut",r[6]),Kt(t,"paste",r[7])],o=!0)},p(u,h){a&&a.p&&(!e||512&h)&&zt(a,i,u,u[9],e?Rt(i,u[9],h,e5):Nt(u[9]),Df),c&&c.p&&(!e||512&h)&&zt(c,l,u,u[9],e?Rt(l,u[9],h,null):Nt(u[9]),null)},i(u){e||(f(a,u),f(c,u),e=!0)},o(u){m(a,u),m(c,u),e=!1},d(u){u&&v(t),a&&a.d(u),c&&c.d(u),o=!1,Qr(s)}}}function r5(r){let t,n,e,o;function s(a){r[8](a)}let i={token:r[1],$$slots:{default:[n5]},$$scope:{ctx:r}};return r[0]!==void 0&&(i.element=r[0]),n=new Ly({props:i}),Pt.push(()=>re(n,"element",s)),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-chat-codespan svelte-17rwp8y"),ut(t,"c-chat-codespan--linkable",r[2])},m(a,l){S(a,t,l),k(n,t,null),o=!0},p(a,[l]){const c={};2&l&&(c.token=a[1]),512&l&&(c.$$scope={dirty:l,ctx:a}),!e&&1&l&&(e=!0,c.element=a[0],oe(()=>e=!1)),n.$set(c),(!o||4&l)&&ut(t,"c-chat-codespan--linkable",a[2])},i(a){o||(f(n.$$.fragment,a),o=!0)},o(a){m(n.$$.fragment,a),o=!1},d(a){a&&v(t),C(n)}}}function o5(r,t,n){let{$$slots:e={},$$scope:o}=t,{token:s}=t,{linkable:i}=t,{element:a}=t;return r.$$set=l=>{"token"in l&&n(1,s=l.token),"linkable"in l&&n(2,i=l.linkable),"element"in l&&n(0,a=l.element),"$$scope"in l&&n(9,o=l.$$scope)},[a,s,i,e,function(l){me.call(this,r,l)},function(l){me.call(this,r,l)},function(l){me.call(this,r,l)},function(l){me.call(this,r,l)},function(l){a=l,n(0,a)},o]}class d2 extends nt{constructor(t){super(),rt(this,t,o5,r5,ot,{token:1,linkable:2,element:0})}}function s5(r){let t,n,e;function o(i){r[30](i)}let s={token:r[0],$$slots:{default:[l5]},$$scope:{ctx:r}};return r[3]!==void 0&&(s.element=r[3]),t=new Ly({props:s}),Pt.push(()=>re(t,"element",o)),{c(){_(t.$$.fragment)},m(i,a){k(t,i,a),e=!0},p(i,a){const l={};1&a[0]&&(l.token=i[0]),16&a[0]|32&a[1]&&(l.$$scope={dirty:a,ctx:i}),!n&&8&a[0]&&(n=!0,l.element=i[3],oe(()=>n=!1)),t.$set(l)},i(i){e||(f(t.$$.fragment,i),e=!0)},o(i){m(t.$$.fragment,i),e=!1},d(i){C(t,i)}}}function i5(r){let t,n,e;function o(a){r[26](a)}function s(){return r[28](r[35])}let i={linkable:r[6],token:r[0],$$slots:{icon:[u5],default:[c5]},$$scope:{ctx:r}};return r[3]!==void 0&&(i.element=r[3]),t=new d2({props:i}),Pt.push(()=>re(t,"element",o)),t.$on("click",function(){return r[27](r[35])}),t.$on("keydown",function(){Be(en("Enter",s))&&en("Enter",s).apply(this,arguments)}),t.$on("cut",r[29]),t.$on("paste",$5),{c(){_(t.$$.fragment)},m(a,l){k(t,a,l),e=!0},p(a,l){r=a;const c={};64&l[0]&&(c.linkable=r[6]),1&l[0]&&(c.token=r[0]),16&l[0]|32&l[1]&&(c.$$scope={dirty:l,ctx:r}),!n&&8&l[0]&&(n=!0,c.element=r[3],oe(()=>n=!1)),t.$set(c)},i(a){e||(f(t.$$.fragment,a),e=!0)},o(a){m(t.$$.fragment,a),e=!1},d(a){C(t,a)}}}function a5(r){let t,n,e;function o(a){r[22](a)}function s(){return r[24](r[34])}let i={linkable:r[6],token:r[0],$$slots:{icon:[f5],default:[h5]},$$scope:{ctx:r}};return r[3]!==void 0&&(i.element=r[3]),t=new d2({props:i}),Pt.push(()=>re(t,"element",o)),t.$on("click",function(){return r[23](r[34])}),t.$on("keydown",function(){Be(en("Enter",s))&&en("Enter",s).apply(this,arguments)}),t.$on("cut",r[25]),t.$on("paste",m5),{c(){_(t.$$.fragment)},m(a,l){k(t,a,l),e=!0},p(a,l){r=a;const c={};64&l[0]&&(c.linkable=r[6]),1&l[0]&&(c.token=r[0]),18&l[0]|32&l[1]&&(c.$$scope={dirty:l,ctx:r}),!n&&8&l[0]&&(n=!0,c.element=r[3],oe(()=>n=!1)),t.$set(c)},i(a){e||(f(t.$$.fragment,a),e=!0)},o(a){m(t.$$.fragment,a),e=!1},d(a){C(t,a)}}}function l5(r){let t;return{c(){t=W(r[4])},m(n,e){S(n,t,e)},p(n,e){16&e[0]&&ht(t,n[4])},d(n){n&&v(t)}}}function c5(r){let t;return{c(){t=W(r[4])},m(n,e){S(n,t,e)},p(n,e){16&e[0]&&ht(t,n[4])},d(n){n&&v(t)}}}function u5(r){let t,n;return t=new t5({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function h5(r){let t;return{c(){t=W(r[4])},m(n,e){S(n,t,e)},p(n,e){16&e[0]&&ht(t,n[4])},d(n){n&&v(t)}}}function d5(r){let t,n;return t=new N_({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function p5(r){let t,n;return t=new Ay({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function f5(r){let t,n,e,o;const s=[p5,d5],i=[];function a(l,c){return l[34].fileType===Ol.file?0:l[34].fileType===Ol.directory?1:-1}return~(t=a(r))&&(n=i[t]=s[t](r)),{c(){n&&n.c(),e=dt()},m(l,c){~t&&i[t].m(l,c),S(l,e,c),o=!0},p(l,c){let u=t;t=a(l),t!==u&&(n&&(Y(),m(i[u],1,1,()=>{i[u]=null}),X()),~t?(n=i[t],n||(n=i[t]=s[t](l),n.c()),f(n,1),n.m(e.parentNode,e)):n=null)},i(l){o||(f(n),o=!0)},o(l){m(n),o=!1},d(l){l&&v(e),~t&&i[t].d(l)}}}function g5(r){let t,n,e,o;const s=[a5,i5,s5],i=[];function a(c,u){return c[1]!==void 0?0:c[2]!==void 0&&c[2].length>0?1:2}function l(c,u){return u===0?function(h){const d=h.slice(),p=d[1];return d[34]=p,d}(c):u===1?function(h){const d=h.slice(),p=d[2][0];return d[35]=p,d}(c):c}return t=a(r),n=i[t]=s[t](l(r,t)),{c(){n.c(),e=dt()},m(c,u){i[t].m(c,u),S(c,e,u),o=!0},p(c,u){let h=t;t=a(c),t===h?i[t].p(l(c,t),u):(Y(),m(i[h],1,1,()=>{i[h]=null}),X(),n=i[t],n?n.p(l(c,t),u):(n=i[t]=s[t](l(c,t)),n.c()),f(n,1),n.m(e.parentNode,e))},i(c){o||(f(n),o=!0)},o(c){m(n),o=!1},d(c){c&&v(e),i[t].d(c)}}}const m5=r=>r.preventDefault(),$5=r=>r.preventDefault();function y5(r,t,n){let e,o,s,i,a,l,c,u,h,d,p=H;r.$$.on_destroy.push(()=>p());let{token:g}=t;const $=Jt("chatModel");Vt(r,$,N=>n(20,h=N));const b=Jt("requestId");Vt(r,b,N=>n(21,d=N)),$||console.warn("ChatModel not found in context -- should you be using this component?");const y=N=>{e&&($==null||$.extensionClient.reportWebviewClientEvent(Gr.chatCodespanGoToFile),$==null||$.extensionClient.openFile(N))},x=N=>{$==null||$.extensionClient.reportWebviewClientEvent(Gr.chatCodespanGoToSymbol),$==null||$.extensionClient.openFile(N)};let M=new Set;const L=qu(N=>{const R=new Set(N.map(j=>j.pathName));(R.size!==M.size||new Set([...M,...R]).size!==M.size)&&n(12,M=R)},1e3,{leading:!1,trailing:!0});let A,B;async function E(N){const R=await($==null?void 0:$.extensionClient.resolveSymbols(N,{files:l}))??[];return N===c&&n(2,B=R),R}const F=ad(async N=>{N.length<=1||l.length===0||(async function(R){var Q,z;const j=await((z=$==null?void 0:(Q=$.extensionClient).resolvePath)==null?void 0:z.call(Q,{rootPath:"",relPath:R},{files:l}));R===c&&n(1,A=j)}(N),E(N))},500,{leading:!1,trailing:!0});let U,tt,q=!1;return Gs(()=>{tt==null||tt.destroy()}),r.$$set=N=>{"token"in N&&n(0,g=N.token)},r.$$.update=()=>{var N,R;6&r.$$.dirty[0]&&n(6,e=A!==void 0&&(A.fileType===void 0||A.fileType===Ol.file)||B!==void 0&&B.length>0),2097152&r.$$.dirty[0]&&n(18,o=d),1048576&r.$$.dirty[0]&&(n(5,s=h==null?void 0:h.currentConversationModel),p(),p=An(s,j=>n(19,u=j))),786432&r.$$.dirty[0]&&n(17,i=(N=u==null?void 0:u.exchangeWithRequestId)==null?void 0:N.call(u,o)),131072&r.$$.dirty[0]&&n(16,a=((R=i==null?void 0:i.workspace_file_chunks)==null?void 0:R.map(j=>j.file))??[]),65536&r.$$.dirty[0]&&n(15,l=a.filter(K4).map(j=>({repoRoot:j.repoRoot,pathName:j.pathName}))),32768&r.$$.dirty[0]&&L(l),1&r.$$.dirty[0]&&n(4,c=g.raw.slice(1,g.raw.length-1)),8200&r.$$.dirty[0]&&U&&(tt==null||tt.destroy(),n(13,tt=vc(U,{onVisible:()=>n(14,q=!0),scrollTarget:document.body}))),20496&r.$$.dirty[0]&&q&&M&&F(c)},[g,A,B,U,c,s,e,$,b,y,x,E,M,tt,q,l,a,i,o,u,h,d,function(N){U=N,n(3,U)},N=>y(N),N=>y(N),()=>navigator.clipboard.writeText(c),function(N){U=N,n(3,U)},async N=>{const R=await E(c),j=R&&R.length>0?R[0]:N;x(j.file)},N=>x(N.file),()=>navigator.clipboard.writeText(c),function(N){U=N,n(3,U)}]}class x5 extends nt{constructor(t){super(),rt(this,t,y5,g5,ot,{token:0},null,[-1,-1])}}function b5(r){var s,i,a;let t,n,e,o={ctx:r,current:null,token:null,hasCatch:!0,pending:M5,then:C5,catch:k5,value:17,blocks:[,,,]};return Is(n=(a=(s=r[1])==null?void 0:(i=s.extensionClient).resolvePath)==null?void 0:a.call(i,{rootPath:"",relPath:r[0].href}),o),{c(){t=dt(),o.block.c()},m(l,c){S(l,t,c),o.block.m(l,o.anchor=c),o.mount=()=>t.parentNode,o.anchor=t,e=!0},p(l,c){var u,h,d;r=l,o.ctx=r,1&c&&n!==(n=(d=(u=r[1])==null?void 0:(h=u.extensionClient).resolvePath)==null?void 0:d.call(h,{rootPath:"",relPath:r[0].href}))&&Is(n,o)||cd(o,r,c)},i(l){e||(f(o.block),e=!0)},o(l){for(let c=0;c<3;c+=1){const u=o.blocks[c];m(u)}e=!1},d(l){l&&v(t),o.block.d(l),o.token=null,o=null}}}function w5(r){let t,n,e,o,s;const i=r[7].default,a=Ot(i,r,r[6],null),l=a||function(c){let u;return{c(){u=W(c[5])},m(h,d){S(h,u,d)},p:H,d(h){h&&v(u)}}}(r);return{c(){t=I("span"),n=I("span"),l&&l.c(),T(n,"class","markdown-base-link svelte-k2e49v"),T(t,"class","markdown-active-link svelte-k2e49v"),T(t,"role","button"),T(t,"tabindex","0")},m(c,u){S(c,t,u),O(t,n),l&&l.m(n,null),e=!0,o||(s=[Kt(t,"click",r[11]),Kt(t,"keydown",function(){Be(en("Enter",r[12]))&&en("Enter",r[12]).apply(this,arguments)}),Kt(t,"cut",r[13]),Kt(t,"paste",E5)],o=!0)},p(c,u){r=c,a&&a.p&&(!e||64&u)&&zt(a,i,r,r[6],e?Rt(i,r[6],u,null):Nt(r[6]),null)},i(c){e||(f(l,c),e=!0)},o(c){m(l,c),e=!1},d(c){c&&v(t),l&&l.d(c),o=!1,Qr(s)}}}function v5(r){let t,n,e,o,s;const i=r[7].default,a=Ot(i,r,r[6],null),l=a||function(c){let u;return{c(){u=W(c[5])},m(h,d){S(h,u,d)},p:H,d(h){h&&v(u)}}}(r);return{c(){t=I("span"),n=I("span"),l&&l.c(),T(n,"class","markdown-base-link svelte-k2e49v"),T(t,"class","markdown-active-link svelte-k2e49v"),T(t,"role","button"),T(t,"tabindex","0")},m(c,u){S(c,t,u),O(t,n),l&&l.m(n,null),e=!0,o||(s=[Kt(t,"click",r[8]),Kt(t,"keydown",function(){Be(en("Enter",r[9]))&&en("Enter",r[9]).apply(this,arguments)}),Kt(t,"cut",r[10]),Kt(t,"paste",L5)],o=!0)},p(c,u){r=c,a&&a.p&&(!e||64&u)&&zt(a,i,r,r[6],e?Rt(i,r[6],u,null):Nt(r[6]),null)},i(c){e||(f(l,c),e=!0)},o(c){m(l,c),e=!1},d(c){c&&v(t),l&&l.d(c),o=!1,Qr(s)}}}function _5(r){let t,n,e,o,s;const i=r[7].default,a=Ot(i,r,r[6],null),l=a||function(c){let u;return{c(){u=W(c[5])},m(h,d){S(h,u,d)},p:H,d(h){h&&v(u)}}}(r);return{c(){t=I("a"),n=I("span"),l&&l.c(),T(n,"class","markdown-base-link svelte-k2e49v"),T(t,"class","markdown-active-link svelte-k2e49v"),T(t,"href",e=r[0].href),T(t,"title",o=r[0].title)},m(c,u){S(c,t,u),O(t,n),l&&l.m(n,null),s=!0},p(c,u){a&&a.p&&(!s||64&u)&&zt(a,i,c,c[6],s?Rt(i,c[6],u,null):Nt(c[6]),null),(!s||1&u&&e!==(e=c[0].href))&&T(t,"href",e),(!s||1&u&&o!==(o=c[0].title))&&T(t,"title",o)},i(c){s||(f(l,c),s=!0)},o(c){m(l,c),s=!1},d(c){c&&v(t),l&&l.d(c)}}}function k5(r){let t,n;const e=r[7].default,o=Ot(e,r,r[6],null),s=o||function(i){let a;return{c(){a=W(i[5])},m(l,c){S(l,a,c)},p:H,d(l){l&&v(a)}}}(r);return{c(){t=I("span"),s&&s.c(),T(t,"class","markdown-base-link svelte-k2e49v")},m(i,a){S(i,t,a),s&&s.m(t,null),n=!0},p(i,a){o&&o.p&&(!n||64&a)&&zt(o,e,i,i[6],n?Rt(e,i[6],a,null):Nt(i[6]),null)},i(i){n||(f(s,i),n=!0)},o(i){m(s,i),n=!1},d(i){i&&v(t),s&&s.d(i)}}}function C5(r){let t,n,e,o;const s=[T5,S5],i=[];function a(l,c){return l[17]?0:1}return t=a(r),n=i[t]=s[t](r),{c(){n.c(),e=dt()},m(l,c){i[t].m(l,c),S(l,e,c),o=!0},p(l,c){let u=t;t=a(l),t===u?i[t].p(l,c):(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),n=i[t],n?n.p(l,c):(n=i[t]=s[t](l),n.c()),f(n,1),n.m(e.parentNode,e))},i(l){o||(f(n),o=!0)},o(l){m(n),o=!1},d(l){l&&v(e),i[t].d(l)}}}function S5(r){let t,n;const e=r[7].default,o=Ot(e,r,r[6],null),s=o||function(i){let a;return{c(){a=W(i[5])},m(l,c){S(l,a,c)},p:H,d(l){l&&v(a)}}}(r);return{c(){t=I("span"),s&&s.c(),T(t,"class","markdown-base-link svelte-k2e49v")},m(i,a){S(i,t,a),s&&s.m(t,null),n=!0},p(i,a){o&&o.p&&(!n||64&a)&&zt(o,e,i,i[6],n?Rt(e,i[6],a,null):Nt(i[6]),null)},i(i){n||(f(s,i),n=!0)},o(i){m(s,i),n=!1},d(i){i&&v(t),s&&s.d(i)}}}function T5(r){let t,n,e,o,s;const i=r[7].default,a=Ot(i,r,r[6],null),l=a||function(h){let d;return{c(){d=W(h[5])},m(p,g){S(p,d,g)},p:H,d(p){p&&v(d)}}}(r);function c(){return r[14](r[17])}function u(){return r[15](r[17])}return{c(){t=I("span"),n=I("span"),l&&l.c(),T(n,"class","markdown-base-link svelte-k2e49v"),T(t,"class","markdown-active-link svelte-k2e49v"),T(t,"role","button"),T(t,"tabindex","0")},m(h,d){S(h,t,d),O(t,n),l&&l.m(n,null),e=!0,o||(s=[Kt(t,"click",c),Kt(t,"keydown",function(){Be(en("Enter",u))&&en("Enter",u).apply(this,arguments)}),Kt(t,"cut",r[16]),Kt(t,"paste",B5)],o=!0)},p(h,d){r=h,a&&a.p&&(!e||64&d)&&zt(a,i,r,r[6],e?Rt(i,r[6],d,null):Nt(r[6]),null)},i(h){e||(f(l,h),e=!0)},o(h){m(l,h),e=!1},d(h){h&&v(t),l&&l.d(h),o=!1,Qr(s)}}}function M5(r){let t,n;const e=r[7].default,o=Ot(e,r,r[6],null),s=o||function(i){let a;return{c(){a=W(i[5])},m(l,c){S(l,a,c)},p:H,d(l){l&&v(a)}}}(r);return{c(){t=I("span"),s&&s.c(),T(t,"class","markdown-base-link svelte-k2e49v")},m(i,a){S(i,t,a),s&&s.m(t,null),n=!0},p(i,a){o&&o.p&&(!n||64&a)&&zt(o,e,i,i[6],n?Rt(e,i[6],a,null):Nt(i[6]),null)},i(i){n||(f(s,i),n=!0)},o(i){m(s,i),n=!1},d(i){i&&v(t),s&&s.d(i)}}}function A5(r){let t,n,e,o,s,i,a;const l=[_5,v5,w5,b5],c=[];function u(h,d){return 1&d&&(t=null),1&d&&(n=null),1&d&&(e=null),t==null&&(t=!!/^https?:\/\//.test(h[0].href)),t?0:(n==null&&(n=!!/^augment:\/\//.test(h[0].href)),n?1:(e==null&&(e=!!/^command:/.test(h[0].href)),e?2:3))}return o=u(r,-1),s=c[o]=l[o](r),{c(){s.c(),i=dt()},m(h,d){c[o].m(h,d),S(h,i,d),a=!0},p(h,[d]){let p=o;o=u(h,d),o===p?c[o].p(h,d):(Y(),m(c[p],1,1,()=>{c[p]=null}),X(),s=c[o],s?s.p(h,d):(s=c[o]=l[o](h),s.c()),f(s,1),s.m(i.parentNode,i))},i(h){a||(f(s),a=!0)},o(h){m(s),a=!1},d(h){h&&v(i),c[o].d(h)}}}const L5=r=>r.preventDefault(),E5=r=>r.preventDefault(),B5=r=>r.preventDefault();function I5(r,t,n){let{$$slots:e={},$$scope:o}=t,{token:s}=t;const i=Jt("chatModel");i||console.warn("ChatModel not found in context -- should you be using this component?");const a=h=>{i==null||i.extensionClient.openFile(h)},l=h=>{xl.postMessage({type:Ee.augmentLink,data:h})},c=h=>{xl.postMessage({type:Ee.executeCommand,data:h})};let u=s.text.replace(/`/g,"");return r.$$set=h=>{"token"in h&&n(0,s=h.token),"$$scope"in h&&n(6,o=h.$$scope)},[s,i,a,l,c,u,o,e,()=>l(s.href),()=>l(s.href),()=>navigator.clipboard.writeText(u),()=>c(s.href.substring(8)),()=>c(s.href.substring(8)),()=>navigator.clipboard.writeText(u),h=>a(h),h=>a(h),()=>navigator.clipboard.writeText(u)]}class F5 extends nt{constructor(t){super(),rt(this,t,I5,A5,ot,{token:0})}}const bd={lineNumbers:"off",wrappingIndent:"same",contextmenu:!1,wordBasedSuggestions:"off",renderLineHighlight:"none",occurrencesHighlight:"off",selectionHighlight:!1,codeLens:!1,links:!1,hover:{enabled:!1},hideCursorInOverviewRuler:!0,renderWhitespace:"none",renderFinalNewline:"on",lineHeight:16.5,fontSize:11};function p2(r){return r?[".ipynb",".rmd",".qmd",".jl",".zmd"].some(t=>r.toLowerCase().endsWith(t)):!1}function f2(r){navigator.clipboard.writeText(r)}function g2(r,t,n){t.createFile(r,n||void 0),t.reportWebviewClientEvent(Gr.chatCodeblockCreate)}var le=(r=>(r[r.copy=0]="copy",r[r.insert=1]="insert",r[r.smartPaste=2]="smartPaste",r[r.goTo=3]="goTo",r[r.directApply=4]="directApply",r))(le||{});function m2(r,t){return{codeblockActionType:le.copy,title:"Copy to clipboard",onClick:function(){const n=r();n&&f2(n)},onSuccessMessage:"Copied",iconName:"file_copy",buttonText:"Copy",primary:!!t}}function $2(r,t,n,e){return{codeblockActionType:le.insert,title:t!=null&&t.relPath?`Create new file at ${t.relPath}`:"Create new file",onClick:function(){const o=r();o&&(n!=null&&n.extensionClient)&&g2(o,n.extensionClient,t==null?void 0:t.relPath)},onSuccessMessage:"Creating new file...",iconName:"new_window",buttonText:"Create",primary:!!e}}function y2(r,t,n,e){return{codeblockActionType:le.goTo,title:`Go to ${n==null?void 0:n.relPath}`,onClick:function(){n!=null&&n.relPath&&(e==null||e.extensionClient.reportWebviewClientEvent(Gr.chatCodeblockGoToFile),e==null||e.extensionClient.openFile({repoRoot:"",pathName:(n==null?void 0:n.relPath)??"",snippet:t?r:void 0}))},onSuccessMessage:"Opening file...",iconName:"open_in_new",buttonText:"Go to",primary:!1}}function x2(r,t,n,e,o,s,i,a,l,c){var x;const u=!!(t!=null&&t.relPath),h=!!(t!=null&&t.mode)&&(t==null?void 0:t.mode)==="EDIT";(x=r==null?void 0:r.specialContextInputModel)==null||x.recentFiles.length;function d(){return!!(r!=null&&r.flags.enableSmartPaste)&&!!o&&!!(u&&h&&s)}function p(){if(!d()||!h)return!1;switch(r==null?void 0:r.flags.smartPastePrecomputeMode){case vi.off:return!1;case vi.visible:return i;case vi.visibleHover:return i&&a;case vi.on:return!0;default:return!1}}function g(M){M.dryRun&&!p()||n.text&&e&&(r==null||r.smartPaste(e,n.text,t==null?void 0:t.relPath,{...M,requireFileConfirmation:!u}))}const $=M=>({...M,iconName:"check",onMouseDown:L=>L.preventDefault(),onMouseOver:()=>g({dryRun:!0}),onFocus:()=>g({dryRun:!0})});let b,y;return r!=null&&r.flags.enableDirectApply?(b=$({codeblockActionType:le.smartPaste,title:"Review changes before applying",stateTitle:{neutral:"Review changes before applying",success:"Opened",failure:"Failed to apply"},onClick:()=>{c(!0),g({})},onSuccessMessage:"Opening diff view...",buttonText:"Review"}),y=$({codeblockActionType:le.directApply,title:"Apply changes directly to file",stateTitle:{neutral:"Apply changes directly to file",success:"Applied",failure:"Failed to apply"},onClick:()=>{c(!0),g({instantApply:!0})},onSuccessMessage:"Applying changes directly...",buttonText:"Apply"})):b=$({codeblockActionType:le.smartPaste,title:"Apply changes",stateTitle:{neutral:"Apply changes",success:"Applied",failure:"Failed to apply"},onClick:()=>{c(!0),g({})},onSuccessMessage:"Opening diff view...",buttonText:"Apply"}),{smartPaste:g,canTriggerSmartPaste:d(),canPrecomputeSmartPaste:p(),smartPasteButton:b,directApplyButton:y}}function b2(r,t,n){let e,o;return e==null||e.destroy(),e=vc(r,{onVisible:()=>t(!0),onHidden:()=>t(!1),scrollTarget:document.body,threshold:.1}),o==null||o.destroy(),o=Sy(r,new Ty({onHoverStart:()=>n(!0),onHoverEnd:()=>{},hoverTriggerDuration:600})),()=>{e==null||e.destroy(),o==null||o.destroy()}}function D5(r){let t,n;return t=new pd({props:{slot:"iconLeft"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function O5(r){let t,n;return t=new l2({props:{slot:"iconLeft"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function z5(r){let t,n,e,o;const s=[O5,D5],i=[];function a(l,c){return l[0]?0:1}return t=a(r),n=i[t]=s[t](r),{c(){n.c(),e=dt()},m(l,c){i[t].m(l,c),S(l,e,c),o=!0},p(l,c){let u=t;t=a(l),t!==u&&(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),n=i[t],n||(n=i[t]=s[t](l),n.c()),f(n,1),n.m(e.parentNode,e))},i(l){o||(f(n),o=!0)},o(l){m(n),o=!1},d(l){l&&v(e),i[t].d(l)}}}function N5(r){let t,n;return t=new Lr({props:{variant:"soft",color:"neutral",size:1,class:"c-expand-button "+r[3]+" "+(r[0]?"c-expand-button--expanded":"c-expand-button--collapsed"),style:"--base-btn-bg-color: "+r[1]+"; --base-btn-hover-bg-color: "+r[4]+";","aria-label":r[0]?"Collapse":"Expand",$$slots:{default:[z5]},$$scope:{ctx:r}}}),t.$on("click",function(){Be(r[2])&&r[2].apply(this,arguments)}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){r=e;const s={};9&o&&(s.class="c-expand-button "+r[3]+" "+(r[0]?"c-expand-button--expanded":"c-expand-button--collapsed")),2&o&&(s.style="--base-btn-bg-color: "+r[1]+"; --base-btn-hover-bg-color: "+r[4]+";"),1&o&&(s["aria-label"]=r[0]?"Collapse":"Expand"),33&o&&(s.$$scope={dirty:o,ctx:r}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function R5(r,t,n){let{expanded:e=!1}=t,{backgroundColor:o="var(--user-theme-panel-background)"}=t,{onClick:s}=t,i=`oklch(from ${o} l c h / 0.85)`,{class:a=""}=t;return r.$$set=l=>{"expanded"in l&&n(0,e=l.expanded),"backgroundColor"in l&&n(1,o=l.backgroundColor),"onClick"in l&&n(2,s=l.onClick),"class"in l&&n(3,a=l.class)},[e,o,s,a,i]}class w2 extends nt{constructor(t){super(),rt(this,t,R5,N5,ot,{expanded:0,backgroundColor:1,onClick:2,class:3})}}function P5(r){let t,n,e,o,s;return n=new Kr({}),o=new yt({props:{class:"c-deferred-loading-augment__text",size:1,$$slots:{default:[q5]},$$scope:{ctx:r}}}),{c(){t=I("span"),_(n.$$.fragment),e=J(),_(o.$$.fragment),T(t,"class","c-deferred-loading-augment__spinner")},m(i,a){S(i,t,a),k(n,t,null),O(t,e),k(o,t,null),s=!0},p(i,a){const l={};32&a&&(l.$$scope={dirty:a,ctx:i}),o.$set(l)},i(i){s||(f(n.$$.fragment,i),f(o.$$.fragment,i),s=!0)},o(i){m(n.$$.fragment,i),m(o.$$.fragment,i),s=!1},d(i){i&&v(t),C(n),C(o)}}}function U5(r){let t;const n=r[4].default,e=Ot(n,r,r[5],null);return{c(){e&&e.c()},m(o,s){e&&e.m(o,s),t=!0},p(o,s){e&&e.p&&(!t||32&s)&&zt(e,n,o,o[5],t?Rt(n,o[5],s,null):Nt(o[5]),null)},i(o){t||(f(e,o),t=!0)},o(o){m(e,o),t=!1},d(o){e&&e.d(o)}}}function q5(r){let t;return{c(){t=W("Loading...")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function j5(r){let t,n,e,o,s,i,a;const l=[U5,P5],c=[];function u(h,d){return h[2]?0:1}return n=u(r),e=c[n]=l[n](r),{c(){t=I("div"),e.c(),T(t,"class","c-deferred-loading-augment svelte-vvguyq"),Ge(t,"--deferred-loading-augment-min-height",r[0]),ut(t,"c-deferred-loading-augment--visible",r[2])},m(h,d){S(h,t,d),c[n].m(t,null),s=!0,i||(a=Co(o=xd.call(null,t,{...r[1],onVisible:r[3]})),i=!0)},p(h,[d]){let p=n;n=u(h),n===p?c[n].p(h,d):(Y(),m(c[p],1,1,()=>{c[p]=null}),X(),e=c[n],e?e.p(h,d):(e=c[n]=l[n](h),e.c()),f(e,1),e.m(t,null)),(!s||1&d)&&Ge(t,"--deferred-loading-augment-min-height",h[0]),o&&Be(o.update)&&2&d&&o.update.call(null,{...h[1],onVisible:h[3]}),(!s||4&d)&&ut(t,"c-deferred-loading-augment--visible",h[2])},i(h){s||(f(e),s=!0)},o(h){m(e),s=!1},d(h){h&&v(t),c[n].d(),i=!1,a()}}}function W5(r,t,n){let{$$slots:e={},$$scope:o}=t,{minHeight:s="var(--ds-spacing-4)"}=t,{options:i={scrollTarget:document.body,threshold:.01,visibilityDuration:100,throttleDuration:10,ignoreScroll:!0}}=t,a=!1;return r.$$set=l=>{"minHeight"in l&&n(0,s=l.minHeight),"options"in l&&n(1,i=l.options),"$$scope"in l&&n(5,o=l.$$scope)},[s,i,a,function(){var l;n(2,a=!0),(l=i==null?void 0:i.onVisible)==null||l.call(i)},e,o]}class H5 extends nt{constructor(t){super(),rt(this,t,W5,j5,ot,{minHeight:0,options:1})}}function V5(r){let t,n;return{c(){t=Bt("svg"),n=Bt("path"),T(n,"fill-rule","evenodd"),T(n,"clip-rule","evenodd"),T(n,"d","M3.5 2.82672C3.5 2.55058 3.72386 2.32672 4 2.32672H9.79289L12.5 5.03383V12.8267C12.5 13.1028 12.2761 13.3267 12 13.3267H4C3.72386 13.3267 3.5 13.1028 3.5 12.8267V2.82672ZM4 1.32672C3.17157 1.32672 2.5 1.99829 2.5 2.82672V12.8267C2.5 13.6551 3.17157 14.3267 4 14.3267H12C12.8284 14.3267 13.5 13.6551 13.5 12.8267V4.93027C13.5 4.73136 13.421 4.5406 13.2803 4.39994L10.3535 1.47317C10.2598 1.3794 10.1326 1.32672 10 1.32672H4ZM10.25 6.6595C10.5261 6.6595 10.75 6.43564 10.75 6.1595C10.75 5.88336 10.5261 5.6595 10.25 5.6595H8.49996L8.49996 3.9095C8.49996 3.6334 8.2761 3.4095 7.99996 3.4095C7.72382 3.4095 7.49996 3.6334 7.49996 3.9095V5.6595H5.74996C5.47386 5.6595 5.24996 5.88336 5.24996 6.1595C5.24996 6.43564 5.47386 6.6595 5.74996 6.6595L7.49996 6.6595V8.4095C7.49996 8.68564 7.72382 8.9095 7.99996 8.9095C8.2761 8.9095 8.49996 8.68564 8.49996 8.4095V6.6595H10.25ZM10.4999 11.4188C10.4999 11.695 10.2761 11.9188 9.99993 11.9188H5.99993C5.72379 11.9188 5.49993 11.695 5.49993 11.4188C5.49993 11.1427 5.72379 10.9188 5.99993 10.9188H9.99993C10.2761 10.9188 10.4999 11.1427 10.4999 11.4188Z"),T(n,"fill","currentColor"),T(t,"width","15"),T(t,"height","15"),T(t,"viewBox","0 0 15 15"),T(t,"fill","none"),T(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){S(e,t,o),O(t,n)},p:H,i:H,o:H,d(e){e&&v(t)}}}class G5 extends nt{constructor(t){super(),rt(this,t,null,V5,ot,{})}}const Z5=r=>({}),Of=r=>({});function Y5(r){let t;const n=r[8].text,e=Ot(n,r,r[9],Of);return{c(){e&&e.c()},m(o,s){e&&e.m(o,s),t=!0},p(o,s){e&&e.p&&(!t||512&s)&&zt(e,n,o,o[9],t?Rt(n,o[9],s,Z5):Nt(o[9]),Of)},i(o){t||(f(e,o),t=!0)},o(o){m(e,o),t=!1},d(o){e&&e.d(o)}}}function X5(r){let t,n;return t=new th({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Q5(r){let t,n;return t=new G5({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function K5(r){let t,n;return t=new Dy({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function J5(r){let t,n,e,o;const s=[K5,Q5,X5],i=[];function a(l,c){return l[1]===le.insert?0:l[1]===le.smartPaste?1:l[1]===le.directApply?2:-1}return~(n=a(r))&&(e=i[n]=s[n](r)),{c(){t=I("svelte.fragment"),e&&e.c(),T(t,"slot","iconLeft")},m(l,c){S(l,t,c),~n&&i[n].m(t,null),o=!0},p(l,c){let u=n;n=a(l),n!==u&&(e&&(Y(),m(i[u],1,1,()=>{i[u]=null}),X()),~n?(e=i[n],e||(e=i[n]=s[n](l),e.c()),f(e,1),e.m(t,null)):e=null)},i(l){o||(f(e),o=!0)},o(l){m(e),o=!1},d(l){l&&v(t),~n&&i[n].d()}}}function t6(r){let t,n,e;return n=new ca({props:{defaultColor:r[3],size:r[0],variant:r[2],loading:e6,stickyColor:r[6],tooltip:{neutral:r[5],success:r[4]},stateVariant:{success:"soft",neutral:"ghost-block",failure:"soft"},onClick:r[7],$$slots:{iconLeft:[J5],default:[Y5]},$$scope:{ctx:r}}}),{c(){t=I("span"),_(n.$$.fragment),T(t,"class","c-code-insert-button svelte-wa500a")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,[s]){const i={};8&s&&(i.defaultColor=o[3]),1&s&&(i.size=o[0]),4&s&&(i.variant=o[2]),64&s&&(i.stickyColor=o[6]),48&s&&(i.tooltip={neutral:o[5],success:o[4]}),128&s&&(i.onClick=o[7]),514&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}let e6=!1;function n6(r,t,n){let{$$slots:e={},$$scope:o}=t,{size:s=1}=t,{codeblockActionType:i}=t,{variant:a="ghost-block"}=t,{color:l="neutral"}=t,{successText:c}=t,{tooltip:u="Insert"}=t,{stickyColor:h=!1}=t,{onClick:d}=t;return r.$$set=p=>{"size"in p&&n(0,s=p.size),"codeblockActionType"in p&&n(1,i=p.codeblockActionType),"variant"in p&&n(2,a=p.variant),"color"in p&&n(3,l=p.color),"successText"in p&&n(4,c=p.successText),"tooltip"in p&&n(5,u=p.tooltip),"stickyColor"in p&&n(6,h=p.stickyColor),"onClick"in p&&n(7,d=p.onClick),"$$scope"in p&&n(9,o=p.$$scope)},[s,i,a,l,c,u,h,d,e,o]}class r6 extends nt{constructor(t){super(),rt(this,t,n6,t6,ot,{size:0,codeblockActionType:1,variant:2,color:3,successText:4,tooltip:5,stickyColor:6,onClick:7})}}const o6=r=>({}),zf=r=>({});function Nf(r){let t,n,e,o;return n=new ca({props:{defaultColor:r[1],stickyColor:r[3],size:r[0],variant:r[2],tooltip:{neutral:"Open File In Editor",success:"Opening file..."},stateVariant:{success:"soft"},onClick:r[4],icon:!r[7].text,$$slots:{iconLeft:[i6],default:[s6]},$$scope:{ctx:r}}}),{c(){t=I("span"),_(n.$$.fragment),T(t,"class",e="c-open-file-button-container c-open-file-button__size--"+r[0]+" svelte-pdfhuj")},m(s,i){S(s,t,i),k(n,t,null),o=!0},p(s,i){const a={};2&i&&(a.defaultColor=s[1]),8&i&&(a.stickyColor=s[3]),1&i&&(a.size=s[0]),4&i&&(a.variant=s[2]),16&i&&(a.onClick=s[4]),128&i&&(a.icon=!s[7].text),32768&i&&(a.$$scope={dirty:i,ctx:s}),n.$set(a),(!o||1&i&&e!==(e="c-open-file-button-container c-open-file-button__size--"+s[0]+" svelte-pdfhuj"))&&T(t,"class",e)},i(s){o||(f(n.$$.fragment,s),o=!0)},o(s){m(n.$$.fragment,s),o=!1},d(s){s&&v(t),C(n)}}}function s6(r){let t;const n=r[14].text,e=Ot(n,r,r[15],zf);return{c(){e&&e.c()},m(o,s){e&&e.m(o,s),t=!0},p(o,s){e&&e.p&&(!t||32768&s)&&zt(e,n,o,o[15],t?Rt(n,o[15],s,o6):Nt(o[15]),zf)},i(o){t||(f(e,o),t=!0)},o(o){m(e,o),t=!1},d(o){e&&e.d(o)}}}function i6(r){let t,n;return t=new _y({props:{slot:"iconLeft"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function a6(r){let t,n,e=r[5]&&Nf(r);return{c(){e&&e.c(),t=dt()},m(o,s){e&&e.m(o,s),S(o,t,s),n=!0},p(o,[s]){o[5]?e?(e.p(o,s),32&s&&f(e,1)):(e=Nf(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d(o)}}}function l6(r,t,n){let e,o,s,i,{$$slots:a={},$$scope:l}=t;const c=yc(a);let{path:u}=t,{start:h=0}=t,{stop:d=0}=t,{size:p=0}=t,{color:g="neutral"}=t,{variant:$="ghost-block"}=t,{stickyColor:b=!1}=t,{onOpenLocalFile:y=async function(L){var B,E;if((B=L==null?void 0:L.stopPropagation)==null||B.call(L),(E=L==null?void 0:L.preventDefault)==null||E.call(L),!u)return;const A=await(x==null?void 0:x.extensionClient.resolvePath({rootPath:"",relPath:u}));return x==null||x.extensionClient.openFile({repoRoot:(A==null?void 0:A.repoRoot)??"",pathName:(A==null?void 0:A.pathName)??"",range:{start:Math.max(h,0),stop:Math.max(d,0)}}),"success"}}=t;const x=Zs(),M=Jt(Qo.key);return Vt(r,M,L=>n(13,i=L)),r.$$set=L=>{"path"in L&&n(8,u=L.path),"start"in L&&n(9,h=L.start),"stop"in L&&n(10,d=L.stop),"size"in L&&n(0,p=L.size),"color"in L&&n(1,g=L.color),"variant"in L&&n(2,$=L.variant),"stickyColor"in L&&n(3,b=L.stickyColor),"onOpenLocalFile"in L&&n(4,y=L.onOpenLocalFile),"$$scope"in L&&n(15,l=L.$$scope)},r.$$.update=()=>{8192&r.$$.dirty&&n(11,e=i==null?void 0:i.isRemoteAgentSshWindow),8192&r.$$.dirty&&n(12,o=!!(i!=null&&i.isActive)),6144&r.$$.dirty&&n(5,s=!o||e)},[p,g,$,b,y,s,M,c,u,h,d,e,o,i,a,l]}class Ko extends nt{constructor(t){super(),rt(this,t,l6,a6,ot,{path:8,start:9,stop:10,size:0,color:1,variant:2,stickyColor:3,onOpenLocalFile:4})}}function c6(r){let t,n;return t=new r6({props:{codeblockActionType:r[0].codeblockActionType,size:1,onClick:r[1],successText:r[0].onSuccessMessage,$$slots:{text:[p6]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1&o&&(s.codeblockActionType=e[0].codeblockActionType),1&o&&(s.successText=e[0].onSuccessMessage),5&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function u6(r){let t,n;return t=new Ko({props:{stickyColor:!0,size:1,onOpenLocalFile:r[1],$$slots:{text:[g6]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};5&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function h6(r){let t,n;return t=new Ys({props:{stickyColor:!0,size:1,onCopy:r[1],$$slots:{text:[$6]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};5&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function d6(r){let t,n=r[0].buttonText+"";return{c(){t=W(n)},m(e,o){S(e,t,o)},p(e,o){1&o&&n!==(n=e[0].buttonText+"")&&ht(t,n)},d(e){e&&v(t)}}}function p6(r){let t,n;return t=new yt({props:{slot:"text",size:1,$$slots:{default:[d6]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};5&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function f6(r){let t,n=r[0].buttonText+"";return{c(){t=W(n)},m(e,o){S(e,t,o)},p(e,o){1&o&&n!==(n=e[0].buttonText+"")&&ht(t,n)},d(e){e&&v(t)}}}function g6(r){let t,n;return t=new yt({props:{slot:"text",size:1,$$slots:{default:[f6]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};5&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function m6(r){let t,n=r[0].buttonText+"";return{c(){t=W(n)},m(e,o){S(e,t,o)},p(e,o){1&o&&n!==(n=e[0].buttonText+"")&&ht(t,n)},d(e){e&&v(t)}}}function $6(r){let t,n;return t=new yt({props:{slot:"text",size:1,$$slots:{default:[m6]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};5&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function y6(r){let t,n,e,o;const s=[h6,u6,c6],i=[];function a(l,c){return l[0].codeblockActionType===le.copy?0:l[0].codeblockActionType===le.goTo?1:2}return t=a(r),n=i[t]=s[t](r),{c(){n.c(),e=dt()},m(l,c){i[t].m(l,c),S(l,e,c),o=!0},p(l,[c]){let u=t;t=a(l),t===u?i[t].p(l,c):(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),n=i[t],n?n.p(l,c):(n=i[t]=s[t](l),n.c()),f(n,1),n.m(e.parentNode,e))},i(l){o||(f(n),o=!0)},o(l){m(n),o=!1},d(l){l&&v(e),i[t].d(l)}}}function x6(r,t,n){let{primaryButton:e}=t;return r.$$set=o=>{"primaryButton"in o&&n(0,e=o.primaryButton)},[e,async()=>(e.onClick(),"success")]}class b6 extends nt{constructor(t){super(),rt(this,t,x6,y6,ot,{primaryButton:0,onClickForSuccessButton:1})}get onClickForSuccessButton(){return this.$$.ctx[1]}}function Rf(r,t,n){const e=r.slice();return e[30]=t[n],e}function w6(r){let t,n;return t=new hd({props:{options:bd,text:r[5].text,lang:r[16]||r[5].lang}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};32&o[0]&&(s.text=e[5].text),65568&o[0]&&(s.lang=e[16]||e[5].lang),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Pf(r){let t,n,e;return n=new w2({props:{expanded:!1,onClick:r[23]}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-codeblock__truncated-surface svelte-vzsb2k")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};12&s[0]&&(i.onClick=o[23]),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function v6(r){let t,n,e;const o=r[22].default,s=Ot(o,r,r[29],null),i=s||function(l){let c,u;return c=new H5({props:{minHeight:l[15]+"px",$$slots:{default:[w6]},$$scope:{ctx:l}}}),{c(){_(c.$$.fragment)},m(h,d){k(c,h,d),u=!0},p(h,d){const p={};32768&d[0]&&(p.minHeight=h[15]+"px"),536936480&d[0]&&(p.$$scope={dirty:d,ctx:h}),c.$set(p)},i(h){u||(f(c.$$.fragment,h),u=!0)},o(h){m(c.$$.fragment,h),u=!1},d(h){C(c,h)}}}(r);let a=r[2]&&Pf(r);return{c(){t=I("div"),i&&i.c(),n=J(),a&&a.c(),T(t,"class","c-codeblock__container-inner svelte-vzsb2k"),ut(t,"c-codeblock__truncated",r[2])},m(l,c){S(l,t,c),i&&i.m(t,null),O(t,n),a&&a.m(t,null),r[24](t),e=!0},p(l,c){s?s.p&&(!e||536870912&c[0])&&zt(s,o,l,l[29],e?Rt(o,l[29],c,null):Nt(l[29]),null):i&&i.p&&(!e||98336&c[0])&&i.p(l,e?c:[-1,-1]),l[2]?a?(a.p(l,c),4&c[0]&&f(a,1)):(a=Pf(l),a.c(),f(a,1),a.m(t,null)):a&&(Y(),m(a,1,1,()=>{a=null}),X()),(!e||4&c[0])&&ut(t,"c-codeblock__truncated",l[2])},i(l){e||(f(i,l),f(a),e=!0)},o(l){m(i,l),m(a),e=!1},d(l){l&&v(t),i&&i.d(l),a&&a.d(),r[24](null)}}}function Uf(r){let t,n,e,o,s=vl(r[17]);n=new he({props:{content:r[17],triggerOn:[Jn.Hover],$$slots:{default:[k6]},$$scope:{ctx:r}}});let i=s&&qf(r);return{c(){t=I("div"),_(n.$$.fragment),e=J(),i&&i.c(),T(t,"class","c-codeblock__relpath svelte-vzsb2k")},m(a,l){S(a,t,l),k(n,t,null),O(t,e),i&&i.m(t,null),o=!0},p(a,l){const c={};131072&l[0]&&(c.content=a[17]),537003008&l[0]&&(c.$$scope={dirty:l,ctx:a}),n.$set(c),131072&l[0]&&(s=vl(a[17])),s?i?i.p(a,l):(i=qf(a),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},i(a){o||(f(n.$$.fragment,a),o=!0)},o(a){m(n.$$.fragment,a),o=!1},d(a){a&&v(t),C(n),i&&i.d()}}}function _6(r){let t,n;return t=new vk({props:{value:[],filepath:af(r[17]),onCodeAction:r[10].onClick,codeActions:[{action:"active",label:"Focus in Editor",icon:"open-in-new-window"}]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};131072&o[0]&&(s.filepath=af(e[17])),1024&o[0]&&(s.onCodeAction=e[10].onClick),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function k6(r){let t,n;return t=new Lr({props:{variant:"ghost-block",color:"neutral",size:1,class:"c-codeblock__filename",$$slots:{default:[_6]},$$scope:{ctx:r}}}),t.$on("click",function(){Be(r[10].onClick)&&r[10].onClick.apply(this,arguments)}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){r=e;const s={};537003008&o[0]&&(s.$$scope={dirty:o,ctx:r}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function qf(r){let t,n,e=vl(r[17])+"";return{c(){t=I("span"),n=W(e),T(t,"class","c-codeblock__directory svelte-vzsb2k")},m(o,s){S(o,t,s),O(t,n)},p(o,s){131072&s[0]&&e!==(e=vl(o[17])+"")&&ht(n,e)},d(o){o&&v(t)}}}function C6(r){let t,n;return t=new b6({props:{primaryButton:r[9]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};512&o[0]&&(s.primaryButton=e[9]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function S6(r){let t,n,e;return n=new Kr({props:{size:1}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-codeblock__loading svelte-vzsb2k")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p:H,i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function T6(r){let t,n;return t=new Oy({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function M6(r){let t,n;return t=new xe({props:{variant:"ghost-block",color:"neutral",size:1,$$slots:{default:[T6]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};536870912&o[0]&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function A6(r){let t,n,e=r[30].buttonText+"";return{c(){t=W(e),n=J()},m(o,s){S(o,t,s),S(o,n,s)},p(o,s){2048&s[0]&&e!==(e=o[30].buttonText+"")&&ht(t,e)},d(o){o&&(v(t),v(n))}}}function L6(r){let t,n,e;return t=new gd({props:{iconName:r[30].iconName}}),{c(){_(t.$$.fragment),n=J()},m(o,s){k(t,o,s),S(o,n,s),e=!0},p(o,s){const i={};2048&s[0]&&(i.iconName=o[30].iconName),t.$set(i)},i(o){e||(f(t.$$.fragment,o),e=!0)},o(o){m(t.$$.fragment,o),e=!1},d(o){o&&v(n),C(t,o)}}}function jf(r){let t,n;return t=new Ie.Item({props:{onSelect:r[30].onClick,disabled:r[30].disabled,$$slots:{iconLeft:[L6],default:[A6]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};2048&o[0]&&(s.onSelect=e[30].onClick),2048&o[0]&&(s.disabled=e[30].disabled),536872960&o[0]&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function E6(r){let t,n,e=Gt(r[11]),o=[];for(let i=0;i<e.length;i+=1)o[i]=jf(Rf(r,e,i));const s=i=>m(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=dt()},m(i,a){for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(i,a);S(i,t,a),n=!0},p(i,a){if(2048&a[0]){let l;for(e=Gt(i[11]),l=0;l<e.length;l+=1){const c=Rf(i,e,l);o[l]?(o[l].p(c,a),f(o[l],1)):(o[l]=jf(c),o[l].c(),f(o[l],1),o[l].m(t.parentNode,t))}for(Y(),l=e.length;l<o.length;l+=1)s(l);X()}},i(i){if(!n){for(let a=0;a<e.length;a+=1)f(o[a]);n=!0}},o(i){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)m(o[a]);n=!1},d(i){i&&v(t),un(o,i)}}}function B6(r){let t,n,e,o;return t=new Ie.Trigger({props:{$$slots:{default:[M6]},$$scope:{ctx:r}}}),e=new Ie.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[E6]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment),n=J(),_(e.$$.fragment)},m(s,i){k(t,s,i),S(s,n,i),k(e,s,i),o=!0},p(s,i){const a={};536870912&i[0]&&(a.$$scope={dirty:i,ctx:s}),t.$set(a);const l={};536872960&i[0]&&(l.$$scope={dirty:i,ctx:s}),e.$set(l)},i(s){o||(f(t.$$.fragment,s),f(e.$$.fragment,s),o=!0)},o(s){m(t.$$.fragment,s),m(e.$$.fragment,s),o=!1},d(s){s&&v(n),C(t,s),C(e,s)}}}function I6(r){var $;let t,n,e,o,s,i,a,l,c,u;n=new Iy({props:{class:"c-codeblock__collapse-btn"}});let h=(($=r[6])==null?void 0:$.relPath)&&Uf(r);const d=[S6,C6],p=[];function g(b,y){return b[14]?0:1}return i=g(r),a=p[i]=d[i](r),c=new Ie.Root({props:{nested:!1,$$slots:{default:[B6]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),e=J(),h&&h.c(),o=J(),s=I("div"),a.c(),l=J(),_(c.$$.fragment),T(s,"class","c-codeblock__action-bar-right svelte-vzsb2k"),T(t,"slot","header"),T(t,"class","c-codeblock__header-content svelte-vzsb2k")},m(b,y){S(b,t,y),k(n,t,null),O(t,e),h&&h.m(t,null),O(t,o),O(t,s),p[i].m(s,null),O(s,l),k(c,s,null),u=!0},p(b,y){var L;(L=b[6])!=null&&L.relPath?h?(h.p(b,y),64&y[0]&&f(h,1)):(h=Uf(b),h.c(),f(h,1),h.m(t,o)):h&&(Y(),m(h,1,1,()=>{h=null}),X());let x=i;i=g(b),i===x?p[i].p(b,y):(Y(),m(p[x],1,1,()=>{p[x]=null}),X(),a=p[i],a?a.p(b,y):(a=p[i]=d[i](b),a.c()),f(a,1),a.m(s,l));const M={};536872960&y[0]&&(M.$$scope={dirty:y,ctx:b}),c.$set(M)},i(b){u||(f(n.$$.fragment,b),f(h),f(a),f(c.$$.fragment,b),u=!0)},o(b){m(n.$$.fragment,b),m(h),m(a),m(c.$$.fragment,b),u=!1},d(b){b&&v(t),C(n),h&&h.d(),p[i].d(),C(c)}}}function F6(r){let t,n,e,o,s,i,a,l;function c(p){r[25](p)}function u(p){r[26](p)}function h(p){r[27](p)}let d={stickyHeaderTop:10,stickyHeader:!0,expandable:!0,class:"c-codeblock__container",$$slots:{header:[I6],default:[v6]},$$scope:{ctx:r}};return r[12]!==void 0&&(d.isHeaderStuck=r[12]),r[0]!==void 0&&(d.collapsed=r[0]),r[13]!==void 0&&(d.toggle=r[13]),n=new ud({props:d}),Pt.push(()=>re(n,"isHeaderStuck",c)),Pt.push(()=>re(n,"collapsed",u)),Pt.push(()=>re(n,"toggle",h)),{c(){t=I("div"),_(n.$$.fragment),T(t,"class",i=xo(`c-codeblock c-codeblock__${r[18]}`)+" svelte-vzsb2k"),T(t,"style",a=`--codeblock-line-height: ${r[7]}px; --codeblock-truncate-lines: ${r[8]};`),ut(t,"is-sticky",r[12])},m(p,g){S(p,t,g),k(n,t,null),r[28](t),l=!0},p(p,g){const $={};537120380&g[0]&&($.$$scope={dirty:g,ctx:p}),!e&&4096&g[0]&&(e=!0,$.isHeaderStuck=p[12],oe(()=>e=!1)),!o&&1&g[0]&&(o=!0,$.collapsed=p[0],oe(()=>o=!1)),!s&&8192&g[0]&&(s=!0,$.toggle=p[13],oe(()=>s=!1)),n.$set($),(!l||262144&g[0]&&i!==(i=xo(`c-codeblock c-codeblock__${p[18]}`)+" svelte-vzsb2k"))&&T(t,"class",i),(!l||384&g[0]&&a!==(a=`--codeblock-line-height: ${p[7]}px; --codeblock-truncate-lines: ${p[8]};`))&&T(t,"style",a),(!l||266240&g[0])&&ut(t,"is-sticky",p[12])},i(p){l||(f(n.$$.fragment,p),l=!0)},o(p){m(n.$$.fragment,p),l=!1},d(p){p&&v(t),C(n),r[28](null)}}}function D6(r,t,n){let e,o,s,i,a,l,c;Vt(r,sd,q=>n(21,c=q));let u,h,{$$slots:d={},$$scope:p}=t,{token:g}=t,{codeblockMetadata:$}=t,{collapsed:b=!0}=t,{element:y}=t,{lineHeight:x=bd.lineHeight??18}=t,{truncateLines:M=10}=t,{requestStatus:L}=t,{primaryButton:A}=t,{goToFileButton:B}=t,{buttons:E}=t,{truncate:F=!1}=t,{opened:U=!1}=t,{codeContainerElement:tt}=t;return r.$$set=q=>{"token"in q&&n(5,g=q.token),"codeblockMetadata"in q&&n(6,$=q.codeblockMetadata),"collapsed"in q&&n(0,b=q.collapsed),"element"in q&&n(1,y=q.element),"lineHeight"in q&&n(7,x=q.lineHeight),"truncateLines"in q&&n(8,M=q.truncateLines),"requestStatus"in q&&n(19,L=q.requestStatus),"primaryButton"in q&&n(9,A=q.primaryButton),"goToFileButton"in q&&n(10,B=q.goToFileButton),"buttons"in q&&n(11,E=q.buttons),"truncate"in q&&n(2,F=q.truncate),"opened"in q&&n(3,U=q.opened),"codeContainerElement"in q&&n(4,tt=q.codeContainerElement),"$$scope"in q&&n(29,p=q.$$scope)},r.$$.update=()=>{2097152&r.$$.dirty[0]&&n(18,e=c==null?void 0:c.category),64&r.$$.dirty[0]&&n(17,o=Q_(($==null?void 0:$.relPath)??"")),96&r.$$.dirty[0]&&n(16,s=($==null?void 0:$.language)??g.lang),32&r.$$.dirty[0]&&n(20,i=(g.text.match(/\r?\n/g)||[]).length+1),1048960&r.$$.dirty[0]&&n(15,a=Math.min(i,M)*x),524288&r.$$.dirty[0]&&n(14,l=L===an.sent)},[b,y,F,U,tt,g,$,x,M,A,B,E,u,h,l,a,s,o,e,L,i,c,d,()=>{n(2,F=!1),n(3,U=!0)},function(q){Pt[q?"unshift":"push"](()=>{tt=q,n(4,tt)})},function(q){u=q,n(12,u)},function(q){b=q,n(0,b)},function(q){h=q,n(13,h)},function(q){Pt[q?"unshift":"push"](()=>{y=q,n(1,y)})},p]}class O6 extends nt{constructor(t){super(),rt(this,t,D6,F6,ot,{token:5,codeblockMetadata:6,collapsed:0,element:1,lineHeight:7,truncateLines:8,requestStatus:19,primaryButton:9,goToFileButton:10,buttons:11,truncate:2,opened:3,codeContainerElement:4},null,[-1,-1])}}function z6(r){let t,n,e,o;function s(l){r[41](l)}function i(l){r[42](l)}let a={truncate:r[6],opened:v2,token:r[0],codeblockMetadata:r[1],collapsed:r[2],lineHeight:r[3],truncateLines:r[4],requestStatus:r[11],primaryButton:r[13],buttons:r[10]?r[8]:r[12],goToFileButton:r[9]};return r[5]!==void 0&&(a.element=r[5]),r[7]!==void 0&&(a.codeContainerElement=r[7]),t=new O6({props:a}),Pt.push(()=>re(t,"element",s)),Pt.push(()=>re(t,"codeContainerElement",i)),{c(){_(t.$$.fragment)},m(l,c){k(t,l,c),o=!0},p(l,c){const u={};64&c[0]&&(u.truncate=l[6]),1&c[0]&&(u.token=l[0]),2&c[0]&&(u.codeblockMetadata=l[1]),4&c[0]&&(u.collapsed=l[2]),8&c[0]&&(u.lineHeight=l[3]),16&c[0]&&(u.truncateLines=l[4]),2048&c[0]&&(u.requestStatus=l[11]),8192&c[0]&&(u.primaryButton=l[13]),5376&c[0]&&(u.buttons=l[10]?l[8]:l[12]),512&c[0]&&(u.goToFileButton=l[9]),!n&&32&c[0]&&(n=!0,u.element=l[5],oe(()=>n=!1)),!e&&128&c[0]&&(e=!0,u.codeContainerElement=l[7],oe(()=>e=!1)),t.$set(u)},i(l){o||(f(t.$$.fragment,l),o=!0)},o(l){m(t.$$.fragment,l),o=!1},d(l){C(t,l)}}}let v2=!1;function N6(r,t,n){let e,o,s,i,a,l,c,u,h,d,p,g,$,b,y,x,M,L,A,B,E,F,U,tt,q,{token:N}=t,{codeblockMetadata:R}=t,{collapsed:j=!1}=t,{lineHeight:Q=bd.lineHeight??18}=t,{truncateLines:z=10}=t,{defaultActionButtons:G=[le.smartPaste,le.copy,le.insert,le.goTo]}=t;const K=Jt("chatModel");Vt(r,K,Yt=>n(39,tt=Yt));const et=Jt("requestId");Vt(r,et,Yt=>n(40,q=Yt));const ct=Jt(Qo.key);let st,at,gt=!1,bt=!1,Wt=!1,Ut=!1;const we=Yt=>id(ye,U=Yt,U),ye=_e(!1);Vt(r,ye,Yt=>n(44,U=Yt));let Ae,ve,hn=!1;return Gs(()=>{at==null||at(),Ae==null||Ae.disconnect(),n(22,Ae=void 0)}),r.$$set=Yt=>{"token"in Yt&&n(0,N=Yt.token),"codeblockMetadata"in Yt&&n(1,R=Yt.codeblockMetadata),"collapsed"in Yt&&n(2,j=Yt.collapsed),"lineHeight"in Yt&&n(3,Q=Yt.lineHeight),"truncateLines"in Yt&&n(4,z=Yt.truncateLines),"defaultActionButtons"in Yt&&n(17,G=Yt.defaultActionButtons)},r.$$.update=()=>{var Yt;512&r.$$.dirty[1]&&n(35,e=q),1073741824&r.$$.dirty[0]&&o&&n(17,G=[le.copy]),2&r.$$.dirty[0]&&n(37,s=(R==null?void 0:R.mode)==="EXCERPT"),2&r.$$.dirty[0]&&(R!=null&&R.relPath)&&async function(){n(19,bt=!0),R!=null&&R.relPath&&n(18,gt=!!await(K==null?void 0:K.extensionClient.resolvePath({rootPath:"",relPath:R==null?void 0:R.relPath})))}(),256&r.$$.dirty[1]&&n(38,i=tt==null?void 0:tt.currentConversationModel),144&r.$$.dirty[1]&&n(11,a=(Yt=i==null?void 0:i.exchangeWithRequestId(e))==null?void 0:Yt.status),2048&r.$$.dirty[0]&&n(34,l=a===an.success),2048&r.$$.dirty[0]&&n(10,c=a===an.sent),1&r.$$.dirty[0]&&n(27,u=!N.raw.trimEnd().endsWith("```")),32&r.$$.dirty[0]|8&r.$$.dirty[1]&&st&&l&&(K!=null&&K.flags.enableSmartPaste)&&(at=b2(st,se=>n(20,Wt=se),se=>n(21,Ut=se))),3407875&r.$$.dirty[0]|24&r.$$.dirty[1]&&n(32,{smartPaste:$,canTriggerSmartPaste:b,canPrecomputeSmartPaste:y,smartPasteButton:x,directApplyButton:M}=x2(K,R,N,e,l,gt,Wt,Ut,0,we),$,(n(36,b),n(1,R),n(0,N),n(35,e),n(34,l),n(18,gt),n(20,Wt),n(21,Ut),n(40,q),n(11,a),n(5,st),n(38,i),n(39,tt)),(n(33,y),n(1,R),n(0,N),n(35,e),n(34,l),n(18,gt),n(20,Wt),n(21,Ut),n(40,q),n(11,a),n(5,st),n(38,i),n(39,tt)),(n(31,x),n(1,R),n(0,N),n(35,e),n(34,l),n(18,gt),n(20,Wt),n(21,Ut),n(40,q),n(11,a),n(5,st),n(38,i),n(39,tt)),(n(26,M),n(1,R),n(0,N),n(35,e),n(34,l),n(18,gt),n(20,Wt),n(21,Ut),n(40,q),n(11,a),n(5,st),n(38,i),n(39,tt))),67895298&r.$$.dirty[0]|32&r.$$.dirty[1]&&n(23,h=function(se,Xn,te,Ye=!1){const Fr=!!(se!=null&&se.relPath),Pn=Fr&&p2((se==null?void 0:se.relPath)??"");return Ye&&Xn&&!Pn?le.directApply:Xn&&!Pn?le.smartPaste:Fr&&te?le.insert:le.copy}(R,b,bt&&!gt,!!(K!=null&&K.flags.enableDirectApply)&&!!M)),3&r.$$.dirty[0]|64&r.$$.dirty[1]&&n(9,d=y2(N.text,s,R,K)),1&r.$$.dirty[0]&&n(29,p=m2(()=>N.text)),3&r.$$.dirty[0]&&n(28,g=$2(()=>N.text,R,K)),6&r.$$.dirty[1]&&y&&$({dryRun:!0}),2080376320&r.$$.dirty[0]|1&r.$$.dirty[1]&&n(24,L={[le.smartPaste]:{...x,disabled:c},...K!=null&&K.flags.enableDirectApply&&M&&!o?{[le.directApply]:{...M,disabled:c}}:{},[le.copy]:{...p,disabled:u&&c},[le.insert]:{...g,disabled:u&&c},[le.goTo]:{...d}}),25165824&r.$$.dirty[0]&&n(13,A=L[h]),67239936&r.$$.dirty[0]&&n(25,B=K!=null&&K.flags.enableDirectApply&&M?[le.directApply,...G]:G),50331648&r.$$.dirty[0]&&n(8,E=B.map(se=>L[se]).filter(se=>se!==void 0)),8388864&r.$$.dirty[0]&&n(12,F=E.filter(se=>se.codeblockActionType!==h)),4194522&r.$$.dirty[0]&&ve&&!Ae&&(K!=null&&K.flags.enableDebugFeatures)&&(n(22,Ae=new ResizeObserver(se=>{if(!hn&&!v2&&(R!=null&&R.relPath)){const Xn=se[0].contentRect.height;n(6,hn=Xn>z*Q)}})),Ae.observe(ve))},n(30,o=!!(ct!=null&&ct.isActive)),[N,R,j,Q,z,st,hn,ve,E,d,c,a,F,A,K,et,ye,G,gt,bt,Wt,Ut,Ae,h,L,B,M,u,g,p,o,x,$,y,l,e,b,s,i,tt,q,function(Yt){st=Yt,n(5,st)},function(Yt){ve=Yt,n(7,ve)}]}class R6 extends nt{constructor(t){super(),rt(this,t,N6,z6,ot,{token:0,codeblockMetadata:1,collapsed:2,lineHeight:3,truncateLines:4,defaultActionButtons:17},null,[-1,-1])}}function P6(r){let t,n;return{c(){t=Bt("svg"),n=Bt("path"),T(n,"fill-rule","evenodd"),T(n,"clip-rule","evenodd"),T(n,"d","M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159ZM4.25 6.5C4.25 6.22386 4.47386 6 4.75 6H6V4.75C6 4.47386 6.22386 4.25 6.5 4.25C6.77614 4.25 7 4.47386 7 4.75V6H8.25C8.52614 6 8.75 6.22386 8.75 6.5C8.75 6.77614 8.52614 7 8.25 7H7V8.25C7 8.52614 6.77614 8.75 6.5 8.75C6.22386 8.75 6 8.52614 6 8.25V7H4.75C4.47386 7 4.25 6.77614 4.25 6.5Z"),T(n,"fill","currentColor"),T(t,"width","15"),T(t,"height","15"),T(t,"viewBox","0 0 15 15"),T(t,"fill","none"),T(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){S(e,t,o),O(t,n)},p:H,i:H,o:H,d(e){e&&v(t)}}}class _2 extends nt{constructor(t){super(),rt(this,t,null,P6,ot,{})}}function U6(r){let t,n;return{c(){t=Bt("svg"),n=Bt("path"),T(n,"fill-rule","evenodd"),T(n,"clip-rule","evenodd"),T(n,"d","M6.5 10C8.433 10 10 8.433 10 6.5C10 4.567 8.433 3 6.5 3C4.567 3 3 4.567 3 6.5C3 8.433 4.567 10 6.5 10ZM6.5 11C7.56251 11 8.53901 10.6318 9.30884 10.0159L12.1464 12.8536C12.3417 13.0488 12.6583 13.0488 12.8536 12.8536C13.0488 12.6583 13.0488 12.3417 12.8536 12.1464L10.0159 9.30884C10.6318 8.53901 11 7.56251 11 6.5C11 4.01472 8.98528 2 6.5 2C4.01472 2 2 4.01472 2 6.5C2 8.98528 4.01472 11 6.5 11ZM4.75 6C4.47386 6 4.25 6.22386 4.25 6.5C4.25 6.77614 4.47386 7 4.75 7H8.25C8.52614 7 8.75 6.77614 8.75 6.5C8.75 6.22386 8.52614 6 8.25 6H4.75Z"),T(n,"fill","currentColor"),T(t,"width","15"),T(t,"height","15"),T(t,"viewBox","0 0 15 15"),T(t,"fill","none"),T(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){S(e,t,o),O(t,n)},p:H,i:H,o:H,d(e){e&&v(t)}}}class q6 extends nt{constructor(t){super(),rt(this,t,null,U6,ot,{})}}function j6(r){let t,n,e,o,s,i=(r[2]||"")+"";const a=r[4].default,l=Ot(a,r,r[3],null);return{c(){t=I("div"),l&&l.c(),n=J(),e=I("div"),o=W(i),T(e,"class","c-codeblocks__action-bar-status svelte-10veac8"),T(t,"class","c-codeblocks__action-bar svelte-10veac8"),ut(t,"c-codeblocks__loc-top-bar",r[0]==="topBar"),ut(t,"c-codeblocks__loc-bottom-bar",r[0]==="bottomBar"),ut(t,"c-codeblocks__loc-left-align",r[1]==="left")},m(c,u){S(c,t,u),l&&l.m(t,null),O(t,n),O(t,e),O(e,o),s=!0},p(c,[u]){l&&l.p&&(!s||8&u)&&zt(l,a,c,c[3],s?Rt(a,c[3],u,null):Nt(c[3]),null),(!s||4&u)&&i!==(i=(c[2]||"")+"")&&ht(o,i),(!s||1&u)&&ut(t,"c-codeblocks__loc-top-bar",c[0]==="topBar"),(!s||1&u)&&ut(t,"c-codeblocks__loc-bottom-bar",c[0]==="bottomBar"),(!s||2&u)&&ut(t,"c-codeblocks__loc-left-align",c[1]==="left")},i(c){s||(f(l,c),s=!0)},o(c){m(l,c),s=!1},d(c){c&&v(t),l&&l.d(c)}}}function W6(r,t,n){let e,{$$slots:o={},$$scope:s}=t,{location:i="bottomBar"}=t,{align:a="right"}=t,l="";return $c("augment-codeblock-actions-message",{setMessageText:c=>{n(2,l=c),e&&clearTimeout(e),e=setTimeout(()=>{n(2,l="")},2500)}}),r.$$set=c=>{"location"in c&&n(0,i=c.location),"align"in c&&n(1,a=c.align),"$$scope"in c&&n(3,s=c.$$scope)},[i,a,l,s,o]}class k2 extends nt{constructor(t){super(),rt(this,t,W6,j6,ot,{location:0,align:1})}}function Wf(r){let t,n;return t=new yt({props:{size:1,$$slots:{default:[H6]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};33152&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function H6(r){let t,n,e,o,s=(r[7]??"")+"";return t=new gd({props:{iconName:r[8]}}),{c(){_(t.$$.fragment),n=J(),e=W(s)},m(i,a){k(t,i,a),S(i,n,a),S(i,e,a),o=!0},p(i,a){const l={};256&a&&(l.iconName=i[8]),t.$set(l),(!o||128&a)&&s!==(s=(i[7]??"")+"")&&ht(e,s)},i(i){o||(f(t.$$.fragment,i),o=!0)},o(i){m(t.$$.fragment,i),o=!1},d(i){i&&(v(n),v(e)),C(t,i)}}}function V6(r){let t;const n=r[13].default,e=Ot(n,r,r[15],null),o=e||function(s){let i,a,l=(s[8]||s[7])&&Wf(s);return{c(){l&&l.c(),i=dt()},m(c,u){l&&l.m(c,u),S(c,i,u),a=!0},p(c,u){c[8]||c[7]?l?(l.p(c,u),384&u&&f(l,1)):(l=Wf(c),l.c(),f(l,1),l.m(i.parentNode,i)):l&&(Y(),m(l,1,1,()=>{l=null}),X())},i(c){a||(f(l),a=!0)},o(c){m(l),a=!1},d(c){c&&v(i),l&&l.d(c)}}}(r);return{c(){o&&o.c()},m(s,i){o&&o.m(s,i),t=!0},p(s,i){e?e.p&&(!t||32768&i)&&zt(e,n,s,s[15],t?Rt(n,s[15],i,null):Nt(s[15]),null):o&&o.p&&(!t||384&i)&&o.p(s,t?i:-1)},i(s){t||(f(o,s),t=!0)},o(s){m(o,s),t=!1},d(s){o&&o.d(s)}}}function G6(r){let t,n;return t=new Lr({props:{variant:"ghost-block",color:"neutral",size:1,$$slots:{default:[V6]},$$scope:{ctx:r}}}),t.$on("click",r[10]),t.$on("mouseover",function(){Be(r[4])&&r[4].apply(this,arguments)}),t.$on("mouseleave",function(){Be(r[5])&&r[5].apply(this,arguments)}),t.$on("blur",function(){Be(r[3])&&r[3].apply(this,arguments)}),t.$on("focus",function(){Be(r[2])&&r[2].apply(this,arguments)}),t.$on("mousedown",function(){Be(r[6])&&r[6].apply(this,arguments)}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){r=e;const s={};33152&o&&(s.$$scope={dirty:o,ctx:r}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Z6(r){let t,n,e;function o(i){r[14](i)}let s={onOpenChange:r[11],content:r[0]??r[9],$$slots:{default:[G6]},$$scope:{ctx:r}};return r[1]!==void 0&&(s.requestClose=r[1]),t=new he({props:s}),Pt.push(()=>re(t,"requestClose",o)),{c(){_(t.$$.fragment)},m(i,a){k(t,i,a),e=!0},p(i,[a]){const l={};513&a&&(l.content=i[0]??i[9]),33276&a&&(l.$$scope={dirty:a,ctx:i}),!n&&2&a&&(n=!0,l.requestClose=i[1],oe(()=>n=!1)),t.$set(l)},i(i){e||(f(t.$$.fragment,i),e=!0)},o(i){m(t.$$.fragment,i),e=!1},d(i){C(t,i)}}}function Y6(r,t,n){let e,o,s,i,a,l,c,u,h,d,p,g,{$$slots:$={},$$scope:b}=t,{data:y}=t,x=()=>{};return r.$$set=M=>{"data"in M&&n(12,y=M.data),"$$scope"in M&&n(15,b=M.$$scope)},r.$$.update=()=>{4096&r.$$.dirty&&n(9,{title:e,onClick:o,onSuccessMessage:s,iconName:i,buttonText:a,onMouseDown:l,onMouseLeave:c,onMouseOver:u,onBlur:h,onFocus:d}=y,e,(n(8,i),n(12,y)),(n(7,a),n(12,y)),(n(6,l),n(12,y)),(n(5,c),n(12,y)),(n(4,u),n(12,y)),(n(3,h),n(12,y)),(n(2,d),n(12,y)))},[p,x,d,h,u,c,l,a,i,e,function(M){M.stopPropagation(),o(),n(0,p=s),clearTimeout(g),g=setTimeout(x,1500)},function(M){M||(clearTimeout(g),n(0,p=void 0),g=void 0)},y,$,function(M){x=M,n(1,x)},b]}class C2 extends nt{constructor(t){super(),rt(this,t,Y6,Z6,ot,{data:12})}}function X6(r){let t,n=(r[0]??r[6])+"";return{c(){t=W(n)},m(e,o){S(e,t,o)},p(e,o){65&o&&n!==(n=(e[0]??e[6])+"")&&ht(t,n)},d(e){e&&v(t)}}}function Q6(r){let t,n;return t=new gd({props:{iconName:r[7],slot:"iconLeft"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};128&o&&(s.iconName=e[7]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function K6(r){let t,n;return t=new Ie.Item({props:{onSelect:r[8],$$slots:{iconLeft:[Q6],default:[X6]},$$scope:{ctx:r}}}),t.$on("mouseover",r[11]),t.$on("mouseleave",r[12]),t.$on("blur",r[13]),t.$on("focus",r[14]),t.$on("mousedown",r[15]),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};524481&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function J6(r,t,n){let e,o,s,i,a,l,c,u,h,d,p,{data:g}=t,{closeDropdown:$}=t;return r.$$set=b=>{"data"in b&&n(9,g=b.data),"closeDropdown"in b&&n(10,$=b.closeDropdown)},r.$$.update=()=>{512&r.$$.dirty&&n(7,{onClick:e,onSuccessMessage:o,iconName:s,buttonText:i,onMouseDown:a,onMouseLeave:l,onMouseOver:c,onBlur:u,onFocus:h}=g,s,(n(6,i),n(9,g)),(n(5,a),n(9,g)),(n(4,l),n(9,g)),(n(3,c),n(9,g)),(n(2,u),n(9,g)),(n(1,h),n(9,g)))},[d,h,u,c,l,a,i,s,function(){p||(e(),n(0,d=o),p=setTimeout(()=>{n(0,d=void 0),p=void 0,$()},1500))},g,$,b=>c==null?void 0:c(b.detail),b=>l==null?void 0:l(b.detail),b=>u==null?void 0:u(b.detail),b=>h==null?void 0:h(b.detail),b=>a==null?void 0:a(b.detail)]}class t8 extends nt{constructor(t){super(),rt(this,t,J6,K6,ot,{data:9,closeDropdown:10})}}function e8(r){let t,n;return{c(){t=Bt("svg"),n=Bt("path"),T(n,"fill-rule","evenodd"),T(n,"clip-rule","evenodd"),T(n,"d","M8.625 2.5C8.625 3.12132 8.12132 3.625 7.5 3.625C6.87868 3.625 6.375 3.12132 6.375 2.5C6.375 1.87868 6.87868 1.375 7.5 1.375C8.12132 1.375 8.625 1.87868 8.625 2.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM7.5 13.625C8.12132 13.625 8.625 13.1213 8.625 12.5C8.625 11.8787 8.12132 11.375 7.5 11.375C6.87868 11.375 6.375 11.8787 6.375 12.5C6.375 13.1213 6.87868 13.625 7.5 13.625Z"),T(n,"fill","currentColor"),T(t,"width","15"),T(t,"height","15"),T(t,"viewBox","0 0 15 15"),T(t,"fill","none"),T(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){S(e,t,o),O(t,n)},p:H,i:H,o:H,d(e){e&&v(t)}}}class S2 extends nt{constructor(t){super(),rt(this,t,null,e8,ot,{})}}function Hf(r,t,n){const e=r.slice();return e[52]=t[n],e}function Vf(r,t,n){const e=r.slice();return e[52]=t[n],e}function Gf(r){let t,n;return t=new C2({props:{data:{codeblockActionType:le.goTo,title:`Go to ${r[1].relPath}`,onClick:r[5].onClick,onSuccessMessage:"Opening file..."},$$slots:{default:[r8]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};34&o[0]&&(s.data={codeblockActionType:le.goTo,title:`Go to ${e[1].relPath}`,onClick:e[5].onClick,onSuccessMessage:"Opening file..."}),2&o[0]|67108864&o[1]&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function n8(r){let t;return{c(){t=I("span"),T(t,"slot","leftIcon")},m(n,e){S(n,t,e)},p:H,d(n){n&&v(t)}}}function r8(r){let t,n;return t=new So({props:{filepath:r[1].relPath,$$slots:{leftIcon:[n8]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};2&o[0]&&(s.filepath=e[1].relPath),67108864&o[1]&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function o8(r){var o;let t,n,e=!!((o=r[1])!=null&&o.relPath)&&Gf(r);return{c(){t=I("div"),e&&e.c(),T(t,"class","c-codeblock__buttons-container svelte-lp58a3")},m(s,i){S(s,t,i),e&&e.m(t,null),n=!0},p(s,i){var a;(a=s[1])!=null&&a.relPath?e?(e.p(s,i),2&i[0]&&f(e,1)):(e=Gf(s),e.c(),f(e,1),e.m(t,null)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(s){n||(f(e),n=!0)},o(s){m(e),n=!1},d(s){s&&v(t),e&&e.d()}}}function s8(r){let t,n;return t=new k2({props:{location:"topBar",slot:"topBarLeft",$$slots:{default:[o8]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};34&o[0]|67108864&o[1]&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Zf(r){let t,n;return t=new C2({props:{data:r[52]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1024&o[0]&&(s.data=e[52]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Yf(r){let t,n,e;function o(i){r[45](i)}let s={nested:!1,$$slots:{default:[c8]},$$scope:{ctx:r}};return r[6]!==void 0&&(s.requestClose=r[6]),t=new Ie.Root({props:s}),Pt.push(()=>re(t,"requestClose",o)),{c(){_(t.$$.fragment)},m(i,a){k(t,i,a),e=!0},p(i,a){const l={};576&a[0]|67108864&a[1]&&(l.$$scope={dirty:a,ctx:i}),!n&&64&a[0]&&(n=!0,l.requestClose=i[6],oe(()=>n=!1)),t.$set(l)},i(i){e||(f(t.$$.fragment,i),e=!0)},o(i){m(t.$$.fragment,i),e=!1},d(i){C(t,i)}}}function i8(r){let t,n;return t=new S2({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function a8(r){let t,n;return t=new xe({props:{variant:"ghost-block",color:"neutral",size:1,$$slots:{default:[i8]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};67108864&o[1]&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Xf(r){let t,n;return t=new t8({props:{data:r[52],closeDropdown:r[6]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};512&o[0]&&(s.data=e[52]),64&o[0]&&(s.closeDropdown=e[6]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function l8(r){let t,n,e=Gt(r[9]),o=[];for(let i=0;i<e.length;i+=1)o[i]=Xf(Hf(r,e,i));const s=i=>m(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=dt()},m(i,a){for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(i,a);S(i,t,a),n=!0},p(i,a){if(576&a[0]){let l;for(e=Gt(i[9]),l=0;l<e.length;l+=1){const c=Hf(i,e,l);o[l]?(o[l].p(c,a),f(o[l],1)):(o[l]=Xf(c),o[l].c(),f(o[l],1),o[l].m(t.parentNode,t))}for(Y(),l=e.length;l<o.length;l+=1)s(l);X()}},i(i){if(!n){for(let a=0;a<e.length;a+=1)f(o[a]);n=!0}},o(i){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)m(o[a]);n=!1},d(i){i&&v(t),un(o,i)}}}function c8(r){let t,n,e,o;return t=new Ie.Trigger({props:{$$slots:{default:[a8]},$$scope:{ctx:r}}}),e=new Ie.Content({props:{side:"bottom",align:"end",$$slots:{default:[l8]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment),n=J(),_(e.$$.fragment)},m(s,i){k(t,s,i),S(s,n,i),k(e,s,i),o=!0},p(s,i){const a={};67108864&i[1]&&(a.$$scope={dirty:i,ctx:s}),t.$set(a);const l={};576&i[0]|67108864&i[1]&&(l.$$scope={dirty:i,ctx:s}),e.$set(l)},i(s){o||(f(t.$$.fragment,s),f(e.$$.fragment,s),o=!0)},o(s){m(t.$$.fragment,s),m(e.$$.fragment,s),o=!1},d(s){s&&v(n),C(t,s),C(e,s)}}}function u8(r){let t,n,e,o=Gt(r[10]),s=[];for(let l=0;l<o.length;l+=1)s[l]=Zf(Vf(r,o,l));const i=l=>m(s[l],1,1,()=>{s[l]=null});let a=r[9].length&&Yf(r);return{c(){t=I("div");for(let l=0;l<s.length;l+=1)s[l].c();n=J(),a&&a.c(),T(t,"class","c-codeblock__buttons-container svelte-lp58a3")},m(l,c){S(l,t,c);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(t,null);O(t,n),a&&a.m(t,null),e=!0},p(l,c){if(1024&c[0]){let u;for(o=Gt(l[10]),u=0;u<o.length;u+=1){const h=Vf(l,o,u);s[u]?(s[u].p(h,c),f(s[u],1)):(s[u]=Zf(h),s[u].c(),f(s[u],1),s[u].m(t,n))}for(Y(),u=o.length;u<s.length;u+=1)i(u);X()}l[9].length?a?(a.p(l,c),512&c[0]&&f(a,1)):(a=Yf(l),a.c(),f(a,1),a.m(t,null)):a&&(Y(),m(a,1,1,()=>{a=null}),X())},i(l){if(!e){for(let c=0;c<o.length;c+=1)f(s[c]);f(a),e=!0}},o(l){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)m(s[c]);m(a),e=!1},d(l){l&&v(t),un(s,l),a&&a.d()}}}function h8(r){let t,n;return t=new k2({props:{location:"topBar",slot:"topBarRight",align:"left",$$slots:{default:[u8]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1600&o[0]|67108864&o[1]&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function d8(r){let t,n,e;function o(i){r[47](i)}let s={token:r[0],padding:r[8],language:r[7],height:r[2],$$slots:{topBarRight:[h8],topBarLeft:[s8]},$$scope:{ctx:r}};return r[4]!==void 0&&(s.element=r[4]),t=new ld({props:s}),r[46](t),Pt.push(()=>re(t,"element",o)),{c(){_(t.$$.fragment)},m(i,a){k(t,i,a),e=!0},p(i,a){const l={};1&a[0]&&(l.token=i[0]),256&a[0]&&(l.padding=i[8]),128&a[0]&&(l.language=i[7]),4&a[0]&&(l.height=i[2]),1634&a[0]|67108864&a[1]&&(l.$$scope={dirty:a,ctx:i}),!n&&16&a[0]&&(n=!0,l.element=i[4],oe(()=>n=!1)),t.$set(l)},i(i){e||(f(t.$$.fragment,i),e=!0)},o(i){m(t.$$.fragment,i),e=!1},d(i){r[46](null),C(t,i)}}}function p8(r,t,n){let e,o,s,i,a,l,c,u,h,d,p,g,$,b,y,x,M,L,A,B,E,F,U,tt,q,N,R,j,Q,z,G,K=H;r.$$.on_destroy.push(()=>K());let et,{token:ct}=t,{actionButtons:st}=t,{removeDefaultButtons:at=!1}=t,{codeblockMetadata:gt}=t,{height:bt}=t;const Wt=Jt("chatModel");Vt(r,Wt,te=>n(43,z=te));const Ut=Jt("requestId");let we;Vt(r,Ut,te=>n(44,G=te)),Wt||console.warn("ChatModel not found in context -- should you be using this component?");let ye=!1;const Ae=_e(!1);let ve;Vt(r,Ae,te=>n(49,Q=te));let hn,Yt=!1,se=!1;Gs(()=>{hn==null||hn()});let Xn=()=>{};return r.$$set=te=>{"token"in te&&n(0,ct=te.token),"actionButtons"in te&&n(15,st=te.actionButtons),"removeDefaultButtons"in te&&n(16,at=te.removeDefaultButtons),"codeblockMetadata"in te&&n(1,gt=te.codeblockMetadata),"height"in te&&n(2,bt=te.height)},r.$$.update=()=>{var te;8192&r.$$.dirty[1]&&n(30,e=G),4096&r.$$.dirty[1]&&(n(11,o=z==null?void 0:z.currentConversationModel),K(),K=An(o,Ye=>n(42,j=Ye))),2&r.$$.dirty[0]&&(gt!=null&&gt.relPath)&&async function(){gt!=null&&gt.relPath&&(n(17,we=await(Wt==null?void 0:Wt.extensionClient.resolvePath({rootPath:"",relPath:gt==null?void 0:gt.relPath}))),n(18,ye=!0))}(),32768&r.$$.dirty[0]&&n(41,s=st==null?void 0:st.find(Ye=>Ye.primary)),2&r.$$.dirty[0]&&n(34,M=!!(gt!=null&&gt.relPath)),393216&r.$$.dirty[0]|1032&r.$$.dirty[1]&&n(38,i=!s&&M&&ye&&!we),1073741824&r.$$.dirty[0]|2048&r.$$.dirty[1]&&n(21,E=((te=j==null?void 0:j.exchangeWithRequestId(e))==null?void 0:te.status)===an.success),2097168&r.$$.dirty[0]&&ve&&E&&(hn=b2(ve,Ye=>n(19,Yt=Ye),Ye=>n(20,se=Ye))),1077542915&r.$$.dirty[0]&&n(35,{smartPaste:g,canTriggerSmartPaste:$,canPrecomputeSmartPaste:b,smartPasteButton:y,directApplyButton:x}=x2(Wt,gt,ct,e,E,!!we,Yt,se,0,Ye=>id(Ae,Q=Ye,Q)),g,(n(37,$),n(1,gt),n(0,ct),n(30,e),n(21,E),n(17,we),n(19,Yt),n(20,se),n(44,G),n(42,j),n(4,ve)),(n(36,b),n(1,gt),n(0,ct),n(30,e),n(21,E),n(17,we),n(19,Yt),n(20,se),n(44,G),n(42,j),n(4,ve)),(n(27,y),n(1,gt),n(0,ct),n(30,e),n(21,E),n(17,we),n(19,Yt),n(20,se),n(44,G),n(42,j),n(4,ve)),(n(26,x),n(1,gt),n(0,ct),n(30,e),n(21,E),n(17,we),n(19,Yt),n(20,se),n(44,G),n(42,j),n(4,ve))),2&r.$$.dirty[0]&&n(33,L=p2((gt==null?void 0:gt.relPath)??"")),1092&r.$$.dirty[1]&&n(25,a=!s&&$&&!L),33554432&r.$$.dirty[0]|1152&r.$$.dirty[1]&&n(40,l=i||a||s),8&r.$$.dirty[0]&&n(39,c=()=>et==null?void 0:et.getContents()),768&r.$$.dirty[1]&&n(29,u=m2(c,!l)),2&r.$$.dirty[0]|384&r.$$.dirty[1]&&n(28,h=$2(c,gt,Wt,i)),131072&r.$$.dirty[0]|8&r.$$.dirty[1]&&n(24,d=M&&we),2&r.$$.dirty[0]&&n(31,A=!!(gt!=null&&gt.mode)),2&r.$$.dirty[0]|1&r.$$.dirty[1]&&n(32,B=A&&(gt==null?void 0:gt.mode)==="EXCERPT"),3&r.$$.dirty[0]|2&r.$$.dirty[1]&&n(5,p=y2(ct.text,B,gt,Wt)),48&r.$$.dirty[1]&&b&&g({dryRun:!0}),1040187392&r.$$.dirty[0]&&n(23,F=[u,h,...x?[{...x,primary:a}]:[],{...y,primary:!x&&a}]),25264160&r.$$.dirty[0]&&n(22,U=[...st??[],...d?[p]:[],...at?[]:F]),4194304&r.$$.dirty[0]&&n(10,[tt,q]=U.reduce(([Ye,Fr],Pn)=>Pn.primary?[[...Ye,Pn],Fr]:[Ye,[...Fr,Pn]],[[],[]]),tt,(n(9,q),n(22,U),n(15,st),n(24,d),n(5,p),n(16,at),n(23,F),n(34,M),n(17,we),n(0,ct),n(32,B),n(1,gt),n(29,u),n(28,h),n(26,x),n(25,a),n(27,y),n(31,A),n(39,c),n(40,l),n(38,i),n(30,e),n(21,E),n(19,Yt),n(20,se),n(41,s),n(37,$),n(33,L),n(3,et),n(18,ye),n(44,G),n(42,j),n(4,ve))),3&r.$$.dirty[0]&&n(7,R=(gt==null?void 0:gt.language)??ct.lang)},n(8,N={top:30,bottom:8}),[ct,gt,bt,et,ve,p,Xn,R,N,q,tt,o,Wt,Ut,Ae,st,at,we,ye,Yt,se,E,U,F,d,a,x,y,h,u,e,A,B,L,M,g,b,$,i,c,l,s,j,z,G,function(te){Xn=te,n(6,Xn)},function(te){Pt[te?"unshift":"push"](()=>{et=te,n(3,et)})},function(te){ve=te,n(4,ve)}]}class f8 extends nt{constructor(t){super(),rt(this,t,p8,d8,ot,{token:0,actionButtons:15,removeDefaultButtons:16,codeblockMetadata:1,height:2},null,[-1,-1])}}var T2={exports:{}};T2.exports=function(){var r=1e3,t=6e4,n=36e5,e="millisecond",o="second",s="minute",i="hour",a="day",l="week",c="month",u="quarter",h="year",d="date",p="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,$=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(N){var R=["th","st","nd","rd"],j=N%100;return"["+N+(R[(j-20)%10]||R[j]||R[0])+"]"}},y=function(N,R,j){var Q=String(N);return!Q||Q.length>=R?N:""+Array(R+1-Q.length).join(j)+N},x={s:y,z:function(N){var R=-N.utcOffset(),j=Math.abs(R),Q=Math.floor(j/60),z=j%60;return(R<=0?"+":"-")+y(Q,2,"0")+":"+y(z,2,"0")},m:function N(R,j){if(R.date()<j.date())return-N(j,R);var Q=12*(j.year()-R.year())+(j.month()-R.month()),z=R.clone().add(Q,c),G=j-z<0,K=R.clone().add(Q+(G?-1:1),c);return+(-(Q+(j-z)/(G?z-K:K-z))||0)},a:function(N){return N<0?Math.ceil(N)||0:Math.floor(N)},p:function(N){return{M:c,y:h,w:l,d:a,D:d,h:i,m:s,s:o,ms:e,Q:u}[N]||String(N||"").toLowerCase().replace(/s$/,"")},u:function(N){return N===void 0}},M="en",L={};L[M]=b;var A="$isDayjsObject",B=function(N){return N instanceof tt||!(!N||!N[A])},E=function N(R,j,Q){var z;if(!R)return M;if(typeof R=="string"){var G=R.toLowerCase();L[G]&&(z=G),j&&(L[G]=j,z=G);var K=R.split("-");if(!z&&K.length>1)return N(K[0])}else{var et=R.name;L[et]=R,z=et}return!Q&&z&&(M=z),z||!Q&&M},F=function(N,R){if(B(N))return N.clone();var j=typeof R=="object"?R:{};return j.date=N,j.args=arguments,new tt(j)},U=x;U.l=E,U.i=B,U.w=function(N,R){return F(N,{locale:R.$L,utc:R.$u,x:R.$x,$offset:R.$offset})};var tt=function(){function N(j){this.$L=E(j.locale,null,!0),this.parse(j),this.$x=this.$x||j.x||{},this[A]=!0}var R=N.prototype;return R.parse=function(j){this.$d=function(Q){var z=Q.date,G=Q.utc;if(z===null)return new Date(NaN);if(U.u(z))return new Date;if(z instanceof Date)return new Date(z);if(typeof z=="string"&&!/Z$/i.test(z)){var K=z.match(g);if(K){var et=K[2]-1||0,ct=(K[7]||"0").substring(0,3);return G?new Date(Date.UTC(K[1],et,K[3]||1,K[4]||0,K[5]||0,K[6]||0,ct)):new Date(K[1],et,K[3]||1,K[4]||0,K[5]||0,K[6]||0,ct)}}return new Date(z)}(j),this.init()},R.init=function(){var j=this.$d;this.$y=j.getFullYear(),this.$M=j.getMonth(),this.$D=j.getDate(),this.$W=j.getDay(),this.$H=j.getHours(),this.$m=j.getMinutes(),this.$s=j.getSeconds(),this.$ms=j.getMilliseconds()},R.$utils=function(){return U},R.isValid=function(){return this.$d.toString()!==p},R.isSame=function(j,Q){var z=F(j);return this.startOf(Q)<=z&&z<=this.endOf(Q)},R.isAfter=function(j,Q){return F(j)<this.startOf(Q)},R.isBefore=function(j,Q){return this.endOf(Q)<F(j)},R.$g=function(j,Q,z){return U.u(j)?this[Q]:this.set(z,j)},R.unix=function(){return Math.floor(this.valueOf()/1e3)},R.valueOf=function(){return this.$d.getTime()},R.startOf=function(j,Q){var z=this,G=!!U.u(Q)||Q,K=U.p(j),et=function(we,ye){var Ae=U.w(z.$u?Date.UTC(z.$y,ye,we):new Date(z.$y,ye,we),z);return G?Ae:Ae.endOf(a)},ct=function(we,ye){return U.w(z.toDate()[we].apply(z.toDate("s"),(G?[0,0,0,0]:[23,59,59,999]).slice(ye)),z)},st=this.$W,at=this.$M,gt=this.$D,bt="set"+(this.$u?"UTC":"");switch(K){case h:return G?et(1,0):et(31,11);case c:return G?et(1,at):et(0,at+1);case l:var Wt=this.$locale().weekStart||0,Ut=(st<Wt?st+7:st)-Wt;return et(G?gt-Ut:gt+(6-Ut),at);case a:case d:return ct(bt+"Hours",0);case i:return ct(bt+"Minutes",1);case s:return ct(bt+"Seconds",2);case o:return ct(bt+"Milliseconds",3);default:return this.clone()}},R.endOf=function(j){return this.startOf(j,!1)},R.$set=function(j,Q){var z,G=U.p(j),K="set"+(this.$u?"UTC":""),et=(z={},z[a]=K+"Date",z[d]=K+"Date",z[c]=K+"Month",z[h]=K+"FullYear",z[i]=K+"Hours",z[s]=K+"Minutes",z[o]=K+"Seconds",z[e]=K+"Milliseconds",z)[G],ct=G===a?this.$D+(Q-this.$W):Q;if(G===c||G===h){var st=this.clone().set(d,1);st.$d[et](ct),st.init(),this.$d=st.set(d,Math.min(this.$D,st.daysInMonth())).$d}else et&&this.$d[et](ct);return this.init(),this},R.set=function(j,Q){return this.clone().$set(j,Q)},R.get=function(j){return this[U.p(j)]()},R.add=function(j,Q){var z,G=this;j=Number(j);var K=U.p(Q),et=function(at){var gt=F(G);return U.w(gt.date(gt.date()+Math.round(at*j)),G)};if(K===c)return this.set(c,this.$M+j);if(K===h)return this.set(h,this.$y+j);if(K===a)return et(1);if(K===l)return et(7);var ct=(z={},z[s]=t,z[i]=n,z[o]=r,z)[K]||1,st=this.$d.getTime()+j*ct;return U.w(st,this)},R.subtract=function(j,Q){return this.add(-1*j,Q)},R.format=function(j){var Q=this,z=this.$locale();if(!this.isValid())return z.invalidDate||p;var G=j||"YYYY-MM-DDTHH:mm:ssZ",K=U.z(this),et=this.$H,ct=this.$m,st=this.$M,at=z.weekdays,gt=z.months,bt=z.meridiem,Wt=function(ye,Ae,ve,hn){return ye&&(ye[Ae]||ye(Q,G))||ve[Ae].slice(0,hn)},Ut=function(ye){return U.s(et%12||12,ye,"0")},we=bt||function(ye,Ae,ve){var hn=ye<12?"AM":"PM";return ve?hn.toLowerCase():hn};return G.replace($,function(ye,Ae){return Ae||function(ve){switch(ve){case"YY":return String(Q.$y).slice(-2);case"YYYY":return U.s(Q.$y,4,"0");case"M":return st+1;case"MM":return U.s(st+1,2,"0");case"MMM":return Wt(z.monthsShort,st,gt,3);case"MMMM":return Wt(gt,st);case"D":return Q.$D;case"DD":return U.s(Q.$D,2,"0");case"d":return String(Q.$W);case"dd":return Wt(z.weekdaysMin,Q.$W,at,2);case"ddd":return Wt(z.weekdaysShort,Q.$W,at,3);case"dddd":return at[Q.$W];case"H":return String(et);case"HH":return U.s(et,2,"0");case"h":return Ut(1);case"hh":return Ut(2);case"a":return we(et,ct,!0);case"A":return we(et,ct,!1);case"m":return String(ct);case"mm":return U.s(ct,2,"0");case"s":return String(Q.$s);case"ss":return U.s(Q.$s,2,"0");case"SSS":return U.s(Q.$ms,3,"0");case"Z":return K}return null}(ye)||K.replace(":","")})},R.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},R.diff=function(j,Q,z){var G,K=this,et=U.p(Q),ct=F(j),st=(ct.utcOffset()-this.utcOffset())*t,at=this-ct,gt=function(){return U.m(K,ct)};switch(et){case h:G=gt()/12;break;case c:G=gt();break;case u:G=gt()/3;break;case l:G=(at-st)/6048e5;break;case a:G=(at-st)/864e5;break;case i:G=at/n;break;case s:G=at/t;break;case o:G=at/r;break;default:G=at}return z?G:U.a(G)},R.daysInMonth=function(){return this.endOf(c).$D},R.$locale=function(){return L[this.$L]},R.locale=function(j,Q){if(!j)return this.$L;var z=this.clone(),G=E(j,Q,!0);return G&&(z.$L=G),z},R.clone=function(){return U.w(this.$d,this)},R.toDate=function(){return new Date(this.valueOf())},R.toJSON=function(){return this.isValid()?this.toISOString():null},R.toISOString=function(){return this.$d.toISOString()},R.toString=function(){return this.$d.toUTCString()},N}(),q=tt.prototype;return F.prototype=q,[["$ms",e],["$s",o],["$m",s],["$H",i],["$W",a],["$M",c],["$y",h],["$D",d]].forEach(function(N){q[N[1]]=function(R){return this.$g(R,N[0],N[1])}}),F.extend=function(N,R){return N.$i||(N(R,tt,F),N.$i=!0),F},F.locale=E,F.isDayjs=B,F.unix=function(N){return F(1e3*N)},F.en=L[M],F.Ls=L,F.p={},F}();const g8=sa(T2.exports),Qa={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:r=>r>=255?255:r<0?0:r,g:r=>r>=255?255:r<0?0:r,b:r=>r>=255?255:r<0?0:r,h:r=>r%360,s:r=>r>=100?100:r<0?0:r,l:r=>r>=100?100:r<0?0:r,a:r=>r>=1?1:r<0?0:r},toLinear:r=>{const t=r/255;return r>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92},hue2rgb:(r,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?r+6*(t-r)*n:n<.5?t:n<2/3?r+(t-r)*(2/3-n)*6:r),hsl2rgb:({h:r,s:t,l:n},e)=>{if(!t)return 2.55*n;r/=360,t/=100;const o=(n/=100)<.5?n*(1+t):n+t-n*t,s=2*n-o;switch(e){case"r":return 255*Qa.hue2rgb(s,o,r+1/3);case"g":return 255*Qa.hue2rgb(s,o,r);case"b":return 255*Qa.hue2rgb(s,o,r-1/3)}},rgb2hsl:({r,g:t,b:n},e)=>{r/=255,t/=255,n/=255;const o=Math.max(r,t,n),s=Math.min(r,t,n),i=(o+s)/2;if(e==="l")return 100*i;if(o===s)return 0;const a=o-s;if(e==="s")return 100*(i>.5?a/(2-o-s):a/(o+s));switch(o){case r:return 60*((t-n)/a+(t<n?6:0));case t:return 60*((n-r)/a+2);case n:return 60*((r-t)/a+4);default:return-1}}},m8={clamp:(r,t,n)=>t>n?Math.min(t,Math.max(n,r)):Math.min(n,Math.max(t,r)),round:r=>Math.round(1e10*r)/1e10},$8={dec2hex:r=>{const t=Math.round(r).toString(16);return t.length>1?t:`0${t}`}},It={channel:Qa,lang:m8,unit:$8},ao={};for(let r=0;r<=255;r++)ao[r]=It.unit.dec2hex(r);const nh=0,cs=1,Ao=2;class y8{constructor(){this.type=nh}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=nh}is(t){return this.type===t}}const _c=new class{constructor(r,t){this.color=t,this.changed=!1,this.data=r,this.type=new y8}set(r,t){return this.color=t,this.changed=!1,this.data=r,this.type.type=nh,this}_ensureHSL(){const r=this.data,{h:t,s:n,l:e}=r;t===void 0&&(r.h=It.channel.rgb2hsl(r,"h")),n===void 0&&(r.s=It.channel.rgb2hsl(r,"s")),e===void 0&&(r.l=It.channel.rgb2hsl(r,"l"))}_ensureRGB(){const r=this.data,{r:t,g:n,b:e}=r;t===void 0&&(r.r=It.channel.hsl2rgb(r,"r")),n===void 0&&(r.g=It.channel.hsl2rgb(r,"g")),e===void 0&&(r.b=It.channel.hsl2rgb(r,"b"))}get r(){const r=this.data,t=r.r;return this.type.is(Ao)||t===void 0?(this._ensureHSL(),It.channel.hsl2rgb(r,"r")):t}get g(){const r=this.data,t=r.g;return this.type.is(Ao)||t===void 0?(this._ensureHSL(),It.channel.hsl2rgb(r,"g")):t}get b(){const r=this.data,t=r.b;return this.type.is(Ao)||t===void 0?(this._ensureHSL(),It.channel.hsl2rgb(r,"b")):t}get h(){const r=this.data,t=r.h;return this.type.is(cs)||t===void 0?(this._ensureRGB(),It.channel.rgb2hsl(r,"h")):t}get s(){const r=this.data,t=r.s;return this.type.is(cs)||t===void 0?(this._ensureRGB(),It.channel.rgb2hsl(r,"s")):t}get l(){const r=this.data,t=r.l;return this.type.is(cs)||t===void 0?(this._ensureRGB(),It.channel.rgb2hsl(r,"l")):t}get a(){return this.data.a}set r(r){this.type.set(cs),this.changed=!0,this.data.r=r}set g(r){this.type.set(cs),this.changed=!0,this.data.g=r}set b(r){this.type.set(cs),this.changed=!0,this.data.b=r}set h(r){this.type.set(Ao),this.changed=!0,this.data.h=r}set s(r){this.type.set(Ao),this.changed=!0,this.data.s=r}set l(r){this.type.set(Ao),this.changed=!0,this.data.l=r}set a(r){this.changed=!0,this.data.a=r}}({r:0,g:0,b:0,a:0},"transparent"),ys={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:r=>{if(r.charCodeAt(0)!==35)return;const t=r.match(ys.re);if(!t)return;const n=t[1],e=parseInt(n,16),o=n.length,s=o%4==0,i=o>4,a=i?1:17,l=i?8:4,c=s?0:-1,u=i?255:15;return _c.set({r:(e>>l*(c+3)&u)*a,g:(e>>l*(c+2)&u)*a,b:(e>>l*(c+1)&u)*a,a:s?(e&u)*a/255:1},r)},stringify:r=>{const{r:t,g:n,b:e,a:o}=r;return o<1?`#${ao[Math.round(t)]}${ao[Math.round(n)]}${ao[Math.round(e)]}${ao[Math.round(255*o)]}`:`#${ao[Math.round(t)]}${ao[Math.round(n)]}${ao[Math.round(e)]}`}},zo={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:r=>{const t=r.match(zo.hueRe);if(t){const[,n,e]=t;switch(e){case"grad":return It.channel.clamp.h(.9*parseFloat(n));case"rad":return It.channel.clamp.h(180*parseFloat(n)/Math.PI);case"turn":return It.channel.clamp.h(360*parseFloat(n))}}return It.channel.clamp.h(parseFloat(r))},parse:r=>{const t=r.charCodeAt(0);if(t!==104&&t!==72)return;const n=r.match(zo.re);if(!n)return;const[,e,o,s,i,a]=n;return _c.set({h:zo._hue2deg(e),s:It.channel.clamp.s(parseFloat(o)),l:It.channel.clamp.l(parseFloat(s)),a:i?It.channel.clamp.a(a?parseFloat(i)/100:parseFloat(i)):1},r)},stringify:r=>{const{h:t,s:n,l:e,a:o}=r;return o<1?`hsla(${It.lang.round(t)}, ${It.lang.round(n)}%, ${It.lang.round(e)}%, ${o})`:`hsl(${It.lang.round(t)}, ${It.lang.round(n)}%, ${It.lang.round(e)}%)`}},Fi={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:r=>{r=r.toLowerCase();const t=Fi.colors[r];if(t)return ys.parse(t)},stringify:r=>{const t=ys.stringify(r);for(const n in Fi.colors)if(Fi.colors[n]===t)return n}},Ci={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:r=>{const t=r.charCodeAt(0);if(t!==114&&t!==82)return;const n=r.match(Ci.re);if(!n)return;const[,e,o,s,i,a,l,c,u]=n;return _c.set({r:It.channel.clamp.r(o?2.55*parseFloat(e):parseFloat(e)),g:It.channel.clamp.g(i?2.55*parseFloat(s):parseFloat(s)),b:It.channel.clamp.b(l?2.55*parseFloat(a):parseFloat(a)),a:c?It.channel.clamp.a(u?parseFloat(c)/100:parseFloat(c)):1},r)},stringify:r=>{const{r:t,g:n,b:e,a:o}=r;return o<1?`rgba(${It.lang.round(t)}, ${It.lang.round(n)}, ${It.lang.round(e)}, ${It.lang.round(o)})`:`rgb(${It.lang.round(t)}, ${It.lang.round(n)}, ${It.lang.round(e)})`}},Mr={format:{keyword:Fi,hex:ys,rgb:Ci,rgba:Ci,hsl:zo,hsla:zo},parse:r=>{if(typeof r!="string")return r;const t=ys.parse(r)||Ci.parse(r)||zo.parse(r)||Fi.parse(r);if(t)return t;throw new Error(`Unsupported color format: "${r}"`)},stringify:r=>!r.changed&&r.color?r.color:r.type.is(Ao)||r.data.r===void 0?zo.stringify(r):r.a<1||!Number.isInteger(r.r)||!Number.isInteger(r.g)||!Number.isInteger(r.b)?Ci.stringify(r):ys.stringify(r)},M2=(r,t)=>{const n=Mr.parse(r);for(const e in t)n[e]=It.channel.clamp[e](t[e]);return Mr.stringify(n)},Di=(r,t,n=0,e=1)=>{if(typeof r!="number")return M2(r,{a:t});const o=_c.set({r:It.channel.clamp.r(r),g:It.channel.clamp.g(t),b:It.channel.clamp.b(n),a:It.channel.clamp.a(e)});return Mr.stringify(o)},x8=r=>(t=>{const{r:n,g:e,b:o}=Mr.parse(t),s=.2126*It.channel.toLinear(n)+.7152*It.channel.toLinear(e)+.0722*It.channel.toLinear(o);return It.lang.round(s)})(r)>=.5,ua=r=>!x8(r),A2=(r,t,n)=>{const e=Mr.parse(r),o=e[t],s=It.channel.clamp[t](o+n);return o!==s&&(e[t]=s),Mr.stringify(e)},St=(r,t)=>A2(r,"l",t),At=(r,t)=>A2(r,"l",-t),Z=(r,t)=>{const n=Mr.parse(r),e={};for(const o in t)t[o]&&(e[o]=n[o]+t[o]);return M2(r,e)},ft=(r,t=100)=>{const n=Mr.parse(r);return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,((e,o,s=50)=>{const{r:i,g:a,b:l,a:c}=Mr.parse(e),{r:u,g:h,b:d,a:p}=Mr.parse(o),g=s/100,$=2*g-1,b=c-p,y=(($*b==-1?$:($+b)/(1+$*b))+1)/2,x=1-y;return Di(i*y+u*x,a*y+h*x,l*y+d*x,c*g+p*(1-g))})(n,r,t)},{entries:L2,setPrototypeOf:Qf,isFrozen:b8,getPrototypeOf:w8,getOwnPropertyDescriptor:v8}=Object;let{freeze:En,seal:tr,create:E2}=Object,{apply:rh,construct:oh}=typeof Reflect<"u"&&Reflect;En||(En=function(r){return r}),tr||(tr=function(r){return r}),rh||(rh=function(r,t,n){return r.apply(t,n)}),oh||(oh=function(r,t){return new r(...t)});const Ea=Bn(Array.prototype.forEach),_8=Bn(Array.prototype.lastIndexOf),Kf=Bn(Array.prototype.pop),ci=Bn(Array.prototype.push),k8=Bn(Array.prototype.splice),Ka=Bn(String.prototype.toLowerCase),pu=Bn(String.prototype.toString),Jf=Bn(String.prototype.match),ui=Bn(String.prototype.replace),C8=Bn(String.prototype.indexOf),S8=Bn(String.prototype.trim),or=Bn(Object.prototype.hasOwnProperty),vn=Bn(RegExp.prototype.test),hi=(t1=TypeError,function(){for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return oh(t1,t)});var t1;function Bn(r){return function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),o=1;o<n;o++)e[o-1]=arguments[o];return rh(r,t,e)}}function Qt(r,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ka;Qf&&Qf(r,null);let e=t.length;for(;e--;){let o=t[e];if(typeof o=="string"){const s=n(o);s!==o&&(b8(t)||(t[e]=s),o=s)}r[o]=!0}return r}function T8(r){for(let t=0;t<r.length;t++)or(r,t)||(r[t]=null);return r}function Lo(r){const t=E2(null);for(const[n,e]of L2(r))or(r,n)&&(Array.isArray(e)?t[n]=T8(e):e&&typeof e=="object"&&e.constructor===Object?t[n]=Lo(e):t[n]=e);return t}function di(r,t){for(;r!==null;){const n=v8(r,t);if(n){if(n.get)return Bn(n.get);if(typeof n.value=="function")return Bn(n.value)}r=w8(r)}return function(){return null}}const e1=En(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),fu=En(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),gu=En(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),M8=En(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mu=En(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),A8=En(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),n1=En(["#text"]),r1=En(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),$u=En(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),o1=En(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ba=En(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),L8=tr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),E8=tr(/<%[\w\W]*|[\w\W]*%>/gm),B8=tr(/\$\{[\w\W]*/gm),I8=tr(/^data-[\-\w.\u00B7-\uFFFF]+$/),F8=tr(/^aria-[\-\w]+$/),B2=tr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),D8=tr(/^(?:\w+script|data):/i),O8=tr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),I2=tr(/^html$/i),z8=tr(/^[a-z][.\w]*(-[.\w]+)+$/i);var s1=Object.freeze({__proto__:null,ARIA_ATTR:F8,ATTR_WHITESPACE:O8,CUSTOM_ELEMENT:z8,DATA_ATTR:I8,DOCTYPE_NAME:I2,ERB_EXPR:E8,IS_ALLOWED_URI:B2,IS_SCRIPT_OR_DATA:D8,MUSTACHE_EXPR:L8,TMPLIT_EXPR:B8});const N8=1,R8=3,P8=7,U8=8,q8=9,j8=function(){return typeof window>"u"?null:window};var F2,Ds=function r(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:j8();const n=P=>r(P);if(n.version="3.2.4",n.removed=[],!t||!t.document||t.document.nodeType!==q8||!t.Element)return n.isSupported=!1,n;let{document:e}=t;const o=e,s=o.currentScript,{DocumentFragment:i,HTMLTemplateElement:a,Node:l,Element:c,NodeFilter:u,NamedNodeMap:h=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:p,trustedTypes:g}=t,$=c.prototype,b=di($,"cloneNode"),y=di($,"remove"),x=di($,"nextSibling"),M=di($,"childNodes"),L=di($,"parentNode");if(typeof a=="function"){const P=e.createElement("template");P.content&&P.content.ownerDocument&&(e=P.content.ownerDocument)}let A,B="";const{implementation:E,createNodeIterator:F,createDocumentFragment:U,getElementsByTagName:tt}=e,{importNode:q}=o;let N={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported=typeof L2=="function"&&typeof L=="function"&&E&&E.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:R,ERB_EXPR:j,TMPLIT_EXPR:Q,DATA_ATTR:z,ARIA_ATTR:G,IS_SCRIPT_OR_DATA:K,ATTR_WHITESPACE:et,CUSTOM_ELEMENT:ct}=s1;let{IS_ALLOWED_URI:st}=s1,at=null;const gt=Qt({},[...e1,...fu,...gu,...mu,...n1]);let bt=null;const Wt=Qt({},[...r1,...$u,...o1,...Ba]);let Ut=Object.seal(E2(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),we=null,ye=null,Ae=!0,ve=!0,hn=!1,Yt=!0,se=!1,Xn=!0,te=!1,Ye=!1,Fr=!1,Pn=!1,xa=!1,ba=!1,kp=!0,Cp=!1,Hc=!0,si=!1,os={},ss=null;const Sp=Qt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Tp=null;const Mp=Qt({},["audio","video","img","source","image","track"]);let Vc=null;const Ap=Qt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),wa="http://www.w3.org/1998/Math/MathML",va="http://www.w3.org/2000/svg",Dr="http://www.w3.org/1999/xhtml";let is=Dr,Gc=!1,Zc=null;const u_=Qt({},[wa,va,Dr],pu);let _a=Qt({},["mi","mo","mn","ms","mtext"]),ka=Qt({},["annotation-xml"]);const h_=Qt({},["title","style","font","a","script"]);let ii=null;const d_=["application/xhtml+xml","text/html"];let Xe=null,as=null;const p_=e.createElement("form"),Lp=function(P){return P instanceof RegExp||P instanceof Function},Yc=function(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!as||as!==P){if(P&&typeof P=="object"||(P={}),P=Lo(P),ii=d_.indexOf(P.PARSER_MEDIA_TYPE)===-1?"text/html":P.PARSER_MEDIA_TYPE,Xe=ii==="application/xhtml+xml"?pu:Ka,at=or(P,"ALLOWED_TAGS")?Qt({},P.ALLOWED_TAGS,Xe):gt,bt=or(P,"ALLOWED_ATTR")?Qt({},P.ALLOWED_ATTR,Xe):Wt,Zc=or(P,"ALLOWED_NAMESPACES")?Qt({},P.ALLOWED_NAMESPACES,pu):u_,Vc=or(P,"ADD_URI_SAFE_ATTR")?Qt(Lo(Ap),P.ADD_URI_SAFE_ATTR,Xe):Ap,Tp=or(P,"ADD_DATA_URI_TAGS")?Qt(Lo(Mp),P.ADD_DATA_URI_TAGS,Xe):Mp,ss=or(P,"FORBID_CONTENTS")?Qt({},P.FORBID_CONTENTS,Xe):Sp,we=or(P,"FORBID_TAGS")?Qt({},P.FORBID_TAGS,Xe):{},ye=or(P,"FORBID_ATTR")?Qt({},P.FORBID_ATTR,Xe):{},os=!!or(P,"USE_PROFILES")&&P.USE_PROFILES,Ae=P.ALLOW_ARIA_ATTR!==!1,ve=P.ALLOW_DATA_ATTR!==!1,hn=P.ALLOW_UNKNOWN_PROTOCOLS||!1,Yt=P.ALLOW_SELF_CLOSE_IN_ATTR!==!1,se=P.SAFE_FOR_TEMPLATES||!1,Xn=P.SAFE_FOR_XML!==!1,te=P.WHOLE_DOCUMENT||!1,Pn=P.RETURN_DOM||!1,xa=P.RETURN_DOM_FRAGMENT||!1,ba=P.RETURN_TRUSTED_TYPE||!1,Fr=P.FORCE_BODY||!1,kp=P.SANITIZE_DOM!==!1,Cp=P.SANITIZE_NAMED_PROPS||!1,Hc=P.KEEP_CONTENT!==!1,si=P.IN_PLACE||!1,st=P.ALLOWED_URI_REGEXP||B2,is=P.NAMESPACE||Dr,_a=P.MATHML_TEXT_INTEGRATION_POINTS||_a,ka=P.HTML_INTEGRATION_POINTS||ka,Ut=P.CUSTOM_ELEMENT_HANDLING||{},P.CUSTOM_ELEMENT_HANDLING&&Lp(P.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ut.tagNameCheck=P.CUSTOM_ELEMENT_HANDLING.tagNameCheck),P.CUSTOM_ELEMENT_HANDLING&&Lp(P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ut.attributeNameCheck=P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),P.CUSTOM_ELEMENT_HANDLING&&typeof P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ut.allowCustomizedBuiltInElements=P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),se&&(ve=!1),xa&&(Pn=!0),os&&(at=Qt({},n1),bt=[],os.html===!0&&(Qt(at,e1),Qt(bt,r1)),os.svg===!0&&(Qt(at,fu),Qt(bt,$u),Qt(bt,Ba)),os.svgFilters===!0&&(Qt(at,gu),Qt(bt,$u),Qt(bt,Ba)),os.mathMl===!0&&(Qt(at,mu),Qt(bt,o1),Qt(bt,Ba))),P.ADD_TAGS&&(at===gt&&(at=Lo(at)),Qt(at,P.ADD_TAGS,Xe)),P.ADD_ATTR&&(bt===Wt&&(bt=Lo(bt)),Qt(bt,P.ADD_ATTR,Xe)),P.ADD_URI_SAFE_ATTR&&Qt(Vc,P.ADD_URI_SAFE_ATTR,Xe),P.FORBID_CONTENTS&&(ss===Sp&&(ss=Lo(ss)),Qt(ss,P.FORBID_CONTENTS,Xe)),Hc&&(at["#text"]=!0),te&&Qt(at,["html","head","body"]),at.table&&(Qt(at,["tbody"]),delete we.tbody),P.TRUSTED_TYPES_POLICY){if(typeof P.TRUSTED_TYPES_POLICY.createHTML!="function")throw hi('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof P.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw hi('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');A=P.TRUSTED_TYPES_POLICY,B=A.createHTML("")}else A===void 0&&(A=function(wt,mt){if(typeof wt!="object"||typeof wt.createPolicy!="function")return null;let ne=null;const ue="data-tt-policy-suffix";mt&&mt.hasAttribute(ue)&&(ne=mt.getAttribute(ue));const Xt="dompurify"+(ne?"#"+ne:"");try{return wt.createPolicy(Xt,{createHTML:We=>We,createScriptURL:We=>We})}catch{return console.warn("TrustedTypes policy "+Xt+" could not be created."),null}}(g,s)),A!==null&&typeof B=="string"&&(B=A.createHTML(""));En&&En(P),as=P}},Ep=Qt({},[...fu,...gu,...M8]),Bp=Qt({},[...mu,...A8]),yr=function(P){ci(n.removed,{element:P});try{L(P).removeChild(P)}catch{y(P)}},Ca=function(P,wt){try{ci(n.removed,{attribute:wt.getAttributeNode(P),from:wt})}catch{ci(n.removed,{attribute:null,from:wt})}if(wt.removeAttribute(P),P==="is")if(Pn||xa)try{yr(wt)}catch{}else try{wt.setAttribute(P,"")}catch{}},Ip=function(P){let wt=null,mt=null;if(Fr)P="<remove></remove>"+P;else{const Xt=Jf(P,/^[\r\n\t ]+/);mt=Xt&&Xt[0]}ii==="application/xhtml+xml"&&is===Dr&&(P='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+P+"</body></html>");const ne=A?A.createHTML(P):P;if(is===Dr)try{wt=new p().parseFromString(ne,ii)}catch{}if(!wt||!wt.documentElement){wt=E.createDocument(is,"template",null);try{wt.documentElement.innerHTML=Gc?B:ne}catch{}}const ue=wt.body||wt.documentElement;return P&&mt&&ue.insertBefore(e.createTextNode(mt),ue.childNodes[0]||null),is===Dr?tt.call(wt,te?"html":"body")[0]:te?wt.documentElement:ue},Fp=function(P){return F.call(P.ownerDocument||P,P,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},Xc=function(P){return P instanceof d&&(typeof P.nodeName!="string"||typeof P.textContent!="string"||typeof P.removeChild!="function"||!(P.attributes instanceof h)||typeof P.removeAttribute!="function"||typeof P.setAttribute!="function"||typeof P.namespaceURI!="string"||typeof P.insertBefore!="function"||typeof P.hasChildNodes!="function")},Dp=function(P){return typeof l=="function"&&P instanceof l};function Or(P,wt,mt){Ea(P,ne=>{ne.call(n,wt,mt,as)})}const Op=function(P){let wt=null;if(Or(N.beforeSanitizeElements,P,null),Xc(P))return yr(P),!0;const mt=Xe(P.nodeName);if(Or(N.uponSanitizeElement,P,{tagName:mt,allowedTags:at}),P.hasChildNodes()&&!Dp(P.firstElementChild)&&vn(/<[/\w]/g,P.innerHTML)&&vn(/<[/\w]/g,P.textContent)||P.nodeType===P8||Xn&&P.nodeType===U8&&vn(/<[/\w]/g,P.data))return yr(P),!0;if(!at[mt]||we[mt]){if(!we[mt]&&Np(mt)&&(Ut.tagNameCheck instanceof RegExp&&vn(Ut.tagNameCheck,mt)||Ut.tagNameCheck instanceof Function&&Ut.tagNameCheck(mt)))return!1;if(Hc&&!ss[mt]){const ne=L(P)||P.parentNode,ue=M(P)||P.childNodes;if(ue&&ne)for(let Xt=ue.length-1;Xt>=0;--Xt){const We=b(ue[Xt],!0);We.__removalCount=(P.__removalCount||0)+1,ne.insertBefore(We,x(P))}}return yr(P),!0}return P instanceof c&&!function(ne){let ue=L(ne);ue&&ue.tagName||(ue={namespaceURI:is,tagName:"template"});const Xt=Ka(ne.tagName),We=Ka(ue.tagName);return!!Zc[ne.namespaceURI]&&(ne.namespaceURI===va?ue.namespaceURI===Dr?Xt==="svg":ue.namespaceURI===wa?Xt==="svg"&&(We==="annotation-xml"||_a[We]):!!Ep[Xt]:ne.namespaceURI===wa?ue.namespaceURI===Dr?Xt==="math":ue.namespaceURI===va?Xt==="math"&&ka[We]:!!Bp[Xt]:ne.namespaceURI===Dr?!(ue.namespaceURI===va&&!ka[We])&&!(ue.namespaceURI===wa&&!_a[We])&&!Bp[Xt]&&(h_[Xt]||!Ep[Xt]):!(ii!=="application/xhtml+xml"||!Zc[ne.namespaceURI]))}(P)?(yr(P),!0):mt!=="noscript"&&mt!=="noembed"&&mt!=="noframes"||!vn(/<\/no(script|embed|frames)/i,P.innerHTML)?(se&&P.nodeType===R8&&(wt=P.textContent,Ea([R,j,Q],ne=>{wt=ui(wt,ne," ")}),P.textContent!==wt&&(ci(n.removed,{element:P.cloneNode()}),P.textContent=wt)),Or(N.afterSanitizeElements,P,null),!1):(yr(P),!0)},zp=function(P,wt,mt){if(kp&&(wt==="id"||wt==="name")&&(mt in e||mt in p_))return!1;if(!(ve&&!ye[wt]&&vn(z,wt))){if(!(Ae&&vn(G,wt))){if(!bt[wt]||ye[wt]){if(!(Np(P)&&(Ut.tagNameCheck instanceof RegExp&&vn(Ut.tagNameCheck,P)||Ut.tagNameCheck instanceof Function&&Ut.tagNameCheck(P))&&(Ut.attributeNameCheck instanceof RegExp&&vn(Ut.attributeNameCheck,wt)||Ut.attributeNameCheck instanceof Function&&Ut.attributeNameCheck(wt))||wt==="is"&&Ut.allowCustomizedBuiltInElements&&(Ut.tagNameCheck instanceof RegExp&&vn(Ut.tagNameCheck,mt)||Ut.tagNameCheck instanceof Function&&Ut.tagNameCheck(mt))))return!1}else if(!Vc[wt]){if(!vn(st,ui(mt,et,""))){if((wt!=="src"&&wt!=="xlink:href"&&wt!=="href"||P==="script"||C8(mt,"data:")!==0||!Tp[P])&&!(hn&&!vn(K,ui(mt,et,"")))){if(mt)return!1}}}}}return!0},Np=function(P){return P!=="annotation-xml"&&Jf(P,ct)},Rp=function(P){Or(N.beforeSanitizeAttributes,P,null);const{attributes:wt}=P;if(!wt||Xc(P))return;const mt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:bt,forceKeepAttr:void 0};let ne=wt.length;for(;ne--;){const ue=wt[ne],{name:Xt,namespaceURI:We,value:zr}=ue,xr=Xe(Xt);let wn=Xt==="value"?zr:S8(zr);if(mt.attrName=xr,mt.attrValue=wn,mt.keepAttr=!0,mt.forceKeepAttr=void 0,Or(N.uponSanitizeAttribute,P,mt),wn=mt.attrValue,!Cp||xr!=="id"&&xr!=="name"||(Ca(Xt,P),wn="user-content-"+wn),Xn&&vn(/((--!?|])>)|<\/(style|title)/i,wn)){Ca(Xt,P);continue}if(mt.forceKeepAttr||(Ca(Xt,P),!mt.keepAttr))continue;if(!Yt&&vn(/\/>/i,wn)){Ca(Xt,P);continue}se&&Ea([R,j,Q],Up=>{wn=ui(wn,Up," ")});const Pp=Xe(P.nodeName);if(zp(Pp,xr,wn)){if(A&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!We)switch(g.getAttributeType(Pp,xr)){case"TrustedHTML":wn=A.createHTML(wn);break;case"TrustedScriptURL":wn=A.createScriptURL(wn)}try{We?P.setAttributeNS(We,Xt,wn):P.setAttribute(Xt,wn),Xc(P)?yr(P):Kf(n.removed)}catch{}}}Or(N.afterSanitizeAttributes,P,null)},f_=function P(wt){let mt=null;const ne=Fp(wt);for(Or(N.beforeSanitizeShadowDOM,wt,null);mt=ne.nextNode();)Or(N.uponSanitizeShadowNode,mt,null),Op(mt),Rp(mt),mt.content instanceof i&&P(mt.content);Or(N.afterSanitizeShadowDOM,wt,null)};return n.sanitize=function(P){let wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},mt=null,ne=null,ue=null,Xt=null;if(Gc=!P,Gc&&(P="<!-->"),typeof P!="string"&&!Dp(P)){if(typeof P.toString!="function")throw hi("toString is not a function");if(typeof(P=P.toString())!="string")throw hi("dirty is not a string, aborting")}if(!n.isSupported)return P;if(Ye||Yc(wt),n.removed=[],typeof P=="string"&&(si=!1),si){if(P.nodeName){const xr=Xe(P.nodeName);if(!at[xr]||we[xr])throw hi("root node is forbidden and cannot be sanitized in-place")}}else if(P instanceof l)mt=Ip("<!---->"),ne=mt.ownerDocument.importNode(P,!0),ne.nodeType===N8&&ne.nodeName==="BODY"||ne.nodeName==="HTML"?mt=ne:mt.appendChild(ne);else{if(!Pn&&!se&&!te&&P.indexOf("<")===-1)return A&&ba?A.createHTML(P):P;if(mt=Ip(P),!mt)return Pn?null:ba?B:""}mt&&Fr&&yr(mt.firstChild);const We=Fp(si?P:mt);for(;ue=We.nextNode();)Op(ue),Rp(ue),ue.content instanceof i&&f_(ue.content);if(si)return P;if(Pn){if(xa)for(Xt=U.call(mt.ownerDocument);mt.firstChild;)Xt.appendChild(mt.firstChild);else Xt=mt;return(bt.shadowroot||bt.shadowrootmode)&&(Xt=q.call(o,Xt,!0)),Xt}let zr=te?mt.outerHTML:mt.innerHTML;return te&&at["!doctype"]&&mt.ownerDocument&&mt.ownerDocument.doctype&&mt.ownerDocument.doctype.name&&vn(I2,mt.ownerDocument.doctype.name)&&(zr="<!DOCTYPE "+mt.ownerDocument.doctype.name+`>
`+zr),se&&Ea([R,j,Q],xr=>{zr=ui(zr,xr," ")}),A&&ba?A.createHTML(zr):zr},n.setConfig=function(){Yc(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),Ye=!0},n.clearConfig=function(){as=null,Ye=!1},n.isValidAttribute=function(P,wt,mt){as||Yc({});const ne=Xe(P),ue=Xe(wt);return zp(ne,ue,mt)},n.addHook=function(P,wt){typeof wt=="function"&&ci(N[P],wt)},n.removeHook=function(P,wt){if(wt!==void 0){const mt=_8(N[P],wt);return mt===-1?void 0:k8(N[P],mt,1)[0]}return Kf(N[P])},n.removeHooks=function(P){N[P]=[]},n.removeAllHooks=function(){N={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}(),D2=Object.defineProperty,w=(r,t)=>D2(r,"name",{value:t,configurable:!0}),W8=(r,t)=>{for(var n in t)D2(r,n,{get:t[n],enumerable:!0})},Rr={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},it={trace:w((...r)=>{},"trace"),debug:w((...r)=>{},"debug"),info:w((...r)=>{},"info"),warn:w((...r)=>{},"warn"),error:w((...r)=>{},"error"),fatal:w((...r)=>{},"fatal")},wd=w(function(r="fatal"){let t=Rr.fatal;typeof r=="string"?r.toLowerCase()in Rr&&(t=Rr[r]):typeof r=="number"&&(t=r),it.trace=()=>{},it.debug=()=>{},it.info=()=>{},it.warn=()=>{},it.error=()=>{},it.fatal=()=>{},t<=Rr.fatal&&(it.fatal=console.error?console.error.bind(console,Qn("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",Qn("FATAL"))),t<=Rr.error&&(it.error=console.error?console.error.bind(console,Qn("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",Qn("ERROR"))),t<=Rr.warn&&(it.warn=console.warn?console.warn.bind(console,Qn("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",Qn("WARN"))),t<=Rr.info&&(it.info=console.info?console.info.bind(console,Qn("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",Qn("INFO"))),t<=Rr.debug&&(it.debug=console.debug?console.debug.bind(console,Qn("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Qn("DEBUG"))),t<=Rr.trace&&(it.trace=console.debug?console.debug.bind(console,Qn("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Qn("TRACE")))},"setLogLevel"),Qn=w(r=>`%c${g8().format("ss.SSS")} : ${r} : `,"format"),O2=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,Oi=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,H8=/\s*%%.*\n/gm,Cs,z2=(Cs=class extends Error{constructor(t){super(t),this.name="UnknownDiagramError"}},w(Cs,"UnknownDiagramError"),Cs),Os={},vd=w(function(r,t){r=r.replace(O2,"").replace(Oi,"").replace(H8,`
`);for(const[n,{detector:e}]of Object.entries(Os))if(e(r,t))return n;throw new z2(`No diagram type detected matching given configuration for text: ${r}`)},"detectType"),N2=w((...r)=>{for(const{id:t,detector:n,loader:e}of r)R2(t,n,e)},"registerLazyLoadedDiagrams"),R2=w((r,t,n)=>{Os[r]&&it.warn(`Detector with key ${r} already exists. Overwriting.`),Os[r]={detector:t,loader:n},it.debug(`Detector with key ${r} added${n?" with loader":""}`)},"addDetector"),V8=w(r=>Os[r].loader,"getDiagramLoader"),sh=w((r,t,{depth:n=2,clobber:e=!1}={})=>{const o={depth:n,clobber:e};return Array.isArray(t)&&!Array.isArray(r)?(t.forEach(s=>sh(r,s,o)),r):Array.isArray(t)&&Array.isArray(r)?(t.forEach(s=>{r.includes(s)||r.push(s)}),r):r===void 0||n<=0?r!=null&&typeof r=="object"&&typeof t=="object"?Object.assign(r,t):t:(t!==void 0&&typeof r=="object"&&typeof t=="object"&&Object.keys(t).forEach(s=>{typeof t[s]!="object"||r[s]!==void 0&&typeof r[s]!="object"?(e||typeof r[s]!="object"&&typeof t[s]!="object")&&(r[s]=t[s]):(r[s]===void 0&&(r[s]=Array.isArray(t[s])?[]:{}),r[s]=sh(r[s],t[s],{depth:n-1,clobber:e}))}),r)},"assignWithDepth"),ln=sh,kc="#ffffff",Cc="#f2f2f2",Tn=w((r,t)=>Z(r,t?{s:-40,l:10}:{s:-40,l:-10}),"mkBorder"),Ss,G8=(Ss=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var n,e,o,s,i,a,l,c,u,h,d;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||Z(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||Z(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||Tn(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||Tn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||Tn(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||Tn(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||ft(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||ft(this.tertiaryColor),this.lineColor=this.lineColor||ft(this.background),this.arrowheadColor=this.arrowheadColor||ft(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?At(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||At(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||ft(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||St(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Z(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Z(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Z(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Z(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Z(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Z(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||Z(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Z(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Z(this.primaryColor,{h:330}),this.darkMode)for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScale"+p]=At(this["cScale"+p],75);else for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScale"+p]=At(this["cScale"+p],25);for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScaleInv"+p]=this["cScaleInv"+p]||ft(this["cScale"+p]);for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this.darkMode?this["cScalePeer"+p]=this["cScalePeer"+p]||St(this["cScale"+p],10):this["cScalePeer"+p]=this["cScalePeer"+p]||At(this["cScale"+p],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScaleLabel"+p]=this["cScaleLabel"+p]||this.scaleLabelColor;const t=this.darkMode?-4:-1;for(let p=0;p<5;p++)this["surface"+p]=this["surface"+p]||Z(this.mainBkg,{h:180,s:-15,l:t*(5+3*p)}),this["surfacePeer"+p]=this["surfacePeer"+p]||Z(this.mainBkg,{h:180,s:-15,l:t*(8+3*p)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||Z(this.primaryColor,{h:64}),this.fillType3=this.fillType3||Z(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||Z(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||Z(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||Z(this.primaryColor,{h:128}),this.fillType7=this.fillType7||Z(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||Z(this.primaryColor,{l:-10}),this.pie5=this.pie5||Z(this.secondaryColor,{l:-10}),this.pie6=this.pie6||Z(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||Z(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||Z(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||Z(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||Z(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||Z(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||Z(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||ua(this.quadrant1Fill)?St(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((n=this.xyChart)==null?void 0:n.backgroundColor)||this.background,titleColor:((e=this.xyChart)==null?void 0:e.titleColor)||this.primaryTextColor,xAxisTitleColor:((o=this.xyChart)==null?void 0:o.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((i=this.xyChart)==null?void 0:i.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((l=this.xyChart)==null?void 0:l.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((c=this.xyChart)==null?void 0:c.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((u=this.xyChart)==null?void 0:u.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((h=this.xyChart)==null?void 0:h.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((d=this.xyChart)==null?void 0:d.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?At(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Z(this.primaryColor,{h:-30}),this.git4=this.git4||Z(this.primaryColor,{h:-60}),this.git5=this.git5||Z(this.primaryColor,{h:-90}),this.git6=this.git6||Z(this.primaryColor,{h:60}),this.git7=this.git7||Z(this.primaryColor,{h:120}),this.darkMode?(this.git0=St(this.git0,25),this.git1=St(this.git1,25),this.git2=St(this.git2,25),this.git3=St(this.git3,25),this.git4=St(this.git4,25),this.git5=St(this.git5,25),this.git6=St(this.git6,25),this.git7=St(this.git7,25)):(this.git0=At(this.git0,25),this.git1=At(this.git1,25),this.git2=At(this.git2,25),this.git3=At(this.git3,25),this.git4=At(this.git4,25),this.git5=At(this.git5,25),this.git6=At(this.git6,25),this.git7=At(this.git7,25)),this.gitInv0=this.gitInv0||ft(this.git0),this.gitInv1=this.gitInv1||ft(this.git1),this.gitInv2=this.gitInv2||ft(this.git2),this.gitInv3=this.gitInv3||ft(this.git3),this.gitInv4=this.gitInv4||ft(this.git4),this.gitInv5=this.gitInv5||ft(this.git5),this.gitInv6=this.gitInv6||ft(this.git6),this.gitInv7=this.gitInv7||ft(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||kc,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Cc}calculate(t){if(typeof t!="object")return void this.updateColors();const n=Object.keys(t);n.forEach(e=>{this[e]=t[e]}),this.updateColors(),n.forEach(e=>{this[e]=t[e]})}},w(Ss,"Theme"),Ss),Z8=w(r=>{const t=new G8;return t.calculate(r),t},"getThemeVariables"),Ts,Y8=(Ts=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=St(this.primaryColor,16),this.tertiaryColor=Z(this.primaryColor,{h:-160}),this.primaryBorderColor=ft(this.background),this.secondaryBorderColor=Tn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Tn(this.tertiaryColor,this.darkMode),this.primaryTextColor=ft(this.primaryColor),this.secondaryTextColor=ft(this.secondaryColor),this.tertiaryTextColor=ft(this.tertiaryColor),this.lineColor=ft(this.background),this.textColor=ft(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=St(ft("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=Di(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=At("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=At(this.sectionBkgColor,10),this.taskBorderColor=Di(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=Di(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var t,n,e,o,s,i,a,l,c,u,h;this.secondBkg=St(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=St(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=St(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Z(this.primaryColor,{h:64}),this.fillType3=Z(this.secondaryColor,{h:64}),this.fillType4=Z(this.primaryColor,{h:-64}),this.fillType5=Z(this.secondaryColor,{h:-64}),this.fillType6=Z(this.primaryColor,{h:128}),this.fillType7=Z(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Z(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Z(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Z(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Z(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Z(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Z(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Z(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Z(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Z(this.primaryColor,{h:330});for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||ft(this["cScale"+d]);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScalePeer"+d]=this["cScalePeer"+d]||St(this["cScale"+d],10);for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||Z(this.mainBkg,{h:30,s:-30,l:-(4*d-10)}),this["surfacePeer"+d]=this["surfacePeer"+d]||Z(this.mainBkg,{h:30,s:-30,l:-(4*d-7)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["pie"+d]=this["cScale"+d];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||ua(this.quadrant1Fill)?St(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((n=this.xyChart)==null?void 0:n.titleColor)||this.primaryTextColor,xAxisTitleColor:((e=this.xyChart)==null?void 0:e.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((o=this.xyChart)==null?void 0:o.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((i=this.xyChart)==null?void 0:i.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((a=this.xyChart)==null?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((h=this.xyChart)==null?void 0:h.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?At(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=St(this.secondaryColor,20),this.git1=St(this.pie2||this.secondaryColor,20),this.git2=St(this.pie3||this.tertiaryColor,20),this.git3=St(this.pie4||Z(this.primaryColor,{h:-30}),20),this.git4=St(this.pie5||Z(this.primaryColor,{h:-60}),20),this.git5=St(this.pie6||Z(this.primaryColor,{h:-90}),10),this.git6=St(this.pie7||Z(this.primaryColor,{h:60}),10),this.git7=St(this.pie8||Z(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||ft(this.git0),this.gitInv1=this.gitInv1||ft(this.git1),this.gitInv2=this.gitInv2||ft(this.git2),this.gitInv3=this.gitInv3||ft(this.git3),this.gitInv4=this.gitInv4||ft(this.git4),this.gitInv5=this.gitInv5||ft(this.git5),this.gitInv6=this.gitInv6||ft(this.git6),this.gitInv7=this.gitInv7||ft(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ft(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ft(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||St(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||St(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(t){if(typeof t!="object")return void this.updateColors();const n=Object.keys(t);n.forEach(e=>{this[e]=t[e]}),this.updateColors(),n.forEach(e=>{this[e]=t[e]})}},w(Ts,"Theme"),Ts),X8=w(r=>{const t=new Y8;return t.calculate(r),t},"getThemeVariables"),Ms,Q8=(Ms=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=Z(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=Z(this.primaryColor,{h:-160}),this.primaryBorderColor=Tn(this.primaryColor,this.darkMode),this.secondaryBorderColor=Tn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Tn(this.tertiaryColor,this.darkMode),this.primaryTextColor=ft(this.primaryColor),this.secondaryTextColor=ft(this.secondaryColor),this.tertiaryTextColor=ft(this.tertiaryColor),this.lineColor=ft(this.background),this.textColor=ft(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=Di(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var t,n,e,o,s,i,a,l,c,u,h;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Z(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Z(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Z(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Z(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Z(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Z(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Z(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Z(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Z(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||At(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||At(this.tertiaryColor,40);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScale"+d]=At(this["cScale"+d],10),this["cScalePeer"+d]=this["cScalePeer"+d]||At(this["cScale"+d],25);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||Z(this["cScale"+d],{h:180});for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||Z(this.mainBkg,{h:30,l:-(5+5*d)}),this["surfacePeer"+d]=this["surfacePeer"+d]||Z(this.mainBkg,{h:30,l:-(7+5*d)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||ft(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||ft(this.labelTextColor);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=St(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Z(this.primaryColor,{h:64}),this.fillType3=Z(this.secondaryColor,{h:64}),this.fillType4=Z(this.primaryColor,{h:-64}),this.fillType5=Z(this.secondaryColor,{h:-64}),this.fillType6=Z(this.primaryColor,{h:128}),this.fillType7=Z(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||Z(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||Z(this.primaryColor,{l:-10}),this.pie5=this.pie5||Z(this.secondaryColor,{l:-30}),this.pie6=this.pie6||Z(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||Z(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||Z(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||Z(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||Z(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||Z(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||Z(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||ua(this.quadrant1Fill)?St(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((n=this.xyChart)==null?void 0:n.titleColor)||this.primaryTextColor,xAxisTitleColor:((e=this.xyChart)==null?void 0:e.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((o=this.xyChart)==null?void 0:o.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((i=this.xyChart)==null?void 0:i.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((a=this.xyChart)==null?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((h=this.xyChart)==null?void 0:h.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Z(this.primaryColor,{h:-30}),this.git4=this.git4||Z(this.primaryColor,{h:-60}),this.git5=this.git5||Z(this.primaryColor,{h:-90}),this.git6=this.git6||Z(this.primaryColor,{h:60}),this.git7=this.git7||Z(this.primaryColor,{h:120}),this.darkMode?(this.git0=St(this.git0,25),this.git1=St(this.git1,25),this.git2=St(this.git2,25),this.git3=St(this.git3,25),this.git4=St(this.git4,25),this.git5=St(this.git5,25),this.git6=St(this.git6,25),this.git7=St(this.git7,25)):(this.git0=At(this.git0,25),this.git1=At(this.git1,25),this.git2=At(this.git2,25),this.git3=At(this.git3,25),this.git4=At(this.git4,25),this.git5=At(this.git5,25),this.git6=At(this.git6,25),this.git7=At(this.git7,25)),this.gitInv0=this.gitInv0||At(ft(this.git0),25),this.gitInv1=this.gitInv1||ft(this.git1),this.gitInv2=this.gitInv2||ft(this.git2),this.gitInv3=this.gitInv3||ft(this.git3),this.gitInv4=this.gitInv4||ft(this.git4),this.gitInv5=this.gitInv5||ft(this.git5),this.gitInv6=this.gitInv6||ft(this.git6),this.gitInv7=this.gitInv7||ft(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ft(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ft(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||kc,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Cc}calculate(t){if(typeof t!="object")return void this.updateColors();const n=Object.keys(t);n.forEach(e=>{this[e]=t[e]}),this.updateColors(),n.forEach(e=>{this[e]=t[e]})}},w(Ms,"Theme"),Ms),K8=w(r=>{const t=new Q8;return t.calculate(r),t},"getThemeVariables"),As,J8=(As=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=St("#cde498",10),this.primaryBorderColor=Tn(this.primaryColor,this.darkMode),this.secondaryBorderColor=Tn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Tn(this.tertiaryColor,this.darkMode),this.primaryTextColor=ft(this.primaryColor),this.secondaryTextColor=ft(this.secondaryColor),this.tertiaryTextColor=ft(this.primaryColor),this.lineColor=ft(this.background),this.textColor=ft(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,n,e,o,s,i,a,l,c,u,h;this.actorBorder=At(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Z(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Z(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Z(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Z(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Z(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Z(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Z(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Z(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Z(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||At(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||At(this.tertiaryColor,40);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScale"+d]=At(this["cScale"+d],10),this["cScalePeer"+d]=this["cScalePeer"+d]||At(this["cScale"+d],25);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||Z(this["cScale"+d],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||Z(this.mainBkg,{h:30,s:-30,l:-(5+5*d)}),this["surfacePeer"+d]=this["surfacePeer"+d]||Z(this.mainBkg,{h:30,s:-30,l:-(8+5*d)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Z(this.primaryColor,{h:64}),this.fillType3=Z(this.secondaryColor,{h:64}),this.fillType4=Z(this.primaryColor,{h:-64}),this.fillType5=Z(this.secondaryColor,{h:-64}),this.fillType6=Z(this.primaryColor,{h:128}),this.fillType7=Z(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||Z(this.primaryColor,{l:-30}),this.pie5=this.pie5||Z(this.secondaryColor,{l:-30}),this.pie6=this.pie6||Z(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||Z(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||Z(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||Z(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||Z(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||Z(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||Z(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||ua(this.quadrant1Fill)?St(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((n=this.xyChart)==null?void 0:n.titleColor)||this.primaryTextColor,xAxisTitleColor:((e=this.xyChart)==null?void 0:e.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((o=this.xyChart)==null?void 0:o.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((i=this.xyChart)==null?void 0:i.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((a=this.xyChart)==null?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((h=this.xyChart)==null?void 0:h.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Z(this.primaryColor,{h:-30}),this.git4=this.git4||Z(this.primaryColor,{h:-60}),this.git5=this.git5||Z(this.primaryColor,{h:-90}),this.git6=this.git6||Z(this.primaryColor,{h:60}),this.git7=this.git7||Z(this.primaryColor,{h:120}),this.darkMode?(this.git0=St(this.git0,25),this.git1=St(this.git1,25),this.git2=St(this.git2,25),this.git3=St(this.git3,25),this.git4=St(this.git4,25),this.git5=St(this.git5,25),this.git6=St(this.git6,25),this.git7=St(this.git7,25)):(this.git0=At(this.git0,25),this.git1=At(this.git1,25),this.git2=At(this.git2,25),this.git3=At(this.git3,25),this.git4=At(this.git4,25),this.git5=At(this.git5,25),this.git6=At(this.git6,25),this.git7=At(this.git7,25)),this.gitInv0=this.gitInv0||ft(this.git0),this.gitInv1=this.gitInv1||ft(this.git1),this.gitInv2=this.gitInv2||ft(this.git2),this.gitInv3=this.gitInv3||ft(this.git3),this.gitInv4=this.gitInv4||ft(this.git4),this.gitInv5=this.gitInv5||ft(this.git5),this.gitInv6=this.gitInv6||ft(this.git6),this.gitInv7=this.gitInv7||ft(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ft(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ft(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||kc,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Cc}calculate(t){if(typeof t!="object")return void this.updateColors();const n=Object.keys(t);n.forEach(e=>{this[e]=t[e]}),this.updateColors(),n.forEach(e=>{this[e]=t[e]})}},w(As,"Theme"),As),tS=w(r=>{const t=new J8;return t.calculate(r),t},"getThemeVariables"),Ls,eS=(Ls=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=St(this.contrast,55),this.background="#ffffff",this.tertiaryColor=Z(this.primaryColor,{h:-160}),this.primaryBorderColor=Tn(this.primaryColor,this.darkMode),this.secondaryBorderColor=Tn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Tn(this.tertiaryColor,this.darkMode),this.primaryTextColor=ft(this.primaryColor),this.secondaryTextColor=ft(this.secondaryColor),this.tertiaryTextColor=ft(this.tertiaryColor),this.lineColor=ft(this.background),this.textColor=ft(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,n,e,o,s,i,a,l,c,u,h;this.secondBkg=St(this.contrast,55),this.border2=this.contrast,this.actorBorder=St(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||ft(this["cScale"+d]);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this.darkMode?this["cScalePeer"+d]=this["cScalePeer"+d]||St(this["cScale"+d],10):this["cScalePeer"+d]=this["cScalePeer"+d]||At(this["cScale"+d],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||Z(this.mainBkg,{l:-(5+5*d)}),this["surfacePeer"+d]=this["surfacePeer"+d]||Z(this.mainBkg,{l:-(8+5*d)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=St(this.contrast,30),this.sectionBkgColor2=St(this.contrast,30),this.taskBorderColor=At(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=St(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=At(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Z(this.primaryColor,{h:64}),this.fillType3=Z(this.secondaryColor,{h:64}),this.fillType4=Z(this.primaryColor,{h:-64}),this.fillType5=Z(this.secondaryColor,{h:-64}),this.fillType6=Z(this.primaryColor,{h:128}),this.fillType7=Z(this.secondaryColor,{h:128});for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["pie"+d]=this["cScale"+d];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||ua(this.quadrant1Fill)?St(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((n=this.xyChart)==null?void 0:n.titleColor)||this.primaryTextColor,xAxisTitleColor:((e=this.xyChart)==null?void 0:e.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((o=this.xyChart)==null?void 0:o.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((i=this.xyChart)==null?void 0:i.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((a=this.xyChart)==null?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((h=this.xyChart)==null?void 0:h.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=At(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||Z(this.primaryColor,{h:-30}),this.git4=this.pie5||Z(this.primaryColor,{h:-60}),this.git5=this.pie6||Z(this.primaryColor,{h:-90}),this.git6=this.pie7||Z(this.primaryColor,{h:60}),this.git7=this.pie8||Z(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||ft(this.git0),this.gitInv1=this.gitInv1||ft(this.git1),this.gitInv2=this.gitInv2||ft(this.git2),this.gitInv3=this.gitInv3||ft(this.git3),this.gitInv4=this.gitInv4||ft(this.git4),this.gitInv5=this.gitInv5||ft(this.git5),this.gitInv6=this.gitInv6||ft(this.git6),this.gitInv7=this.gitInv7||ft(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||kc,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Cc}calculate(t){if(typeof t!="object")return void this.updateColors();const n=Object.keys(t);n.forEach(e=>{this[e]=t[e]}),this.updateColors(),n.forEach(e=>{this[e]=t[e]})}},w(Ls,"Theme"),Ls),Zr={base:{getThemeVariables:Z8},dark:{getThemeVariables:X8},default:{getThemeVariables:K8},forest:{getThemeVariables:tS},neutral:{getThemeVariables:w(r=>{const t=new eS;return t.calculate(r),t},"getThemeVariables")}},eo={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},P2={...eo,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF"},themeCSS:void 0,themeVariables:Zr.default.getThemeVariables(),sequence:{...eo.sequence,messageFont:w(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:w(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:w(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...eo.gantt,tickInterval:void 0,useWidth:void 0},c4:{...eo.c4,useWidth:void 0,personFont:w(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),external_personFont:w(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:w(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:w(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:w(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:w(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:w(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:w(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:w(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:w(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:w(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:w(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:w(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:w(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:w(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:w(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:w(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:w(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:w(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:w(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:w(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:w(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...eo.pie,useWidth:984},xyChart:{...eo.xyChart,useWidth:void 0},requirement:{...eo.requirement,useWidth:void 0},packet:{...eo.packet}},U2=w((r,t="")=>Object.keys(r).reduce((n,e)=>Array.isArray(r[e])?n:typeof r[e]=="object"&&r[e]!==null?[...n,t+e,...U2(r[e],"")]:[...n,t+e],[]),"keyify"),nS=new Set(U2(P2,"")),q2=P2,zl=w(r=>{if(it.debug("sanitizeDirective called with",r),typeof r=="object"&&r!=null)if(Array.isArray(r))r.forEach(t=>zl(t));else{for(const t of Object.keys(r)){if(it.debug("Checking key",t),t.startsWith("__")||t.includes("proto")||t.includes("constr")||!nS.has(t)||r[t]==null){it.debug("sanitize deleting key: ",t),delete r[t];continue}if(typeof r[t]=="object"){it.debug("sanitizing object",t),zl(r[t]);continue}const n=["themeCSS","fontFamily","altFontFamily"];for(const e of n)t.includes(e)&&(it.debug("sanitizing css option",t),r[t]=rS(r[t]))}if(r.themeVariables)for(const t of Object.keys(r.themeVariables)){const n=r.themeVariables[t];n!=null&&n.match&&!n.match(/^[\d "#%(),.;A-Za-z]+$/)&&(r.themeVariables[t]="")}it.debug("After sanitization",r)}},"sanitizeDirective"),rS=w(r=>{let t=0,n=0;for(const e of r){if(t<n)return"{ /* ERROR: Unbalanced CSS */ }";e==="{"?t++:e==="}"&&n++}return t!==n?"{ /* ERROR: Unbalanced CSS */ }":r},"sanitizeCss"),zs=Object.freeze(q2),Dn=ln({},zs),ji=[],Nl=ln({},zs),Sc=w((r,t)=>{let n=ln({},r),e={};for(const o of t)H2(o),e=ln(e,o);if(n=ln(n,e),e.theme&&e.theme in Zr){const o=ln({},F2),s=ln(o.themeVariables||{},e.themeVariables);n.theme&&n.theme in Zr&&(n.themeVariables=Zr[n.theme].getThemeVariables(s))}return V2(Nl=n),Nl},"updateCurrentConfig"),oS=w(r=>(Dn=ln({},zs),Dn=ln(Dn,r),r.theme&&Zr[r.theme]&&(Dn.themeVariables=Zr[r.theme].getThemeVariables(r.themeVariables)),Sc(Dn,ji),Dn),"setSiteConfig"),sS=w(r=>{F2=ln({},r)},"saveConfigFromInitialize"),iS=w(r=>(Dn=ln(Dn,r),Sc(Dn,ji),Dn),"updateSiteConfig"),j2=w(()=>ln({},Dn),"getSiteConfig"),W2=w(r=>(V2(r),ln(Nl,r),$r()),"setConfig"),$r=w(()=>ln({},Nl),"getConfig"),H2=w(r=>{r&&(["secure",...Dn.secure??[]].forEach(t=>{Object.hasOwn(r,t)&&(it.debug(`Denied attempt to modify a secure key ${t}`,r[t]),delete r[t])}),Object.keys(r).forEach(t=>{t.startsWith("__")&&delete r[t]}),Object.keys(r).forEach(t=>{typeof r[t]=="string"&&(r[t].includes("<")||r[t].includes(">")||r[t].includes("url(data:"))&&delete r[t],typeof r[t]=="object"&&H2(r[t])}))},"sanitize"),aS=w(r=>{var t;zl(r),r.fontFamily&&!((t=r.themeVariables)!=null&&t.fontFamily)&&(r.themeVariables={...r.themeVariables,fontFamily:r.fontFamily}),ji.push(r),Sc(Dn,ji)},"addDirective"),Rl=w((r=Dn)=>{Sc(r,ji=[])},"reset"),lS={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},i1={},cS=w(r=>{i1[r]||(it.warn(lS[r]),i1[r]=!0)},"issueWarning"),V2=w(r=>{r&&(r.lazyLoadedDiagrams||r.loadExternalDiagramsAtStartup)&&cS("LAZY_LOAD_DEPRECATED")},"checkConfig"),ha=/<br\s*\/?>/gi,uS=w(r=>r?Y2(r).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),hS=(()=>{let r=!1;return()=>{r||(G2(),r=!0)}})();function G2(){const r="data-temp-href-target";Ds.addHook("beforeSanitizeAttributes",t=>{t instanceof Element&&t.tagName==="A"&&t.hasAttribute("target")&&t.setAttribute(r,t.getAttribute("target")??"")}),Ds.addHook("afterSanitizeAttributes",t=>{t instanceof Element&&t.tagName==="A"&&t.hasAttribute(r)&&(t.setAttribute("target",t.getAttribute(r)??""),t.removeAttribute(r),t.getAttribute("target")==="_blank"&&t.setAttribute("rel","noopener"))})}w(G2,"setupDompurifyHooks");var Z2=w(r=>(hS(),Ds.sanitize(r)),"removeScript"),a1=w((r,t)=>{var n;if(((n=t.flowchart)==null?void 0:n.htmlLabels)!==!1){const e=t.securityLevel;e==="antiscript"||e==="strict"?r=Z2(r):e!=="loose"&&(r=(r=(r=Y2(r)).replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/=/g,"&equals;"),r=gS(r))}return r},"sanitizeMore"),Zo=w((r,t)=>r&&(r=t.dompurifyConfig?Ds.sanitize(a1(r,t),t.dompurifyConfig).toString():Ds.sanitize(a1(r,t),{FORBID_TAGS:["style"]}).toString()),"sanitizeText"),dS=w((r,t)=>typeof r=="string"?Zo(r,t):r.flat().map(n=>Zo(n,t)),"sanitizeTextOrArray"),pS=w(r=>ha.test(r),"hasBreaks"),fS=w(r=>r.split(ha),"splitBreaks"),gS=w(r=>r.replace(/#br#/g,"<br/>"),"placeholderToBreak"),Y2=w(r=>r.replace(ha,"#br#"),"breakToPlaceholder"),mS=w(r=>{let t="";return r&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=t.replaceAll(/\(/g,"\\("),t=t.replaceAll(/\)/g,"\\)")),t},"getUrl"),cn=w(r=>r!==!1&&!["false","null","0"].includes(String(r).trim().toLowerCase()),"evaluate"),$S=w(function(...r){const t=r.filter(n=>!isNaN(n));return Math.max(...t)},"getMax"),yS=w(function(...r){const t=r.filter(n=>!isNaN(n));return Math.min(...t)},"getMin"),xH=w(function(r){const t=r.split(/(,)/),n=[];for(let e=0;e<t.length;e++){let o=t[e];if(o===","&&e>0&&e+1<t.length){const s=t[e-1],i=t[e+1];xS(s,i)&&(o=s+","+i,e++,n.pop())}n.push(bS(o))}return n.join("")},"parseGenericTypes"),ih=w((r,t)=>Math.max(0,r.split(t).length-1),"countOccurrence"),xS=w((r,t)=>{const n=ih(r,"~"),e=ih(t,"~");return n===1&&e===1},"shouldCombineSets"),bS=w(r=>{const t=ih(r,"~");let n=!1;if(t<=1)return r;t%2!=0&&r.startsWith("~")&&(r=r.substring(1),n=!0);const e=[...r];let o=e.indexOf("~"),s=e.lastIndexOf("~");for(;o!==-1&&s!==-1&&o!==s;)e[o]="<",e[s]=">",o=e.indexOf("~"),s=e.lastIndexOf("~");return n&&e.unshift("~"),e.join("")},"processSet"),l1=w(()=>window.MathMLElement!==void 0,"isMathMLSupported"),ah=/\$\$(.*)\$\$/g,Ns=w(r=>{var t;return(((t=r.match(ah))==null?void 0:t.length)??0)>0},"hasKatex"),bH=w(async(r,t)=>{r=await _d(r,t);const n=document.createElement("div");n.innerHTML=r,n.id="katex-temp",n.style.visibility="hidden",n.style.position="absolute",n.style.top="0";const e=document.querySelector("body");e==null||e.insertAdjacentElement("beforeend",n);const o={width:n.clientWidth,height:n.clientHeight};return n.remove(),o},"calculateMathMLDimensions"),_d=w(async(r,t)=>{if(!Ns(r))return r;if(!(l1()||t.legacyMathML||t.forceLegacyMathML))return r.replace(ah,"MathML is unsupported in this environment.");const{default:n}=await be(async()=>{const{default:o}=await import("./katex-BAVf198l.js");return{default:o}},[],import.meta.url),e=t.forceLegacyMathML||!l1()&&t.legacyMathML?"htmlAndMathml":"mathml";return r.split(ha).map(o=>Ns(o)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${o}</div>`:`<div>${o}</div>`).join("").replace(ah,(o,s)=>n.renderToString(s,{throwOnError:!0,displayMode:!0,output:e}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))},"renderKatex"),Qs={getRows:uS,sanitizeText:Zo,sanitizeTextOrArray:dS,hasBreaks:pS,splitBreaks:fS,lineBreakRegex:ha,removeScript:Z2,getUrl:mS,evaluate:cn,getMax:$S,getMin:yS},wS=w(function(r,t){for(let n of t)r.attr(n[0],n[1])},"d3Attrs"),vS=w(function(r,t,n){let e=new Map;return n?(e.set("width","100%"),e.set("style",`max-width: ${t}px;`)):(e.set("height",r),e.set("width",t)),e},"calculateSvgSizeAttrs"),X2=w(function(r,t,n,e){const o=vS(t,n,e);wS(r,o)},"configureSvgSize"),_S=w(function(r,t,n,e){const o=t.node().getBBox(),s=o.width,i=o.height;it.info(`SVG bounds: ${s}x${i}`,o);let a=0,l=0;it.info(`Graph bounds: ${a}x${l}`,r),a=s+2*n,l=i+2*n,it.info(`Calculated bounds: ${a}x${l}`),X2(t,l,a,e);const c=`${o.x-n} ${o.y-n} ${o.width+2*n} ${o.height+2*n}`;t.attr("viewBox",c)},"setupGraphViewbox"),Ja={},kS=w((r,t,n)=>{let e="";return r in Ja&&Ja[r]?e=Ja[r](n):it.warn(`No theme found for ${r}`),` & {
    font-family: ${n.fontFamily};
    font-size: ${n.fontSize};
    fill: ${n.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${n.errorBkgColor};
  }
  & .error-text {
    fill: ${n.errorTextColor};
    stroke: ${n.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${n.lineColor};
    stroke: ${n.lineColor};
  }
  & .marker.cross {
    stroke: ${n.lineColor};
  }

  & svg {
    font-family: ${n.fontFamily};
    font-size: ${n.fontSize};
  }
   & p {
    margin: 0
   }

  ${e}

  ${t}
`},"getStyles"),CS=w((r,t)=>{t!==void 0&&(Ja[r]=t)},"addStylesForDiagram"),SS=kS,Q2={};W8(Q2,{clear:()=>TS,getAccDescription:()=>ES,getAccTitle:()=>AS,getDiagramTitle:()=>IS,setAccDescription:()=>LS,setAccTitle:()=>MS,setDiagramTitle:()=>BS});var kd="",Cd="",Sd="",Td=w(r=>Zo(r,$r()),"sanitizeText"),TS=w(()=>{kd="",Sd="",Cd=""},"clear"),MS=w(r=>{kd=Td(r).replace(/^\s+/g,"")},"setAccTitle"),AS=w(()=>kd,"getAccTitle"),LS=w(r=>{Sd=Td(r).replace(/\n\s+/g,`
`)},"setAccDescription"),ES=w(()=>Sd,"getAccDescription"),BS=w(r=>{Cd=Td(r)},"setDiagramTitle"),IS=w(()=>Cd,"getDiagramTitle"),c1=it,FS=wd,ge=$r,wH=W2,vH=zs,K2=w(r=>Zo(r,ge()),"sanitizeText"),DS=_S,OS=w(()=>Q2,"getCommonDb"),Pl={},Ul=w((r,t,n)=>{var e;Pl[r]&&c1.warn(`Diagram with id ${r} already registered. Overwriting.`),Pl[r]=t,n&&R2(r,n),CS(r,t.styles),(e=t.injectUtils)==null||e.call(t,c1,FS,ge,K2,DS,OS(),()=>{})},"registerDiagram"),lh=w(r=>{if(r in Pl)return Pl[r];throw new zS(r)},"getDiagram"),Es,zS=(Es=class extends Error{constructor(t){super(`Diagram ${t} not found.`)}},w(Es,"DiagramNotFoundError"),Es);function Md(r){return r==null}function J2(r){return typeof r=="object"&&r!==null}function tx(r){return Array.isArray(r)?r:Md(r)?[]:[r]}function ex(r,t){var n,e,o,s;if(t)for(n=0,e=(s=Object.keys(t)).length;n<e;n+=1)r[o=s[n]]=t[o];return r}function nx(r,t){var n,e="";for(n=0;n<t;n+=1)e+=r;return e}function rx(r){return r===0&&Number.NEGATIVE_INFINITY===1/r}w(Md,"isNothing"),w(J2,"isObject"),w(tx,"toArray"),w(ex,"extend"),w(nx,"repeat"),w(rx,"isNegativeZero");var Ve={isNothing:Md,isObject:J2,toArray:tx,repeat:nx,isNegativeZero:rx,extend:ex};function ch(r,t){var n="",e=r.reason||"(unknown reason)";return r.mark?(r.mark.name&&(n+='in "'+r.mark.name+'" '),n+="("+(r.mark.line+1)+":"+(r.mark.column+1)+")",!t&&r.mark.snippet&&(n+=`

`+r.mark.snippet),e+" "+n):e}function ds(r,t){Error.call(this),this.name="YAMLException",this.reason=r,this.mark=t,this.message=ch(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}w(ch,"formatError"),w(ds,"YAMLException$1"),ds.prototype=Object.create(Error.prototype),ds.prototype.constructor=ds,ds.prototype.toString=w(function(r){return this.name+": "+ch(this,r)},"toString");var On=ds;function tl(r,t,n,e,o){var s="",i="",a=Math.floor(o/2)-1;return e-t>a&&(t=e-a+(s=" ... ").length),n-e>a&&(n=e+a-(i=" ...").length),{str:s+r.slice(t,n).replace(/\t/g,"")+i,pos:e-t+s.length}}function el(r,t){return Ve.repeat(" ",t-r.length)+r}function ox(r,t){if(t=Object.create(t||null),!r.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n,e=/\r?\n|\r|\0/g,o=[0],s=[],i=-1;n=e.exec(r.buffer);)s.push(n.index),o.push(n.index+n[0].length),r.position<=n.index&&i<0&&(i=o.length-2);i<0&&(i=o.length-1);var a,l,c="",u=Math.min(r.line+t.linesAfter,s.length).toString().length,h=t.maxLength-(t.indent+u+3);for(a=1;a<=t.linesBefore&&!(i-a<0);a++)l=tl(r.buffer,o[i-a],s[i-a],r.position-(o[i]-o[i-a]),h),c=Ve.repeat(" ",t.indent)+el((r.line-a+1).toString(),u)+" | "+l.str+`
`+c;for(l=tl(r.buffer,o[i],s[i],r.position,h),c+=Ve.repeat(" ",t.indent)+el((r.line+1).toString(),u)+" | "+l.str+`
`,c+=Ve.repeat("-",t.indent+u+3+l.pos)+`^
`,a=1;a<=t.linesAfter&&!(i+a>=s.length);a++)l=tl(r.buffer,o[i+a],s[i+a],r.position-(o[i]-o[i+a]),h),c+=Ve.repeat(" ",t.indent)+el((r.line+a+1).toString(),u)+" | "+l.str+`
`;return c.replace(/\n$/,"")}w(tl,"getLine"),w(el,"padStart"),w(ox,"makeSnippet");var NS=ox,RS=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],PS=["scalar","sequence","mapping"];function sx(r){var t={};return r!==null&&Object.keys(r).forEach(function(n){r[n].forEach(function(e){t[String(e)]=n})}),t}function ix(r,t){if(t=t||{},Object.keys(t).forEach(function(n){if(RS.indexOf(n)===-1)throw new On('Unknown option "'+n+'" is met in definition of "'+r+'" YAML type.')}),this.options=t,this.tag=r,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=sx(t.styleAliases||null),PS.indexOf(this.kind)===-1)throw new On('Unknown kind "'+this.kind+'" is specified for "'+r+'" YAML type.')}w(sx,"compileStyleAliases"),w(ix,"Type$1");var bn=ix;function yu(r,t){var n=[];return r[t].forEach(function(e){var o=n.length;n.forEach(function(s,i){s.tag===e.tag&&s.kind===e.kind&&s.multi===e.multi&&(o=i)}),n[o]=e}),n}function u1(){var r,t,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function e(o){o.multi?(n.multi[o.kind].push(o),n.multi.fallback.push(o)):n[o.kind][o.tag]=n.fallback[o.tag]=o}for(w(e,"collectType"),r=0,t=arguments.length;r<t;r+=1)arguments[r].forEach(e);return n}function nl(r){return this.extend(r)}w(yu,"compileList"),w(u1,"compileMap"),w(nl,"Schema$1"),nl.prototype.extend=w(function(r){var t=[],n=[];if(r instanceof bn)n.push(r);else if(Array.isArray(r))n=n.concat(r);else{if(!r||!Array.isArray(r.implicit)&&!Array.isArray(r.explicit))throw new On("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.implicit&&(t=t.concat(r.implicit)),r.explicit&&(n=n.concat(r.explicit))}t.forEach(function(o){if(!(o instanceof bn))throw new On("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new On("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new On("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof bn))throw new On("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var e=Object.create(nl.prototype);return e.implicit=(this.implicit||[]).concat(t),e.explicit=(this.explicit||[]).concat(n),e.compiledImplicit=yu(e,"implicit"),e.compiledExplicit=yu(e,"explicit"),e.compiledTypeMap=u1(e.compiledImplicit,e.compiledExplicit),e},"extend");var US=new nl({explicit:[new bn("tag:yaml.org,2002:str",{kind:"scalar",construct:w(function(r){return r!==null?r:""},"construct")}),new bn("tag:yaml.org,2002:seq",{kind:"sequence",construct:w(function(r){return r!==null?r:[]},"construct")}),new bn("tag:yaml.org,2002:map",{kind:"mapping",construct:w(function(r){return r!==null?r:{}},"construct")})]});function ax(r){if(r===null)return!0;var t=r.length;return t===1&&r==="~"||t===4&&(r==="null"||r==="Null"||r==="NULL")}function lx(){return null}function cx(r){return r===null}w(ax,"resolveYamlNull"),w(lx,"constructYamlNull"),w(cx,"isNull");var qS=new bn("tag:yaml.org,2002:null",{kind:"scalar",resolve:ax,construct:lx,predicate:cx,represent:{canonical:w(function(){return"~"},"canonical"),lowercase:w(function(){return"null"},"lowercase"),uppercase:w(function(){return"NULL"},"uppercase"),camelcase:w(function(){return"Null"},"camelcase"),empty:w(function(){return""},"empty")},defaultStyle:"lowercase"});function ux(r){if(r===null)return!1;var t=r.length;return t===4&&(r==="true"||r==="True"||r==="TRUE")||t===5&&(r==="false"||r==="False"||r==="FALSE")}function hx(r){return r==="true"||r==="True"||r==="TRUE"}function dx(r){return Object.prototype.toString.call(r)==="[object Boolean]"}w(ux,"resolveYamlBoolean"),w(hx,"constructYamlBoolean"),w(dx,"isBoolean");var jS=new bn("tag:yaml.org,2002:bool",{kind:"scalar",resolve:ux,construct:hx,predicate:dx,represent:{lowercase:w(function(r){return r?"true":"false"},"lowercase"),uppercase:w(function(r){return r?"TRUE":"FALSE"},"uppercase"),camelcase:w(function(r){return r?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function px(r){return 48<=r&&r<=57||65<=r&&r<=70||97<=r&&r<=102}function fx(r){return 48<=r&&r<=55}function gx(r){return 48<=r&&r<=57}function mx(r){if(r===null)return!1;var t,n=r.length,e=0,o=!1;if(!n)return!1;if((t=r[e])!=="-"&&t!=="+"||(t=r[++e]),t==="0"){if(e+1===n)return!0;if((t=r[++e])==="b"){for(e++;e<n;e++)if((t=r[e])!=="_"){if(t!=="0"&&t!=="1")return!1;o=!0}return o&&t!=="_"}if(t==="x"){for(e++;e<n;e++)if((t=r[e])!=="_"){if(!px(r.charCodeAt(e)))return!1;o=!0}return o&&t!=="_"}if(t==="o"){for(e++;e<n;e++)if((t=r[e])!=="_"){if(!fx(r.charCodeAt(e)))return!1;o=!0}return o&&t!=="_"}}if(t==="_")return!1;for(;e<n;e++)if((t=r[e])!=="_"){if(!gx(r.charCodeAt(e)))return!1;o=!0}return!(!o||t==="_")}function $x(r){var t,n=r,e=1;if(n.indexOf("_")!==-1&&(n=n.replace(/_/g,"")),(t=n[0])!=="-"&&t!=="+"||(t==="-"&&(e=-1),t=(n=n.slice(1))[0]),n==="0")return 0;if(t==="0"){if(n[1]==="b")return e*parseInt(n.slice(2),2);if(n[1]==="x")return e*parseInt(n.slice(2),16);if(n[1]==="o")return e*parseInt(n.slice(2),8)}return e*parseInt(n,10)}function yx(r){return Object.prototype.toString.call(r)==="[object Number]"&&r%1==0&&!Ve.isNegativeZero(r)}w(px,"isHexCode"),w(fx,"isOctCode"),w(gx,"isDecCode"),w(mx,"resolveYamlInteger"),w($x,"constructYamlInteger"),w(yx,"isInteger");var WS=new bn("tag:yaml.org,2002:int",{kind:"scalar",resolve:mx,construct:$x,predicate:yx,represent:{binary:w(function(r){return r>=0?"0b"+r.toString(2):"-0b"+r.toString(2).slice(1)},"binary"),octal:w(function(r){return r>=0?"0o"+r.toString(8):"-0o"+r.toString(8).slice(1)},"octal"),decimal:w(function(r){return r.toString(10)},"decimal"),hexadecimal:w(function(r){return r>=0?"0x"+r.toString(16).toUpperCase():"-0x"+r.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),HS=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function xx(r){return r!==null&&!(!HS.test(r)||r[r.length-1]==="_")}function bx(r){var t,n;return n=(t=r.replace(/_/g,"").toLowerCase())[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}w(xx,"resolveYamlFloat"),w(bx,"constructYamlFloat");var VS=/^[-+]?[0-9]+e/;function wx(r,t){var n;if(isNaN(r))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===r)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===r)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ve.isNegativeZero(r))return"-0.0";return n=r.toString(10),VS.test(n)?n.replace("e",".e"):n}function vx(r){return Object.prototype.toString.call(r)==="[object Number]"&&(r%1!=0||Ve.isNegativeZero(r))}w(wx,"representYamlFloat"),w(vx,"isFloat");var GS=new bn("tag:yaml.org,2002:float",{kind:"scalar",resolve:xx,construct:bx,predicate:vx,represent:wx,defaultStyle:"lowercase"}),_x=US.extend({implicit:[qS,jS,WS,GS]}),ZS=_x,kx=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Cx=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Sx(r){return r!==null&&(kx.exec(r)!==null||Cx.exec(r)!==null)}function Tx(r){var t,n,e,o,s,i,a,l,c=0,u=null;if((t=kx.exec(r))===null&&(t=Cx.exec(r)),t===null)throw new Error("Date resolve error");if(n=+t[1],e=+t[2]-1,o=+t[3],!t[4])return new Date(Date.UTC(n,e,o));if(s=+t[4],i=+t[5],a=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(u=6e4*(60*+t[10]+ +(t[11]||0)),t[9]==="-"&&(u=-u)),l=new Date(Date.UTC(n,e,o,s,i,a,c)),u&&l.setTime(l.getTime()-u),l}function Mx(r){return r.toISOString()}w(Sx,"resolveYamlTimestamp"),w(Tx,"constructYamlTimestamp"),w(Mx,"representYamlTimestamp");var YS=new bn("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Sx,construct:Tx,instanceOf:Date,represent:Mx});function Ax(r){return r==="<<"||r===null}w(Ax,"resolveYamlMerge");var XS=new bn("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Ax}),Ad=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Lx(r){if(r===null)return!1;var t,n,e=0,o=r.length,s=Ad;for(n=0;n<o;n++)if(!((t=s.indexOf(r.charAt(n)))>64)){if(t<0)return!1;e+=6}return e%8==0}function Ex(r){var t,n,e=r.replace(/[\r\n=]/g,""),o=e.length,s=Ad,i=0,a=[];for(t=0;t<o;t++)t%4==0&&t&&(a.push(i>>16&255),a.push(i>>8&255),a.push(255&i)),i=i<<6|s.indexOf(e.charAt(t));return(n=o%4*6)===0?(a.push(i>>16&255),a.push(i>>8&255),a.push(255&i)):n===18?(a.push(i>>10&255),a.push(i>>2&255)):n===12&&a.push(i>>4&255),new Uint8Array(a)}function Bx(r){var t,n,e="",o=0,s=r.length,i=Ad;for(t=0;t<s;t++)t%3==0&&t&&(e+=i[o>>18&63],e+=i[o>>12&63],e+=i[o>>6&63],e+=i[63&o]),o=(o<<8)+r[t];return(n=s%3)===0?(e+=i[o>>18&63],e+=i[o>>12&63],e+=i[o>>6&63],e+=i[63&o]):n===2?(e+=i[o>>10&63],e+=i[o>>4&63],e+=i[o<<2&63],e+=i[64]):n===1&&(e+=i[o>>2&63],e+=i[o<<4&63],e+=i[64],e+=i[64]),e}function Ix(r){return Object.prototype.toString.call(r)==="[object Uint8Array]"}w(Lx,"resolveYamlBinary"),w(Ex,"constructYamlBinary"),w(Bx,"representYamlBinary"),w(Ix,"isBinary");var QS=new bn("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Lx,construct:Ex,predicate:Ix,represent:Bx}),KS=Object.prototype.hasOwnProperty,JS=Object.prototype.toString;function Fx(r){if(r===null)return!0;var t,n,e,o,s,i=[],a=r;for(t=0,n=a.length;t<n;t+=1){if(e=a[t],s=!1,JS.call(e)!=="[object Object]")return!1;for(o in e)if(KS.call(e,o)){if(s)return!1;s=!0}if(!s||i.indexOf(o)!==-1)return!1;i.push(o)}return!0}function Dx(r){return r!==null?r:[]}w(Fx,"resolveYamlOmap"),w(Dx,"constructYamlOmap");var tT=new bn("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Fx,construct:Dx}),eT=Object.prototype.toString;function Ox(r){if(r===null)return!0;var t,n,e,o,s,i=r;for(s=new Array(i.length),t=0,n=i.length;t<n;t+=1){if(e=i[t],eT.call(e)!=="[object Object]"||(o=Object.keys(e)).length!==1)return!1;s[t]=[o[0],e[o[0]]]}return!0}function zx(r){if(r===null)return[];var t,n,e,o,s,i=r;for(s=new Array(i.length),t=0,n=i.length;t<n;t+=1)e=i[t],o=Object.keys(e),s[t]=[o[0],e[o[0]]];return s}w(Ox,"resolveYamlPairs"),w(zx,"constructYamlPairs");var nT=new bn("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Ox,construct:zx}),rT=Object.prototype.hasOwnProperty;function Nx(r){if(r===null)return!0;var t,n=r;for(t in n)if(rT.call(n,t)&&n[t]!==null)return!1;return!0}function Rx(r){return r!==null?r:{}}w(Nx,"resolveYamlSet"),w(Rx,"constructYamlSet");var oT=new bn("tag:yaml.org,2002:set",{kind:"mapping",resolve:Nx,construct:Rx}),Px=ZS.extend({implicit:[YS,XS],explicit:[QS,tT,nT,oT]}),bo=Object.prototype.hasOwnProperty,ql=1,Ux=2,qx=3,jl=4,xu=1,sT=2,h1=3,iT=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,aT=/[\x85\u2028\u2029]/,lT=/[,\[\]\{\}]/,jx=/^(?:!|!!|![a-z\-]+!)$/i,Wx=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function uh(r){return Object.prototype.toString.call(r)}function gr(r){return r===10||r===13}function yo(r){return r===9||r===32}function Mn(r){return r===9||r===32||r===10||r===13}function No(r){return r===44||r===91||r===93||r===123||r===125}function Hx(r){var t;return 48<=r&&r<=57?r-48:97<=(t=32|r)&&t<=102?t-97+10:-1}function Vx(r){return r===120?2:r===117?4:r===85?8:0}function Gx(r){return 48<=r&&r<=57?r-48:-1}function hh(r){return r===48?"\0":r===97?"\x07":r===98?"\b":r===116||r===9?"	":r===110?`
`:r===118?"\v":r===102?"\f":r===114?"\r":r===101?"\x1B":r===32?" ":r===34?'"':r===47?"/":r===92?"\\":r===78?"":r===95?"":r===76?"\u2028":r===80?"\u2029":""}function Zx(r){return r<=65535?String.fromCharCode(r):String.fromCharCode(55296+(r-65536>>10),56320+(r-65536&1023))}w(uh,"_class"),w(gr,"is_EOL"),w(yo,"is_WHITE_SPACE"),w(Mn,"is_WS_OR_EOL"),w(No,"is_FLOW_INDICATOR"),w(Hx,"fromHexCode"),w(Vx,"escapedHexLen"),w(Gx,"fromDecimalCode"),w(hh,"simpleEscapeSequence"),w(Zx,"charFromCodepoint");var Mo,Yx=new Array(256),Xx=new Array(256);for(Mo=0;Mo<256;Mo++)Yx[Mo]=hh(Mo)?1:0,Xx[Mo]=hh(Mo);function Qx(r,t){this.input=r,this.filename=t.filename||null,this.schema=t.schema||Px,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=r.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Ld(r,t){var n={name:r.filename,buffer:r.input.slice(0,-1),position:r.position,line:r.line,column:r.position-r.lineStart};return n.snippet=NS(n),new On(t,n)}function Ct(r,t){throw Ld(r,t)}function Wi(r,t){r.onWarning&&r.onWarning.call(null,Ld(r,t))}w(Qx,"State$1"),w(Ld,"generateError"),w(Ct,"throwError"),w(Wi,"throwWarning");var d1={YAML:w(function(r,t,n){var e,o,s;r.version!==null&&Ct(r,"duplication of %YAML directive"),n.length!==1&&Ct(r,"YAML directive accepts exactly one argument"),(e=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))===null&&Ct(r,"ill-formed argument of the YAML directive"),o=parseInt(e[1],10),s=parseInt(e[2],10),o!==1&&Ct(r,"unacceptable YAML version of the document"),r.version=n[0],r.checkLineBreaks=s<2,s!==1&&s!==2&&Wi(r,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:w(function(r,t,n){var e,o;n.length!==2&&Ct(r,"TAG directive accepts exactly two arguments"),e=n[0],o=n[1],jx.test(e)||Ct(r,"ill-formed tag handle (first argument) of the TAG directive"),bo.call(r.tagMap,e)&&Ct(r,'there is a previously declared suffix for "'+e+'" tag handle'),Wx.test(o)||Ct(r,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{Ct(r,"tag prefix is malformed: "+o)}r.tagMap[e]=o},"handleTagDirective")};function Yr(r,t,n,e){var o,s,i,a;if(t<n){if(a=r.input.slice(t,n),e)for(o=0,s=a.length;o<s;o+=1)(i=a.charCodeAt(o))===9||32<=i&&i<=1114111||Ct(r,"expected valid JSON character");else iT.test(a)&&Ct(r,"the stream contains non-printable characters");r.result+=a}}function dh(r,t,n,e){var o,s,i,a;for(Ve.isObject(n)||Ct(r,"cannot merge mappings; the provided source object is unacceptable"),i=0,a=(o=Object.keys(n)).length;i<a;i+=1)s=o[i],bo.call(t,s)||(t[s]=n[s],e[s]=!0)}function Ro(r,t,n,e,o,s,i,a,l){var c,u;if(Array.isArray(o))for(c=0,u=(o=Array.prototype.slice.call(o)).length;c<u;c+=1)Array.isArray(o[c])&&Ct(r,"nested arrays are not supported inside keys"),typeof o=="object"&&uh(o[c])==="[object Object]"&&(o[c]="[object Object]");if(typeof o=="object"&&uh(o)==="[object Object]"&&(o="[object Object]"),o=String(o),t===null&&(t={}),e==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,u=s.length;c<u;c+=1)dh(r,t,s[c],n);else dh(r,t,s,n);else r.json||bo.call(n,o)||!bo.call(t,o)||(r.line=i||r.line,r.lineStart=a||r.lineStart,r.position=l||r.position,Ct(r,"duplicated mapping key")),o==="__proto__"?Object.defineProperty(t,o,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[o]=s,delete n[o];return t}function Tc(r){var t;(t=r.input.charCodeAt(r.position))===10?r.position++:t===13?(r.position++,r.input.charCodeAt(r.position)===10&&r.position++):Ct(r,"a line break is expected"),r.line+=1,r.lineStart=r.position,r.firstTabInLine=-1}function De(r,t,n){for(var e=0,o=r.input.charCodeAt(r.position);o!==0;){for(;yo(o);)o===9&&r.firstTabInLine===-1&&(r.firstTabInLine=r.position),o=r.input.charCodeAt(++r.position);if(t&&o===35)do o=r.input.charCodeAt(++r.position);while(o!==10&&o!==13&&o!==0);if(!gr(o))break;for(Tc(r),o=r.input.charCodeAt(r.position),e++,r.lineIndent=0;o===32;)r.lineIndent++,o=r.input.charCodeAt(++r.position)}return n!==-1&&e!==0&&r.lineIndent<n&&Wi(r,"deficient indentation"),e}function da(r){var t,n=r.position;return!((t=r.input.charCodeAt(n))!==45&&t!==46||t!==r.input.charCodeAt(n+1)||t!==r.input.charCodeAt(n+2)||(n+=3,(t=r.input.charCodeAt(n))!==0&&!Mn(t)))}function Mc(r,t){t===1?r.result+=" ":t>1&&(r.result+=Ve.repeat(`
`,t-1))}function Kx(r,t,n){var e,o,s,i,a,l,c,u,h=r.kind,d=r.result;if(Mn(u=r.input.charCodeAt(r.position))||No(u)||u===35||u===38||u===42||u===33||u===124||u===62||u===39||u===34||u===37||u===64||u===96||(u===63||u===45)&&(Mn(e=r.input.charCodeAt(r.position+1))||n&&No(e)))return!1;for(r.kind="scalar",r.result="",o=s=r.position,i=!1;u!==0;){if(u===58){if(Mn(e=r.input.charCodeAt(r.position+1))||n&&No(e))break}else if(u===35){if(Mn(r.input.charCodeAt(r.position-1)))break}else{if(r.position===r.lineStart&&da(r)||n&&No(u))break;if(gr(u)){if(a=r.line,l=r.lineStart,c=r.lineIndent,De(r,!1,-1),r.lineIndent>=t){i=!0,u=r.input.charCodeAt(r.position);continue}r.position=s,r.line=a,r.lineStart=l,r.lineIndent=c;break}}i&&(Yr(r,o,s,!1),Mc(r,r.line-a),o=s=r.position,i=!1),yo(u)||(s=r.position+1),u=r.input.charCodeAt(++r.position)}return Yr(r,o,s,!1),!!r.result||(r.kind=h,r.result=d,!1)}function Jx(r,t){var n,e,o;if((n=r.input.charCodeAt(r.position))!==39)return!1;for(r.kind="scalar",r.result="",r.position++,e=o=r.position;(n=r.input.charCodeAt(r.position))!==0;)if(n===39){if(Yr(r,e,r.position,!0),(n=r.input.charCodeAt(++r.position))!==39)return!0;e=r.position,r.position++,o=r.position}else gr(n)?(Yr(r,e,o,!0),Mc(r,De(r,!1,t)),e=o=r.position):r.position===r.lineStart&&da(r)?Ct(r,"unexpected end of the document within a single quoted scalar"):(r.position++,o=r.position);Ct(r,"unexpected end of the stream within a single quoted scalar")}function tb(r,t){var n,e,o,s,i,a;if((a=r.input.charCodeAt(r.position))!==34)return!1;for(r.kind="scalar",r.result="",r.position++,n=e=r.position;(a=r.input.charCodeAt(r.position))!==0;){if(a===34)return Yr(r,n,r.position,!0),r.position++,!0;if(a===92){if(Yr(r,n,r.position,!0),gr(a=r.input.charCodeAt(++r.position)))De(r,!1,t);else if(a<256&&Yx[a])r.result+=Xx[a],r.position++;else if((i=Vx(a))>0){for(o=i,s=0;o>0;o--)(i=Hx(a=r.input.charCodeAt(++r.position)))>=0?s=(s<<4)+i:Ct(r,"expected hexadecimal character");r.result+=Zx(s),r.position++}else Ct(r,"unknown escape sequence");n=e=r.position}else gr(a)?(Yr(r,n,e,!0),Mc(r,De(r,!1,t)),n=e=r.position):r.position===r.lineStart&&da(r)?Ct(r,"unexpected end of the document within a double quoted scalar"):(r.position++,e=r.position)}Ct(r,"unexpected end of the stream within a double quoted scalar")}function eb(r,t){var n,e,o,s,i,a,l,c,u,h,d,p,g=!0,$=r.tag,b=r.anchor,y=Object.create(null);if((p=r.input.charCodeAt(r.position))===91)i=93,c=!1,s=[];else{if(p!==123)return!1;i=125,c=!0,s={}}for(r.anchor!==null&&(r.anchorMap[r.anchor]=s),p=r.input.charCodeAt(++r.position);p!==0;){if(De(r,!0,t),(p=r.input.charCodeAt(r.position))===i)return r.position++,r.tag=$,r.anchor=b,r.kind=c?"mapping":"sequence",r.result=s,!0;g?p===44&&Ct(r,"expected the node content, but found ','"):Ct(r,"missed comma between flow collection entries"),d=null,a=l=!1,p===63&&Mn(r.input.charCodeAt(r.position+1))&&(a=l=!0,r.position++,De(r,!0,t)),n=r.line,e=r.lineStart,o=r.position,Yo(r,t,ql,!1,!0),h=r.tag,u=r.result,De(r,!0,t),p=r.input.charCodeAt(r.position),!l&&r.line!==n||p!==58||(a=!0,p=r.input.charCodeAt(++r.position),De(r,!0,t),Yo(r,t,ql,!1,!0),d=r.result),c?Ro(r,s,y,h,u,d,n,e,o):a?s.push(Ro(r,null,y,h,u,d,n,e,o)):s.push(u),De(r,!0,t),(p=r.input.charCodeAt(r.position))===44?(g=!0,p=r.input.charCodeAt(++r.position)):g=!1}Ct(r,"unexpected end of the stream within a flow collection")}function nb(r,t){var n,e,o,s,i=xu,a=!1,l=!1,c=t,u=0,h=!1;if((s=r.input.charCodeAt(r.position))===124)e=!1;else{if(s!==62)return!1;e=!0}for(r.kind="scalar",r.result="";s!==0;)if((s=r.input.charCodeAt(++r.position))===43||s===45)xu===i?i=s===43?h1:sT:Ct(r,"repeat of a chomping mode identifier");else{if(!((o=Gx(s))>=0))break;o===0?Ct(r,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?Ct(r,"repeat of an indentation width identifier"):(c=t+o-1,l=!0)}if(yo(s)){do s=r.input.charCodeAt(++r.position);while(yo(s));if(s===35)do s=r.input.charCodeAt(++r.position);while(!gr(s)&&s!==0)}for(;s!==0;){for(Tc(r),r.lineIndent=0,s=r.input.charCodeAt(r.position);(!l||r.lineIndent<c)&&s===32;)r.lineIndent++,s=r.input.charCodeAt(++r.position);if(!l&&r.lineIndent>c&&(c=r.lineIndent),gr(s))u++;else{if(r.lineIndent<c){i===h1?r.result+=Ve.repeat(`
`,a?1+u:u):i===xu&&a&&(r.result+=`
`);break}for(e?yo(s)?(h=!0,r.result+=Ve.repeat(`
`,a?1+u:u)):h?(h=!1,r.result+=Ve.repeat(`
`,u+1)):u===0?a&&(r.result+=" "):r.result+=Ve.repeat(`
`,u):r.result+=Ve.repeat(`
`,a?1+u:u),a=!0,l=!0,u=0,n=r.position;!gr(s)&&s!==0;)s=r.input.charCodeAt(++r.position);Yr(r,n,r.position,!1)}}return!0}function ph(r,t){var n,e,o=r.tag,s=r.anchor,i=[],a=!1;if(r.firstTabInLine!==-1)return!1;for(r.anchor!==null&&(r.anchorMap[r.anchor]=i),e=r.input.charCodeAt(r.position);e!==0&&(r.firstTabInLine!==-1&&(r.position=r.firstTabInLine,Ct(r,"tab characters must not be used in indentation")),e===45)&&Mn(r.input.charCodeAt(r.position+1));)if(a=!0,r.position++,De(r,!0,-1)&&r.lineIndent<=t)i.push(null),e=r.input.charCodeAt(r.position);else if(n=r.line,Yo(r,t,qx,!1,!0),i.push(r.result),De(r,!0,-1),e=r.input.charCodeAt(r.position),(r.line===n||r.lineIndent>t)&&e!==0)Ct(r,"bad indentation of a sequence entry");else if(r.lineIndent<t)break;return!!a&&(r.tag=o,r.anchor=s,r.kind="sequence",r.result=i,!0)}function rb(r,t,n){var e,o,s,i,a,l,c,u=r.tag,h=r.anchor,d={},p=Object.create(null),g=null,$=null,b=null,y=!1,x=!1;if(r.firstTabInLine!==-1)return!1;for(r.anchor!==null&&(r.anchorMap[r.anchor]=d),c=r.input.charCodeAt(r.position);c!==0;){if(y||r.firstTabInLine===-1||(r.position=r.firstTabInLine,Ct(r,"tab characters must not be used in indentation")),e=r.input.charCodeAt(r.position+1),s=r.line,c!==63&&c!==58||!Mn(e)){if(i=r.line,a=r.lineStart,l=r.position,!Yo(r,n,Ux,!1,!0))break;if(r.line===s){for(c=r.input.charCodeAt(r.position);yo(c);)c=r.input.charCodeAt(++r.position);if(c===58)Mn(c=r.input.charCodeAt(++r.position))||Ct(r,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(Ro(r,d,p,g,$,null,i,a,l),g=$=b=null),x=!0,y=!1,o=!1,g=r.tag,$=r.result;else{if(!x)return r.tag=u,r.anchor=h,!0;Ct(r,"can not read an implicit mapping pair; a colon is missed")}}else{if(!x)return r.tag=u,r.anchor=h,!0;Ct(r,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else c===63?(y&&(Ro(r,d,p,g,$,null,i,a,l),g=$=b=null),x=!0,y=!0,o=!0):y?(y=!1,o=!0):Ct(r,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),r.position+=1,c=e;if((r.line===s||r.lineIndent>t)&&(y&&(i=r.line,a=r.lineStart,l=r.position),Yo(r,t,jl,!0,o)&&(y?$=r.result:b=r.result),y||(Ro(r,d,p,g,$,b,i,a,l),g=$=b=null),De(r,!0,-1),c=r.input.charCodeAt(r.position)),(r.line===s||r.lineIndent>t)&&c!==0)Ct(r,"bad indentation of a mapping entry");else if(r.lineIndent<t)break}return y&&Ro(r,d,p,g,$,null,i,a,l),x&&(r.tag=u,r.anchor=h,r.kind="mapping",r.result=d),x}function ob(r){var t,n,e,o,s=!1,i=!1;if((o=r.input.charCodeAt(r.position))!==33)return!1;if(r.tag!==null&&Ct(r,"duplication of a tag property"),(o=r.input.charCodeAt(++r.position))===60?(s=!0,o=r.input.charCodeAt(++r.position)):o===33?(i=!0,n="!!",o=r.input.charCodeAt(++r.position)):n="!",t=r.position,s){do o=r.input.charCodeAt(++r.position);while(o!==0&&o!==62);r.position<r.length?(e=r.input.slice(t,r.position),o=r.input.charCodeAt(++r.position)):Ct(r,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!Mn(o);)o===33&&(i?Ct(r,"tag suffix cannot contain exclamation marks"):(n=r.input.slice(t-1,r.position+1),jx.test(n)||Ct(r,"named tag handle cannot contain such characters"),i=!0,t=r.position+1)),o=r.input.charCodeAt(++r.position);e=r.input.slice(t,r.position),lT.test(e)&&Ct(r,"tag suffix cannot contain flow indicator characters")}e&&!Wx.test(e)&&Ct(r,"tag name cannot contain such characters: "+e);try{e=decodeURIComponent(e)}catch{Ct(r,"tag name is malformed: "+e)}return s?r.tag=e:bo.call(r.tagMap,n)?r.tag=r.tagMap[n]+e:n==="!"?r.tag="!"+e:n==="!!"?r.tag="tag:yaml.org,2002:"+e:Ct(r,'undeclared tag handle "'+n+'"'),!0}function sb(r){var t,n;if((n=r.input.charCodeAt(r.position))!==38)return!1;for(r.anchor!==null&&Ct(r,"duplication of an anchor property"),n=r.input.charCodeAt(++r.position),t=r.position;n!==0&&!Mn(n)&&!No(n);)n=r.input.charCodeAt(++r.position);return r.position===t&&Ct(r,"name of an anchor node must contain at least one character"),r.anchor=r.input.slice(t,r.position),!0}function ib(r){var t,n,e;if((e=r.input.charCodeAt(r.position))!==42)return!1;for(e=r.input.charCodeAt(++r.position),t=r.position;e!==0&&!Mn(e)&&!No(e);)e=r.input.charCodeAt(++r.position);return r.position===t&&Ct(r,"name of an alias node must contain at least one character"),n=r.input.slice(t,r.position),bo.call(r.anchorMap,n)||Ct(r,'unidentified alias "'+n+'"'),r.result=r.anchorMap[n],De(r,!0,-1),!0}function Yo(r,t,n,e,o){var s,i,a,l,c,u,h,d,p,g=1,$=!1,b=!1;if(r.listener!==null&&r.listener("open",r),r.tag=null,r.anchor=null,r.kind=null,r.result=null,s=i=a=jl===n||qx===n,e&&De(r,!0,-1)&&($=!0,r.lineIndent>t?g=1:r.lineIndent===t?g=0:r.lineIndent<t&&(g=-1)),g===1)for(;ob(r)||sb(r);)De(r,!0,-1)?($=!0,a=s,r.lineIndent>t?g=1:r.lineIndent===t?g=0:r.lineIndent<t&&(g=-1)):a=!1;if(a&&(a=$||o),g!==1&&jl!==n||(d=ql===n||Ux===n?t:t+1,p=r.position-r.lineStart,g===1?a&&(ph(r,p)||rb(r,p,d))||eb(r,d)?b=!0:(i&&nb(r,d)||Jx(r,d)||tb(r,d)?b=!0:ib(r)?(b=!0,r.tag===null&&r.anchor===null||Ct(r,"alias node should not have any properties")):Kx(r,d,ql===n)&&(b=!0,r.tag===null&&(r.tag="?")),r.anchor!==null&&(r.anchorMap[r.anchor]=r.result)):g===0&&(b=a&&ph(r,p))),r.tag===null)r.anchor!==null&&(r.anchorMap[r.anchor]=r.result);else if(r.tag==="?"){for(r.result!==null&&r.kind!=="scalar"&&Ct(r,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+r.kind+'"'),l=0,c=r.implicitTypes.length;l<c;l+=1)if((h=r.implicitTypes[l]).resolve(r.result)){r.result=h.construct(r.result),r.tag=h.tag,r.anchor!==null&&(r.anchorMap[r.anchor]=r.result);break}}else if(r.tag!=="!"){if(bo.call(r.typeMap[r.kind||"fallback"],r.tag))h=r.typeMap[r.kind||"fallback"][r.tag];else for(h=null,l=0,c=(u=r.typeMap.multi[r.kind||"fallback"]).length;l<c;l+=1)if(r.tag.slice(0,u[l].tag.length)===u[l].tag){h=u[l];break}h||Ct(r,"unknown tag !<"+r.tag+">"),r.result!==null&&h.kind!==r.kind&&Ct(r,"unacceptable node kind for !<"+r.tag+'> tag; it should be "'+h.kind+'", not "'+r.kind+'"'),h.resolve(r.result,r.tag)?(r.result=h.construct(r.result,r.tag),r.anchor!==null&&(r.anchorMap[r.anchor]=r.result)):Ct(r,"cannot resolve a node with !<"+r.tag+"> explicit tag")}return r.listener!==null&&r.listener("close",r),r.tag!==null||r.anchor!==null||b}function ab(r){var t,n,e,o,s=r.position,i=!1;for(r.version=null,r.checkLineBreaks=r.legacy,r.tagMap=Object.create(null),r.anchorMap=Object.create(null);(o=r.input.charCodeAt(r.position))!==0&&(De(r,!0,-1),o=r.input.charCodeAt(r.position),!(r.lineIndent>0||o!==37));){for(i=!0,o=r.input.charCodeAt(++r.position),t=r.position;o!==0&&!Mn(o);)o=r.input.charCodeAt(++r.position);for(e=[],(n=r.input.slice(t,r.position)).length<1&&Ct(r,"directive name must not be less than one character in length");o!==0;){for(;yo(o);)o=r.input.charCodeAt(++r.position);if(o===35){do o=r.input.charCodeAt(++r.position);while(o!==0&&!gr(o));break}if(gr(o))break;for(t=r.position;o!==0&&!Mn(o);)o=r.input.charCodeAt(++r.position);e.push(r.input.slice(t,r.position))}o!==0&&Tc(r),bo.call(d1,n)?d1[n](r,n,e):Wi(r,'unknown document directive "'+n+'"')}De(r,!0,-1),r.lineIndent===0&&r.input.charCodeAt(r.position)===45&&r.input.charCodeAt(r.position+1)===45&&r.input.charCodeAt(r.position+2)===45?(r.position+=3,De(r,!0,-1)):i&&Ct(r,"directives end mark is expected"),Yo(r,r.lineIndent-1,jl,!1,!0),De(r,!0,-1),r.checkLineBreaks&&aT.test(r.input.slice(s,r.position))&&Wi(r,"non-ASCII line breaks are interpreted as content"),r.documents.push(r.result),r.position===r.lineStart&&da(r)?r.input.charCodeAt(r.position)===46&&(r.position+=3,De(r,!0,-1)):r.position<r.length-1&&Ct(r,"end of the stream or a document separator is expected")}function Ed(r,t){t=t||{},(r=String(r)).length!==0&&(r.charCodeAt(r.length-1)!==10&&r.charCodeAt(r.length-1)!==13&&(r+=`
`),r.charCodeAt(0)===65279&&(r=r.slice(1)));var n=new Qx(r,t),e=r.indexOf("\0");for(e!==-1&&(n.position=e,Ct(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)ab(n);return n.documents}function lb(r,t,n){t!==null&&typeof t=="object"&&n===void 0&&(n=t,t=null);var e=Ed(r,n);if(typeof t!="function")return e;for(var o=0,s=e.length;o<s;o+=1)t(e[o])}function cb(r,t){var n=Ed(r,t);if(n.length!==0){if(n.length===1)return n[0];throw new On("expected a single document in the stream, but found more")}}w(Yr,"captureSegment"),w(dh,"mergeMappings"),w(Ro,"storeMappingPair"),w(Tc,"readLineBreak"),w(De,"skipSeparationSpace"),w(da,"testDocumentSeparator"),w(Mc,"writeFoldedLines"),w(Kx,"readPlainScalar"),w(Jx,"readSingleQuotedScalar"),w(tb,"readDoubleQuotedScalar"),w(eb,"readFlowCollection"),w(nb,"readBlockScalar"),w(ph,"readBlockSequence"),w(rb,"readBlockMapping"),w(ob,"readTagProperty"),w(sb,"readAnchorProperty"),w(ib,"readAlias"),w(Yo,"composeNode"),w(ab,"readDocument"),w(Ed,"loadDocuments"),w(lb,"loadAll$1"),w(cb,"load$1");var cT={loadAll:lb,load:cb},ub=Object.prototype.toString,hb=Object.prototype.hasOwnProperty,Bd=65279,uT=9,Hi=10,hT=13,dT=32,pT=33,fT=34,fh=35,gT=37,mT=38,$T=39,yT=42,db=44,xT=45,Wl=58,bT=61,wT=62,vT=63,_T=64,pb=91,fb=93,kT=96,gb=123,CT=124,mb=125,ST={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},TT=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],MT=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function $b(r,t){var n,e,o,s,i,a,l;if(t===null)return{};for(n={},o=0,s=(e=Object.keys(t)).length;o<s;o+=1)i=e[o],a=String(t[i]),i.slice(0,2)==="!!"&&(i="tag:yaml.org,2002:"+i.slice(2)),(l=r.compiledTypeMap.fallback[i])&&hb.call(l.styleAliases,a)&&(a=l.styleAliases[a]),n[i]=a;return n}function yb(r){var t,n,e;if(t=r.toString(16).toUpperCase(),r<=255)n="x",e=2;else if(r<=65535)n="u",e=4;else{if(!(r<=4294967295))throw new On("code point within a string may not be greater than 0xFFFFFFFF");n="U",e=8}return"\\"+n+Ve.repeat("0",e-t.length)+t}w($b,"compileStyleMap"),w(yb,"encodeHex");var AT=1,Vi=2;function xb(r){this.schema=r.schema||Px,this.indent=Math.max(1,r.indent||2),this.noArrayIndent=r.noArrayIndent||!1,this.skipInvalid=r.skipInvalid||!1,this.flowLevel=Ve.isNothing(r.flowLevel)?-1:r.flowLevel,this.styleMap=$b(this.schema,r.styles||null),this.sortKeys=r.sortKeys||!1,this.lineWidth=r.lineWidth||80,this.noRefs=r.noRefs||!1,this.noCompatMode=r.noCompatMode||!1,this.condenseFlow=r.condenseFlow||!1,this.quotingType=r.quotingType==='"'?Vi:AT,this.forceQuotes=r.forceQuotes||!1,this.replacer=typeof r.replacer=="function"?r.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function gh(r,t){for(var n,e=Ve.repeat(" ",t),o=0,s=-1,i="",a=r.length;o<a;)(s=r.indexOf(`
`,o))===-1?(n=r.slice(o),o=a):(n=r.slice(o,s+1),o=s+1),n.length&&n!==`
`&&(i+=e),i+=n;return i}function Hl(r,t){return`
`+Ve.repeat(" ",r.indent*t)}function bb(r,t){var n,e;for(n=0,e=r.implicitTypes.length;n<e;n+=1)if(r.implicitTypes[n].resolve(t))return!0;return!1}function Gi(r){return r===dT||r===uT}function Rs(r){return 32<=r&&r<=126||161<=r&&r<=55295&&r!==8232&&r!==8233||57344<=r&&r<=65533&&r!==Bd||65536<=r&&r<=1114111}function mh(r){return Rs(r)&&r!==Bd&&r!==hT&&r!==Hi}function $h(r,t,n){var e=mh(r),o=e&&!Gi(r);return(n?e:e&&r!==db&&r!==pb&&r!==fb&&r!==gb&&r!==mb)&&r!==fh&&!(t===Wl&&!o)||mh(t)&&!Gi(t)&&r===fh||t===Wl&&o}function wb(r){return Rs(r)&&r!==Bd&&!Gi(r)&&r!==xT&&r!==vT&&r!==Wl&&r!==db&&r!==pb&&r!==fb&&r!==gb&&r!==mb&&r!==fh&&r!==mT&&r!==yT&&r!==pT&&r!==CT&&r!==bT&&r!==wT&&r!==$T&&r!==fT&&r!==gT&&r!==_T&&r!==kT}function vb(r){return!Gi(r)&&r!==Wl}function ms(r,t){var n,e=r.charCodeAt(t);return e>=55296&&e<=56319&&t+1<r.length&&(n=r.charCodeAt(t+1))>=56320&&n<=57343?1024*(e-55296)+n-56320+65536:e}function Id(r){return/^\n* /.test(r)}w(xb,"State"),w(gh,"indentString"),w(Hl,"generateNextLine"),w(bb,"testImplicitResolving"),w(Gi,"isWhitespace"),w(Rs,"isPrintable"),w(mh,"isNsCharOrWhitespace"),w($h,"isPlainSafe"),w(wb,"isPlainSafeFirst"),w(vb,"isPlainSafeLast"),w(ms,"codePointAt"),w(Id,"needIndentIndicator");var _b=1,yh=2,kb=3,Cb=4,ps=5;function Sb(r,t,n,e,o,s,i,a){var l,c=0,u=null,h=!1,d=!1,p=e!==-1,g=-1,$=wb(ms(r,0))&&vb(ms(r,r.length-1));if(t||i)for(l=0;l<r.length;c>=65536?l+=2:l++){if(!Rs(c=ms(r,l)))return ps;$=$&&$h(c,u,a),u=c}else{for(l=0;l<r.length;c>=65536?l+=2:l++){if((c=ms(r,l))===Hi)h=!0,p&&(d=d||l-g-1>e&&r[g+1]!==" ",g=l);else if(!Rs(c))return ps;$=$&&$h(c,u,a),u=c}d=d||p&&l-g-1>e&&r[g+1]!==" "}return h||d?n>9&&Id(r)?ps:i?s===Vi?ps:yh:d?Cb:kb:!$||i||o(r)?s===Vi?ps:yh:_b}function Tb(r,t,n,e,o){r.dump=function(){if(t.length===0)return r.quotingType===Vi?'""':"''";if(!r.noCompatMode&&(TT.indexOf(t)!==-1||MT.test(t)))return r.quotingType===Vi?'"'+t+'"':"'"+t+"'";var s=r.indent*Math.max(1,n),i=r.lineWidth===-1?-1:Math.max(Math.min(r.lineWidth,40),r.lineWidth-s),a=e||r.flowLevel>-1&&n>=r.flowLevel;function l(c){return bb(r,c)}switch(w(l,"testAmbiguity"),Sb(t,a,r.indent,i,l,r.quotingType,r.forceQuotes&&!e,o)){case _b:return t;case yh:return"'"+t.replace(/'/g,"''")+"'";case kb:return"|"+xh(t,r.indent)+bh(gh(t,s));case Cb:return">"+xh(t,r.indent)+bh(gh(Mb(t,i),s));case ps:return'"'+Ab(t)+'"';default:throw new On("impossible error: invalid scalar style")}}()}function xh(r,t){var n=Id(r)?String(t):"",e=r[r.length-1]===`
`;return n+(e&&(r[r.length-2]===`
`||r===`
`)?"+":e?"":"-")+`
`}function bh(r){return r[r.length-1]===`
`?r.slice(0,-1):r}function Mb(r,t){for(var n,e,o,s=/(\n+)([^\n]*)/g,i=(n=(n=r.indexOf(`
`))!==-1?n:r.length,s.lastIndex=n,wh(r.slice(0,n),t)),a=r[0]===`
`||r[0]===" ";o=s.exec(r);){var l=o[1],c=o[2];e=c[0]===" ",i+=l+(a||e||c===""?"":`
`)+wh(c,t),a=e}return i}function wh(r,t){if(r===""||r[0]===" ")return r;for(var n,e,o=/ [^ ]/g,s=0,i=0,a=0,l="";n=o.exec(r);)(a=n.index)-s>t&&(e=i>s?i:a,l+=`
`+r.slice(s,e),s=e+1),i=a;return l+=`
`,r.length-s>t&&i>s?l+=r.slice(s,i)+`
`+r.slice(i+1):l+=r.slice(s),l.slice(1)}function Ab(r){for(var t,n="",e=0,o=0;o<r.length;e>=65536?o+=2:o++)e=ms(r,o),!(t=ST[e])&&Rs(e)?(n+=r[o],e>=65536&&(n+=r[o+1])):n+=t||yb(e);return n}function Lb(r,t,n){var e,o,s,i="",a=r.tag;for(e=0,o=n.length;e<o;e+=1)s=n[e],r.replacer&&(s=r.replacer.call(n,String(e),s)),(Br(r,t,s,!1,!1)||s===void 0&&Br(r,t,null,!1,!1))&&(i!==""&&(i+=","+(r.condenseFlow?"":" ")),i+=r.dump);r.tag=a,r.dump="["+i+"]"}function vh(r,t,n,e){var o,s,i,a="",l=r.tag;for(o=0,s=n.length;o<s;o+=1)i=n[o],r.replacer&&(i=r.replacer.call(n,String(o),i)),(Br(r,t+1,i,!0,!0,!1,!0)||i===void 0&&Br(r,t+1,null,!0,!0,!1,!0))&&(e&&a===""||(a+=Hl(r,t)),r.dump&&Hi===r.dump.charCodeAt(0)?a+="-":a+="- ",a+=r.dump);r.tag=l,r.dump=a||"[]"}function Eb(r,t,n){var e,o,s,i,a,l="",c=r.tag,u=Object.keys(n);for(e=0,o=u.length;e<o;e+=1)a="",l!==""&&(a+=", "),r.condenseFlow&&(a+='"'),i=n[s=u[e]],r.replacer&&(i=r.replacer.call(n,s,i)),Br(r,t,s,!1,!1)&&(r.dump.length>1024&&(a+="? "),a+=r.dump+(r.condenseFlow?'"':"")+":"+(r.condenseFlow?"":" "),Br(r,t,i,!1,!1)&&(l+=a+=r.dump));r.tag=c,r.dump="{"+l+"}"}function Bb(r,t,n,e){var o,s,i,a,l,c,u="",h=r.tag,d=Object.keys(n);if(r.sortKeys===!0)d.sort();else if(typeof r.sortKeys=="function")d.sort(r.sortKeys);else if(r.sortKeys)throw new On("sortKeys must be a boolean or a function");for(o=0,s=d.length;o<s;o+=1)c="",e&&u===""||(c+=Hl(r,t)),a=n[i=d[o]],r.replacer&&(a=r.replacer.call(n,i,a)),Br(r,t+1,i,!0,!0,!0)&&((l=r.tag!==null&&r.tag!=="?"||r.dump&&r.dump.length>1024)&&(r.dump&&Hi===r.dump.charCodeAt(0)?c+="?":c+="? "),c+=r.dump,l&&(c+=Hl(r,t)),Br(r,t+1,a,!0,l)&&(r.dump&&Hi===r.dump.charCodeAt(0)?c+=":":c+=": ",u+=c+=r.dump));r.tag=h,r.dump=u||"{}"}function _h(r,t,n){var e,o,s,i,a,l;for(s=0,i=(o=n?r.explicitTypes:r.implicitTypes).length;s<i;s+=1)if(((a=o[s]).instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(n?a.multi&&a.representName?r.tag=a.representName(t):r.tag=a.tag:r.tag="?",a.represent){if(l=r.styleMap[a.tag]||a.defaultStyle,ub.call(a.represent)==="[object Function]")e=a.represent(t,l);else{if(!hb.call(a.represent,l))throw new On("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');e=a.represent[l](t,l)}r.dump=e}return!0}return!1}function Br(r,t,n,e,o,s,i){r.tag=null,r.dump=n,_h(r,n,!1)||_h(r,n,!0);var a,l=ub.call(r.dump),c=e;e&&(e=r.flowLevel<0||r.flowLevel>t);var u,h,d=l==="[object Object]"||l==="[object Array]";if(d&&(h=(u=r.duplicates.indexOf(n))!==-1),(r.tag!==null&&r.tag!=="?"||h||r.indent!==2&&t>0)&&(o=!1),h&&r.usedDuplicates[u])r.dump="*ref_"+u;else{if(d&&h&&!r.usedDuplicates[u]&&(r.usedDuplicates[u]=!0),l==="[object Object]")e&&Object.keys(r.dump).length!==0?(Bb(r,t,r.dump,o),h&&(r.dump="&ref_"+u+r.dump)):(Eb(r,t,r.dump),h&&(r.dump="&ref_"+u+" "+r.dump));else if(l==="[object Array]")e&&r.dump.length!==0?(r.noArrayIndent&&!i&&t>0?vh(r,t-1,r.dump,o):vh(r,t,r.dump,o),h&&(r.dump="&ref_"+u+r.dump)):(Lb(r,t,r.dump),h&&(r.dump="&ref_"+u+" "+r.dump));else{if(l!=="[object String]"){if(l==="[object Undefined]"||r.skipInvalid)return!1;throw new On("unacceptable kind of an object to dump "+l)}r.tag!=="?"&&Tb(r,r.dump,t,s,c)}r.tag!==null&&r.tag!=="?"&&(a=encodeURI(r.tag[0]==="!"?r.tag.slice(1):r.tag).replace(/!/g,"%21"),a=r.tag[0]==="!"?"!"+a:a.slice(0,18)==="tag:yaml.org,2002:"?"!!"+a.slice(18):"!<"+a+">",r.dump=a+" "+r.dump)}return!0}function p1(r,t){var n,e,o=[],s=[];for(Vl(r,o,s),n=0,e=s.length;n<e;n+=1)t.duplicates.push(o[s[n]]);t.usedDuplicates=new Array(e)}function Vl(r,t,n){var e,o,s;if(r!==null&&typeof r=="object")if((o=t.indexOf(r))!==-1)n.indexOf(o)===-1&&n.push(o);else if(t.push(r),Array.isArray(r))for(o=0,s=r.length;o<s;o+=1)Vl(r[o],t,n);else for(o=0,s=(e=Object.keys(r)).length;o<s;o+=1)Vl(r[e[o]],t,n)}w(Sb,"chooseScalarStyle"),w(Tb,"writeScalar"),w(xh,"blockHeader"),w(bh,"dropEndingNewline"),w(Mb,"foldString"),w(wh,"foldLine"),w(Ab,"escapeString"),w(Lb,"writeFlowSequence"),w(vh,"writeBlockSequence"),w(Eb,"writeFlowMapping"),w(Bb,"writeBlockMapping"),w(_h,"detectType"),w(Br,"writeNode"),w(p1,"getDuplicateReferences"),w(Vl,"inspectNode"),w(function(r,t){var n=new xb(t=t||{});n.noRefs||p1(r,n);var e=r;return n.replacer&&(e=n.replacer.call({"":e},"",e)),Br(n,0,e,!0,!0)?n.dump+`
`:""},"dump$1"),w(function(r,t){return function(){throw new Error("Function yaml."+r+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}},"renamed");var LT=_x,ET=cT.load;const BT=Object.freeze({left:0,top:0,width:16,height:16}),Gl=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),Ib=Object.freeze({...BT,...Gl}),IT=Object.freeze({...Ib,body:"",hidden:!1}),FT=Object.freeze({width:null,height:null}),DT=Object.freeze({...FT,...Gl}),bu=(r,t)=>!!r&&!(!(t&&r.prefix===""||r.prefix)||!r.name);function f1(r,t){const n=function(e,o){const s={};!e.hFlip!=!o.hFlip&&(s.hFlip=!0),!e.vFlip!=!o.vFlip&&(s.vFlip=!0);const i=((e.rotate||0)+(o.rotate||0))%4;return i&&(s.rotate=i),s}(r,t);for(const e in IT)e in Gl?e in r&&!(e in n)&&(n[e]=Gl[e]):e in t?n[e]=t[e]:e in r&&(n[e]=r[e]);return n}function g1(r,t,n){const e=r.icons,o=r.aliases||Object.create(null);let s={};function i(a){s=f1(e[a]||o[a],s)}return i(t),n.forEach(i),f1(r,s)}function OT(r,t){if(r.icons[t])return g1(r,t,[]);const n=function(e,o){const s=e.icons,i=e.aliases||Object.create(null),a=Object.create(null);return(o||Object.keys(s).concat(Object.keys(i))).forEach(function l(c){if(s[c])return a[c]=[];if(!(c in a)){a[c]=null;const u=i[c]&&i[c].parent,h=u&&l(u);h&&(a[c]=[u].concat(h))}return a[c]}),a}(r,[t])[t];return n?g1(r,t,n):null}const zT=/(-?[0-9.]*[0-9]+[0-9.]*)/g,NT=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function m1(r,t,n){if(t===1)return r;if(n=n||100,typeof r=="number")return Math.ceil(r*t*n)/n;if(typeof r!="string")return r;const e=r.split(zT);if(e===null||!e.length)return r;const o=[];let s=e.shift(),i=NT.test(s);for(;;){if(i){const a=parseFloat(s);isNaN(a)?o.push(s):o.push(Math.ceil(a*t*n)/n)}else o.push(s);if(s=e.shift(),s===void 0)return o.join("");i=!i}}const RT=/\sid="(\S+)"/g,PT="IconifyId"+Date.now().toString(16)+(16777216*Math.random()|0).toString(16);let UT=0;var qT={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},kh=new Map,Fb=new Map,jT=w(r=>{for(const t of r){if(!t.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(it.debug("Registering icon pack:",t.name),"loader"in t)Fb.set(t.name,t.loader);else{if(!("icons"in t))throw it.error("Invalid icon loader:",t),new Error('Invalid icon loader. Must have either "icons" or "loader" property.');kh.set(t.name,t.icons)}}},"registerIconPacks"),WT=w(async(r,t)=>{const n=((i,a,l,c="")=>{const u=i.split(":");if(i.slice(0,1)==="@"){if(u.length<2||u.length>3)return null;c=u.shift().slice(1)}if(u.length>3||!u.length)return null;if(u.length>1){const p=u.pop(),g=u.pop(),$={provider:u.length>0?u[0]:c,prefix:g,name:p};return bu($)?$:null}const h=u[0],d=h.split("-");if(d.length>1){const p={provider:c,prefix:d.shift(),name:d.join("-")};return bu(p)?p:null}if(l&&c===""){const p={provider:c,prefix:"",name:h};return bu(p,l)?p:null}return null})(r,0,t!==void 0);if(!n)throw new Error(`Invalid icon name: ${r}`);const e=n.prefix||t;if(!e)throw new Error(`Icon name must contain a prefix: ${r}`);let o=kh.get(e);if(!o){const i=Fb.get(e);if(!i)throw new Error(`Icon set not found: ${n.prefix}`);try{o={...await i(),prefix:e},kh.set(e,o)}catch(a){throw it.error(a),new Error(`Failed to load icon set: ${n.prefix}`)}}const s=OT(o,n.name);if(!s)throw new Error(`Icon not found: ${r}`);return s},"getRegisteredIconData"),Ac=w(async(r,t)=>{let n;try{n=await WT(r,t==null?void 0:t.fallbackPrefix)}catch(s){it.error(s),n=qT}const e=function(s,i){const a={...Ib,...s},l={...DT,...i},c={left:a.left,top:a.top,width:a.width,height:a.height};let u=a.body;[a,l].forEach(L=>{const A=[],B=L.hFlip,E=L.vFlip;let F,U=L.rotate;switch(B?E?U+=2:(A.push("translate("+(c.width+c.left).toString()+" "+(0-c.top).toString()+")"),A.push("scale(-1 1)"),c.top=c.left=0):E&&(A.push("translate("+(0-c.left).toString()+" "+(c.height+c.top).toString()+")"),A.push("scale(1 -1)"),c.top=c.left=0),U<0&&(U-=4*Math.floor(U/4)),U%=4,U){case 1:F=c.height/2+c.top,A.unshift("rotate(90 "+F.toString()+" "+F.toString()+")");break;case 2:A.unshift("rotate(180 "+(c.width/2+c.left).toString()+" "+(c.height/2+c.top).toString()+")");break;case 3:F=c.width/2+c.left,A.unshift("rotate(-90 "+F.toString()+" "+F.toString()+")")}U%2==1&&(c.left!==c.top&&(F=c.left,c.left=c.top,c.top=F),c.width!==c.height&&(F=c.width,c.width=c.height,c.height=F)),A.length&&(u=function(tt,q,N){const R=function(z,G="defs"){let K="";const et=z.indexOf("<"+G);for(;et>=0;){const ct=z.indexOf(">",et),st=z.indexOf("</"+G);if(ct===-1||st===-1)break;const at=z.indexOf(">",st);if(at===-1)break;K+=z.slice(ct+1,st).trim(),z=z.slice(0,et).trim()+z.slice(at+1)}return{defs:K,content:z}}(tt);return j=R.defs,Q=q+R.content+N,j?"<defs>"+j+"</defs>"+Q:Q;var j,Q}(u,'<g transform="'+A.join(" ")+'">',"</g>"))});const h=l.width,d=l.height,p=c.width,g=c.height;let $,b;h===null?(b=d===null?"1em":d==="auto"?g:d,$=m1(b,p/g)):($=h==="auto"?p:h,b=d===null?m1($,g/p):d==="auto"?g:d);const y={},x=(L,A)=>{(B=>B==="unset"||B==="undefined"||B==="none")(A)||(y[L]=A.toString())};x("width",$),x("height",b);const M=[c.left,c.top,p,g];return y.viewBox=M.join(" "),{attributes:y,viewBox:M,body:u}}(n,t);return function(s,i){let a=s.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const l in i)a+=" "+l+'="'+i[l]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+a+">"+s+"</svg>"}(function(s,i=PT){const a=[];let l;for(;l=RT.exec(s);)a.push(l[1]);if(!a.length)return s;const c="suffix"+(16777216*Math.random()|Date.now()).toString(16);return a.forEach(u=>{const h=typeof i=="function"?i(u):i+(UT++).toString(),d=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");s=s.replace(new RegExp('([#;"])('+d+')([")]|\\.[a-z])',"g"),"$1"+h+c+"$3")}),s=s.replace(new RegExp(c,"g"),"")}(e.body),e.attributes)},"getIconSVG"),Fd=w(({flowchart:r})=>{var e,o;const t=((e=r==null?void 0:r.subGraphTitleMargin)==null?void 0:e.top)??0,n=((o=r==null?void 0:r.subGraphTitleMargin)==null?void 0:o.bottom)??0;return{subGraphTitleTopMargin:t,subGraphTitleBottomMargin:n,subGraphTitleTotalMargin:t+n}},"getSubGraphTitleMargins"),Dd={},Qe={};Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.BLANK_URL=Qe.relativeFirstCharacters=Qe.whitespaceEscapeCharsRegex=Qe.urlSchemeRegex=Qe.ctrlCharactersRegex=Qe.htmlCtrlEntityRegex=Qe.htmlEntitiesRegex=Qe.invalidProtocolRegex=void 0,Qe.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,Qe.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,Qe.htmlCtrlEntityRegex=/&(newline|tab);/gi,Qe.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Qe.urlSchemeRegex=/^.+(:|&colon;)/gim,Qe.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,Qe.relativeFirstCharacters=[".","/"],Qe.BLANK_URL="about:blank",Object.defineProperty(Dd,"__esModule",{value:!0});var Db=Dd.sanitizeUrl=void 0,$n=Qe;function HT(r){return r.replace($n.ctrlCharactersRegex,"").replace($n.htmlEntitiesRegex,function(t,n){return String.fromCharCode(n)})}function $1(r){try{return decodeURIComponent(r)}catch{return r}}Db=Dd.sanitizeUrl=function(r){if(!r)return $n.BLANK_URL;var t,n=$1(r.trim());do t=(n=$1(n=HT(n).replace($n.htmlCtrlEntityRegex,"").replace($n.ctrlCharactersRegex,"").replace($n.whitespaceEscapeCharsRegex,"").trim())).match($n.ctrlCharactersRegex)||n.match($n.htmlEntitiesRegex)||n.match($n.htmlCtrlEntityRegex)||n.match($n.whitespaceEscapeCharsRegex);while(t&&t.length>0);var e=n;if(!e)return $n.BLANK_URL;if(function(c){return $n.relativeFirstCharacters.indexOf(c[0])>-1}(e))return e;var o=e.trimStart(),s=o.match($n.urlSchemeRegex);if(!s)return e;var i=s[0].toLowerCase().trim();if($n.invalidProtocolRegex.test(i))return $n.BLANK_URL;var a=o.replace(/\\/g,"/");if(i==="mailto:"||i.includes("://"))return a;if(i==="http:"||i==="https:"){if(!function(c){return URL.canParse(c)}(a))return $n.BLANK_URL;var l=new URL(a);return l.protocol=l.protocol.toLowerCase(),l.hostname=l.hostname.toLowerCase(),l.toString()}return a};var VT={value:()=>{}};function Ob(){for(var r,t=0,n=arguments.length,e={};t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new rl(e)}function rl(r){this._=r}function GT(r,t){for(var n,e=0,o=r.length;e<o;++e)if((n=r[e]).name===t)return n.value}function y1(r,t,n){for(var e=0,o=r.length;e<o;++e)if(r[e].name===t){r[e]=VT,r=r.slice(0,e).concat(r.slice(e+1));break}return n!=null&&r.push({name:t,value:n}),r}rl.prototype=Ob.prototype={constructor:rl,on:function(r,t){var n,e,o=this._,s=(e=o,(r+"").trim().split(/^|\s+/).map(function(l){var c="",u=l.indexOf(".");if(u>=0&&(c=l.slice(u+1),l=l.slice(0,u)),l&&!e.hasOwnProperty(l))throw new Error("unknown type: "+l);return{type:l,name:c}})),i=-1,a=s.length;if(!(arguments.length<2)){if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(n=(r=s[i]).type)o[n]=y1(o[n],r.name,t);else if(t==null)for(n in o)o[n]=y1(o[n],r.name,null);return this}for(;++i<a;)if((n=(r=s[i]).type)&&(n=GT(o[n],r.name)))return n},copy:function(){var r={},t=this._;for(var n in t)r[n]=t[n].slice();return new rl(r)},call:function(r,t){if((n=arguments.length-2)>0)for(var n,e,o=new Array(n),s=0;s<n;++s)o[s]=arguments[s+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(s=0,n=(e=this._[r]).length;s<n;++s)e[s].value.apply(t,o)},apply:function(r,t,n){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var e=this._[r],o=0,s=e.length;o<s;++o)e[o].value.apply(t,n)}};var Ch="http://www.w3.org/1999/xhtml";const x1={svg:"http://www.w3.org/2000/svg",xhtml:Ch,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Zl(r){var t=r+="",n=t.indexOf(":");return n>=0&&(t=r.slice(0,n))!=="xmlns"&&(r=r.slice(n+1)),x1.hasOwnProperty(t)?{space:x1[t],local:r}:r}function ZT(r){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ch&&t.documentElement.namespaceURI===Ch?t.createElement(r):t.createElementNS(n,r)}}function YT(r){return function(){return this.ownerDocument.createElementNS(r.space,r.local)}}function b1(r){var t=Zl(r);return(t.local?YT:ZT)(t)}function XT(){}function Sh(r){return r==null?XT:function(){return this.querySelector(r)}}function QT(){return[]}function zb(r){return r==null?QT:function(){return this.querySelectorAll(r)}}function KT(r){return function(){return function(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}(r.apply(this,arguments))}}function Nb(r){return function(){return this.matches(r)}}function w1(r){return function(t){return t.matches(r)}}var JT=Array.prototype.find;function t9(){return this.firstElementChild}var e9=Array.prototype.filter;function n9(){return Array.from(this.children)}function v1(r){return new Array(r.length)}function Yl(r,t){this.ownerDocument=r.ownerDocument,this.namespaceURI=r.namespaceURI,this._next=null,this._parent=r,this.__data__=t}function r9(r,t,n,e,o,s){for(var i,a=0,l=t.length,c=s.length;a<c;++a)(i=t[a])?(i.__data__=s[a],e[a]=i):n[a]=new Yl(r,s[a]);for(;a<l;++a)(i=t[a])&&(o[a]=i)}function o9(r,t,n,e,o,s,i){var a,l,c,u=new Map,h=t.length,d=s.length,p=new Array(h);for(a=0;a<h;++a)(l=t[a])&&(p[a]=c=i.call(l,l.__data__,a,t)+"",u.has(c)?o[a]=l:u.set(c,l));for(a=0;a<d;++a)c=i.call(r,s[a],a,s)+"",(l=u.get(c))?(e[a]=l,l.__data__=s[a],u.delete(c)):n[a]=new Yl(r,s[a]);for(a=0;a<h;++a)(l=t[a])&&u.get(p[a])===l&&(o[a]=l)}function s9(r){return r.__data__}function i9(r){return typeof r=="object"&&"length"in r?r:Array.from(r)}function a9(r,t){return r<t?-1:r>t?1:r>=t?0:NaN}function l9(r){return function(){this.removeAttribute(r)}}function c9(r){return function(){this.removeAttributeNS(r.space,r.local)}}function u9(r,t){return function(){this.setAttribute(r,t)}}function h9(r,t){return function(){this.setAttributeNS(r.space,r.local,t)}}function d9(r,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(r):this.setAttribute(r,n)}}function p9(r,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(r.space,r.local):this.setAttributeNS(r.space,r.local,n)}}function Rb(r){return r.ownerDocument&&r.ownerDocument.defaultView||r.document&&r||r.defaultView}function f9(r){return function(){this.style.removeProperty(r)}}function g9(r,t,n){return function(){this.style.setProperty(r,t,n)}}function m9(r,t,n){return function(){var e=t.apply(this,arguments);e==null?this.style.removeProperty(r):this.style.setProperty(r,e,n)}}function fs(r,t){return r.style.getPropertyValue(t)||Rb(r).getComputedStyle(r,null).getPropertyValue(t)}function $9(r){return function(){delete this[r]}}function y9(r,t){return function(){this[r]=t}}function x9(r,t){return function(){var n=t.apply(this,arguments);n==null?delete this[r]:this[r]=n}}function Pb(r){return r.trim().split(/^|\s+/)}function Od(r){return r.classList||new Ub(r)}function Ub(r){this._node=r,this._names=Pb(r.getAttribute("class")||"")}function qb(r,t){for(var n=Od(r),e=-1,o=t.length;++e<o;)n.add(t[e])}function jb(r,t){for(var n=Od(r),e=-1,o=t.length;++e<o;)n.remove(t[e])}function b9(r){return function(){qb(this,r)}}function w9(r){return function(){jb(this,r)}}function v9(r,t){return function(){(t.apply(this,arguments)?qb:jb)(this,r)}}function _9(){this.textContent=""}function k9(r){return function(){this.textContent=r}}function C9(r){return function(){var t=r.apply(this,arguments);this.textContent=t??""}}function S9(){this.innerHTML=""}function T9(r){return function(){this.innerHTML=r}}function M9(r){return function(){var t=r.apply(this,arguments);this.innerHTML=t??""}}function A9(){this.nextSibling&&this.parentNode.appendChild(this)}function L9(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function E9(){return null}function B9(){var r=this.parentNode;r&&r.removeChild(this)}function I9(){var r=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(r,this.nextSibling):r}function F9(){var r=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(r,this.nextSibling):r}function D9(r){return function(){var t=this.__on;if(t){for(var n,e=0,o=-1,s=t.length;e<s;++e)n=t[e],r.type&&n.type!==r.type||n.name!==r.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function O9(r,t,n){return function(){var e,o=this.__on,s=function(l){return function(c){l.call(this,c,this.__data__)}}(t);if(o){for(var i=0,a=o.length;i<a;++i)if((e=o[i]).type===r.type&&e.name===r.name)return this.removeEventListener(e.type,e.listener,e.options),this.addEventListener(e.type,e.listener=s,e.options=n),void(e.value=t)}this.addEventListener(r.type,s,n),e={type:r.type,name:r.name,value:t,listener:s,options:n},o?o.push(e):this.__on=[e]}}function Wb(r,t,n){var e=Rb(r),o=e.CustomEvent;typeof o=="function"?o=new o(t,n):(o=e.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),r.dispatchEvent(o)}function z9(r,t){return function(){return Wb(this,r,t)}}function N9(r,t){return function(){return Wb(this,r,t.apply(this,arguments))}}Yl.prototype={constructor:Yl,appendChild:function(r){return this._parent.insertBefore(r,this._next)},insertBefore:function(r,t){return this._parent.insertBefore(r,t)},querySelector:function(r){return this._parent.querySelector(r)},querySelectorAll:function(r){return this._parent.querySelectorAll(r)}},Ub.prototype={add:function(r){this._names.indexOf(r)<0&&(this._names.push(r),this._node.setAttribute("class",this._names.join(" ")))},remove:function(r){var t=this._names.indexOf(r);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(r){return this._names.indexOf(r)>=0}};var Hb=[null];function jn(r,t){this._groups=r,this._parents=t}function Zi(){return new jn([[document.documentElement]],Hb)}function fe(r){return typeof r=="string"?new jn([[document.querySelector(r)]],[document.documentElement]):new jn([[r]],Hb)}function wu(r,t,n){r.prototype=t.prototype=n,n.constructor=r}function _1(r,t){var n=Object.create(r.prototype);for(var e in t)n[e]=t[e];return n}function zi(){}jn.prototype=Zi.prototype={constructor:jn,select:function(r){typeof r!="function"&&(r=Sh(r));for(var t=this._groups,n=t.length,e=new Array(n),o=0;o<n;++o)for(var s,i,a=t[o],l=a.length,c=e[o]=new Array(l),u=0;u<l;++u)(s=a[u])&&(i=r.call(s,s.__data__,u,a))&&("__data__"in s&&(i.__data__=s.__data__),c[u]=i);return new jn(e,this._parents)},selectAll:function(r){r=typeof r=="function"?KT(r):zb(r);for(var t=this._groups,n=t.length,e=[],o=[],s=0;s<n;++s)for(var i,a=t[s],l=a.length,c=0;c<l;++c)(i=a[c])&&(e.push(r.call(i,i.__data__,c,a)),o.push(i));return new jn(e,o)},selectChild:function(r){return this.select(r==null?t9:function(t){return function(){return JT.call(this.children,t)}}(typeof r=="function"?r:w1(r)))},selectChildren:function(r){return this.selectAll(r==null?n9:function(t){return function(){return e9.call(this.children,t)}}(typeof r=="function"?r:w1(r)))},filter:function(r){typeof r!="function"&&(r=Nb(r));for(var t=this._groups,n=t.length,e=new Array(n),o=0;o<n;++o)for(var s,i=t[o],a=i.length,l=e[o]=[],c=0;c<a;++c)(s=i[c])&&r.call(s,s.__data__,c,i)&&l.push(s);return new jn(e,this._parents)},data:function(r,t){if(!arguments.length)return Array.from(this,s9);var n=t?o9:r9,e=this._parents,o=this._groups;typeof r!="function"&&(r=function(A){return function(){return A}}(r));for(var s=o.length,i=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=e[c],h=o[c],d=h.length,p=i9(r.call(u,u&&u.__data__,c,e)),g=p.length,$=a[c]=new Array(g),b=i[c]=new Array(g);n(u,h,$,b,l[c]=new Array(d),p,t);for(var y,x,M=0,L=0;M<g;++M)if(y=$[M]){for(M>=L&&(L=M+1);!(x=b[L])&&++L<g;);y._next=x||null}}return(i=new jn(i,e))._enter=a,i._exit=l,i},enter:function(){return new jn(this._enter||this._groups.map(v1),this._parents)},exit:function(){return new jn(this._exit||this._groups.map(v1),this._parents)},join:function(r,t,n){var e=this.enter(),o=this,s=this.exit();return typeof r=="function"?(e=r(e))&&(e=e.selection()):e=e.append(r+""),t!=null&&(o=t(o))&&(o=o.selection()),n==null?s.remove():n(s),e&&o?e.merge(o).order():o},merge:function(r){for(var t=r.selection?r.selection():r,n=this._groups,e=t._groups,o=n.length,s=e.length,i=Math.min(o,s),a=new Array(o),l=0;l<i;++l)for(var c,u=n[l],h=e[l],d=u.length,p=a[l]=new Array(d),g=0;g<d;++g)(c=u[g]||h[g])&&(p[g]=c);for(;l<o;++l)a[l]=n[l];return new jn(a,this._parents)},selection:function(){return this},order:function(){for(var r=this._groups,t=-1,n=r.length;++t<n;)for(var e,o=r[t],s=o.length-1,i=o[s];--s>=0;)(e=o[s])&&(i&&4^e.compareDocumentPosition(i)&&i.parentNode.insertBefore(e,i),i=e);return this},sort:function(r){function t(h,d){return h&&d?r(h.__data__,d.__data__):!h-!d}r||(r=a9);for(var n=this._groups,e=n.length,o=new Array(e),s=0;s<e;++s){for(var i,a=n[s],l=a.length,c=o[s]=new Array(l),u=0;u<l;++u)(i=a[u])&&(c[u]=i);c.sort(t)}return new jn(o,this._parents).order()},call:function(){var r=arguments[0];return arguments[0]=this,r.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var r=this._groups,t=0,n=r.length;t<n;++t)for(var e=r[t],o=0,s=e.length;o<s;++o){var i=e[o];if(i)return i}return null},size:function(){let r=0;for(const t of this)++r;return r},empty:function(){return!this.node()},each:function(r){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var o,s=t[n],i=0,a=s.length;i<a;++i)(o=s[i])&&r.call(o,o.__data__,i,s);return this},attr:function(r,t){var n=Zl(r);if(arguments.length<2){var e=this.node();return n.local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}return this.each((t==null?n.local?c9:l9:typeof t=="function"?n.local?p9:d9:n.local?h9:u9)(n,t))},style:function(r,t,n){return arguments.length>1?this.each((t==null?f9:typeof t=="function"?m9:g9)(r,t,n??"")):fs(this.node(),r)},property:function(r,t){return arguments.length>1?this.each((t==null?$9:typeof t=="function"?x9:y9)(r,t)):this.node()[r]},classed:function(r,t){var n=Pb(r+"");if(arguments.length<2){for(var e=Od(this.node()),o=-1,s=n.length;++o<s;)if(!e.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?v9:t?b9:w9)(n,t))},text:function(r){return arguments.length?this.each(r==null?_9:(typeof r=="function"?C9:k9)(r)):this.node().textContent},html:function(r){return arguments.length?this.each(r==null?S9:(typeof r=="function"?M9:T9)(r)):this.node().innerHTML},raise:function(){return this.each(A9)},lower:function(){return this.each(L9)},append:function(r){var t=typeof r=="function"?r:b1(r);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(r,t){var n=typeof r=="function"?r:b1(r),e=t==null?E9:typeof t=="function"?t:Sh(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),e.apply(this,arguments)||null)})},remove:function(){return this.each(B9)},clone:function(r){return this.select(r?F9:I9)},datum:function(r){return arguments.length?this.property("__data__",r):this.node().__data__},on:function(r,t,n){var e,o,s=function(h){return h.trim().split(/^|\s+/).map(function(d){var p="",g=d.indexOf(".");return g>=0&&(p=d.slice(g+1),d=d.slice(0,g)),{type:d,name:p}})}(r+""),i=s.length;if(!(arguments.length<2)){for(a=t?O9:D9,e=0;e<i;++e)this.each(a(s[e],t,n));return this}var a=this.node().__on;if(a){for(var l,c=0,u=a.length;c<u;++c)for(e=0,l=a[c];e<i;++e)if((o=s[e]).type===l.type&&o.name===l.name)return l.value}},dispatch:function(r,t){return this.each((typeof t=="function"?N9:z9)(r,t))},[Symbol.iterator]:function*(){for(var r=this._groups,t=0,n=r.length;t<n;++t)for(var e,o=r[t],s=0,i=o.length;s<i;++s)(e=o[s])&&(yield e)}};var Si=.7,Ia=1/Si,xs="\\s*([+-]?\\d+)\\s*",Yi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ar="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",R9=/^#([0-9a-f]{3,8})$/,P9=new RegExp(`^rgb\\(${xs},${xs},${xs}\\)$`),U9=new RegExp(`^rgb\\(${Ar},${Ar},${Ar}\\)$`),q9=new RegExp(`^rgba\\(${xs},${xs},${xs},${Yi}\\)$`),j9=new RegExp(`^rgba\\(${Ar},${Ar},${Ar},${Yi}\\)$`),W9=new RegExp(`^hsl\\(${Yi},${Ar},${Ar}\\)$`),H9=new RegExp(`^hsla\\(${Yi},${Ar},${Ar},${Yi}\\)$`),k1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function C1(){return this.rgb().formatHex()}function S1(){return this.rgb().formatRgb()}function Xi(r){var t,n;return r=(r+"").trim().toLowerCase(),(t=R9.exec(r))?(n=t[1].length,t=parseInt(t[1],16),n===6?T1(t):n===3?new zn(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):n===8?Fa(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):n===4?Fa(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=P9.exec(r))?new zn(t[1],t[2],t[3],1):(t=U9.exec(r))?new zn(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=q9.exec(r))?Fa(t[1],t[2],t[3],t[4]):(t=j9.exec(r))?Fa(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=W9.exec(r))?L1(t[1],t[2]/100,t[3]/100,1):(t=H9.exec(r))?L1(t[1],t[2]/100,t[3]/100,t[4]):k1.hasOwnProperty(r)?T1(k1[r]):r==="transparent"?new zn(NaN,NaN,NaN,0):null}function T1(r){return new zn(r>>16&255,r>>8&255,255&r,1)}function Fa(r,t,n,e){return e<=0&&(r=t=n=NaN),new zn(r,t,n,e)}function V9(r){return r instanceof zi||(r=Xi(r)),r?new zn((r=r.rgb()).r,r.g,r.b,r.opacity):new zn}function Th(r,t,n,e){return arguments.length===1?V9(r):new zn(r,t,n,e??1)}function zn(r,t,n,e){this.r=+r,this.g=+t,this.b=+n,this.opacity=+e}function M1(){return`#${Po(this.r)}${Po(this.g)}${Po(this.b)}`}function A1(){const r=ol(this.opacity);return`${r===1?"rgb(":"rgba("}${Wo(this.r)}, ${Wo(this.g)}, ${Wo(this.b)}${r===1?")":`, ${r})`}`}function ol(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function Wo(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function Po(r){return((r=Wo(r))<16?"0":"")+r.toString(16)}function L1(r,t,n,e){return e<=0?r=t=n=NaN:n<=0||n>=1?r=t=NaN:t<=0&&(r=NaN),new fr(r,t,n,e)}function E1(r){if(r instanceof fr)return new fr(r.h,r.s,r.l,r.opacity);if(r instanceof zi||(r=Xi(r)),!r)return new fr;if(r instanceof fr)return r;var t=(r=r.rgb()).r/255,n=r.g/255,e=r.b/255,o=Math.min(t,n,e),s=Math.max(t,n,e),i=NaN,a=s-o,l=(s+o)/2;return a?(i=t===s?(n-e)/a+6*(n<e):n===s?(e-t)/a+2:(t-n)/a+4,a/=l<.5?s+o:2-s-o,i*=60):a=l>0&&l<1?0:i,new fr(i,a,l,r.opacity)}function fr(r,t,n,e){this.h=+r,this.s=+t,this.l=+n,this.opacity=+e}function B1(r){return(r=(r||0)%360)<0?r+360:r}function Da(r){return Math.max(0,Math.min(1,r||0))}function vu(r,t,n){return 255*(r<60?t+(n-t)*r/60:r<180?n:r<240?t+(n-t)*(240-r)/60:t)}wu(zi,Xi,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:C1,formatHex:C1,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return E1(this).formatHsl()},formatRgb:S1,toString:S1}),wu(zn,Th,_1(zi,{brighter(r){return r=r==null?Ia:Math.pow(Ia,r),new zn(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?Si:Math.pow(Si,r),new zn(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new zn(Wo(this.r),Wo(this.g),Wo(this.b),ol(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:M1,formatHex:M1,formatHex8:function(){return`#${Po(this.r)}${Po(this.g)}${Po(this.b)}${Po(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:A1,toString:A1})),wu(fr,function(r,t,n,e){return arguments.length===1?E1(r):new fr(r,t,n,e??1)},_1(zi,{brighter(r){return r=r==null?Ia:Math.pow(Ia,r),new fr(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?Si:Math.pow(Si,r),new fr(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+360*(this.h<0),t=isNaN(r)||isNaN(this.s)?0:this.s,n=this.l,e=n+(n<.5?n:1-n)*t,o=2*n-e;return new zn(vu(r>=240?r-240:r+120,o,e),vu(r,o,e),vu(r<120?r+240:r-120,o,e),this.opacity)},clamp(){return new fr(B1(this.h),Da(this.s),Da(this.l),ol(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=ol(this.opacity);return`${r===1?"hsl(":"hsla("}${B1(this.h)}, ${100*Da(this.s)}%, ${100*Da(this.l)}%${r===1?")":`, ${r})`}`}}));const zd=r=>()=>r;function Vb(r,t){return function(n){return r+n*t}}function _H(r,t){var n=t-r;return n?Vb(r,n>180||n<-180?n-360*Math.round(n/360):n):zd(isNaN(r)?t:r)}function G9(r){return(r=+r)==1?Gb:function(t,n){return n-t?function(e,o,s){return e=Math.pow(e,s),o=Math.pow(o,s)-e,s=1/s,function(i){return Math.pow(e+i*o,s)}}(t,n,r):zd(isNaN(t)?n:t)}}function Gb(r,t){var n=t-r;return n?Vb(r,n):zd(isNaN(r)?t:r)}const I1=function r(t){var n=G9(t);function e(o,s){var i=n((o=Th(o)).r,(s=Th(s)).r),a=n(o.g,s.g),l=n(o.b,s.b),c=Gb(o.opacity,s.opacity);return function(u){return o.r=i(u),o.g=a(u),o.b=l(u),o.opacity=c(u),o+""}}return e.gamma=r,e}(1);function co(r,t){return r=+r,t=+t,function(n){return r*(1-n)+t*n}}var Mh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_u=new RegExp(Mh.source,"g");function Z9(r,t){var n,e,o,s=Mh.lastIndex=_u.lastIndex=0,i=-1,a=[],l=[];for(r+="",t+="";(n=Mh.exec(r))&&(e=_u.exec(t));)(o=e.index)>s&&(o=t.slice(s,o),a[i]?a[i]+=o:a[++i]=o),(n=n[0])===(e=e[0])?a[i]?a[i]+=e:a[++i]=e:(a[++i]=null,l.push({i,x:co(n,e)})),s=_u.lastIndex;return s<t.length&&(o=t.slice(s),a[i]?a[i]+=o:a[++i]=o),a.length<2?l[0]?function(c){return function(u){return c(u)+""}}(l[0].x):function(c){return function(){return c}}(t):(t=l.length,function(c){for(var u,h=0;h<t;++h)a[(u=l[h]).i]=u.x(c);return a.join("")})}var Oa,F1=180/Math.PI,Ah={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Zb(r,t,n,e,o,s){var i,a,l;return(i=Math.sqrt(r*r+t*t))&&(r/=i,t/=i),(l=r*n+t*e)&&(n-=r*l,e-=t*l),(a=Math.sqrt(n*n+e*e))&&(n/=a,e/=a,l/=a),r*e<t*n&&(r=-r,t=-t,l=-l,i=-i),{translateX:o,translateY:s,rotate:Math.atan2(t,r)*F1,skewX:Math.atan(l)*F1,scaleX:i,scaleY:a}}function Yb(r,t,n,e){function o(s){return s.length?s.pop()+" ":""}return function(s,i){var a=[],l=[];return s=r(s),i=r(i),function(c,u,h,d,p,g){if(c!==h||u!==d){var $=p.push("translate(",null,t,null,n);g.push({i:$-4,x:co(c,h)},{i:$-2,x:co(u,d)})}else(h||d)&&p.push("translate("+h+t+d+n)}(s.translateX,s.translateY,i.translateX,i.translateY,a,l),function(c,u,h,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:h.push(o(h)+"rotate(",null,e)-2,x:co(c,u)})):u&&h.push(o(h)+"rotate("+u+e)}(s.rotate,i.rotate,a,l),function(c,u,h,d){c!==u?d.push({i:h.push(o(h)+"skewX(",null,e)-2,x:co(c,u)}):u&&h.push(o(h)+"skewX("+u+e)}(s.skewX,i.skewX,a,l),function(c,u,h,d,p,g){if(c!==h||u!==d){var $=p.push(o(p)+"scale(",null,",",null,")");g.push({i:$-4,x:co(c,h)},{i:$-2,x:co(u,d)})}else h===1&&d===1||p.push(o(p)+"scale("+h+","+d+")")}(s.scaleX,s.scaleY,i.scaleX,i.scaleY,a,l),s=i=null,function(c){for(var u,h=-1,d=l.length;++h<d;)a[(u=l[h]).i]=u.x(c);return a.join("")}}}var sl,Ti,Y9=Yb(function(r){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(r+"");return t.isIdentity?Ah:Zb(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),X9=Yb(function(r){return r==null?Ah:(Oa||(Oa=document.createElementNS("http://www.w3.org/2000/svg","g")),Oa.setAttribute("transform",r),(r=Oa.transform.baseVal.consolidate())?Zb((r=r.matrix).a,r.b,r.c,r.d,r.e,r.f):Ah)},", ",")",")"),$s=0,Mi=0,pi=0,Xb=1e3,Xl=0,Ho=0,Lc=0,Qi=typeof performance=="object"&&performance.now?performance:Date,Qb=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function Nd(){return Ho||(Qb(Q9),Ho=Qi.now()+Lc)}function Q9(){Ho=0}function Ql(){this._call=this._time=this._next=null}function Kb(r,t,n){var e=new Ql;return e.restart(r,t,n),e}function D1(){Ho=(Xl=Qi.now())+Lc,$s=Mi=0;try{(function(){Nd(),++$s;for(var r,t=sl;t;)(r=Ho-t._time)>=0&&t._call.call(void 0,r),t=t._next;--$s})()}finally{$s=0,function(){for(var r,t,n=sl,e=1/0;n;)n._call?(e>n._time&&(e=n._time),r=n,n=n._next):(t=n._next,n._next=null,n=r?r._next=t:sl=t);Ti=r,Lh(e)}(),Ho=0}}function K9(){var r=Qi.now(),t=r-Xl;t>Xb&&(Lc-=t,Xl=r)}function Lh(r){$s||(Mi&&(Mi=clearTimeout(Mi)),r-Ho>24?(r<1/0&&(Mi=setTimeout(D1,r-Qi.now()-Lc)),pi&&(pi=clearInterval(pi))):(pi||(Xl=Qi.now(),pi=setInterval(K9,Xb)),$s=1,Qb(D1)))}function O1(r,t,n){var e=new Ql;return t=t==null?0:+t,e.restart(o=>{e.stop(),r(o+t)},t,n),e}Ql.prototype=Kb.prototype={constructor:Ql,restart:function(r,t,n){if(typeof r!="function")throw new TypeError("callback is not a function");n=(n==null?Nd():+n)+(t==null?0:+t),this._next||Ti===this||(Ti?Ti._next=this:sl=this,Ti=this),this._call=r,this._time=n,Lh()},stop:function(){this._call&&(this._call=null,this._time=1/0,Lh())}};var J9=Ob("start","end","cancel","interrupt"),t7=[],Jb=0,z1=1,Eh=2,il=3,N1=4,Bh=5,al=6;function ll(r,t,n,e,o,s){var i=r.__transition;if(i){if(n in i)return}else r.__transition={};(function(a,l,c){var u,h=a.__transition;function d(b){c.state=z1,c.timer.restart(p,c.delay,c.time),c.delay<=b&&p(b-c.delay)}function p(b){var y,x,M,L;if(c.state!==z1)return $();for(y in h)if((L=h[y]).name===c.name){if(L.state===il)return O1(p);L.state===N1?(L.state=al,L.timer.stop(),L.on.call("interrupt",a,a.__data__,L.index,L.group),delete h[y]):+y<l&&(L.state=al,L.timer.stop(),L.on.call("cancel",a,a.__data__,L.index,L.group),delete h[y])}if(O1(function(){c.state===il&&(c.state=N1,c.timer.restart(g,c.delay,c.time),g(b))}),c.state=Eh,c.on.call("start",a,a.__data__,c.index,c.group),c.state===Eh){for(c.state=il,u=new Array(M=c.tween.length),y=0,x=-1;y<M;++y)(L=c.tween[y].value.call(a,a.__data__,c.index,c.group))&&(u[++x]=L);u.length=x+1}}function g(b){for(var y=b<c.duration?c.ease.call(null,b/c.duration):(c.timer.restart($),c.state=Bh,1),x=-1,M=u.length;++x<M;)u[x].call(a,y);c.state===Bh&&(c.on.call("end",a,a.__data__,c.index,c.group),$())}function $(){for(var b in c.state=al,c.timer.stop(),delete h[l],h)return;delete a.__transition}h[l]=c,c.timer=Kb(d,0,c.time)})(r,n,{name:t,index:e,group:o,on:J9,tween:t7,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Jb})}function Rd(r,t){var n=sr(r,t);if(n.state>Jb)throw new Error("too late; already scheduled");return n}function _r(r,t){var n=sr(r,t);if(n.state>il)throw new Error("too late; already running");return n}function sr(r,t){var n=r.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function e7(r,t){var n,e;return function(){var o=_r(this,r),s=o.tween;if(s!==n){for(var i=0,a=(e=n=s).length;i<a;++i)if(e[i].name===t){(e=e.slice()).splice(i,1);break}}o.tween=e}}function n7(r,t,n){var e,o;if(typeof n!="function")throw new Error;return function(){var s=_r(this,r),i=s.tween;if(i!==e){o=(e=i).slice();for(var a={name:t,value:n},l=0,c=o.length;l<c;++l)if(o[l].name===t){o[l]=a;break}l===c&&o.push(a)}s.tween=o}}function ku(r,t,n){var e=r._id;return r.each(function(){var o=_r(this,e);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return sr(o,e).value[t]}}function R1(r,t){var n;return(typeof t=="number"?co:t instanceof Xi?I1:(n=Xi(t))?(t=n,I1):Z9)(r,t)}function r7(r){return function(){this.removeAttribute(r)}}function o7(r){return function(){this.removeAttributeNS(r.space,r.local)}}function s7(r,t,n){var e,o,s=n+"";return function(){var i=this.getAttribute(r);return i===s?null:i===e?o:o=t(e=i,n)}}function i7(r,t,n){var e,o,s=n+"";return function(){var i=this.getAttributeNS(r.space,r.local);return i===s?null:i===e?o:o=t(e=i,n)}}function a7(r,t,n){var e,o,s;return function(){var i,a,l=n(this);if(l!=null)return(i=this.getAttribute(r))===(a=l+"")?null:i===e&&a===o?s:(o=a,s=t(e=i,l));this.removeAttribute(r)}}function l7(r,t,n){var e,o,s;return function(){var i,a,l=n(this);if(l!=null)return(i=this.getAttributeNS(r.space,r.local))===(a=l+"")?null:i===e&&a===o?s:(o=a,s=t(e=i,l));this.removeAttributeNS(r.space,r.local)}}function c7(r,t){var n,e;function o(){var s=t.apply(this,arguments);return s!==e&&(n=(e=s)&&function(i,a){return function(l){this.setAttributeNS(i.space,i.local,a.call(this,l))}}(r,s)),n}return o._value=t,o}function u7(r,t){var n,e;function o(){var s=t.apply(this,arguments);return s!==e&&(n=(e=s)&&function(i,a){return function(l){this.setAttribute(i,a.call(this,l))}}(r,s)),n}return o._value=t,o}function h7(r,t){return function(){Rd(this,r).delay=+t.apply(this,arguments)}}function d7(r,t){return t=+t,function(){Rd(this,r).delay=t}}function p7(r,t){return function(){_r(this,r).duration=+t.apply(this,arguments)}}function f7(r,t){return t=+t,function(){_r(this,r).duration=t}}var g7=Zi.prototype.constructor;function P1(r){return function(){this.style.removeProperty(r)}}var m7=0;function jr(r,t,n,e){this._groups=r,this._parents=t,this._name=n,this._id=e}function tw(){return++m7}var Pr=Zi.prototype;jr.prototype={constructor:jr,select:function(r){var t=this._name,n=this._id;typeof r!="function"&&(r=Sh(r));for(var e=this._groups,o=e.length,s=new Array(o),i=0;i<o;++i)for(var a,l,c=e[i],u=c.length,h=s[i]=new Array(u),d=0;d<u;++d)(a=c[d])&&(l=r.call(a,a.__data__,d,c))&&("__data__"in a&&(l.__data__=a.__data__),h[d]=l,ll(h[d],t,n,d,h,sr(a,n)));return new jr(s,this._parents,t,n)},selectAll:function(r){var t=this._name,n=this._id;typeof r!="function"&&(r=zb(r));for(var e=this._groups,o=e.length,s=[],i=[],a=0;a<o;++a)for(var l,c=e[a],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var d,p=r.call(l,l.__data__,h,c),g=sr(l,n),$=0,b=p.length;$<b;++$)(d=p[$])&&ll(d,t,n,$,p,g);s.push(p),i.push(l)}return new jr(s,i,t,n)},selectChild:Pr.selectChild,selectChildren:Pr.selectChildren,filter:function(r){typeof r!="function"&&(r=Nb(r));for(var t=this._groups,n=t.length,e=new Array(n),o=0;o<n;++o)for(var s,i=t[o],a=i.length,l=e[o]=[],c=0;c<a;++c)(s=i[c])&&r.call(s,s.__data__,c,i)&&l.push(s);return new jr(e,this._parents,this._name,this._id)},merge:function(r){if(r._id!==this._id)throw new Error;for(var t=this._groups,n=r._groups,e=t.length,o=n.length,s=Math.min(e,o),i=new Array(e),a=0;a<s;++a)for(var l,c=t[a],u=n[a],h=c.length,d=i[a]=new Array(h),p=0;p<h;++p)(l=c[p]||u[p])&&(d[p]=l);for(;a<e;++a)i[a]=t[a];return new jr(i,this._parents,this._name,this._id)},selection:function(){return new g7(this._groups,this._parents)},transition:function(){for(var r=this._name,t=this._id,n=tw(),e=this._groups,o=e.length,s=0;s<o;++s)for(var i,a=e[s],l=a.length,c=0;c<l;++c)if(i=a[c]){var u=sr(i,t);ll(i,r,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new jr(e,this._parents,r,n)},call:Pr.call,nodes:Pr.nodes,node:Pr.node,size:Pr.size,empty:Pr.empty,each:Pr.each,on:function(r,t){var n=this._id;return arguments.length<2?sr(this.node(),n).on.on(r):this.each(function(e,o,s){var i,a,l=function(c){return(c+"").trim().split(/^|\s+/).every(function(u){var h=u.indexOf(".");return h>=0&&(u=u.slice(0,h)),!u||u==="start"})}(o)?Rd:_r;return function(){var c=l(this,e),u=c.on;u!==i&&(a=(i=u).copy()).on(o,s),c.on=a}}(n,r,t))},attr:function(r,t){var n=Zl(r),e=n==="transform"?X9:R1;return this.attrTween(r,typeof t=="function"?(n.local?l7:a7)(n,e,ku(this,"attr."+r,t)):t==null?(n.local?o7:r7)(n):(n.local?i7:s7)(n,e,t))},attrTween:function(r,t){var n="attr."+r;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var e=Zl(r);return this.tween(n,(e.local?c7:u7)(e,t))},style:function(r,t,n){var e=(r+="")=="transform"?Y9:R1;return t==null?this.styleTween(r,function(o,s){var i,a,l;return function(){var c=fs(this,o),u=(this.style.removeProperty(o),fs(this,o));return c===u?null:c===i&&u===a?l:l=s(i=c,a=u)}}(r,e)).on("end.style."+r,P1(r)):typeof t=="function"?this.styleTween(r,function(o,s,i){var a,l,c;return function(){var u=fs(this,o),h=i(this),d=h+"";return h==null&&(this.style.removeProperty(o),d=h=fs(this,o)),u===d?null:u===a&&d===l?c:(l=d,c=s(a=u,h))}}(r,e,ku(this,"style."+r,t))).each(function(o,s){var i,a,l,c,u="style."+s,h="end."+u;return function(){var d=_r(this,o),p=d.on,g=d.value[u]==null?c||(c=P1(s)):void 0;p===i&&l===g||(a=(i=p).copy()).on(h,l=g),d.on=a}}(this._id,r)):this.styleTween(r,function(o,s,i){var a,l,c=i+"";return function(){var u=fs(this,o);return u===c?null:u===a?l:l=s(a=u,i)}}(r,e,t),n).on("end.style."+r,null)},styleTween:function(r,t,n){var e="style."+(r+="");if(arguments.length<2)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,function(o,s,i){var a,l;function c(){var u=s.apply(this,arguments);return u!==l&&(a=(l=u)&&function(h,d,p){return function(g){this.style.setProperty(h,d.call(this,g),p)}}(o,u,i)),a}return c._value=s,c}(r,t,n??""))},text:function(r){return this.tween("text",typeof r=="function"?function(t){return function(){var n=t(this);this.textContent=n??""}}(ku(this,"text",r)):function(t){return function(){this.textContent=t}}(r==null?"":r+""))},textTween:function(r){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(r==null)return this.tween(t,null);if(typeof r!="function")throw new Error;return this.tween(t,function(n){var e,o;function s(){var i=n.apply(this,arguments);return i!==o&&(e=(o=i)&&function(a){return function(l){this.textContent=a.call(this,l)}}(i)),e}return s._value=n,s}(r))},remove:function(){return this.on("end.remove",function(r){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==r)return;t&&t.removeChild(this)}}(this._id))},tween:function(r,t){var n=this._id;if(r+="",arguments.length<2){for(var e,o=sr(this.node(),n).tween,s=0,i=o.length;s<i;++s)if((e=o[s]).name===r)return e.value;return null}return this.each((t==null?e7:n7)(n,r,t))},delay:function(r){var t=this._id;return arguments.length?this.each((typeof r=="function"?h7:d7)(t,r)):sr(this.node(),t).delay},duration:function(r){var t=this._id;return arguments.length?this.each((typeof r=="function"?p7:f7)(t,r)):sr(this.node(),t).duration},ease:function(r){var t=this._id;return arguments.length?this.each(function(n,e){if(typeof e!="function")throw new Error;return function(){_r(this,n).ease=e}}(t,r)):sr(this.node(),t).ease},easeVarying:function(r){if(typeof r!="function")throw new Error;return this.each(function(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;_r(this,t).ease=e}}(this._id,r))},end:function(){var r,t,n=this,e=n._id,o=n.size();return new Promise(function(s,i){var a={value:i},l={value:function(){--o==0&&s()}};n.each(function(){var c=_r(this,e),u=c.on;u!==r&&((t=(r=u).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),o===0&&s()})},[Symbol.iterator]:Pr[Symbol.iterator]};var $7={time:null,delay:0,duration:250,ease:function(r){return((r*=2)<=1?r*r*r:(r-=2)*r*r+2)/2}};function y7(r,t){for(var n;!(n=r.__transition)||!(n=n[t]);)if(!(r=r.parentNode))throw new Error(`transition ${t} not found`);return n}Zi.prototype.interrupt=function(r){return this.each(function(){(function(t,n){var e,o,s,i=t.__transition,a=!0;if(i){for(s in n=n==null?null:n+"",i)(e=i[s]).name===n?(o=e.state>Eh&&e.state<Bh,e.state=al,e.timer.stop(),e.on.call(o?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete i[s]):a=!1;a&&delete t.__transition}})(this,r)})},Zi.prototype.transition=function(r){var t,n;r instanceof jr?(t=r._id,r=r._name):(t=tw(),(n=$7).time=Nd(),r=r==null?null:r+"");for(var e=this._groups,o=e.length,s=0;s<o;++s)for(var i,a=e[s],l=a.length,c=0;c<l;++c)(i=a[c])&&ll(i,r,t,c,a,n||y7(i,t));return new jr(e,this._parents,r,t)};const Ih=Math.PI,Fh=2*Ih,Eo=1e-6,x7=Fh-Eo;function U1(r){this._+=r[0];for(let t=1,n=r.length;t<n;++t)this._+=arguments[t]+r[t]}class b7{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?U1:function(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return U1;const o=10**e;return function(s){this._+=s[0];for(let i=1,a=s.length;i<a;++i)this._+=Math.round(arguments[i]*o)/o+s[i]}}(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,e,o){this._append`Q${+t},${+n},${this._x1=+e},${this._y1=+o}`}bezierCurveTo(t,n,e,o,s,i){this._append`C${+t},${+n},${+e},${+o},${this._x1=+s},${this._y1=+i}`}arcTo(t,n,e,o,s){if(t=+t,n=+n,e=+e,o=+o,(s=+s)<0)throw new Error(`negative radius: ${s}`);let i=this._x1,a=this._y1,l=e-t,c=o-n,u=i-t,h=a-n,d=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Eo)if(Math.abs(h*l-c*u)>Eo&&s){let p=e-i,g=o-a,$=l*l+c*c,b=p*p+g*g,y=Math.sqrt($),x=Math.sqrt(d),M=s*Math.tan((Ih-Math.acos(($+d-b)/(2*y*x)))/2),L=M/x,A=M/y;Math.abs(L-1)>Eo&&this._append`L${t+L*u},${n+L*h}`,this._append`A${s},${s},0,0,${+(h*p>u*g)},${this._x1=t+A*l},${this._y1=n+A*c}`}else this._append`L${this._x1=t},${this._y1=n}`}arc(t,n,e,o,s,i){if(t=+t,n=+n,i=!!i,(e=+e)<0)throw new Error(`negative radius: ${e}`);let a=e*Math.cos(o),l=e*Math.sin(o),c=t+a,u=n+l,h=1^i,d=i?o-s:s-o;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Eo||Math.abs(this._y1-u)>Eo)&&this._append`L${c},${u}`,e&&(d<0&&(d=d%Fh+Fh),d>x7?this._append`A${e},${e},0,1,${h},${t-a},${n-l}A${e},${e},0,1,${h},${this._x1=c},${this._y1=u}`:d>Eo&&this._append`A${e},${e},0,${+(d>=Ih)},${h},${this._x1=t+e*Math.cos(s)},${this._y1=n+e*Math.sin(s)}`)}rect(t,n,e,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${e=+e}v${+o}h${-e}Z`}toString(){return this._}}function us(r){return function(){return r}}const kH=Math.abs,CH=Math.atan2,SH=Math.cos,TH=Math.max,MH=Math.min,AH=Math.sin,LH=Math.sqrt,q1=1e-12,Pd=Math.PI,j1=Pd/2,EH=2*Pd;function BH(r){return r>1?0:r<-1?Pd:Math.acos(r)}function IH(r){return r>=1?j1:r<=-1?-j1:Math.asin(r)}function w7(r){let t=3;return r.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);t=e}return r},()=>new b7(t)}function v7(r){return typeof r=="object"&&"length"in r?r:Array.from(r)}function ew(r){this._context=r}function nw(r){return new ew(r)}function _7(r){return r[0]}function k7(r){return r[1]}function C7(r,t){var n=us(!0),e=null,o=nw,s=null,i=w7(a);function a(l){var c,u,h,d=(l=v7(l)).length,p=!1;for(e==null&&(s=o(h=i())),c=0;c<=d;++c)!(c<d&&n(u=l[c],c,l))===p&&((p=!p)?s.lineStart():s.lineEnd()),p&&s.point(+r(u,c,l),+t(u,c,l));if(h)return s=null,h+""||null}return r=typeof r=="function"?r:r===void 0?_7:us(r),t=typeof t=="function"?t:t===void 0?k7:us(t),a.x=function(l){return arguments.length?(r=typeof l=="function"?l:us(+l),a):r},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:us(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:us(!!l),a):n},a.curve=function(l){return arguments.length?(o=l,e!=null&&(s=o(e)),a):o},a.context=function(l){return arguments.length?(l==null?e=s=null:s=o(e=l),a):e},a}ew.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,t){switch(r=+r,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,t):this._context.moveTo(r,t);break;case 1:this._point=2;default:this._context.lineTo(r,t)}}};class W1{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n)}this._x0=t,this._y0=n}}function wo(){}function za(r,t,n){r._context.bezierCurveTo((2*r._x0+r._x1)/3,(2*r._y0+r._y1)/3,(r._x0+2*r._x1)/3,(r._y0+2*r._y1)/3,(r._x0+4*r._x1+t)/6,(r._y0+4*r._y1+n)/6)}function Ec(r){this._context=r}function rw(r){return new Ec(r)}function ow(r){this._context=r}function sw(r){this._context=r}function iw(r,t){this._basis=new Ec(r),this._beta=t}Ec.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:za(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,t){switch(r=+r,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,t):this._context.moveTo(r,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:za(this,r,t)}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=t}},ow.prototype={areaStart:wo,areaEnd:wo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(r,t){switch(r=+r,t=+t,this._point){case 0:this._point=1,this._x2=r,this._y2=t;break;case 1:this._point=2,this._x3=r,this._y3=t;break;case 2:this._point=3,this._x4=r,this._y4=t,this._context.moveTo((this._x0+4*this._x1+r)/6,(this._y0+4*this._y1+t)/6);break;default:za(this,r,t)}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=t}},sw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(r,t){switch(r=+r,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+r)/6,e=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 3:this._point=4;default:za(this,r,t)}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=t}},iw.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var r=this._x,t=this._y,n=r.length-1;if(n>0)for(var e,o=r[0],s=t[0],i=r[n]-o,a=t[n]-s,l=-1;++l<=n;)e=l/n,this._basis.point(this._beta*r[l]+(1-this._beta)*(o+e*i),this._beta*t[l]+(1-this._beta)*(s+e*a));this._x=this._y=null,this._basis.lineEnd()},point:function(r,t){this._x.push(+r),this._y.push(+t)}};const S7=function r(t){function n(e){return t===1?new Ec(e):new iw(e,t)}return n.beta=function(e){return r(+e)},n}(.85);function Kl(r,t,n){r._context.bezierCurveTo(r._x1+r._k*(r._x2-r._x0),r._y1+r._k*(r._y2-r._y0),r._x2+r._k*(r._x1-t),r._y2+r._k*(r._y1-n),r._x2,r._y2)}function Ud(r,t){this._context=r,this._k=(1-t)/6}Ud.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Kl(this,this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,t){switch(r=+r,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,t):this._context.moveTo(r,t);break;case 1:this._point=2,this._x1=r,this._y1=t;break;case 2:this._point=3;default:Kl(this,r,t)}this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const T7=function r(t){function n(e){return new Ud(e,t)}return n.tension=function(e){return r(+e)},n}(0);function qd(r,t){this._context=r,this._k=(1-t)/6}qd.prototype={areaStart:wo,areaEnd:wo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(r,t){switch(r=+r,t=+t,this._point){case 0:this._point=1,this._x3=r,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=r,this._y4=t);break;case 2:this._point=3,this._x5=r,this._y5=t;break;default:Kl(this,r,t)}this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const M7=function r(t){function n(e){return new qd(e,t)}return n.tension=function(e){return r(+e)},n}(0);function jd(r,t){this._context=r,this._k=(1-t)/6}jd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(r,t){switch(r=+r,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Kl(this,r,t)}this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const A7=function r(t){function n(e){return new jd(e,t)}return n.tension=function(e){return r(+e)},n}(0);function Wd(r,t,n){var e=r._x1,o=r._y1,s=r._x2,i=r._y2;if(r._l01_a>q1){var a=2*r._l01_2a+3*r._l01_a*r._l12_a+r._l12_2a,l=3*r._l01_a*(r._l01_a+r._l12_a);e=(e*a-r._x0*r._l12_2a+r._x2*r._l01_2a)/l,o=(o*a-r._y0*r._l12_2a+r._y2*r._l01_2a)/l}if(r._l23_a>q1){var c=2*r._l23_2a+3*r._l23_a*r._l12_a+r._l12_2a,u=3*r._l23_a*(r._l23_a+r._l12_a);s=(s*c+r._x1*r._l23_2a-t*r._l12_2a)/u,i=(i*c+r._y1*r._l23_2a-n*r._l12_2a)/u}r._context.bezierCurveTo(e,o,s,i,r._x2,r._y2)}function aw(r,t){this._context=r,this._alpha=t}aw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,t){if(r=+r,t=+t,this._point){var n=this._x2-r,e=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+e*e,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(r,t):this._context.moveTo(r,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Wd(this,r,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const L7=function r(t){function n(e){return t?new aw(e,t):new Ud(e,0)}return n.alpha=function(e){return r(+e)},n}(.5);function lw(r,t){this._context=r,this._alpha=t}lw.prototype={areaStart:wo,areaEnd:wo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(r,t){if(r=+r,t=+t,this._point){var n=this._x2-r,e=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+e*e,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=r,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=r,this._y4=t);break;case 2:this._point=3,this._x5=r,this._y5=t;break;default:Wd(this,r,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const E7=function r(t){function n(e){return t?new lw(e,t):new qd(e,0)}return n.alpha=function(e){return r(+e)},n}(.5);function cw(r,t){this._context=r,this._alpha=t}cw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(r,t){if(r=+r,t=+t,this._point){var n=this._x2-r,e=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+e*e,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Wd(this,r,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const B7=function r(t){function n(e){return t?new cw(e,t):new jd(e,0)}return n.alpha=function(e){return r(+e)},n}(.5);function uw(r){this._context=r}function H1(r){return r<0?-1:1}function V1(r,t,n){var e=r._x1-r._x0,o=t-r._x1,s=(r._y1-r._y0)/(e||o<0&&-0),i=(n-r._y1)/(o||e<0&&-0),a=(s*o+i*e)/(e+o);return(H1(s)+H1(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(a))||0}function G1(r,t){var n=r._x1-r._x0;return n?(3*(r._y1-r._y0)/n-t)/2:t}function Cu(r,t,n){var e=r._x0,o=r._y0,s=r._x1,i=r._y1,a=(s-e)/3;r._context.bezierCurveTo(e+a,o+a*t,s-a,i-a*n,s,i)}function cl(r){this._context=r}function hw(r){this._context=new dw(r)}function dw(r){this._context=r}function pw(r){this._context=r}function Z1(r){var t,n,e=r.length-1,o=new Array(e),s=new Array(e),i=new Array(e);for(o[0]=0,s[0]=2,i[0]=r[0]+2*r[1],t=1;t<e-1;++t)o[t]=1,s[t]=4,i[t]=4*r[t]+2*r[t+1];for(o[e-1]=2,s[e-1]=7,i[e-1]=8*r[e-1]+r[e],t=1;t<e;++t)n=o[t]/s[t-1],s[t]-=n,i[t]-=n*i[t-1];for(o[e-1]=i[e-1]/s[e-1],t=e-2;t>=0;--t)o[t]=(i[t]-o[t+1])/s[t];for(s[e-1]=(r[e]+o[e-1])/2,t=0;t<e-1;++t)s[t]=2*r[t+1]-o[t+1];return[o,s]}function ul(r,t){this._context=r,this._t=t}function fi(r,t,n){this.k=r,this.x=t,this.y=n}uw.prototype={areaStart:wo,areaEnd:wo,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(r,t){r=+r,t=+t,this._point?this._context.lineTo(r,t):(this._point=1,this._context.moveTo(r,t))}},cl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Cu(this,this._t0,G1(this,this._t0))}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,t){var n=NaN;if(t=+t,(r=+r)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(r,t):this._context.moveTo(r,t);break;case 1:this._point=2;break;case 2:this._point=3,Cu(this,G1(this,n=V1(this,r,t)),n);break;default:Cu(this,this._t0,n=V1(this,r,t))}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=t,this._t0=n}}},(hw.prototype=Object.create(cl.prototype)).point=function(r,t){cl.prototype.point.call(this,t,r)},dw.prototype={moveTo:function(r,t){this._context.moveTo(t,r)},closePath:function(){this._context.closePath()},lineTo:function(r,t){this._context.lineTo(t,r)},bezierCurveTo:function(r,t,n,e,o,s){this._context.bezierCurveTo(t,r,e,n,s,o)}},pw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var r=this._x,t=this._y,n=r.length;if(n)if(this._line?this._context.lineTo(r[0],t[0]):this._context.moveTo(r[0],t[0]),n===2)this._context.lineTo(r[1],t[1]);else for(var e=Z1(r),o=Z1(t),s=0,i=1;i<n;++s,++i)this._context.bezierCurveTo(e[0][s],o[0][s],e[1][s],o[1][s],r[i],t[i]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(r,t){this._x.push(+r),this._y.push(+t)}},ul.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(r,t){switch(r=+r,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,t):this._context.moveTo(r,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(r,t);else{var n=this._x*(1-this._t)+r*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=r,this._y=t}},fi.prototype={constructor:fi,scale:function(r){return r===1?this:new fi(this.k*r,this.x,this.y)},translate:function(r,t){return r===0&t===0?this:new fi(this.k,this.x+this.k*r,this.y+this.k*t)},apply:function(r){return[r[0]*this.k+this.x,r[1]*this.k+this.y]},applyX:function(r){return r*this.k+this.x},applyY:function(r){return r*this.k+this.y},invert:function(r){return[(r[0]-this.x)/this.k,(r[1]-this.y)/this.k]},invertX:function(r){return(r-this.x)/this.k},invertY:function(r){return(r-this.y)/this.k},rescaleX:function(r){return r.copy().domain(r.range().map(this.invertX,this).map(r.invert,r))},rescaleY:function(r){return r.copy().domain(r.range().map(this.invertY,this).map(r.invert,r))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},fi.prototype;var fw=typeof global=="object"&&global&&global.Object===Object&&global,I7=typeof self=="object"&&self&&self.Object===Object&&self,Ir=fw||I7||Function("return this")(),Jl=Ir.Symbol,gw=Object.prototype,F7=gw.hasOwnProperty,D7=gw.toString,gi=Jl?Jl.toStringTag:void 0,O7=Object.prototype.toString,z7="[object Null]",N7="[object Undefined]",Y1=Jl?Jl.toStringTag:void 0;function Ks(r){return r==null?r===void 0?N7:z7:Y1&&Y1 in Object(r)?function(t){var n=F7.call(t,gi),e=t[gi];try{t[gi]=void 0;var o=!0}catch{}var s=D7.call(t);return o&&(n?t[gi]=e:delete t[gi]),s}(r):function(t){return O7.call(t)}(r)}function Jo(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}var R7="[object AsyncFunction]",P7="[object Function]",U7="[object GeneratorFunction]",q7="[object Proxy]";function Hd(r){if(!Jo(r))return!1;var t=Ks(r);return t==P7||t==U7||t==R7||t==q7}var X1,Su=Ir["__core-js_shared__"],Q1=(X1=/[^.]+$/.exec(Su&&Su.keys&&Su.keys.IE_PROTO||""))?"Symbol(src)_1."+X1:"",j7=Function.prototype.toString;function ts(r){if(r!=null){try{return j7.call(r)}catch{}try{return r+""}catch{}}return""}var W7=/^\[object .+?Constructor\]$/,H7=Function.prototype,V7=Object.prototype,G7=H7.toString,Z7=V7.hasOwnProperty,Y7=RegExp("^"+G7.call(Z7).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function X7(r){return!(!Jo(r)||function(t){return!!Q1&&Q1 in t}(r))&&(Hd(r)?Y7:W7).test(ts(r))}function es(r,t){var n=function(e,o){return e==null?void 0:e[o]}(r,t);return X7(n)?n:void 0}var mi=es(Object,"create"),Q7=Object.prototype.hasOwnProperty,K7=Object.prototype.hasOwnProperty;function Oo(r){var t=-1,n=r==null?0:r.length;for(this.clear();++t<n;){var e=r[t];this.set(e[0],e[1])}}function Bc(r,t){return r===t||r!=r&&t!=t}function Na(r,t){for(var n=r.length;n--;)if(Bc(r[n][0],t))return n;return-1}Oo.prototype.clear=function(){this.__data__=mi?mi(null):{},this.size=0},Oo.prototype.delete=function(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t},Oo.prototype.get=function(r){var t=this.__data__;if(mi){var n=t[r];return n==="__lodash_hash_undefined__"?void 0:n}return Q7.call(t,r)?t[r]:void 0},Oo.prototype.has=function(r){var t=this.__data__;return mi?t[r]!==void 0:K7.call(t,r)},Oo.prototype.set=function(r,t){var n=this.__data__;return this.size+=this.has(r)?0:1,n[r]=mi&&t===void 0?"__lodash_hash_undefined__":t,this};var J7=Array.prototype.splice;function Vr(r){var t=-1,n=r==null?0:r.length;for(this.clear();++t<n;){var e=r[t];this.set(e[0],e[1])}}Vr.prototype.clear=function(){this.__data__=[],this.size=0},Vr.prototype.delete=function(r){var t=this.__data__,n=Na(t,r);return!(n<0)&&(n==t.length-1?t.pop():J7.call(t,n,1),--this.size,!0)},Vr.prototype.get=function(r){var t=this.__data__,n=Na(t,r);return n<0?void 0:t[n][1]},Vr.prototype.has=function(r){return Na(this.__data__,r)>-1},Vr.prototype.set=function(r,t){var n=this.__data__,e=Na(n,r);return e<0?(++this.size,n.push([r,t])):n[e][1]=t,this};var Ki=es(Ir,"Map");function Ra(r,t){var n=r.__data__;return function(e){var o=typeof e;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?e!=="__proto__":e===null}(t)?n[typeof t=="string"?"string":"hash"]:n.map}function ho(r){var t=-1,n=r==null?0:r.length;for(this.clear();++t<n;){var e=r[t];this.set(e[0],e[1])}}ho.prototype.clear=function(){this.size=0,this.__data__={hash:new Oo,map:new(Ki||Vr),string:new Oo}},ho.prototype.delete=function(r){var t=Ra(this,r).delete(r);return this.size-=t?1:0,t},ho.prototype.get=function(r){return Ra(this,r).get(r)},ho.prototype.has=function(r){return Ra(this,r).has(r)},ho.prototype.set=function(r,t){var n=Ra(this,r),e=n.size;return n.set(r,t),this.size+=n.size==e?0:1,this};function pa(r,t){if(typeof r!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var e=arguments,o=t?t.apply(this,e):e[0],s=n.cache;if(s.has(o))return s.get(o);var i=r.apply(this,e);return n.cache=s.set(o,i)||s,i};return n.cache=new(pa.Cache||ho),n}pa.Cache=ho;function gs(r){var t=this.__data__=new Vr(r);this.size=t.size}gs.prototype.clear=function(){this.__data__=new Vr,this.size=0},gs.prototype.delete=function(r){var t=this.__data__,n=t.delete(r);return this.size=t.size,n},gs.prototype.get=function(r){return this.__data__.get(r)},gs.prototype.has=function(r){return this.__data__.has(r)},gs.prototype.set=function(r,t){var n=this.__data__;if(n instanceof Vr){var e=n.__data__;if(!Ki||e.length<199)return e.push([r,t]),this.size=++n.size,this;n=this.__data__=new ho(e)}return n.set(r,t),this.size=n.size,this};var tc=function(){try{var r=es(Object,"defineProperty");return r({},"",{}),r}catch{}}();function Vd(r,t,n){t=="__proto__"&&tc?tc(r,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):r[t]=n}function Dh(r,t,n){(n!==void 0&&!Bc(r[t],n)||n===void 0&&!(t in r))&&Vd(r,t,n)}var tM=function(r,t,n){for(var e=-1,o=Object(r),s=n(r),i=s.length;i--;){var a=s[++e];if(t(o[a],a,o)===!1)break}return r},mw=typeof exports=="object"&&exports&&!exports.nodeType&&exports,K1=mw&&typeof module=="object"&&module&&!module.nodeType&&module,J1=K1&&K1.exports===mw?Ir.Buffer:void 0,t0=J1?J1.allocUnsafe:void 0;function eM(r,t){if(t)return r.slice();var n=r.length,e=t0?t0(n):new r.constructor(n);return r.copy(e),e}var e0=Ir.Uint8Array;function nM(r){var t=new r.constructor(r.byteLength);return new e0(t).set(new e0(r)),t}function rM(r,t){var n=t?nM(r.buffer):r.buffer;return new r.constructor(n,r.byteOffset,r.length)}function oM(r,t){var n=-1,e=r.length;for(t||(t=Array(e));++n<e;)t[n]=r[n];return t}var n0=Object.create,sM=function(){function r(){}return function(t){if(!Jo(t))return{};if(n0)return n0(t);r.prototype=t;var n=new r;return r.prototype=void 0,n}}();function $w(r,t){return function(n){return r(t(n))}}var yw=$w(Object.getPrototypeOf,Object),iM=Object.prototype;function Ic(r){var t=r&&r.constructor;return r===(typeof t=="function"&&t.prototype||iM)}function aM(r){return typeof r.constructor!="function"||Ic(r)?{}:sM(yw(r))}function fa(r){return r!=null&&typeof r=="object"}function r0(r){return fa(r)&&Ks(r)=="[object Arguments]"}var xw=Object.prototype,lM=xw.hasOwnProperty,cM=xw.propertyIsEnumerable,ec=r0(function(){return arguments}())?r0:function(r){return fa(r)&&lM.call(r,"callee")&&!cM.call(r,"callee")},nc=Array.isArray,uM=9007199254740991;function bw(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=uM}function Fc(r){return r!=null&&bw(r.length)&&!Hd(r)}function hM(r){return fa(r)&&Fc(r)}var ww=typeof exports=="object"&&exports&&!exports.nodeType&&exports,o0=ww&&typeof module=="object"&&module&&!module.nodeType&&module,s0=o0&&o0.exports===ww?Ir.Buffer:void 0,Gd=(s0?s0.isBuffer:void 0)||function(){return!1},dM="[object Object]",pM=Function.prototype,fM=Object.prototype,vw=pM.toString,gM=fM.hasOwnProperty,mM=vw.call(Object),Ce={};function $M(r){return function(t){return r(t)}}Ce["[object Float32Array]"]=Ce["[object Float64Array]"]=Ce["[object Int8Array]"]=Ce["[object Int16Array]"]=Ce["[object Int32Array]"]=Ce["[object Uint8Array]"]=Ce["[object Uint8ClampedArray]"]=Ce["[object Uint16Array]"]=Ce["[object Uint32Array]"]=!0,Ce["[object Arguments]"]=Ce["[object Array]"]=Ce["[object ArrayBuffer]"]=Ce["[object Boolean]"]=Ce["[object DataView]"]=Ce["[object Date]"]=Ce["[object Error]"]=Ce["[object Function]"]=Ce["[object Map]"]=Ce["[object Number]"]=Ce["[object Object]"]=Ce["[object RegExp]"]=Ce["[object Set]"]=Ce["[object String]"]=Ce["[object WeakMap]"]=!1;var _w=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ni=_w&&typeof module=="object"&&module&&!module.nodeType&&module,Tu=Ni&&Ni.exports===_w&&fw.process,i0=function(){try{var r=Ni&&Ni.require&&Ni.require("util").types;return r||Tu&&Tu.binding&&Tu.binding("util")}catch{}}(),a0=i0&&i0.isTypedArray,Zd=a0?$M(a0):function(r){return fa(r)&&bw(r.length)&&!!Ce[Ks(r)]};function Oh(r,t){if((t!=="constructor"||typeof r[t]!="function")&&t!="__proto__")return r[t]}var yM=Object.prototype.hasOwnProperty;function xM(r,t,n){var e=r[t];yM.call(r,t)&&Bc(e,n)&&(n!==void 0||t in r)||Vd(r,t,n)}function bM(r,t,n,e){var o=!n;n||(n={});for(var s=-1,i=t.length;++s<i;){var a=t[s],l=void 0;l===void 0&&(l=r[a]),o?Vd(n,a,l):xM(n,a,l)}return n}var wM=9007199254740991,vM=/^(?:0|[1-9]\d*)$/;function kw(r,t){var n=typeof r;return!!(t=t??wM)&&(n=="number"||n!="symbol"&&vM.test(r))&&r>-1&&r%1==0&&r<t}var _M=Object.prototype.hasOwnProperty;function kM(r,t){var n=nc(r),e=!n&&ec(r),o=!n&&!e&&Gd(r),s=!n&&!e&&!o&&Zd(r),i=n||e||o||s,a=i?function(u,h){for(var d=-1,p=Array(u);++d<u;)p[d]=h(d);return p}(r.length,String):[],l=a.length;for(var c in r)!t&&!_M.call(r,c)||i&&(c=="length"||o&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||kw(c,l))||a.push(c);return a}var CM=Object.prototype.hasOwnProperty;function SM(r){if(!Jo(r))return function(o){var s=[];if(o!=null)for(var i in Object(o))s.push(i);return s}(r);var t=Ic(r),n=[];for(var e in r)(e!="constructor"||!t&&CM.call(r,e))&&n.push(e);return n}function Cw(r){return Fc(r)?kM(r,!0):SM(r)}function TM(r,t,n,e,o,s,i){var a=Oh(r,n),l=Oh(t,n),c=i.get(l);if(c)Dh(r,n,c);else{var u,h=s?s(a,l,n+"",r,t,i):void 0,d=h===void 0;if(d){var p=nc(l),g=!p&&Gd(l),$=!p&&!g&&Zd(l);h=l,p||g||$?nc(a)?h=a:hM(a)?h=oM(a):g?(d=!1,h=eM(l,!0)):$?(d=!1,h=rM(l,!0)):h=[]:function(b){if(!fa(b)||Ks(b)!=dM)return!1;var y=yw(b);if(y===null)return!0;var x=gM.call(y,"constructor")&&y.constructor;return typeof x=="function"&&x instanceof x&&vw.call(x)==mM}(l)||ec(l)?(h=a,ec(a)?h=bM(u=a,Cw(u)):Jo(a)&&!Hd(a)||(h=aM(l))):d=!1}d&&(i.set(l,h),o(h,l,e,s,i),i.delete(l)),Dh(r,n,h)}}function Sw(r,t,n,e,o){r!==t&&tM(t,function(s,i){if(o||(o=new gs),Jo(s))TM(r,t,i,n,Sw,e,o);else{var a=e?e(Oh(r,i),s,i+"",r,t,o):void 0;a===void 0&&(a=s),Dh(r,i,a)}},Cw)}function Tw(r){return r}var l0=Math.max;function MM(r,t,n){return t=l0(t===void 0?r.length-1:t,0),function(){for(var e=arguments,o=-1,s=l0(e.length-t,0),i=Array(s);++o<s;)i[o]=e[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=e[o];return a[t]=n(i),function(l,c,u){switch(u.length){case 0:return l.call(c);case 1:return l.call(c,u[0]);case 2:return l.call(c,u[0],u[1]);case 3:return l.call(c,u[0],u[1],u[2])}return l.apply(c,u)}(r,this,a)}}function AM(r){return function(){return r}}var LM=tc?function(r,t){return tc(r,"toString",{configurable:!0,enumerable:!1,value:AM(t),writable:!0})}:Tw,EM=Date.now,BM=function(r){var t=0,n=0;return function(){var e=EM(),o=16-(e-n);if(n=e,o>0){if(++t>=800)return arguments[0]}else t=0;return r.apply(void 0,arguments)}}(LM);function IM(r,t){return BM(MM(r,t,Tw),r+"")}function FM(r,t,n){if(!Jo(n))return!1;var e=typeof t;return!!(e=="number"?Fc(n)&&kw(t,n.length):e=="string"&&t in n)&&Bc(n[t],r)}function DM(r){return IM(function(t,n){var e=-1,o=n.length,s=o>1?n[o-1]:void 0,i=o>2?n[2]:void 0;for(s=r.length>3&&typeof s=="function"?(o--,s):void 0,i&&FM(n[0],n[1],i)&&(s=o<3?void 0:s,o=1),t=Object(t);++e<o;){var a=n[e];a&&r(t,a,e,s)}return t})}var OM=DM(function(r,t,n){Sw(r,t,n)}),FH="",zM={curveBasis:rw,curveBasisClosed:function(r){return new ow(r)},curveBasisOpen:function(r){return new sw(r)},curveBumpX:function(r){return new W1(r,!0)},curveBumpY:function(r){return new W1(r,!1)},curveBundle:S7,curveCardinalClosed:M7,curveCardinalOpen:A7,curveCardinal:T7,curveCatmullRomClosed:E7,curveCatmullRomOpen:B7,curveCatmullRom:L7,curveLinear:nw,curveLinearClosed:function(r){return new uw(r)},curveMonotoneX:function(r){return new cl(r)},curveMonotoneY:function(r){return new hw(r)},curveNatural:function(r){return new pw(r)},curveStep:function(r){return new ul(r,.5)},curveStepAfter:function(r){return new ul(r,1)},curveStepBefore:function(r){return new ul(r,0)}},NM=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,RM=w(function(r,t){const n=Mw(r,/(?:init\b)|(?:initialize\b)/);let e={};if(Array.isArray(n)){const i=n.map(a=>a.args);zl(i),e=ln(e,[...i])}else e=n.args;if(!e)return;let o=vd(r,t);const s="config";return e[s]!==void 0&&(o==="flowchart-v2"&&(o="flowchart"),e[o]=e[s],delete e[s]),e},"detectInit"),Mw=w(function(r,t=null){var n,e;try{const o=new RegExp(`[%]{2}(?![{]${NM.source})(?=[}][%]{2}).*
`,"ig");let s;r=r.trim().replace(o,"").replace(/'/gm,'"'),it.debug(`Detecting diagram directive${t!==null?" type:"+t:""} based on the text:${r}`);const i=[];for(;(s=Oi.exec(r))!==null;)if(s.index===Oi.lastIndex&&Oi.lastIndex++,s&&!t||t&&((n=s[1])==null?void 0:n.match(t))||t&&((e=s[2])==null?void 0:e.match(t))){const a=s[1]?s[1]:s[2],l=s[3]?s[3].trim():s[4]?JSON.parse(s[4].trim()):null;i.push({type:a,args:l})}return i.length===0?{type:r,args:null}:i.length===1?i[0]:i}catch(o){return it.error(`ERROR: ${o.message} - Unable to parse directive type: '${t}' based on the text: '${r}'`),{type:void 0,args:null}}},"detectDirective"),PM=w(function(r){return r.replace(Oi,"")},"removeDirectives"),UM=w(function(r,t){for(const[n,e]of t.entries())if(e.match(r))return n;return-1},"isSubstringInArray");function Yd(r,t){if(!r)return t;const n=`curve${r.charAt(0).toUpperCase()+r.slice(1)}`;return zM[n]??t}function Aw(r,t){const n=r.trim();if(n)return t.securityLevel!=="loose"?Db(n):n}w(Yd,"interpolateToCurve"),w(Aw,"formatUrl");var qM=w((r,...t)=>{const n=r.split("."),e=n.length-1,o=n[e];let s=window;for(let i=0;i<e;i++)if(s=s[n[i]],!s)return void it.error(`Function name: ${r} not found in window`);s[o](...t)},"runFunc");function Xd(r,t){return r&&t?Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2)):0}function Lw(r){let t,n=0;return r.forEach(e=>{n+=Xd(e,t),t=e}),Qd(r,n/2)}function Ew(r){return r.length===1?r[0]:Lw(r)}w(Xd,"distance"),w(Lw,"traverseEdge"),w(Ew,"calcLabelPosition");var c0=w((r,t=2)=>{const n=Math.pow(10,t);return Math.round(r*n)/n},"roundNumber"),Qd=w((r,t)=>{let n,e=t;for(const o of r){if(n){const s=Xd(o,n);if(s<e)e-=s;else{const i=e/s;if(i<=0)return n;if(i>=1)return{x:o.x,y:o.y};if(i>0&&i<1)return{x:c0((1-i)*n.x+i*o.x,5),y:c0((1-i)*n.y+i*o.y,5)}}}n=o}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),jM=w((r,t,n)=>{it.info(`our points ${JSON.stringify(t)}`),t[0]!==n&&(t=t.reverse());const e=Qd(t,25),o=r?10:5,s=Math.atan2(t[0].y-e.y,t[0].x-e.x),i={x:0,y:0};return i.x=Math.sin(s)*o+(t[0].x+e.x)/2,i.y=-Math.cos(s)*o+(t[0].y+e.y)/2,i},"calcCardinalityPosition");function Bw(r,t,n){const e=structuredClone(n);it.info("our points",e),t!=="start_left"&&t!=="start_right"&&e.reverse();const o=Qd(e,25+r),s=10+.5*r,i=Math.atan2(e[0].y-o.y,e[0].x-o.x),a={x:0,y:0};return t==="start_left"?(a.x=Math.sin(i+Math.PI)*s+(e[0].x+o.x)/2,a.y=-Math.cos(i+Math.PI)*s+(e[0].y+o.y)/2):t==="end_right"?(a.x=Math.sin(i-Math.PI)*s+(e[0].x+o.x)/2-5,a.y=-Math.cos(i-Math.PI)*s+(e[0].y+o.y)/2-5):t==="end_left"?(a.x=Math.sin(i)*s+(e[0].x+o.x)/2-5,a.y=-Math.cos(i)*s+(e[0].y+o.y)/2-5):(a.x=Math.sin(i)*s+(e[0].x+o.x)/2,a.y=-Math.cos(i)*s+(e[0].y+o.y)/2),a}function Iw(r){let t="",n="";for(const e of r)e!==void 0&&(e.startsWith("color:")||e.startsWith("text-align:")?n=n+e+";":t=t+e+";");return{style:t,labelStyle:n}}w(Bw,"calcTerminalLabelPosition"),w(Iw,"getStylesFromArray");var u0=0,WM=w(()=>(u0++,"id-"+Math.random().toString(36).substr(2,12)+"-"+u0),"generateId");function Fw(r){let t="";const n="0123456789abcdef";for(let e=0;e<r;e++)t+=n.charAt(Math.floor(16*Math.random()));return t}w(Fw,"makeRandomHex");var HM=w(r=>Fw(r.length),"random"),VM=w(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),GM=w(function(r,t){const n=t.text.replace(Qs.lineBreakRegex," "),[,e]=Dc(t.fontSize),o=r.append("text");o.attr("x",t.x),o.attr("y",t.y),o.style("text-anchor",t.anchor),o.style("font-family",t.fontFamily),o.style("font-size",e),o.style("font-weight",t.fontWeight),o.attr("fill",t.fill),t.class!==void 0&&o.attr("class",t.class);const s=o.append("tspan");return s.attr("x",t.x+2*t.textMargin),s.attr("fill",t.fill),s.text(n),o},"drawSimpleText"),ZM=pa((r,t,n)=>{if(!r||(n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},n),Qs.lineBreakRegex.test(r)))return r;const e=r.split(" ").filter(Boolean),o=[];let s="";return e.forEach((i,a)=>{const l=Ps(`${i} `,n),c=Ps(s,n);if(l>t){const{hyphenatedStrings:u,remainingWord:h}=YM(i,t,"-",n);o.push(s,...u),s=h}else c+l>=t?(o.push(s),s=i):s=[s,i].filter(Boolean).join(" ");a+1===e.length&&o.push(s)}),o.filter(i=>i!=="").join(n.joinWith)},(r,t,n)=>`${r}${t}${n.fontSize}${n.fontWeight}${n.fontFamily}${n.joinWith}`),YM=pa((r,t,n="-",e)=>{e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},e);const o=[...r],s=[];let i="";return o.forEach((a,l)=>{const c=`${i}${a}`;if(Ps(c,e)>=t){const u=l+1,h=o.length===u,d=`${c}${n}`;s.push(h?c:d),i=""}else i=c}),{hyphenatedStrings:s,remainingWord:i}},(r,t,n="-",e)=>`${r}${t}${n}${e.fontSize}${e.fontWeight}${e.fontFamily}`);function Dw(r,t){return Kd(r,t).height}function Ps(r,t){return Kd(r,t).width}w(Dw,"calculateTextHeight"),w(Ps,"calculateTextWidth");var Pa,Kd=pa((r,t)=>{const{fontSize:n=12,fontFamily:e="Arial",fontWeight:o=400}=t;if(!r)return{width:0,height:0};const[,s]=Dc(n),i=["sans-serif",e],a=r.split(Qs.lineBreakRegex),l=[],c=fe("body");if(!c.remove)return{width:0,height:0,lineHeight:0};const u=c.append("svg");for(const h of i){let d=0;const p={width:0,height:0,lineHeight:0};for(const g of a){const $=VM();$.text=g||"";const b=GM(u,$).style("font-size",s).style("font-weight",o).style("font-family",h),y=(b._groups||b)[0][0].getBBox();if(y.width===0&&y.height===0)throw new Error("svg element not in render tree");p.width=Math.round(Math.max(p.width,y.width)),d=Math.round(y.height),p.height+=d,p.lineHeight=Math.round(Math.max(p.lineHeight,d))}l.push(p)}return u.remove(),l[isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1]},(r,t)=>`${r}${t.fontSize}${t.fontWeight}${t.fontFamily}`),Bs,XM=(Bs=class{constructor(t=!1,n){this.count=0,this.count=n?n.length:0,this.next=t?()=>this.count++:()=>Date.now()}},w(Bs,"InitIDGenerator"),Bs),QM=w(function(r){return Pa=Pa||document.createElement("div"),r=escape(r).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),Pa.innerHTML=r,unescape(Pa.textContent)},"entityDecode");function Jd(r){return"str"in r}w(Jd,"isDetailedError");var KM=w((r,t,n,e)=>{var s;if(!e)return;const o=(s=r.node())==null?void 0:s.getBBox();o&&r.append("text").text(e).attr("text-anchor","middle").attr("x",o.x+o.width/2).attr("y",-n).attr("class",t)},"insertTitle"),Dc=w(r=>{if(typeof r=="number")return[r,r+"px"];const t=parseInt(r??"",10);return Number.isNaN(t)?[void 0,void 0]:r===String(t)?[t,r+"px"]:[t,r]},"parseFontSize");function tp(r,t){return OM({},r,t)}w(tp,"cleanAndMerge");var kr={assignWithDepth:ln,wrapLabel:ZM,calculateTextHeight:Dw,calculateTextWidth:Ps,calculateTextDimensions:Kd,cleanAndMerge:tp,detectInit:RM,detectDirective:Mw,isSubstringInArray:UM,interpolateToCurve:Yd,calcLabelPosition:Ew,calcCardinalityPosition:jM,calcTerminalLabelPosition:Bw,formatUrl:Aw,getStylesFromArray:Iw,generateId:WM,random:HM,runFunc:qM,entityDecode:QM,insertTitle:KM,parseFontSize:Dc,InitIDGenerator:XM},JM=w(function(r){let t=r;return t=t.replace(/style.*:\S*#.*;/g,function(n){return n.substring(0,n.length-1)}),t=t.replace(/classDef.*:\S*#.*;/g,function(n){return n.substring(0,n.length-1)}),t=t.replace(/#\w+;/g,function(n){const e=n.substring(1,n.length-1);return/^\+?\d+$/.test(e)?""+e+"":""+e+""}),t},"encodeEntities"),Js=w(function(r){return r.replace(//g,"&#").replace(//g,"&").replace(//g,";")},"decodeEntities"),DH=w((r,t,{counter:n=0,prefix:e,suffix:o})=>`${e?`${e}_`:""}${r}_${t}_${n}${o?`_${o}`:""}`,"getEdgeId");function Ln(r){return r??null}function tA(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}w(Ln,"handleUndefinedAttr");let ns={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function h0(r){ns=r}const Ow=/[&<>"']/,eA=new RegExp(Ow.source,"g"),zw=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,nA=new RegExp(zw.source,"g"),rA={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},d0=r=>rA[r];function Zn(r,t){if(t){if(Ow.test(r))return r.replace(eA,d0)}else if(zw.test(r))return r.replace(nA,d0);return r}const oA=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,sA=/(^|[^\[])\^/g;function $e(r,t){let n=typeof r=="string"?r:r.source;t=t||"";const e={replace:(o,s)=>{let i=typeof s=="string"?s:s.source;return i=i.replace(sA,"$1"),n=n.replace(o,i),e},getRegex:()=>new RegExp(n,t)};return e}function p0(r){try{r=encodeURI(r).replace(/%25/g,"%")}catch{return null}return r}const Ri={exec:()=>null};function f0(r,t){const n=r.replace(/\|/g,(s,i,a)=>{let l=!1,c=i;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),e=n.split(/ \|/);let o=0;if(e[0].trim()||e.shift(),e.length>0&&!e[e.length-1].trim()&&e.pop(),t)if(e.length>t)e.splice(t);else for(;e.length<t;)e.push("");for(;o<e.length;o++)e[o]=e[o].trim().replace(/\\\|/g,"|");return e}function $i(r,t,n){const e=r.length;if(e===0)return"";let o=0;for(;o<e;){const s=r.charAt(e-o-1);if(s!==t||n){if(s===t||!n)break;o++}else o++}return r.slice(0,e-o)}function g0(r,t,n,e){const o=t.href,s=t.title?Zn(t.title):null,i=r[1].replace(/\\([\[\]])/g,"$1");if(r[0].charAt(0)!=="!"){e.state.inLink=!0;const a={type:"link",raw:n,href:o,title:s,text:i,tokens:e.inlineTokens(i)};return e.state.inLink=!1,a}return{type:"image",raw:n,href:o,title:s,text:Zn(i)}}class rc{constructor(t){V(this,"options");V(this,"rules");V(this,"lexer");this.options=t||ns}space(t){const n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(t){const n=this.rules.block.code.exec(t);if(n){const e=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?e:$i(e,`
`)}}}fences(t){const n=this.rules.block.fences.exec(t);if(n){const e=n[0],o=function(s,i){const a=s.match(/^(\s+)(?:```)/);if(a===null)return i;const l=a[1];return i.split(`
`).map(c=>{const u=c.match(/^\s+/);if(u===null)return c;const[h]=u;return h.length>=l.length?c.slice(l.length):c}).join(`
`)}(e,n[3]||"");return{type:"code",raw:e,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:o}}}heading(t){const n=this.rules.block.heading.exec(t);if(n){let e=n[2].trim();if(/#$/.test(e)){const o=$i(e,"#");this.options.pedantic?e=o.trim():o&&!/ $/.test(o)||(e=o.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(t){const n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:$i(n[0],`
`)}}blockquote(t){const n=this.rules.block.blockquote.exec(t);if(n){let e=$i(n[0],`
`).split(`
`),o="",s="";const i=[];for(;e.length>0;){let a=!1;const l=[];let c;for(c=0;c<e.length;c++)if(/^ {0,3}>/.test(e[c]))l.push(e[c]),a=!0;else{if(a)break;l.push(e[c])}e=e.slice(c);const u=l.join(`
`),h=u.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");o=o?`${o}
${u}`:u,s=s?`${s}
${h}`:h;const d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,i,!0),this.lexer.state.top=d,e.length===0)break;const p=i[i.length-1];if((p==null?void 0:p.type)==="code")break;if((p==null?void 0:p.type)==="blockquote"){const g=p,$=g.raw+`
`+e.join(`
`),b=this.blockquote($);i[i.length-1]=b,o=o.substring(0,o.length-g.raw.length)+b.raw,s=s.substring(0,s.length-g.text.length)+b.text;break}if((p==null?void 0:p.type)==="list"){const g=p,$=g.raw+`
`+e.join(`
`),b=this.list($);i[i.length-1]=b,o=o.substring(0,o.length-p.raw.length)+b.raw,s=s.substring(0,s.length-g.raw.length)+b.raw,e=$.substring(i[i.length-1].raw.length).split(`
`)}}return{type:"blockquote",raw:o,tokens:i,text:s}}}list(t){let n=this.rules.block.list.exec(t);if(n){let e=n[1].trim();const o=e.length>1,s={type:"list",raw:"",ordered:o,start:o?+e.slice(0,-1):"",loose:!1,items:[]};e=o?`\\d{1,9}\\${e.slice(-1)}`:`\\${e}`,this.options.pedantic&&(e=o?e:"[*+-]");const i=new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a=!1;for(;t;){let l=!1,c="",u="";if(!(n=i.exec(t))||this.rules.block.hr.test(t))break;c=n[0],t=t.substring(c.length);let h=n[2].split(`
`,1)[0].replace(/^\t+/,y=>" ".repeat(3*y.length)),d=t.split(`
`,1)[0],p=!h.trim(),g=0;if(this.options.pedantic?(g=2,u=h.trimStart()):p?g=n[1].length+1:(g=n[2].search(/[^ ]/),g=g>4?1:g,u=h.slice(g),g+=n[1].length),p&&/^ *$/.test(d)&&(c+=d+`
`,t=t.substring(d.length+1),l=!0),!l){const y=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),x=new RegExp(`^ {0,${Math.min(3,g-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),M=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:\`\`\`|~~~)`),L=new RegExp(`^ {0,${Math.min(3,g-1)}}#`);for(;t;){const A=t.split(`
`,1)[0];if(d=A,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),M.test(d)||L.test(d)||y.test(d)||x.test(t))break;if(d.search(/[^ ]/)>=g||!d.trim())u+=`
`+d.slice(g);else{if(p||h.search(/[^ ]/)>=4||M.test(h)||L.test(h)||x.test(h))break;u+=`
`+d}p||d.trim()||(p=!0),c+=A+`
`,t=t.substring(A.length+1),h=d.slice(g)}}s.loose||(a?s.loose=!0:/\n *\n *$/.test(c)&&(a=!0));let $,b=null;this.options.gfm&&(b=/^\[[ xX]\] /.exec(u),b&&($=b[0]!=="[ ] ",u=u.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:c,task:!!b,checked:$,loose:!1,text:u,tokens:[]}),s.raw+=c}s.items[s.items.length-1].raw=s.items[s.items.length-1].raw.trimEnd(),s.items[s.items.length-1].text=s.items[s.items.length-1].text.trimEnd(),s.raw=s.raw.trimEnd();for(let l=0;l<s.items.length;l++)if(this.lexer.state.top=!1,s.items[l].tokens=this.lexer.blockTokens(s.items[l].text,[]),!s.loose){const c=s.items[l].tokens.filter(h=>h.type==="space"),u=c.length>0&&c.some(h=>/\n.*\n/.test(h.raw));s.loose=u}if(s.loose)for(let l=0;l<s.items.length;l++)s.items[l].loose=!0;return s}}html(t){const n=this.rules.block.html.exec(t);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(t){const n=this.rules.block.def.exec(t);if(n){const e=n[1].toLowerCase().replace(/\s+/g," "),o=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:e,raw:n[0],href:o,title:s}}}table(t){const n=this.rules.block.table.exec(t);if(!n||!/[:|]/.test(n[2]))return;const e=f0(n[1]),o=n[2].replace(/^\||\| *$/g,"").split("|"),s=n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[],i={type:"table",raw:n[0],header:[],align:[],rows:[]};if(e.length===o.length){for(const a of o)/^ *-+: *$/.test(a)?i.align.push("right"):/^ *:-+: *$/.test(a)?i.align.push("center"):/^ *:-+ *$/.test(a)?i.align.push("left"):i.align.push(null);for(let a=0;a<e.length;a++)i.header.push({text:e[a],tokens:this.lexer.inline(e[a]),header:!0,align:i.align[a]});for(const a of s)i.rows.push(f0(a,i.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:i.align[c]})));return i}}lheading(t){const n=this.rules.block.lheading.exec(t);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(t){const n=this.rules.block.paragraph.exec(t);if(n){const e=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:e,tokens:this.lexer.inline(e)}}}text(t){const n=this.rules.block.text.exec(t);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(t){const n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:Zn(n[1])}}tag(t){const n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(t){const n=this.rules.inline.link.exec(t);if(n){const e=n[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const i=$i(e.slice(0,-1),"\\");if((e.length-i.length)%2==0)return}else{const i=function(a,l){if(a.indexOf(l[1])===-1)return-1;let c=0;for(let u=0;u<a.length;u++)if(a[u]==="\\")u++;else if(a[u]===l[0])c++;else if(a[u]===l[1]&&(c--,c<0))return u;return-1}(n[2],"()");if(i>-1){const a=(n[0].indexOf("!")===0?5:4)+n[1].length+i;n[2]=n[2].substring(0,i),n[0]=n[0].substring(0,a).trim(),n[3]=""}}let o=n[2],s="";if(this.options.pedantic){const i=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);i&&(o=i[1],s=i[3])}else s=n[3]?n[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(o=this.options.pedantic&&!/>$/.test(e)?o.slice(1):o.slice(1,-1)),g0(n,{href:o&&o.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer)}}reflink(t,n){let e;if((e=this.rules.inline.reflink.exec(t))||(e=this.rules.inline.nolink.exec(t))){const o=n[(e[2]||e[1]).replace(/\s+/g," ").toLowerCase()];if(!o){const s=e[0].charAt(0);return{type:"text",raw:s,text:s}}return g0(e,o,e[0],this.lexer)}}emStrong(t,n,e=""){let o=this.rules.inline.emStrongLDelim.exec(t);if(o&&!(o[3]&&e.match(/[\p{L}\p{N}]/u))&&(!(o[1]||o[2])||!e||this.rules.inline.punctuation.exec(e))){const s=[...o[0]].length-1;let i,a,l=s,c=0;const u=o[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,n=n.slice(-1*t.length+s);(o=u.exec(n))!=null;){if(i=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!i)continue;if(a=[...i].length,o[3]||o[4]){l+=a;continue}if((o[5]||o[6])&&s%3&&!((s+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);const h=[...o[0]][0].length,d=t.slice(0,s+o.index+h+a);if(Math.min(s,a)%2){const g=d.slice(1,-1);return{type:"em",raw:d,text:g,tokens:this.lexer.inlineTokens(g)}}const p=d.slice(2,-2);return{type:"strong",raw:d,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(t){const n=this.rules.inline.code.exec(t);if(n){let e=n[2].replace(/\n/g," ");const o=/[^ ]/.test(e),s=/^ /.test(e)&&/ $/.test(e);return o&&s&&(e=e.substring(1,e.length-1)),e=Zn(e,!0),{type:"codespan",raw:n[0],text:e}}}br(t){const n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}}del(t){const n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(t){const n=this.rules.inline.autolink.exec(t);if(n){let e,o;return n[2]==="@"?(e=Zn(n[1]),o="mailto:"+e):(e=Zn(n[1]),o=e),{type:"link",raw:n[0],text:e,href:o,tokens:[{type:"text",raw:e,text:e}]}}}url(t){var e;let n;if(n=this.rules.inline.url.exec(t)){let o,s;if(n[2]==="@")o=Zn(n[0]),s="mailto:"+o;else{let i;do i=n[0],n[0]=((e=this.rules.inline._backpedal.exec(n[0]))==null?void 0:e[0])??"";while(i!==n[0]);o=Zn(n[0]),s=n[1]==="www."?"http://"+n[0]:n[0]}return{type:"link",raw:n[0],text:o,href:s,tokens:[{type:"text",raw:o,text:o}]}}}inlineText(t){const n=this.rules.inline.text.exec(t);if(n){let e;return e=this.lexer.state.inRawBlock?n[0]:Zn(n[0]),{type:"text",raw:n[0],text:e}}}}const ga=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Nw=/(?:[*+-]|\d{1,9}[.)])/,Rw=$e(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Nw).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),ep=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,np=/(?!\s*\])(?:\\.|[^\[\]\\])+/,iA=$e(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",np).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),aA=$e(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Nw).getRegex(),Oc="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",rp=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,lA=$e("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",rp).replace("tag",Oc).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),m0=$e(ep).replace("hr",ga).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Oc).getRegex(),op={blockquote:$e(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",m0).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:iA,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:ga,html:lA,lheading:Rw,list:aA,newline:/^(?: *(?:\n|$))+/,paragraph:m0,table:Ri,text:/^[^\n]+/},$0=$e("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ga).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Oc).getRegex(),cA={...op,table:$0,paragraph:$e(ep).replace("hr",ga).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",$0).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Oc).getRegex()},uA={...op,html:$e(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",rp).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ri,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:$e(ep).replace("hr",ga).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Rw).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Pw=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Uw=/^( {2,}|\\)\n(?!\s*$)/,ma="\\p{P}\\p{S}",hA=$e(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,ma).getRegex(),dA=$e(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,ma).getRegex(),pA=$e("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,ma).getRegex(),fA=$e("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,ma).getRegex(),gA=$e(/\\([punct])/,"gu").replace(/punct/g,ma).getRegex(),mA=$e(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),$A=$e(rp).replace("(?:-->|$)","-->").getRegex(),yA=$e("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",$A).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),oc=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,xA=$e(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",oc).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),y0=$e(/^!?\[(label)\]\[(ref)\]/).replace("label",oc).replace("ref",np).getRegex(),x0=$e(/^!?\[(ref)\](?:\[\])?/).replace("ref",np).getRegex(),sp={_backpedal:Ri,anyPunctuation:gA,autolink:mA,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:Uw,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:Ri,emStrongLDelim:dA,emStrongRDelimAst:pA,emStrongRDelimUnd:fA,escape:Pw,link:xA,nolink:x0,punctuation:hA,reflink:y0,reflinkSearch:$e("reflink|nolink(?!\\()","g").replace("reflink",y0).replace("nolink",x0).getRegex(),tag:yA,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:Ri},bA={...sp,link:$e(/^!?\[(label)\]\((.*?)\)/).replace("label",oc).getRegex(),reflink:$e(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",oc).getRegex()},zh={...sp,escape:$e(Pw).replace("])","~|])").getRegex(),url:$e(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},wA={...zh,br:$e(Uw).replace("{2,}","*").getRegex(),text:$e(zh.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Ua={normal:op,gfm:cA,pedantic:uA},yi={normal:sp,gfm:zh,breaks:wA,pedantic:bA};class Cr{constructor(t){V(this,"tokens");V(this,"options");V(this,"state");V(this,"tokenizer");V(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||ns,this.options.tokenizer=this.options.tokenizer||new rc,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:Ua.normal,inline:yi.normal};this.options.pedantic?(n.block=Ua.pedantic,n.inline=yi.pedantic):this.options.gfm&&(n.block=Ua.gfm,this.options.breaks?n.inline=yi.breaks:n.inline=yi.gfm),this.tokenizer.rules=n}static get rules(){return{block:Ua,inline:yi}}static lex(t,n){return new Cr(n).lex(t)}static lexInline(t,n){return new Cr(n).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const e=this.inlineQueue[n];this.inlineTokens(e.src,e.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],e=!1){let o,s,i;for(t=this.options.pedantic?t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t.replace(/^( *)(\t+)/gm,(a,l,c)=>l+"    ".repeat(c.length));t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(o=a.call({lexer:this},t,n))&&(t=t.substring(o.raw.length),n.push(o),!0))))if(o=this.tokenizer.space(t))t=t.substring(o.raw.length),o.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(o);else if(o=this.tokenizer.code(t))t=t.substring(o.raw.length),s=n[n.length-1],!s||s.type!=="paragraph"&&s.type!=="text"?n.push(o):(s.raw+=`
`+o.raw,s.text+=`
`+o.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text);else if(o=this.tokenizer.fences(t))t=t.substring(o.raw.length),n.push(o);else if(o=this.tokenizer.heading(t))t=t.substring(o.raw.length),n.push(o);else if(o=this.tokenizer.hr(t))t=t.substring(o.raw.length),n.push(o);else if(o=this.tokenizer.blockquote(t))t=t.substring(o.raw.length),n.push(o);else if(o=this.tokenizer.list(t))t=t.substring(o.raw.length),n.push(o);else if(o=this.tokenizer.html(t))t=t.substring(o.raw.length),n.push(o);else if(o=this.tokenizer.def(t))t=t.substring(o.raw.length),s=n[n.length-1],!s||s.type!=="paragraph"&&s.type!=="text"?this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title}):(s.raw+=`
`+o.raw,s.text+=`
`+o.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text);else if(o=this.tokenizer.table(t))t=t.substring(o.raw.length),n.push(o);else if(o=this.tokenizer.lheading(t))t=t.substring(o.raw.length),n.push(o);else{if(i=t,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=t.slice(1);let c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(i=t.substring(0,a+1))}if(this.state.top&&(o=this.tokenizer.paragraph(i)))s=n[n.length-1],e&&(s==null?void 0:s.type)==="paragraph"?(s.raw+=`
`+o.raw,s.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):n.push(o),e=i.length!==t.length,t=t.substring(o.raw.length);else if(o=this.tokenizer.text(t))t=t.substring(o.raw.length),s=n[n.length-1],s&&s.type==="text"?(s.raw+=`
`+o.raw,s.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):n.push(o);else if(t){const a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let e,o,s,i,a,l,c=t;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(c))!=null;)u.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(c=c.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.blockSkip.exec(c))!=null;)c=c.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(c))!=null;)c=c.slice(0,i.index)+"++"+c.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(a||(l=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>!!(e=u.call({lexer:this},t,n))&&(t=t.substring(e.raw.length),n.push(e),!0))))if(e=this.tokenizer.escape(t))t=t.substring(e.raw.length),n.push(e);else if(e=this.tokenizer.tag(t))t=t.substring(e.raw.length),o=n[n.length-1],o&&e.type==="text"&&o.type==="text"?(o.raw+=e.raw,o.text+=e.text):n.push(e);else if(e=this.tokenizer.link(t))t=t.substring(e.raw.length),n.push(e);else if(e=this.tokenizer.reflink(t,this.tokens.links))t=t.substring(e.raw.length),o=n[n.length-1],o&&e.type==="text"&&o.type==="text"?(o.raw+=e.raw,o.text+=e.text):n.push(e);else if(e=this.tokenizer.emStrong(t,c,l))t=t.substring(e.raw.length),n.push(e);else if(e=this.tokenizer.codespan(t))t=t.substring(e.raw.length),n.push(e);else if(e=this.tokenizer.br(t))t=t.substring(e.raw.length),n.push(e);else if(e=this.tokenizer.del(t))t=t.substring(e.raw.length),n.push(e);else if(e=this.tokenizer.autolink(t))t=t.substring(e.raw.length),n.push(e);else if(this.state.inLink||!(e=this.tokenizer.url(t))){if(s=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=t.slice(1);let d;this.options.extensions.startInline.forEach(p=>{d=p.call({lexer:this},h),typeof d=="number"&&d>=0&&(u=Math.min(u,d))}),u<1/0&&u>=0&&(s=t.substring(0,u+1))}if(e=this.tokenizer.inlineText(s))t=t.substring(e.raw.length),e.raw.slice(-1)!=="_"&&(l=e.raw.slice(-1)),a=!0,o=n[n.length-1],o&&o.type==="text"?(o.raw+=e.raw,o.text+=e.text):n.push(e);else if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}throw new Error(u)}}else t=t.substring(e.raw.length),n.push(e);return n}}class sc{constructor(t){V(this,"options");V(this,"parser");this.options=t||ns}space(t){return""}code({text:t,lang:n,escaped:e}){var i;const o=(i=(n||"").match(/^\S*/))==null?void 0:i[0],s=t.replace(/\n$/,"")+`
`;return o?'<pre><code class="language-'+Zn(o)+'">'+(e?s:Zn(s,!0))+`</code></pre>
`:"<pre><code>"+(e?s:Zn(s,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:n}){return`<h${n}>${this.parser.parseInline(t)}</h${n}>
`}hr(t){return`<hr>
`}list(t){const n=t.ordered,e=t.start;let o="";for(let i=0;i<t.items.length;i++){const a=t.items[i];o+=this.listitem(a)}const s=n?"ol":"ul";return"<"+s+(n&&e!==1?' start="'+e+'"':"")+`>
`+o+"</"+s+`>
`}listitem(t){let n="";if(t.task){const e=this.checkbox({checked:!!t.checked});t.loose?t.tokens.length>0&&t.tokens[0].type==="paragraph"?(t.tokens[0].text=e+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=e+" "+t.tokens[0].tokens[0].text)):t.tokens.unshift({type:"text",raw:e+" ",text:e+" "}):n+=e+" "}return n+=this.parser.parse(t.tokens,!!t.loose),`<li>${n}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let n="",e="";for(let s=0;s<t.header.length;s++)e+=this.tablecell(t.header[s]);n+=this.tablerow({text:e});let o="";for(let s=0;s<t.rows.length;s++){const i=t.rows[s];e="";for(let a=0;a<i.length;a++)e+=this.tablecell(i[a]);o+=this.tablerow({text:e})}return o&&(o=`<tbody>${o}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+o+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const n=this.parser.parseInline(t.tokens),e=t.header?"th":"td";return(t.align?`<${e} align="${t.align}">`:`<${e}>`)+n+`</${e}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${t}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:n,tokens:e}){const o=this.parser.parseInline(e),s=p0(t);if(s===null)return o;let i='<a href="'+(t=s)+'"';return n&&(i+=' title="'+n+'"'),i+=">"+o+"</a>",i}image({href:t,title:n,text:e}){const o=p0(t);if(o===null)return e;let s=`<img src="${t=o}" alt="${e}"`;return n&&(s+=` title="${n}"`),s+=">",s}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):t.text}}class ip{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}}class Sr{constructor(t){V(this,"options");V(this,"renderer");V(this,"textRenderer");this.options=t||ns,this.options.renderer=this.options.renderer||new sc,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new ip}static parse(t,n){return new Sr(n).parse(t)}static parseInline(t,n){return new Sr(n).parseInline(t)}parse(t,n=!0){let e="";for(let o=0;o<t.length;o++){const s=t[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const a=s,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){e+=l||"";continue}}const i=s;switch(i.type){case"space":e+=this.renderer.space(i);continue;case"hr":e+=this.renderer.hr(i);continue;case"heading":e+=this.renderer.heading(i);continue;case"code":e+=this.renderer.code(i);continue;case"table":e+=this.renderer.table(i);continue;case"blockquote":e+=this.renderer.blockquote(i);continue;case"list":e+=this.renderer.list(i);continue;case"html":e+=this.renderer.html(i);continue;case"paragraph":e+=this.renderer.paragraph(i);continue;case"text":{let a=i,l=this.renderer.text(a);for(;o+1<t.length&&t[o+1].type==="text";)a=t[++o],l+=`
`+this.renderer.text(a);e+=n?this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l}]}):l;continue}default:{const a='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return e}parseInline(t,n){n=n||this.renderer;let e="";for(let o=0;o<t.length;o++){const s=t[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){e+=a||"";continue}}const i=s;switch(i.type){case"escape":case"text":e+=n.text(i);break;case"html":e+=n.html(i);break;case"link":e+=n.link(i);break;case"image":e+=n.image(i);break;case"strong":e+=n.strong(i);break;case"em":e+=n.em(i);break;case"codespan":e+=n.codespan(i);break;case"br":e+=n.br(i);break;case"del":e+=n.del(i);break;default:{const a='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return e}}class Pi{constructor(t){V(this,"options");this.options=t||ns}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}}V(Pi,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var Xr,qw,Nh,jw,wy;const Bo=new(wy=class{constructor(...r){ie(this,Xr);V(this,"defaults",{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null});V(this,"options",this.setOptions);V(this,"parse",xt(this,Xr,Nh).call(this,Cr.lex,Sr.parse));V(this,"parseInline",xt(this,Xr,Nh).call(this,Cr.lexInline,Sr.parseInline));V(this,"Parser",Sr);V(this,"Renderer",sc);V(this,"TextRenderer",ip);V(this,"Lexer",Cr);V(this,"Tokenizer",rc);V(this,"Hooks",Pi);this.use(...r)}walkTokens(r,t){var e,o;let n=[];for(const s of r)switch(n=n.concat(t.call(this,s)),s.type){case"table":{const i=s;for(const a of i.header)n=n.concat(this.walkTokens(a.tokens,t));for(const a of i.rows)for(const l of a)n=n.concat(this.walkTokens(l.tokens,t));break}case"list":{const i=s;n=n.concat(this.walkTokens(i.items,t));break}default:{const i=s;(o=(e=this.defaults.extensions)==null?void 0:e.childTokens)!=null&&o[i.type]?this.defaults.extensions.childTokens[i.type].forEach(a=>{const l=i[a].flat(1/0);n=n.concat(this.walkTokens(l,t))}):i.tokens&&(n=n.concat(this.walkTokens(i.tokens,t)))}}return n}use(...r){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return r.forEach(n=>{const e={...n};if(e.async=this.defaults.async||e.async||!1,n.extensions&&(n.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){const s=t.renderers[o.name];t.renderers[o.name]=s?function(...i){let a=o.renderer.apply(this,i);return a===!1&&(a=s.apply(this,i)),a}:o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=t[o.level];s?s.unshift(o.tokenizer):t[o.level]=[o.tokenizer],o.start&&(o.level==="block"?t.startBlock?t.startBlock.push(o.start):t.startBlock=[o.start]:o.level==="inline"&&(t.startInline?t.startInline.push(o.start):t.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(t.childTokens[o.name]=o.childTokens)}),e.extensions=t),n.renderer){const o=this.defaults.renderer||new sc(this.defaults);for(const s in n.renderer){if(!(s in o))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;const i=s;let a=n.renderer[i];n.useNewRenderer||(a=xt(this,Xr,qw).call(this,a,i,o));const l=o[i];o[i]=(...c)=>{let u=a.apply(o,c);return u===!1&&(u=l.apply(o,c)),u||""}}e.renderer=o}if(n.tokenizer){const o=this.defaults.tokenizer||new rc(this.defaults);for(const s in n.tokenizer){if(!(s in o))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const i=s,a=n.tokenizer[i],l=o[i];o[i]=(...c)=>{let u=a.apply(o,c);return u===!1&&(u=l.apply(o,c)),u}}e.tokenizer=o}if(n.hooks){const o=this.defaults.hooks||new Pi;for(const s in n.hooks){if(!(s in o))throw new Error(`hook '${s}' does not exist`);if(s==="options")continue;const i=s,a=n.hooks[i],l=o[i];Pi.passThroughHooks.has(s)?o[i]=c=>{if(this.defaults.async)return Promise.resolve(a.call(o,c)).then(h=>l.call(o,h));const u=a.call(o,c);return l.call(o,u)}:o[i]=(...c)=>{let u=a.apply(o,c);return u===!1&&(u=l.apply(o,c)),u}}e.hooks=o}if(n.walkTokens){const o=this.defaults.walkTokens,s=n.walkTokens;e.walkTokens=function(i){let a=[];return a.push(s.call(this,i)),o&&(a=a.concat(o.call(this,i))),a}}this.defaults={...this.defaults,...e}}),this}setOptions(r){return this.defaults={...this.defaults,...r},this}lexer(r,t){return Cr.lex(r,t??this.defaults)}parser(r,t){return Sr.parse(r,t??this.defaults)}},Xr=new WeakSet,qw=function(r,t,n){switch(t){case"heading":return function(e){return e.type&&e.type===t?r.call(this,n.parser.parseInline(e.tokens),e.depth,function(o){return o.replace(oA,(s,i)=>(i=i.toLowerCase())==="colon"?":":i.charAt(0)==="#"?i.charAt(1)==="x"?String.fromCharCode(parseInt(i.substring(2),16)):String.fromCharCode(+i.substring(1)):"")}(n.parser.parseInline(e.tokens,n.parser.textRenderer))):r.apply(this,arguments)};case"code":return function(e){return e.type&&e.type===t?r.call(this,e.text,e.lang,!!e.escaped):r.apply(this,arguments)};case"table":return function(e){if(!e.type||e.type!==t)return r.apply(this,arguments);let o="",s="";for(let a=0;a<e.header.length;a++)s+=this.tablecell({text:e.header[a].text,tokens:e.header[a].tokens,header:!0,align:e.align[a]});o+=this.tablerow({text:s});let i="";for(let a=0;a<e.rows.length;a++){const l=e.rows[a];s="";for(let c=0;c<l.length;c++)s+=this.tablecell({text:l[c].text,tokens:l[c].tokens,header:!1,align:e.align[c]});i+=this.tablerow({text:s})}return r.call(this,o,i)};case"blockquote":return function(e){if(!e.type||e.type!==t)return r.apply(this,arguments);const o=this.parser.parse(e.tokens);return r.call(this,o)};case"list":return function(e){if(!e.type||e.type!==t)return r.apply(this,arguments);const o=e.ordered,s=e.start,i=e.loose;let a="";for(let l=0;l<e.items.length;l++){const c=e.items[l],u=c.checked,h=c.task;let d="";if(c.task){const p=this.checkbox({checked:!!u});i?c.tokens.length>0&&c.tokens[0].type==="paragraph"?(c.tokens[0].text=p+" "+c.tokens[0].text,c.tokens[0].tokens&&c.tokens[0].tokens.length>0&&c.tokens[0].tokens[0].type==="text"&&(c.tokens[0].tokens[0].text=p+" "+c.tokens[0].tokens[0].text)):c.tokens.unshift({type:"text",text:p+" "}):d+=p+" "}d+=this.parser.parse(c.tokens,i),a+=this.listitem({type:"list_item",raw:d,text:d,task:h,checked:!!u,loose:i,tokens:c.tokens})}return r.call(this,a,o,s)};case"html":return function(e){return e.type&&e.type===t?r.call(this,e.text,e.block):r.apply(this,arguments)};case"paragraph":case"strong":case"em":case"del":return function(e){return e.type&&e.type===t?r.call(this,this.parser.parseInline(e.tokens)):r.apply(this,arguments)};case"escape":case"codespan":case"text":return function(e){return e.type&&e.type===t?r.call(this,e.text):r.apply(this,arguments)};case"link":return function(e){return e.type&&e.type===t?r.call(this,e.href,e.title,this.parser.parseInline(e.tokens)):r.apply(this,arguments)};case"image":return function(e){return e.type&&e.type===t?r.call(this,e.href,e.title,e.text):r.apply(this,arguments)}}return r},Nh=function(r,t){return(n,e)=>{const o={...e},s={...this.defaults,...o};this.defaults.async===!0&&o.async===!1&&(s.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),s.async=!0);const i=xt(this,Xr,jw).call(this,!!s.silent,!!s.async);if(n==null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(s.hooks&&(s.hooks.options=s),s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(n):n).then(a=>r(a,s)).then(a=>s.hooks?s.hooks.processAllTokens(a):a).then(a=>s.walkTokens?Promise.all(this.walkTokens(a,s.walkTokens)).then(()=>a):a).then(a=>t(a,s)).then(a=>s.hooks?s.hooks.postprocess(a):a).catch(i);try{s.hooks&&(n=s.hooks.preprocess(n));let a=r(n,s);s.hooks&&(a=s.hooks.processAllTokens(a)),s.walkTokens&&this.walkTokens(a,s.walkTokens);let l=t(a,s);return s.hooks&&(l=s.hooks.postprocess(l)),l}catch(a){return i(a)}}},jw=function(r,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,r){const e="<p>An error occurred:</p><pre>"+Zn(n.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(n);throw n}},wy);function pe(r,t){return Bo.parse(r,t)}function Ww(r){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var e=Array.from(typeof r=="string"?[r]:r);e[e.length-1]=e[e.length-1].replace(/\r?\n([\t ]*)$/,"");var o=e.reduce(function(a,l){var c=l.match(/\n([\t ]+|(?!\s).)/g);return c?a.concat(c.map(function(u){var h,d;return(d=(h=u.match(/[\t ]/g))===null||h===void 0?void 0:h.length)!==null&&d!==void 0?d:0})):a},[]);if(o.length){var s=new RegExp(`
[	 ]{`+Math.min.apply(Math,o)+"}","g");e=e.map(function(a){return a.replace(s,`
`)})}e[0]=e[0].replace(/^\r?\n/,"");var i=e[0];return t.forEach(function(a,l){var c=i.match(/(?:^|\n)( *)$/),u=c?c[1]:"",h=a;typeof a=="string"&&a.includes(`
`)&&(h=String(a).split(`
`).map(function(d,p){return p===0?d:""+u+d}).join(`
`)),i+=h+e[l+1]}),i}function Hw(r,{markdownAutoWrap:t}){const n=Ww(r.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`));return t===!1?n.replace(/ /g,"&nbsp;"):n}function Vw(r,t={}){const n=Hw(r,t),e=pe.lexer(n),o=[[]];let s=0;function i(a,l="normal"){a.type==="text"?a.text.split(`
`).forEach((c,u)=>{u!==0&&(s++,o.push([])),c.split(" ").forEach(h=>{(h=h.replace(/&#39;/g,"'"))&&o[s].push({content:h,type:l})})}):a.type==="strong"||a.type==="em"?a.tokens.forEach(c=>{i(c,a.type)}):a.type==="html"&&o[s].push({content:a.text,type:"normal"})}return w(i,"processNode"),e.forEach(a=>{var l;a.type==="paragraph"?(l=a.tokens)==null||l.forEach(c=>{i(c)}):a.type==="html"&&o[s].push({content:a.text,type:"normal"})}),o}function Gw(r,{markdownAutoWrap:t}={}){const n=pe.lexer(r);function e(o){var s,i,a;return o.type==="text"?t===!1?o.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):o.text.replace(/\n */g,"<br/>"):o.type==="strong"?`<strong>${(s=o.tokens)==null?void 0:s.map(e).join("")}</strong>`:o.type==="em"?`<em>${(i=o.tokens)==null?void 0:i.map(e).join("")}</em>`:o.type==="paragraph"?`<p>${(a=o.tokens)==null?void 0:a.map(e).join("")}</p>`:o.type==="space"?"":o.type==="html"?`${o.text}`:o.type==="escape"?o.text:`Unsupported markdown: ${o.type}`}return w(e,"output"),n.map(e).join("")}function Zw(r){return Intl.Segmenter?[...new Intl.Segmenter().segment(r)].map(t=>t.segment):[...r]}function Yw(r,t){return ap(r,[],Zw(t.content),t.type)}function ap(r,t,n,e){if(n.length===0)return[{content:t.join(""),type:e},{content:"",type:e}];const[o,...s]=n,i=[...t,o];return r([{content:i.join(""),type:e}])?ap(r,i,s,e):(t.length===0&&o&&(t.push(o),n.shift()),[{content:t.join(""),type:e},{content:n.join(""),type:e}])}function Xw(r,t){if(r.some(({content:n})=>n.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return ic(r,t)}function ic(r,t,n=[],e=[]){if(r.length===0)return e.length>0&&n.push(e),n.length>0?n:[];let o="";r[0].content===" "&&(o=" ",r.shift());const s=r.shift()??{content:" ",type:"normal"},i=[...e];if(o!==""&&i.push({content:o,type:"normal"}),i.push(s),t(i))return ic(r,t,n,i);if(e.length>0)n.push(e),r.unshift(s);else if(s.content){const[a,l]=Yw(t,s);n.push([a]),l.content&&r.unshift(l)}return ic(r,t,n)}function Rh(r,t){t&&r.attr("style",t)}async function Qw(r,t,n,e,o=!1){const s=r.append("foreignObject");s.attr("width",10*n+"px"),s.attr("height",10*n+"px");const i=s.append("xhtml:div");let a=t.label;t.label&&Ns(t.label)&&(a=await _d(t.label.replace(Qs.lineBreakRegex,`
`),ge()));const l=t.isNode?"nodeLabel":"edgeLabel",c=i.append("span");c.html(a),Rh(c,t.labelStyle),c.attr("class",`${l} ${e}`),Rh(i,t.labelStyle),i.style("display","table-cell"),i.style("white-space","nowrap"),i.style("line-height","1.5"),i.style("max-width",n+"px"),i.style("text-align","center"),i.attr("xmlns","http://www.w3.org/1999/xhtml"),o&&i.attr("class","labelBkg");let u=i.node().getBoundingClientRect();return u.width===n&&(i.style("display","table"),i.style("white-space","break-spaces"),i.style("width",n+"px"),u=i.node().getBoundingClientRect()),s.node()}function zc(r,t,n){return r.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",t*n-.1+"em").attr("dy",n+"em")}function Kw(r,t,n){const e=r.append("text"),o=zc(e,1,t);Nc(o,n);const s=o.node().getComputedTextLength();return e.remove(),s}function vA(r,t,n){var i;const e=r.append("text"),o=zc(e,1,t);Nc(o,[{content:n,type:"normal"}]);const s=(i=o.node())==null?void 0:i.getBoundingClientRect();return s&&e.remove(),s}function Jw(r,t,n,e=!1){const o=t.append("g"),s=o.insert("rect").attr("class","background").attr("style","stroke: none"),i=o.append("text").attr("y","-10.1");let a=0;for(const l of n){const c=w(h=>Kw(o,1.1,h)<=r,"checkWidth"),u=c(l)?[l]:Xw(l,c);for(const h of u)Nc(zc(i,a,1.1),h),a++}if(e){const l=i.node().getBBox(),c=2;return s.attr("x",l.x-c).attr("y",l.y-c).attr("width",l.width+2*c).attr("height",l.height+2*c),o.node()}return i.node()}function Nc(r,t){r.text(""),t.forEach((n,e)=>{const o=r.append("tspan").attr("font-style",n.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",n.type==="strong"?"bold":"normal");e===0?o.text(n.content):o.text(" "+n.content)})}function tv(r){return r.replace(/fa[bklrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`)}pe.options=pe.setOptions=function(r){return Bo.setOptions(r),pe.defaults=Bo.defaults,h0(pe.defaults),pe},pe.getDefaults=tA,pe.defaults=ns,pe.use=function(...r){return Bo.use(...r),pe.defaults=Bo.defaults,h0(pe.defaults),pe},pe.walkTokens=function(r,t){return Bo.walkTokens(r,t)},pe.parseInline=Bo.parseInline,pe.Parser=Sr,pe.parser=Sr.parse,pe.Renderer=sc,pe.TextRenderer=ip,pe.Lexer=Cr,pe.lexer=Cr.lex,pe.Tokenizer=rc,pe.Hooks=Pi,pe.parse=pe,pe.options,pe.setOptions,pe.use,pe.walkTokens,pe.parseInline,Sr.parse,Cr.lex,w(Hw,"preprocessMarkdown"),w(Vw,"markdownToLines"),w(Gw,"markdownToHTML"),w(Zw,"splitTextToChars"),w(Yw,"splitWordToFitWidth"),w(ap,"splitWordToFitWidthRecursion"),w(Xw,"splitLineToFitWidth"),w(ic,"splitLineToFitWidthRecursion"),w(Rh,"applyStyle"),w(Qw,"addHtmlSpan"),w(zc,"createTspan"),w(Kw,"computeWidthOfText"),w(vA,"computeDimensionOfText"),w(Jw,"createFormattedText"),w(Nc,"updateTextContentAndStyles"),w(tv,"replaceIconSubstring");var ti=w(async(r,t="",{style:n="",isTitle:e=!1,classes:o="",useHtmlLabels:s=!0,isNode:i=!0,width:a=200,addSvgBackground:l=!1}={},c)=>{if(it.debug("XYZ createText",t,n,e,o,s,i,"addSvgBackground: ",l),s){const u=Gw(t,c),h=tv(Js(u)),d=t.replace(/\\\\/g,"\\"),p={isNode:i,label:Ns(t)?d:h,labelStyle:n.replace("fill:","color:")};return await Qw(r,p,a,o,l)}{const u=Jw(a,r,Vw(t.replace(/<br\s*\/?>/g,"<br/>").replace("<br>","<br/>"),c),!!t&&l);if(i){/stroke:/.exec(n)&&(n=n.replace("stroke:","lineColor:"));const h=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");fe(u).attr("style",h)}else{const h=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");fe(u).select("rect").attr("style",h.replace(/background:/g,"fill:"));const d=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");fe(u).select("text").attr("style",d)}return u}},"createText");function Mu(r,t,n){if(r&&r.length){const[e,o]=t,s=Math.PI/180*n,i=Math.cos(s),a=Math.sin(s);for(const l of r){const[c,u]=l;l[0]=(c-e)*i-(u-o)*a+e,l[1]=(c-e)*a+(u-o)*i+o}}}function _A(r,t){return r[0]===t[0]&&r[1]===t[1]}function kA(r,t,n,e=1){const o=n,s=Math.max(t,.1),i=r[0]&&r[0][0]&&typeof r[0][0]=="number"?[r]:r,a=[0,0];if(o)for(const c of i)Mu(c,a,o);const l=function(c,u,h){const d=[];for(const x of c){const M=[...x];_A(M[0],M[M.length-1])||M.push([M[0][0],M[0][1]]),M.length>2&&d.push(M)}const p=[];u=Math.max(u,.1);const g=[];for(const x of d)for(let M=0;M<x.length-1;M++){const L=x[M],A=x[M+1];if(L[1]!==A[1]){const B=Math.min(L[1],A[1]);g.push({ymin:B,ymax:Math.max(L[1],A[1]),x:B===L[1]?L[0]:A[0],islope:(A[0]-L[0])/(A[1]-L[1])})}}if(g.sort((x,M)=>x.ymin<M.ymin?-1:x.ymin>M.ymin?1:x.x<M.x?-1:x.x>M.x?1:x.ymax===M.ymax?0:(x.ymax-M.ymax)/Math.abs(x.ymax-M.ymax)),!g.length)return p;let $=[],b=g[0].ymin,y=0;for(;$.length||g.length;){if(g.length){let x=-1;for(let M=0;M<g.length&&!(g[M].ymin>b);M++)x=M;g.splice(0,x+1).forEach(M=>{$.push({s:b,edge:M})})}if($=$.filter(x=>!(x.edge.ymax<=b)),$.sort((x,M)=>x.edge.x===M.edge.x?0:(x.edge.x-M.edge.x)/Math.abs(x.edge.x-M.edge.x)),(h!==1||y%u==0)&&$.length>1)for(let x=0;x<$.length;x+=2){const M=x+1;if(M>=$.length)break;const L=$[x].edge,A=$[M].edge;p.push([[Math.round(L.x),b],[Math.round(A.x),b]])}b+=h,$.forEach(x=>{x.edge.x=x.edge.x+h*x.edge.islope}),y++}return p}(i,s,e);if(o){for(const c of i)Mu(c,a,-o);(function(c,u,h){const d=[];c.forEach(p=>d.push(...p)),Mu(d,u,h)})(l,a,-o)}return l}function $a(r,t){var n;const e=t.hachureAngle+90;let o=t.hachureGap;o<0&&(o=4*t.strokeWidth),o=Math.round(Math.max(o,.1));let s=1;return t.roughness>=1&&(((n=t.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(s=o),kA(r,o,e,s||1)}class lp{constructor(t){this.helper=t}fillPolygons(t,n){return this._fillPolygons(t,n)}_fillPolygons(t,n){const e=$a(t,n);return{type:"fillSketch",ops:this.renderLines(e,n)}}renderLines(t,n){const e=[];for(const o of t)e.push(...this.helper.doubleLineOps(o[0][0],o[0][1],o[1][0],o[1][1],n));return e}}function Rc(r){const t=r[0],n=r[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class CA extends lp{fillPolygons(t,n){let e=n.hachureGap;e<0&&(e=4*n.strokeWidth),e=Math.max(e,.1);const o=$a(t,Object.assign({},n,{hachureGap:e})),s=Math.PI/180*n.hachureAngle,i=[],a=.5*e*Math.cos(s),l=.5*e*Math.sin(s);for(const[c,u]of o)Rc([c,u])&&i.push([[c[0]-a,c[1]+l],[...u]],[[c[0]+a,c[1]-l],[...u]]);return{type:"fillSketch",ops:this.renderLines(i,n)}}}class SA extends lp{fillPolygons(t,n){const e=this._fillPolygons(t,n),o=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),s=this._fillPolygons(t,o);return e.ops=e.ops.concat(s.ops),e}}class TA{constructor(t){this.helper=t}fillPolygons(t,n){const e=$a(t,n=Object.assign({},n,{hachureAngle:0}));return this.dotsOnLines(e,n)}dotsOnLines(t,n){const e=[];let o=n.hachureGap;o<0&&(o=4*n.strokeWidth),o=Math.max(o,.1);let s=n.fillWeight;s<0&&(s=n.strokeWidth/2);const i=o/4;for(const a of t){const l=Rc(a),c=l/o,u=Math.ceil(c)-1,h=l-u*o,d=(a[0][0]+a[1][0])/2-o/4,p=Math.min(a[0][1],a[1][1]);for(let g=0;g<u;g++){const $=p+h+g*o,b=d-i+2*Math.random()*i,y=$-i+2*Math.random()*i,x=this.helper.ellipse(b,y,s,s,n);e.push(...x.ops)}}return{type:"fillSketch",ops:e}}}class MA{constructor(t){this.helper=t}fillPolygons(t,n){const e=$a(t,n);return{type:"fillSketch",ops:this.dashedLine(e,n)}}dashedLine(t,n){const e=n.dashOffset<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashOffset,o=n.dashGap<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashGap,s=[];return t.forEach(i=>{const a=Rc(i),l=Math.floor(a/(e+o)),c=(a+o-l*(e+o))/2;let u=i[0],h=i[1];u[0]>h[0]&&(u=i[1],h=i[0]);const d=Math.atan((h[1]-u[1])/(h[0]-u[0]));for(let p=0;p<l;p++){const g=p*(e+o),$=g+e,b=[u[0]+g*Math.cos(d)+c*Math.cos(d),u[1]+g*Math.sin(d)+c*Math.sin(d)],y=[u[0]+$*Math.cos(d)+c*Math.cos(d),u[1]+$*Math.sin(d)+c*Math.sin(d)];s.push(...this.helper.doubleLineOps(b[0],b[1],y[0],y[1],n))}}),s}}class AA{constructor(t){this.helper=t}fillPolygons(t,n){const e=n.hachureGap<0?4*n.strokeWidth:n.hachureGap,o=n.zigzagOffset<0?e:n.zigzagOffset,s=$a(t,n=Object.assign({},n,{hachureGap:e+o}));return{type:"fillSketch",ops:this.zigzagLines(s,o,n)}}zigzagLines(t,n,e){const o=[];return t.forEach(s=>{const i=Rc(s),a=Math.round(i/(2*n));let l=s[0],c=s[1];l[0]>c[0]&&(l=s[1],c=s[0]);const u=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let h=0;h<a;h++){const d=2*h*n,p=2*(h+1)*n,g=Math.sqrt(2*Math.pow(n,2)),$=[l[0]+d*Math.cos(u),l[1]+d*Math.sin(u)],b=[l[0]+p*Math.cos(u),l[1]+p*Math.sin(u)],y=[$[0]+g*Math.cos(u+Math.PI/4),$[1]+g*Math.sin(u+Math.PI/4)];o.push(...this.helper.doubleLineOps($[0],$[1],y[0],y[1],e),...this.helper.doubleLineOps(y[0],y[1],b[0],b[1],e))}}),o}}const Fn={};class LA{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const EA=0,Au=1,b0=2,qa={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function Lu(r,t){return r.type===t}function cp(r){const t=[],n=function(i){const a=new Array;for(;i!=="";)if(i.match(/^([ \t\r\n,]+)/))i=i.substr(RegExp.$1.length);else if(i.match(/^([aAcChHlLmMqQsStTvVzZ])/))a[a.length]={type:EA,text:RegExp.$1},i=i.substr(RegExp.$1.length);else{if(!i.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];a[a.length]={type:Au,text:`${parseFloat(RegExp.$1)}`},i=i.substr(RegExp.$1.length)}return a[a.length]={type:b0,text:""},a}(r);let e="BOD",o=0,s=n[o];for(;!Lu(s,b0);){let i=0;const a=[];if(e==="BOD"){if(s.text!=="M"&&s.text!=="m")return cp("M0,0"+r);o++,i=qa[s.text],e=s.text}else Lu(s,Au)?i=qa[e]:(o++,i=qa[s.text],e=s.text);if(!(o+i<n.length))throw new Error("Path data ended short");for(let l=o;l<o+i;l++){const c=n[l];if(!Lu(c,Au))throw new Error("Param not a number: "+e+","+c.text);a[a.length]=+c.text}if(typeof qa[e]!="number")throw new Error("Bad segment: "+e);{const l={key:e,data:a};t.push(l),o+=i,s=n[o],e==="M"&&(e="L"),e==="m"&&(e="l")}}return t}function ev(r){let t=0,n=0,e=0,o=0;const s=[];for(const{key:i,data:a}of r)switch(i){case"M":s.push({key:"M",data:[...a]}),[t,n]=a,[e,o]=a;break;case"m":t+=a[0],n+=a[1],s.push({key:"M",data:[t,n]}),e=t,o=n;break;case"L":s.push({key:"L",data:[...a]}),[t,n]=a;break;case"l":t+=a[0],n+=a[1],s.push({key:"L",data:[t,n]});break;case"C":s.push({key:"C",data:[...a]}),t=a[4],n=a[5];break;case"c":{const l=a.map((c,u)=>u%2?c+n:c+t);s.push({key:"C",data:l}),t=l[4],n=l[5];break}case"Q":s.push({key:"Q",data:[...a]}),t=a[2],n=a[3];break;case"q":{const l=a.map((c,u)=>u%2?c+n:c+t);s.push({key:"Q",data:l}),t=l[2],n=l[3];break}case"A":s.push({key:"A",data:[...a]}),t=a[5],n=a[6];break;case"a":t+=a[5],n+=a[6],s.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],t,n]});break;case"H":s.push({key:"H",data:[...a]}),t=a[0];break;case"h":t+=a[0],s.push({key:"H",data:[t]});break;case"V":s.push({key:"V",data:[...a]}),n=a[0];break;case"v":n+=a[0],s.push({key:"V",data:[n]});break;case"S":s.push({key:"S",data:[...a]}),t=a[2],n=a[3];break;case"s":{const l=a.map((c,u)=>u%2?c+n:c+t);s.push({key:"S",data:l}),t=l[2],n=l[3];break}case"T":s.push({key:"T",data:[...a]}),t=a[0],n=a[1];break;case"t":t+=a[0],n+=a[1],s.push({key:"T",data:[t,n]});break;case"Z":case"z":s.push({key:"Z",data:[]}),t=e,n=o}return s}function nv(r){const t=[];let n="",e=0,o=0,s=0,i=0,a=0,l=0;for(const{key:c,data:u}of r){switch(c){case"M":t.push({key:"M",data:[...u]}),[e,o]=u,[s,i]=u;break;case"C":t.push({key:"C",data:[...u]}),e=u[4],o=u[5],a=u[2],l=u[3];break;case"L":t.push({key:"L",data:[...u]}),[e,o]=u;break;case"H":e=u[0],t.push({key:"L",data:[e,o]});break;case"V":o=u[0],t.push({key:"L",data:[e,o]});break;case"S":{let h=0,d=0;n==="C"||n==="S"?(h=e+(e-a),d=o+(o-l)):(h=e,d=o),t.push({key:"C",data:[h,d,...u]}),a=u[0],l=u[1],e=u[2],o=u[3];break}case"T":{const[h,d]=u;let p=0,g=0;n==="Q"||n==="T"?(p=e+(e-a),g=o+(o-l)):(p=e,g=o);const $=e+2*(p-e)/3,b=o+2*(g-o)/3,y=h+2*(p-h)/3,x=d+2*(g-d)/3;t.push({key:"C",data:[$,b,y,x,h,d]}),a=p,l=g,e=h,o=d;break}case"Q":{const[h,d,p,g]=u,$=e+2*(h-e)/3,b=o+2*(d-o)/3,y=p+2*(h-p)/3,x=g+2*(d-g)/3;t.push({key:"C",data:[$,b,y,x,p,g]}),a=h,l=d,e=p,o=g;break}case"A":{const h=Math.abs(u[0]),d=Math.abs(u[1]),p=u[2],g=u[3],$=u[4],b=u[5],y=u[6];h===0||d===0?(t.push({key:"C",data:[e,o,b,y,b,y]}),e=b,o=y):e===b&&o===y||(rv(e,o,b,y,h,d,p,g,$).forEach(function(x){t.push({key:"C",data:x})}),e=b,o=y);break}case"Z":t.push({key:"Z",data:[]}),e=s,o=i}n=c}return t}function xi(r,t,n){return[r*Math.cos(n)-t*Math.sin(n),r*Math.sin(n)+t*Math.cos(n)]}function rv(r,t,n,e,o,s,i,a,l,c){const u=(h=i,Math.PI*h/180);var h;let d=[],p=0,g=0,$=0,b=0;if(c)[p,g,$,b]=c;else{[r,t]=xi(r,t,-u),[n,e]=xi(n,e,-u);const R=(r-n)/2,j=(t-e)/2;let Q=R*R/(o*o)+j*j/(s*s);Q>1&&(Q=Math.sqrt(Q),o*=Q,s*=Q);const z=o*o,G=s*s,K=z*G-z*j*j-G*R*R,et=z*j*j+G*R*R,ct=(a===l?-1:1)*Math.sqrt(Math.abs(K/et));$=ct*o*j/s+(r+n)/2,b=ct*-s*R/o+(t+e)/2,p=Math.asin(parseFloat(((t-b)/s).toFixed(9))),g=Math.asin(parseFloat(((e-b)/s).toFixed(9))),r<$&&(p=Math.PI-p),n<$&&(g=Math.PI-g),p<0&&(p=2*Math.PI+p),g<0&&(g=2*Math.PI+g),l&&p>g&&(p-=2*Math.PI),!l&&g>p&&(g-=2*Math.PI)}let y=g-p;if(Math.abs(y)>120*Math.PI/180){const R=g,j=n,Q=e;g=l&&g>p?p+120*Math.PI/180*1:p+120*Math.PI/180*-1,d=rv(n=$+o*Math.cos(g),e=b+s*Math.sin(g),j,Q,o,s,i,0,l,[g,R,$,b])}y=g-p;const x=Math.cos(p),M=Math.sin(p),L=Math.cos(g),A=Math.sin(g),B=Math.tan(y/4),E=4/3*o*B,F=4/3*s*B,U=[r,t],tt=[r+E*M,t-F*x],q=[n+E*A,e-F*L],N=[n,e];if(tt[0]=2*U[0]-tt[0],tt[1]=2*U[1]-tt[1],c)return[tt,q,N].concat(d);{d=[tt,q,N].concat(d);const R=[];for(let j=0;j<d.length;j+=3){const Q=xi(d[j][0],d[j][1],u),z=xi(d[j+1][0],d[j+1][1],u),G=xi(d[j+2][0],d[j+2][1],u);R.push([Q[0],Q[1],z[0],z[1],G[0],G[1]])}return R}}const BA={randOffset:function(r,t){return Et(r,t)},randOffsetWithRange:function(r,t,n){return ac(r,t,n)},ellipse:function(r,t,n,e,o){return Ph(r,t,o,sv(n,e,o)).opset},doubleLineOps:function(r,t,n,e,o){return vo(r,t,n,e,o,!0)}};function ov(r,t,n,e,o){return{type:"path",ops:vo(r,t,n,e,o)}}function ja(r,t,n){const e=(r||[]).length;if(e>2){const o=[];for(let s=0;s<e-1;s++)o.push(...vo(r[s][0],r[s][1],r[s+1][0],r[s+1][1],n));return t&&o.push(...vo(r[e-1][0],r[e-1][1],r[0][0],r[0][1],n)),{type:"path",ops:o}}return e===2?ov(r[0][0],r[0][1],r[1][0],r[1][1],n):{type:"path",ops:[]}}function w0(r,t){if(r.length){const n=typeof r[0][0]=="number"?[r]:r,e=Wa(n[0],1*(1+.2*t.roughness),t),o=t.disableMultiStroke?[]:Wa(n[0],1.5*(1+.22*t.roughness),k0(t));for(let s=1;s<n.length;s++){const i=n[s];if(i.length){const a=Wa(i,1*(1+.2*t.roughness),t),l=t.disableMultiStroke?[]:Wa(i,1.5*(1+.22*t.roughness),k0(t));for(const c of a)c.op!=="move"&&e.push(c);for(const c of l)c.op!=="move"&&o.push(c)}}return{type:"path",ops:e.concat(o)}}return{type:"path",ops:[]}}function sv(r,t,n){const e=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(r/2,2)+Math.pow(t/2,2))/2)),o=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*e)),s=2*Math.PI/o;let i=Math.abs(r/2),a=Math.abs(t/2);const l=1-n.curveFitting;return i+=Et(i*l,n),a+=Et(a*l,n),{increment:s,rx:i,ry:a}}function Ph(r,t,n,e){const[o,s]=C0(e.increment,r,t,e.rx,e.ry,1,e.increment*ac(.1,ac(.4,1,n),n),n);let i=lc(o,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[a]=C0(e.increment,r,t,e.rx,e.ry,1.5,0,n),l=lc(a,null,n);i=i.concat(l)}return{estimatedPoints:s,opset:{type:"path",ops:i}}}function v0(r,t,n,e,o,s,i,a,l){const c=r,u=t;let h=Math.abs(n/2),d=Math.abs(e/2);h+=Et(.01*h,l),d+=Et(.01*d,l);let p=o,g=s;for(;p<0;)p+=2*Math.PI,g+=2*Math.PI;g-p>2*Math.PI&&(p=0,g=2*Math.PI);const $=2*Math.PI/l.curveStepCount,b=Math.min($/2,(g-p)/2),y=S0(b,c,u,h,d,p,g,1,l);if(!l.disableMultiStroke){const x=S0(b,c,u,h,d,p,g,1.5,l);y.push(...x)}return i&&(a?y.push(...vo(c,u,c+h*Math.cos(p),u+d*Math.sin(p),l),...vo(c,u,c+h*Math.cos(g),u+d*Math.sin(g),l)):y.push({op:"lineTo",data:[c,u]},{op:"lineTo",data:[c+h*Math.cos(p),u+d*Math.sin(p)]})),{type:"path",ops:y}}function _0(r,t){const n=nv(ev(cp(r))),e=[];let o=[0,0],s=[0,0];for(const{key:i,data:a}of n)switch(i){case"M":s=[a[0],a[1]],o=[a[0],a[1]];break;case"L":e.push(...vo(s[0],s[1],a[0],a[1],t)),s=[a[0],a[1]];break;case"C":{const[l,c,u,h,d,p]=a;e.push(...IA(l,c,u,h,d,p,s,t)),s=[d,p];break}case"Z":e.push(...vo(s[0],s[1],o[0],o[1],t)),s=[o[0],o[1]]}return{type:"path",ops:e}}function Eu(r,t){const n=[];for(const e of r)if(e.length){const o=t.maxRandomnessOffset||0,s=e.length;if(s>2){n.push({op:"move",data:[e[0][0]+Et(o,t),e[0][1]+Et(o,t)]});for(let i=1;i<s;i++)n.push({op:"lineTo",data:[e[i][0]+Et(o,t),e[i][1]+Et(o,t)]})}}return{type:"fillPath",ops:n}}function hs(r,t){return function(n,e){let o=n.fillStyle||"hachure";if(!Fn[o])switch(o){case"zigzag":Fn[o]||(Fn[o]=new CA(e));break;case"cross-hatch":Fn[o]||(Fn[o]=new SA(e));break;case"dots":Fn[o]||(Fn[o]=new TA(e));break;case"dashed":Fn[o]||(Fn[o]=new MA(e));break;case"zigzag-line":Fn[o]||(Fn[o]=new AA(e));break;default:o="hachure",Fn[o]||(Fn[o]=new lp(e))}return Fn[o]}(t,BA).fillPolygons(r,t)}function k0(r){const t=Object.assign({},r);return t.randomizer=void 0,r.seed&&(t.seed=r.seed+1),t}function iv(r){return r.randomizer||(r.randomizer=new LA(r.seed||0)),r.randomizer.next()}function ac(r,t,n,e=1){return n.roughness*e*(iv(n)*(t-r)+r)}function Et(r,t,n=1){return ac(-r,r,t,n)}function vo(r,t,n,e,o,s=!1){const i=s?o.disableMultiStrokeFill:o.disableMultiStroke,a=Uh(r,t,n,e,o,!0,!1);if(i)return a;const l=Uh(r,t,n,e,o,!0,!0);return a.concat(l)}function Uh(r,t,n,e,o,s,i){const a=Math.pow(r-n,2)+Math.pow(t-e,2),l=Math.sqrt(a);let c=1;c=l<200?1:l>500?.4:-.0016668*l+1.233334;let u=o.maxRandomnessOffset||0;u*u*100>a&&(u=l/10);const h=u/2,d=.2+.2*iv(o);let p=o.bowing*o.maxRandomnessOffset*(e-t)/200,g=o.bowing*o.maxRandomnessOffset*(r-n)/200;p=Et(p,o,c),g=Et(g,o,c);const $=[],b=()=>Et(h,o,c),y=()=>Et(u,o,c),x=o.preserveVertices;return i?$.push({op:"move",data:[r+(x?0:b()),t+(x?0:b())]}):$.push({op:"move",data:[r+(x?0:Et(u,o,c)),t+(x?0:Et(u,o,c))]}),i?$.push({op:"bcurveTo",data:[p+r+(n-r)*d+b(),g+t+(e-t)*d+b(),p+r+2*(n-r)*d+b(),g+t+2*(e-t)*d+b(),n+(x?0:b()),e+(x?0:b())]}):$.push({op:"bcurveTo",data:[p+r+(n-r)*d+y(),g+t+(e-t)*d+y(),p+r+2*(n-r)*d+y(),g+t+2*(e-t)*d+y(),n+(x?0:y()),e+(x?0:y())]}),$}function Wa(r,t,n){if(!r.length)return[];const e=[];e.push([r[0][0]+Et(t,n),r[0][1]+Et(t,n)]),e.push([r[0][0]+Et(t,n),r[0][1]+Et(t,n)]);for(let o=1;o<r.length;o++)e.push([r[o][0]+Et(t,n),r[o][1]+Et(t,n)]),o===r.length-1&&e.push([r[o][0]+Et(t,n),r[o][1]+Et(t,n)]);return lc(e,null,n)}function lc(r,t,n){const e=r.length,o=[];if(e>3){const s=[],i=1-n.curveTightness;o.push({op:"move",data:[r[1][0],r[1][1]]});for(let a=1;a+2<e;a++){const l=r[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(i*r[a+1][0]-i*r[a-1][0])/6,l[1]+(i*r[a+1][1]-i*r[a-1][1])/6],s[2]=[r[a+1][0]+(i*r[a][0]-i*r[a+2][0])/6,r[a+1][1]+(i*r[a][1]-i*r[a+2][1])/6],s[3]=[r[a+1][0],r[a+1][1]],o.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else e===3?(o.push({op:"move",data:[r[1][0],r[1][1]]}),o.push({op:"bcurveTo",data:[r[1][0],r[1][1],r[2][0],r[2][1],r[2][0],r[2][1]]})):e===2&&o.push(...Uh(r[0][0],r[0][1],r[1][0],r[1][1],n,0,!0));return o}function C0(r,t,n,e,o,s,i,a){const l=[],c=[];if(a.roughness===0){r/=4,c.push([t+e*Math.cos(-r),n+o*Math.sin(-r)]);for(let u=0;u<=2*Math.PI;u+=r){const h=[t+e*Math.cos(u),n+o*Math.sin(u)];l.push(h),c.push(h)}c.push([t+e*Math.cos(0),n+o*Math.sin(0)]),c.push([t+e*Math.cos(r),n+o*Math.sin(r)])}else{const u=Et(.5,a)-Math.PI/2;c.push([Et(s,a)+t+.9*e*Math.cos(u-r),Et(s,a)+n+.9*o*Math.sin(u-r)]);const h=2*Math.PI+u-.01;for(let d=u;d<h;d+=r){const p=[Et(s,a)+t+e*Math.cos(d),Et(s,a)+n+o*Math.sin(d)];l.push(p),c.push(p)}c.push([Et(s,a)+t+e*Math.cos(u+2*Math.PI+.5*i),Et(s,a)+n+o*Math.sin(u+2*Math.PI+.5*i)]),c.push([Et(s,a)+t+.98*e*Math.cos(u+i),Et(s,a)+n+.98*o*Math.sin(u+i)]),c.push([Et(s,a)+t+.9*e*Math.cos(u+.5*i),Et(s,a)+n+.9*o*Math.sin(u+.5*i)])}return[c,l]}function S0(r,t,n,e,o,s,i,a,l){const c=s+Et(.1,l),u=[];u.push([Et(a,l)+t+.9*e*Math.cos(c-r),Et(a,l)+n+.9*o*Math.sin(c-r)]);for(let h=c;h<=i;h+=r)u.push([Et(a,l)+t+e*Math.cos(h),Et(a,l)+n+o*Math.sin(h)]);return u.push([t+e*Math.cos(i),n+o*Math.sin(i)]),u.push([t+e*Math.cos(i),n+o*Math.sin(i)]),lc(u,0,l)}function IA(r,t,n,e,o,s,i,a){const l=[],c=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let u=[0,0];const h=a.disableMultiStroke?1:2,d=a.preserveVertices;for(let p=0;p<h;p++)p===0?l.push({op:"move",data:[i[0],i[1]]}):l.push({op:"move",data:[i[0]+(d?0:Et(c[0],a)),i[1]+(d?0:Et(c[0],a))]}),u=d?[o,s]:[o+Et(c[p],a),s+Et(c[p],a)],l.push({op:"bcurveTo",data:[r+Et(c[p],a),t+Et(c[p],a),n+Et(c[p],a),e+Et(c[p],a),u[0],u[1]]});return l}function bi(r){return[...r]}function T0(r,t=0){const n=r.length;if(n<3)throw new Error("A curve must have at least three points.");const e=[];if(n===3)e.push(bi(r[0]),bi(r[1]),bi(r[2]),bi(r[2]));else{const o=[];o.push(r[0],r[0]);for(let a=1;a<r.length;a++)o.push(r[a]),a===r.length-1&&o.push(r[a]);const s=[],i=1-t;e.push(bi(o[0]));for(let a=1;a+2<o.length;a++){const l=o[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(i*o[a+1][0]-i*o[a-1][0])/6,l[1]+(i*o[a+1][1]-i*o[a-1][1])/6],s[2]=[o[a+1][0]+(i*o[a][0]-i*o[a+2][0])/6,o[a+1][1]+(i*o[a][1]-i*o[a+2][1])/6],s[3]=[o[a+1][0],o[a+1][1]],e.push(s[1],s[2],s[3])}}return e}function hl(r,t){return Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2)}function FA(r,t,n){const e=hl(t,n);if(e===0)return hl(r,t);let o=((r[0]-t[0])*(n[0]-t[0])+(r[1]-t[1])*(n[1]-t[1]))/e;return o=Math.max(0,Math.min(1,o)),hl(r,Io(t,n,o))}function Io(r,t,n){return[r[0]+(t[0]-r[0])*n,r[1]+(t[1]-r[1])*n]}function qh(r,t,n,e){const o=e||[];if(function(a,l){const c=a[l+0],u=a[l+1],h=a[l+2],d=a[l+3];let p=3*u[0]-2*c[0]-d[0];p*=p;let g=3*u[1]-2*c[1]-d[1];g*=g;let $=3*h[0]-2*d[0]-c[0];$*=$;let b=3*h[1]-2*d[1]-c[1];return b*=b,p<$&&(p=$),g<b&&(g=b),p+g}(r,t)<n){const a=r[t+0];o.length?(s=o[o.length-1],i=a,Math.sqrt(hl(s,i))>1&&o.push(a)):o.push(a),o.push(r[t+3])}else{const l=r[t+0],c=r[t+1],u=r[t+2],h=r[t+3],d=Io(l,c,.5),p=Io(c,u,.5),g=Io(u,h,.5),$=Io(d,p,.5),b=Io(p,g,.5),y=Io($,b,.5);qh([l,d,$,y],0,n,o),qh([y,b,g,h],0,n,o)}var s,i;return o}function DA(r,t){return cc(r,0,r.length,t)}function cc(r,t,n,e,o){const s=o||[],i=r[t],a=r[n-1];let l=0,c=1;for(let u=t+1;u<n-1;++u){const h=FA(r[u],i,a);h>l&&(l=h,c=u)}return Math.sqrt(l)>e?(cc(r,t,c+1,e,s),cc(r,c,n,e,s)):(s.length||s.push(i),s.push(a)),s}function Bu(r,t=.15,n){const e=[],o=(r.length-1)/3;for(let s=0;s<o;s++)qh(r,3*s,t,e);return n&&n>0?cc(e,0,e.length,n):e}const Un="none";class uc{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,n,e){return{shape:t,sets:n||[],options:e||this.defaultOptions}}line(t,n,e,o,s){const i=this._o(s);return this._d("line",[ov(t,n,e,o,i)],i)}rectangle(t,n,e,o,s){const i=this._o(s),a=[],l=function(c,u,h,d,p){return function(g,$){return ja(g,!0,$)}([[c,u],[c+h,u],[c+h,u+d],[c,u+d]],p)}(t,n,e,o,i);if(i.fill){const c=[[t,n],[t+e,n],[t+e,n+o],[t,n+o]];i.fillStyle==="solid"?a.push(Eu([c],i)):a.push(hs([c],i))}return i.stroke!==Un&&a.push(l),this._d("rectangle",a,i)}ellipse(t,n,e,o,s){const i=this._o(s),a=[],l=sv(e,o,i),c=Ph(t,n,i,l);if(i.fill)if(i.fillStyle==="solid"){const u=Ph(t,n,i,l).opset;u.type="fillPath",a.push(u)}else a.push(hs([c.estimatedPoints],i));return i.stroke!==Un&&a.push(c.opset),this._d("ellipse",a,i)}circle(t,n,e,o){const s=this.ellipse(t,n,e,e,o);return s.shape="circle",s}linearPath(t,n){const e=this._o(n);return this._d("linearPath",[ja(t,!1,e)],e)}arc(t,n,e,o,s,i,a=!1,l){const c=this._o(l),u=[],h=v0(t,n,e,o,s,i,a,!0,c);if(a&&c.fill)if(c.fillStyle==="solid"){const d=Object.assign({},c);d.disableMultiStroke=!0;const p=v0(t,n,e,o,s,i,!0,!1,d);p.type="fillPath",u.push(p)}else u.push(function(d,p,g,$,b,y,x){const M=d,L=p;let A=Math.abs(g/2),B=Math.abs($/2);A+=Et(.01*A,x),B+=Et(.01*B,x);let E=b,F=y;for(;E<0;)E+=2*Math.PI,F+=2*Math.PI;F-E>2*Math.PI&&(E=0,F=2*Math.PI);const U=(F-E)/x.curveStepCount,tt=[];for(let q=E;q<=F;q+=U)tt.push([M+A*Math.cos(q),L+B*Math.sin(q)]);return tt.push([M+A*Math.cos(F),L+B*Math.sin(F)]),tt.push([M,L]),hs([tt],x)}(t,n,e,o,s,i,c));return c.stroke!==Un&&u.push(h),this._d("arc",u,c)}curve(t,n){const e=this._o(n),o=[],s=w0(t,e);if(e.fill&&e.fill!==Un)if(e.fillStyle==="solid"){const i=w0(t,Object.assign(Object.assign({},e),{disableMultiStroke:!0,roughness:e.roughness?e.roughness+e.fillShapeRoughnessGain:0}));o.push({type:"fillPath",ops:this._mergedShape(i.ops)})}else{const i=[],a=t;if(a.length){const l=typeof a[0][0]=="number"?[a]:a;for(const c of l)c.length<3?i.push(...c):c.length===3?i.push(...Bu(T0([c[0],c[0],c[1],c[2]]),10,(1+e.roughness)/2)):i.push(...Bu(T0(c),10,(1+e.roughness)/2))}i.length&&o.push(hs([i],e))}return e.stroke!==Un&&o.push(s),this._d("curve",o,e)}polygon(t,n){const e=this._o(n),o=[],s=ja(t,!0,e);return e.fill&&(e.fillStyle==="solid"?o.push(Eu([t],e)):o.push(hs([t],e))),e.stroke!==Un&&o.push(s),this._d("polygon",o,e)}path(t,n){const e=this._o(n),o=[];if(!t)return this._d("path",o,e);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=e.fill&&e.fill!=="transparent"&&e.fill!==Un,i=e.stroke!==Un,a=!!(e.simplification&&e.simplification<1),l=function(u,h,d){const p=nv(ev(cp(u))),g=[];let $=[],b=[0,0],y=[];const x=()=>{y.length>=4&&$.push(...Bu(y,1)),y=[]},M=()=>{x(),$.length&&(g.push($),$=[])};for(const{key:A,data:B}of p)switch(A){case"M":M(),b=[B[0],B[1]],$.push(b);break;case"L":x(),$.push([B[0],B[1]]);break;case"C":if(!y.length){const E=$.length?$[$.length-1]:b;y.push([E[0],E[1]])}y.push([B[0],B[1]]),y.push([B[2],B[3]]),y.push([B[4],B[5]]);break;case"Z":x(),$.push([b[0],b[1]])}if(M(),!d)return g;const L=[];for(const A of g){const B=DA(A,d);B.length&&L.push(B)}return L}(t,0,a?4-4*(e.simplification||1):(1+e.roughness)/2),c=_0(t,e);if(s)if(e.fillStyle==="solid")if(l.length===1){const u=_0(t,Object.assign(Object.assign({},e),{disableMultiStroke:!0,roughness:e.roughness?e.roughness+e.fillShapeRoughnessGain:0}));o.push({type:"fillPath",ops:this._mergedShape(u.ops)})}else o.push(Eu(l,e));else o.push(hs(l,e));return i&&(a?l.forEach(u=>{o.push(ja(u,!1,e))}):o.push(c)),this._d("path",o,e)}opsToPath(t,n){let e="";for(const o of t.ops){const s=typeof n=="number"&&n>=0?o.data.map(i=>+i.toFixed(n)):o.data;switch(o.op){case"move":e+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":e+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":e+=`L${s[0]} ${s[1]} `}}return e.trim()}toPaths(t){const n=t.sets||[],e=t.options||this.defaultOptions,o=[];for(const s of n){let i=null;switch(s.type){case"path":i={d:this.opsToPath(s),stroke:e.stroke,strokeWidth:e.strokeWidth,fill:Un};break;case"fillPath":i={d:this.opsToPath(s),stroke:Un,strokeWidth:0,fill:e.fill||Un};break;case"fillSketch":i=this.fillSketch(s,e)}i&&o.push(i)}return o}fillSketch(t,n){let e=n.fillWeight;return e<0&&(e=n.strokeWidth/2),{d:this.opsToPath(t),stroke:n.fill||Un,strokeWidth:e,fill:Un}}_mergedShape(t){return t.filter((n,e)=>e===0||n.op!=="move")}}class OA{constructor(t,n){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new uc(n)}draw(t){const n=t.sets||[],e=t.options||this.getDefaultOptions(),o=this.ctx,s=t.options.fixedDecimalPlaceDigits;for(const i of n)switch(i.type){case"path":o.save(),o.strokeStyle=e.stroke==="none"?"transparent":e.stroke,o.lineWidth=e.strokeWidth,e.strokeLineDash&&o.setLineDash(e.strokeLineDash),e.strokeLineDashOffset&&(o.lineDashOffset=e.strokeLineDashOffset),this._drawToContext(o,i,s),o.restore();break;case"fillPath":{o.save(),o.fillStyle=e.fill||"";const a=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(o,i,s,a),o.restore();break}case"fillSketch":this.fillSketch(o,i,e)}}fillSketch(t,n,e){let o=e.fillWeight;o<0&&(o=e.strokeWidth/2),t.save(),e.fillLineDash&&t.setLineDash(e.fillLineDash),e.fillLineDashOffset&&(t.lineDashOffset=e.fillLineDashOffset),t.strokeStyle=e.fill||"",t.lineWidth=o,this._drawToContext(t,n,e.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,n,e,o="nonzero"){t.beginPath();for(const s of n.ops){const i=typeof e=="number"&&e>=0?s.data.map(a=>+a.toFixed(e)):s.data;switch(s.op){case"move":t.moveTo(i[0],i[1]);break;case"bcurveTo":t.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);break;case"lineTo":t.lineTo(i[0],i[1])}}n.type==="fillPath"?t.fill(o):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,n,e,o,s){const i=this.gen.line(t,n,e,o,s);return this.draw(i),i}rectangle(t,n,e,o,s){const i=this.gen.rectangle(t,n,e,o,s);return this.draw(i),i}ellipse(t,n,e,o,s){const i=this.gen.ellipse(t,n,e,o,s);return this.draw(i),i}circle(t,n,e,o){const s=this.gen.circle(t,n,e,o);return this.draw(s),s}linearPath(t,n){const e=this.gen.linearPath(t,n);return this.draw(e),e}polygon(t,n){const e=this.gen.polygon(t,n);return this.draw(e),e}arc(t,n,e,o,s,i,a=!1,l){const c=this.gen.arc(t,n,e,o,s,i,a,l);return this.draw(c),c}curve(t,n){const e=this.gen.curve(t,n);return this.draw(e),e}path(t,n){const e=this.gen.path(t,n);return this.draw(e),e}}const Ha="http://www.w3.org/2000/svg";class zA{constructor(t,n){this.svg=t,this.gen=new uc(n)}draw(t){const n=t.sets||[],e=t.options||this.getDefaultOptions(),o=this.svg.ownerDocument||window.document,s=o.createElementNS(Ha,"g"),i=t.options.fixedDecimalPlaceDigits;for(const a of n){let l=null;switch(a.type){case"path":l=o.createElementNS(Ha,"path"),l.setAttribute("d",this.opsToPath(a,i)),l.setAttribute("stroke",e.stroke),l.setAttribute("stroke-width",e.strokeWidth+""),l.setAttribute("fill","none"),e.strokeLineDash&&l.setAttribute("stroke-dasharray",e.strokeLineDash.join(" ").trim()),e.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${e.strokeLineDashOffset}`);break;case"fillPath":l=o.createElementNS(Ha,"path"),l.setAttribute("d",this.opsToPath(a,i)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",e.fill||""),t.shape!=="curve"&&t.shape!=="polygon"||l.setAttribute("fill-rule","evenodd");break;case"fillSketch":l=this.fillSketch(o,a,e)}l&&s.appendChild(l)}return s}fillSketch(t,n,e){let o=e.fillWeight;o<0&&(o=e.strokeWidth/2);const s=t.createElementNS(Ha,"path");return s.setAttribute("d",this.opsToPath(n,e.fixedDecimalPlaceDigits)),s.setAttribute("stroke",e.fill||""),s.setAttribute("stroke-width",o+""),s.setAttribute("fill","none"),e.fillLineDash&&s.setAttribute("stroke-dasharray",e.fillLineDash.join(" ").trim()),e.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${e.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,n){return this.gen.opsToPath(t,n)}line(t,n,e,o,s){const i=this.gen.line(t,n,e,o,s);return this.draw(i)}rectangle(t,n,e,o,s){const i=this.gen.rectangle(t,n,e,o,s);return this.draw(i)}ellipse(t,n,e,o,s){const i=this.gen.ellipse(t,n,e,o,s);return this.draw(i)}circle(t,n,e,o){const s=this.gen.circle(t,n,e,o);return this.draw(s)}linearPath(t,n){const e=this.gen.linearPath(t,n);return this.draw(e)}polygon(t,n){const e=this.gen.polygon(t,n);return this.draw(e)}arc(t,n,e,o,s,i,a=!1,l){const c=this.gen.arc(t,n,e,o,s,i,a,l);return this.draw(c)}curve(t,n){const e=this.gen.curve(t,n);return this.draw(e)}path(t,n){const e=this.gen.path(t,n);return this.draw(e)}}var _t={canvas:(r,t)=>new OA(r,t),svg:(r,t)=>new zA(r,t),generator:r=>new uc(r),newSeed:()=>uc.newSeed()},Ft=w(async(r,t,n)=>{var h,d;let e;const o=t.useHtmlLabels||cn((h=ge())==null?void 0:h.htmlLabels);e=n||"node default";const s=r.insert("g").attr("class",e).attr("id",t.domId||t.id),i=s.insert("g").attr("class","label").attr("style",Ln(t.labelStyle));let a;a=t.label===void 0?"":typeof t.label=="string"?t.label:t.label[0];const l=await ti(i,Zo(Js(a),ge()),{useHtmlLabels:o,width:t.width||((d=ge().flowchart)==null?void 0:d.wrappingWidth),cssClasses:"markdown-node-label",style:t.labelStyle,addSvgBackground:!!t.icon||!!t.img});let c=l.getBBox();const u=((t==null?void 0:t.padding)??0)/2;if(o){const p=l.children[0],g=fe(l),$=p.getElementsByTagName("img");if($){const b=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...$].map(y=>new Promise(x=>{function M(){if(y.style.display="flex",y.style.flexDirection="column",b){const L=ge().fontSize?ge().fontSize:window.getComputedStyle(document.body).fontSize,A=5,[B=q2.fontSize]=Dc(L),E=B*A+"px";y.style.minWidth=E,y.style.maxWidth=E}else y.style.width="100%";x(y)}w(M,"setupImage"),setTimeout(()=>{y.complete&&M()}),y.addEventListener("error",M),y.addEventListener("load",M)})))}c=p.getBoundingClientRect(),g.attr("width",c.width),g.attr("height",c.height)}return o?i.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"):i.attr("transform","translate(0, "+-c.height/2+")"),t.centerLabel&&i.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"),i.insert("rect",":first-child"),{shapeSvg:s,bbox:c,halfPadding:u,label:i}},"labelHelper"),Iu=w(async(r,t,n)=>{var l,c,u,h,d,p;const e=n.useHtmlLabels||cn((c=(l=ge())==null?void 0:l.flowchart)==null?void 0:c.htmlLabels),o=r.insert("g").attr("class","label").attr("style",n.labelStyle||""),s=await ti(o,Zo(Js(t),ge()),{useHtmlLabels:e,width:n.width||((h=(u=ge())==null?void 0:u.flowchart)==null?void 0:h.wrappingWidth),style:n.labelStyle,addSvgBackground:!!n.icon||!!n.img});let i=s.getBBox();const a=n.padding/2;if(cn((p=(d=ge())==null?void 0:d.flowchart)==null?void 0:p.htmlLabels)){const g=s.children[0],$=fe(s);i=g.getBoundingClientRect(),$.attr("width",i.width),$.attr("height",i.height)}return e?o.attr("transform","translate("+-i.width/2+", "+-i.height/2+")"):o.attr("transform","translate(0, "+-i.height/2+")"),n.centerLabel&&o.attr("transform","translate("+-i.width/2+", "+-i.height/2+")"),o.insert("rect",":first-child"),{shapeSvg:r,bbox:i,halfPadding:a,label:o}},"insertLabel"),Tt=w((r,t)=>{const n=t.node().getBBox();r.width=n.width,r.height=n.height},"updateNodeBounds"),Dt=w((r,t)=>(r.look==="handDrawn"?"rough-node":"node")+" "+r.cssClasses+" "+(t||""),"getNodeClasses");function ae(r){const t=r.map((n,e)=>`${e===0?"M":"L"}${n.x},${n.y}`);return t.push("Z"),t.join(" ")}function _o(r,t,n,e,o,s){const i=[],a=n-r,l=e-t,c=a/s,u=2*Math.PI/c,h=t+l/2;for(let d=0;d<=50;d++){const p=r+d/50*a,g=h+o*Math.sin(u*(p-r));i.push({x:p,y:g})}return i}function up(r,t,n,e,o,s){const i=[],a=o*Math.PI/180,l=(s*Math.PI/180-a)/(e-1);for(let c=0;c<e;c++){const u=a+c*l,h=r+n*Math.cos(u),d=t+n*Math.sin(u);i.push({x:-h,y:-d})}return i}w(ae,"createPathFromPoints"),w(_o,"generateFullSineWavePoints"),w(up,"generateCirclePoints");var NA=w((r,t)=>{var n,e,o=r.x,s=r.y,i=t.x-o,a=t.y-s,l=r.width/2,c=r.height/2;return Math.abs(a)*l>Math.abs(i)*c?(a<0&&(c=-c),n=a===0?0:c*i/a,e=c):(i<0&&(l=-l),n=l,e=i===0?0:l*a/i),{x:o+n,y:s+e}},"intersectRect"),ei=NA;function av(r,t){t&&r.attr("style",t)}async function lv(r){const t=fe(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),n=t.append("xhtml:div");let e=r.label;r.label&&Ns(r.label)&&(e=await _d(r.label.replace(Qs.lineBreakRegex,`
`),ge()));const o=r.isNode?"nodeLabel":"edgeLabel";return n.html('<span class="'+o+'" '+(r.labelStyle?'style="'+r.labelStyle+'"':"")+">"+e+"</span>"),av(n,r.labelStyle),n.style("display","inline-block"),n.style("padding-right","1px"),n.style("white-space","nowrap"),n.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}w(av,"applyStyle"),w(lv,"addHtmlLabel");var RA=w(async(r,t,n,e)=>{let o=r||"";if(typeof o=="object"&&(o=o[0]),cn(ge().flowchart.htmlLabels)){o=o.replace(/\\n|\n/g,"<br />"),it.info("vertexText"+o);const s={isNode:e,label:Js(o).replace(/fa[blrs]?:fa-[\w-]+/g,i=>`<i class='${i.replace(":"," ")}'></i>`),labelStyle:t&&t.replace("fill:","color:")};return await lv(s)}{const s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("style",t.replace("color:","fill:"));let i=[];i=typeof o=="string"?o.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(o)?o:[];for(const a of i){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),n?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=a.trim(),s.appendChild(l)}return s}},"createLabel"),Uo=RA,Jr=w((r,t,n,e,o)=>["M",r+o,t,"H",r+n-o,"A",o,o,0,0,1,r+n,t+o,"V",t+e-o,"A",o,o,0,0,1,r+n-o,t+e,"H",r+o,"A",o,o,0,0,1,r,t+e-o,"V",t+o,"A",o,o,0,0,1,r+o,t,"Z"].join(" "),"createRoundedRectPathD"),PA=w(r=>{const{handDrawnSeed:t}=ge();return{fill:r,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:r,seed:t}},"solidStateFill"),ni=w(r=>{const t=UA([...r.cssCompiledStyles||[],...r.cssStyles||[]]);return{stylesMap:t,stylesArray:[...t]}},"compileStyles"),UA=w(r=>{const t=new Map;return r.forEach(n=>{const[e,o]=n.split(":");t.set(e.trim(),o==null?void 0:o.trim())}),t},"styles2Map"),Mt=w(r=>{const{stylesArray:t}=ni(r),n=[],e=[],o=[],s=[];return t.forEach(i=>{const a=i[0];a==="color"||a==="font-size"||a==="font-family"||a==="font-weight"||a==="font-style"||a==="text-decoration"||a==="text-align"||a==="text-transform"||a==="line-height"||a==="letter-spacing"||a==="word-spacing"||a==="text-shadow"||a==="text-overflow"||a==="white-space"||a==="word-wrap"||a==="word-break"||a==="overflow-wrap"||a==="hyphens"?n.push(i.join(":")+" !important"):(e.push(i.join(":")+" !important"),a.includes("stroke")&&o.push(i.join(":")+" !important"),a==="fill"&&s.push(i.join(":")+" !important"))}),{labelStyles:n.join(";"),nodeStyles:e.join(";"),stylesArray:t,borderStyles:o,backgroundStyles:s}},"styles2String"),kt=w((r,t)=>{var a;const{themeVariables:n,handDrawnSeed:e}=ge(),{nodeBorder:o,mainBkg:s}=n,{stylesMap:i}=ni(r);return Object.assign({roughness:.7,fill:i.get("fill")||s,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:i.get("stroke")||o,seed:e,strokeWidth:((a=i.get("stroke-width"))==null?void 0:a.replace("px",""))||1.3,fillLineDash:[0,0]},t)},"userNodeOverrides"),M0=w(async(r,t)=>{it.info("Creating subgraph rect for ",t.id,t);const n=ge(),{themeVariables:e,handDrawnSeed:o}=n,{clusterBkg:s,clusterBorder:i}=e,{labelStyles:a,nodeStyles:l,borderStyles:c,backgroundStyles:u}=Mt(t),h=r.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),d=cn(n.flowchart.htmlLabels),p=h.insert("g").attr("class","cluster-label "),g=await ti(p,t.label,{style:t.labelStyle,useHtmlLabels:d,isNode:!0});let $=g.getBBox();if(cn(n.flowchart.htmlLabels)){const E=g.children[0],F=fe(g);$=E.getBoundingClientRect(),F.attr("width",$.width),F.attr("height",$.height)}const b=t.width<=$.width+t.padding?$.width+t.padding:t.width;t.width<=$.width+t.padding?t.diff=(b-t.width)/2-t.padding:t.diff=-t.padding;const y=t.height,x=t.x-b/2,M=t.y-y/2;let L;if(it.trace("Data ",t,JSON.stringify(t)),t.look==="handDrawn"){const E=_t.svg(h),F=kt(t,{roughness:.7,fill:s,stroke:i,fillWeight:3,seed:o}),U=E.path(Jr(x,M,b,y,0),F);L=h.insert(()=>(it.debug("Rough node insert CXC",U),U),":first-child"),L.select("path:nth-child(2)").attr("style",c.join(";")),L.select("path").attr("style",u.join(";").replace("fill","stroke"))}else L=h.insert("rect",":first-child"),L.attr("style",l).attr("rx",t.rx).attr("ry",t.ry).attr("x",x).attr("y",M).attr("width",b).attr("height",y);const{subGraphTitleTopMargin:A}=Fd(n);if(p.attr("transform",`translate(${t.x-$.width/2}, ${t.y-t.height/2+A})`),a){const E=p.select("span");E&&E.attr("style",a)}const B=L.node().getBBox();return t.offsetX=0,t.width=B.width,t.height=B.height,t.offsetY=$.height-t.padding/2,t.intersect=function(E){return ei(t,E)},{cluster:h,labelBBox:$}},"rect"),qA=w((r,t)=>{const n=r.insert("g").attr("class","note-cluster").attr("id",t.id),e=n.insert("rect",":first-child"),o=0*t.padding,s=o/2;e.attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-t.width/2-s).attr("y",t.y-t.height/2-s).attr("width",t.width+o).attr("height",t.height+o).attr("fill","none");const i=e.node().getBBox();return t.width=i.width,t.height=i.height,t.intersect=function(a){return ei(t,a)},{cluster:n,labelBBox:{width:0,height:0}}},"noteGroup"),jA=w(async(r,t)=>{const n=ge(),{themeVariables:e,handDrawnSeed:o}=n,{altBackground:s,compositeBackground:i,compositeTitleBackground:a,nodeBorder:l}=e,c=r.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-id",t.id).attr("data-look",t.look),u=c.insert("g",":first-child"),h=c.insert("g").attr("class","cluster-label");let d=c.append("rect");const p=h.node().appendChild(await Uo(t.label,t.labelStyle,void 0,!0));let g=p.getBBox();if(cn(n.flowchart.htmlLabels)){const U=p.children[0],tt=fe(p);g=U.getBoundingClientRect(),tt.attr("width",g.width),tt.attr("height",g.height)}const $=0*t.padding,b=$/2,y=(t.width<=g.width+t.padding?g.width+t.padding:t.width)+$;t.width<=g.width+t.padding?t.diff=(y-t.width)/2-t.padding:t.diff=-t.padding;const x=t.height+$,M=t.height+$-g.height-6,L=t.x-y/2,A=t.y-x/2;t.width=y;const B=t.y-t.height/2-b+g.height+2;let E;if(t.look==="handDrawn"){const U=t.cssClasses.includes("statediagram-cluster-alt"),tt=_t.svg(c),q=t.rx||t.ry?tt.path(Jr(L,A,y,x,10),{roughness:.7,fill:a,fillStyle:"solid",stroke:l,seed:o}):tt.rectangle(L,A,y,x,{seed:o});E=c.insert(()=>q,":first-child");const N=tt.rectangle(L,B,y,M,{fill:U?s:i,fillStyle:U?"hachure":"solid",stroke:l,seed:o});E=c.insert(()=>q,":first-child"),d=c.insert(()=>N)}else E=u.insert("rect",":first-child"),E.attr("class","outer").attr("x",L).attr("y",A).attr("width",y).attr("height",x).attr("data-look",t.look),d.attr("class","inner").attr("x",L).attr("y",B).attr("width",y).attr("height",M);h.attr("transform",`translate(${t.x-g.width/2}, ${A+1-(cn(n.flowchart.htmlLabels)?0:3)})`);const F=E.node().getBBox();return t.height=F.height,t.offsetX=0,t.offsetY=g.height-t.padding/2,t.labelBBox=g,t.intersect=function(U){return ei(t,U)},{cluster:c,labelBBox:g}},"roundedWithTitle"),WA=w(async(r,t)=>{it.info("Creating subgraph rect for ",t.id,t);const n=ge(),{themeVariables:e,handDrawnSeed:o}=n,{clusterBkg:s,clusterBorder:i}=e,{labelStyles:a,nodeStyles:l,borderStyles:c,backgroundStyles:u}=Mt(t),h=r.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),d=cn(n.flowchart.htmlLabels),p=h.insert("g").attr("class","cluster-label "),g=await ti(p,t.label,{style:t.labelStyle,useHtmlLabels:d,isNode:!0,width:t.width});let $=g.getBBox();if(cn(n.flowchart.htmlLabels)){const E=g.children[0],F=fe(g);$=E.getBoundingClientRect(),F.attr("width",$.width),F.attr("height",$.height)}const b=t.width<=$.width+t.padding?$.width+t.padding:t.width;t.width<=$.width+t.padding?t.diff=(b-t.width)/2-t.padding:t.diff=-t.padding;const y=t.height,x=t.x-b/2,M=t.y-y/2;let L;if(it.trace("Data ",t,JSON.stringify(t)),t.look==="handDrawn"){const E=_t.svg(h),F=kt(t,{roughness:.7,fill:s,stroke:i,fillWeight:4,seed:o}),U=E.path(Jr(x,M,b,y,t.rx),F);L=h.insert(()=>(it.debug("Rough node insert CXC",U),U),":first-child"),L.select("path:nth-child(2)").attr("style",c.join(";")),L.select("path").attr("style",u.join(";").replace("fill","stroke"))}else L=h.insert("rect",":first-child"),L.attr("style",l).attr("rx",t.rx).attr("ry",t.ry).attr("x",x).attr("y",M).attr("width",b).attr("height",y);const{subGraphTitleTopMargin:A}=Fd(n);if(p.attr("transform",`translate(${t.x-$.width/2}, ${t.y-t.height/2+A})`),a){const E=p.select("span");E&&E.attr("style",a)}const B=L.node().getBBox();return t.offsetX=0,t.width=B.width,t.height=B.height,t.offsetY=$.height-t.padding/2,t.intersect=function(E){return ei(t,E)},{cluster:h,labelBBox:$}},"kanbanSection"),HA=w((r,t)=>{const n=ge(),{themeVariables:e,handDrawnSeed:o}=n,{nodeBorder:s}=e,i=r.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-look",t.look),a=i.insert("g",":first-child"),l=0*t.padding,c=t.width+l;t.diff=-t.padding;const u=t.height+l,h=t.x-c/2,d=t.y-u/2;let p;if(t.width=c,t.look==="handDrawn"){const $=_t.svg(i).rectangle(h,d,c,u,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:s,seed:o});p=i.insert(()=>$,":first-child")}else p=a.insert("rect",":first-child"),p.attr("class","divider").attr("x",h).attr("y",d).attr("width",c).attr("height",u).attr("data-look",t.look);const g=p.node().getBBox();return t.height=g.height,t.offsetX=0,t.offsetY=0,t.intersect=function($){return ei(t,$)},{cluster:i,labelBBox:{}}},"divider"),VA={rect:M0,squareRect:M0,roundedWithTitle:jA,noteGroup:qA,divider:HA,kanbanSection:WA},cv=new Map,GA=w(async(r,t)=>{const n=t.shape||"rect",e=await VA[n](r,t);return cv.set(t.id,e),e},"insertCluster"),OH=w(()=>{cv=new Map},"clear");function uv(r,t){return r.intersect(t)}w(uv,"intersectNode");var ZA=uv;function hv(r,t,n,e){var o=r.x,s=r.y,i=o-e.x,a=s-e.y,l=Math.sqrt(t*t*a*a+n*n*i*i),c=Math.abs(t*n*i/l);e.x<o&&(c=-c);var u=Math.abs(t*n*a/l);return e.y<s&&(u=-u),{x:o+c,y:s+u}}w(hv,"intersectEllipse");var dv=hv;function pv(r,t,n){return dv(r,t,t,n)}w(pv,"intersectCircle");var YA=pv;function fv(r,t,n,e){var o,s,i,a,l,c,u,h,d,p,g,$,b;if(o=t.y-r.y,i=r.x-t.x,l=t.x*r.y-r.x*t.y,d=o*n.x+i*n.y+l,p=o*e.x+i*e.y+l,!(d!==0&&p!==0&&jh(d,p)||(s=e.y-n.y,a=n.x-e.x,c=e.x*n.y-n.x*e.y,u=s*r.x+a*r.y+c,h=s*t.x+a*t.y+c,u!==0&&h!==0&&jh(u,h)||(g=o*a-s*i)==0)))return $=Math.abs(g/2),{x:(b=i*c-a*l)<0?(b-$)/g:(b+$)/g,y:(b=s*l-o*c)<0?(b-$)/g:(b+$)/g}}function jh(r,t){return r*t>0}w(fv,"intersectLine"),w(jh,"sameSign");var XA=fv;function gv(r,t,n){let e=r.x,o=r.y,s=[],i=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(u){i=Math.min(i,u.x),a=Math.min(a,u.y)}):(i=Math.min(i,t.x),a=Math.min(a,t.y));let l=e-r.width/2-i,c=o-r.height/2-a;for(let u=0;u<t.length;u++){let h=t[u],d=t[u<t.length-1?u+1:0],p=XA(r,n,{x:l+h.x,y:c+h.y},{x:l+d.x,y:c+d.y});p&&s.push(p)}return s.length?(s.length>1&&s.sort(function(u,h){let d=u.x-n.x,p=u.y-n.y,g=Math.sqrt(d*d+p*p),$=h.x-n.x,b=h.y-n.y,y=Math.sqrt($*$+b*b);return g<y?-1:g===y?0:1}),s[0]):r}w(gv,"intersectPolygon");var vt={node:ZA,circle:YA,ellipse:dv,polygon:gv,rect:ei};function mv(r,t){const{labelStyles:n}=Mt(t);t.labelStyle=n;const e=Dt(t);let o=e;e||(o="anchor");const s=r.insert("g").attr("class",o).attr("id",t.domId||t.id),{cssStyles:i}=t,a=_t.svg(s),l=kt(t,{fill:"black",stroke:"none",fillStyle:"solid"});t.look!=="handDrawn"&&(l.roughness=0);const c=a.circle(0,0,2,l),u=s.insert(()=>c,":first-child");return u.attr("class","anchor").attr("style",Ln(i)),Tt(t,u),t.intersect=function(h){return it.info("Circle intersect",t,1,h),vt.circle(t,1,h)},s}function Wh(r,t,n,e,o,s,i){const a=(r+n)/2,l=(t+e)/2,c=Math.atan2(e-t,n-r),u=(n-r)/2/o,h=(e-t)/2/s,d=Math.sqrt(u**2+h**2);if(d>1)throw new Error("The given radii are too small to create an arc between the points.");const p=Math.sqrt(1-d**2),g=a+p*s*Math.sin(c)*(i?-1:1),$=l-p*o*Math.cos(c)*(i?-1:1),b=Math.atan2((t-$)/s,(r-g)/o);let y=Math.atan2((e-$)/s,(n-g)/o)-b;i&&y<0&&(y+=2*Math.PI),!i&&y>0&&(y-=2*Math.PI);const x=[];for(let M=0;M<20;M++){const L=b+M/19*y,A=g+o*Math.cos(L),B=$+s*Math.sin(L);x.push({x:A,y:B})}return x}async function $v(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s}=await Ft(r,t,Dt(t)),i=s.width+t.padding+20,a=s.height+t.padding,l=a/2,c=l/(2.5+a/50),{cssStyles:u}=t,h=[{x:i/2,y:-a/2},{x:-i/2,y:-a/2},...Wh(-i/2,-a/2,-i/2,a/2,c,l,!1),{x:i/2,y:a/2},...Wh(i/2,a/2,i/2,-a/2,c,l,!0)],d=_t.svg(o),p=kt(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=ae(h),$=d.path(g,p),b=o.insert(()=>$,":first-child");return b.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",u),e&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",e),b.attr("transform",`translate(${c/2}, 0)`),Tt(t,b),t.intersect=function(y){return vt.polygon(t,h,y)},o}function to(r,t,n,e){return r.insert("polygon",":first-child").attr("points",e.map(function(o){return o.x+","+o.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+n/2+")")}async function yv(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s}=await Ft(r,t,Dt(t)),i=s.height+t.padding,a=s.width+t.padding+12,l=-i,c=[{x:12,y:l},{x:a,y:l},{x:a,y:0},{x:0,y:0},{x:0,y:l+12},{x:12,y:l}];let u;const{cssStyles:h}=t;if(t.look==="handDrawn"){const d=_t.svg(o),p=kt(t,{}),g=ae(c),$=d.path(g,p);u=o.insert(()=>$,":first-child").attr("transform",`translate(${-a/2}, ${i/2})`),h&&u.attr("style",h)}else u=to(o,a,i,c);return e&&u.attr("style",e),Tt(t,u),t.intersect=function(d){return vt.polygon(t,c,d)},o}function xv(r,t){const{nodeStyles:n}=Mt(t);t.label="";const e=r.insert("g").attr("class",Dt(t)).attr("id",t.domId??t.id),{cssStyles:o}=t,s=Math.max(28,t.width??0),i=[{x:0,y:s/2},{x:s/2,y:0},{x:0,y:-s/2},{x:-s/2,y:0}],a=_t.svg(e),l=kt(t,{});t.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=ae(i),u=a.path(c,l),h=e.insert(()=>u,":first-child");return o&&t.look!=="handDrawn"&&h.selectAll("path").attr("style",o),n&&t.look!=="handDrawn"&&h.selectAll("path").attr("style",n),t.width=28,t.height=28,t.intersect=function(d){return vt.polygon(t,i,d)},e}async function bv(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s,halfPadding:i}=await Ft(r,t,Dt(t)),a=s.width/2+i;let l;const{cssStyles:c}=t;if(t.look==="handDrawn"){const u=_t.svg(o),h=kt(t,{}),d=u.circle(0,0,2*a,h);l=o.insert(()=>d,":first-child"),l.attr("class","basic label-container").attr("style",Ln(c))}else l=o.insert("circle",":first-child").attr("class","basic label-container").attr("style",e).attr("r",a).attr("cx",0).attr("cy",0);return Tt(t,l),t.intersect=function(u){return it.info("Circle intersect",t,a,u),vt.circle(t,a,u)},o}function wv(r){const t=Math.cos(Math.PI/4),n=Math.sin(Math.PI/4),e=2*r;return`M ${-e/2*t},${e/2*n} L ${e/2*t},${-e/2*n}
                   M ${e/2*t},${e/2*n} L ${-e/2*t},${-e/2*n}`}function vv(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n,t.label="";const o=r.insert("g").attr("class",Dt(t)).attr("id",t.domId??t.id),s=Math.max(30,(t==null?void 0:t.width)??0),{cssStyles:i}=t,a=_t.svg(o),l=kt(t,{});t.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=a.circle(0,0,2*s,l),u=wv(s),h=a.path(u,l),d=o.insert(()=>c,":first-child");return d.insert(()=>h),i&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",i),e&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",e),Tt(t,d),t.intersect=function(p){return it.info("crossedCircle intersect",t,{radius:s,point:p}),vt.circle(t,s,p)},o}function Ur(r,t,n,e=100,o=0,s=180){const i=[],a=o*Math.PI/180,l=(s*Math.PI/180-a)/(e-1);for(let c=0;c<e;c++){const u=a+c*l,h=r+n*Math.cos(u),d=t+n*Math.sin(u);i.push({x:-h,y:-d})}return i}async function _v(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s,label:i}=await Ft(r,t,Dt(t)),a=s.width+(t.padding??0),l=s.height+(t.padding??0),c=Math.max(5,.1*l),{cssStyles:u}=t,h=[...Ur(a/2,-l/2,c,30,-90,0),{x:-a/2-c,y:c},...Ur(a/2+2*c,-c,c,20,-180,-270),...Ur(a/2+2*c,c,c,20,-90,-180),{x:-a/2-c,y:-l/2},...Ur(a/2,l/2,c,20,0,90)],d=[{x:a/2,y:-l/2-c},{x:-a/2,y:-l/2-c},...Ur(a/2,-l/2,c,20,-90,0),{x:-a/2-c,y:-c},...Ur(a/2+.1*a,-c,c,20,-180,-270),...Ur(a/2+.1*a,c,c,20,-90,-180),{x:-a/2-c,y:l/2},...Ur(a/2,l/2,c,20,0,90),{x:-a/2,y:l/2+c},{x:a/2,y:l/2+c}],p=_t.svg(o),g=kt(t,{fill:"none"});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const $=ae(h).replace("Z",""),b=p.path($,g),y=ae(d),x=p.path(y,{...g}),M=o.insert("g",":first-child");return M.insert(()=>x,":first-child").attr("stroke-opacity",0),M.insert(()=>b,":first-child"),M.attr("class","text"),u&&t.look!=="handDrawn"&&M.selectAll("path").attr("style",u),e&&t.look!=="handDrawn"&&M.selectAll("path").attr("style",e),M.attr("transform",`translate(${c}, 0)`),i.attr("transform",`translate(${-a/2+c-(s.x-(s.left??0))},${-l/2+(t.padding??0)/2-(s.y-(s.top??0))})`),Tt(t,M),t.intersect=function(L){return vt.polygon(t,d,L)},o}function qr(r,t,n,e=100,o=0,s=180){const i=[],a=o*Math.PI/180,l=(s*Math.PI/180-a)/(e-1);for(let c=0;c<e;c++){const u=a+c*l,h=r+n*Math.cos(u),d=t+n*Math.sin(u);i.push({x:h,y:d})}return i}async function kv(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s,label:i}=await Ft(r,t,Dt(t)),a=s.width+(t.padding??0),l=s.height+(t.padding??0),c=Math.max(5,.1*l),{cssStyles:u}=t,h=[...qr(a/2,-l/2,c,20,-90,0),{x:a/2+c,y:-c},...qr(a/2+2*c,-c,c,20,-180,-270),...qr(a/2+2*c,c,c,20,-90,-180),{x:a/2+c,y:l/2},...qr(a/2,l/2,c,20,0,90)],d=[{x:-a/2,y:-l/2-c},{x:a/2,y:-l/2-c},...qr(a/2,-l/2,c,20,-90,0),{x:a/2+c,y:-c},...qr(a/2+2*c,-c,c,20,-180,-270),...qr(a/2+2*c,c,c,20,-90,-180),{x:a/2+c,y:l/2},...qr(a/2,l/2,c,20,0,90),{x:a/2,y:l/2+c},{x:-a/2,y:l/2+c}],p=_t.svg(o),g=kt(t,{fill:"none"});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const $=ae(h).replace("Z",""),b=p.path($,g),y=ae(d),x=p.path(y,{...g}),M=o.insert("g",":first-child");return M.insert(()=>x,":first-child").attr("stroke-opacity",0),M.insert(()=>b,":first-child"),M.attr("class","text"),u&&t.look!=="handDrawn"&&M.selectAll("path").attr("style",u),e&&t.look!=="handDrawn"&&M.selectAll("path").attr("style",e),M.attr("transform",`translate(${-c}, 0)`),i.attr("transform",`translate(${-a/2+(t.padding??0)/2-(s.x-(s.left??0))},${-l/2+(t.padding??0)/2-(s.y-(s.top??0))})`),Tt(t,M),t.intersect=function(L){return vt.polygon(t,d,L)},o}function rn(r,t,n,e=100,o=0,s=180){const i=[],a=o*Math.PI/180,l=(s*Math.PI/180-a)/(e-1);for(let c=0;c<e;c++){const u=a+c*l,h=r+n*Math.cos(u),d=t+n*Math.sin(u);i.push({x:-h,y:-d})}return i}async function Cv(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s,label:i}=await Ft(r,t,Dt(t)),a=s.width+(t.padding??0),l=s.height+(t.padding??0),c=Math.max(5,.1*l),{cssStyles:u}=t,h=[...rn(a/2,-l/2,c,30,-90,0),{x:-a/2-c,y:c},...rn(a/2+2*c,-c,c,20,-180,-270),...rn(a/2+2*c,c,c,20,-90,-180),{x:-a/2-c,y:-l/2},...rn(a/2,l/2,c,20,0,90)],d=[...rn(-a/2+c+c/2,-l/2,c,20,-90,-180),{x:a/2-c/2,y:c},...rn(-a/2-c/2,-c,c,20,0,90),...rn(-a/2-c/2,c,c,20,-90,0),{x:a/2-c/2,y:-c},...rn(-a/2+c+c/2,l/2,c,30,-180,-270)],p=[{x:a/2,y:-l/2-c},{x:-a/2,y:-l/2-c},...rn(a/2,-l/2,c,20,-90,0),{x:-a/2-c,y:-c},...rn(a/2+2*c,-c,c,20,-180,-270),...rn(a/2+2*c,c,c,20,-90,-180),{x:-a/2-c,y:l/2},...rn(a/2,l/2,c,20,0,90),{x:-a/2,y:l/2+c},{x:a/2-c-c/2,y:l/2+c},...rn(-a/2+c+c/2,-l/2,c,20,-90,-180),{x:a/2-c/2,y:c},...rn(-a/2-c/2,-c,c,20,0,90),...rn(-a/2-c/2,c,c,20,-90,0),{x:a/2-c/2,y:-c},...rn(-a/2+c+c/2,l/2,c,30,-180,-270)],g=_t.svg(o),$=kt(t,{fill:"none"});t.look!=="handDrawn"&&($.roughness=0,$.fillStyle="solid");const b=ae(h).replace("Z",""),y=g.path(b,$),x=ae(d).replace("Z",""),M=g.path(x,$),L=ae(p),A=g.path(L,{...$}),B=o.insert("g",":first-child");return B.insert(()=>A,":first-child").attr("stroke-opacity",0),B.insert(()=>y,":first-child"),B.insert(()=>M,":first-child"),B.attr("class","text"),u&&t.look!=="handDrawn"&&B.selectAll("path").attr("style",u),e&&t.look!=="handDrawn"&&B.selectAll("path").attr("style",e),B.attr("transform",`translate(${c-c/4}, 0)`),i.attr("transform",`translate(${-a/2+(t.padding??0)/2-(s.x-(s.left??0))},${-l/2+(t.padding??0)/2-(s.y-(s.top??0))})`),Tt(t,B),t.intersect=function(E){return vt.polygon(t,p,E)},o}async function Sv(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s}=await Ft(r,t,Dt(t)),i=Math.max(80,1.25*(s.width+2*(t.padding??0)),(t==null?void 0:t.width)??0),a=Math.max(20,s.height+2*(t.padding??0),(t==null?void 0:t.height)??0),l=a/2,{cssStyles:c}=t,u=_t.svg(o),h=kt(t,{});t.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const d=i-l,p=a/4,g=[{x:d,y:0},{x:p,y:0},{x:0,y:a/2},{x:p,y:a},{x:d,y:a},...up(-d,-a/2,l,50,270,90)],$=ae(g),b=u.path($,h),y=o.insert(()=>b,":first-child");return y.attr("class","basic label-container"),c&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",c),e&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",e),y.attr("transform",`translate(${-i/2}, ${-a/2})`),Tt(t,y),t.intersect=function(x){return vt.polygon(t,g,x)},o}w(mv,"anchor"),w(Wh,"generateArcPoints"),w($v,"bowTieRect"),w(to,"insertPolygonShape"),w(yv,"card"),w(xv,"choice"),w(bv,"circle"),w(wv,"createLine"),w(vv,"crossedCircle"),w(Ur,"generateCirclePoints"),w(_v,"curlyBraceLeft"),w(qr,"generateCirclePoints"),w(kv,"curlyBraceRight"),w(rn,"generateCirclePoints"),w(Cv,"curlyBraces"),w(Sv,"curvedTrapezoid");var QA=w((r,t,n,e,o,s)=>[`M${r},${t+s}`,`a${o},${s} 0,0,0 ${n},0`,`a${o},${s} 0,0,0 ${-n},0`,`l0,${e}`,`a${o},${s} 0,0,0 ${n},0`,"l0,"+-e].join(" "),"createCylinderPathD"),KA=w((r,t,n,e,o,s)=>[`M${r},${t+s}`,`M${r+n},${t+s}`,`a${o},${s} 0,0,0 ${-n},0`,`l0,${e}`,`a${o},${s} 0,0,0 ${n},0`,"l0,"+-e].join(" "),"createOuterCylinderPathD"),JA=w((r,t,n,e,o,s)=>[`M${r-n/2},${-e/2}`,`a${o},${s} 0,0,0 ${n},0`].join(" "),"createInnerCylinderPathD");async function Tv(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s,label:i}=await Ft(r,t,Dt(t)),a=Math.max(s.width+t.padding,t.width??0),l=a/2,c=l/(2.5+a/50),u=Math.max(s.height+c+t.padding,t.height??0);let h;const{cssStyles:d}=t;if(t.look==="handDrawn"){const p=_t.svg(o),g=KA(0,0,a,u,l,c),$=JA(0,c,a,u,l,c),b=p.path(g,kt(t,{})),y=p.path($,kt(t,{fill:"none"}));h=o.insert(()=>y,":first-child"),h=o.insert(()=>b,":first-child"),h.attr("class","basic label-container"),d&&h.attr("style",d)}else{const p=QA(0,0,a,u,l,c);h=o.insert("path",":first-child").attr("d",p).attr("class","basic label-container").attr("style",Ln(d)).attr("style",e)}return h.attr("label-offset-y",c),h.attr("transform",`translate(${-a/2}, ${-(u/2+c)})`),Tt(t,h),i.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-s.height/2+(t.padding??0)/1.5-(s.y-(s.top??0))})`),t.intersect=function(p){const g=vt.rect(t,p),$=g.x-(t.x??0);if(l!=0&&(Math.abs($)<(t.width??0)/2||Math.abs($)==(t.width??0)/2&&Math.abs(g.y-(t.y??0))>(t.height??0)/2-c)){let b=c*c*(1-$*$/(l*l));b>0&&(b=Math.sqrt(b)),b=c-b,p.y-(t.y??0)>0&&(b=-b),g.y+=b}return g},o}async function Mv(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s,label:i}=await Ft(r,t,Dt(t)),a=s.width+t.padding,l=s.height+t.padding,c=.2*l,u=-a/2,h=-l/2-c/2,{cssStyles:d}=t,p=_t.svg(o),g=kt(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const $=[{x:u,y:h+c},{x:-u,y:h+c},{x:-u,y:-h},{x:u,y:-h},{x:u,y:h},{x:-u,y:h},{x:-u,y:h+c}],b=p.polygon($.map(x=>[x.x,x.y]),g),y=o.insert(()=>b,":first-child");return y.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",d),e&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",e),i.attr("transform",`translate(${u+(t.padding??0)/2-(s.x-(s.left??0))}, ${h+c+(t.padding??0)/2-(s.y-(s.top??0))})`),Tt(t,y),t.intersect=function(x){return vt.rect(t,x)},o}async function Av(r,t){var h,d;const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s,halfPadding:i}=await Ft(r,t,Dt(t)),a=s.width/2+i+5,l=s.width/2+i;let c;const{cssStyles:u}=t;if(t.look==="handDrawn"){const p=_t.svg(o),g=kt(t,{roughness:.2,strokeWidth:2.5}),$=kt(t,{roughness:.2,strokeWidth:1.5}),b=p.circle(0,0,2*a,g),y=p.circle(0,0,2*l,$);c=o.insert("g",":first-child"),c.attr("class",Ln(t.cssClasses)).attr("style",Ln(u)),(h=c.node())==null||h.appendChild(b),(d=c.node())==null||d.appendChild(y)}else{c=o.insert("g",":first-child");const p=c.insert("circle",":first-child"),g=c.insert("circle");c.attr("class","basic label-container").attr("style",e),p.attr("class","outer-circle").attr("style",e).attr("r",a).attr("cx",0).attr("cy",0),g.attr("class","inner-circle").attr("style",e).attr("r",l).attr("cx",0).attr("cy",0)}return Tt(t,c),t.intersect=function(p){return it.info("DoubleCircle intersect",t,a,p),vt.circle(t,a,p)},o}function Lv(r,t,{config:{themeVariables:n}}){const{labelStyles:e,nodeStyles:o}=Mt(t);t.label="",t.labelStyle=e;const s=r.insert("g").attr("class",Dt(t)).attr("id",t.domId??t.id),{cssStyles:i}=t,a=_t.svg(s),{nodeBorder:l}=n,c=kt(t,{fillStyle:"solid"});t.look!=="handDrawn"&&(c.roughness=0);const u=a.circle(0,0,14,c),h=s.insert(()=>u,":first-child");return h.selectAll("path").attr("style",`fill: ${l} !important;`),i&&i.length>0&&t.look!=="handDrawn"&&h.selectAll("path").attr("style",i),o&&t.look!=="handDrawn"&&h.selectAll("path").attr("style",o),Tt(t,h),t.intersect=function(d){return it.info("filledCircle intersect",t,{radius:7,point:d}),vt.circle(t,7,d)},s}async function Ev(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s,label:i}=await Ft(r,t,Dt(t)),a=s.width+(t.padding??0),l=a+s.height,c=a+s.height,u=[{x:0,y:-l},{x:c,y:-l},{x:c/2,y:0}],{cssStyles:h}=t,d=_t.svg(o),p=kt(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=ae(u),$=d.path(g,p),b=o.insert(()=>$,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`);return h&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",h),e&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",e),t.width=a,t.height=l,Tt(t,b),i.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-l/2+(t.padding??0)/2+(s.y-(s.top??0))})`),t.intersect=function(y){return it.info("Triangle intersect",t,u,y),vt.polygon(t,u,y)},o}function Bv(r,t,{dir:n,config:{state:e,themeVariables:o}}){const{nodeStyles:s}=Mt(t);t.label="";const i=r.insert("g").attr("class",Dt(t)).attr("id",t.domId??t.id),{cssStyles:a}=t;let l=Math.max(70,(t==null?void 0:t.width)??0),c=Math.max(10,(t==null?void 0:t.height)??0);n==="LR"&&(l=Math.max(10,(t==null?void 0:t.width)??0),c=Math.max(70,(t==null?void 0:t.height)??0));const u=-1*l/2,h=-1*c/2,d=_t.svg(i),p=kt(t,{stroke:o.lineColor,fill:o.lineColor});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=d.rectangle(u,h,l,c,p),$=i.insert(()=>g,":first-child");a&&t.look!=="handDrawn"&&$.selectAll("path").attr("style",a),s&&t.look!=="handDrawn"&&$.selectAll("path").attr("style",s),Tt(t,$);const b=(e==null?void 0:e.padding)??0;return t.width&&t.height&&(t.width+=b/2||0,t.height+=b/2||0),t.intersect=function(y){return vt.rect(t,y)},i}async function Iv(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s}=await Ft(r,t,Dt(t)),i=Math.max(80,s.width+2*(t.padding??0),(t==null?void 0:t.width)??0),a=Math.max(50,s.height+2*(t.padding??0),(t==null?void 0:t.height)??0),l=a/2,{cssStyles:c}=t,u=_t.svg(o),h=kt(t,{});t.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const d=[{x:-i/2,y:-a/2},{x:i/2-l,y:-a/2},...up(-i/2+l,0,l,50,90,270),{x:i/2-l,y:a/2},{x:-i/2,y:a/2}],p=ae(d),g=u.path(p,h),$=o.insert(()=>g,":first-child");return $.attr("class","basic label-container"),c&&t.look!=="handDrawn"&&$.selectChildren("path").attr("style",c),e&&t.look!=="handDrawn"&&$.selectChildren("path").attr("style",e),Tt(t,$),t.intersect=function(b){return it.info("Pill intersect",t,{radius:l,point:b}),vt.polygon(t,d,b)},o}w(Tv,"cylinder"),w(Mv,"dividedRectangle"),w(Av,"doublecircle"),w(Lv,"filledCircle"),w(Ev,"flippedTriangle"),w(Bv,"forkJoin"),w(Iv,"halfRoundedRectangle");var tL=w((r,t,n,e,o)=>[`M${r+o},${t}`,`L${r+n-o},${t}`,`L${r+n},${t-e/2}`,`L${r+n-o},${t-e}`,`L${r+o},${t-e}`,`L${r},${t-e/2}`,"Z"].join(" "),"createHexagonPathD");async function Fv(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s}=await Ft(r,t,Dt(t)),i=s.height+t.padding,a=i/4,l=s.width+2*a+t.padding,c=[{x:a,y:0},{x:l-a,y:0},{x:l,y:-i/2},{x:l-a,y:-i},{x:a,y:-i},{x:0,y:-i/2}];let u;const{cssStyles:h}=t;if(t.look==="handDrawn"){const d=_t.svg(o),p=kt(t,{}),g=tL(0,0,l,i,a),$=d.path(g,p);u=o.insert(()=>$,":first-child").attr("transform",`translate(${-l/2}, ${i/2})`),h&&u.attr("style",h)}else u=to(o,l,i,c);return e&&u.attr("style",e),t.width=l,t.height=i,Tt(t,u),t.intersect=function(d){return vt.polygon(t,c,d)},o}async function Dv(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.label="",t.labelStyle=n;const{shapeSvg:o}=await Ft(r,t,Dt(t)),s=Math.max(30,(t==null?void 0:t.width)??0),i=Math.max(30,(t==null?void 0:t.height)??0),{cssStyles:a}=t,l=_t.svg(o),c=kt(t,{});t.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");const u=[{x:0,y:0},{x:s,y:0},{x:0,y:i},{x:s,y:i}],h=ae(u),d=l.path(h,c),p=o.insert(()=>d,":first-child");return p.attr("class","basic label-container"),a&&t.look!=="handDrawn"&&p.selectChildren("path").attr("style",a),e&&t.look!=="handDrawn"&&p.selectChildren("path").attr("style",e),p.attr("transform",`translate(${-s/2}, ${-i/2})`),Tt(t,p),t.intersect=function(g){return it.info("Pill intersect",t,{points:u}),vt.polygon(t,u,g)},o}async function Ov(r,t,{config:{themeVariables:n,flowchart:e}}){const{labelStyles:o}=Mt(t);t.labelStyle=o;const s=t.assetHeight??48,i=t.assetWidth??48,a=Math.max(s,i),l=e==null?void 0:e.wrappingWidth;t.width=Math.max(a,l??0);const{shapeSvg:c,bbox:u,label:h}=await Ft(r,t,"icon-shape default"),d=t.pos==="t",p=a,g=a,{nodeBorder:$}=n,{stylesMap:b}=ni(t),y=-g/2,x=-p/2,M=t.label?8:0,L=_t.svg(c),A=kt(t,{stroke:"none",fill:"none"});t.look!=="handDrawn"&&(A.roughness=0,A.fillStyle="solid");const B=L.rectangle(y,x,g,p,A),E=Math.max(g,u.width),F=p+u.height+M,U=L.rectangle(-E/2,-F/2,E,F,{...A,fill:"transparent",stroke:"none"}),tt=c.insert(()=>B,":first-child"),q=c.insert(()=>U);if(t.icon){const N=c.append("g");N.html(`<g>${await Ac(t.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const R=N.node().getBBox(),j=R.width,Q=R.height,z=R.x,G=R.y;N.attr("transform",`translate(${-j/2-z},${d?u.height/2+M/2-Q/2-G:-u.height/2-M/2-Q/2-G})`),N.attr("style",`color: ${b.get("stroke")??$};`)}return h.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${d?-F/2:F/2-u.height})`),tt.attr("transform",`translate(0,${d?u.height/2+M/2:-u.height/2-M/2})`),Tt(t,q),t.intersect=function(N){if(it.info("iconSquare intersect",t,N),!t.label)return vt.rect(t,N);const R=t.x??0,j=t.y??0,Q=t.height??0;let z=[];return z=d?[{x:R-u.width/2,y:j-Q/2},{x:R+u.width/2,y:j-Q/2},{x:R+u.width/2,y:j-Q/2+u.height+M},{x:R+g/2,y:j-Q/2+u.height+M},{x:R+g/2,y:j+Q/2},{x:R-g/2,y:j+Q/2},{x:R-g/2,y:j-Q/2+u.height+M},{x:R-u.width/2,y:j-Q/2+u.height+M}]:[{x:R-g/2,y:j-Q/2},{x:R+g/2,y:j-Q/2},{x:R+g/2,y:j-Q/2+p},{x:R+u.width/2,y:j-Q/2+p},{x:R+u.width/2/2,y:j+Q/2},{x:R-u.width/2,y:j+Q/2},{x:R-u.width/2,y:j-Q/2+p},{x:R-g/2,y:j-Q/2+p}],vt.polygon(t,z,N)},c}async function zv(r,t,{config:{themeVariables:n,flowchart:e}}){const{labelStyles:o}=Mt(t);t.labelStyle=o;const s=t.assetHeight??48,i=t.assetWidth??48,a=Math.max(s,i),l=e==null?void 0:e.wrappingWidth;t.width=Math.max(a,l??0);const{shapeSvg:c,bbox:u,label:h}=await Ft(r,t,"icon-shape default"),d=t.label?8:0,p=t.pos==="t",{nodeBorder:g,mainBkg:$}=n,{stylesMap:b}=ni(t),y=_t.svg(c),x=kt(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const M=b.get("fill");x.stroke=M??$;const L=c.append("g");t.icon&&L.html(`<g>${await Ac(t.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const A=L.node().getBBox(),B=A.width,E=A.height,F=A.x,U=A.y,tt=Math.max(B,E)*Math.SQRT2+40,q=y.circle(0,0,tt,x),N=Math.max(tt,u.width),R=tt+u.height+d,j=y.rectangle(-N/2,-R/2,N,R,{...x,fill:"transparent",stroke:"none"}),Q=c.insert(()=>q,":first-child"),z=c.insert(()=>j);return L.attr("transform",`translate(${-B/2-F},${p?u.height/2+d/2-E/2-U:-u.height/2-d/2-E/2-U})`),L.attr("style",`color: ${b.get("stroke")??g};`),h.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${p?-R/2:R/2-u.height})`),Q.attr("transform",`translate(0,${p?u.height/2+d/2:-u.height/2-d/2})`),Tt(t,z),t.intersect=function(G){return it.info("iconSquare intersect",t,G),vt.rect(t,G)},c}async function Nv(r,t,{config:{themeVariables:n,flowchart:e}}){const{labelStyles:o}=Mt(t);t.labelStyle=o;const s=t.assetHeight??48,i=t.assetWidth??48,a=Math.max(s,i),l=e==null?void 0:e.wrappingWidth;t.width=Math.max(a,l??0);const{shapeSvg:c,bbox:u,halfPadding:h,label:d}=await Ft(r,t,"icon-shape default"),p=t.pos==="t",g=a+2*h,$=a+2*h,{nodeBorder:b,mainBkg:y}=n,{stylesMap:x}=ni(t),M=-$/2,L=-g/2,A=t.label?8:0,B=_t.svg(c),E=kt(t,{});t.look!=="handDrawn"&&(E.roughness=0,E.fillStyle="solid");const F=x.get("fill");E.stroke=F??y;const U=B.path(Jr(M,L,$,g,5),E),tt=Math.max($,u.width),q=g+u.height+A,N=B.rectangle(-tt/2,-q/2,tt,q,{...E,fill:"transparent",stroke:"none"}),R=c.insert(()=>U,":first-child").attr("class","icon-shape2"),j=c.insert(()=>N);if(t.icon){const Q=c.append("g");Q.html(`<g>${await Ac(t.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const z=Q.node().getBBox(),G=z.width,K=z.height,et=z.x,ct=z.y;Q.attr("transform",`translate(${-G/2-et},${p?u.height/2+A/2-K/2-ct:-u.height/2-A/2-K/2-ct})`),Q.attr("style",`color: ${x.get("stroke")??b};`)}return d.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${p?-q/2:q/2-u.height})`),R.attr("transform",`translate(0,${p?u.height/2+A/2:-u.height/2-A/2})`),Tt(t,j),t.intersect=function(Q){if(it.info("iconSquare intersect",t,Q),!t.label)return vt.rect(t,Q);const z=t.x??0,G=t.y??0,K=t.height??0;let et=[];return et=p?[{x:z-u.width/2,y:G-K/2},{x:z+u.width/2,y:G-K/2},{x:z+u.width/2,y:G-K/2+u.height+A},{x:z+$/2,y:G-K/2+u.height+A},{x:z+$/2,y:G+K/2},{x:z-$/2,y:G+K/2},{x:z-$/2,y:G-K/2+u.height+A},{x:z-u.width/2,y:G-K/2+u.height+A}]:[{x:z-$/2,y:G-K/2},{x:z+$/2,y:G-K/2},{x:z+$/2,y:G-K/2+g},{x:z+u.width/2,y:G-K/2+g},{x:z+u.width/2/2,y:G+K/2},{x:z-u.width/2,y:G+K/2},{x:z-u.width/2,y:G-K/2+g},{x:z-$/2,y:G-K/2+g}],vt.polygon(t,et,Q)},c}async function Rv(r,t,{config:{themeVariables:n,flowchart:e}}){const{labelStyles:o}=Mt(t);t.labelStyle=o;const s=t.assetHeight??48,i=t.assetWidth??48,a=Math.max(s,i),l=e==null?void 0:e.wrappingWidth;t.width=Math.max(a,l??0);const{shapeSvg:c,bbox:u,halfPadding:h,label:d}=await Ft(r,t,"icon-shape default"),p=t.pos==="t",g=a+2*h,$=a+2*h,{nodeBorder:b,mainBkg:y}=n,{stylesMap:x}=ni(t),M=-$/2,L=-g/2,A=t.label?8:0,B=_t.svg(c),E=kt(t,{});t.look!=="handDrawn"&&(E.roughness=0,E.fillStyle="solid");const F=x.get("fill");E.stroke=F??y;const U=B.path(Jr(M,L,$,g,.1),E),tt=Math.max($,u.width),q=g+u.height+A,N=B.rectangle(-tt/2,-q/2,tt,q,{...E,fill:"transparent",stroke:"none"}),R=c.insert(()=>U,":first-child"),j=c.insert(()=>N);if(t.icon){const Q=c.append("g");Q.html(`<g>${await Ac(t.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const z=Q.node().getBBox(),G=z.width,K=z.height,et=z.x,ct=z.y;Q.attr("transform",`translate(${-G/2-et},${p?u.height/2+A/2-K/2-ct:-u.height/2-A/2-K/2-ct})`),Q.attr("style",`color: ${x.get("stroke")??b};`)}return d.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${p?-q/2:q/2-u.height})`),R.attr("transform",`translate(0,${p?u.height/2+A/2:-u.height/2-A/2})`),Tt(t,j),t.intersect=function(Q){if(it.info("iconSquare intersect",t,Q),!t.label)return vt.rect(t,Q);const z=t.x??0,G=t.y??0,K=t.height??0;let et=[];return et=p?[{x:z-u.width/2,y:G-K/2},{x:z+u.width/2,y:G-K/2},{x:z+u.width/2,y:G-K/2+u.height+A},{x:z+$/2,y:G-K/2+u.height+A},{x:z+$/2,y:G+K/2},{x:z-$/2,y:G+K/2},{x:z-$/2,y:G-K/2+u.height+A},{x:z-u.width/2,y:G-K/2+u.height+A}]:[{x:z-$/2,y:G-K/2},{x:z+$/2,y:G-K/2},{x:z+$/2,y:G-K/2+g},{x:z+u.width/2,y:G-K/2+g},{x:z+u.width/2/2,y:G+K/2},{x:z-u.width/2,y:G+K/2},{x:z-u.width/2,y:G-K/2+g},{x:z-$/2,y:G-K/2+g}],vt.polygon(t,et,Q)},c}async function Pv(r,t,{config:{flowchart:n}}){const e=new Image;e.src=(t==null?void 0:t.img)??"",await e.decode();const o=Number(e.naturalWidth.toString().replace("px","")),s=Number(e.naturalHeight.toString().replace("px",""));t.imageAspectRatio=o/s;const{labelStyles:i}=Mt(t);t.labelStyle=i;const a=n==null?void 0:n.wrappingWidth;t.defaultWidth=n==null?void 0:n.wrappingWidth;const l=Math.max(t.label?a??0:0,(t==null?void 0:t.assetWidth)??o),c=t.constraint==="on"&&(t!=null&&t.assetHeight)?t.assetHeight*t.imageAspectRatio:l,u=t.constraint==="on"?c/t.imageAspectRatio:(t==null?void 0:t.assetHeight)??s;t.width=Math.max(c,a??0);const{shapeSvg:h,bbox:d,label:p}=await Ft(r,t,"image-shape default"),g=t.pos==="t",$=-c/2,b=-u/2,y=t.label?8:0,x=_t.svg(h),M=kt(t,{});t.look!=="handDrawn"&&(M.roughness=0,M.fillStyle="solid");const L=x.rectangle($,b,c,u,M),A=Math.max(c,d.width),B=u+d.height+y,E=x.rectangle(-A/2,-B/2,A,B,{...M,fill:"none",stroke:"none"}),F=h.insert(()=>L,":first-child"),U=h.insert(()=>E);if(t.img){const tt=h.append("image");tt.attr("href",t.img),tt.attr("width",c),tt.attr("height",u),tt.attr("preserveAspectRatio","none"),tt.attr("transform",`translate(${-c/2},${g?B/2-u:-B/2})`)}return p.attr("transform",`translate(${-d.width/2-(d.x-(d.left??0))},${g?-u/2-d.height/2-y/2:u/2-d.height/2+y/2})`),F.attr("transform",`translate(0,${g?d.height/2+y/2:-d.height/2-y/2})`),Tt(t,U),t.intersect=function(tt){if(it.info("iconSquare intersect",t,tt),!t.label)return vt.rect(t,tt);const q=t.x??0,N=t.y??0,R=t.height??0;let j=[];return j=g?[{x:q-d.width/2,y:N-R/2},{x:q+d.width/2,y:N-R/2},{x:q+d.width/2,y:N-R/2+d.height+y},{x:q+c/2,y:N-R/2+d.height+y},{x:q+c/2,y:N+R/2},{x:q-c/2,y:N+R/2},{x:q-c/2,y:N-R/2+d.height+y},{x:q-d.width/2,y:N-R/2+d.height+y}]:[{x:q-c/2,y:N-R/2},{x:q+c/2,y:N-R/2},{x:q+c/2,y:N-R/2+u},{x:q+d.width/2,y:N-R/2+u},{x:q+d.width/2/2,y:N+R/2},{x:q-d.width/2,y:N+R/2},{x:q-d.width/2,y:N-R/2+u},{x:q-c/2,y:N-R/2+u}],vt.polygon(t,j,tt)},h}async function Uv(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s}=await Ft(r,t,Dt(t)),i=Math.max(s.width+2*(t.padding??0),(t==null?void 0:t.width)??0),a=Math.max(s.height+2*(t.padding??0),(t==null?void 0:t.height)??0),l=[{x:0,y:0},{x:i,y:0},{x:i+3*a/6,y:-a},{x:-3*a/6,y:-a}];let c;const{cssStyles:u}=t;if(t.look==="handDrawn"){const h=_t.svg(o),d=kt(t,{}),p=ae(l),g=h.path(p,d);c=o.insert(()=>g,":first-child").attr("transform",`translate(${-i/2}, ${a/2})`),u&&c.attr("style",u)}else c=to(o,i,a,l);return e&&c.attr("style",e),t.width=i,t.height=a,Tt(t,c),t.intersect=function(h){return vt.polygon(t,l,h)},o}async function Pc(r,t,n){const{labelStyles:e,nodeStyles:o}=Mt(t);t.labelStyle=e;const{shapeSvg:s,bbox:i}=await Ft(r,t,Dt(t)),a=Math.max(i.width+2*n.labelPaddingX,(t==null?void 0:t.width)||0),l=Math.max(i.height+2*n.labelPaddingY,(t==null?void 0:t.height)||0),c=-a/2,u=-l/2;let h,{rx:d,ry:p}=t;const{cssStyles:g}=t;if(n!=null&&n.rx&&n.ry&&(d=n.rx,p=n.ry),t.look==="handDrawn"){const $=_t.svg(s),b=kt(t,{}),y=d||p?$.path(Jr(c,u,a,l,d||0),b):$.rectangle(c,u,a,l,b);h=s.insert(()=>y,":first-child"),h.attr("class","basic label-container").attr("style",Ln(g))}else h=s.insert("rect",":first-child"),h.attr("class","basic label-container").attr("style",o).attr("rx",Ln(d)).attr("ry",Ln(p)).attr("x",c).attr("y",u).attr("width",a).attr("height",l);return Tt(t,h),t.intersect=function($){return vt.rect(t,$)},s}async function qv(r,t){const{shapeSvg:n,bbox:e,label:o}=await Ft(r,t,"label"),s=n.insert("rect",":first-child");return s.attr("width",.1).attr("height",.1),n.attr("class","label edgeLabel"),o.attr("transform",`translate(${-e.width/2-(e.x-(e.left??0))}, ${-e.height/2-(e.y-(e.top??0))})`),Tt(t,s),t.intersect=function(i){return vt.rect(t,i)},n}async function jv(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s}=await Ft(r,t,Dt(t)),i=Math.max(s.width+(t.padding??0),(t==null?void 0:t.width)??0),a=Math.max(s.height+(t.padding??0),(t==null?void 0:t.height)??0),l=[{x:0,y:0},{x:i+3*a/6,y:0},{x:i,y:-a},{x:-3*a/6,y:-a}];let c;const{cssStyles:u}=t;if(t.look==="handDrawn"){const h=_t.svg(o),d=kt(t,{}),p=ae(l),g=h.path(p,d);c=o.insert(()=>g,":first-child").attr("transform",`translate(${-i/2}, ${a/2})`),u&&c.attr("style",u)}else c=to(o,i,a,l);return e&&c.attr("style",e),t.width=i,t.height=a,Tt(t,c),t.intersect=function(h){return vt.polygon(t,l,h)},o}async function Wv(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s}=await Ft(r,t,Dt(t)),i=Math.max(s.width+(t.padding??0),(t==null?void 0:t.width)??0),a=Math.max(s.height+(t.padding??0),(t==null?void 0:t.height)??0),l=[{x:-3*a/6,y:0},{x:i,y:0},{x:i+3*a/6,y:-a},{x:0,y:-a}];let c;const{cssStyles:u}=t;if(t.look==="handDrawn"){const h=_t.svg(o),d=kt(t,{}),p=ae(l),g=h.path(p,d);c=o.insert(()=>g,":first-child").attr("transform",`translate(${-i/2}, ${a/2})`),u&&c.attr("style",u)}else c=to(o,i,a,l);return e&&c.attr("style",e),t.width=i,t.height=a,Tt(t,c),t.intersect=function(h){return vt.polygon(t,l,h)},o}function Hv(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.label="",t.labelStyle=n;const o=r.insert("g").attr("class",Dt(t)).attr("id",t.domId??t.id),{cssStyles:s}=t,i=Math.max(35,(t==null?void 0:t.width)??0),a=Math.max(35,(t==null?void 0:t.height)??0),l=[{x:i,y:0},{x:0,y:a+3.5},{x:i-14,y:a+3.5},{x:0,y:2*a},{x:i,y:a-3.5},{x:14,y:a-3.5}],c=_t.svg(o),u=kt(t,{});t.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const h=ae(l),d=c.path(h,u),p=o.insert(()=>d,":first-child");return s&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",s),e&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",e),p.attr("transform",`translate(-${i/2},${-a})`),Tt(t,p),t.intersect=function(g){return it.info("lightningBolt intersect",t,g),vt.polygon(t,l,g)},o}w(Fv,"hexagon"),w(Dv,"hourglass"),w(Ov,"icon"),w(zv,"iconCircle"),w(Nv,"iconRounded"),w(Rv,"iconSquare"),w(Pv,"imageSquare"),w(Uv,"inv_trapezoid"),w(Pc,"drawRect"),w(qv,"labelRect"),w(jv,"lean_left"),w(Wv,"lean_right"),w(Hv,"lightningBolt");var eL=w((r,t,n,e,o,s,i)=>[`M${r},${t+s}`,`a${o},${s} 0,0,0 ${n},0`,`a${o},${s} 0,0,0 ${-n},0`,`l0,${e}`,`a${o},${s} 0,0,0 ${n},0`,"l0,"+-e,`M${r},${t+s+i}`,`a${o},${s} 0,0,0 ${n},0`].join(" "),"createCylinderPathD"),nL=w((r,t,n,e,o,s,i)=>[`M${r},${t+s}`,`M${r+n},${t+s}`,`a${o},${s} 0,0,0 ${-n},0`,`l0,${e}`,`a${o},${s} 0,0,0 ${n},0`,"l0,"+-e,`M${r},${t+s+i}`,`a${o},${s} 0,0,0 ${n},0`].join(" "),"createOuterCylinderPathD"),rL=w((r,t,n,e,o,s)=>[`M${r-n/2},${-e/2}`,`a${o},${s} 0,0,0 ${n},0`].join(" "),"createInnerCylinderPathD");async function Vv(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s,label:i}=await Ft(r,t,Dt(t)),a=Math.max(s.width+(t.padding??0),t.width??0),l=a/2,c=l/(2.5+a/50),u=Math.max(s.height+c+(t.padding??0),t.height??0),h=.1*u;let d;const{cssStyles:p}=t;if(t.look==="handDrawn"){const g=_t.svg(o),$=nL(0,0,a,u,l,c,h),b=rL(0,c,a,u,l,c),y=kt(t,{}),x=g.path($,y),M=g.path(b,y);o.insert(()=>M,":first-child").attr("class","line"),d=o.insert(()=>x,":first-child"),d.attr("class","basic label-container"),p&&d.attr("style",p)}else{const g=eL(0,0,a,u,l,c,h);d=o.insert("path",":first-child").attr("d",g).attr("class","basic label-container").attr("style",Ln(p)).attr("style",e)}return d.attr("label-offset-y",c),d.attr("transform",`translate(${-a/2}, ${-(u/2+c)})`),Tt(t,d),i.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-s.height/2+c-(s.y-(s.top??0))})`),t.intersect=function(g){const $=vt.rect(t,g),b=$.x-(t.x??0);if(l!=0&&(Math.abs(b)<(t.width??0)/2||Math.abs(b)==(t.width??0)/2&&Math.abs($.y-(t.y??0))>(t.height??0)/2-c)){let y=c*c*(1-b*b/(l*l));y>0&&(y=Math.sqrt(y)),y=c-y,g.y-(t.y??0)>0&&(y=-y),$.y+=y}return $},o}async function Gv(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s,label:i}=await Ft(r,t,Dt(t)),a=Math.max(s.width+2*(t.padding??0),(t==null?void 0:t.width)??0),l=Math.max(s.height+2*(t.padding??0),(t==null?void 0:t.height)??0),c=l/4,u=l+c,{cssStyles:h}=t,d=_t.svg(o),p=kt(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=[{x:-a/2-a/2*.1,y:-u/2},{x:-a/2-a/2*.1,y:u/2},..._o(-a/2-a/2*.1,u/2,a/2+a/2*.1,u/2,c,.8),{x:a/2+a/2*.1,y:-u/2},{x:-a/2-a/2*.1,y:-u/2},{x:-a/2,y:-u/2},{x:-a/2,y:u/2*1.1},{x:-a/2,y:-u/2}],$=d.polygon(g.map(y=>[y.x,y.y]),p),b=o.insert(()=>$,":first-child");return b.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",h),e&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",e),b.attr("transform",`translate(0,${-c/2})`),i.attr("transform",`translate(${-a/2+(t.padding??0)+a/2*.1/2-(s.x-(s.left??0))},${-l/2+(t.padding??0)-c/2-(s.y-(s.top??0))})`),Tt(t,b),t.intersect=function(y){return vt.polygon(t,g,y)},o}async function Zv(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s,label:i}=await Ft(r,t,Dt(t)),a=Math.max(s.width+2*(t.padding??0),(t==null?void 0:t.width)??0),l=Math.max(s.height+2*(t.padding??0),(t==null?void 0:t.height)??0),c=-a/2,u=-l/2,{cssStyles:h}=t,d=_t.svg(o),p=kt(t,{}),g=[{x:c-5,y:u+5},{x:c-5,y:u+l+5},{x:c+a-5,y:u+l+5},{x:c+a-5,y:u+l},{x:c+a,y:u+l},{x:c+a,y:u+l-5},{x:c+a+5,y:u+l-5},{x:c+a+5,y:u-5},{x:c+5,y:u-5},{x:c+5,y:u},{x:c,y:u},{x:c,y:u+5}],$=[{x:c,y:u+5},{x:c+a-5,y:u+5},{x:c+a-5,y:u+l},{x:c+a,y:u+l},{x:c+a,y:u},{x:c,y:u}];t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const b=ae(g),y=d.path(b,p),x=ae($),M=d.path(x,{...p,fill:"none"}),L=o.insert(()=>M,":first-child");return L.insert(()=>y,":first-child"),L.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",h),e&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",e),i.attr("transform",`translate(${-s.width/2-5-(s.x-(s.left??0))}, ${-s.height/2+5-(s.y-(s.top??0))})`),Tt(t,L),t.intersect=function(A){return vt.polygon(t,g,A)},o}async function Yv(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s,label:i}=await Ft(r,t,Dt(t)),a=Math.max(s.width+2*(t.padding??0),(t==null?void 0:t.width)??0),l=Math.max(s.height+2*(t.padding??0),(t==null?void 0:t.height)??0),c=l/4,u=l+c,h=-a/2,d=-u/2,{cssStyles:p}=t,g=_o(h-5,d+u+5,h+a-5,d+u+5,c,.8),$=g==null?void 0:g[g.length-1],b=[{x:h-5,y:d+5},{x:h-5,y:d+u+5},...g,{x:h+a-5,y:$.y-5},{x:h+a,y:$.y-5},{x:h+a,y:$.y-10},{x:h+a+5,y:$.y-10},{x:h+a+5,y:d-5},{x:h+5,y:d-5},{x:h+5,y:d},{x:h,y:d},{x:h,y:d+5}],y=[{x:h,y:d+5},{x:h+a-5,y:d+5},{x:h+a-5,y:$.y-5},{x:h+a,y:$.y-5},{x:h+a,y:d},{x:h,y:d}],x=_t.svg(o),M=kt(t,{});t.look!=="handDrawn"&&(M.roughness=0,M.fillStyle="solid");const L=ae(b),A=x.path(L,M),B=ae(y),E=x.path(B,M),F=o.insert(()=>A,":first-child");return F.insert(()=>E),F.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&F.selectAll("path").attr("style",p),e&&t.look!=="handDrawn"&&F.selectAll("path").attr("style",e),F.attr("transform",`translate(0,${-c/2})`),i.attr("transform",`translate(${-s.width/2-5-(s.x-(s.left??0))}, ${-s.height/2+5-c/2-(s.y-(s.top??0))})`),Tt(t,F),t.intersect=function(U){return vt.polygon(t,b,U)},o}async function Xv(r,t,{config:{themeVariables:n}}){var b;const{labelStyles:e,nodeStyles:o}=Mt(t);t.labelStyle=e,t.useHtmlLabels||((b=$r().flowchart)==null?void 0:b.htmlLabels)!==!1||(t.centerLabel=!0);const{shapeSvg:s,bbox:i}=await Ft(r,t,Dt(t)),a=Math.max(i.width+2*(t.padding??0),(t==null?void 0:t.width)??0),l=Math.max(i.height+2*(t.padding??0),(t==null?void 0:t.height)??0),c=-a/2,u=-l/2,{cssStyles:h}=t,d=_t.svg(s),p=kt(t,{fill:n.noteBkgColor,stroke:n.noteBorderColor});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=d.rectangle(c,u,a,l,p),$=s.insert(()=>g,":first-child");return $.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&$.selectAll("path").attr("style",h),o&&t.look!=="handDrawn"&&$.selectAll("path").attr("style",o),Tt(t,$),t.intersect=function(y){return vt.rect(t,y)},s}w(Vv,"linedCylinder"),w(Gv,"linedWaveEdgedRect"),w(Zv,"multiRect"),w(Yv,"multiWaveEdgedRectangle"),w(Xv,"note");var oL=w((r,t,n)=>[`M${r+n/2},${t}`,`L${r+n},${t-n/2}`,`L${r+n/2},${t-n}`,`L${r},${t-n/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function Qv(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s}=await Ft(r,t,Dt(t)),i=s.width+t.padding+(s.height+t.padding),a=[{x:i/2,y:0},{x:i,y:-i/2},{x:i/2,y:-i},{x:0,y:-i/2}];let l;const{cssStyles:c}=t;if(t.look==="handDrawn"){const u=_t.svg(o),h=kt(t,{}),d=oL(0,0,i),p=u.path(d,h);l=o.insert(()=>p,":first-child").attr("transform",`translate(${-i/2}, ${i/2})`),c&&l.attr("style",c)}else l=to(o,i,i,a);return e&&l.attr("style",e),Tt(t,l),t.intersect=function(u){return it.debug(`APA12 Intersect called SPLIT
point:`,u,`
node:
`,t,`
res:`,vt.polygon(t,a,u)),vt.polygon(t,a,u)},o}async function Kv(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s,label:i}=await Ft(r,t,Dt(t)),a=-Math.max(s.width+(t.padding??0),(t==null?void 0:t.width)??0)/2,l=-Math.max(s.height+(t.padding??0),(t==null?void 0:t.height)??0)/2,c=l/2,u=[{x:a+c,y:l},{x:a,y:0},{x:a+c,y:-l},{x:-a,y:-l},{x:-a,y:l}],{cssStyles:h}=t,d=_t.svg(o),p=kt(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=ae(u),$=d.path(g,p),b=o.insert(()=>$,":first-child");return b.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",h),e&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",e),b.attr("transform",`translate(${-c/2},0)`),i.attr("transform",`translate(${-c/2-s.width/2-(s.x-(s.left??0))}, ${-s.height/2-(s.y-(s.top??0))})`),Tt(t,b),t.intersect=function(y){return vt.polygon(t,u,y)},o}async function Jv(r,t){var F,U;const{labelStyles:n,nodeStyles:e}=Mt(t);let o;t.labelStyle=n,o=t.cssClasses?"node "+t.cssClasses:"node default";const s=r.insert("g").attr("class",o).attr("id",t.domId||t.id),i=s.insert("g"),a=s.insert("g").attr("class","label").attr("style",e),l=t.description,c=t.label,u=a.node().appendChild(await Uo(c,t.labelStyle,!0,!0));let h={width:0,height:0};if(cn((U=(F=ge())==null?void 0:F.flowchart)==null?void 0:U.htmlLabels)){const tt=u.children[0],q=fe(u);h=tt.getBoundingClientRect(),q.attr("width",h.width),q.attr("height",h.height)}it.info("Text 2",l);const d=l||[],p=u.getBBox(),g=a.node().appendChild(await Uo(d.join?d.join("<br/>"):d,t.labelStyle,!0,!0)),$=g.children[0],b=fe(g);h=$.getBoundingClientRect(),b.attr("width",h.width),b.attr("height",h.height);const y=(t.padding||0)/2;fe(g).attr("transform","translate( "+(h.width>p.width?0:(p.width-h.width)/2)+", "+(p.height+y+5)+")"),fe(u).attr("transform","translate( "+(h.width<p.width?0:-(p.width-h.width)/2)+", 0)"),h=a.node().getBBox(),a.attr("transform","translate("+-h.width/2+", "+(-h.height/2-y+3)+")");const x=h.width+(t.padding||0),M=h.height+(t.padding||0),L=-h.width/2-y,A=-h.height/2-y;let B,E;if(t.look==="handDrawn"){const tt=_t.svg(s),q=kt(t,{}),N=tt.path(Jr(L,A,x,M,t.rx||0),q),R=tt.line(-h.width/2-y,-h.height/2-y+p.height+y,h.width/2+y,-h.height/2-y+p.height+y,q);E=s.insert(()=>(it.debug("Rough node insert CXC",N),R),":first-child"),B=s.insert(()=>(it.debug("Rough node insert CXC",N),N),":first-child")}else B=i.insert("rect",":first-child"),E=i.insert("line"),B.attr("class","outer title-state").attr("style",e).attr("x",-h.width/2-y).attr("y",-h.height/2-y).attr("width",h.width+(t.padding||0)).attr("height",h.height+(t.padding||0)),E.attr("class","divider").attr("x1",-h.width/2-y).attr("x2",h.width/2+y).attr("y1",-h.height/2-y+p.height+y).attr("y2",-h.height/2-y+p.height+y);return Tt(t,B),t.intersect=function(tt){return vt.rect(t,tt)},s}async function t3(r,t){return Pc(r,t,{rx:5,ry:5,classes:"",labelPaddingX:1*((t==null?void 0:t.padding)||0),labelPaddingY:1*((t==null?void 0:t.padding)||0)})}async function e3(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s,label:i}=await Ft(r,t,Dt(t)),a=(t==null?void 0:t.padding)??0,l=Math.max(s.width+2*(t.padding??0),(t==null?void 0:t.width)??0),c=Math.max(s.height+2*(t.padding??0),(t==null?void 0:t.height)??0),u=-s.width/2-a,h=-s.height/2-a,{cssStyles:d}=t,p=_t.svg(o),g=kt(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const $=[{x:u,y:h},{x:u+l+8,y:h},{x:u+l+8,y:h+c},{x:u-8,y:h+c},{x:u-8,y:h},{x:u,y:h},{x:u,y:h+c}],b=p.polygon($.map(x=>[x.x,x.y]),g),y=o.insert(()=>b,":first-child");return y.attr("class","basic label-container").attr("style",Ln(d)),e&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",e),d&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",e),i.attr("transform",`translate(${-l/2+4+(t.padding??0)-(s.x-(s.left??0))},${-c/2+(t.padding??0)-(s.y-(s.top??0))})`),Tt(t,y),t.intersect=function(x){return vt.rect(t,x)},o}async function n3(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s,label:i}=await Ft(r,t,Dt(t)),a=Math.max(s.width+2*(t.padding??0),(t==null?void 0:t.width)??0),l=Math.max(s.height+2*(t.padding??0),(t==null?void 0:t.height)??0),c=-a/2,u=-l/2,{cssStyles:h}=t,d=_t.svg(o),p=kt(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=[{x:c,y:u},{x:c,y:u+l},{x:c+a,y:u+l},{x:c+a,y:u-l/2}],$=ae(g),b=d.path($,p),y=o.insert(()=>b,":first-child");return y.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",h),e&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",e),y.attr("transform",`translate(0, ${l/4})`),i.attr("transform",`translate(${-a/2+(t.padding??0)-(s.x-(s.left??0))}, ${-l/4+(t.padding??0)-(s.y-(s.top??0))})`),Tt(t,y),t.intersect=function(x){return vt.polygon(t,g,x)},o}async function r3(r,t){return Pc(r,t,{rx:0,ry:0,classes:"",labelPaddingX:2*((t==null?void 0:t.padding)||0),labelPaddingY:1*((t==null?void 0:t.padding)||0)})}async function o3(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s}=await Ft(r,t,Dt(t)),i=s.height+t.padding,a=s.width+i/4+t.padding;let l;const{cssStyles:c}=t;if(t.look==="handDrawn"){const u=_t.svg(o),h=kt(t,{}),d=Jr(-a/2,-i/2,a,i,i/2),p=u.path(d,h);l=o.insert(()=>p,":first-child"),l.attr("class","basic label-container").attr("style",Ln(c))}else l=o.insert("rect",":first-child"),l.attr("class","basic label-container").attr("style",e).attr("rx",i/2).attr("ry",i/2).attr("x",-a/2).attr("y",-i/2).attr("width",a).attr("height",i);return Tt(t,l),t.intersect=function(u){return vt.rect(t,u)},o}async function s3(r,t){return Pc(r,t,{rx:5,ry:5,classes:"flowchart-node"})}function i3(r,t,{config:{themeVariables:n}}){const{labelStyles:e,nodeStyles:o}=Mt(t);t.labelStyle=e;const{cssStyles:s}=t,{lineColor:i,stateBorder:a,nodeBorder:l}=n,c=r.insert("g").attr("class","node default").attr("id",t.domId||t.id),u=_t.svg(c),h=kt(t,{});t.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const d=u.circle(0,0,14,{...h,stroke:i,strokeWidth:2}),p=a??l,g=u.circle(0,0,5,{...h,fill:p,stroke:p,strokeWidth:2,fillStyle:"solid"}),$=c.insert(()=>d,":first-child");return $.insert(()=>g),s&&$.selectAll("path").attr("style",s),o&&$.selectAll("path").attr("style",o),Tt(t,$),t.intersect=function(b){return vt.circle(t,7,b)},c}function a3(r,t,{config:{themeVariables:n}}){const{lineColor:e}=n,o=r.insert("g").attr("class","node default").attr("id",t.domId||t.id);let s;if(t.look==="handDrawn"){const i=_t.svg(o).circle(0,0,14,PA(e));s=o.insert(()=>i),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else s=o.insert("circle",":first-child"),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return Tt(t,s),t.intersect=function(i){return vt.circle(t,7,i)},o}async function l3(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s}=await Ft(r,t,Dt(t)),i=((t==null?void 0:t.padding)||0)/2,a=s.width+t.padding,l=s.height+t.padding,c=-s.width/2-i,u=-s.height/2-i,h=[{x:0,y:0},{x:a,y:0},{x:a,y:-l},{x:0,y:-l},{x:0,y:0},{x:-8,y:0},{x:a+8,y:0},{x:a+8,y:-l},{x:-8,y:-l},{x:-8,y:0}];if(t.look==="handDrawn"){const d=_t.svg(o),p=kt(t,{}),g=d.rectangle(c-8,u,a+16,l,p),$=d.line(c,u,c,u+l,p),b=d.line(c+a,u,c+a,u+l,p);o.insert(()=>$,":first-child"),o.insert(()=>b,":first-child");const y=o.insert(()=>g,":first-child"),{cssStyles:x}=t;y.attr("class","basic label-container").attr("style",Ln(x)),Tt(t,y)}else{const d=to(o,a,l,h);e&&d.attr("style",e),Tt(t,d)}return t.intersect=function(d){return vt.polygon(t,h,d)},o}async function c3(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s}=await Ft(r,t,Dt(t)),i=Math.max(s.width+2*(t.padding??0),(t==null?void 0:t.width)??0),a=Math.max(s.height+2*(t.padding??0),(t==null?void 0:t.height)??0),l=-i/2,c=-a/2,u=.2*a,h=.2*a,{cssStyles:d}=t,p=_t.svg(o),g=kt(t,{}),$=[{x:l-u/2,y:c},{x:l+i+u/2,y:c},{x:l+i+u/2,y:c+a},{x:l-u/2,y:c+a}],b=[{x:l+i-u/2,y:c+a},{x:l+i+u/2,y:c+a},{x:l+i+u/2,y:c+a-h}];t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=ae($),x=p.path(y,g),M=ae(b),L=p.path(M,{...g,fillStyle:"solid"}),A=o.insert(()=>L,":first-child");return A.insert(()=>x,":first-child"),A.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&A.selectAll("path").attr("style",d),e&&t.look!=="handDrawn"&&A.selectAll("path").attr("style",e),Tt(t,A),t.intersect=function(B){return vt.polygon(t,$,B)},o}async function u3(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s,label:i}=await Ft(r,t,Dt(t)),a=Math.max(s.width+2*(t.padding??0),(t==null?void 0:t.width)??0),l=Math.max(s.height+2*(t.padding??0),(t==null?void 0:t.height)??0),c=l/4,u=.2*a,h=.2*l,d=l+c,{cssStyles:p}=t,g=_t.svg(o),$=kt(t,{});t.look!=="handDrawn"&&($.roughness=0,$.fillStyle="solid");const b=[{x:-a/2-a/2*.1,y:d/2},..._o(-a/2-a/2*.1,d/2,a/2+a/2*.1,d/2,c,.8),{x:a/2+a/2*.1,y:-d/2},{x:-a/2-a/2*.1,y:-d/2}],y=-a/2+a/2*.1,x=-d/2-.4*h,M=[{x:y+a-u,y:1.4*(x+l)},{x:y+a,y:x+l-h},{x:y+a,y:.9*(x+l)},..._o(y+a,1.3*(x+l),y+a-u,1.5*(x+l),.03*-l,.5)],L=ae(b),A=g.path(L,$),B=ae(M),E=g.path(B,{...$,fillStyle:"solid"}),F=o.insert(()=>E,":first-child");return F.insert(()=>A,":first-child"),F.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&F.selectAll("path").attr("style",p),e&&t.look!=="handDrawn"&&F.selectAll("path").attr("style",e),F.attr("transform",`translate(0,${-c/2})`),i.attr("transform",`translate(${-a/2+(t.padding??0)-(s.x-(s.left??0))},${-l/2+(t.padding??0)-c/2-(s.y-(s.top??0))})`),Tt(t,F),t.intersect=function(U){return vt.polygon(t,b,U)},o}async function h3(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s}=await Ft(r,t,Dt(t)),i=Math.max(s.width+t.padding,(t==null?void 0:t.width)||0),a=Math.max(s.height+t.padding,(t==null?void 0:t.height)||0),l=-i/2,c=-a/2,u=o.insert("rect",":first-child");return u.attr("class","text").attr("style",e).attr("rx",0).attr("ry",0).attr("x",l).attr("y",c).attr("width",i).attr("height",a),Tt(t,u),t.intersect=function(h){return vt.rect(t,h)},o}w(Qv,"question"),w(Kv,"rect_left_inv_arrow"),w(Jv,"rectWithTitle"),w(t3,"roundedRect"),w(e3,"shadedProcess"),w(n3,"slopedRect"),w(r3,"squareRect"),w(o3,"stadium"),w(s3,"state"),w(i3,"stateEnd"),w(a3,"stateStart"),w(l3,"subroutine"),w(c3,"taggedRect"),w(u3,"taggedWaveEdgedRectangle"),w(h3,"text");var sL=w((r,t,n,e,o,s)=>`M${r},${t}
    a${o},${s} 0,0,1 0,${-e}
    l${n},0
    a${o},${s} 0,0,1 0,${e}
    M${n},${-e}
    a${o},${s} 0,0,0 0,${e}
    l${-n},0`,"createCylinderPathD"),iL=w((r,t,n,e,o,s)=>[`M${r},${t}`,`M${r+n},${t}`,`a${o},${s} 0,0,0 0,${-e}`,`l${-n},0`,`a${o},${s} 0,0,0 0,${e}`,`l${n},0`].join(" "),"createOuterCylinderPathD"),aL=w((r,t,n,e,o,s)=>[`M${r+n/2},${-e/2}`,`a${o},${s} 0,0,0 0,${e}`].join(" "),"createInnerCylinderPathD");async function d3(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s,label:i,halfPadding:a}=await Ft(r,t,Dt(t)),l=t.look==="neo"?2*a:a,c=s.height+l,u=c/2,h=u/(2.5+c/50),d=s.width+h+l,{cssStyles:p}=t;let g;if(t.look==="handDrawn"){const $=_t.svg(o),b=iL(0,0,d,c,h,u),y=aL(0,0,d,c,h,u),x=$.path(b,kt(t,{})),M=$.path(y,kt(t,{fill:"none"}));g=o.insert(()=>M,":first-child"),g=o.insert(()=>x,":first-child"),g.attr("class","basic label-container"),p&&g.attr("style",p)}else{const $=sL(0,0,d,c,h,u);g=o.insert("path",":first-child").attr("d",$).attr("class","basic label-container").attr("style",Ln(p)).attr("style",e),g.attr("class","basic label-container"),p&&g.selectAll("path").attr("style",p),e&&g.selectAll("path").attr("style",e)}return g.attr("label-offset-x",h),g.attr("transform",`translate(${-d/2}, ${c/2} )`),i.attr("transform",`translate(${-s.width/2-h-(s.x-(s.left??0))}, ${-s.height/2-(s.y-(s.top??0))})`),Tt(t,g),t.intersect=function($){const b=vt.rect(t,$),y=b.y-(t.y??0);if(u!=0&&(Math.abs(y)<(t.height??0)/2||Math.abs(y)==(t.height??0)/2&&Math.abs(b.x-(t.x??0))>(t.width??0)/2-h)){let x=h*h*(1-y*y/(u*u));x!=0&&(x=Math.sqrt(Math.abs(x))),x=h-x,$.x-(t.x??0)>0&&(x=-x),b.x+=x}return b},o}async function p3(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s}=await Ft(r,t,Dt(t)),i=s.width+t.padding,a=s.height+t.padding,l=[{x:-3*a/6,y:0},{x:i+3*a/6,y:0},{x:i,y:-a},{x:0,y:-a}];let c;const{cssStyles:u}=t;if(t.look==="handDrawn"){const h=_t.svg(o),d=kt(t,{}),p=ae(l),g=h.path(p,d);c=o.insert(()=>g,":first-child").attr("transform",`translate(${-i/2}, ${a/2})`),u&&c.attr("style",u)}else c=to(o,i,a,l);return e&&c.attr("style",e),t.width=i,t.height=a,Tt(t,c),t.intersect=function(h){return vt.polygon(t,l,h)},o}async function f3(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s}=await Ft(r,t,Dt(t)),i=Math.max(60,s.width+2*(t.padding??0),(t==null?void 0:t.width)??0),a=Math.max(20,s.height+2*(t.padding??0),(t==null?void 0:t.height)??0),{cssStyles:l}=t,c=_t.svg(o),u=kt(t,{});t.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const h=[{x:-i/2*.8,y:-a/2},{x:i/2*.8,y:-a/2},{x:i/2,y:-a/2*.6},{x:i/2,y:a/2},{x:-i/2,y:a/2},{x:-i/2,y:-a/2*.6}],d=ae(h),p=c.path(d,u),g=o.insert(()=>p,":first-child");return g.attr("class","basic label-container"),l&&t.look!=="handDrawn"&&g.selectChildren("path").attr("style",l),e&&t.look!=="handDrawn"&&g.selectChildren("path").attr("style",e),Tt(t,g),t.intersect=function($){return vt.polygon(t,h,$)},o}async function g3(r,t){var x;const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s,label:i}=await Ft(r,t,Dt(t)),a=cn((x=ge().flowchart)==null?void 0:x.htmlLabels),l=s.width+(t.padding??0),c=l+s.height,u=l+s.height,h=[{x:0,y:0},{x:u,y:0},{x:u/2,y:-c}],{cssStyles:d}=t,p=_t.svg(o),g=kt(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const $=ae(h),b=p.path($,g),y=o.insert(()=>b,":first-child").attr("transform",`translate(${-c/2}, ${c/2})`);return d&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",d),e&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",e),t.width=l,t.height=c,Tt(t,y),i.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${c/2-(s.height+(t.padding??0)/(a?2:1)-(s.y-(s.top??0)))})`),t.intersect=function(M){return it.info("Triangle intersect",t,h,M),vt.polygon(t,h,M)},o}async function m3(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s,label:i}=await Ft(r,t,Dt(t)),a=Math.max(s.width+2*(t.padding??0),(t==null?void 0:t.width)??0),l=Math.max(s.height+2*(t.padding??0),(t==null?void 0:t.height)??0),c=l/8,u=l+c,{cssStyles:h}=t,d=70-a,p=d>0?d/2:0,g=_t.svg(o),$=kt(t,{});t.look!=="handDrawn"&&($.roughness=0,$.fillStyle="solid");const b=[{x:-a/2-p,y:u/2},..._o(-a/2-p,u/2,a/2+p,u/2,c,.8),{x:a/2+p,y:-u/2},{x:-a/2-p,y:-u/2}],y=ae(b),x=g.path(y,$),M=o.insert(()=>x,":first-child");return M.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&M.selectAll("path").attr("style",h),e&&t.look!=="handDrawn"&&M.selectAll("path").attr("style",e),M.attr("transform",`translate(0,${-c/2})`),i.attr("transform",`translate(${-a/2+(t.padding??0)-(s.x-(s.left??0))},${-l/2+(t.padding??0)-c-(s.y-(s.top??0))})`),Tt(t,M),t.intersect=function(L){return vt.polygon(t,b,L)},o}async function $3(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s}=await Ft(r,t,Dt(t)),i=Math.max(s.width+2*(t.padding??0),(t==null?void 0:t.width)??0),a=Math.max(s.height+2*(t.padding??0),(t==null?void 0:t.height)??0),l=i/a;let c=i,u=a;c>u*l?u=c/l:c=u*l,c=Math.max(c,100),u=Math.max(u,50);const h=Math.min(.2*u,u/4),d=u+2*h,{cssStyles:p}=t,g=_t.svg(o),$=kt(t,{});t.look!=="handDrawn"&&($.roughness=0,$.fillStyle="solid");const b=[{x:-c/2,y:d/2},..._o(-c/2,d/2,c/2,d/2,h,1),{x:c/2,y:-d/2},..._o(c/2,-d/2,-c/2,-d/2,h,-1)],y=ae(b),x=g.path(y,$),M=o.insert(()=>x,":first-child");return M.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&M.selectAll("path").attr("style",p),e&&t.look!=="handDrawn"&&M.selectAll("path").attr("style",e),Tt(t,M),t.intersect=function(L){return vt.polygon(t,b,L)},o}async function y3(r,t){const{labelStyles:n,nodeStyles:e}=Mt(t);t.labelStyle=n;const{shapeSvg:o,bbox:s,label:i}=await Ft(r,t,Dt(t)),a=Math.max(s.width+2*(t.padding??0),(t==null?void 0:t.width)??0),l=Math.max(s.height+2*(t.padding??0),(t==null?void 0:t.height)??0),c=-a/2,u=-l/2,{cssStyles:h}=t,d=_t.svg(o),p=kt(t,{}),g=[{x:c-5,y:u-5},{x:c-5,y:u+l},{x:c+a,y:u+l},{x:c+a,y:u-5}],$=`M${c-5},${u-5} L${c+a},${u-5} L${c+a},${u+l} L${c-5},${u+l} L${c-5},${u-5}
                M${c-5},${u} L${c+a},${u}
                M${c},${u-5} L${c},${u+l}`;t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const b=d.path($,p),y=o.insert(()=>b,":first-child");return y.attr("transform","translate(2.5, 2.5)"),y.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",h),e&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",e),i.attr("transform",`translate(${-s.width/2+2.5-(s.x-(s.left??0))}, ${-s.height/2+2.5-(s.y-(s.top??0))})`),Tt(t,y),t.intersect=function(x){return vt.polygon(t,g,x)},o}async function x3(r,t,n,e,o=n.class.padding??12){const s=e?0:3,i=r.insert("g").attr("class",Dt(t)).attr("id",t.domId||t.id);let a=null,l=null,c=null,u=null,h=0,d=0,p=0;if(a=i.insert("g").attr("class","annotation-group text"),t.annotations.length>0){const x=t.annotations[0];await Ai(a,{text:`${x}`},0),h=a.node().getBBox().height}l=i.insert("g").attr("class","label-group text"),await Ai(l,t,0,["font-weight: bolder"]);const g=l.node().getBBox();d=g.height,c=i.insert("g").attr("class","members-group text");let $=0;for(const x of t.members)$+=await Ai(c,x,$,[x.parseClassifier()])+s;p=c.node().getBBox().height,p<=0&&(p=o/2),u=i.insert("g").attr("class","methods-group text");let b=0;for(const x of t.methods)b+=await Ai(u,x,b,[x.parseClassifier()])+s;let y=i.node().getBBox();if(a!==null){const x=a.node().getBBox();a.attr("transform",`translate(${-x.width/2})`)}return l.attr("transform",`translate(${-g.width/2}, ${h})`),y=i.node().getBBox(),c.attr("transform",`translate(0, ${h+d+2*o})`),y=i.node().getBBox(),u.attr("transform",`translate(0, ${h+d+(p?p+4*o:2*o)})`),y=i.node().getBBox(),{shapeSvg:i,bbox:y}}async function Ai(r,t,n,e=[]){const o=r.insert("g").attr("class","label").attr("style",e.join("; ")),s=$r();let i="useHtmlLabels"in t?t.useHtmlLabels:cn(s.htmlLabels)??!0,a="";a="text"in t?t.text:t.label,!i&&a.startsWith("\\")&&(a=a.substring(1)),Ns(a)&&(i=!0);const l=await ti(o,K2(Js(a)),{width:Ps(a,s)+50,classes:"markdown-node-label",useHtmlLabels:i},s);let c,u=1;if(i){const h=l.children[0],d=fe(l);u=h.innerHTML.split("<br>").length,h.innerHTML.includes("</math>")&&(u+=h.innerHTML.split("<mrow>").length-1);const p=h.getElementsByTagName("img");if(p){const g=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...p].map($=>new Promise(b=>{function y(){var x;if($.style.display="flex",$.style.flexDirection="column",g){const M=((x=s.fontSize)==null?void 0:x.toString())??window.getComputedStyle(document.body).fontSize,L=5,A=parseInt(M,10)*L+"px";$.style.minWidth=A,$.style.maxWidth=A}else $.style.width="100%";b($)}w(y,"setupImage"),setTimeout(()=>{$.complete&&y()}),$.addEventListener("error",y),$.addEventListener("load",y)})))}c=h.getBoundingClientRect(),d.attr("width",c.width),d.attr("height",c.height)}else{e.includes("font-weight: bolder")&&fe(l).selectAll("tspan").attr("font-weight",""),u=l.children.length;const h=l.children[0];(l.textContent===""||l.textContent.includes("&gt"))&&(h.textContent=a[0]+a.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),a[1]===" "&&(h.textContent=h.textContent[0]+" "+h.textContent.substring(1))),h.textContent==="undefined"&&(h.textContent=""),c=l.getBBox()}return o.attr("transform","translate(0,"+(-c.height/(2*u)+n)+")"),c.height}async function b3(r,t){var U,tt;const n=ge(),e=n.class.padding??12,o=e,s=t.useHtmlLabels??cn(n.htmlLabels)??!0,i=t;i.annotations=i.annotations??[],i.members=i.members??[],i.methods=i.methods??[];const{shapeSvg:a,bbox:l}=await x3(r,t,n,s,o),{labelStyles:c,nodeStyles:u}=Mt(t);t.labelStyle=c,t.cssStyles=i.styles||"";const h=((U=i.styles)==null?void 0:U.join(";"))||u||"";t.cssStyles||(t.cssStyles=h.replaceAll("!important","").split(";"));const d=i.members.length===0&&i.methods.length===0&&!((tt=n.class)!=null&&tt.hideEmptyMembersBox),p=_t.svg(a),g=kt(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const $=l.width;let b=l.height;i.members.length===0&&i.methods.length===0?b+=o:i.members.length>0&&i.methods.length===0&&(b+=2*o);const y=-$/2,x=-b/2,M=p.rectangle(y-e,x-e-(d?e:i.members.length===0&&i.methods.length===0?-e/2:0),$+2*e,b+2*e+(d?2*e:i.members.length===0&&i.methods.length===0?-e:0),g),L=a.insert(()=>M,":first-child");L.attr("class","basic label-container");const A=L.node().getBBox();a.selectAll(".text").each((q,N,R)=>{var et;const j=fe(R[N]),Q=j.attr("transform");let z=0;if(Q){const ct=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(Q);ct&&(z=parseFloat(ct[2]))}let G=z+x+e-(d?e:i.members.length===0&&i.methods.length===0?-e/2:0);s||(G-=4);let K=y;(j.attr("class").includes("label-group")||j.attr("class").includes("annotation-group"))&&(K=-((et=j.node())==null?void 0:et.getBBox().width)/2||0,a.selectAll("text").each(function(ct,st,at){window.getComputedStyle(at[st]).textAnchor==="middle"&&(K=0)})),j.attr("transform",`translate(${K}, ${G})`)});const B=a.select(".annotation-group").node().getBBox().height-(d?e/2:0)||0,E=a.select(".label-group").node().getBBox().height-(d?e/2:0)||0,F=a.select(".members-group").node().getBBox().height-(d?e/2:0)||0;if(i.members.length>0||i.methods.length>0||d){const q=p.line(A.x,B+E+x+e,A.x+A.width,B+E+x+e,g);a.insert(()=>q).attr("class","divider").attr("style",h)}if(d||i.members.length>0||i.methods.length>0){const q=p.line(A.x,B+E+F+x+2*o+e,A.x+A.width,B+E+F+x+e+2*o,g);a.insert(()=>q).attr("class","divider").attr("style",h)}if(i.look!=="handDrawn"&&a.selectAll("path").attr("style",h),L.select(":nth-child(2)").attr("style",h),a.selectAll(".divider").select("path").attr("style",h),t.labelStyle?a.selectAll("span").attr("style",t.labelStyle):a.selectAll("span").attr("style",h),!s){const q=RegExp(/color\s*:\s*([^;]*)/),N=q.exec(h);if(N){const R=N[0].replace("color","fill");a.selectAll("tspan").attr("style",R)}else if(c){const R=q.exec(c);if(R){const j=R[0].replace("color","fill");a.selectAll("tspan").attr("style",j)}}}return Tt(t,L),t.intersect=function(q){return vt.rect(t,q)},a}w(d3,"tiltedCylinder"),w(p3,"trapezoid"),w(f3,"trapezoidalPentagon"),w(g3,"triangle"),w(m3,"waveEdgedRectangle"),w($3,"waveRectangle"),w(y3,"windowPane"),w(x3,"textHelper"),w(Ai,"addText"),w(b3,"classBox");var lL=w(r=>{switch(r){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function w3(r,t,{config:n}){var tt,q;const{labelStyles:e,nodeStyles:o}=Mt(t);t.labelStyle=e||"";const s=t.width;t.width=(t.width??200)-10;const{shapeSvg:i,bbox:a,label:l}=await Ft(r,t,Dt(t)),c=t.padding||10;let u,h="";"ticket"in t&&t.ticket&&((tt=n==null?void 0:n.kanban)!=null&&tt.ticketBaseUrl)&&(h=(q=n==null?void 0:n.kanban)==null?void 0:q.ticketBaseUrl.replace("#TICKET#",t.ticket),u=i.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",h).attr("target","_blank"));const d={useHtmlLabels:t.useHtmlLabels,labelStyle:t.labelStyle||"",width:t.width,img:t.img,padding:t.padding||8,centerLabel:!1};let p,g;({label:p,bbox:g}=u?await Iu(u,"ticket"in t&&t.ticket||"",d):await Iu(i,"ticket"in t&&t.ticket||"",d));const{label:$,bbox:b}=await Iu(i,"assigned"in t&&t.assigned||"",d);t.width=s;const y=(t==null?void 0:t.width)||0,x=Math.max(g.height,b.height)/2,M=Math.max(a.height+20,(t==null?void 0:t.height)||0)+x,L=-y/2,A=-M/2;let B;l.attr("transform","translate("+(c-y/2)+", "+(-x-a.height/2)+")"),p.attr("transform","translate("+(c-y/2)+", "+(-x+a.height/2)+")"),$.attr("transform","translate("+(c+y/2-b.width-20)+", "+(-x+a.height/2)+")");const{rx:E,ry:F}=t,{cssStyles:U}=t;if(t.look==="handDrawn"){const N=_t.svg(i),R=kt(t,{}),j=E||F?N.path(Jr(L,A,y,M,E||0),R):N.rectangle(L,A,y,M,R);B=i.insert(()=>j,":first-child"),B.attr("class","basic label-container").attr("style",U||null)}else{B=i.insert("rect",":first-child"),B.attr("class","basic label-container __APA__").attr("style",o).attr("rx",E??5).attr("ry",F??5).attr("x",L).attr("y",A).attr("width",y).attr("height",M);const N="priority"in t&&t.priority;if(N){const R=i.append("line"),j=L+2,Q=A+Math.floor((E??0)/2),z=A+M-Math.floor((E??0)/2);R.attr("x1",j).attr("y1",Q).attr("x2",j).attr("y2",z).attr("stroke-width","4").attr("stroke",lL(N))}}return Tt(t,B),t.height=M,t.intersect=function(N){return vt.rect(t,N)},i}w(w3,"kanbanItem");var cL=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:r3},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:t3},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:o3},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:l3},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:Tv},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:bv},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:Qv},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:Fv},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:Wv},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:jv},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:p3},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:Uv},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:Av},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:h3},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:yv},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:e3},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:a3},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:i3},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:Bv},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:Dv},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:_v},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:kv},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:Cv},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:Hv},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:m3},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:Iv},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:d3},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:Vv},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:Sv},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:Mv},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:g3},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:y3},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:Lv},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:f3},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:Ev},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:n3},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:Yv},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:Zv},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:$v},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:vv},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:u3},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:c3},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:$3},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:Kv},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:Gv}],uL=w(()=>{const r={state:s3,choice:xv,note:Xv,rectWithTitle:Jv,labelRect:qv,iconSquare:Rv,iconCircle:zv,icon:Ov,iconRounded:Nv,imageSquare:Pv,anchor:mv,kanbanItem:w3,classBox:b3},t=[...Object.entries(r),...cL.flatMap(n=>[n.shortName,..."aliases"in n?n.aliases:[],..."internalAliases"in n?n.internalAliases:[]].map(e=>[e,n.handler]))];return Object.fromEntries(t)},"generateShapeMap"),v3=uL();function hL(r){return r in v3}w(hL,"isValidShape");var Uc=new Map;async function _3(r,t,n){let e,o;t.shape==="rect"&&(t.rx&&t.ry?t.shape="roundedRect":t.shape="squareRect");const s=t.shape?v3[t.shape]:void 0;if(!s)throw new Error(`No such shape: ${t.shape}. Please check your syntax.`);if(t.link){let i;n.config.securityLevel==="sandbox"?i="_top":t.linkTarget&&(i=t.linkTarget||"_blank"),e=r.insert("svg:a").attr("xlink:href",t.link).attr("target",i??null),o=await s(e,t,n)}else o=await s(r,t,n),e=o;return t.tooltip&&o.attr("title",t.tooltip),Uc.set(t.id,e),t.haveCallback&&e.attr("class",e.attr("class")+" clickable"),e}w(_3,"insertNode");var zH=w((r,t)=>{Uc.set(t.id,r)},"setNodeElem"),NH=w(()=>{Uc.clear()},"clear"),RH=w(r=>{const t=Uc.get(r.id);it.trace("Transforming node",r.diff,r,"translate("+(r.x-r.width/2-5)+", "+r.width/2+")");const n=r.diff||0;return r.clusterNode?t.attr("transform","translate("+(r.x+n-r.width/2)+", "+(r.y-r.height/2-8)+")"):t.attr("transform","translate("+r.x+", "+r.y+")"),n},"positionNode"),Kn={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:4};function Li(r,t){if(r===void 0||t===void 0)return{angle:0,deltaX:0,deltaY:0};r=Le(r),t=Le(t);const[n,e]=[r.x,r.y],[o,s]=[t.x,t.y],i=o-n,a=s-e;return{angle:Math.atan(a/i),deltaX:i,deltaY:a}}w(Li,"calculateDeltaAndAngle");var Le=w(r=>Array.isArray(r)?{x:r[0],y:r[1]}:r,"pointTransformer"),dL=w(r=>({x:w(function(t,n,e){let o=0;const s=Le(e[0]).x<Le(e[e.length-1]).x?"left":"right";if(n===0&&Object.hasOwn(Kn,r.arrowTypeStart)){const{angle:d,deltaX:p}=Li(e[0],e[1]);o=Kn[r.arrowTypeStart]*Math.cos(d)*(p>=0?1:-1)}else if(n===e.length-1&&Object.hasOwn(Kn,r.arrowTypeEnd)){const{angle:d,deltaX:p}=Li(e[e.length-1],e[e.length-2]);o=Kn[r.arrowTypeEnd]*Math.cos(d)*(p>=0?1:-1)}const i=Math.abs(Le(t).x-Le(e[e.length-1]).x),a=Math.abs(Le(t).y-Le(e[e.length-1]).y),l=Math.abs(Le(t).x-Le(e[0]).x),c=Math.abs(Le(t).y-Le(e[0]).y),u=Kn[r.arrowTypeStart],h=Kn[r.arrowTypeEnd];if(i<h&&i>0&&a<h){let d=h+1-i;d*=s==="right"?-1:1,o-=d}if(l<u&&l>0&&c<u){let d=u+1-l;d*=s==="right"?-1:1,o+=d}return Le(t).x+o},"x"),y:w(function(t,n,e){let o=0;const s=Le(e[0]).y<Le(e[e.length-1]).y?"down":"up";if(n===0&&Object.hasOwn(Kn,r.arrowTypeStart)){const{angle:d,deltaY:p}=Li(e[0],e[1]);o=Kn[r.arrowTypeStart]*Math.abs(Math.sin(d))*(p>=0?1:-1)}else if(n===e.length-1&&Object.hasOwn(Kn,r.arrowTypeEnd)){const{angle:d,deltaY:p}=Li(e[e.length-1],e[e.length-2]);o=Kn[r.arrowTypeEnd]*Math.abs(Math.sin(d))*(p>=0?1:-1)}const i=Math.abs(Le(t).y-Le(e[e.length-1]).y),a=Math.abs(Le(t).x-Le(e[e.length-1]).x),l=Math.abs(Le(t).y-Le(e[0]).y),c=Math.abs(Le(t).x-Le(e[0]).x),u=Kn[r.arrowTypeStart],h=Kn[r.arrowTypeEnd];if(i<h&&i>0&&a<h){let d=h+1-i;d*=s==="up"?-1:1,o-=d}if(l<u&&l>0&&c<u){let d=u+1-l;d*=s==="up"?-1:1,o+=d}return Le(t).y+o},"y")}),"getLineFunctionsWithOffset"),pL=w((r,t,n,e,o)=>{t.arrowTypeStart&&A0(r,"start",t.arrowTypeStart,n,e,o),t.arrowTypeEnd&&A0(r,"end",t.arrowTypeEnd,n,e,o)},"addEdgeMarkers"),fL={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},A0=w((r,t,n,e,o,s)=>{const i=fL[n];if(!i)return void it.warn(`Unknown arrow type: ${n}`);const a=t==="start"?"Start":"End";r.attr(`marker-${t}`,`url(${e}#${o}_${s}-${i}${a})`)},"addEdgeMarker"),hc=new Map,sn=new Map,PH=w(()=>{hc.clear(),sn.clear()},"clear"),wi=w(r=>r?r.reduce((t,n)=>t+";"+n,""):"","getLabelStyles"),gL=w(async(r,t)=>{let n=cn(ge().flowchart.htmlLabels);const e=await ti(r,t.label,{style:wi(t.labelStyle),useHtmlLabels:n,addSvgBackground:!0,isNode:!1});it.info("abc82",t,t.labelType);const o=r.insert("g").attr("class","edgeLabel"),s=o.insert("g").attr("class","label");s.node().appendChild(e);let i,a=e.getBBox();if(n){const l=e.children[0],c=fe(e);a=l.getBoundingClientRect(),c.attr("width",a.width),c.attr("height",a.height)}if(s.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),hc.set(t.id,o),t.width=a.width,t.height=a.height,t.startLabelLeft){const l=await Uo(t.startLabelLeft,wi(t.labelStyle)),c=r.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");i=u.node().appendChild(l);const h=l.getBBox();u.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),sn.get(t.id)||sn.set(t.id,{}),sn.get(t.id).startLeft=c,Ei(i,t.startLabelLeft)}if(t.startLabelRight){const l=await Uo(t.startLabelRight,wi(t.labelStyle)),c=r.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");i=c.node().appendChild(l),u.node().appendChild(l);const h=l.getBBox();u.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),sn.get(t.id)||sn.set(t.id,{}),sn.get(t.id).startRight=c,Ei(i,t.startLabelRight)}if(t.endLabelLeft){const l=await Uo(t.endLabelLeft,wi(t.labelStyle)),c=r.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");i=u.node().appendChild(l);const h=l.getBBox();u.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),c.node().appendChild(l),sn.get(t.id)||sn.set(t.id,{}),sn.get(t.id).endLeft=c,Ei(i,t.endLabelLeft)}if(t.endLabelRight){const l=await Uo(t.endLabelRight,wi(t.labelStyle)),c=r.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");i=u.node().appendChild(l);const h=l.getBBox();u.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),c.node().appendChild(l),sn.get(t.id)||sn.set(t.id,{}),sn.get(t.id).endRight=c,Ei(i,t.endLabelRight)}return e},"insertEdgeLabel");function Ei(r,t){ge().flowchart.htmlLabels&&r&&(r.style.width=9*t.length+"px",r.style.height="12px")}w(Ei,"setTerminalWidth");var mL=w((r,t)=>{it.debug("Moving label abc88 ",r.id,r.label,hc.get(r.id),t);let n=t.updatedPath?t.updatedPath:t.originalPath;const e=ge(),{subGraphTitleTotalMargin:o}=Fd(e);if(r.label){const s=hc.get(r.id);let i=r.x,a=r.y;if(n){const l=kr.calcLabelPosition(n);it.debug("Moving label "+r.label+" from (",i,",",a,") to (",l.x,",",l.y,") abc88"),t.updatedPath&&(i=l.x,a=l.y)}s.attr("transform",`translate(${i}, ${a+o/2})`)}if(r.startLabelLeft){const s=sn.get(r.id).startLeft;let i=r.x,a=r.y;if(n){const l=kr.calcTerminalLabelPosition(r.arrowTypeStart?10:0,"start_left",n);i=l.x,a=l.y}s.attr("transform",`translate(${i}, ${a})`)}if(r.startLabelRight){const s=sn.get(r.id).startRight;let i=r.x,a=r.y;if(n){const l=kr.calcTerminalLabelPosition(r.arrowTypeStart?10:0,"start_right",n);i=l.x,a=l.y}s.attr("transform",`translate(${i}, ${a})`)}if(r.endLabelLeft){const s=sn.get(r.id).endLeft;let i=r.x,a=r.y;if(n){const l=kr.calcTerminalLabelPosition(r.arrowTypeEnd?10:0,"end_left",n);i=l.x,a=l.y}s.attr("transform",`translate(${i}, ${a})`)}if(r.endLabelRight){const s=sn.get(r.id).endRight;let i=r.x,a=r.y;if(n){const l=kr.calcTerminalLabelPosition(r.arrowTypeEnd?10:0,"end_right",n);i=l.x,a=l.y}s.attr("transform",`translate(${i}, ${a})`)}},"positionEdgeLabel"),$L=w((r,t)=>{const n=r.x,e=r.y,o=Math.abs(t.x-n),s=Math.abs(t.y-e),i=r.width/2,a=r.height/2;return o>=i||s>=a},"outsideNode"),yL=w((r,t,n)=>{it.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(n)}
  node        : x:${r.x} y:${r.y} w:${r.width} h:${r.height}`);const e=r.x,o=r.y,s=Math.abs(e-n.x),i=r.width/2;let a=n.x<t.x?i-s:i+s;const l=r.height/2,c=Math.abs(t.y-n.y),u=Math.abs(t.x-n.x);if(Math.abs(o-t.y)*i>Math.abs(e-t.x)*l){let h=n.y<t.y?t.y-l-o:o-l-t.y;a=u*h/c;const d={x:n.x<t.x?n.x+a:n.x-u+a,y:n.y<t.y?n.y+c-h:n.y-c+h};return a===0&&(d.x=t.x,d.y=t.y),u===0&&(d.x=t.x),c===0&&(d.y=t.y),it.debug(`abc89 top/bottom calc, Q ${c}, q ${h}, R ${u}, r ${a}`,d),d}{a=n.x<t.x?t.x-i-e:e-i-t.x;let h=c*a/u,d=n.x<t.x?n.x+u-a:n.x-u+a,p=n.y<t.y?n.y+h:n.y-h;return it.debug(`sides calc abc89, Q ${c}, q ${h}, R ${u}, r ${a}`,{_x:d,_y:p}),a===0&&(d=t.x,p=t.y),u===0&&(d=t.x),c===0&&(p=t.y),{x:d,y:p}}},"intersection"),L0=w((r,t)=>{it.warn("abc88 cutPathAtIntersect",r,t);let n=[],e=r[0],o=!1;return r.forEach(s=>{if(it.info("abc88 checking point",s,t),$L(t,s)||o)it.warn("abc88 outside",s,e),e=s,o||n.push(s);else{const i=yL(t,e,s);it.debug("abc88 inside",s,e,i),it.debug("abc88 intersection",i,t);let a=!1;n.forEach(l=>{a=a||l.x===i.x&&l.y===i.y}),n.some(l=>l.x===i.x&&l.y===i.y)?it.warn("abc88 no intersect",i,n):n.push(i),o=!0}}),it.debug("returning points",n),n},"cutPathAtIntersect");function k3(r){const t=[],n=[];for(let e=1;e<r.length-1;e++){const o=r[e-1],s=r[e],i=r[e+1];(o.x===s.x&&s.y===i.y&&Math.abs(s.x-i.x)>5&&Math.abs(s.y-o.y)>5||o.y===s.y&&s.x===i.x&&Math.abs(s.x-o.x)>5&&Math.abs(s.y-i.y)>5)&&(t.push(s),n.push(e))}return{cornerPoints:t,cornerPointPositions:n}}w(k3,"extractCornerPoints");var E0=w(function(r,t,n){const e=t.x-r.x,o=t.y-r.y,s=n/Math.sqrt(e*e+o*o);return{x:t.x-s*e,y:t.y-s*o}},"findAdjacentPoint"),xL=w(function(r){const{cornerPointPositions:t}=k3(r),n=[];for(let e=0;e<r.length;e++)if(t.includes(e)){const o=r[e-1],s=r[e+1],i=r[e],a=E0(o,i,5),l=E0(s,i,5),c=l.x-a.x,u=l.y-a.y;n.push(a);const h=2*Math.sqrt(2);let d={x:i.x,y:i.y};if(Math.abs(s.x-o.x)>10&&Math.abs(s.y-o.y)>=10){it.debug("Corner point fixing",Math.abs(s.x-o.x),Math.abs(s.y-o.y));const p=5;d=i.x===a.x?{x:c<0?a.x-p+h:a.x+p-h,y:u<0?a.y-h:a.y+h}:{x:c<0?a.x-h:a.x+h,y:u<0?a.y-p+h:a.y+p-h}}else it.debug("Corner point skipping fixing",Math.abs(s.x-o.x),Math.abs(s.y-o.y));n.push(d,l)}else n.push(r[e]);return n},"fixCorners"),bL=w(function(r,t,n,e,o,s,i){const{handDrawnSeed:a}=ge();let l=t.points,c=!1;const u=o;var h=s;h.intersect&&u.intersect&&(l=l.slice(1,t.points.length-1),l.unshift(u.intersect(l[0])),it.debug("Last point APA12",t.start,"-->",t.end,l[l.length-1],h,h.intersect(l[l.length-1])),l.push(h.intersect(l[l.length-1]))),t.toCluster&&(it.info("to cluster abc88",n.get(t.toCluster)),l=L0(t.points,n.get(t.toCluster).node),c=!0),t.fromCluster&&(it.debug("from cluster abc88",n.get(t.fromCluster),JSON.stringify(l,null,2)),l=L0(l.reverse(),n.get(t.fromCluster).node).reverse(),c=!0);let d=l.filter(E=>!Number.isNaN(E.y));d=xL(d);let p=rw;t.curve&&(p=t.curve);const{x:g,y:$}=dL(t),b=C7().x(g).y($).curve(p);let y,x;switch(t.thickness){case"normal":default:y="edge-thickness-normal";break;case"thick":y="edge-thickness-thick";break;case"invisible":y="edge-thickness-invisible"}switch(t.pattern){case"solid":default:y+=" edge-pattern-solid";break;case"dotted":y+=" edge-pattern-dotted";break;case"dashed":y+=" edge-pattern-dashed"}let M=b(d);const L=Array.isArray(t.style)?t.style:[t.style];if(t.look==="handDrawn"){const E=_t.svg(r);Object.assign([],d),y+=" transition",x=fe(E.path(M,{roughness:.3,seed:a})).select("path").attr("id",t.id).attr("class"," "+y+(t.classes?" "+t.classes:"")).attr("style",L?L.reduce((U,tt)=>U+";"+tt,""):"");let F=x.attr("d");x.attr("d",F),r.node().appendChild(x.node())}else x=r.append("path").attr("d",M).attr("id",t.id).attr("class"," "+y+(t.classes?" "+t.classes:"")).attr("style",L?L.reduce((E,F)=>E+";"+F,""):"");let A="";(ge().flowchart.arrowMarkerAbsolute||ge().state.arrowMarkerAbsolute)&&(A=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,A=A.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),it.info("arrowTypeStart",t.arrowTypeStart),it.info("arrowTypeEnd",t.arrowTypeEnd),pL(x,t,A,i,e);let B={};return c&&(B.updatedPath=l),B.originalPath=t.points,B},"insertEdge"),wL=w((r,t,n,e)=>{t.forEach(o=>{EL[o](r,n,e)})},"insertMarkers"),vL=w((r,t,n)=>{it.trace("Making markers for ",n),r.append("defs").append("marker").attr("id",n+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),r.append("defs").append("marker").attr("id",n+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),_L=w((r,t,n)=>{r.append("defs").append("marker").attr("id",n+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),r.append("defs").append("marker").attr("id",n+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),kL=w((r,t,n)=>{r.append("defs").append("marker").attr("id",n+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),r.append("defs").append("marker").attr("id",n+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),CL=w((r,t,n)=>{r.append("defs").append("marker").attr("id",n+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),r.append("defs").append("marker").attr("id",n+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),SL=w((r,t,n)=>{r.append("defs").append("marker").attr("id",n+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),r.append("defs").append("marker").attr("id",n+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),TL=w((r,t,n)=>{r.append("marker").attr("id",n+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),r.append("marker").attr("id",n+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),ML=w((r,t,n)=>{r.append("marker").attr("id",n+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),r.append("marker").attr("id",n+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),AL=w((r,t,n)=>{r.append("marker").attr("id",n+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),r.append("marker").attr("id",n+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),LL=w((r,t,n)=>{r.append("defs").append("marker").attr("id",n+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),EL={extension:vL,composition:_L,aggregation:kL,dependency:CL,lollipop:SL,point:TL,circle:ML,cross:AL,barb:LL},BL=wL,IL={common:Qs,getConfig:$r,insertCluster:GA,insertEdge:bL,insertEdgeLabel:gL,insertMarkers:BL,insertNode:_3,interpolateToCurve:Yd,labelHelper:Ft,log:it,positionEdgeLabel:mL},Ji={},C3=w(r=>{for(const t of r)Ji[t.name]=t},"registerLayoutLoaders");w(()=>{C3([{name:"dagre",loader:w(async()=>await be(()=>import("./dagre-4EVJKHTY-B1UDkM8p.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url),"loader")}])},"registerDefaultLayoutLoaders")();var UH=w(async(r,t)=>{if(!(r.layoutAlgorithm in Ji))throw new Error(`Unknown layout algorithm: ${r.layoutAlgorithm}`);const n=Ji[r.layoutAlgorithm];return(await n.loader()).render(r,t,IL,{algorithm:n.algorithm})},"render"),qH=w((r="",{fallback:t="dagre"}={})=>{if(r in Ji)return r;if(t in Ji)return it.warn(`Layout algorithm ${r} is not registered. Using ${t} as fallback.`),t;throw new Error(`Both layout algorithms ${r} and ${t} are not registered.`)},"getRegisteredLayoutAlgorithm"),B0="11.4.1",FL=w(r=>{var e;const{securityLevel:t}=ge();let n=fe("body");if(t==="sandbox"){const o=fe(`#i${r}`);n=fe((((e=o.node())==null?void 0:e.contentDocument)??document).body)}return n.select(`#${r}`)},"selectSvgElement"),S3="comm",T3="rule",M3="decl",A3=Math.abs,hp=String.fromCharCode;function L3(r){return r.trim()}function dl(r,t,n){return r.replace(t,n)}function DL(r,t,n){return r.indexOf(t,n)}function bs(r,t){return 0|r.charCodeAt(t)}function Us(r,t,n){return r.slice(t,n)}function vr(r){return r.length}function Va(r,t){return t.push(r),r}var qc=1,qs=1,E3=0,er=0,je=0,js="";function dp(r,t,n,e,o,s,i,a){return{value:r,root:t,parent:n,type:e,props:o,children:s,line:qc,column:qs,length:i,return:"",siblings:a}}function OL(){return je=er>0?bs(js,--er):0,qs--,je===10&&(qs=1,qc--),je}function mr(){return je=er<E3?bs(js,er++):0,qs++,je===10&&(qs=1,qc++),je}function mo(){return bs(js,er)}function pl(){return er}function jc(r,t){return Us(js,r,t)}function ta(r){switch(r){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Fu(r){return L3(jc(er-1,Hh(r===91?r+2:r===40?r+1:r)))}function zL(r){for(;(je=mo())&&je<33;)mr();return ta(r)>2||ta(je)>3?"":" "}function NL(r,t){for(;--t&&mr()&&!(je<48||je>102||je>57&&je<65||je>70&&je<97););return jc(r,pl()+(t<6&&mo()==32&&mr()==32))}function Hh(r){for(;mr();)switch(je){case r:return er;case 34:case 39:r!==34&&r!==39&&Hh(je);break;case 40:r===41&&Hh(r);break;case 92:mr()}return er}function RL(r,t){for(;mr()&&r+je!==57&&(r+je!==84||mo()!==47););return"/*"+jc(t,er-1)+"*"+hp(r===47?r:mr())}function PL(r){for(;!ta(mo());)mr();return jc(r,er)}function UL(r){return function(t){return js="",t}(fl("",null,null,null,[""],r=function(t){return qc=qs=1,E3=vr(js=t),er=0,[]}(r),0,[0],r))}function fl(r,t,n,e,o,s,i,a,l){for(var c=0,u=0,h=i,d=0,p=0,g=0,$=1,b=1,y=1,x=0,M="",L=o,A=s,B=e,E=M;b;)switch(g=x,x=mr()){case 40:if(g!=108&&bs(E,h-1)==58){DL(E+=dl(Fu(x),"&","&\f"),"&\f",A3(c?a[c-1]:0))!=-1&&(y=-1);break}case 34:case 39:case 91:E+=Fu(x);break;case 9:case 10:case 13:case 32:E+=zL(g);break;case 92:E+=NL(pl()-1,7);continue;case 47:switch(mo()){case 42:case 47:Va(qL(RL(mr(),pl()),t,n,l),l),ta(g||1)!=5&&ta(mo()||1)!=5||!vr(E)||Us(E,-1,void 0)===" "||(E+=" ");break;default:E+="/"}break;case 123*$:a[c++]=vr(E)*y;case 125*$:case 59:case 0:switch(x){case 0:case 125:b=0;case 59+u:y==-1&&(E=dl(E,/\f/g,"")),p>0&&(vr(E)-h||$===0&&g===47)&&Va(p>32?F0(E+";",e,n,h-1,l):F0(dl(E," ","")+";",e,n,h-2,l),l);break;case 59:E+=";";default:if(Va(B=I0(E,t,n,c,u,o,a,M,L=[],A=[],h,s),s),x===123)if(u===0)fl(E,t,B,B,L,s,h,a,A);else{switch(d){case 99:if(bs(E,3)===110)break;case 108:if(bs(E,2)===97)break;default:u=0;case 100:case 109:case 115:}u?fl(r,B,B,e&&Va(I0(r,B,B,0,0,o,a,M,o,L=[],h,A),A),o,A,h,a,e?L:A):fl(E,B,B,B,[""],A,0,a,A)}}c=u=p=0,$=y=1,M=E="",h=i;break;case 58:h=1+vr(E),p=g;default:if($<1){if(x==123)--$;else if(x==125&&$++==0&&OL()==125)continue}switch(E+=hp(x),x*$){case 38:y=u>0?1:(E+="\f",-1);break;case 44:a[c++]=(vr(E)-1)*y,y=1;break;case 64:mo()===45&&(E+=Fu(mr())),d=mo(),u=h=vr(M=E+=PL(pl())),x++;break;case 45:g===45&&vr(E)==2&&($=0)}}return s}function I0(r,t,n,e,o,s,i,a,l,c,u,h){for(var d=o-1,p=o===0?s:[""],g=function(A){return A.length}(p),$=0,b=0,y=0;$<e;++$)for(var x=0,M=Us(r,d+1,d=A3(b=i[$])),L=r;x<g;++x)(L=L3(b>0?p[x]+" "+M:dl(M,/&\f/g,p[x])))&&(l[y++]=L);return dp(r,t,n,o===0?T3:a,l,c,u,h)}function qL(r,t,n,e){return dp(r,t,n,S3,hp(je),Us(r,2,-2),0,e)}function F0(r,t,n,e,o){return dp(r,t,n,M3,Us(r,0,e),Us(r,e+1,-1),e,o)}function Vh(r,t){for(var n="",e=0;e<r.length;e++)n+=t(r[e],e,r,t)||"";return n}function jL(r,t,n,e){switch(r.type){case"@layer":if(r.children.length)break;case"@import":case M3:return r.return=r.return||r.value;case S3:return"";case"@keyframes":return r.return=r.value+"{"+Vh(r.children,e)+"}";case T3:if(!vr(r.value=r.props.join(",")))return""}return vr(n=Vh(r.children,e))?r.return=r.value+"{"+n+"}":""}var WL=$w(Object.keys,Object),HL=Object.prototype.hasOwnProperty;function VL(r){if(!Ic(r))return WL(r);var t=[];for(var n in Object(r))HL.call(r,n)&&n!="constructor"&&t.push(n);return t}var Gh=es(Ir,"DataView"),Zh=es(Ir,"Promise"),Yh=es(Ir,"Set"),Xh=es(Ir,"WeakMap"),D0="[object Map]",O0="[object Promise]",z0="[object Set]",N0="[object WeakMap]",R0="[object DataView]",GL=ts(Gh),ZL=ts(Ki),YL=ts(Zh),XL=ts(Yh),QL=ts(Xh),Fo=Ks;(Gh&&Fo(new Gh(new ArrayBuffer(1)))!=R0||Ki&&Fo(new Ki)!=D0||Zh&&Fo(Zh.resolve())!=O0||Yh&&Fo(new Yh)!=z0||Xh&&Fo(new Xh)!=N0)&&(Fo=function(r){var t=Ks(r),n=t=="[object Object]"?r.constructor:void 0,e=n?ts(n):"";if(e)switch(e){case GL:return R0;case ZL:return D0;case YL:return O0;case XL:return z0;case QL:return N0}return t});var KL=Object.prototype.hasOwnProperty;function P0(r){if(r==null)return!0;if(Fc(r)&&(nc(r)||typeof r=="string"||typeof r.splice=="function"||Gd(r)||Zd(r)||ec(r)))return!r.length;var t=Fo(r);if(t=="[object Map]"||t=="[object Set]")return!r.size;if(Ic(r))return!VL(r).length;for(var n in r)if(KL.call(r,n))return!1;return!0}var JL={id:"c4",detector:w(r=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(r),"detector"),loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./c4Diagram-6F5ED5ID-CuzE8puF.js");return{diagram:t}},__vite__mapDeps([63,64,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:"c4",diagram:r}},"loader")},U0="flowchart",tE=w((r,t)=>{var n,e;return((n=t==null?void 0:t.flowchart)==null?void 0:n.defaultRenderer)!=="dagre-wrapper"&&((e=t==null?void 0:t.flowchart)==null?void 0:e.defaultRenderer)!=="elk"&&/^\s*graph/.test(r)},"detector"),eE={id:U0,detector:tE,loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./flowDiagram-7ASYPVHJ-GRZnpaaP.js");return{diagram:t}},__vite__mapDeps([65,66,67,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:U0,diagram:r}},"loader")},q0="flowchart-v2",nE=w((r,t)=>{var n,e,o;return((n=t==null?void 0:t.flowchart)==null?void 0:n.defaultRenderer)!=="dagre-d3"&&(((e=t==null?void 0:t.flowchart)==null?void 0:e.defaultRenderer)==="elk"&&(t.layout="elk"),!(!/^\s*graph/.test(r)||((o=t==null?void 0:t.flowchart)==null?void 0:o.defaultRenderer)!=="dagre-wrapper")||/^\s*flowchart/.test(r))},"detector"),rE={id:q0,detector:nE,loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./flowDiagram-7ASYPVHJ-GRZnpaaP.js");return{diagram:t}},__vite__mapDeps([65,66,67,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:q0,diagram:r}},"loader")},oE={id:"er",detector:w(r=>/^\s*erDiagram/.test(r),"detector"),loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./erDiagram-6RL3IURR-kwNuqXys.js");return{diagram:t}},__vite__mapDeps([68,1,2,3,4,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:"er",diagram:r}},"loader")},j0="gitGraph",sE={id:j0,detector:w(r=>/^\s*gitGraph/.test(r),"detector"),loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./gitGraphDiagram-NRZ2UAAF-Bpvhskpn.js");return{diagram:t}},__vite__mapDeps([69,70,71,72,30,2,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:j0,diagram:r}},"loader")},W0="gantt",iE={id:W0,detector:w(r=>/^\s*gantt/.test(r),"detector"),loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./ganttDiagram-NTVNEXSI-D7YdA9UD.js");return{diagram:t}},__vite__mapDeps([73,9,10,74,75,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:W0,diagram:r}},"loader")},H0="info",aE={id:H0,detector:w(r=>/^\s*info/.test(r),"detector"),loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./infoDiagram-A4XQUW5V-CKLmwys-.js");return{diagram:t}},__vite__mapDeps([76,72,30,2,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:H0,diagram:r}},"loader")},lE={id:"pie",detector:w(r=>/^\s*pie/.test(r),"detector"),loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./pieDiagram-YF2LJOPJ-Lf6dgsbU.js");return{diagram:t}},__vite__mapDeps([77,70,72,30,2,4,5,78,79,75,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:"pie",diagram:r}},"loader")},V0="quadrantChart",cE={id:V0,detector:w(r=>/^\s*quadrantChart/.test(r),"detector"),loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./quadrantDiagram-OS5C2QUG-DTx9BwEM.js");return{diagram:t}},__vite__mapDeps([80,74,75,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:V0,diagram:r}},"loader")},G0="xychart",uE={id:G0,detector:w(r=>/^\s*xychart-beta/.test(r),"detector"),loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./xychartDiagram-6QU3TZC5-BQvH0Ysa.js");return{diagram:t}},__vite__mapDeps([81,75,79,74,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:G0,diagram:r}},"loader")},Z0="requirement",hE={id:Z0,detector:w(r=>/^\s*requirement(Diagram)?/.test(r),"detector"),loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./requirementDiagram-MIRIMTAZ-Ddvql52_.js");return{diagram:t}},__vite__mapDeps([82,1,2,3,4,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:Z0,diagram:r}},"loader")},Y0="sequence",dE={id:Y0,detector:w(r=>/^\s*sequenceDiagram/.test(r),"detector"),loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./sequenceDiagram-G6AWOVSC-BaAENNFq.js");return{diagram:t}},__vite__mapDeps([83,64,71,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:Y0,diagram:r}},"loader")},X0="class",pE=w((r,t)=>{var n;return((n=t==null?void 0:t.class)==null?void 0:n.defaultRenderer)!=="dagre-wrapper"&&/^\s*classDiagram/.test(r)},"detector"),fE={id:X0,detector:pE,loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./classDiagram-LNE6IOMH-DtUoYsG1.js");return{diagram:t}},__vite__mapDeps([84,85,66,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:X0,diagram:r}},"loader")},Q0="classDiagram",gE=w((r,t)=>{var n;return!(!/^\s*classDiagram/.test(r)||((n=t==null?void 0:t.class)==null?void 0:n.defaultRenderer)!=="dagre-wrapper")||/^\s*classDiagram-v2/.test(r)},"detector"),mE={id:Q0,detector:gE,loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./classDiagram-v2-MQ7JQ4JX-DtUoYsG1.js");return{diagram:t}},__vite__mapDeps([86,85,66,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:Q0,diagram:r}},"loader")},K0="state",$E=w((r,t)=>{var n;return((n=t==null?void 0:t.state)==null?void 0:n.defaultRenderer)!=="dagre-wrapper"&&/^\s*stateDiagram/.test(r)},"detector"),yE={id:K0,detector:$E,loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./stateDiagram-MAYHULR4-DUjX442G.js");return{diagram:t}},__vite__mapDeps([87,88,66,1,2,3,4,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:K0,diagram:r}},"loader")},J0="stateDiagram",xE=w((r,t)=>{var n;return!!/^\s*stateDiagram-v2/.test(r)||!(!/^\s*stateDiagram/.test(r)||((n=t==null?void 0:t.state)==null?void 0:n.defaultRenderer)!=="dagre-wrapper")},"detector"),bE={id:J0,detector:xE,loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./stateDiagram-v2-4JROLMXI-DZYaSgnS.js");return{diagram:t}},__vite__mapDeps([89,88,66,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:J0,diagram:r}},"loader")},tg="journey",wE={id:tg,detector:w(r=>/^\s*journey/.test(r),"detector"),loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./journeyDiagram-G5WM74LC-B6fZxQ98.js");return{diagram:t}},__vite__mapDeps([90,64,78,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:tg,diagram:r}},"loader")},vE=w((r,t,n)=>{it.debug(`rendering svg for syntax error
`);const e=FL(t),o=e.append("g");e.attr("viewBox","0 0 2412 512"),X2(e,100,512,!0),o.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),o.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),o.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),o.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),o.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),o.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),o.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),o.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${n}`)},"draw"),B3={draw:vE},_E=B3,kE={db:{},renderer:B3,parser:{parse:w(()=>{},"parse")}},eg="flowchart-elk",CE=w((r,t={})=>{var n;return!!(/^\s*flowchart-elk/.test(r)||/^\s*flowchart|graph/.test(r)&&((n=t==null?void 0:t.flowchart)==null?void 0:n.defaultRenderer)==="elk")&&(t.layout="elk",!0)},"detector"),SE={id:eg,detector:CE,loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./flowDiagram-7ASYPVHJ-GRZnpaaP.js");return{diagram:t}},__vite__mapDeps([65,66,67,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:eg,diagram:r}},"loader")},ng="timeline",TE={id:ng,detector:w(r=>/^\s*timeline/.test(r),"detector"),loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./timeline-definition-U7ZMHBDA-Cik82_CL.js");return{diagram:t}},__vite__mapDeps([91,78,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:ng,diagram:r}},"loader")},rg="mindmap",ME={id:rg,detector:w(r=>/^\s*mindmap/.test(r),"detector"),loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./mindmap-definition-GWI6TPTV-D7dUh7dC.js");return{diagram:t}},__vite__mapDeps([92,93,9,10,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:rg,diagram:r}},"loader")},og="kanban",AE={id:og,detector:w(r=>/^\s*kanban/.test(r),"detector"),loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./kanban-definition-QRCXZQQD-myRUp3Ry.js");return{diagram:t}},__vite__mapDeps([94,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:og,diagram:r}},"loader")},sg="sankey",LE={id:sg,detector:w(r=>/^\s*sankey-beta/.test(r),"detector"),loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./sankeyDiagram-Y46BX6SQ-Csv87wOU.js");return{diagram:t}},__vite__mapDeps([95,79,75,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:sg,diagram:r}},"loader")},ig="packet",EE={id:ig,detector:w(r=>/^\s*packet-beta/.test(r),"detector"),loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./diagram-QW4FP2JN-DuQXaqm6.js");return{diagram:t}},__vite__mapDeps([96,70,72,30,2,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:ig,diagram:r}},"loader")},ag="block",BE={id:ag,detector:w(r=>/^\s*block-beta/.test(r),"detector"),loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./blockDiagram-ZHA2E4KO-3qxwaP20.js");return{diagram:t}},__vite__mapDeps([97,5,2,1,67,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:ag,diagram:r}},"loader")},lg="architecture",IE={id:lg,detector:w(r=>/^\s*architecture/.test(r),"detector"),loader:w(async()=>{const{diagram:r}=await be(async()=>{const{diagram:t}=await import("./architectureDiagram-UYN6MBPD-zs3Wlbta.js");return{diagram:t}},__vite__mapDeps([98,70,71,72,30,2,4,5,93,9,10,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);return{id:lg,diagram:r}},"loader")},cg=!1,Wc=w(()=>{cg||(cg=!0,Ul("error",kE,r=>r.toLowerCase().trim()==="error"),Ul("---",{db:{clear:w(()=>{},"clear")},styles:{},renderer:{draw:w(()=>{},"draw")},parser:{parse:w(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:w(()=>null,"init")},r=>r.toLowerCase().trimStart().startsWith("---")),N2(JL,AE,mE,fE,oE,iE,aE,lE,hE,dE,SE,rE,eE,ME,TE,sE,bE,yE,wE,cE,LE,EE,uE,BE,IE))},"addDiagrams"),FE=w(async()=>{it.debug("Loading registered diagrams");const r=(await Promise.allSettled(Object.entries(Os).map(async([t,{detector:n,loader:e}])=>{if(e)try{lh(t)}catch{try{const{diagram:o,id:s}=await e();Ul(s,o,n)}catch(o){throw it.error(`Failed to load external diagram with key ${t}. Removing from detectors.`),delete Os[t],o}}}))).filter(t=>t.status==="rejected");if(r.length>0){it.error(`Failed to load ${r.length} external diagrams`);for(const t of r)it.error(t);throw new Error(`Failed to load ${r.length} external diagrams`)}},"loadRegisteredDiagrams"),DE="graphics-document document";function I3(r,t){r.attr("role",DE),t!==""&&r.attr("aria-roledescription",t)}function F3(r,t,n,e){if(r.insert!==void 0){if(n){const o=`chart-desc-${e}`;r.attr("aria-describedby",o),r.insert("desc",":first-child").attr("id",o).text(n)}if(t){const o=`chart-title-${e}`;r.attr("aria-labelledby",o),r.insert("title",":first-child").attr("id",o).text(t)}}}w(I3,"setA11yDiagramInfo"),w(F3,"addSVGa11yTitleDescription");var Vo,Qh=(Vo=class{constructor(t,n,e,o,s){this.type=t,this.text=n,this.db=e,this.parser=o,this.renderer=s}static async fromText(t,n={}){var c,u;const e=$r(),o=vd(t,e);t=JM(t)+`
`;try{lh(o)}catch{const h=V8(o);if(!h)throw new z2(`Diagram ${o} not found.`);const{id:d,diagram:p}=await h();Ul(d,p)}const{db:s,parser:i,renderer:a,init:l}=lh(o);return i.parser&&(i.parser.yy=s),(c=s.clear)==null||c.call(s),l==null||l(e),n.title&&((u=s.setDiagramTitle)==null||u.call(s,n.title)),await i.parse(t),new Vo(o,t,s,i,a)}async render(t,n){await this.renderer.draw(this.text,t,n,this)}getParser(){return this.parser}getType(){return this.type}},w(Vo,"Diagram"),Vo),ug=[],OE=w(()=>{ug.forEach(r=>{r()}),ug=[]},"attachFunctions"),zE=w(r=>r.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function D3(r){const t=r.match(O2);if(!t)return{text:r,metadata:{}};let n=ET(t[1],{schema:LT})??{};n=typeof n!="object"||Array.isArray(n)?{}:n;const e={};return n.displayMode&&(e.displayMode=n.displayMode.toString()),n.title&&(e.title=n.title.toString()),n.config&&(e.config=n.config),{text:r.slice(t[0].length),metadata:e}}w(D3,"extractFrontMatter");var NE=w(r=>r.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(t,n,e)=>"<"+n+e.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),RE=w(r=>{const{text:t,metadata:n}=D3(r),{displayMode:e,title:o,config:s={}}=n;return e&&(s.gantt||(s.gantt={}),s.gantt.displayMode=e),{title:o,config:s,text:t}},"processFrontmatter"),PE=w(r=>{const t=kr.detectInit(r)??{},n=kr.detectDirective(r,"wrap");return Array.isArray(n)?t.wrap=n.some(({type:e})=>e==="wrap"):(n==null?void 0:n.type)==="wrap"&&(t.wrap=!0),{text:PM(r),directive:t}},"processDirectives");function pp(r){const t=NE(r),n=RE(t),e=PE(n.text),o=tp(n.config,e.directive);return{code:r=zE(e.text),title:n.title,config:o}}function O3(r){const t=new TextEncoder().encode(r),n=Array.from(t,e=>String.fromCodePoint(e)).join("");return btoa(n)}w(pp,"preprocessDiagram"),w(O3,"toBase64");var UE=["foreignobject"],qE=["dominant-baseline"];function fp(r){const t=pp(r);return Rl(),aS(t.config??{}),t}async function z3(r,t){Wc();try{const{code:n,config:e}=fp(r);return{diagramType:(await R3(n)).type,config:e}}catch(n){if(t!=null&&t.suppressErrors)return!1;throw n}}w(fp,"processAndSetConfigs"),w(z3,"parse");var hg=w((r,t,n=[])=>`
.${r} ${t} { ${n.join(" !important; ")} !important; }`,"cssImportantStyles"),jE=w((r,t=new Map)=>{var e;let n="";if(r.themeCSS!==void 0&&(n+=`
${r.themeCSS}`),r.fontFamily!==void 0&&(n+=`
:root { --mermaid-font-family: ${r.fontFamily}}`),r.altFontFamily!==void 0&&(n+=`
:root { --mermaid-alt-font-family: ${r.altFontFamily}}`),t instanceof Map){const o=r.htmlLabels??((e=r.flowchart)==null?void 0:e.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];t.forEach(s=>{P0(s.styles)||o.forEach(i=>{n+=hg(s.id,i,s.styles)}),P0(s.textStyles)||(n+=hg(s.id,"tspan",((s==null?void 0:s.textStyles)||[]).map(i=>i.replace("color","fill"))))})}return n},"createCssStyles"),WE=w((r,t,n,e)=>{const o=jE(r,n);return Vh(UL(`${e}{${SS(t,o,r.themeVariables)}}`),jL)},"createUserStyles"),HE=w((r="",t,n)=>{let e=r;return n||t||(e=e.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),e=Js(e),e=e.replace(/<br>/g,"<br/>"),e},"cleanUpSvgCode"),VE=w((r="",t)=>{var n,e;return`<iframe style="width:100%;height:${(e=(n=t==null?void 0:t.viewBox)==null?void 0:n.baseVal)!=null&&e.height?t.viewBox.baseVal.height+"px":"100%"};border:0;margin:0;" src="data:text/html;charset=UTF-8;base64,${O3(`<body style="margin:0">${r}</body>`)}" sandbox="allow-top-navigation-by-user-activation allow-popups">
  The "iframe" tag is not supported by your browser.
</iframe>`},"putIntoIFrame"),dg=w((r,t,n,e,o)=>{const s=r.append("div");s.attr("id",n),e&&s.attr("style",e);const i=s.append("svg").attr("id",t).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg");return o&&i.attr("xmlns:xlink",o),i.append("g"),r},"appendDivSvgG");function Kh(r,t){return r.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}w(Kh,"sandboxedIframe");var GE=w((r,t,n,e)=>{var o,s,i;(o=r.getElementById(t))==null||o.remove(),(s=r.getElementById(n))==null||s.remove(),(i=r.getElementById(e))==null||i.remove()},"removeExistingElements"),ZE=w(async function(r,t,n){var N,R,j,Q,z,G;Wc();const e=fp(t);t=e.code;const o=$r();it.debug(o),t.length>((o==null?void 0:o.maxTextSize)??5e4)&&(t="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa");const s="#"+r,i="i"+r,a="#"+i,l="d"+r,c="#"+l,u=w(()=>{const K=fe(d?a:c).node();K&&"remove"in K&&K.remove()},"removeTempElements");let h=fe("body");const d=o.securityLevel==="sandbox",p=o.securityLevel==="loose",g=o.fontFamily;if(n!==void 0){if(n&&(n.innerHTML=""),d){const K=Kh(fe(n),i);h=fe(K.nodes()[0].contentDocument.body),h.node().style.margin=0}else h=fe(n);dg(h,r,l,`font-family: ${g}`,"http://www.w3.org/1999/xlink")}else{if(GE(document,r,l,i),d){const K=Kh(fe("body"),i);h=fe(K.nodes()[0].contentDocument.body),h.node().style.margin=0}else h=fe("body");dg(h,r,l)}let $,b;try{$=await Qh.fromText(t,{title:e.title})}catch(K){if(o.suppressErrorRendering)throw u(),K;$=await Qh.fromText("error"),b=K}const y=h.select(c).node(),x=$.type,M=y.firstChild,L=M.firstChild,A=(R=(N=$.renderer).getClasses)==null?void 0:R.call(N,t,$),B=WE(o,x,A,s),E=document.createElement("style");E.innerHTML=B,M.insertBefore(E,L);try{await $.renderer.draw(t,r,B0,$)}catch(K){throw o.suppressErrorRendering?u():_E.draw(t,r,B0),K}const F=h.select(`${c} svg`),U=(Q=(j=$.db).getAccTitle)==null?void 0:Q.call(j),tt=(G=(z=$.db).getAccDescription)==null?void 0:G.call(z);P3(x,F,U,tt),h.select(`[id="${r}"]`).selectAll("foreignobject > *").attr("xmlns","http://www.w3.org/1999/xhtml");let q=h.select(c).node().innerHTML;if(it.debug("config.arrowMarkerAbsolute",o.arrowMarkerAbsolute),q=HE(q,d,cn(o.arrowMarkerAbsolute)),d){const K=h.select(c+" svg").node();q=VE(q,K)}else p||(q=Ds.sanitize(q,{ADD_TAGS:UE,ADD_ATTR:qE,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(OE(),b)throw b;return u(),{diagramType:x,svg:q,bindFunctions:$.db.bindFunctions}},"render");function N3(r={}){var e;const t=ln({},r);t!=null&&t.fontFamily&&!((e=t.themeVariables)!=null&&e.fontFamily)&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),sS(t),t!=null&&t.theme&&t.theme in Zr?t.themeVariables=Zr[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=Zr.default.getThemeVariables(t.themeVariables));const n=typeof t=="object"?oS(t):j2();wd(n.logLevel),Wc()}w(N3,"initialize");var R3=w((r,t={})=>{const{code:n}=pp(r);return Qh.fromText(n,t)},"getDiagramFromText");function P3(r,t,n,e){I3(t,r),F3(t,n,e,t.attr("id"))}w(P3,"addA11yInfo");var Xo=Object.freeze({render:ZE,parse:z3,getDiagramFromText:R3,initialize:N3,getConfig:$r,setConfig:W2,getSiteConfig:j2,updateSiteConfig:iS,reset:w(()=>{Rl()},"reset"),globalReset:w(()=>{Rl(zs)},"globalReset"),defaultConfig:zs});wd($r().logLevel),Rl($r());var YE=w((r,t,n)=>{it.warn(r),Jd(r)?(n&&n(r.str,r.hash),t.push({...r,message:r.str,error:r})):(n&&n(r),r instanceof Error&&t.push({str:r.message,message:r.message,hash:r.name,error:r}))},"handleError"),U3=w(async function(r={querySelector:".mermaid"}){try{await XE(r)}catch(t){if(Jd(t)&&it.error(t.str),Yn.parseError&&Yn.parseError(t),!r.suppressErrors)throw it.error("Use the suppressErrors option to suppress these errors"),t}},"run"),XE=w(async function({postRenderCallback:r,querySelector:t,nodes:n}={querySelector:".mermaid"}){const e=Xo.getConfig();let o;if(it.debug((r?"":"No ")+"Callback function found"),n)o=n;else{if(!t)throw new Error("Nodes and querySelector are both undefined");o=document.querySelectorAll(t)}it.debug(`Found ${o.length} diagrams`),(e==null?void 0:e.startOnLoad)!==void 0&&(it.debug("Start On Load: "+(e==null?void 0:e.startOnLoad)),Xo.updateSiteConfig({startOnLoad:e==null?void 0:e.startOnLoad}));const s=new kr.InitIDGenerator(e.deterministicIds,e.deterministicIDSeed);let i;const a=[];for(const l of Array.from(o)){if(it.info("Rendering diagram: "+l.id),l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const c=`mermaid-${s.next()}`;i=l.innerHTML,i=Ww(kr.entityDecode(i)).trim().replace(/<br\s*\/?>/gi,"<br/>");const u=kr.detectInit(i);u&&it.debug("Detected early reinit: ",u);try{const{svg:h,bindFunctions:d}=await H3(c,i,l);l.innerHTML=h,r&&await r(c),d&&d(l)}catch(h){YE(h,a,Yn.parseError)}}if(a.length>0)throw a[0]},"runThrowsErrors"),q3=w(function(r){Xo.initialize(r)},"initialize"),QE=w(async function(r,t,n){it.warn("mermaid.init is deprecated. Please use run instead."),r&&q3(r);const e={postRenderCallback:n,querySelector:".mermaid"};typeof t=="string"?e.querySelector=t:t&&(t instanceof HTMLElement?e.nodes=[t]:e.nodes=t),await U3(e)},"init"),KE=w(async(r,{lazyLoad:t=!0}={})=>{Wc(),N2(...r),t===!1&&await FE()},"registerExternalDiagrams"),j3=w(function(){if(Yn.startOnLoad){const{startOnLoad:r}=Xo.getConfig();r&&Yn.run().catch(t=>it.error("Mermaid failed to initialize",t))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",j3,!1);var JE=w(function(r){Yn.parseError=r},"setParseErrorHandler"),dc=[],Du=!1,W3=w(async()=>{if(!Du){for(Du=!0;dc.length>0;){const r=dc.shift();if(r)try{await r()}catch(t){it.error("Error executing queue",t)}}Du=!1}},"executeQueue"),tB=w(async(r,t)=>new Promise((n,e)=>{const o=w(()=>new Promise((s,i)=>{Xo.parse(r,t).then(a=>{s(a),n(a)},a=>{var l;it.error("Error parsing",a),(l=Yn.parseError)==null||l.call(Yn,a),i(a),e(a)})}),"performCall");dc.push(o),W3().catch(e)}),"parse"),H3=w((r,t,n)=>new Promise((e,o)=>{const s=w(()=>new Promise((i,a)=>{Xo.render(r,t,n).then(l=>{i(l),e(l)},l=>{var c;it.error("Error parsing",l),(c=Yn.parseError)==null||c.call(Yn,l),a(l),o(l)})}),"performCall");dc.push(s),W3().catch(o)}),"render"),Yn={startOnLoad:!0,mermaidAPI:Xo,parse:tB,render:H3,init:QE,run:U3,registerExternalDiagrams:KE,registerLayoutLoaders:C3,initialize:q3,parseError:void 0,contentLoaded:j3,setParseErrorHandler:JE,detectType:vd,registerIconPacks:jT},pg=Yn,eB=function(){var r,t,n,e="",o=[],s={passive:!0},i={passive:!1};function a(c,u,h,d){var p;p=n==="wheel"?h:function(g,$){var b=function(y){!y&&(y=window.event);var x={originalEvent:y,target:y.target||y.srcElement,type:"wheel",deltaMode:y.type=="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault:function(){y.preventDefault?y.preventDefault():y.returnValue=!1}};return n=="mousewheel"?(x.deltaY=-.025*y.wheelDelta,y.wheelDeltaX&&(x.deltaX=-.025*y.wheelDeltaX)):x.deltaY=y.detail,$(x)};return o.push({element:g,fn:b}),b}(c,h),c[r](e+u,p,d?s:i)}function l(c,u,h,d){var p;p=n==="wheel"?h:function(g){for(var $=0;$<o.length;$++)if(o[$].element===g)return o[$].fn;return function(){}}(c),c[t](e+u,p,d?s:i),function(g){for(var $=0;$<o.length;$++)if(o[$].element===g)return o.splice($,1)}(c)}return window.addEventListener?(r="addEventListener",t="removeEventListener"):(r="attachEvent",t="detachEvent",e="on"),n="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",{on:function(c,u,h){a(c,n,u,h),n=="DOMMouseScroll"&&a(c,"MozMousePixelScroll",u,h)},off:function(c,u,h){l(c,n,u,h),n=="DOMMouseScroll"&&l(c,"MozMousePixelScroll",u,h)}}}(),gp={extend:function(r,t){for(var n in r=r||{},t)this.isObject(t[n])?r[n]=this.extend(r[n],t[n]):r[n]=t[n];return r},isElement:function(r){return r instanceof HTMLElement||r instanceof SVGElement||r instanceof SVGSVGElement||r&&typeof r=="object"&&r!==null&&r.nodeType===1&&typeof r.nodeName=="string"},isObject:function(r){return Object.prototype.toString.call(r)==="[object Object]"},isNumber:function(r){return!isNaN(parseFloat(r))&&isFinite(r)},getSvg:function(r){var t,n;if(this.isElement(r))t=r;else{if(!(typeof r=="string"||r instanceof String))throw new Error("Provided selector is not an HTML object nor String");if(!(t=document.querySelector(r)))throw new Error("Provided selector did not find any elements. Selector: "+r)}if(t.tagName.toLowerCase()==="svg")n=t;else if(t.tagName.toLowerCase()==="object")n=t.contentDocument.documentElement;else{if(t.tagName.toLowerCase()!=="embed")throw t.tagName.toLowerCase()==="img"?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");n=t.getSVGDocument().documentElement}return n},proxy:function(r,t){return function(){return r.apply(t,arguments)}},getType:function(r){return Object.prototype.toString.apply(r).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(r,t){if(r.clientX===void 0||r.clientX===null)if(r.clientX=0,r.clientY=0,r.touches!==void 0&&r.touches.length){if(r.touches[0].clientX!==void 0)r.clientX=r.touches[0].clientX,r.clientY=r.touches[0].clientY;else if(r.touches[0].pageX!==void 0){var n=t.getBoundingClientRect();r.clientX=r.touches[0].pageX-n.left,r.clientY=r.touches[0].pageY-n.top}}else r.originalEvent!==void 0&&r.originalEvent.clientX!==void 0&&(r.clientX=r.originalEvent.clientX,r.clientY=r.originalEvent.clientY)},isDblClick:function(r,t){if(r.detail===2)return!0;if(t!=null){var n=r.timeStamp-t.timeStamp,e=Math.sqrt(Math.pow(r.clientX-t.clientX,2)+Math.pow(r.clientY-t.clientY,2));return n<250&&e<10}return!1},now:Date.now||function(){return new Date().getTime()},throttle:function(r,t,n){var e,o,s,i=this,a=null,l=0;n||(n={});var c=function(){l=n.leading===!1?0:i.now(),a=null,s=r.apply(e,o),a||(e=o=null)};return function(){var u=i.now();l||n.leading!==!1||(l=u);var h=t-(u-l);return e=this,o=arguments,h<=0||h>t?(clearTimeout(a),a=null,l=u,s=r.apply(e,o),a||(e=o=null)):a||n.trailing===!1||(a=setTimeout(c,h)),s}},createRequestAnimationFrame:function(r){var t=null;return r!=="auto"&&r<60&&r>1&&(t=Math.floor(1e3/r)),t===null?window.requestAnimationFrame||fg(33):fg(t)}};function fg(r){return function(t){window.setTimeout(t,r)}}var Ou=gp,V3="unknown";document.documentMode&&(V3="ie");var mp={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(r){if(r.clientWidth&&r.clientHeight)return{width:r.clientWidth,height:r.clientHeight};if(r.getBoundingClientRect())return r.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(r,t){var n=null;if(!(n=Ou.isElement(t)?t:r.querySelector(t))){var e=Array.prototype.slice.call(r.childNodes||r.children).filter(function(l){return l.nodeName!=="defs"&&l.nodeName!=="#text"});e.length===1&&e[0].nodeName==="g"&&e[0].getAttribute("transform")===null&&(n=e[0])}if(!n){var o="viewport-"+new Date().toISOString().replace(/\D/g,"");(n=document.createElementNS(this.svgNS,"g")).setAttribute("id",o);var s=r.childNodes||r.children;if(s&&s.length>0)for(var i=s.length;i>0;i--)s[s.length-i].nodeName!=="defs"&&n.appendChild(s[s.length-i]);r.appendChild(n)}var a=[];return n.getAttribute("class")&&(a=n.getAttribute("class").split(" ")),~a.indexOf("svg-pan-zoom_viewport")||(a.push("svg-pan-zoom_viewport"),n.setAttribute("class",a.join(" "))),n},setupSvgAttributes:function(r){if(r.setAttribute("xmlns",this.svgNS),r.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),r.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),r.parentNode!==null){var t=r.getAttribute("style")||"";t.toLowerCase().indexOf("overflow")===-1&&r.setAttribute("style","overflow: hidden; "+t)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:Ou.throttle(function(){for(var r=document.querySelectorAll("defs"),t=r.length,n=0;n<t;n++){var e=r[n];e.parentNode.insertBefore(e,e)}},ef?ef.internetExplorerRedisplayInterval:null),setCTM:function(r,t,n){var e=this,o="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";r.setAttributeNS(null,"transform",o),"transform"in r.style?r.style.transform=o:"-ms-transform"in r.style?r.style["-ms-transform"]=o:"-webkit-transform"in r.style&&(r.style["-webkit-transform"]=o),V3==="ie"&&n&&(n.parentNode.insertBefore(n,n),window.setTimeout(function(){e.refreshDefsGlobal()},e.internetExplorerRedisplayInterval))},getEventPoint:function(r,t){var n=t.createSVGPoint();return Ou.mouseAndTouchNormalize(r,t),n.x=r.clientX,n.y=r.clientY,n},getSvgCenterPoint:function(r,t,n){return this.createSVGPoint(r,t/2,n/2)},createSVGPoint:function(r,t,n){var e=r.createSVGPoint();return e.x=t,e.y=n,e}},qn=mp,nB={enable:function(r){var t=r.svg.querySelector("defs");if(t||(t=document.createElementNS(qn.svgNS,"defs"),r.svg.appendChild(t)),!t.querySelector("style#svg-pan-zoom-controls-styles")){var n=document.createElementNS(qn.svgNS,"style");n.setAttribute("id","svg-pan-zoom-controls-styles"),n.setAttribute("type","text/css"),n.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",t.appendChild(n)}var e=document.createElementNS(qn.svgNS,"g");e.setAttribute("id","svg-pan-zoom-controls"),e.setAttribute("transform","translate("+(r.width-70)+" "+(r.height-76)+") scale(0.75)"),e.setAttribute("class","svg-pan-zoom-control"),e.appendChild(this._createZoomIn(r)),e.appendChild(this._createZoomReset(r)),e.appendChild(this._createZoomOut(r)),r.svg.appendChild(e),r.controlIcons=e},_createZoomIn:function(r){var t=document.createElementNS(qn.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-in"),t.setAttribute("transform","translate(30.5 5) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){r.getPublicInstance().zoomIn()},!1),t.addEventListener("touchstart",function(){r.getPublicInstance().zoomIn()},!1);var n=document.createElementNS(qn.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var e=document.createElementNS(qn.svgNS,"path");return e.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),e.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(e),t},_createZoomReset:function(r){var t=document.createElementNS(qn.svgNS,"g");t.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),t.setAttribute("transform","translate(5 35) scale(0.4)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){r.getPublicInstance().reset()},!1),t.addEventListener("touchstart",function(){r.getPublicInstance().reset()},!1);var n=document.createElementNS(qn.svgNS,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","182"),n.setAttribute("height","58"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var e=document.createElementNS(qn.svgNS,"path");e.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),e.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(e);var o=document.createElementNS(qn.svgNS,"path");return o.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),o.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(o),t},_createZoomOut:function(r){var t=document.createElementNS(qn.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-out"),t.setAttribute("transform","translate(30.5 70) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){r.getPublicInstance().zoomOut()},!1),t.addEventListener("touchstart",function(){r.getPublicInstance().zoomOut()},!1);var n=document.createElementNS(qn.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var e=document.createElementNS(qn.svgNS,"path");return e.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),e.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(e),t},disable:function(r){r.controlIcons&&(r.controlIcons.parentNode.removeChild(r.controlIcons),r.controlIcons=null)}},rB=mp,no=gp,Ue=function(r,t){this.init(r,t)};Ue.prototype.init=function(r,t){this.viewport=r,this.options=t,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=no.proxy(this.updateCTM,this),this.requestAnimationFrame=no.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var n=this.processCTM();this.setCTM(n),this.updateCTM()},Ue.prototype.cacheViewBox=function(){var r=this.options.svg.getAttribute("viewBox");if(r){var t=r.split(/[\s\,]/).filter(function(e){return e}).map(parseFloat);this.viewBox.x=t[0],this.viewBox.y=t[1],this.viewBox.width=t[2],this.viewBox.height=t[3];var n=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=n,this.activeState.x=(this.options.width-this.viewBox.width*n)/2,this.activeState.y=(this.options.height-this.viewBox.height*n)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()},Ue.prototype.simpleViewBoxCache=function(){var r=this.viewport.getBBox();this.viewBox.x=r.x,this.viewBox.y=r.y,this.viewBox.width=r.width,this.viewBox.height=r.height},Ue.prototype.getViewBox=function(){return no.extend({},this.viewBox)},Ue.prototype.processCTM=function(){var r,t=this.getCTM();if((this.options.fit||this.options.contain)&&(r=this.options.fit?Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),t.a=r,t.d=r,t.e=-this.viewBox.x*r,t.f=-this.viewBox.y*r),this.options.center){var n=.5*(this.options.width-(this.viewBox.width+2*this.viewBox.x)*t.a),e=.5*(this.options.height-(this.viewBox.height+2*this.viewBox.y)*t.a);t.e=n,t.f=e}return this.originalState.zoom=t.a,this.originalState.x=t.e,this.originalState.y=t.f,t},Ue.prototype.getOriginalState=function(){return no.extend({},this.originalState)},Ue.prototype.getState=function(){return no.extend({},this.activeState)},Ue.prototype.getZoom=function(){return this.activeState.zoom},Ue.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom},Ue.prototype.computeRelativeZoom=function(r){return r/this.originalState.zoom},Ue.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}},Ue.prototype.getCTM=function(){var r=this.options.svg.createSVGMatrix();return r.a=this.activeState.zoom,r.b=0,r.c=0,r.d=this.activeState.zoom,r.e=this.activeState.x,r.f=this.activeState.y,r},Ue.prototype.setCTM=function(r){var t=this.isZoomDifferent(r),n=this.isPanDifferent(r);if(t||n){if(t&&(this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(r.a))===!1?(r.a=r.d=this.activeState.zoom,t=!1):(this.updateCache(r),this.options.onZoom(this.getRelativeZoom()))),n){var e=this.options.beforePan(this.getPan(),{x:r.e,y:r.f}),o=!1,s=!1;e===!1?(r.e=this.getPan().x,r.f=this.getPan().y,o=s=!0):no.isObject(e)&&(e.x===!1?(r.e=this.getPan().x,o=!0):no.isNumber(e.x)&&(r.e=e.x),e.y===!1?(r.f=this.getPan().y,s=!0):no.isNumber(e.y)&&(r.f=e.y)),o&&s||!this.isPanDifferent(r)?n=!1:(this.updateCache(r),this.options.onPan(this.getPan()))}(t||n)&&this.updateCTMOnNextFrame()}},Ue.prototype.isZoomDifferent=function(r){return this.activeState.zoom!==r.a},Ue.prototype.isPanDifferent=function(r){return this.activeState.x!==r.e||this.activeState.y!==r.f},Ue.prototype.updateCache=function(r){this.activeState.zoom=r.a,this.activeState.x=r.e,this.activeState.y=r.f},Ue.prototype.pendingUpdate=!1,Ue.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))},Ue.prototype.updateCTM=function(){var r=this.getCTM();rB.setCTM(this.viewport,r,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(r)};var gg=eB,zu=nB,rr=gp,wr=mp,oB=function(r,t){return new Ue(r,t)},de=function(r,t){this.init(r,t)},sB={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},mg={passive:!0};de.prototype.init=function(r,t){var n=this;this.svg=r,this.defs=r.querySelector("defs"),wr.setupSvgAttributes(this.svg),this.options=rr.extend(rr.extend({},sB),t),this.state="none";var e=wr.getBoundingClientRectNormalized(r);this.width=e.width,this.height=e.height,this.viewport=oB(wr.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(s,i){if(n.viewport&&n.options.beforeZoom)return n.options.beforeZoom(s,i)},onZoom:function(s){if(n.viewport&&n.options.onZoom)return n.options.onZoom(s)},beforePan:function(s,i){if(n.viewport&&n.options.beforePan)return n.options.beforePan(s,i)},onPan:function(s){if(n.viewport&&n.options.onPan)return n.options.onPan(s)},onUpdatedCTM:function(s){if(n.viewport&&n.options.onUpdatedCTM)return n.options.onUpdatedCTM(s)}});var o=this.getPublicInstance();o.setBeforeZoom(this.options.beforeZoom),o.setOnZoom(this.options.onZoom),o.setBeforePan(this.options.beforePan),o.setOnPan(this.options.onPan),o.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&zu.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()},de.prototype.setupHandlers=function(){var r=this,t=null;if(this.eventListeners={mousedown:function(s){var i=r.handleMouseDown(s,t);return t=s,i},touchstart:function(s){var i=r.handleMouseDown(s,t);return t=s,i},mouseup:function(s){return r.handleMouseUp(s)},touchend:function(s){return r.handleMouseUp(s)},mousemove:function(s){return r.handleMouseMove(s)},touchmove:function(s){return r.handleMouseMove(s)},mouseleave:function(s){return r.handleMouseUp(s)},touchleave:function(s){return r.handleMouseUp(s)},touchcancel:function(s){return r.handleMouseUp(s)}},this.options.customEventsHandler!=null){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var n=this.options.customEventsHandler.haltEventListeners;if(n&&n.length)for(var e=n.length-1;e>=0;e--)this.eventListeners.hasOwnProperty(n[e])&&delete this.eventListeners[n[e]]}for(var o in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(o,this.eventListeners[o],!this.options.preventMouseEventsDefault&&mg);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())},de.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var r=this;this.wheelListener=function(n){return r.handleMouseWheel(n)};var t=!this.options.preventMouseEventsDefault;gg.on(this.options.eventsListenerElement||this.svg,this.wheelListener,t),this.options.mouseWheelZoomEnabled=!0}},de.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var r=!this.options.preventMouseEventsDefault;gg.off(this.options.eventsListenerElement||this.svg,this.wheelListener,r),this.options.mouseWheelZoomEnabled=!1}},de.prototype.handleMouseWheel=function(r){if(this.options.zoomEnabled&&this.state==="none"){this.options.preventMouseEventsDefault&&(r.preventDefault?r.preventDefault():r.returnValue=!1);var t=r.deltaY||1,n=Date.now()-this.lastMouseWheelEventTime,e=3+Math.max(0,30-n);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in r&&r.deltaMode===0&&r.wheelDelta&&(t=r.deltaY===0?0:Math.abs(r.wheelDelta)/r.deltaY),t=-.3<t&&t<.3?t:(t>0?1:-1)*Math.log(Math.abs(t)+10)/e;var o=this.svg.getScreenCTM().inverse(),s=wr.getEventPoint(r,this.svg).matrixTransform(o),i=Math.pow(1+this.options.zoomScaleSensitivity,-1*t);this.zoomAtPoint(i,s)}},de.prototype.zoomAtPoint=function(r,t,n){var e=this.viewport.getOriginalState();n?(r=Math.max(this.options.minZoom*e.zoom,Math.min(this.options.maxZoom*e.zoom,r)),r/=this.getZoom()):this.getZoom()*r<this.options.minZoom*e.zoom?r=this.options.minZoom*e.zoom/this.getZoom():this.getZoom()*r>this.options.maxZoom*e.zoom&&(r=this.options.maxZoom*e.zoom/this.getZoom());var o=this.viewport.getCTM(),s=t.matrixTransform(o.inverse()),i=this.svg.createSVGMatrix().translate(s.x,s.y).scale(r).translate(-s.x,-s.y),a=o.multiply(i);a.a!==o.a&&this.viewport.setCTM(a)},de.prototype.zoom=function(r,t){this.zoomAtPoint(r,wr.getSvgCenterPoint(this.svg,this.width,this.height),t)},de.prototype.publicZoom=function(r,t){t&&(r=this.computeFromRelativeZoom(r)),this.zoom(r,t)},de.prototype.publicZoomAtPoint=function(r,t,n){if(n&&(r=this.computeFromRelativeZoom(r)),rr.getType(t)!=="SVGPoint"){if(!("x"in t)||!("y"in t))throw new Error("Given point is invalid");t=wr.createSVGPoint(this.svg,t.x,t.y)}this.zoomAtPoint(r,t,n)},de.prototype.getZoom=function(){return this.viewport.getZoom()},de.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()},de.prototype.computeFromRelativeZoom=function(r){return r*this.viewport.getOriginalState().zoom},de.prototype.resetZoom=function(){var r=this.viewport.getOriginalState();this.zoom(r.zoom,!0)},de.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())},de.prototype.reset=function(){this.resetZoom(),this.resetPan()},de.prototype.handleDblClick=function(r){var t;if(this.options.preventMouseEventsDefault&&(r.preventDefault?r.preventDefault():r.returnValue=!1),this.options.controlIconsEnabled&&(r.target.getAttribute("class")||"").indexOf("svg-pan-zoom-control")>-1)return!1;t=r.shiftKey?1/(2*(1+this.options.zoomScaleSensitivity)):2*(1+this.options.zoomScaleSensitivity);var n=wr.getEventPoint(r,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(t,n)},de.prototype.handleMouseDown=function(r,t){this.options.preventMouseEventsDefault&&(r.preventDefault?r.preventDefault():r.returnValue=!1),rr.mouseAndTouchNormalize(r,this.svg),this.options.dblClickZoomEnabled&&rr.isDblClick(r,t)?this.handleDblClick(r):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=wr.getEventPoint(r,this.svg).matrixTransform(this.firstEventCTM.inverse()))},de.prototype.handleMouseMove=function(r){if(this.options.preventMouseEventsDefault&&(r.preventDefault?r.preventDefault():r.returnValue=!1),this.state==="pan"&&this.options.panEnabled){var t=wr.getEventPoint(r,this.svg).matrixTransform(this.firstEventCTM.inverse()),n=this.firstEventCTM.translate(t.x-this.stateOrigin.x,t.y-this.stateOrigin.y);this.viewport.setCTM(n)}},de.prototype.handleMouseUp=function(r){this.options.preventMouseEventsDefault&&(r.preventDefault?r.preventDefault():r.returnValue=!1),this.state==="pan"&&(this.state="none")},de.prototype.fit=function(){var r=this.viewport.getViewBox(),t=Math.min(this.width/r.width,this.height/r.height);this.zoom(t,!0)},de.prototype.contain=function(){var r=this.viewport.getViewBox(),t=Math.max(this.width/r.width,this.height/r.height);this.zoom(t,!0)},de.prototype.center=function(){var r=this.viewport.getViewBox(),t=.5*(this.width-(r.width+2*r.x)*this.getZoom()),n=.5*(this.height-(r.height+2*r.y)*this.getZoom());this.getPublicInstance().pan({x:t,y:n})},de.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()},de.prototype.pan=function(r){var t=this.viewport.getCTM();t.e=r.x,t.f=r.y,this.viewport.setCTM(t)},de.prototype.panBy=function(r){var t=this.viewport.getCTM();t.e+=r.x,t.f+=r.y,this.viewport.setCTM(t)},de.prototype.getPan=function(){var r=this.viewport.getState();return{x:r.x,y:r.y}},de.prototype.resize=function(){var r=wr.getBoundingClientRectNormalized(this.svg);this.width=r.width,this.height=r.height;var t=this.viewport;t.options.width=this.width,t.options.height=this.height,t.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())},de.prototype.destroy=function(){var r=this;for(var t in this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,this.options.customEventsHandler!=null&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()}),this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(t,this.eventListeners[t],!this.options.preventMouseEventsDefault&&mg);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),this.reset(),uo=uo.filter(function(n){return n.svg!==r.svg}),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}},de.prototype.getPublicInstance=function(){var r=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return r.options.panEnabled=!0,r.pi},disablePan:function(){return r.options.panEnabled=!1,r.pi},isPanEnabled:function(){return!!r.options.panEnabled},pan:function(t){return r.pan(t),r.pi},panBy:function(t){return r.panBy(t),r.pi},getPan:function(){return r.getPan()},setBeforePan:function(t){return r.options.beforePan=t===null?null:rr.proxy(t,r.publicInstance),r.pi},setOnPan:function(t){return r.options.onPan=t===null?null:rr.proxy(t,r.publicInstance),r.pi},enableZoom:function(){return r.options.zoomEnabled=!0,r.pi},disableZoom:function(){return r.options.zoomEnabled=!1,r.pi},isZoomEnabled:function(){return!!r.options.zoomEnabled},enableControlIcons:function(){return r.options.controlIconsEnabled||(r.options.controlIconsEnabled=!0,zu.enable(r)),r.pi},disableControlIcons:function(){return r.options.controlIconsEnabled&&(r.options.controlIconsEnabled=!1,zu.disable(r)),r.pi},isControlIconsEnabled:function(){return!!r.options.controlIconsEnabled},enableDblClickZoom:function(){return r.options.dblClickZoomEnabled=!0,r.pi},disableDblClickZoom:function(){return r.options.dblClickZoomEnabled=!1,r.pi},isDblClickZoomEnabled:function(){return!!r.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return r.enableMouseWheelZoom(),r.pi},disableMouseWheelZoom:function(){return r.disableMouseWheelZoom(),r.pi},isMouseWheelZoomEnabled:function(){return!!r.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(t){return r.options.zoomScaleSensitivity=t,r.pi},setMinZoom:function(t){return r.options.minZoom=t,r.pi},setMaxZoom:function(t){return r.options.maxZoom=t,r.pi},setBeforeZoom:function(t){return r.options.beforeZoom=t===null?null:rr.proxy(t,r.publicInstance),r.pi},setOnZoom:function(t){return r.options.onZoom=t===null?null:rr.proxy(t,r.publicInstance),r.pi},zoom:function(t){return r.publicZoom(t,!0),r.pi},zoomBy:function(t){return r.publicZoom(t,!1),r.pi},zoomAtPoint:function(t,n){return r.publicZoomAtPoint(t,n,!0),r.pi},zoomAtPointBy:function(t,n){return r.publicZoomAtPoint(t,n,!1),r.pi},zoomIn:function(){return this.zoomBy(1+r.options.zoomScaleSensitivity),r.pi},zoomOut:function(){return this.zoomBy(1/(1+r.options.zoomScaleSensitivity)),r.pi},getZoom:function(){return r.getRelativeZoom()},setOnUpdatedCTM:function(t){return r.options.onUpdatedCTM=t===null?null:rr.proxy(t,r.publicInstance),r.pi},resetZoom:function(){return r.resetZoom(),r.pi},resetPan:function(){return r.resetPan(),r.pi},reset:function(){return r.reset(),r.pi},fit:function(){return r.fit(),r.pi},contain:function(){return r.contain(),r.pi},center:function(){return r.center(),r.pi},updateBBox:function(){return r.updateBBox(),r.pi},resize:function(){return r.resize(),r.pi},getSizes:function(){return{width:r.width,height:r.height,realZoom:r.getZoom(),viewBox:r.viewport.getViewBox()}},destroy:function(){return r.destroy(),r.pi}}),this.publicInstance};var uo=[],iB=function(r,t){var n=rr.getSvg(r);if(n===null)return null;for(var e=uo.length-1;e>=0;e--)if(uo[e].svg===n)return uo[e].instance.getPublicInstance();return uo.push({svg:n,instance:new de(n,t)}),uo[uo.length-1].instance.getPublicInstance()};const aB=sa(iB),lB=new Map([[nf.light,"default"],[nf.dark,"dark"]]),cB=(r,t)=>{const n=`mermaid-${crypto.randomUUID()}`;let e,o=!1;const s=()=>{try{e==null||e.destroy()}catch(c){o?console.warn("Pan controller matrix is not invertible, controller will not be destroyed"):console.error("Failed to destroy pan controller: ",c)}e=void 0};let i=0;const a=ad(c=>{(async function(u){const h=(t.themeCategory&&lB.get(t.themeCategory))??"default";pg.initialize({startOnLoad:!1,theme:h});try{const{svg:d,bindFunctions:p}=await pg.render(n,u,r);r.innerHTML=d,t.setSvg(d),p==null||p(r);const g=document.querySelector(`#${n}`);if(g===null)throw new Error("Diagram element not found");const $=document.querySelector(".c-codeblock__top-bar-anchor"),b=($==null?void 0:$.getBoundingClientRect().height)||0;t.setContainerPosition(b),g.style.height=500-b+"px",g.style.maxWidth="100%",s(),e=aB(g,{fit:!0,center:!0,mouseWheelZoomEnabled:!1}),e.setOnUpdatedCTM(y=>{var x;(x=y).a*x.d-x.c*x.b==0&&(o=!0,console.warn("Pan controller matrix is not invertible"))}),t.setPanZoomController(e)}catch(d){console.error("Failed to parse mermaid diagram: ",d),t.setError(!0)}})(c)},150),l=new ResizeObserver(c=>{const u=c[0].contentRect.width;u!==i&&t.text!==""&&t.canRender()&&(i=u,a(t.text))});return l.observe(document.documentElement),{update:c=>{(c.text!==""&&t.text!==c.text||c.themeCategory!==t.themeCategory)&&(t={...t,...c},a(t.text))},destroy:()=>{r.innerHTML="",l.disconnect(),s()}}};function uB(r){let t,n;return t=new _2({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function hB(r){let t,n;return t=new l2({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function dB(r){let t,n;return t=new q6({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function pB(r){let t,n;return t=new x_({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function fB(r){let t,n;return t=new ok({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function gB(r){let t,n;return t=new vy({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function mB(r){let t,n;return t=new pd({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function $B(r){let t,n,e,o,s,i,a,l,c,u,h,d,p,g,$,b,y,x,M,L,A,B,E,F,U,tt;return e=new f8({props:{token:r[2]?{...r[0],text:""}:r[0],codeblockMetadata:r[1],height:500,actionButtons:r[5],removeDefaultButtons:r[2]}}),u=new xe({props:{color:"neutral",variant:"ghost",$$slots:{default:[uB]},$$scope:{ctx:r}}}),u.$on("click",r[17]),d=new xe({props:{color:"neutral",variant:"ghost",$$slots:{default:[hB]},$$scope:{ctx:r}}}),d.$on("click",r[18]),g=new xe({props:{color:"neutral",variant:"ghost",$$slots:{default:[dB]},$$scope:{ctx:r}}}),g.$on("click",r[19]),b=new xe({props:{color:"neutral",variant:"ghost",$$slots:{default:[pB]},$$scope:{ctx:r}}}),b.$on("click",r[20]),x=new xe({props:{color:"neutral",variant:"ghost",$$slots:{default:[fB]},$$scope:{ctx:r}}}),x.$on("click",function(){var q,N;Be((q=r[6])==null?void 0:q.reset)&&((N=r[6])==null||N.reset.apply(this,arguments))}),L=new xe({props:{color:"neutral",variant:"ghost",$$slots:{default:[gB]},$$scope:{ctx:r}}}),L.$on("click",r[21]),E=new xe({props:{color:"neutral",variant:"ghost",$$slots:{default:[mB]},$$scope:{ctx:r}}}),E.$on("click",r[22]),{c(){t=I("div"),n=I("div"),_(e.$$.fragment),o=J(),s=I("div"),i=I("div"),l=J(),c=I("div"),_(u.$$.fragment),h=J(),_(d.$$.fragment),p=J(),_(g.$$.fragment),$=J(),_(b.$$.fragment),y=J(),_(x.$$.fragment),M=J(),_(L.$$.fragment),A=J(),B=I("div"),_(E.$$.fragment),T(i,"class","c-mermaid-diagram svelte-1jg9bup"),T(s,"class","c-mermaid-diagram-container svelte-1jg9bup"),ut(s,"c-mermaid-diagram-hidden",!r[2]),T(B,"class","c-mermaid-controls-container__down svelte-1jg9bup"),T(c,"class","c-mermaid-controls-container svelte-1jg9bup"),ut(c,"c-mermaid-diagram-hidden",!r[2]),Ge(n,"position","relative"),T(t,"class","c-mermaid-block svelte-1jg9bup")},m(q,N){S(q,t,N),O(t,n),k(e,n,null),O(n,o),O(n,s),O(s,i),r[16](s),O(n,l),O(n,c),k(u,c,null),O(c,h),k(d,c,null),O(c,p),k(g,c,null),O(c,$),k(b,c,null),O(c,y),k(x,c,null),O(c,M),k(L,c,null),O(c,A),O(c,B),k(E,B,null),F=!0,U||(tt=Co(a=cB.call(null,i,{text:r[3]||r[4]?"":r[0].text,canRender:r[9],setError:r[10],setContainerPosition:r[11],setPanZoomController:r[12],themeCategory:r[8],setSvg:r[13]})),U=!0)},p(q,[N]){r=q;const R={};5&N&&(R.token=r[2]?{...r[0],text:""}:r[0]),2&N&&(R.codeblockMetadata=r[1]),32&N&&(R.actionButtons=r[5]),4&N&&(R.removeDefaultButtons=r[2]),e.$set(R),a&&Be(a.update)&&281&N&&a.update.call(null,{text:r[3]||r[4]?"":r[0].text,canRender:r[9],setError:r[10],setContainerPosition:r[11],setPanZoomController:r[12],themeCategory:r[8],setSvg:r[13]}),(!F||4&N)&&ut(s,"c-mermaid-diagram-hidden",!r[2]);const j={};536870912&N&&(j.$$scope={dirty:N,ctx:r}),u.$set(j);const Q={};536870912&N&&(Q.$$scope={dirty:N,ctx:r}),d.$set(Q);const z={};536870912&N&&(z.$$scope={dirty:N,ctx:r}),g.$set(z);const G={};536870912&N&&(G.$$scope={dirty:N,ctx:r}),b.$set(G);const K={};536870912&N&&(K.$$scope={dirty:N,ctx:r}),x.$set(K);const et={};536870912&N&&(et.$$scope={dirty:N,ctx:r}),L.$set(et);const ct={};536870912&N&&(ct.$$scope={dirty:N,ctx:r}),E.$set(ct),(!F||4&N)&&ut(c,"c-mermaid-diagram-hidden",!r[2])},i(q){F||(f(e.$$.fragment,q),f(u.$$.fragment,q),f(d.$$.fragment,q),f(g.$$.fragment,q),f(b.$$.fragment,q),f(x.$$.fragment,q),f(L.$$.fragment,q),f(E.$$.fragment,q),F=!0)},o(q){m(e.$$.fragment,q),m(u.$$.fragment,q),m(d.$$.fragment,q),m(g.$$.fragment,q),m(b.$$.fragment,q),m(x.$$.fragment,q),m(L.$$.fragment,q),m(E.$$.fragment,q),F=!1},d(q){q&&v(t),C(e),r[16](null),C(u),C(d),C(g),C(b),C(x),C(L),C(E),U=!1,tt()}}}function yB(r,t,n){let e,o;Vt(r,sd,L=>n(15,o=L));let{token:s}=t,{codeblockMetadata:i}=t;const a=Jt("chatModel"),l=a==null?void 0:a.extensionClient;xc(()=>{l==null||l.reportWebviewClientEvent(Gr.chatMermaidblockInitialize)});let c,u,h,d=!1,p=!0,g=!1,$=!1;function b(){n(2,d=!d),$||($=!0,l==null||l.reportWebviewClientEvent(Gr.chatMermaidblockToggle))}let y,x=!1;function M(){x||(l==null||l.reportWebviewClientEvent(Gr.chatMermaidblockInteract),x=!0)}return r.$$set=L=>{"token"in L&&n(0,s=L.token),"codeblockMetadata"in L&&n(1,i=L.codeblockMetadata)},r.$$.update=()=>{32768&r.$$.dirty&&n(8,e=o==null?void 0:o.category),17&r.$$.dirty&&s.raw.trim().endsWith("```")&&!g&&(n(3,p=!1),n(2,d=!0)),16446&r.$$.dirty&&(n(5,y=void 0),g||p||(n(5,y=[{codeblockActionType:le.goTo,title:d?"Show Code":"Show Diagram",onClick:b,iconName:d?"data_object":"account_tree",buttonText:d?"Code":"Diagram",primary:!0}]),d&&(y==null||y.push({codeblockActionType:le.copy,title:"Copy SVG",onClick:()=>{h&&f2(h)},iconName:"file_copy",buttonText:"Copy SVG",onSuccessMessage:"Copied SVG"},{codeblockActionType:le.insert,title:"Create SVG",onClick:()=>{var L;if(h&&a){const A=(L=i==null?void 0:i.relPath)==null?void 0:L.replace(/\.[^/.]+$/,".svg");g2(h,a.extensionClient,A)}},iconName:"new_window",buttonText:"Create SVG",onSuccessMessage:"Created SVG"}))))},[s,i,d,p,g,y,c,u,e,function(){return d&&!p&&!g},function(L){L&&(n(2,d=!1),n(3,p=!1),g||(l==null||l.reportWebviewClientEvent(Gr.chatMermaidBlockError))),n(4,g=L)},function(L){n(7,u.style.top=`${L}px`,u)},function(L){n(6,c=L),c.setOnPan(M),c.setOnZoom(M)},function(L){n(14,h=L)},h,o,function(L){Pt[L?"unshift":"push"](()=>{u=L,n(7,u)})},()=>c==null?void 0:c.zoomIn(),()=>c==null?void 0:c.panBy({x:0,y:32}),()=>c==null?void 0:c.zoomOut(),()=>c==null?void 0:c.panBy({x:32,y:0}),()=>c==null?void 0:c.panBy({x:-32,y:0}),()=>c==null?void 0:c.panBy({x:0,y:-32})]}class G3 extends nt{constructor(t){super(),rt(this,t,yB,$B,ot,{token:0,codeblockMetadata:1})}}function xB(r){let t,n;return t=new R6({props:{token:r[0],codeblockMetadata:r[1]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1&o&&(s.token=e[0]),2&o&&(s.codeblockMetadata=e[1]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function bB(r){let t,n;return t=new G3({props:{token:r[0],codeblockMetadata:r[1]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1&o&&(s.token=e[0]),2&o&&(s.codeblockMetadata=e[1]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function wB(r){let t,n,e,o;const s=[bB,xB],i=[];function a(l,c){return l[3]==="mermaid"&&l[2]?0:1}return t=a(r),n=i[t]=s[t](r),{c(){n.c(),e=dt()},m(l,c){i[t].m(l,c),S(l,e,c),o=!0},p(l,[c]){let u=t;t=a(l),t===u?i[t].p(l,c):(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),n=i[t],n?n.p(l,c):(n=i[t]=s[t](l),n.c()),f(n,1),n.m(e.parentNode,e))},i(l){o||(f(n),o=!0)},o(l){m(n),o=!1},d(l){l&&v(e),i[t].d(l)}}}function vB(r,t,n){let e,o,s,i,{token:a}=t;const l=Jt("chatModel");return r.$$set=c=>{"token"in c&&n(0,a=c.token)},r.$$.update=()=>{1&r.$$.dirty&&n(4,e=function(c){const u=c.indexOf(`
`);if(u!==-1)return c.slice(0,u)}(a.raw)),16&r.$$.dirty&&n(1,o=e?function(c){const u=/^`{3,}(\w+)?/.exec(c),h=(u==null?void 0:u[1])??null;if(!u)return{language:null,relPath:null,mode:null};const d=c.slice(u[0].length);let p=null;const g=" path=",$=d.indexOf(g);if($!==-1){const x=d.slice($+6),M=x.indexOf(" mode=");p=(M!==-1?x.slice(0,M):x).trim()}let b=null;const y=d.indexOf(" mode=");return y!==-1&&(b=d.slice(y+6).trim()),{language:h,relPath:p,mode:b}}(e):void 0),3&r.$$.dirty&&n(3,s=(o==null?void 0:o.language)??a.lang)},n(2,i=(l==null?void 0:l.flags.enableChatMermaidDiagrams)||(l==null?void 0:l.flags.enableChatMermaidDiagramsMinVersion)),[a,o,i,s,e]}class _B extends nt{constructor(t){super(),rt(this,t,vB,wB,ot,{token:0})}}function kB(r){let t,n,e,o;return{c(){t=I("textarea"),T(t,"class",n=xo(`c-textarea ${r[6]}`)+" svelte-tvppjv"),t.disabled=r[5],T(t,"placeholder",r[2]),T(t,"rows",r[3]),ut(t,"c-textarea--resize-none",r[4]==="none"),ut(t,"c-textarea--resize-both",r[4]==="both"),ut(t,"c-textarea--resize-horizontal",r[4]==="horizontal"),ut(t,"c-textarea--resize-vertical",r[4]==="vertical")},m(s,i){S(s,t,i),r[9](t),rf(t,r[1]),e||(o=[Kt(t,"input",r[10]),Kt(t,"keydown",r[7]),Kt(t,"input",r[8])],e=!0)},p(s,[i]){64&i&&n!==(n=xo(`c-textarea ${s[6]}`)+" svelte-tvppjv")&&T(t,"class",n),32&i&&(t.disabled=s[5]),4&i&&T(t,"placeholder",s[2]),8&i&&T(t,"rows",s[3]),2&i&&rf(t,s[1]),80&i&&ut(t,"c-textarea--resize-none",s[4]==="none"),80&i&&ut(t,"c-textarea--resize-both",s[4]==="both"),80&i&&ut(t,"c-textarea--resize-horizontal",s[4]==="horizontal"),80&i&&ut(t,"c-textarea--resize-vertical",s[4]==="vertical")},i:H,o:H,d(s){s&&v(t),r[9](null),e=!1,Qr(o)}}}function CB(r,t,n){let{textarea:e}=t,{value:o=""}=t,{placeholder:s=""}=t,{rows:i=1}=t,{resize:a="none"}=t,{disabled:l=!1}=t,{class:c=""}=t;return r.$$set=u=>{"textarea"in u&&n(0,e=u.textarea),"value"in u&&n(1,o=u.value),"placeholder"in u&&n(2,s=u.placeholder),"rows"in u&&n(3,i=u.rows),"resize"in u&&n(4,a=u.resize),"disabled"in u&&n(5,l=u.disabled),"class"in u&&n(6,c=u.class)},[e,o,s,i,a,l,c,function(u){me.call(this,r,u)},function(u){me.call(this,r,u)},function(u){Pt[u?"unshift":"push"](()=>{e=u,n(0,e)})},function(){o=this.value,n(1,o)}]}class SB extends nt{constructor(t){super(),rt(this,t,CB,kB,ot,{textarea:0,value:1,placeholder:2,rows:3,resize:4,disabled:5,class:6})}}function TB(r){let t;return{c(){t=W(r[1])},m(n,e){S(n,t,e)},p(n,e){2&e&&ht(t,n[1])},d(n){n&&v(t)}}}function MB(r){let t;return{c(){t=W(r[2])},m(n,e){S(n,t,e)},p(n,e){4&e&&ht(t,n[2])},d(n){n&&v(t)}}}function AB(r){let t;return{c(){t=W("Action failed")},m(n,e){S(n,t,e)},p:H,d(n){n&&v(t)}}}function LB(r){let t;function n(s,i){return s[4]==="error"?AB:s[4]==="success"?MB:TB}let e=n(r),o=e(r);return{c(){o.c(),t=dt()},m(s,i){o.m(s,i),S(s,t,i)},p(s,i){e===(e=n(s))&&o?o.p(s,i):(o.d(1),o=e(s),o&&(o.c(),o.m(t.parentNode,t)))},d(s){s&&v(t),o.d(s)}}}function EB(r){let t,n,e;var o=r[0];return o&&(t=Nn(o,{props:{slot:"iconLeft"}})),{c(){t&&_(t.$$.fragment),n=dt()},m(s,i){t&&k(t,s,i),S(s,n,i),e=!0},p(s,i){if(1&i&&o!==(o=s[0])){if(t){Y();const a=t;m(a.$$.fragment,1,0,()=>{C(a,1)}),X()}o?(t=Nn(o,{props:{slot:"iconLeft"}}),_(t.$$.fragment),f(t.$$.fragment,1),k(t,n.parentNode,n)):t=null}},i(s){e||(t&&f(t.$$.fragment,s),e=!0)},o(s){t&&m(t.$$.fragment,s),e=!1},d(s){s&&v(n),t&&C(t,s)}}}function BB(r){let t,n;return t=new Ie.Item({props:{color:r[4]==="error"?"error":void 0,onSelect:r[5],disabled:r[3],$$slots:{iconLeft:[EB],default:[LB]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};16&o&&(s.color=e[4]==="error"?"error":void 0),8&o&&(s.disabled=e[3]),535&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function IB(r,t,n){let e,{icon:o}=t,{idleLabel:s}=t,{successLabel:i}=t,{onSelect:a}=t,{successDuration:l=500}=t,{disabled:c=!1}=t,u="idle";return Gs(()=>{clearTimeout(e)}),r.$$set=h=>{"icon"in h&&n(0,o=h.icon),"idleLabel"in h&&n(1,s=h.idleLabel),"successLabel"in h&&n(2,i=h.successLabel),"onSelect"in h&&n(6,a=h.onSelect),"successDuration"in h&&n(7,l=h.successDuration),"disabled"in h&&n(3,c=h.disabled)},[o,s,i,c,u,async function(){try{await(a==null?void 0:a()),n(4,u="success"),clearTimeout(e),e=setTimeout(()=>{n(4,u="idle")},l)}catch{n(4,u="error"),e=setTimeout(()=>{n(4,u="idle")},l)}},a,l]}class Z3 extends nt{constructor(t){super(),rt(this,t,IB,BB,ot,{icon:0,idleLabel:1,successLabel:2,onSelect:6,successDuration:7,disabled:3})}}function FB(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},r[0]],o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return{c(){t=Bt("svg"),n=new Oe(!0),this.h()},l(s){t=ze(s,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Ne(t);n=Re(i,!0),i.forEach(v),this.h()},h(){n.a=null,Ht(t,o)},m(s,i){Pe(s,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M323.8 477.2c-38.2 10.9-78.1-11.2-89-49.4l-5.7-20c-3.7-13-10.4-25-19.5-35l-51.3-56.4c-8.9-9.8-8.2-25 1.6-33.9s25-8.2 33.9 1.6l51.3 56.4c14.1 15.5 24.4 34 30.1 54.1l5.7 20c3.6 12.7 16.9 20.1 29.7 16.5s20.1-16.9 16.5-29.7l-5.7-20c-5.7-19.9-14.7-38.7-26.6-55.5-5.2-7.3-5.8-16.9-1.7-24.9s12.3-13 21.3-13H448c8.8 0 16-7.2 16-16 0-6.8-4.3-12.7-10.4-15-7.4-2.8-13-9-14.9-16.7s.1-15.8 5.3-21.7c2.5-2.8 4-6.5 4-10.6 0-7.8-5.6-14.3-13-15.7-8.2-1.6-15.1-7.3-18-15.2s-1.6-16.7 3.6-23.3c2.1-2.7 3.4-6.1 3.4-9.9 0-6.7-4.2-12.6-10.2-14.9-11.5-4.5-17.7-16.9-14.4-28.8.4-1.3.6-2.8.6-4.3 0-8.8-7.2-16-16-16h-97.5c-12.6 0-25 3.7-35.5 10.7l-61.7 41.1c-11 7.4-25.9 4.4-33.3-6.7s-4.4-25.9 6.7-33.3l61.7-41.1c18.4-12.3 40-18.8 62.1-18.8l97.5.2c34.7 0 62.9 27.6 64 62 14.6 11.7 24 29.7 24 50 0 4.5-.5 8.8-1.3 13 15.4 11.7 25.3 30.2 25.3 51 0 6.5-1 12.8-2.8 18.7 11.6 11.6 18.8 27.6 18.8 45.3 0 35.3-28.6 64-64 64h-92.3c4.7 10.4 8.7 21.2 11.8 32.2l5.7 20c10.9 38.2-11.2 78.1-49.4 89M32 384c-17.7 0-32-14.3-32-32V128c0-17.7 14.3-32 32-32h64c17.7 0 32 14.3 32 32v224c0 17.7-14.3 32-32 32z"/>',t)},p(s,[i]){Ht(t,o=Zt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&s[0]]))},i:H,o:H,d(s){s&&v(t)}}}function DB(r,t,n){return r.$$set=e=>{n(0,t=lt(lt({},t),jt(e)))},[t=jt(t)]}class OB extends nt{constructor(t){super(),rt(this,t,DB,FB,ot,{})}}function zB(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},r[0]],o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return{c(){t=Bt("svg"),n=new Oe(!0),this.h()},l(s){t=ze(s,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Ne(t);n=Re(i,!0),i.forEach(v),this.h()},h(){n.a=null,Ht(t,o)},m(s,i){Pe(s,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M323.8 34.8c-38.2-10.9-78.1 11.2-89 49.4l-5.7 20c-3.7 13-10.4 25-19.5 35l-51.3 56.4c-8.9 9.8-8.2 25 1.6 33.9s25 8.2 33.9-1.6l51.3-56.4c14.1-15.5 24.4-34 30.1-54.1l5.7-20c3.6-12.7 16.9-20.1 29.7-16.5s20.1 16.9 16.5 29.7l-5.7 20c-5.7 19.9-14.7 38.7-26.6 55.5-5.2 7.3-5.8 16.9-1.7 24.9s12.3 13 21.3 13H448c8.8 0 16 7.2 16 16 0 6.8-4.3 12.7-10.4 15-7.4 2.8-13 9-14.9 16.7s.1 15.8 5.3 21.7c2.5 2.8 4 6.5 4 10.6 0 7.8-5.6 14.3-13 15.7-8.2 1.6-15.1 7.3-18 15.2s-1.6 16.7 3.6 23.3c2.1 2.7 3.4 6.1 3.4 9.9 0 6.7-4.2 12.6-10.2 14.9-11.5 4.5-17.7 16.9-14.4 28.8.4 1.3.6 2.8.6 4.3 0 8.8-7.2 16-16 16h-97.5c-12.6 0-25-3.7-35.5-10.7l-61.7-41.1c-11-7.4-25.9-4.4-33.3 6.7s-4.4 25.9 6.7 33.3l61.7 41.1c18.4 12.3 40 18.8 62.1 18.8H384c34.7 0 62.9-27.6 64-62 14.6-11.7 24-29.7 24-50 0-4.5-.5-8.8-1.3-13 15.4-11.7 25.3-30.2 25.3-51 0-6.5-1-12.8-2.8-18.7 11.6-11.8 18.8-27.8 18.8-45.5 0-35.3-28.6-64-64-64h-92.3c4.7-10.4 8.7-21.2 11.8-32.2l5.7-20c10.9-38.2-11.2-78.1-49.4-89M32 192c-17.7 0-32 14.3-32 32v224c0 17.7 14.3 32 32 32h64c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32z"/>',t)},p(s,[i]){Ht(t,o=Zt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&s[0]]))},i:H,o:H,d(s){s&&v(t)}}}function NB(r,t,n){return r.$$set=e=>{n(0,t=lt(lt({},t),jt(e)))},[t=jt(t)]}class RB extends nt{constructor(t){super(),rt(this,t,NB,zB,ot,{})}}function PB(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},r[0]],o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return{c(){t=Bt("svg"),n=new Oe(!0),this.h()},l(s){t=ze(s,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Ne(t);n=Re(i,!0),i.forEach(v),this.h()},h(){n.a=null,Ht(t,o)},m(s,i){Pe(s,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M287.9 0c9.2 0 17.6 5.2 21.6 13.5l68.6 141.3 153.2 22.6c9 1.3 16.5 7.6 19.3 16.3s.5 18.1-5.9 24.5L433.6 328.4 459.8 484c1.5 9-2.2 18.1-9.7 23.5s-17.3 6-25.3 1.7l-137-73.2L151 509.1c-8.1 4.3-17.9 3.7-25.3-1.7s-11.2-14.5-9.7-23.5l26.2-155.6L31.1 218.2c-6.5-6.4-8.7-15.9-5.9-24.5s10.3-14.9 19.3-16.3l153.2-22.6 68.6-141.3C270.4 5.2 278.7 0 287.9 0m0 79-52.5 108.2c-3.5 7.1-10.2 12.1-18.1 13.3L99 217.9l85.9 85.1c5.5 5.5 8.1 13.3 6.8 21l-20.3 119.7 105.2-56.2c7.1-3.8 15.6-3.8 22.6 0l105.2 56.2-20.2-119.6c-1.3-7.7 1.2-15.5 6.8-21l85.9-85.1-118.3-17.5c-7.8-1.2-14.6-6.1-18.1-13.3z"/>',t)},p(s,[i]){Ht(t,o=Zt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},1&i&&s[0]]))},i:H,o:H,d(s){s&&v(t)}}}function UB(r,t,n){return r.$$set=e=>{n(0,t=lt(lt({},t),jt(e)))},[t=jt(t)]}class qB extends nt{constructor(t){super(),rt(this,t,UB,PB,ot,{})}}function $g(r,t,n){const e=r.slice();return e[25]=t[n],e}function jB(r){let t,n;return t=new RB({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function WB(r){let t,n;return t=new xe({props:{class:"c-feedback__positive "+(r[5].selectedRating===Sn.positive?"c-feedback--selected":""),title:"Feedback Positive",variant:"ghost-block",size:1,color:r[5].selectedRating===Sn.positive?"success":"neutral",$$slots:{default:[jB]},$$scope:{ctx:r}}}),t.$on("keyup",en("Enter",r[15])),t.$on("click",r[16]),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};32&o&&(s.class="c-feedback__positive "+(e[5].selectedRating===Sn.positive?"c-feedback--selected":"")),32&o&&(s.color=e[5].selectedRating===Sn.positive?"success":"neutral"),268435456&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function HB(r){let t,n;return t=new OB({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function VB(r){let t,n;return t=new xe({props:{class:"c-feedback__negative "+(r[5].selectedRating===Sn.negative?"c-feedback--selected":""),title:"Feedback Negative",variant:"ghost-block",size:1,color:r[5].selectedRating===Sn.negative?"error":"neutral",$$slots:{default:[HB]},$$scope:{ctx:r}}}),t.$on("keyup",en("Enter",r[17])),t.$on("click",r[18]),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};32&o&&(s.class="c-feedback__negative "+(e[5].selectedRating===Sn.negative?"c-feedback--selected":"")),32&o&&(s.color=e[5].selectedRating===Sn.negative?"error":"neutral"),268435456&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function yg(r){let t,n;return t=new Ys({props:{text:r[3],tooltip:"Copy response"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8&o&&(s.text=e[3]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function GB(r){let t,n;return t=new Oy({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function ZB(r){let t,n;return t=new xe({props:{title:"More options",variant:"ghost-block",size:1,color:"neutral",$$slots:{default:[GB]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};268435456&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function YB(r){let t,n;return t=new he({props:{content:"More options",triggerOn:[Jn.Hover],$$slots:{default:[ZB]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};268435456&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function xg(r){let t,n,e=Gt(r[4]),o=[];for(let i=0;i<e.length;i+=1)o[i]=bg($g(r,e,i));const s=i=>m(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=dt()},m(i,a){for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(i,a);S(i,t,a),n=!0},p(i,a){if(16&a){let l;for(e=Gt(i[4]),l=0;l<e.length;l+=1){const c=$g(i,e,l);o[l]?(o[l].p(c,a),f(o[l],1)):(o[l]=bg(c),o[l].c(),f(o[l],1),o[l].m(t.parentNode,t))}for(Y(),l=e.length;l<o.length;l+=1)s(l);X()}},i(i){if(!n){for(let a=0;a<e.length;a+=1)f(o[a]);n=!0}},o(i){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)m(o[a]);n=!1},d(i){i&&v(t),un(o,i)}}}function bg(r){let t,n;function e(){return r[19](r[25])}return t=new Z3({props:{icon:r[25].icon,idleLabel:r[25].label,successLabel:r[25].successMessage??`${r[25].label} completed`,disabled:r[25].disabled,onSelect:e}}),{c(){_(t.$$.fragment)},m(o,s){k(t,o,s),n=!0},p(o,s){r=o;const i={};16&s&&(i.icon=r[25].icon),16&s&&(i.idleLabel=r[25].label),16&s&&(i.successLabel=r[25].successMessage??`${r[25].label} completed`),16&s&&(i.disabled=r[25].disabled),16&s&&(i.onSelect=e),t.$set(i)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){C(t,o)}}}function XB(r){let t,n,e,o=r[4].length>0&&xg(r);return n=new Z3({props:{icon:Q4,idleLabel:"Copy request ID",successLabel:"Copied request ID",onSelect:r[20]}}),{c(){o&&o.c(),t=J(),_(n.$$.fragment)},m(s,i){o&&o.m(s,i),S(s,t,i),k(n,s,i),e=!0},p(s,i){s[4].length>0?o?(o.p(s,i),16&i&&f(o,1)):(o=xg(s),o.c(),f(o,1),o.m(t.parentNode,t)):o&&(Y(),m(o,1,1,()=>{o=null}),X());const a={};2&i&&(a.onSelect=s[20]),n.$set(a)},i(s){e||(f(o),f(n.$$.fragment,s),e=!0)},o(s){m(o),m(n.$$.fragment,s),e=!1},d(s){s&&v(t),o&&o.d(s),C(n,s)}}}function QB(r){let t,n,e,o;return t=new Ie.Trigger({props:{$$slots:{default:[YB]},$$scope:{ctx:r}}}),e=new Ie.Content({props:{size:1,side:"right",align:"start",$$slots:{default:[XB]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment),n=J(),_(e.$$.fragment)},m(s,i){k(t,s,i),S(s,n,i),k(e,s,i),o=!0},p(s,i){const a={};268435456&i&&(a.$$scope={dirty:i,ctx:s}),t.$set(a);const l={};268435474&i&&(l.$$scope={dirty:i,ctx:s}),e.$set(l)},i(s){o||(f(t.$$.fragment,s),f(e.$$.fragment,s),o=!0)},o(s){m(t.$$.fragment,s),m(e.$$.fragment,s),o=!1},d(s){s&&v(n),C(t,s),C(e,s)}}}function KB(r){let t,n;return{c(){t=I("span"),n=W(r[8]),T(t,"class","c-feedback__thankyou svelte-1n1ocyp")},m(e,o){S(e,t,o),O(t,n)},p(e,o){256&o&&ht(n,e[8])},i:H,o:H,d(e){e&&v(t)}}}function JB(r){let t,n;return t=new Lr({props:{size:1,variant:"ghost",color:"neutral",$$slots:{iconLeft:[eI],default:[tI]},$$scope:{ctx:r}}}),t.$on("click",r[22]),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};268435456&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function tI(r){let t;return{c(){t=W("Leave a review for Augment!")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function eI(r){let t,n;return t=new qB({props:{slot:"iconLeft"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function wg(r){let t,n,e;return n=new zy({props:{size:1,$$slots:{default:[sI]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-feedback__input-container svelte-1n1ocyp")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};268435494&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function nI(r){let t;return{c(){t=W("Request ID")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function rI(r){let t;return{c(){t=W("Cancel")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function oI(r){let t,n=r[2]?"Update Feedback":"Share Feedback";return{c(){t=W(n)},m(e,o){S(e,t,o)},p(e,o){4&o&&n!==(n=e[2]?"Update Feedback":"Share Feedback")&&ht(t,n)},d(e){e&&v(t)}}}function sI(r){let t,n,e,o,s,i,a,l,c,u,h,d;return t=new SB({props:{class:"c-feedback__textarea",rows:3,placeholder:"Enter your feedback...",value:r[5].feedbackNote}}),t.$on("input",r[10]),o=new Ys({props:{text:r[1],tooltip:"Copy request ID",$$slots:{text:[nI]},$$scope:{ctx:r}}}),a=new Lr({props:{class:"c-feedback__cancel",title:"Cancel",variant:"soft",color:"neutral",size:1,$$slots:{default:[rI]},$$scope:{ctx:r}}}),a.$on("keyup",en("Enter",r[13])),a.$on("click",r[13]),c=new Lr({props:{class:"c-feedback__send",title:"Share feedback",color:"accent",disabled:!r[5].feedbackNote.trim(),size:1,$$slots:{default:[oI]},$$scope:{ctx:r}}}),c.$on("keyup",en("Enter",r[11])),c.$on("click",r[11]),{c(){_(t.$$.fragment),n=J(),e=I("div"),_(o.$$.fragment),s=J(),i=I("div"),_(a.$$.fragment),l=J(),_(c.$$.fragment),T(i,"class","l-feedback__send-btns svelte-1n1ocyp"),T(e,"class","l-feedback__send svelte-1n1ocyp")},m(p,g){k(t,p,g),S(p,n,g),S(p,e,g),k(o,e,null),O(e,s),O(e,i),k(a,i,null),O(i,l),k(c,i,null),u=!0,h||(d=Co(aI.call(null,e)),h=!0)},p(p,g){const $={};32&g&&($.value=p[5].feedbackNote),t.$set($);const b={};2&g&&(b.text=p[1]),268435456&g&&(b.$$scope={dirty:g,ctx:p}),o.$set(b);const y={};268435456&g&&(y.$$scope={dirty:g,ctx:p}),a.$set(y);const x={};32&g&&(x.disabled=!p[5].feedbackNote.trim()),268435460&g&&(x.$$scope={dirty:g,ctx:p}),c.$set(x)},i(p){u||(f(t.$$.fragment,p),f(o.$$.fragment,p),f(a.$$.fragment,p),f(c.$$.fragment,p),u=!0)},o(p){m(t.$$.fragment,p),m(o.$$.fragment,p),m(a.$$.fragment,p),m(c.$$.fragment,p),u=!1},d(p){p&&(v(n),v(e)),C(t,p),C(o),C(a),C(c),h=!1,d()}}}function iI(r){let t,n,e,o,s,i,a,l,c,u,h,d,p,g,$,b;o=new he({props:{content:"Give feedback",$$slots:{default:[WB]},$$scope:{ctx:r}}}),i=new he({props:{content:"Give feedback",$$slots:{default:[VB]},$$scope:{ctx:r}}});let y=r[3]&&yg(r);function x(F){r[21](F)}let M={$$slots:{default:[QB]},$$scope:{ctx:r}};r[7]!==void 0&&(M.requestClose=r[7]),c=new Ie.Root({props:M}),Pt.push(()=>re(c,"requestClose",x));const L=[JB,KB],A=[];function B(F,U){return 96&U&&(d=null),d==null&&(d=!(F[5].selectedRating!==Sn.positive||!F[6]&&function(){try{return localStorage.getItem(Y3)==="true"}catch{return!0}}())),d?0:1}p=B(r,-1),g=A[p]=L[p](r);let E=r[0]&&wg(r);return{c(){t=I("div"),n=I("div"),e=I("div"),_(o.$$.fragment),s=J(),_(i.$$.fragment),a=J(),y&&y.c(),l=J(),_(c.$$.fragment),h=J(),g.c(),$=J(),E&&E.c(),T(e,"class","c-feedback__buttons svelte-1n1ocyp"),T(n,"class","c-feedback__ratings svelte-1n1ocyp"),T(t,"class","c-feedback svelte-1n1ocyp")},m(F,U){S(F,t,U),O(t,n),O(n,e),k(o,e,null),O(e,s),k(i,e,null),O(e,a),y&&y.m(e,null),O(e,l),k(c,e,null),O(n,h),A[p].m(n,null),O(t,$),E&&E.m(t,null),b=!0},p(F,[U]){const tt={};268435488&U&&(tt.$$scope={dirty:U,ctx:F}),o.$set(tt);const q={};268435488&U&&(q.$$scope={dirty:U,ctx:F}),i.$set(q),F[3]?y?(y.p(F,U),8&U&&f(y,1)):(y=yg(F),y.c(),f(y,1),y.m(e,l)):y&&(Y(),m(y,1,1,()=>{y=null}),X());const N={};268435474&U&&(N.$$scope={dirty:U,ctx:F}),!u&&128&U&&(u=!0,N.requestClose=F[7],oe(()=>u=!1)),c.$set(N);let R=p;p=B(F,U),p===R?A[p].p(F,U):(Y(),m(A[R],1,1,()=>{A[R]=null}),X(),g=A[p],g?g.p(F,U):(g=A[p]=L[p](F),g.c()),f(g,1),g.m(n,null)),F[0]?E?(E.p(F,U),1&U&&f(E,1)):(E=wg(F),E.c(),f(E,1),E.m(t,null)):E&&(Y(),m(E,1,1,()=>{E=null}),X())},i(F){b||(f(o.$$.fragment,F),f(i.$$.fragment,F),f(y),f(c.$$.fragment,F),f(g),f(E),b=!0)},o(F){m(o.$$.fragment,F),m(i.$$.fragment,F),m(y),m(c.$$.fragment,F),m(g),m(E),b=!1},d(F){F&&v(t),C(o),C(i),y&&y.d(),C(c),A[p].d(),E&&E.d()}}}const Y3="augment-marketplace-review-clicked";function aI(r){r.scrollIntoView({block:"end",behavior:"smooth"})}function lI(r,t,n){let e,{requestId:o}=t,{feedbackState:s}=t,{onSendUserRating:i}=t,{showFeedbackInput:a=!1}=t,{reponseText:l}=t,{tooltipItems:c=[]}=t,u={selectedRating:(s==null?void 0:s.selectedRating)??Sn.unset,feedbackNote:(s==null?void 0:s.feedbackNote)??""},h=!1,d=()=>{};function p(b){n(5,u.selectedRating=b,u),n(0,a=!0)}let g,$="";return r.$$set=b=>{"requestId"in b&&n(1,o=b.requestId),"feedbackState"in b&&n(2,s=b.feedbackState),"onSendUserRating"in b&&n(14,i=b.onSendUserRating),"showFeedbackInput"in b&&n(0,a=b.showFeedbackInput),"reponseText"in b&&n(3,l=b.reponseText),"tooltipItems"in b&&n(4,c=b.tooltipItems)},n(9,e=I_()?"https://marketplace.visualstudio.com/items?itemName=augment.vscode-augment&ssr=false#review-details":"https://plugins.jetbrains.com/plugin/24072-augment/reviews"),[a,o,s,l,c,u,h,d,$,e,function(b){const y=b.target;n(5,u.feedbackNote=y.value,u)},function(){n(0,a=!1),i(o,u.selectedRating,u.feedbackNote),n(8,$="Thanks for the feedback!"),clearTimeout(g),g=setTimeout(()=>{n(8,$="")},3e3)},p,function(){n(0,a=!1),s?n(5,u={...s}):n(5,u.selectedRating=Sn.unset,u)},i,()=>p(Sn.positive),()=>p(Sn.positive),()=>p(Sn.negative),()=>p(Sn.negative),async b=>{b.action(new Event("click"))},async()=>{var b;await((b=navigator.clipboard)==null?void 0:b.writeText(o))},function(b){d=b,n(7,d)},()=>{n(6,h=!0),function(){try{localStorage.setItem(Y3,"true")}catch{}}(),xl.postMessage({type:Ee.augmentLink,data:e})}]}class cI extends nt{constructor(t){super(),rt(this,t,lI,iI,ot,{requestId:1,feedbackState:2,onSendUserRating:14,showFeedbackInput:0,reponseText:3,tooltipItems:4})}}function vg(r,t,n){const e=r.slice();return e[7]=t[n],e}function uI(r){let t,n,e,o;return n=new Kr({props:{size:1}}),{c(){t=I("p"),_(n.$$.fragment),e=W(" Checking for example questions...")},m(s,i){S(s,t,i),k(n,t,null),O(t,e),o=!0},p:H,i(s){o||(f(n.$$.fragment,s),o=!0)},o(s){m(n.$$.fragment,s),o=!1},d(s){s&&v(t),C(n)}}}function hI(r){let t,n,e,o=r[1]&&_g(),s=Gt(r[2]),i=[];for(let l=0;l<s.length;l+=1)i[l]=kg(vg(r,s,l));const a=l=>m(i[l],1,1,()=>{i[l]=null});return{c(){o&&o.c(),t=J(),n=I("div");for(let l=0;l<i.length;l+=1)i[l].c();T(n,"class","l-questions svelte-i3osr4")},m(l,c){o&&o.m(l,c),S(l,t,c),S(l,n,c);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(n,null);e=!0},p(l,c){if(l[1]?o||(o=_g(),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),12&c){let u;for(s=Gt(l[2]),u=0;u<s.length;u+=1){const h=vg(l,s,u);i[u]?(i[u].p(h,c),f(i[u],1)):(i[u]=kg(h),i[u].c(),f(i[u],1),i[u].m(n,null))}for(Y(),u=s.length;u<i.length;u+=1)a(u);X()}},i(l){if(!e){for(let c=0;c<s.length;c+=1)f(i[c]);e=!0}},o(l){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)m(i[c]);e=!1},d(l){l&&(v(t),v(n)),o&&o.d(l),un(i,l)}}}function _g(r){let t;return{c(){t=I("p"),t.innerHTML="<strong>Here are some questions you can ask Augment:</strong>"},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function dI(r){let t,n,e=r[7]+"";return{c(){t=W(e),n=J()},m(o,s){S(o,t,s),S(o,n,s)},p(o,s){4&s&&e!==(e=o[7]+"")&&ht(t,e)},d(o){o&&(v(t),v(n))}}}function kg(r){let t,n;function e(){return r[5](r[7])}return t=new Lr({props:{variant:"ghost",size:1,color:"accent",alignment:"left",$$slots:{default:[dI]},$$scope:{ctx:r}}}),t.$on("keyup",function(){Be(en("Enter",e))&&en("Enter",e).apply(this,arguments)}),t.$on("click",function(){return r[6](r[7])}),{c(){_(t.$$.fragment)},m(o,s){k(t,o,s),n=!0},p(o,s){r=o;const i={};1028&s&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){C(t,o)}}}function pI(r){let t,n,e,o;const s=[hI,uI],i=[];function a(l,c){return l[0].questionsLoaded&&l[2].length>0?0:l[0].questionsLoaded?-1:1}return~(t=a(r))&&(n=i[t]=s[t](r)),{c(){n&&n.c(),e=dt()},m(l,c){~t&&i[t].m(l,c),S(l,e,c),o=!0},p(l,[c]){let u=t;t=a(l),t===u?~t&&i[t].p(l,c):(n&&(Y(),m(i[u],1,1,()=>{i[u]=null}),X()),~t?(n=i[t],n?n.p(l,c):(n=i[t]=s[t](l),n.c()),f(n,1),n.m(e.parentNode,e)):n=null)},i(l){o||(f(n),o=!0)},o(l){m(n),o=!1},d(l){l&&v(e),~t&&i[t].d(l)}}}function fI(r,t,n){let e,{conversationModel:o}=t,{turn:s}=t,{showIntroText:i=!0}=t;function a(l){o.sendSuggestedQuestion(l)}return r.$$set=l=>{"conversationModel"in l&&n(4,o=l.conversationModel),"turn"in l&&n(0,s=l.turn),"showIntroText"in l&&n(1,i=l.showIntroText)},r.$$.update=()=>{1&r.$$.dirty&&n(2,e=s.questions||[])},[s,i,e,a,o,l=>a(l),l=>a(l)]}class gI extends nt{constructor(t){super(),rt(this,t,fI,pI,ot,{conversationModel:4,turn:0,showIntroText:1})}}function mI(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},r[0]],o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return{c(){t=Bt("svg"),n=new Oe(!0),this.h()},l(s){t=ze(s,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Ne(t);n=Re(i,!0),i.forEach(v),this.h()},h(){n.a=null,Ht(t,o)},m(s,i){Pe(s,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M448 128c0 53-43 96-96 96-28.9 0-54.8-12.8-72.4-33l-89.7 44.9c1.4 6.5 2.1 13.2 2.1 20.1s-.7 13.6-2.1 20.1l89.7 44.9c17.6-20.2 43.5-33 72.4-33 53 0 96 43 96 96s-43 96-96 96-96-43-96-96c0-6.9.7-13.6 2.1-20.1L168.4 319c-17.6 20.2-43.5 33-72.4 33-53 0-96-43-96-96s43-96 96-96c28.9 0 54.8 12.8 72.4 33l89.7-44.9c-1.4-6.5-2.1-13.2-2.1-20.1 0-53 43-96 96-96s96 43 96 96M96 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96m304-176a48 48 0 1 0-96 0 48 48 0 1 0 96 0m-48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96"/>',t)},p(s,[i]){Ht(t,o=Zt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},1&i&&s[0]]))},i:H,o:H,d(s){s&&v(t)}}}function $I(r,t,n){return r.$$set=e=>{n(0,t=lt(lt({},t),jt(e)))},[t=jt(t)]}class yI extends nt{constructor(t){super(),rt(this,t,$I,mI,ot,{})}}function xI(r){let t,n;return{c(){t=Bt("svg"),n=Bt("path"),T(n,"fill-rule","evenodd"),T(n,"clip-rule","evenodd"),T(n,"d","M1.90321 7.29677C1.90321 10.341 4.11041 12.4147 6.58893 12.8439C6.87255 12.893 7.06266 13.1627 7.01355 13.4464C6.96444 13.73 6.69471 13.9201 6.41109 13.871C3.49942 13.3668 0.86084 10.9127 0.86084 7.29677C0.860839 5.76009 1.55996 4.55245 2.37639 3.63377C2.96124 2.97568 3.63034 2.44135 4.16846 2.03202L2.53205 2.03202C2.25591 2.03202 2.03205 1.80816 2.03205 1.53202C2.03205 1.25588 2.25591 1.03202 2.53205 1.03202L5.53205 1.03202C5.80819 1.03202 6.03205 1.25588 6.03205 1.53202L6.03205 4.53202C6.03205 4.80816 5.80819 5.03202 5.53205 5.03202C5.25591 5.03202 5.03205 4.80816 5.03205 4.53202L5.03205 2.68645L5.03054 2.68759L5.03045 2.68766L5.03044 2.68767L5.03043 2.68767C4.45896 3.11868 3.76059 3.64538 3.15554 4.3262C2.44102 5.13021 1.90321 6.10154 1.90321 7.29677ZM13.0109 7.70321C13.0109 4.69115 10.8505 2.6296 8.40384 2.17029C8.12093 2.11718 7.93465 1.84479 7.98776 1.56188C8.04087 1.27898 8.31326 1.0927 8.59616 1.14581C11.4704 1.68541 14.0532 4.12605 14.0532 7.70321C14.0532 9.23988 13.3541 10.4475 12.5377 11.3662C11.9528 12.0243 11.2837 12.5586 10.7456 12.968L12.3821 12.968C12.6582 12.968 12.8821 13.1918 12.8821 13.468C12.8821 13.7441 12.6582 13.968 12.3821 13.968L9.38205 13.968C9.10591 13.968 8.88205 13.7441 8.88205 13.468L8.88205 10.468C8.88205 10.1918 9.10591 9.96796 9.38205 9.96796C9.65819 9.96796 9.88205 10.1918 9.88205 10.468L9.88205 12.3135L9.88362 12.3123C10.4551 11.8813 11.1535 11.3546 11.7585 10.6738C12.4731 9.86976 13.0109 8.89844 13.0109 7.70321Z"),T(n,"fill","currentColor"),T(t,"width","15"),T(t,"height","15"),T(t,"viewBox","0 0 15 15"),T(t,"fill","none"),T(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){S(e,t,o),O(t,n)},p:H,i:H,o:H,d(e){e&&v(t)}}}class Cg extends nt{constructor(t){super(),rt(this,t,null,xI,ot,{})}}function pc(r){if(r==null)return"";if(Array.isArray(r))return r.map(t=>pc(t)).join(", ");if(typeof r=="object"){const t=Object.entries(r);return t.length===0?"{}":t.map(([n,e])=>`${n}: ${pc(e)}`).join(", ")}return String(r)}function Ws(r){let t=[];for(const n of Object.values(r))Array.isArray(n)?t=t.concat(n.map(e=>pc(e))):t.push(pc(n));return t.join(" ")}function Sg(r){if(typeof r.command_type=="string"){if(r.command_type==="simple"&&Array.isArray(r.simple_command)&&r.simple_command.length>0)return r.simple_command.join(" ");if(r.command_type==="complex"&&typeof r.complex_command=="string")return r.complex_command}else if(typeof r.command=="string")return r.command;return""}const X3=Symbol("toolContext");function Rn(){const r=Jt(X3);if(!r)throw new Error("ToolUseContext context not found");return r}function bI(r){const t=_e(r);let n;const e=Do(t,(o,s)=>{var a,l,c,u;if(o.toolUse.tool_use_id===(n==null?void 0:n.toolUse.tool_use_id)&&o.toolUse.input_json===(n==null?void 0:n.toolUse.input_json)&&o.toolUse.tool_name===(n==null?void 0:n.toolUse.tool_name)&&o.toolUseState.phase===(n==null?void 0:n.toolUseState.phase)&&((a=o.toolUseState.result)==null?void 0:a.isError)===((l=n==null?void 0:n.toolUseState.result)==null?void 0:l.isError)&&((c=o.toolUseState.result)==null?void 0:c.text)===((u=n==null?void 0:n.toolUseState.result)==null?void 0:u.text)&&o.isLastTurn===(n==null?void 0:n.isLastTurn)&&o.requestId===(n==null?void 0:n.requestId)&&o.turnIndex===(n==null?void 0:n.turnIndex))return;n=o;const i=function(h){try{return JSON.parse(h)??{}}catch(d){return console.error("Failed to parse tool input JSON",d),{}}}(o.toolUse.input_json);s({...n,toolUseInput:i??{}})});return $c(X3,e),{writableCtx:t,readableCtx:e}}function wI(r){let t,n;return{c(){t=Bt("svg"),n=Bt("path"),T(n,"fill-rule","evenodd"),T(n,"clip-rule","evenodd"),T(n,"d","M1.43555 8.19985C1.43555 4.29832 4.59837 1.1355 8.4999 1.1355C12.4014 1.1355 15.5642 4.29832 15.5642 8.19985C15.5642 12.1013 12.4014 15.2642 8.4999 15.2642C4.59837 15.2642 1.43555 12.1013 1.43555 8.19985ZM8.4999 2.14883C5.15802 2.14883 2.44889 4.85797 2.44889 8.19985C2.44889 11.5417 5.15802 14.2509 8.4999 14.2509C11.8418 14.2509 14.5509 11.5417 14.5509 8.19985C14.5509 4.85797 11.8418 2.14883 8.4999 2.14883ZM11.0105 5.68952C11.2187 5.8978 11.2187 6.23549 11.0105 6.44377L9.25427 8.19997L11.0105 9.95619C11.2187 10.1645 11.2187 10.5022 11.0105 10.7104C10.8022 10.9187 10.4645 10.9187 10.2562 10.7104L8.50002 8.95422L6.74382 10.7104C6.53554 10.9187 6.19784 10.9187 5.98957 10.7104C5.78129 10.5022 5.78129 10.1645 5.98957 9.95619L7.74578 8.19997L5.98957 6.44377C5.78129 6.23549 5.78129 5.8978 5.98957 5.68952C6.19784 5.48124 6.53554 5.48124 6.74382 5.68952L8.50002 7.44573L10.2562 5.68952C10.4645 5.48124 10.8022 5.48124 11.0105 5.68952Z"),T(n,"fill","currentColor"),T(t,"width","17"),T(t,"height","17"),T(t,"viewBox","0 0 17 17"),T(t,"fill","none"),T(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){S(e,t,o),O(t,n)},p:H,i:H,o:H,d(e){e&&v(t)}}}class $p extends nt{constructor(t){super(),rt(this,t,null,wI,ot,{})}}function vI(r){let t,n;return t=new i4({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function _I(r){let t,n;return t=new xe({props:{size:0,color:"neutral",variant:"ghost-block",class:"c-cancel-hover__btn",loading:r[1],$$slots:{default:[vI]},$$scope:{ctx:r}}}),t.$on("click",function(){Be(r[0])&&r[0].apply(this,arguments)}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){r=e;const s={};2&o&&(s.loading=r[1]),8&o&&(s.$$scope={dirty:o,ctx:r}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function kI(r){let t,n,e,o,s;return n=new he({props:{triggerOn:[Jn.Hover],content:"Cancel",$$slots:{default:[_I]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-cancel-hover svelte-byay27")},m(i,a){S(i,t,a),k(n,t,null),e=!0,o||(s=Co(Sy.call(null,t,r[2])),o=!0)},p(i,[a]){const l={};11&a&&(l.$$scope={dirty:a,ctx:i}),n.$set(l)},i(i){e||(f(n.$$.fragment,i),e=!0)},o(i){m(n.$$.fragment,i),e=!1},d(i){i&&v(t),C(n),o=!1,s()}}}function CI(r,t,n){let{onClick:e}=t,o=!0;const s=new Ty({onHoverStart(){n(1,o=!1)},onHoverEnd(){n(1,o=!0)},hoverTriggerDuration:0});return r.$$set=i=>{"onClick"in i&&n(0,e=i.onClick)},[e,o,s]}class SI extends nt{constructor(t){super(),rt(this,t,CI,kI,ot,{onClick:0})}}function TI(r){let t,n,e;return{c(){t=Bt("svg"),n=Bt("path"),e=Bt("path"),T(n,"d","M0.935547 7.9999C0.935547 4.09837 4.09837 0.935547 7.9999 0.935547C11.9014 0.935547 15.0642 4.09837 15.0642 7.9999C15.0642 11.9014 11.9014 15.0642 7.9999 15.0642C4.09837 15.0642 0.935547 11.9014 0.935547 7.9999ZM7.9999 1.94889C4.65802 1.94889 1.94889 4.65802 1.94889 7.9999C1.94889 11.3418 4.65802 14.0509 7.9999 14.0509C11.3418 14.0509 14.0509 11.3418 14.0509 7.9999C14.0509 4.65802 11.3418 1.94889 7.9999 1.94889Z"),T(n,"fill","var(--ds-color-success-a11, #18794E)"),T(e,"d","M10.5105 5.68952C10.7187 5.8978 10.7187 6.23549 10.5105 6.44377L8.75427 8.19997L10.5105 9.95619C10.7187 10.1645 10.7187 10.5022 10.5105 10.7104C10.3022 10.9187 9.9645 10.9187 9.7562 10.7104L8.00002 8.95422L6.24382 10.7104C6.03554 10.9187 5.69784 10.9187 5.48957 10.7104C5.28129 10.5022 5.28129 10.1645 5.48957 9.95619L7.24578 8.19997L5.48957 6.44377C5.28129 6.23549 5.28129 5.8978 5.48957 5.68952C5.69784 5.48124 6.03554 5.48124 6.24382 5.68952L8.00002 7.44573L9.7562 5.68952C9.9645 5.48124 10.3022 5.48124 10.5105 5.68952Z"),T(e,"fill","var(--ds-color-neutral-12, #ECEDEE)"),T(t,"width","16"),T(t,"height","16"),T(t,"viewBox","0 0 16 16"),T(t,"xmlns","http://www.w3.org/2000/svg")},m(o,s){S(o,t,s),O(t,n),O(t,e)},p:H,i:H,o:H,d(o){o&&v(t)}}}class MI extends nt{constructor(t){super(),rt(this,t,null,TI,ot,{})}}function AI(r){let t,n;return{c(){t=Bt("svg"),n=Bt("circle"),T(n,"cx","7.5"),T(n,"cy","7.5"),T(n,"r","5"),T(n,"fill","currentColor"),T(t,"width","15"),T(t,"height","15"),T(t,"viewBox","0 0 15 15"),T(t,"fill","none"),T(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){S(e,t,o),O(t,n)},p:H,i:H,o:H,d(e){e&&v(t)}}}class Q3 extends nt{constructor(t){super(),rt(this,t,null,AI,ot,{})}}function LI(r){let t,n;return t=new he({props:{content:"Completed",$$slots:{default:[UI]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8224&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function EI(r){let t,n;return t=new he({props:{content:"Cancelling...",$$slots:{default:[qI]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8192&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function BI(r){let t,n;return t=new he({props:{content:"Failed",$$slots:{default:[jI]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8192&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function II(r){let t,n;return t=new he({props:{content:"Cancelled",$$slots:{default:[WI]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8192&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function FI(r){let t,n;return t=new SI({props:{onClick:r[10]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function DI(r){let t,n;return t=new he({props:{content:"Looking up tool...",$$slots:{default:[HI]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8192&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function OI(r){let t,n;return t=new he({props:{content:"Waiting for end of message...",$$slots:{default:[VI]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8192&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function zI(r){let t,n;return t=new he({props:{content:"Command failed",$$slots:{default:[GI]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8192&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function NI(r){let t,n,e,o;const s=[YI,ZI],i=[];function a(l,c){return l[2].isLastTurn?0:1}return t=a(r),n=i[t]=s[t](r),{c(){n.c(),e=dt()},m(l,c){i[t].m(l,c),S(l,e,c),o=!0},p(l,c){let u=t;t=a(l),t===u?i[t].p(l,c):(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),n=i[t],n?n.p(l,c):(n=i[t]=s[t](l),n.c()),f(n,1),n.m(e.parentNode,e))},i(l){o||(f(n),o=!0)},o(l){m(n),o=!1},d(l){l&&v(e),i[t].d(l)}}}function RI(r){let t,n,e;n=new dd({});let o=[{class:"c-tooluse__main-bar__icon"},aa("success"),{style:"color: var(--ds-color-a11);"}],s={};for(let i=0;i<o.length;i+=1)s=lt(s,o[i]);return{c(){t=I("div"),_(n.$$.fragment),ia(t,s),ut(t,"svelte-gf8poy",!0)},m(i,a){S(i,t,a),k(n,t,null),e=!0},i(i){e||(f(n.$$.fragment,i),e=!0)},o(i){m(n.$$.fragment,i),e=!1},d(i){i&&v(t),C(n)}}}function PI(r){let t,n,e;n=new Q3({});let o=[{class:"c-tooluse__main-bar__icon success_indicator"},aa("success")],s={};for(let i=0;i<o.length;i+=1)s=lt(s,o[i]);return{c(){t=I("div"),_(n.$$.fragment),ia(t,s),ut(t,"svelte-gf8poy",!0)},m(i,a){S(i,t,a),k(n,t,null),e=!0},i(i){e||(f(n.$$.fragment,i),e=!0)},o(i){m(n.$$.fragment,i),e=!1},d(i){i&&v(t),C(n)}}}function UI(r){let t,n,e,o;const s=[PI,RI],i=[];function a(l,c){var u;return(u=l[5])!=null&&u.enableErgonomicsUpdate?0:1}return t=a(r),n=i[t]=s[t](r),{c(){n.c(),e=dt()},m(l,c){i[t].m(l,c),S(l,e,c),o=!0},p(l,c){let u=t;t=a(l),t!==u&&(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),n=i[t],n||(n=i[t]=s[t](l),n.c()),f(n,1),n.m(e.parentNode,e))},i(l){o||(f(n),o=!0)},o(l){m(n),o=!1},d(l){l&&v(e),i[t].d(l)}}}function qI(r){let t,n,e;n=new Kr({props:{size:1}});let o=[{class:"c-tooluse__main-bar__icon"},aa("error"),{style:"color: var(--ds-color-a11);"}],s={};for(let i=0;i<o.length;i+=1)s=lt(s,o[i]);return{c(){t=I("div"),_(n.$$.fragment),ia(t,s),ut(t,"svelte-gf8poy",!0)},m(i,a){S(i,t,a),k(n,t,null),e=!0},p(i,a){ut(t,"svelte-gf8poy",!0)},i(i){e||(f(n.$$.fragment,i),e=!0)},o(i){m(n.$$.fragment,i),e=!1},d(i){i&&v(t),C(n)}}}function jI(r){let t,n,e;n=new $p({});let o=[{class:"c-tooluse__main-bar__icon"},aa("error"),{style:"color: var(--ds-color-a11);"}],s={};for(let i=0;i<o.length;i+=1)s=lt(s,o[i]);return{c(){t=I("div"),_(n.$$.fragment),ia(t,s),ut(t,"svelte-gf8poy",!0)},m(i,a){S(i,t,a),k(n,t,null),e=!0},p(i,a){ut(t,"svelte-gf8poy",!0)},i(i){e||(f(n.$$.fragment,i),e=!0)},o(i){m(n.$$.fragment,i),e=!1},d(i){i&&v(t),C(n)}}}function WI(r){let t,n,e;n=new $p({});let o=[{class:"c-tooluse__main-bar__icon"},aa("error"),{style:"color: var(--ds-color-a11);"}],s={};for(let i=0;i<o.length;i+=1)s=lt(s,o[i]);return{c(){t=I("div"),_(n.$$.fragment),ia(t,s),ut(t,"svelte-gf8poy",!0)},m(i,a){S(i,t,a),k(n,t,null),e=!0},p(i,a){ut(t,"svelte-gf8poy",!0)},i(i){e||(f(n.$$.fragment,i),e=!0)},o(i){m(n.$$.fragment,i),e=!1},d(i){i&&v(t),C(n)}}}function HI(r){let t,n,e;return n=new Kr({props:{size:1}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-tooluse__main-bar__icon svelte-gf8poy")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p:H,i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function VI(r){let t,n,e;return n=new Kr({props:{size:1}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-tooluse__main-bar__icon svelte-gf8poy")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p:H,i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function GI(r){let t,n,e;return n=new MI({}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-tooluse__main-bar__icon svelte-gf8poy")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p:H,i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function ZI(r){let t,n;return t=new xe({props:{size:1,disabled:!0,$$slots:{default:[XI]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8192&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function YI(r){let t,n,e,o;return t=new he({props:{triggerOn:[Jn.Hover],content:"Run",$$slots:{default:[KI]},$$scope:{ctx:r}}}),e=new he({props:{triggerOn:[Jn.Hover],content:"More Options",$$slots:{default:[oF]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment),n=J(),_(e.$$.fragment)},m(s,i){k(t,s,i),S(s,n,i),k(e,s,i),o=!0},p(s,i){const a={};8192&i&&(a.$$scope={dirty:i,ctx:s}),t.$set(a);const l={};8200&i&&(l.$$scope={dirty:i,ctx:s}),e.$set(l)},i(s){o||(f(t.$$.fragment,s),f(e.$$.fragment,s),o=!0)},o(s){m(t.$$.fragment,s),m(e.$$.fragment,s),o=!1},d(s){s&&v(n),C(t,s),C(e,s)}}}function XI(r){let t,n;return t=new Ey({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function QI(r){let t,n;return t=new Ey({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function KI(r){let t,n;return t=new xe({props:{color:"accent",size:1,$$slots:{default:[QI]},$$scope:{ctx:r}}}),t.$on("click",r[9]),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8192&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function JI(r){let t,n;return t=new S2({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function tF(r){let t,n;return t=new xe({props:{variant:"soft",color:"neutral",size:1,class:"c-tooluse__main-vertical-icon",$$slots:{default:[JI]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8192&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function eF(r){let t;return{c(){t=W("Skip")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function nF(r){let t,n;return t=new Ie.Item({props:{onSelect:r[8],$$slots:{default:[eF]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8192&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function rF(r){let t,n,e,o;return t=new Ie.Trigger({props:{$$slots:{default:[tF]},$$scope:{ctx:r}}}),e=new Ie.Content({props:{side:"bottom",align:"end",$$slots:{default:[nF]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment),n=J(),_(e.$$.fragment)},m(s,i){k(t,s,i),S(s,n,i),k(e,s,i),o=!0},p(s,i){const a={};8192&i&&(a.$$scope={dirty:i,ctx:s}),t.$set(a);const l={};8192&i&&(l.$$scope={dirty:i,ctx:s}),e.$set(l)},i(s){o||(f(t.$$.fragment,s),f(e.$$.fragment,s),o=!0)},o(s){m(t.$$.fragment,s),m(e.$$.fragment,s),o=!1},d(s){s&&v(n),C(t,s),C(e,s)}}}function oF(r){let t,n,e;function o(i){r[12](i)}let s={nested:!1,$$slots:{default:[rF]},$$scope:{ctx:r}};return r[3]!==void 0&&(s.requestClose=r[3]),t=new Ie.Root({props:s}),Pt.push(()=>re(t,"requestClose",o)),{c(){_(t.$$.fragment)},m(i,a){k(t,i,a),e=!0},p(i,a){const l={};8192&a&&(l.$$scope={dirty:a,ctx:i}),!n&&8&a&&(n=!0,l.requestClose=i[3],oe(()=>n=!1)),t.$set(l)},i(i){e||(f(t.$$.fragment,i),e=!0)},o(i){m(t.$$.fragment,i),e=!1},d(i){C(t,i)}}}function sF(r){let t,n,e,o,s;const i=[NI,zI,OI,DI,FI,II,BI,EI,LI],a=[];function l(c,u){return c[0].phase===$t.runnable?0:c[1]?1:c[0].phase===$t.new?2:c[0].phase===$t.checkingSafety?3:c[0].phase===$t.running?4:c[0].phase===$t.cancelled?5:c[0].phase===$t.error?6:c[0].phase===$t.cancelling?7:8}return n=l(r),e=a[n]=i[n](r),{c(){t=I("div"),e.c(),T(t,"class","c-tooluse__main-bar__top-right svelte-gf8poy"),T(t,"data-tool-use-state",o=r[0].phase)},m(c,u){S(c,t,u),a[n].m(t,null),s=!0},p(c,[u]){let h=n;n=l(c),n===h?a[n].p(c,u):(Y(),m(a[h],1,1,()=>{a[h]=null}),X(),e=a[n],e?e.p(c,u):(e=a[n]=i[n](c),e.c()),f(e,1),e.m(t,null)),(!s||1&u&&o!==(o=c[0].phase))&&T(t,"data-tool-use-state",o)},i(c){s||(f(e),s=!0)},o(c){m(e),s=!1},d(c){c&&v(t),a[n].d()}}}function iF(r,t,n){let e,o,s,i,a=H;r.$$.on_destroy.push(()=>a());const l=Rn();Vt(r,l,p=>n(2,o=p));const c=Zs();Vt(r,c,p=>n(11,s=p));let u,{isCommandError:h=!1}=t,{toolUseState:d=o.toolUseState}=t;return r.$$set=p=>{"isCommandError"in p&&n(1,h=p.isCommandError),"toolUseState"in p&&n(0,d=p.toolUseState)},r.$$.update=()=>{4&r.$$.dirty&&n(0,d=o.toolUseState),2048&r.$$.dirty&&(n(4,e=s==null?void 0:s.flags),a(),a=An(e,p=>n(5,i=p)))},[d,h,o,u,e,i,l,c,function(){o.onToolSkip(o.requestId,o.toolUse.tool_use_id),u==null||u()},function(p){p.stopPropagation(),o.onToolRun(o.requestId,o.toolUse,o.toolUseInput)},function(p){p.stopPropagation(),o.onToolCancel(o.requestId,o.toolUse.tool_use_id)},s,function(p){u=p,n(3,u)}]}class rs extends nt{constructor(t){super(),rt(this,t,iF,sF,ot,{isCommandError:1,toolUseState:0})}}const aF=r=>({toolName:2&r,formattedToolArgs:4&r}),Tg=r=>({toolName:r[1],formattedToolArgs:r[2]}),lF=r=>({}),Mg=r=>({}),cF=r=>({}),Ag=r=>({}),uF=r=>({}),Lg=r=>({}),hF=r=>({}),Eg=r=>({}),dF=r=>({}),Bg=r=>({}),pF=r=>({}),Ig=r=>({}),fF=r=>({}),Fg=r=>({}),gF=r=>({toolName:2&r,formattedToolArgs:4&r}),Dg=r=>({toolName:r[1],formattedToolArgs:r[2]}),mF=r=>({}),Og=r=>({}),$F=r=>({}),zg=r=>({}),yF=r=>({}),Ng=r=>({});function xF(r){let t,n,e,o,s,i,a,l,c,u,h,d,p,g,$,b,y,x;const M=[vF,wF],L=[];function A(st,at){return st[7]?0:1}o=A(r),s=L[o]=M[o](r);let B=r[11].icon&&Rg(r);const E=r[12].toolName,F=Ot(E,r,r[13],Eg),U=F||function(st){let at,gt,bt=st[1]&&Pg(st);return{c(){bt&&bt.c(),at=dt()},m(Wt,Ut){bt&&bt.m(Wt,Ut),S(Wt,at,Ut),gt=!0},p(Wt,Ut){Wt[1]?bt?(bt.p(Wt,Ut),2&Ut&&f(bt,1)):(bt=Pg(Wt),bt.c(),f(bt,1),bt.m(at.parentNode,at)):bt&&(Y(),m(bt,1,1,()=>{bt=null}),X())},i(Wt){gt||(f(bt),gt=!0)},o(Wt){m(bt),gt=!1},d(Wt){Wt&&v(at),bt&&bt.d(Wt)}}}(r),tt=r[12].toolAction,q=Ot(tt,r,r[13],Lg),N=q||function(st){let at;return{c(){at=I("span")},m(gt,bt){S(gt,at,bt)},p:H,d(gt){gt&&v(at)}}}(),R=r[12]["header-actions"],j=Ot(R,r,r[13],Ag),Q=r[12].toolStatus,z=Ot(Q,r,r[13],Mg),G=z||function(st){let at,gt;return at=new rs({}),{c(){_(at.$$.fragment)},m(bt,Wt){k(at,bt,Wt),gt=!0},i(bt){gt||(f(at.$$.fragment,bt),gt=!0)},o(bt){m(at.$$.fragment,bt),gt=!1},d(bt){C(at,bt)}}}(),K=[CF,kF],et=[];function ct(st,at){return 1&at&&(g=null),st[11].secondary?0:(g==null&&(g=!!Ws(st[0])),g?1:-1)}return~($=ct(r,-1))&&(b=et[$]=K[$](r)),{c(){t=I("div"),n=I("div"),e=I("div"),s.c(),i=J(),B&&B.c(),a=J(),U&&U.c(),l=J(),c=I("div"),N&&N.c(),u=J(),h=I("div"),j&&j.c(),d=J(),G&&G.c(),p=J(),b&&b.c(),T(e,"class","c-tooluse__icon-wrapper c-carrot svelte-81xqwn"),T(h,"class","c-tooluse__header-actions svelte-81xqwn"),T(c,"class","c-tooluse__main-bar__tool-status svelte-81xqwn"),T(n,"class","c-tooluse-header__label"),T(t,"class",y="c-tooluse__main-bar "+r[3]+" svelte-81xqwn"),ut(t,"is-collapsed",r[6]),ut(t,"is-expandable",r[7])},m(st,at){S(st,t,at),O(t,n),O(n,e),L[o].m(e,null),O(n,i),B&&B.m(n,null),O(n,a),U&&U.m(n,null),O(n,l),O(n,c),N&&N.m(c,null),O(c,u),O(c,h),j&&j.m(h,null),O(c,d),G&&G.m(c,null),O(t,p),~$&&et[$].m(t,null),x=!0},p(st,at){let gt=o;o=A(st),o!==gt&&(Y(),m(L[gt],1,1,()=>{L[gt]=null}),X(),s=L[o],s||(s=L[o]=M[o](st),s.c()),f(s,1),s.m(e,null)),st[11].icon?B?(B.p(st,at),2048&at&&f(B,1)):(B=Rg(st),B.c(),f(B,1),B.m(n,a)):B&&(Y(),m(B,1,1,()=>{B=null}),X()),F?F.p&&(!x||8192&at)&&zt(F,E,st,st[13],x?Rt(E,st[13],at,hF):Nt(st[13]),Eg):U&&U.p&&(!x||2&at)&&U.p(st,x?at:-1),q&&q.p&&(!x||8192&at)&&zt(q,tt,st,st[13],x?Rt(tt,st[13],at,uF):Nt(st[13]),Lg),j&&j.p&&(!x||8192&at)&&zt(j,R,st,st[13],x?Rt(R,st[13],at,cF):Nt(st[13]),Ag),z&&z.p&&(!x||8192&at)&&zt(z,Q,st,st[13],x?Rt(Q,st[13],at,lF):Nt(st[13]),Mg);let bt=$;$=ct(st,at),$===bt?~$&&et[$].p(st,at):(b&&(Y(),m(et[bt],1,1,()=>{et[bt]=null}),X()),~$?(b=et[$],b?b.p(st,at):(b=et[$]=K[$](st),b.c()),f(b,1),b.m(t,null)):b=null),(!x||8&at&&y!==(y="c-tooluse__main-bar "+st[3]+" svelte-81xqwn"))&&T(t,"class",y),(!x||72&at)&&ut(t,"is-collapsed",st[6]),(!x||136&at)&&ut(t,"is-expandable",st[7])},i(st){x||(f(s),f(B),f(U,st),f(N,st),f(j,st),f(G,st),f(b),x=!0)},o(st){m(s),m(B),m(U,st),m(N,st),m(j,st),m(G,st),m(b),x=!1},d(st){st&&v(t),L[o].d(),B&&B.d(),U&&U.d(st),N&&N.d(st),j&&j.d(st),G&&G.d(st),~$&&et[$].d()}}}function bF(r){let t,n,e,o,s,i,a,l,c,u,h,d,p,g,$,b=r[11].icon&&Ug(r);const y=r[12].toolName,x=Ot(y,r,r[13],zg),M=x||function(z){let G,K,et=z[1]&&qg(z);return{c(){et&&et.c(),G=dt()},m(ct,st){et&&et.m(ct,st),S(ct,G,st),K=!0},p(ct,st){ct[1]?et?(et.p(ct,st),2&st&&f(et,1)):(et=qg(ct),et.c(),f(et,1),et.m(G.parentNode,G)):et&&(Y(),m(et,1,1,()=>{et=null}),X())},i(ct){K||(f(et),K=!0)},o(ct){m(et),K=!1},d(ct){ct&&v(G),et&&et.d(ct)}}}(r),L=r[12].toolAction,A=Ot(L,r,r[13],Og),B=A||function(z){let G;return{c(){G=I("span")},m(K,et){S(K,G,et)},p:H,d(K){K&&v(G)}}}(),E=[AF,MF],F=[];function U(z,G){return 1&G&&(i=null),z[11].secondary?0:(i==null&&(i=!!Ws(z[0])),i?1:-1)}~(a=U(r,-1))&&(l=F[a]=E[a](r));const tt=r[12]["header-actions"],q=Ot(tt,r,r[13],Fg),N=r[12].toolStatus,R=Ot(N,r,r[13],Ig),j=R||function(z){let G,K;return G=new rs({}),{c(){_(G.$$.fragment)},m(et,ct){k(G,et,ct),K=!0},i(et){K||(f(G.$$.fragment,et),K=!0)},o(et){m(G.$$.fragment,et),K=!1},d(et){C(G,et)}}}();let Q=r[7]&&jg(r);return{c(){t=I("div"),n=I("div"),b&&b.c(),e=J(),M&&M.c(),o=J(),B&&B.c(),s=J(),l&&l.c(),c=J(),u=I("div"),h=I("div"),q&&q.c(),d=J(),j&&j.c(),p=J(),Q&&Q.c(),T(h,"class","c-tooluse__header-actions svelte-81xqwn"),T(u,"class","c-tooluse__main-bar__tool-status svelte-81xqwn"),T(n,"class","c-tooluse-header__label"),T(t,"class",g="c-tooluse__main-bar "+r[3]+" svelte-81xqwn"),ut(t,"is-collapsed",r[6]),ut(t,"is-expandable",r[7])},m(z,G){S(z,t,G),O(t,n),b&&b.m(n,null),O(n,e),M&&M.m(n,null),O(n,o),B&&B.m(n,null),O(n,s),~a&&F[a].m(n,null),O(n,c),O(n,u),O(u,h),q&&q.m(h,null),O(u,d),j&&j.m(u,null),O(n,p),Q&&Q.m(n,null),$=!0},p(z,G){z[11].icon?b?(b.p(z,G),2048&G&&f(b,1)):(b=Ug(z),b.c(),f(b,1),b.m(n,e)):b&&(Y(),m(b,1,1,()=>{b=null}),X()),x?x.p&&(!$||8192&G)&&zt(x,y,z,z[13],$?Rt(y,z[13],G,$F):Nt(z[13]),zg):M&&M.p&&(!$||2&G)&&M.p(z,$?G:-1),A&&A.p&&(!$||8192&G)&&zt(A,L,z,z[13],$?Rt(L,z[13],G,mF):Nt(z[13]),Og);let K=a;a=U(z,G),a===K?~a&&F[a].p(z,G):(l&&(Y(),m(F[K],1,1,()=>{F[K]=null}),X()),~a?(l=F[a],l?l.p(z,G):(l=F[a]=E[a](z),l.c()),f(l,1),l.m(n,c)):l=null),q&&q.p&&(!$||8192&G)&&zt(q,tt,z,z[13],$?Rt(tt,z[13],G,fF):Nt(z[13]),Fg),R&&R.p&&(!$||8192&G)&&zt(R,N,z,z[13],$?Rt(N,z[13],G,pF):Nt(z[13]),Ig),z[7]?Q?(Q.p(z,G),128&G&&f(Q,1)):(Q=jg(z),Q.c(),f(Q,1),Q.m(n,null)):Q&&(Y(),m(Q,1,1,()=>{Q=null}),X()),(!$||8&G&&g!==(g="c-tooluse__main-bar "+z[3]+" svelte-81xqwn"))&&T(t,"class",g),(!$||72&G)&&ut(t,"is-collapsed",z[6]),(!$||136&G)&&ut(t,"is-expandable",z[7])},i(z){$||(f(b),f(M,z),f(B,z),f(l),f(q,z),f(j,z),f(Q),$=!0)},o(z){m(b),m(M,z),m(B,z),m(l),m(q,z),m(j,z),m(Q),$=!1},d(z){z&&v(t),b&&b.d(),M&&M.d(z),B&&B.d(z),~a&&F[a].d(),q&&q.d(z),j&&j.d(z),Q&&Q.d()}}}function wF(r){let t,n,e;return n=new Q3({}),{c(){t=I("span"),_(n.$$.fragment),T(t,"class","c-tooluse__icon-wrapper-circle svelte-81xqwn")},m(o,s){S(o,t,s),k(n,t,null),e=!0},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function vF(r){let t,n;return t=new A_({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Rg(r){let t,n;const e=r[12].icon,o=Ot(e,r,r[13],Bg);return{c(){t=I("div"),o&&o.c(),T(t,"class","c-tooluse__icon-wrapper svelte-81xqwn")},m(s,i){S(s,t,i),o&&o.m(t,null),n=!0},p(s,i){o&&o.p&&(!n||8192&i)&&zt(o,e,s,s[13],n?Rt(e,s[13],i,dF):Nt(s[13]),Bg)},i(s){n||(f(o,s),n=!0)},o(s){m(o,s),n=!1},d(s){s&&v(t),o&&o.d(s)}}}function Pg(r){let t,n,e;return n=new yt({props:{size:2,weight:"medium",class:"c-tooluse__content-btn-name",$$slots:{default:[_F]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-tooluse__tool-name svelte-81xqwn")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};8194&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function _F(r){let t,n;return{c(){t=I("span"),n=W(r[1]),T(t,"class","c-tooluse__tool-name-text")},m(e,o){S(e,t,o),O(t,n)},p(e,o){2&o&&ht(n,e[1])},d(e){e&&v(t)}}}function kF(r){let t,n,e;return n=new yt({props:{size:1,class:"c-tooluse__content-btn-args",$$slots:{default:[SF]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-tooluse__content-secondary")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};8193&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function CF(r){let t,n;const e=r[12].secondary,o=Ot(e,r,r[13],Tg);return{c(){t=I("div"),o&&o.c(),T(t,"class","c-tooluse__content-secondary")},m(s,i){S(s,t,i),o&&o.m(t,null),n=!0},p(s,i){o&&o.p&&(!n||8198&i)&&zt(o,e,s,s[13],n?Rt(e,s[13],i,aF):Nt(s[13]),Tg)},i(s){n||(f(o,s),n=!0)},o(s){m(o,s),n=!1},d(s){s&&v(t),o&&o.d(s)}}}function SF(r){let t,n=Ws(r[0])+"";return{c(){t=W(n)},m(e,o){S(e,t,o)},p(e,o){1&o&&n!==(n=Ws(e[0])+"")&&ht(t,n)},d(e){e&&v(t)}}}function Ug(r){let t,n;const e=r[12].icon,o=Ot(e,r,r[13],Ng);return{c(){t=I("div"),o&&o.c(),T(t,"class","c-tooluse__icon-wrapper svelte-81xqwn")},m(s,i){S(s,t,i),o&&o.m(t,null),n=!0},p(s,i){o&&o.p&&(!n||8192&i)&&zt(o,e,s,s[13],n?Rt(e,s[13],i,yF):Nt(s[13]),Ng)},i(s){n||(f(o,s),n=!0)},o(s){m(o,s),n=!1},d(s){s&&v(t),o&&o.d(s)}}}function qg(r){let t,n,e;return n=new yt({props:{size:1,weight:"medium",class:"c-tooluse__content-btn-name",$$slots:{default:[TF]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-tooluse__tool-name-2 svelte-81xqwn")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};8194&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function TF(r){let t,n;return{c(){t=I("span"),n=W(r[1]),T(t,"class","c-tooluse__tool-name-text")},m(e,o){S(e,t,o),O(t,n)},p(e,o){2&o&&ht(n,e[1])},d(e){e&&v(t)}}}function MF(r){let t,n,e;return n=new yt({props:{size:1,class:"c-tooluse__content-btn-args",$$slots:{default:[LF]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-tooluse__content-secondary-2")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};8193&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function AF(r){let t,n;const e=r[12].secondary,o=Ot(e,r,r[13],Dg);return{c(){t=I("div"),o&&o.c(),T(t,"class","c-tooluse__content-secondary-2")},m(s,i){S(s,t,i),o&&o.m(t,null),n=!0},p(s,i){o&&o.p&&(!n||8198&i)&&zt(o,e,s,s[13],n?Rt(e,s[13],i,gF):Nt(s[13]),Dg)},i(s){n||(f(o,s),n=!0)},o(s){m(o,s),n=!1},d(s){s&&v(t),o&&o.d(s)}}}function LF(r){let t,n=Ws(r[0])+"";return{c(){t=W(n)},m(e,o){S(e,t,o)},p(e,o){1&o&&n!==(n=Ws(e[0])+"")&&ht(t,n)},d(e){e&&v(t)}}}function jg(r){let t,n,e,o;const s=[BF,EF],i=[];function a(l,c){return l[6]?0:1}return t=a(r),n=i[t]=s[t](r),{c(){n.c(),e=dt()},m(l,c){i[t].m(l,c),S(l,e,c),o=!0},p(l,c){let u=t;t=a(l),t!==u&&(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),n=i[t],n||(n=i[t]=s[t](l),n.c()),f(n,1),n.m(e.parentNode,e))},i(l){o||(f(n),o=!0)},o(l){m(n),o=!1},d(l){l&&v(e),i[t].d(l)}}}function EF(r){let t,n;return t=new H_({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function BF(r){let t,n;return t=new V_({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function IF(r){let t,n,e,o;const s=[bF,xF],i=[];function a(l,c){var u;return(u=l[5])!=null&&u.enableErgonomicsUpdate?0:1}return t=a(r),n=i[t]=s[t](r),{c(){n.c(),e=dt()},m(l,c){i[t].m(l,c),S(l,e,c),o=!0},p(l,[c]){let u=t;t=a(l),t===u?i[t].p(l,c):(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),n=i[t],n?n.p(l,c):(n=i[t]=s[t](l),n.c()),f(n,1),n.m(e.parentNode,e))},i(l){o||(f(n),o=!0)},o(l){m(n),o=!1},d(l){l&&v(e),i[t].d(l)}}}function FF(r,t,n){let e,o,s,i,a,l=H;r.$$.on_destroy.push(()=>l());let{$$slots:c={},$$scope:u}=t;const h=yc(c),d=Rn();Vt(r,d,A=>n(14,o=A));let{toolName:p}=t,{toolUseInput:g=o.toolUseInput}=t,{formattedToolArgs:$}=t,{class:b=""}=t;const y=Fy(),x=y.collapsed;Vt(r,x,A=>n(6,i=A));const M=y.expandable;Vt(r,M,A=>n(7,a=A));const L=Jt("chatModel");return r.$$set=A=>{"toolName"in A&&n(1,p=A.toolName),"toolUseInput"in A&&n(0,g=A.toolUseInput),"formattedToolArgs"in A&&n(2,$=A.formattedToolArgs),"class"in A&&n(3,b=A.class),"$$scope"in A&&n(13,u=A.$$scope)},r.$$.update=()=>{4&r.$$.dirty&&$&&n(0,g={args:$})},n(4,e=L==null?void 0:L.flags),l(),l=An(e,A=>n(5,s=A)),[g,p,$,b,e,s,i,a,d,x,M,h,c,u]}class Te extends nt{constructor(t){super(),rt(this,t,FF,IF,ot,{toolName:1,toolUseInput:0,formattedToolArgs:2,class:3})}}function DF(r){let t,n,e;const o=r[4].default,s=Ot(o,r,r[3],null);return{c(){t=I("div"),s&&s.c(),T(t,"class",n=xo(`c-floating__container ${r[0]}`)+" svelte-71sghi"),ut(t,"c-floating__x-left",r[1]==="left"),ut(t,"c-floating__x-middle",r[1]==="middle"),ut(t,"c-floating__x-right",r[1]==="right"),ut(t,"c-floating__y-top",r[2]==="top"),ut(t,"c-floating__y-middle",r[2]==="middle"),ut(t,"c-floating__y-bottom",r[2]==="bottom"),ut(t,"c-floating__y-below",r[2]==="below")},m(i,a){S(i,t,a),s&&s.m(t,null),e=!0},p(i,[a]){s&&s.p&&(!e||8&a)&&zt(s,o,i,i[3],e?Rt(o,i[3],a,null):Nt(i[3]),null),(!e||1&a&&n!==(n=xo(`c-floating__container ${i[0]}`)+" svelte-71sghi"))&&T(t,"class",n),(!e||3&a)&&ut(t,"c-floating__x-left",i[1]==="left"),(!e||3&a)&&ut(t,"c-floating__x-middle",i[1]==="middle"),(!e||3&a)&&ut(t,"c-floating__x-right",i[1]==="right"),(!e||5&a)&&ut(t,"c-floating__y-top",i[2]==="top"),(!e||5&a)&&ut(t,"c-floating__y-middle",i[2]==="middle"),(!e||5&a)&&ut(t,"c-floating__y-bottom",i[2]==="bottom"),(!e||5&a)&&ut(t,"c-floating__y-below",i[2]==="below")},i(i){e||(f(s,i),e=!0)},o(i){m(s,i),e=!1},d(i){i&&v(t),s&&s.d(i)}}}function OF(r,t,n){let{$$slots:e={},$$scope:o}=t,{class:s=""}=t,{xPos:i="left"}=t,{yPos:a="middle"}=t;return r.$$set=l=>{"class"in l&&n(0,s=l.class),"xPos"in l&&n(1,i=l.xPos),"yPos"in l&&n(2,a=l.yPos),"$$scope"in l&&n(3,o=l.$$scope)},[s,i,a,o,e]}class zF extends nt{constructor(t){super(),rt(this,t,OF,DF,ot,{class:0,xPos:1,yPos:2})}}function Wg(r){let t,n;return t=new zF({props:{xPos:"right",yPos:"below",$$slots:{default:[PF]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};5&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function NF(r){let t,n;return t=new u2({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function RF(r){let t,n;return t=new xe({props:{class:"c-scroll-to-top-button",variant:"solid",color:"neutral",size:1,radius:"full",$$slots:{default:[NF]},$$scope:{ctx:r}}}),t.$on("click",function(){Be(r[0])&&r[0].apply(this,arguments)}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){r=e;const s={};4&o&&(s.$$scope={dirty:o,ctx:r}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function PF(r){let t,n,e;return n=new he({props:{content:"Scroll to top",triggerOn:[Jn.Hover],$$slots:{default:[RF]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-scroll-to-top-pill svelte-14o49or")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};5&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function UF(r){let t,n,e=r[1]&&Wg(r);return{c(){e&&e.c(),t=dt()},m(o,s){e&&e.m(o,s),S(o,t,s),n=!0},p(o,[s]){o[1]?e?(e.p(o,s),2&s&&f(e,1)):(e=Wg(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d(o)}}}function qF(r,t,n){let{onScrollToTop:e}=t,{isVisible:o=!1}=t;return r.$$set=s=>{"onScrollToTop"in s&&n(0,e=s.onScrollToTop),"isVisible"in s&&n(1,o=s.isVisible)},[e,o]}class jF extends nt{constructor(t){super(),rt(this,t,qF,UF,ot,{onScrollToTop:0,isVisible:1})}}function WF(r){let t,n;return t=new Ay({props:{slot:"leftIcon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function HF(r){let t,n,e,o,s;return n=new So({props:{filepath:r[0].pathName,$$slots:{leftIcon:[WF]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-tooluse-filepath svelte-3tije"),T(t,"role","button"),T(t,"tabindex","0"),T(t,"data-testid","file-link")},m(i,a){S(i,t,a),k(n,t,null),e=!0,o||(s=[Kt(t,"click",r[2]),Kt(t,"keydown",function(){Be(en("Enter",r[3]))&&en("Enter",r[3]).apply(this,arguments)})],o=!0)},p(i,a){r=i;const l={};1&a&&(l.filepath=r[0].pathName),16&a&&(l.$$scope={dirty:a,ctx:r}),n.$set(l)},i(i){e||(f(n.$$.fragment,i),e=!0)},o(i){m(n.$$.fragment,i),e=!1},d(i){i&&v(t),C(n),o=!1,Qr(s)}}}function VF(r){let t,n;return t=new he({props:{content:r[0].pathName,triggerOn:[Jn.Hover],$$slots:{default:[HF]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};1&o&&(s.content=e[0].pathName),19&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function GF(r,t,n){let{fileDetails:e}=t,{onOpenLocalFile:o}=t;return r.$$set=s=>{"fileDetails"in s&&n(0,e=s.fileDetails),"onOpenLocalFile"in s&&n(1,o=s.onOpenLocalFile)},[e,o,()=>o(e),()=>o(e)]}class ZF extends nt{constructor(t){super(),rt(this,t,GF,VF,ot,{fileDetails:0,onOpenLocalFile:1})}}function YF(r){let t,n;return t=new yt({props:{size:1,$$slots:{default:[QF]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};17&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function XF(r){var s,i,a;let t,n,e,o={ctx:r,current:null,token:null,hasCatch:!0,pending:oD,then:tD,catch:KF,value:3,blocks:[,,,]};return Is(n=(a=(s=r[1])==null?void 0:(i=s.extensionClient).resolvePath)==null?void 0:a.call(i,{rootPath:"",relPath:r[0]}),o),{c(){t=dt(),o.block.c()},m(l,c){S(l,t,c),o.block.m(l,o.anchor=c),o.mount=()=>t.parentNode,o.anchor=t,e=!0},p(l,c){var u,h,d;r=l,o.ctx=r,1&c&&n!==(n=(d=(u=r[1])==null?void 0:(h=u.extensionClient).resolvePath)==null?void 0:d.call(h,{rootPath:"",relPath:r[0]}))&&Is(n,o)||cd(o,r,c)},i(l){e||(f(o.block),e=!0)},o(l){for(let c=0;c<3;c+=1){const u=o.blocks[c];m(u)}e=!1},d(l){l&&v(t),o.block.d(l),o.token=null,o=null}}}function QF(r){let t;return{c(){t=W(r[0])},m(n,e){S(n,t,e)},p(n,e){1&e&&ht(t,n[0])},d(n){n&&v(t)}}}function KF(r){let t,n;return t=new yt({props:{size:1,$$slots:{default:[JF]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};17&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function JF(r){let t;return{c(){t=W(r[0])},m(n,e){S(n,t,e)},p(n,e){1&e&&ht(t,n[0])},d(n){n&&v(t)}}}function tD(r){let t,n,e,o;const s=[nD,eD],i=[];function a(l,c){return l[3]?0:1}return t=a(r),n=i[t]=s[t](r),{c(){n.c(),e=dt()},m(l,c){i[t].m(l,c),S(l,e,c),o=!0},p(l,c){let u=t;t=a(l),t===u?i[t].p(l,c):(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),n=i[t],n?n.p(l,c):(n=i[t]=s[t](l),n.c()),f(n,1),n.m(e.parentNode,e))},i(l){o||(f(n),o=!0)},o(l){m(n),o=!1},d(l){l&&v(e),i[t].d(l)}}}function eD(r){let t,n;return t=new yt({props:{size:1,$$slots:{default:[rD]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};17&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function nD(r){let t,n;return t=new ZF({props:{fileDetails:r[3],onOpenLocalFile:r[2]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1&o&&(s.fileDetails=e[3]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function rD(r){let t;return{c(){t=W(r[0])},m(n,e){S(n,t,e)},p(n,e){1&e&&ht(t,n[0])},d(n){n&&v(t)}}}function oD(r){let t,n;return t=new yt({props:{size:1,$$slots:{default:[sD]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};17&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function sD(r){let t;return{c(){t=W(r[0])},m(n,e){S(n,t,e)},p(n,e){1&e&&ht(t,n[0])},d(n){n&&v(t)}}}function iD(r){let t,n,e,o;const s=[XF,YF],i=[];function a(l,c){return typeof l[0]=="string"?0:1}return t=a(r),n=i[t]=s[t](r),{c(){n.c(),e=dt()},m(l,c){i[t].m(l,c),S(l,e,c),o=!0},p(l,[c]){let u=t;t=a(l),t===u?i[t].p(l,c):(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),n=i[t],n?n.p(l,c):(n=i[t]=s[t](l),n.c()),f(n,1),n.m(e.parentNode,e))},i(l){o||(f(n),o=!0)},o(l){m(n),o=!1},d(l){l&&v(e),i[t].d(l)}}}function aD(r,t,n){let{value:e}=t;const o=Zs();return r.$$set=s=>{"value"in s&&n(0,e=s.value)},[e,o,s=>{o==null||o.extensionClient.openFile(s)}]}class lD extends nt{constructor(t){super(),rt(this,t,aD,iD,ot,{value:0})}}function Hg(r,t,n){const e=r.slice();return e[5]=t[n],e}function Vg(r,t,n){const e=r.slice();return e[8]=t[n][0],e[9]=t[n][1],e}function Gg(r,t,n){const e=r.slice();return e[12]=t[n],e}function cD(r){let t,n=r[8]+"";return{c(){t=W(n)},m(e,o){S(e,t,o)},p(e,o){4&o&&n!==(n=e[8]+"")&&ht(t,n)},d(e){e&&v(t)}}}function Zg(r){let t,n,e;return n=new lD({props:{value:r[12]}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-tooluse__value svelte-1et16zv")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};4&s&&(i.value=o[12]),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function Yg(r){let t,n,e,o,s;n=new yt({props:{size:1,weight:"medium",$$slots:{default:[cD]},$$scope:{ctx:r}}});let i=Gt(r[9]),a=[];for(let c=0;c<i.length;c+=1)a[c]=Zg(Gg(r,i,c));const l=c=>m(a[c],1,1,()=>{a[c]=null});return{c(){t=I("div"),_(n.$$.fragment),e=J();for(let c=0;c<a.length;c+=1)a[c].c();o=dt(),T(t,"class","c-tooluse__details__heading svelte-1et16zv")},m(c,u){S(c,t,u),k(n,t,null),S(c,e,u);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(c,u);S(c,o,u),s=!0},p(c,u){const h={};if(32772&u&&(h.$$scope={dirty:u,ctx:c}),n.$set(h),4&u){let d;for(i=Gt(c[9]),d=0;d<i.length;d+=1){const p=Gg(c,i,d);a[d]?(a[d].p(p,u),f(a[d],1)):(a[d]=Zg(p),a[d].c(),f(a[d],1),a[d].m(o.parentNode,o))}for(Y(),d=i.length;d<a.length;d+=1)l(d);X()}},i(c){if(!s){f(n.$$.fragment,c);for(let u=0;u<i.length;u+=1)f(a[u]);s=!0}},o(c){m(n.$$.fragment,c),a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)m(a[u]);s=!1},d(c){c&&(v(t),v(e),v(o)),C(n),un(a,c)}}}function Xg(r){let t,n,e,o,s,i,a;e=new yt({props:{size:1,weight:"medium",$$slots:{default:[uD]},$$scope:{ctx:r}}});const l=[dD,hD],c=[];function u(h,d){var p;return h[3]&&((p=h[0].result)!=null&&p.contentNodes)?0:1}return s=u(r),i=c[s]=l[s](r),{c(){t=I("div"),n=I("div"),_(e.$$.fragment),o=J(),i.c(),T(n,"class","c-tooluse__details__heading svelte-1et16zv"),T(t,"class","tool-output svelte-1et16zv")},m(h,d){S(h,t,d),O(t,n),k(e,n,null),O(t,o),c[s].m(t,null),a=!0},p(h,d){const p={};32768&d&&(p.$$scope={dirty:d,ctx:h}),e.$set(p);let g=s;s=u(h),s===g?c[s].p(h,d):(Y(),m(c[g],1,1,()=>{c[g]=null}),X(),i=c[s],i?i.p(h,d):(i=c[s]=l[s](h),i.c()),f(i,1),i.m(t,null))},i(h){a||(f(e.$$.fragment,h),f(i),a=!0)},o(h){m(e.$$.fragment,h),m(i),a=!1},d(h){h&&v(t),C(e),c[s].d()}}}function uD(r){let t;return{c(){t=W("output")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function hD(r){let t,n;return t=new yt({props:{size:1,type:"monospace",$$slots:{default:[pD]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};32769&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function dD(r){let t,n,e=Gt(r[0].result.contentNodes),o=[];for(let i=0;i<e.length;i+=1)o[i]=Qg(Hg(r,e,i));const s=i=>m(o[i],1,1,()=>{o[i]=null});return{c(){t=I("div");for(let i=0;i<o.length;i+=1)o[i].c();T(t,"class","c-tooluse__structured-content svelte-1et16zv")},m(i,a){S(i,t,a);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(t,null);n=!0},p(i,a){if(1&a){let l;for(e=Gt(i[0].result.contentNodes),l=0;l<e.length;l+=1){const c=Hg(i,e,l);o[l]?(o[l].p(c,a),f(o[l],1)):(o[l]=Qg(c),o[l].c(),f(o[l],1),o[l].m(t,null))}for(Y(),l=e.length;l<o.length;l+=1)s(l);X()}},i(i){if(!n){for(let a=0;a<e.length;a+=1)f(o[a]);n=!0}},o(i){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)m(o[a]);n=!1},d(i){i&&v(t),un(o,i)}}}function pD(r){var i,a;let t,n,e,o,s=((a=(i=r[0].result)==null?void 0:i.text)==null?void 0:a.trim())+"";return{c(){t=I("pre"),n=W("            "),e=W(s),o=W(`
          `),T(t,"class","c-tooluse__value-monospace svelte-1et16zv")},m(l,c){S(l,t,c),O(t,n),O(t,e),O(t,o)},p(l,c){var u,h;1&c&&s!==(s=((h=(u=l[0].result)==null?void 0:u.text)==null?void 0:h.trim())+"")&&ht(e,s)},d(l){l&&v(t)}}}function fD(r){let t,n,e,o,s;const i=[$D,mD],a=[];function l(c,u){return 1&u&&(t=null),t==null&&(t=!!Jh(c[5].image_content)),t?0:1}return n=l(r,-1),e=a[n]=i[n](r),{c(){e.c(),o=dt()},m(c,u){a[n].m(c,u),S(c,o,u),s=!0},p(c,u){let h=n;n=l(c,u),n===h?a[n].p(c,u):(Y(),m(a[h],1,1,()=>{a[h]=null}),X(),e=a[n],e?e.p(c,u):(e=a[n]=i[n](c),e.c()),f(e,1),e.m(o.parentNode,o))},i(c){s||(f(e),s=!0)},o(c){m(e),s=!1},d(c){c&&v(o),a[n].d(c)}}}function gD(r){let t,n;return t=new yt({props:{size:1,type:"monospace",$$slots:{default:[bD]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};32769&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function mD(r){let t,n;return t=new yt({props:{size:1,color:"error",$$slots:{default:[yD]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};32768&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function $D(r){let t,n,e,o;return n=new zy({props:{insetContent:!0,size:1,class:"c-image-card",$$slots:{default:[xD]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),e=J(),T(t,"class","c-tooluse__image-container svelte-1et16zv")},m(s,i){S(s,t,i),k(n,t,null),O(t,e),o=!0},p(s,i){const a={};32769&i&&(a.$$scope={dirty:i,ctx:s}),n.$set(a)},i(s){o||(f(n.$$.fragment,s),o=!0)},o(s){m(n.$$.fragment,s),o=!1},d(s){s&&v(t),C(n)}}}function yD(r){let t;return{c(){t=W(`Failed to load image: Image data not found
                `)},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function xD(r){let t,n;return{c(){t=I("img"),bl(t.src,n=Jh(r[5].image_content))||T(t,"src",n),T(t,"alt","Tool result"),T(t,"class","c-tooluse__image svelte-1et16zv")},m(e,o){S(e,t,o)},p(e,o){1&o&&!bl(t.src,n=Jh(e[5].image_content))&&T(t,"src",n)},d(e){e&&v(t)}}}function bD(r){let t,n,e,o,s,i=r[5].text_content.trim()+"";return{c(){t=I("pre"),n=W("                  "),e=W(i),o=W(`
                `),s=J(),T(t,"class","c-tooluse__value-monospace svelte-1et16zv")},m(a,l){S(a,t,l),O(t,n),O(t,e),O(t,o),S(a,s,l)},p(a,l){1&l&&i!==(i=a[5].text_content.trim()+"")&&ht(e,i)},d(a){a&&(v(t),v(s))}}}function Qg(r){let t,n,e,o;const s=[gD,fD],i=[];function a(l,c){return l[5].type===Jp.ContentText&&l[5].text_content?0:l[5].type===Jp.ContentImage&&l[5].image_content?1:-1}return~(t=a(r))&&(n=i[t]=s[t](r)),{c(){n&&n.c(),e=dt()},m(l,c){~t&&i[t].m(l,c),S(l,e,c),o=!0},p(l,c){let u=t;t=a(l),t===u?~t&&i[t].p(l,c):(n&&(Y(),m(i[u],1,1,()=>{i[u]=null}),X()),~t?(n=i[t],n?n.p(l,c):(n=i[t]=s[t](l),n.c()),f(n,1),n.m(e.parentNode,e)):n=null)},i(l){o||(f(n),o=!0)},o(l){m(n),o=!1},d(l){l&&v(e),~t&&i[t].d(l)}}}function wD(r){let t,n,e,o=Gt(Object.entries(r[2])),s=[];for(let l=0;l<o.length;l+=1)s[l]=Yg(Vg(r,o,l));const i=l=>m(s[l],1,1,()=>{s[l]=null});let a=r[1]&&(r[0].phase===$t.completed||r[0].phase===$t.error)&&Xg(r);return{c(){t=I("div");for(let l=0;l<s.length;l+=1)s[l].c();n=J(),a&&a.c(),T(t,"class","c-tooluse__details svelte-1et16zv")},m(l,c){S(l,t,c);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(t,null);O(t,n),a&&a.m(t,null),e=!0},p(l,[c]){if(4&c){let u;for(o=Gt(Object.entries(l[2])),u=0;u<o.length;u+=1){const h=Vg(l,o,u);s[u]?(s[u].p(h,c),f(s[u],1)):(s[u]=Yg(h),s[u].c(),f(s[u],1),s[u].m(t,n))}for(Y(),u=o.length;u<s.length;u+=1)i(u);X()}!l[1]||l[0].phase!==$t.completed&&l[0].phase!==$t.error?a&&(Y(),m(a,1,1,()=>{a=null}),X()):a?(a.p(l,c),3&c&&f(a,1)):(a=Xg(l),a.c(),f(a,1),a.m(t,null))},i(l){if(!e){for(let c=0;c<o.length;c+=1)f(s[c]);f(a),e=!0}},o(l){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)m(s[c]);m(a),e=!1},d(l){l&&v(t),un(s,l),a&&a.d()}}}function Jh(r){return r.image_data?`data:${r.media_type};base64,${r.image_data}`:null}function vD(r,t,n){let e,{toolUseInput:o}=t,{toolUseState:s}=t,{showOutput:i=!0}=t,a={};return r.$$set=l=>{"toolUseInput"in l&&n(4,o=l.toolUseInput),"toolUseState"in l&&n(0,s=l.toolUseState),"showOutput"in l&&n(1,i=l.showOutput)},r.$$.update=()=>{var l;16&r.$$.dirty&&n(2,a=Object.entries(o).reduce((c,[u,h])=>(Array.isArray(h)?c[u]=h.map(d=>JSON.stringify(d)):c[u]=[JSON.stringify(h)],c),{})),1&r.$$.dirty&&n(3,e=((l=s==null?void 0:s.result)==null?void 0:l.contentNodes)&&s.result.contentNodes.length>0)},[s,i,a,e,o]}class K3 extends nt{constructor(t){super(),rt(this,t,vD,wD,ot,{toolUseInput:4,toolUseState:0,showOutput:1})}}var _D=new Error("Element already at target scroll position"),kD=new Error("Scroll cancelled"),CD=Math.min,Kg=Date.now;function Jg(r){return function(t,n,e,o){typeof(e=e||{})=="function"&&(o=e,e={}),typeof o!="function"&&(o=TD);var s=Kg(),i=t[r],a=e.ease||SD,l=isNaN(e.duration)?350:+e.duration,c=!1;return i===n?o(_D,t[r]):requestAnimationFrame(function u(h){if(c)return o(kD,t[r]);var d=Kg(),p=CD(1,(d-s)/l),g=a(p);t[r]=g*(n-i)+i,p<1?requestAnimationFrame(u):requestAnimationFrame(function(){o(null,t[r])})}),function(){c=!0}}}function SD(r){return .5*(1-Math.cos(Math.PI*r))}function TD(){}const MD=sa({left:Jg("scrollLeft"),top:Jg("scrollTop")});function jH(r,t){let n,e=t;const o=L_.throttle(()=>{e.follow&&e.scrollContainer&&(n==null||n(),n=td(e.scrollContainer,r,e))},300,{leading:!0,trailing:!0}),s=()=>{n==null||n(),i.disconnect()},i=new ResizeObserver(o);return e.follow&&(i.observe(r),o()),{update:a=>{const l=e;e=a,l.follow!==e.follow&&(a.follow?(i.observe(r),o()):s())},destroy:s}}const AD=350;function tm(r,t={}){const{bottom:n,topBuffer:e}=t,o=e??0;return n?r.offsetTop+r.offsetHeight+o:r.offsetTop+o}function td(r,t,n={}){if(function(e,o,s={}){const{disableScrollUp:i,disableScrollDown:a}=s,l=tm(o,s);return!(i&&l<e.scrollTop||a&&l>e.scrollTop)}(r,t,n))return J3(r,tm(t,n),n)}function WH(r,t={}){return J3(r,r.scrollHeight,t)}function J3(r,t,n={}){var e;if(n.smooth)return MD.top(r,t,{duration:n.scrollDuration??AD},n.onScrollFinish);r.scroll({top:t,behavior:"instant"}),(e=n.onScrollFinish)==null||e.call(n)}const LD=r=>({}),em=r=>({}),ED=r=>({toolUseInput:8&r}),nm=r=>({toolUseInput:r[3]}),BD=r=>({toolUseInput:8&r,toolUse:1&r}),rm=r=>({toolUseInput:r[3],toolUse:r[0]});function ID(r){let t;const n=r[17].details,e=Ot(n,r,r[22],nm),o=e||function(s){let i,a;return i=new K3({props:{toolUseInput:s[3],toolUseState:s[2],showOutput:s[5]}}),{c(){_(i.$$.fragment)},m(l,c){k(i,l,c),a=!0},p(l,c){const u={};8&c&&(u.toolUseInput=l[3]),4&c&&(u.toolUseState=l[2]),32&c&&(u.showOutput=l[5]),i.$set(u)},i(l){a||(f(i.$$.fragment,l),a=!0)},o(l){m(i.$$.fragment,l),a=!1},d(l){C(i,l)}}}(r);return{c(){o&&o.c()},m(s,i){o&&o.m(s,i),t=!0},p(s,i){e?e.p&&(!t||4194312&i)&&zt(e,n,s,s[22],t?Rt(n,s[22],i,ED):Nt(s[22]),nm):o&&o.p&&(!t||44&i)&&o.p(s,t?i:-1)},i(s){t||(f(o,s),t=!0)},o(s){m(o,s),t=!1},d(s){o&&o.d(s)}}}function FD(r){let t,n,e,o,s,i,a,l;e=new jF({props:{onScrollToTop:r[13],isVisible:r[8]}});const c=r[17].header,u=Ot(c,r,r[22],rm),h=u||function(d){let p,g;return p=new Te({props:{toolUseInput:d[3],toolName:d[0].tool_name}}),{c(){_(p.$$.fragment)},m($,b){k(p,$,b),g=!0},p($,b){const y={};8&b&&(y.toolUseInput=$[3]),1&b&&(y.toolName=$[0].tool_name),p.$set(y)},i($){g||(f(p.$$.fragment,$),g=!0)},o($){m(p.$$.fragment,$),g=!1},d($){C(p,$)}}}(r);return{c(){t=I("div"),n=I("div"),_(e.$$.fragment),o=J(),s=I("div"),h&&h.c(),T(s,"role","button"),T(s,"tabindex","0"),T(s,"class","c-tool-use__content svelte-41dxcl"),T(n,"class","c-tool-use__header svelte-41dxcl"),T(t,"slot","header"),T(t,"class","c-tool-use__header-container svelte-41dxcl")},m(d,p){S(d,t,p),O(t,n),k(e,n,null),O(n,o),O(n,s),h&&h.m(s,null),i=!0,a||(l=Kt(s,"click",function(){Be(r[4])&&r[4].apply(this,arguments)}),a=!0)},p(d,p){r=d;const g={};256&p&&(g.isVisible=r[8]),e.$set(g),u?u.p&&(!i||4194313&p)&&zt(u,c,r,r[22],i?Rt(c,r[22],p,BD):Nt(r[22]),rm):h&&h.p&&(!i||9&p)&&h.p(r,i?p:-1)},i(d){i||(f(e.$$.fragment,d),f(h,d),i=!0)},o(d){m(e.$$.fragment,d),m(h,d),i=!1},d(d){d&&v(t),C(e),h&&h.d(d),a=!1,l()}}}function DD(r){var b,y;let t,n,e,o,s,i,a,l,c;function u(x){r[18](x)}function h(x){r[19](x)}function d(x){r[20](x)}let p={stickyHeaderTop:(b=r[10])!=null&&b.enableErgonomicsUpdate?0:10,stickyHeader:!((y=r[10])!=null&&y.enableErgonomicsUpdate),class:"c-tool-use__container",expandable:r[5],$$slots:{header:[FD],default:[ID]},$$scope:{ctx:r}};r[4]!==void 0&&(p.toggle=r[4]),r[1]!==void 0&&(p.collapsed=r[1]),r[6]!==void 0&&(p.isHeaderStuck=r[6]),n=new ud({props:p}),Pt.push(()=>re(n,"toggle",u)),Pt.push(()=>re(n,"collapsed",h)),Pt.push(()=>re(n,"isHeaderStuck",d));const g=r[17].error,$=Ot(g,r,r[22],em);return{c(){t=I("div"),_(n.$$.fragment),i=J(),$&&$.c(),T(t,"class","c-tool-use svelte-41dxcl"),ut(t,"is-sticky",r[6]),ut(t,"is-expandable",r[5])},m(x,M){S(x,t,M),k(n,t,null),O(t,i),$&&$.m(t,null),r[21](t),a=!0,l||(c=Co(r[12].call(null,t)),l=!0)},p(x,[M]){var A,B;const L={};1024&M&&(L.stickyHeaderTop=(A=x[10])!=null&&A.enableErgonomicsUpdate?0:10),1024&M&&(L.stickyHeader=!((B=x[10])!=null&&B.enableErgonomicsUpdate)),32&M&&(L.expandable=x[5]),4194621&M&&(L.$$scope={dirty:M,ctx:x}),!e&&16&M&&(e=!0,L.toggle=x[4],oe(()=>e=!1)),!o&&2&M&&(o=!0,L.collapsed=x[1],oe(()=>o=!1)),!s&&64&M&&(s=!0,L.isHeaderStuck=x[6],oe(()=>s=!1)),n.$set(L),$&&$.p&&(!a||4194304&M)&&zt($,g,x,x[22],a?Rt(g,x[22],M,LD):Nt(x[22]),em),(!a||64&M)&&ut(t,"is-sticky",x[6]),(!a||32&M)&&ut(t,"is-expandable",x[5])},i(x){a||(f(n.$$.fragment,x),f($,x),a=!0)},o(x){m(n.$$.fragment,x),m($,x),a=!1},d(x){x&&v(t),C(n),$&&$.d(x),r[21](null),l=!1,c()}}}function OD(r,t,n){let e,o,s,i,a=H;r.$$.on_destroy.push(()=>a());let{$$slots:l={},$$scope:c}=t;const u=Rn();Vt(r,u,E=>n(16,s=E));const h=Jt("chatModel");let d,{showToolOutput:p=!0}=t,{toolUse:g=s.toolUse}=t,{toolUseState:$=s.toolUseState}=t,{toolUseInput:b=s.toolUseInput}=t,{collapsed:y=!0}=t,{messageListContainer:x=s.messageListContainer}=t;const M=O_(0);let L,A,{toggle:B}=t;return r.$$set=E=>{"showToolOutput"in E&&n(14,p=E.showToolOutput),"toolUse"in E&&n(0,g=E.toolUse),"toolUseState"in E&&n(2,$=E.toolUseState),"toolUseInput"in E&&n(3,b=E.toolUseInput),"collapsed"in E&&n(1,y=E.collapsed),"messageListContainer"in E&&n(15,x=E.messageListContainer),"toggle"in E&&n(4,B=E.toggle),"$$scope"in E&&n(22,c=E.$$scope)},r.$$.update=()=>{65536&r.$$.dirty&&(n(0,g=s.toolUse),n(2,$=s.toolUseState),n(3,b=s.toolUseInput)),16385&r.$$.dirty&&n(5,d=p===void 0?!sk(g.tool_name):p),98&r.$$.dirty&&n(8,o=!y&&d&&A)},n(9,e=h==null?void 0:h.flags),a(),a=An(e,E=>n(10,i=E)),[g,y,$,b,B,d,A,L,o,e,i,u,M,function(){if(x&&L)td(x,L,{smooth:!0});else if(L){let E=L.parentElement;for(;E&&window.getComputedStyle(E).overflowY!=="scroll"&&window.getComputedStyle(E).overflowY!=="auto";)E=E.parentElement;E&&td(E,L,{smooth:!0})}},p,x,s,l,function(E){B=E,n(4,B)},function(E){y=E,n(1,y)},function(E){A=E,n(6,A)},function(E){Pt[E?"unshift":"push"](()=>{L=E,n(7,L)})},c]}class Me extends nt{constructor(t){super(),rt(this,t,OD,DD,ot,{showToolOutput:14,toolUse:0,toolUseState:2,toolUseInput:3,collapsed:1,messageListContainer:15,toggle:4})}}function zD(r){let t,n;return t=new bc({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function ND(r){let t,n;return t=new Ko({props:{slot:"toolAction",path:Fe(r[0].file_path,"")}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1&o&&(s.path=Fe(e[0].file_path,"")),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function RD(r){let t,n;return t=new Te({props:{slot:"header",toolName:"Read",formattedToolArgs:[Fe(r[0].file_path,"")],$$slots:{toolAction:[ND],icon:[zD]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1&o&&(s.formattedToolArgs=[Fe(e[0].file_path,"")]),3&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function PD(r){let t,n;return t=new Me({props:{$$slots:{header:[RD]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};3&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function UD(r,t,n){let{toolUseInput:e={}}=t;return r.$$set=o=>{"toolUseInput"in o&&n(0,e=o.toolUseInput)},[e]}function qD(r){let t,n;return t=new Dy({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function jD(r){let t,n;return t=new So({props:{slot:"secondary",filepath:Fe(r[0].path,"")}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1&o&&(s.filepath=Fe(e[0].path,"")),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function WD(r){let t,n;return t=new Ko({props:{slot:"toolAction",path:Fe(r[0].path,"")}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1&o&&(s.path=Fe(e[0].path,"")),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function HD(r){let t;return{c(){t=W("Creating file...")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function VD(r){let t;return{c(){t=W("File creation failed.")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function GD(r){let t;return{c(){t=W("Created file")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function ZD(r){let t;function n(s,i){return s[1].phase===$t.completed?GD:s[1].phase===$t.error?VD:HD}let e=n(r),o=e(r);return{c(){o.c(),t=dt()},m(s,i){o.m(s,i),S(s,t,i)},p(s,i){e!==(e=n(s))&&(o.d(1),o=e(s),o&&(o.c(),o.m(t.parentNode,t)))},d(s){s&&v(t),o.d(s)}}}function YD(r){let t,n;return t=new yt({props:{size:1,slot:"toolName",class:"c-save-file__header__secondary",$$slots:{default:[ZD]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};6&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function XD(r){let t,n;return t=new Te({props:{slot:"header",$$slots:{toolName:[YD],toolAction:[WD],secondary:[jD],icon:[qD]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};7&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function QD(r){let t,n,e;return n=new hd({props:{text:Fe(r[0].file_content,""),pathName:Fe(r[0].path,"")}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"slot","details")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};1&s&&(i.text=Fe(o[0].file_content,"")),1&s&&(i.pathName=Fe(o[0].path,"")),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function KD(r){let t,n;return t=new Me({props:{showToolOutput:r[1].phase===$t.completed,$$slots:{details:[QD],header:[XD]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};2&o&&(s.showToolOutput=e[1].phase===$t.completed),7&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function JD(r,t,n){let{toolUseInput:e={}}=t,{toolUseState:o}=t;return r.$$set=s=>{"toolUseInput"in s&&n(0,e=s.toolUseInput),"toolUseState"in s&&n(1,o=s.toolUseState)},[e,o]}function tO(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},r[0]],o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return{c(){t=Bt("svg"),n=new Oe(!0),this.h()},l(s){t=ze(s,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Ne(t);n=Re(i,!0),i.forEach(v),this.h()},h(){n.a=null,Ht(t,o)},m(s,i){Pe(s,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M48 80v48h416V80zM32 32h448c17.7 0 32 14.3 32 32v80c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32V64c0-17.7 14.3-32 32-32m128 216c0-13.3 10.7-24 24-24h144c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24M32 416V208h48v208c0 8.8 7.2 16 16 16h320c8.8 0 16-7.2 16-16V208h48v208c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64"/>',t)},p(s,[i]){Ht(t,o=Zt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&s[0]]))},i:H,o:H,d(s){s&&v(t)}}}function eO(r,t,n){return r.$$set=e=>{n(0,t=lt(lt({},t),jt(e)))},[t=jt(t)]}class nO extends nt{constructor(t){super(),rt(this,t,eO,tO,ot,{})}}function rO(r){let t,n;return t=new nO({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function oO(r){let t,n;return t=new Te({props:{slot:"header",toolName:"Remember",formattedToolArgs:[Fe(r[0].memory,"")],$$slots:{icon:[rO]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1&o&&(s.formattedToolArgs=[Fe(e[0].memory,"")]),2&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function sO(r){let t,n;return t=new Me({props:{$$slots:{header:[oO]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};3&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function iO(r,t,n){let{toolUseInput:e={}}=t;return r.$$set=o=>{"toolUseInput"in o&&n(0,e=o.toolUseInput)},[e]}function aO(r){let t,n,e;return n=new G_({}),{c(){t=I("span"),_(n.$$.fragment),T(t,"slot","icon"),T(t,"class","c-diagnostics__header__icon svelte-14f9yeq")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p:H,i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function lO(r){let t,n;return t=new Te({props:{slot:"header",toolName:"Diagnostics",$$slots:{icon:[aO]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function cO(r){let t,n;return t=new Me({props:{$$slots:{header:[lO]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};1&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function om(r){let t,n,e=(!r[0]||r[2])&&sm(r);return{c(){t=I("div"),e&&e.c(),T(t,"class","c-show-more__button-container"),ut(t,"c-show-more__button-container--no-overflow",r[0])},m(o,s){S(o,t,s),e&&e.m(t,null),n=!0},p(o,s){!o[0]||o[2]?e?(e.p(o,s),5&s&&f(e,1)):(e=sm(o),e.c(),f(e,1),e.m(t,null)):e&&(Y(),m(e,1,1,()=>{e=null}),X()),(!n||1&s)&&ut(t,"c-show-more__button-container--no-overflow",o[0])},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d()}}}function sm(r){let t,n;return t=new w2({props:{expanded:r[0],onClick:r[9]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1&o&&(s.expanded=e[0]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function uO(r){let t,n,e,o,s,i,a;const l=r[14].default,c=Ot(l,r,r[13],null);let u=(r[0]||!r[0]&&r[7])&&om(r);return{c(){t=I("div"),n=I("div"),c&&c.c(),e=J(),u&&u.c(),T(n,"class","c-show-more__content"),Ge(n,"max-height",r[0]?r[6]?r[6]+r[3]+"px":"unset":r[1]+"px"),Ge(n,"--show-more-transition",r[8]+"ms ease-in-out"),T(t,"class",o="c-show-more "+r[5]+" svelte-4xn7wq"),ut(t,"c-show-more--expanded",r[0]),ut(t,"c-show-more--show-on-hover",r[4])},m(h,d){S(h,t,d),O(t,n),c&&c.m(n,null),O(t,e),u&&u.m(t,null),s=!0,i||(a=Co(r[10].call(null,n)),i=!0)},p(h,[d]){c&&c.p&&(!s||8192&d)&&zt(c,l,h,h[13],s?Rt(l,h[13],d,null):Nt(h[13]),null),(!s||75&d)&&Ge(n,"max-height",h[0]?h[6]?h[6]+h[3]+"px":"unset":h[1]+"px"),(!s||256&d)&&Ge(n,"--show-more-transition",h[8]+"ms ease-in-out"),h[0]||!h[0]&&h[7]?u?(u.p(h,d),129&d&&f(u,1)):(u=om(h),u.c(),f(u,1),u.m(t,null)):u&&(Y(),m(u,1,1,()=>{u=null}),X()),(!s||32&d&&o!==(o="c-show-more "+h[5]+" svelte-4xn7wq"))&&T(t,"class",o),(!s||33&d)&&ut(t,"c-show-more--expanded",h[0]),(!s||48&d)&&ut(t,"c-show-more--show-on-hover",h[4])},i(h){s||(f(c,h),f(u),s=!0)},o(h){m(c,h),m(u),s=!1},d(h){h&&v(t),c&&c.d(h),u&&u.d(),i=!1,a()}}}function hO(r,t,n){let e,{$$slots:o={},$$scope:s}=t,{expanded:i}=t,{maxHeight:a=200}=t,{transitionDurationMs:l}=t,{collapseText:c="Show less"}=t,{paddingBottom:u=30}=t,{showOnHover:h=!1}=t,{overflowThreshold:d=10}=t,{class:p=""}=t,g=0,$=!1,b=!!i,y=l??Math.min(Math.max(500,g+a),200);return r.$$set=x=>{"expanded"in x&&n(0,i=x.expanded),"maxHeight"in x&&n(1,a=x.maxHeight),"transitionDurationMs"in x&&n(11,l=x.transitionDurationMs),"collapseText"in x&&n(2,c=x.collapseText),"paddingBottom"in x&&n(3,u=x.paddingBottom),"showOnHover"in x&&n(4,h=x.showOnHover),"overflowThreshold"in x&&n(12,d=x.overflowThreshold),"class"in x&&n(5,p=x.class),"$$scope"in x&&n(13,s=x.$$scope)},r.$$.update=()=>{2114&r.$$.dirty&&n(8,y=l??Math.min(Math.max(500,g+a),200))},[i,a,c,u,h,p,g,$,y,function(){b=!0,n(0,i=!i),clearTimeout(e),e=setTimeout(()=>{b=!1},y)},function(x){let M;function L(B){if(b)return;const E=B.scrollHeight;n(6,g=E+B.clientHeight),n(7,$=E>a+d)}function A(B){M==null||M.disconnect(),M=new ResizeObserver(()=>{requestAnimationFrame(()=>{L(B)})}),M.observe(B)}return i&&n(6,g=x.scrollHeight+x.clientHeight),L(x),A(x),{update(B){A(B),L(B)},destroy(){M==null||M.disconnect()}}},l,d,s,o]}class ya extends nt{constructor(t){super(),rt(this,t,hO,uO,ot,{expanded:0,maxHeight:1,transitionDurationMs:11,collapseText:2,paddingBottom:3,showOnHover:4,overflowThreshold:12,class:5})}}function im(r,t,n){const e=r.slice();return e[7]=t[n][0],e[8]=t[n][1],e}function am(r,t,n){const e=r.slice();return e[11]=t[n],e}function dO(r){let t,n=r[7]+"";return{c(){t=W(n)},m(e,o){S(e,t,o)},p(e,o){4&o&&n!==(n=e[7]+"")&&ht(t,n)},d(e){e&&v(t)}}}function pO(r){let t,n,e,o=r[11]+"";return{c(){t=I("pre"),n=W("$ "),e=W(o),T(t,"class","c-shell-tooluse__value")},m(s,i){S(s,t,i),O(t,n),O(t,e)},p(s,i){4&i&&o!==(o=s[11]+"")&&ht(e,o)},d(s){s&&v(t)}}}function fO(r){let t,n;return t=new yt({props:{size:1,$$slots:{default:[pO]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};16388&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function lm(r){let t,n,e;return n=new ya({props:{maxHeight:90,$$slots:{default:[fO]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-shell-tooluse__content")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};16388&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function cm(r){let t,n,e,o,s,i,a;e=new yt({props:{size:1,weight:"medium",color:"primary",$$slots:{default:[dO]},$$scope:{ctx:r}}}),s=new Ys({props:{text:r[8].join(`
`)}});let l=Gt(r[8]),c=[];for(let h=0;h<l.length;h+=1)c[h]=lm(am(r,l,h));const u=h=>m(c[h],1,1,()=>{c[h]=null});return{c(){t=I("div"),n=I("div"),_(e.$$.fragment),o=J(),_(s.$$.fragment),i=J();for(let h=0;h<c.length;h+=1)c[h].c();T(n,"class","c-shell-tooluse__details__heading"),T(t,"class","c-shell-tooluse__details__group")},m(h,d){S(h,t,d),O(t,n),k(e,n,null),O(n,o),k(s,n,null),O(t,i);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(t,null);a=!0},p(h,d){const p={};16388&d&&(p.$$scope={dirty:d,ctx:h}),e.$set(p);const g={};if(4&d&&(g.text=h[8].join(`
`)),s.$set(g),4&d){let $;for(l=Gt(h[8]),$=0;$<l.length;$+=1){const b=am(h,l,$);c[$]?(c[$].p(b,d),f(c[$],1)):(c[$]=lm(b),c[$].c(),f(c[$],1),c[$].m(t,null))}for(Y(),$=l.length;$<c.length;$+=1)u($);X()}},i(h){if(!a){f(e.$$.fragment,h),f(s.$$.fragment,h);for(let d=0;d<l.length;d+=1)f(c[d]);a=!0}},o(h){m(e.$$.fragment,h),m(s.$$.fragment,h),c=c.filter(Boolean);for(let d=0;d<c.length;d+=1)m(c[d]);a=!1},d(h){h&&v(t),C(e),C(s),un(c,h)}}}function um(r){let t,n,e,o,s,i,a,l,c;return e=new yt({props:{size:1,weight:"medium",color:"primary",$$slots:{default:[gO]},$$scope:{ctx:r}}}),s=new Ys({props:{text:r[0].output}}),l=new ya({props:{maxHeight:90,$$slots:{default:[$O]},$$scope:{ctx:r}}}),{c(){t=I("div"),n=I("div"),_(e.$$.fragment),o=J(),_(s.$$.fragment),i=J(),a=I("div"),_(l.$$.fragment),T(n,"class","c-shell-tooluse__details__heading"),T(a,"class","c-shell-tooluse__content"),T(t,"class","c-shell-tooluse__details__group")},m(u,h){S(u,t,h),O(t,n),k(e,n,null),O(n,o),k(s,n,null),O(t,i),O(t,a),k(l,a,null),c=!0},p(u,h){const d={};16384&h&&(d.$$scope={dirty:h,ctx:u}),e.$set(d);const p={};1&h&&(p.text=u[0].output),s.$set(p);const g={};16401&h&&(g.$$scope={dirty:h,ctx:u}),l.$set(g)},i(u){c||(f(e.$$.fragment,u),f(s.$$.fragment,u),f(l.$$.fragment,u),c=!0)},o(u){m(e.$$.fragment,u),m(s.$$.fragment,u),m(l.$$.fragment,u),c=!1},d(u){u&&v(t),C(e),C(s),C(l)}}}function gO(r){let t;return{c(){t=W("Output")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function mO(r){var o;let t,n,e=((o=r[0].output)==null?void 0:o.trim())+"";return{c(){t=I("pre"),n=W(e),T(t,"class","c-shell-tooluse__value")},m(s,i){S(s,t,i),O(t,n)},p(s,i){var a;1&i&&e!==(e=((a=s[0].output)==null?void 0:a.trim())+"")&&ht(n,e)},d(s){s&&v(t)}}}function $O(r){var e;let t,n;return t=new yt({props:{size:(e=r[4])!=null&&e.enableErgonomicsUpdate?1:2,type:"monospace",$$slots:{default:[mO]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(o,s){k(t,o,s),n=!0},p(o,s){var a;const i={};16&s&&(i.size=(a=o[4])!=null&&a.enableErgonomicsUpdate?1:2),16385&s&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){C(t,o)}}}function yO(r){let t,n,e,o=Gt(r[2]),s=[];for(let l=0;l<o.length;l+=1)s[l]=cm(im(r,o,l));const i=l=>m(s[l],1,1,()=>{s[l]=null});let a=r[0].output&&r[1].phase!==$t.error&&um(r);return{c(){t=I("div");for(let l=0;l<s.length;l+=1)s[l].c();n=J(),a&&a.c(),T(t,"class","c-shell-tooluse__details svelte-q56d8y")},m(l,c){S(l,t,c);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(t,null);O(t,n),a&&a.m(t,null),e=!0},p(l,[c]){if(4&c){let u;for(o=Gt(l[2]),u=0;u<o.length;u+=1){const h=im(l,o,u);s[u]?(s[u].p(h,c),f(s[u],1)):(s[u]=cm(h),s[u].c(),f(s[u],1),s[u].m(t,n))}for(Y(),u=o.length;u<s.length;u+=1)i(u);X()}l[0].output&&l[1].phase!==$t.error?a?(a.p(l,c),3&c&&f(a,1)):(a=um(l),a.c(),f(a,1),a.m(t,null)):a&&(Y(),m(a,1,1,()=>{a=null}),X())},i(l){if(!e){for(let c=0;c<o.length;c+=1)f(s[c]);f(a),e=!0}},o(l){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)m(s[c]);m(a),e=!1},d(l){l&&v(t),un(s,l),a&&a.d()}}}function xO(r,t,n){let e,o,s=H;r.$$.on_destroy.push(()=>s());let{toolUseInput:i}=t,{result:a}=t,{toolUseState:l}=t,c=[];typeof i.command_type=="string"?i.command_type==="simple"&&Array.isArray(i.simple_command)&&i.simple_command.length>0?c=[["Command",[i.simple_command[0]]],["Args",i.simple_command.slice(1)]]:i.command_type==="complex"&&typeof i.complex_command=="string"&&(c=[["Command",[i.complex_command]]]):typeof i.command=="string"&&(c=[["Command",[i.command]]]);const u=Jt("chatModel");return r.$$set=h=>{"toolUseInput"in h&&n(5,i=h.toolUseInput),"result"in h&&n(0,a=h.result),"toolUseState"in h&&n(1,l=h.toolUseState)},n(3,e=u==null?void 0:u.flags),s(),s=An(e,h=>n(4,o=h)),[a,l,c,e,o,i]}class bO extends nt{constructor(t){super(),rt(this,t,xO,yO,ot,{toolUseInput:5,result:0,toolUseState:1})}}const hm=16e3;function dm(r){if(!r)return{reason:"",returnCode:0,output:""};if(r.length>hm)return{reason:"Output too large",returnCode:0,output:r.slice(-1*hm)};const t=r.includes("<return-code>"),n=r.includes("<output>");if(!t&&!n)return{reason:"",returnCode:0,output:r};const e=t?/<return-code>\s*(-?\d+)\s*<\/return-code>/.exec(r):null,o=n?/<output>\s*(.*?)\s*<\/output>/s.exec(r):null;let s="",i="0",a=r;return e&&(i=e[1],s=r.substring(0,e.index)),o&&(a=o[1],e||(s=r.substring(0,o.index))),{reason:s,returnCode:Number(i),output:a}}function pm(r){let t,n,e,o,s,i,a;e=new yt({props:{size:1,weight:"medium",$$slots:{default:[wO]},$$scope:{ctx:r}}}),s=new Ys({props:{text:r[1]??""}});let l=r[2]&&fm(r);return{c(){t=I("div"),n=I("div"),_(e.$$.fragment),o=J(),_(s.$$.fragment),i=J(),l&&l.c(),T(n,"class","c-shell-error__code svelte-jqsjq"),T(t,"class","c-shell-error svelte-jqsjq")},m(c,u){S(c,t,u),O(t,n),k(e,n,null),O(n,o),k(s,n,null),O(t,i),l&&l.m(t,null),a=!0},p(c,u){const h={};32&u&&(h.$$scope={dirty:u,ctx:c}),e.$set(h);const d={};2&u&&(d.text=c[1]??""),s.$set(d),c[2]?l?(l.p(c,u),4&u&&f(l,1)):(l=fm(c),l.c(),f(l,1),l.m(t,null)):l&&(Y(),m(l,1,1,()=>{l=null}),X())},i(c){a||(f(e.$$.fragment,c),f(s.$$.fragment,c),f(l),a=!0)},o(c){m(e.$$.fragment,c),m(s.$$.fragment,c),m(l),a=!1},d(c){c&&v(t),C(e),C(s),l&&l.d()}}}function wO(r){let t;return{c(){t=W("Error")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function fm(r){let t,n;return t=new ya({props:{maxHeight:90,$$slots:{default:[_O]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};36&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function vO(r){let t,n;return{c(){t=I("pre"),n=W(r[2])},m(e,o){S(e,t,o),O(t,n)},p(e,o){4&o&&ht(n,e[2])},d(e){e&&v(t)}}}function _O(r){let t,n,e;return n=new yt({props:{size:1,weight:"light",type:"monospace",$$slots:{default:[vO]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-shell-error__message svelte-jqsjq")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};36&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function kO(r){let t,n,e=r[0]&&pm(r);return{c(){e&&e.c(),t=dt()},m(o,s){e&&e.m(o,s),S(o,t,s),n=!0},p(o,[s]){o[0]?e?(e.p(o,s),1&s&&f(e,1)):(e=pm(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d(o)}}}function CO(r,t,n){let e,o,{isError:s=!1}=t,{text:i=""}=t,{hideDetailedMessage:a=!1}=t;return r.$$set=l=>{"isError"in l&&n(0,s=l.isError),"text"in l&&n(1,i=l.text),"hideDetailedMessage"in l&&n(3,a=l.hideDetailedMessage)},r.$$.update=()=>{2&r.$$.dirty&&n(4,e=i?i.split(`
`)[0]:""),26&r.$$.dirty&&n(2,o=a?e:i)},[s,i,o,a,e]}class To extends nt{constructor(t){super(),rt(this,t,CO,kO,ot,{isError:0,text:1,hideDetailedMessage:3})}}const SO=r=>({}),gm=r=>({});function mm(r){let t,n,e,o;return n=new ca({props:{defaultColor:r[1],stickyColor:r[3],size:r[0],variant:r[2],tooltip:{neutral:"Open Terminal",success:"Opening terminal..."},stateVariant:{success:"soft"},onClick:r[5],icon:!r[6].text,$$slots:{iconLeft:[MO],default:[TO]},$$scope:{ctx:r}}}),{c(){t=I("span"),_(n.$$.fragment),T(t,"class",e="c-open-terminal-button-container c-open-terminal-button__size--"+r[0]+" svelte-ida095")},m(s,i){S(s,t,i),k(n,t,null),o=!0},p(s,i){const a={};2&i&&(a.defaultColor=s[1]),8&i&&(a.stickyColor=s[3]),1&i&&(a.size=s[0]),4&i&&(a.variant=s[2]),64&i&&(a.icon=!s[6].text),16384&i&&(a.$$scope={dirty:i,ctx:s}),n.$set(a),(!o||1&i&&e!==(e="c-open-terminal-button-container c-open-terminal-button__size--"+s[0]+" svelte-ida095"))&&T(t,"class",e)},i(s){o||(f(n.$$.fragment,s),o=!0)},o(s){m(n.$$.fragment,s),o=!1},d(s){s&&v(t),C(n)}}}function TO(r){let t;const n=r[13].text,e=Ot(n,r,r[14],gm);return{c(){e&&e.c()},m(o,s){e&&e.m(o,s),t=!0},p(o,s){e&&e.p&&(!t||16384&s)&&zt(e,n,o,o[14],t?Rt(n,o[14],s,SO):Nt(o[14]),gm)},i(o){t||(f(e,o),t=!0)},o(o){m(e,o),t=!1},d(o){e&&e.d(o)}}}function MO(r){let t,n;return t=new _y({props:{slot:"iconLeft"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function AO(r){let t,n,e=r[4]&&mm(r);return{c(){e&&e.c(),t=dt()},m(o,s){e&&e.m(o,s),S(o,t,s),n=!0},p(o,[s]){o[4]?e?(e.p(o,s),16&s&&f(e,1)):(e=mm(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d(o)}}}function LO(r,t,n){let e,o,{$$slots:s={},$$scope:i}=t;const a=yc(s);let{terminalId:l}=t,{toolUseInput:c={}}=t,{toolResult:u}=t,{phase:h}=t,{size:d=0}=t,{color:p="neutral"}=t,{variant:g="ghost-block"}=t,{stickyColor:$=!1}=t;const b=Zs();let y=!1;return r.$$set=x=>{"terminalId"in x&&n(7,l=x.terminalId),"toolUseInput"in x&&n(8,c=x.toolUseInput),"toolResult"in x&&n(9,u=x.toolResult),"phase"in x&&n(10,h=x.phase),"size"in x&&n(0,d=x.size),"color"in x&&n(1,p=x.color),"variant"in x&&n(2,g=x.variant),"stickyColor"in x&&n(3,$=x.stickyColor),"$$scope"in x&&n(14,i=x.$$scope)},r.$$.update=()=>{256&r.$$.dirty&&n(11,e=c.command),1024&r.$$.dirty&&n(12,o=h===$t.running),6784&r.$$.dirty&&(l!==void 0||e!==void 0||o)&&async function(){const x=await b.extensionClient.canShowTerminal(l,e);n(4,y=x)}()},[d,p,g,$,y,async function(x){var M,L;return(M=x==null?void 0:x.stopPropagation)==null||M.call(x),(L=x==null?void 0:x.preventDefault)==null||L.call(x),await b.extensionClient.showTerminal(l,e)?"success":(n(4,y=!1),"failure")},a,l,c,u,h,e,o,s,i]}class EO extends nt{constructor(t){super(),rt(this,t,LO,AO,ot,{terminalId:7,toolUseInput:8,toolResult:9,phase:10,size:0,color:1,variant:2,stickyColor:3})}}function BO(r){let t,n;return t=new kk({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function IO(r){let t,n;return t=new yt({props:{size:1,class:"c-shell-tool-use-header__code",$$slots:{default:[DO]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};133&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function FO(r){let t,n,e;return{c(){t=I("code"),n=W("$"),e=W(r[3]),T(t,"class","c-shell-tool-use-header__code svelte-i0m7t7")},m(o,s){S(o,t,s),O(t,n),O(t,e)},p(o,s){8&s&&ht(e,o[3])},i:H,o:H,d(o){o&&v(t)}}}function DO(r){let t,n=r[6](r[2].tool_name,r[0].phase)+"";return{c(){t=W(n)},m(e,o){S(e,t,o)},p(e,o){5&o&&n!==(n=e[6](e[2].tool_name,e[0].phase)+"")&&ht(t,n)},d(e){e&&v(t)}}}function OO(r){let t,n,e,o;const s=[FO,IO],i=[];function a(l,c){return l[3]?0:1}return n=a(r),e=i[n]=s[n](r),{c(){t=I("span"),e.c(),T(t,"slot","secondary"),T(t,"class","c-shell-tool-use-header__code-container svelte-i0m7t7")},m(l,c){S(l,t,c),i[n].m(t,null),o=!0},p(l,c){let u=n;n=a(l),n===u?i[n].p(l,c):(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),e=i[n],e?e.p(l,c):(e=i[n]=s[n](l),e.c()),f(e,1),e.m(t,null))},i(l){o||(f(e),o=!0)},o(l){m(e),o=!1},d(l){l&&v(t),i[n].d()}}}function zO(r){var o;let t,n,e;return n=new EO({props:{terminalId:r[5],toolUseInput:r[1],toolResult:(o=r[0].result)==null?void 0:o.text,phase:r[0].phase}}),{c(){t=I("span"),_(n.$$.fragment),T(t,"slot","toolAction")},m(s,i){S(s,t,i),k(n,t,null),e=!0},p(s,i){var l;const a={};32&i&&(a.terminalId=s[5]),2&i&&(a.toolUseInput=s[1]),1&i&&(a.toolResult=(l=s[0].result)==null?void 0:l.text),1&i&&(a.phase=s[0].phase),n.$set(a)},i(s){e||(f(n.$$.fragment,s),e=!0)},o(s){m(n.$$.fragment,s),e=!1},d(s){s&&v(t),C(n)}}}function NO(r){let t,n;return t=new rs({props:{slot:"toolStatus",isCommandError:!!r[4].returnCode&&r[4].returnCode!==0}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};16&o&&(s.isCommandError=!!e[4].returnCode&&e[4].returnCode!==0),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function RO(r){let t,n;return t=new Te({props:{slot:"header",toolName:"Terminal",$$slots:{toolStatus:[NO],toolAction:[zO],secondary:[OO],icon:[BO]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};191&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function PO(r){let t,n;return t=new bO({props:{slot:"details",toolUseInput:r[1],result:r[4],toolUseState:r[0]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};2&o&&(s.toolUseInput=e[1]),16&o&&(s.result=e[4]),1&o&&(s.toolUseState=e[0]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function UO(r){var e;let t,n;return t=new To({props:{slot:"error",isError:!r[4].returnCode&&r[0].phase===$t.error,text:(e=r[0].result)==null?void 0:e.text}}),{c(){_(t.$$.fragment)},m(o,s){k(t,o,s),n=!0},p(o,s){var a;const i={};17&s&&(i.isError=!o[4].returnCode&&o[0].phase===$t.error),1&s&&(i.text=(a=o[0].result)==null?void 0:a.text),t.$set(i)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){C(t,o)}}}function qO(r){let t,n;return t=new Me({props:{$$slots:{error:[UO],details:[PO],header:[RO]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};191&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function jO(r,t,n){var c;let e,{toolUseState:o}=t,{toolUseInput:s={}}=t,{toolUse:i}=t,a=Sg(s),l=dm(((c=o.result)==null?void 0:c.text)??"");return r.$$set=u=>{"toolUseState"in u&&n(0,o=u.toolUseState),"toolUseInput"in u&&n(1,s=u.toolUseInput),"toolUse"in u&&n(2,i=u.toolUse)},r.$$.update=()=>{var u,h;2&r.$$.dirty&&n(3,a=Sg(s)),1&r.$$.dirty&&n(4,l=dm(((u=o.result)==null?void 0:u.text)??"")),7&r.$$.dirty&&n(5,e=function(d,p,g){if(p.terminal_id!==null&&p.terminal_id!==void 0)return p.terminal_id;if(d==="launch-process"&&g){const $=g.match(/[Tt]erminal ID (\d+)/);if($)return parseInt($[1],10)}}(i.tool_name,s,(h=o.result)==null?void 0:h.text))},[o,s,i,a,l,e,function(u,h){const d=!(h===$t.completed||h===$t.error);switch(u){case"launch-process":return d?"Launching Process...":"Launched Process";case"kill-process":return d?"Killing Process...":"Killed Process";case"read-process":return d?"Reading from Process...":"Read from Process";case"write-process":return d?"Writing to Process...":"Wrote to Process";case"list-processes":return d?"Listing Processes":"Listed Processes";case"wait-process":return d?"Waiting for Process...":"Waited for Process";case"read-terminal":return d?"Reading from Terminal...":"Read from Terminal"}return""}]}class lo extends nt{constructor(t){super(),rt(this,t,jO,qO,ot,{toolUseState:0,toolUseInput:1,toolUse:2})}}function WO(r){let t,n;return{c(){t=I("div"),n=I("div"),T(n,"style","height:"+HO+"px"),T(n,"class","editor-container svelte-1rk1ftj")},m(e,o){S(e,t,o),O(t,n),r[6](n)},p:H,i:H,o:H,d(e){e&&v(t),r[6](null)}}}let HO=200;function VO(r,t,n){let e;Vt(r,sd,d=>n(5,e=d));let o,s,i,a,{originalCode:l}=t,{modifiedCode:c}=t,{path:u}=t;function h(d,p,g){s==null||s.dispose(),i==null||i.dispose(),p=p||"",g=g||"",s=li.createModel(p,void 0,d!==void 0?cf.parse("file://"+d+`#${crypto.randomUUID()}`):void 0),i=li.createModel(g,void 0,d!==void 0?cf.parse("file://"+d+`#${crypto.randomUUID()}`):void 0),o&&o.setModel({original:s,modified:i})}return Gs(()=>{o==null||o.dispose(),s==null||s.dispose(),i==null||i.dispose()}),xc(()=>{n(4,o=li.createDiffEditor(a,{lineNumbers:"off",hideUnchangedRegions:{enabled:!0,revealLineCount:3,minimumLineCount:3,contextLineCount:3},scrollBeyondLastLine:!1,readOnly:!0,minimap:{enabled:!1},lightbulb:{enabled:li.ShowLightbulbIconMode.Off},automaticLayout:!0,enableSplitViewResizing:!1,diffCodeLens:!1,renderOverviewRuler:!1,renderSideBySide:!1,glyphMargin:!1,folding:!1,showFoldingControls:"never",overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,lineDecorationsWidth:0})),o.getOriginalEditor().updateOptions({lineNumbers:"off"}),o.getModifiedEditor().updateOptions({lineNumbers:"off"}),h(u,l,c)}),r.$$set=d=>{"originalCode"in d&&n(1,l=d.originalCode),"modifiedCode"in d&&n(2,c=d.modifiedCode),"path"in d&&n(3,u=d.path)},r.$$.update=()=>{if(14&r.$$.dirty&&h(u,l,c),48&r.$$.dirty&&o){const d=e,p=Z_(d==null?void 0:d.category,d==null?void 0:d.intensity),g={theme:p};li.setTheme(p),o.getModifiedEditor().updateOptions(g),o.getOriginalEditor().updateOptions(g),o.layout()}},[a,l,c,u,o,e,function(d){Pt[d?"unshift":"push"](()=>{a=d,n(0,a)})}]}class GO extends nt{constructor(t){super(),rt(this,t,VO,WO,ot,{originalCode:1,modifiedCode:2,path:3})}}function ZO(r){let t,n,e,o,s,i,a=r[0]>0&&$m(r),l=r[1]>0&&ym(r);return{c(){t=I("div"),a&&a.c(),n=J(),l&&l.c(),T(t,"class","c-line-diff-count svelte-ef5cax")},m(c,u){S(c,t,u),a&&a.m(t,null),O(t,n),l&&l.m(t,null),o=!0,s||(i=Co(e=xd.call(null,t,{onVisible:r[10],scrollTarget:document.body})),s=!0)},p(c,u){c[0]>0?a?(a.p(c,u),1&u&&f(a,1)):(a=$m(c),a.c(),f(a,1),a.m(t,n)):a&&(Y(),m(a,1,1,()=>{a=null}),X()),c[1]>0?l?(l.p(c,u),2&u&&f(l,1)):(l=ym(c),l.c(),f(l,1),l.m(t,null)):l&&(Y(),m(l,1,1,()=>{l=null}),X()),e&&Be(e.update)&&4&u&&e.update.call(null,{onVisible:c[10],scrollTarget:document.body})},i(c){o||(f(a),f(l),o=!0)},o(c){m(a),m(l),o=!1},d(c){c&&v(t),a&&a.d(),l&&l.d(),s=!1,i()}}}function YO(r){let t,n,e,o,s,i,a=r[0]>0&&xm(r),l=r[1]>0&&bm(r);return{c(){t=I("div"),a&&a.c(),n=J(),l&&l.c(),T(t,"class","c-line-diff-count-2 svelte-ef5cax")},m(c,u){S(c,t,u),a&&a.m(t,null),O(t,n),l&&l.m(t,null),o=!0,s||(i=Co(e=xd.call(null,t,{onVisible:r[9],scrollTarget:document.body})),s=!0)},p(c,u){c[0]>0?a?(a.p(c,u),1&u&&f(a,1)):(a=xm(c),a.c(),f(a,1),a.m(t,n)):a&&(Y(),m(a,1,1,()=>{a=null}),X()),c[1]>0?l?(l.p(c,u),2&u&&f(l,1)):(l=bm(c),l.c(),f(l,1),l.m(t,null)):l&&(Y(),m(l,1,1,()=>{l=null}),X()),e&&Be(e.update)&&4&u&&e.update.call(null,{onVisible:c[9],scrollTarget:document.body})},i(c){o||(f(a),f(l),o=!0)},o(c){m(a),m(l),o=!1},d(c){c&&v(t),a&&a.d(),l&&l.d(),s=!1,i()}}}function $m(r){let t,n,e;return n=new yt({props:{class:"c-line-diff-count__added",size:1,$$slots:{default:[XO]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),Ge(t,"background-color","var(--ds-color-success-3)"),Ge(t,"border-radius","2px"),Ge(t,"padding","2px 5px")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};8193&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function XO(r){let t,n;return{c(){t=W("+"),n=W(r[0])},m(e,o){S(e,t,o),S(e,n,o)},p(e,o){1&o&&ht(n,e[0])},d(e){e&&(v(t),v(n))}}}function ym(r){let t,n,e;return n=new yt({props:{class:"c-line-diff-count__removed",size:1,$$slots:{default:[QO]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),Ge(t,"background-color","var(--ds-color-error-3)"),Ge(t,"border-radius","2px"),Ge(t,"padding","2px 5px")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};8194&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function QO(r){let t,n;return{c(){t=W("-"),n=W(r[1])},m(e,o){S(e,t,o),S(e,n,o)},p(e,o){2&o&&ht(n,e[1])},d(e){e&&(v(t),v(n))}}}function xm(r){let t,n;return t=new yt({props:{class:"c-line-diff-count__added",size:1,$$slots:{default:[KO]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8193&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function KO(r){let t,n;return{c(){t=W("+"),n=W(r[0])},m(e,o){S(e,t,o),S(e,n,o)},p(e,o){1&o&&ht(n,e[0])},d(e){e&&(v(t),v(n))}}}function bm(r){let t,n;return t=new yt({props:{class:"c-line-diff-count__removed",size:1,$$slots:{default:[JO]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8194&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function JO(r){let t,n;return{c(){t=W("-"),n=W(r[1])},m(e,o){S(e,t,o),S(e,n,o)},p(e,o){2&o&&ht(n,e[1])},d(e){e&&(v(t),v(n))}}}function tz(r){let t,n,e,o;const s=[YO,ZO],i=[];function a(l,c){var u;return(u=l[3])!=null&&u.enableErgonomicsUpdate?1:0}return t=a(r),n=i[t]=s[t](r),{c(){n.c(),e=dt()},m(l,c){i[t].m(l,c),S(l,e,c),o=!0},p(l,[c]){let u=t;t=a(l),t===u?i[t].p(l,c):(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),n=i[t],n?n.p(l,c):(n=i[t]=s[t](l),n.c()),f(n,1),n.m(e.parentNode,e))},i(l){o||(f(n),o=!0)},o(l){m(n),o=!1},d(l){l&&v(e),i[t].d(l)}}}function ez(r,t,n){let e,o,s;const i=Rn();Vt(r,i,p=>n(11,s=p));const a=Zs();Vt(r,a,p=>n(8,o=p));let{requestId:l}=t,{toolUseState:c=s.toolUseState}=t,{totalAddedLines:u=0}=t,{totalRemovedLines:h=0}=t,d=!1;return r.$$set=p=>{"requestId"in p&&n(6,l=p.requestId),"toolUseState"in p&&n(7,c=p.toolUseState),"totalAddedLines"in p&&n(0,u=p.totalAddedLines),"totalRemovedLines"in p&&n(1,h=p.totalRemovedLines)},r.$$.update=()=>{196&r.$$.dirty&&c.phase===$t.completed&&d&&async function(p,g){var $;if(p===$t.completed&&d)try{const b=await(($=a.extensionClient)==null?void 0:$.getAgentEditChangesByRequestId(g));n(0,u=(b==null?void 0:b.totalAddedLines)??0),n(1,h=(b==null?void 0:b.totalRemovedLines)??0)}catch(b){console.warn(b)}}(c.phase,l),256&r.$$.dirty&&n(3,e=o.flags)},[u,h,d,e,i,a,l,c,o,()=>n(2,d=!0),()=>n(2,d=!0)]}class yp extends nt{constructor(t){super(),rt(this,t,ez,tz,ot,{requestId:6,toolUseState:7,totalAddedLines:0,totalRemovedLines:1})}}function nz(r){let t,n,e,o;return t=new Tk({props:{filename:r[5]}}),e=new So({props:{filepath:r[5]}}),{c(){_(t.$$.fragment),n=J(),_(e.$$.fragment)},m(s,i){k(t,s,i),S(s,n,i),k(e,s,i),o=!0},p(s,i){const a={};32&i&&(a.filename=s[5]),t.$set(a);const l={};32&i&&(l.filepath=s[5]),e.$set(l)},i(s){o||(f(t.$$.fragment,s),f(e.$$.fragment,s),o=!0)},o(s){m(t.$$.fragment,s),m(e.$$.fragment,s),o=!1},d(s){s&&v(n),C(t,s),C(e,s)}}}function wm(r){let t,n;return t=new yp({props:{requestId:r[1]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};2&o&&(s.requestId=e[1]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function rz(r){let t;return{c(){t=I("div"),t.textContent="Loading...",T(t,"class","c-edit-file-tool-use-details__loading")},m(n,e){S(n,t,e)},p:H,i:H,o:H,d(n){n&&v(t)}}}function oz(r){let t,n;const e=[r[3],{path:r[5]}];let o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return t=new GO({props:o}),{c(){_(t.$$.fragment)},m(s,i){k(t,s,i),n=!0},p(s,i){const a=40&i?Zt(e,[8&i&&Ze(s[3]),32&i&&{path:s[5]}]):{};t.$set(a)},i(s){n||(f(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){C(t,s)}}}function sz(r){var b;let t,n,e,o,s,i,a,l,c,u,h;e=new yt({props:{size:1,color:"primary",class:"c-edit-file-tool-use-details__header__icon",$$slots:{default:[nz]},$$scope:{ctx:r}}});let d=((b=r[6])==null?void 0:b.enableErgonomicsUpdate)&&wm(r);a=new Ko({props:{path:Fe(r[0].path,"")}});const p=[oz,rz],g=[];function $(y,x){return y[3]?0:1}return c=$(r),u=g[c]=p[c](r),{c(){t=I("div"),n=I("div"),_(e.$$.fragment),o=J(),s=I("div"),d&&d.c(),i=J(),_(a.$$.fragment),l=J(),u.c(),T(s,"class","c-edit-file-tool-use-details__header__counts svelte-1o43bgz"),T(n,"class","c-edit-file-tool-use-details__header svelte-1o43bgz"),T(t,"class","c-edit-file-tool-use-details svelte-1o43bgz")},m(y,x){S(y,t,x),O(t,n),k(e,n,null),O(n,o),O(n,s),d&&d.m(s,null),O(s,i),k(a,s,null),O(t,l),g[c].m(t,null),r[14](t),h=!0},p(y,[x]){var B;const M={};4194336&x&&(M.$$scope={dirty:x,ctx:y}),e.$set(M),(B=y[6])!=null&&B.enableErgonomicsUpdate?d?(d.p(y,x),64&x&&f(d,1)):(d=wm(y),d.c(),f(d,1),d.m(s,i)):d&&(Y(),m(d,1,1,()=>{d=null}),X());const L={};1&x&&(L.path=Fe(y[0].path,"")),a.$set(L);let A=c;c=$(y),c===A?g[c].p(y,x):(Y(),m(g[A],1,1,()=>{g[A]=null}),X(),u=g[c],u?u.p(y,x):(u=g[c]=p[c](y),u.c()),f(u,1),u.m(t,null))},i(y){h||(f(e.$$.fragment,y),f(d),f(a.$$.fragment,y),f(u),h=!0)},o(y){m(e.$$.fragment,y),m(d),m(a.$$.fragment,y),m(u),h=!1},d(y){y&&v(t),C(e),d&&d.d(),C(a),g[c].d(),r[14](null)}}}function iz(r,t,n){let e,o,s,i,a,l,c=H;r.$$.on_destroy.push(()=>c());const u=Rn();Vt(r,u,F=>n(13,a=F));let h,d,{toolUseInput:p=a.toolUseInput}=t,{toolUseState:g=a.toolUseState}=t,{requestId:$=a.requestId}=t,{turnIndex:b=a.turnIndex}=t,y=!1,x=!1;const M=Zs(),L=Jt(Qo.key);Vt(r,L,F=>n(18,i=F));let A,B=g.phase===$t.completed;async function E(){y&&(A==null?void 0:A.originalCode)!==(A==null?void 0:A.modifiedCode)||!B||!x||(e?function(){var tt;if(!e)return;const F=Ck(((tt=i==null?void 0:i.currentConversation)==null?void 0:tt.exchanges)??[],b);if(!F)return void console.warn("no changed files for remote agent turn",b);let U=F.find(q=>q.new_path===p.path);U||(U=F.find(q=>p.path.includes(q.new_path))),U?(n(3,A={originalCode:U.old_contents,modifiedCode:U.new_contents}),y=!0):console.warn("no changed file for path",p.path)}():(n(3,A=await(M==null?void 0:M.extensionClient.getAgentEditContentsByRequestId($))),(A==null?void 0:A.originalCode)===(A==null?void 0:A.modifiedCode)&&console.warn("no changes for requestId",$),y=!0))}return Gs(()=>{d==null||d.destroy()}),r.$$set=F=>{"toolUseInput"in F&&n(0,p=F.toolUseInput),"toolUseState"in F&&n(9,g=F.toolUseState),"requestId"in F&&n(1,$=F.requestId),"turnIndex"in F&&n(10,b=F.turnIndex)},r.$$.update=()=>{8192&r.$$.dirty&&n(0,p=a.toolUseInput),8192&r.$$.dirty&&n(9,g=a.toolUseState),8192&r.$$.dirty&&n(1,$=a.requestId),515&r.$$.dirty&&(y=!1),512&r.$$.dirty&&(B=g.phase===$t.completed),4100&r.$$.dirty&&h&&(d==null||d.destroy(),n(12,d=vc(h,{onVisible:()=>{n(11,x=!0),E()},onHidden:()=>{n(11,x=!1)},scrollTarget:document.body}))),2560&r.$$.dirty&&g.phase===$t.completed&&x&&E(),1&r.$$.dirty&&n(5,o=Fe(p.path,"").split("/").at(-1)??"")},e=!!(L!=null&&L.isActive),n(4,s=M==null?void 0:M.flags),c(),c=An(s,F=>n(6,l=F)),[p,$,h,A,s,o,l,u,L,g,b,x,d,a,function(F){Pt[F?"unshift":"push"](()=>{h=F,n(2,h)})}]}class t_ extends nt{constructor(t){super(),rt(this,t,iz,sz,ot,{toolUseInput:0,toolUseState:9,requestId:1,turnIndex:10})}}function az(r){var a;let t,n,e,o,s=r[4].toolUseState.phase===$t.running?"Editing file...":"Edited file",i=!((a=r[3])!=null&&a.enableErgonomicsUpdate)&&r[5]&&vm(r);return{c(){t=W(s),n=J(),i&&i.c(),e=dt()},m(l,c){S(l,t,c),S(l,n,c),i&&i.m(l,c),S(l,e,c),o=!0},p(l,c){var u;(!o||16&c)&&s!==(s=l[4].toolUseState.phase===$t.running?"Editing file...":"Edited file")&&ht(t,s),!((u=l[3])!=null&&u.enableErgonomicsUpdate)&&l[5]?i?(i.p(l,c),40&c&&f(i,1)):(i=vm(l),i.c(),f(i,1),i.m(e.parentNode,e)):i&&(Y(),m(i,1,1,()=>{i=null}),X())},i(l){o||(f(i),o=!0)},o(l){m(i),o=!1},d(l){l&&(v(t),v(n),v(e)),i&&i.d(l)}}}function lz(r){let t,n=r[4].toolUseInput.edit_summary??r[4].toolUseState.phase===$t.running?"Reading file...":r[0]&&r[1]?`Read lines ${r[0]}-${r[1]}`:"Read file";return{c(){t=W(n)},m(e,o){S(e,t,o)},p(e,o){19&o&&n!==(n=e[4].toolUseInput.edit_summary??e[4].toolUseState.phase===$t.running?"Reading file...":e[0]&&e[1]?`Read lines ${e[0]}-${e[1]}`:"Read file")&&ht(t,n)},i:H,o:H,d(e){e&&v(t)}}}function vm(r){let t,n;return t=new yp({props:{requestId:r[4].requestId}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};16&o&&(s.requestId=e[4].requestId),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function cz(r){let t,n,e,o;const s=[lz,az],i=[];function a(l,c){return l[4].toolUseInput.command==="view"?0:1}return t=a(r),n=i[t]=s[t](r),{c(){n.c(),e=dt()},m(l,c){i[t].m(l,c),S(l,e,c),o=!0},p(l,c){let u=t;t=a(l),t===u?i[t].p(l,c):(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),n=i[t],n?n.p(l,c):(n=i[t]=s[t](l),n.c()),f(n,1),n.m(e.parentNode,e))},i(l){o||(f(n),o=!0)},o(l){m(n),o=!1},d(l){l&&v(e),i[t].d(l)}}}function uz(r){var e;let t,n;return t=new yt({props:{size:(e=r[3])!=null&&e.enableErgonomicsUpdate?1:2,class:"c-strreplace__header__secondary",$$slots:{default:[cz]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(o,s){k(t,o,s),n=!0},p(o,[s]){var a;const i={};8&s&&(i.size=(a=o[3])!=null&&a.enableErgonomicsUpdate?1:2),571&s&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){C(t,o)}}}function hz(r,t,n){let e,o,s,i,a=H;r.$$.on_destroy.push(()=>a());const l=Rn();Vt(r,l,p=>n(4,s=p));const c=Fy().collapsed;Vt(r,c,p=>n(5,i=p));let{start:u}=t,{stop:h}=t;const d=Jt("chatModel");return r.$$set=p=>{"start"in p&&n(0,u=p.start),"stop"in p&&n(1,h=p.stop)},n(2,e=d==null?void 0:d.flags),a(),a=An(e,p=>n(3,o=p)),[u,h,e,o,s,i,l,c]}class e_ extends nt{constructor(t){super(),rt(this,t,hz,uz,ot,{start:0,stop:1})}}function dz(r){let t,n,e;function o(i){r[8](i)}let s={showToolOutput:r[0].command==="str_replace",$$slots:{details:[_z],header:[vz],default:[fz]},$$scope:{ctx:r}};return r[2]!==void 0&&(s.collapsed=r[2]),t=new Me({props:s}),Pt.push(()=>re(t,"collapsed",o)),{c(){_(t.$$.fragment)},m(i,a){k(t,i,a),e=!0},p(i,a){const l={};1&a&&(l.showToolOutput=i[0].command==="str_replace"),1039&a&&(l.$$scope={dirty:a,ctx:i}),!n&&4&a&&(n=!0,l.collapsed=i[2],oe(()=>n=!1)),t.$set(l)},i(i){e||(f(t.$$.fragment,i),e=!0)},o(i){m(t.$$.fragment,i),e=!1},d(i){C(t,i)}}}function pz(r){let t,n,e;function o(i){r[7](i)}let s={showToolOutput:r[0].command==="str_replace",$$slots:{details:[Iz],header:[Bz],default:[kz]},$$scope:{ctx:r}};return r[2]!==void 0&&(s.collapsed=r[2]),t=new Me({props:s}),Pt.push(()=>re(t,"collapsed",o)),{c(){_(t.$$.fragment)},m(i,a){k(t,i,a),e=!0},p(i,a){const l={};1&a&&(l.showToolOutput=i[0].command==="str_replace"),1071&a&&(l.$$scope={dirty:a,ctx:i}),!n&&4&a&&(n=!0,l.collapsed=i[2],oe(()=>n=!1)),t.$set(l)},i(i){e||(f(t.$$.fragment,i),e=!0)},o(i){m(t.$$.fragment,i),e=!1},d(i){C(t,i)}}}function _m(r){let t,n;const e=[{slot:"error"},r[1].result??{}];let o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return t=new To({props:o}),{c(){_(t.$$.fragment)},m(s,i){k(t,s,i),n=!0},p(s,i){const a=2&i?Zt(e,[e[0],Ze(s[1].result??{})]):{};t.$set(a)},i(s){n||(f(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){C(t,s)}}}function fz(r){let t,n,e=r[1].phase===$t.error&&_m(r);return{c(){e&&e.c(),t=dt()},m(o,s){e&&e.m(o,s),S(o,t,s),n=!0},p(o,s){o[1].phase===$t.error?e?(e.p(o,s),2&s&&f(e,1)):(e=_m(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d(o)}}}function gz(r){let t,n;return t=new bc({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function mz(r){let t,n;return t=new Ry({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function $z(r){let t,n,e,o;const s=[mz,gz],i=[];function a(l,c){return l[0].command==="str_replace"?0:1}return n=a(r),e=i[n]=s[n](r),{c(){t=I("span"),e.c(),T(t,"slot","icon"),Ge(t,"display","contents")},m(l,c){S(l,t,c),i[n].m(t,null),o=!0},p(l,c){let u=n;n=a(l),n!==u&&(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),e=i[n],e||(e=i[n]=s[n](l),e.c()),f(e,1),e.m(t,null))},i(l){o||(f(e),o=!0)},o(l){m(e),o=!1},d(l){l&&v(t),i[n].d()}}}function yz(r){let t,n;const e=[{slot:"toolName"},ko(r[0])];let o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return t=new e_({props:o}),{c(){_(t.$$.fragment)},m(s,i){k(t,s,i),n=!0},p(s,i){const a=1&i?Zt(e,[e[0],Ze(ko(s[0]))]):{};t.$set(a)},i(s){n||(f(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){C(t,s)}}}function xz(r){let t,n;return t=new So({props:{slot:"secondary",filepath:r[3]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8&o&&(s.filepath=e[3]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function bz(r){let t,n;const e=[{slot:"toolAction"},{path:r[2]&&r[1].phase===$t.completed?r[3]:void 0},ko(r[0])];let o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return t=new Ko({props:o}),{c(){_(t.$$.fragment)},m(s,i){k(t,s,i),n=!0},p(s,i){const a=15&i?Zt(e,[e[0],14&i&&{path:s[2]&&s[1].phase===$t.completed?s[3]:void 0},1&i&&Ze(ko(s[0]))]):{};t.$set(a)},i(s){n||(f(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){C(t,s)}}}function wz(r){let t,n,e;return n=new rs({}),{c(){t=I("div"),_(n.$$.fragment),T(t,"slot","toolStatus"),T(t,"class","c-str-replace__tool-status svelte-1oz836m")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p:H,i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function vz(r){let t,n;return t=new Te({props:{slot:"header",$$slots:{toolStatus:[wz],toolAction:[bz],secondary:[xz],toolName:[yz],icon:[$z]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1039&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function km(r){let t,n;return t=new t_({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function _z(r){let t,n,e=r[1].phase===$t.completed&&km();return{c(){t=I("div"),e&&e.c(),T(t,"slot","details"),T(t,"class","c-str-replace__details svelte-1oz836m")},m(o,s){S(o,t,s),e&&e.m(t,null),n=!0},p(o,s){o[1].phase===$t.completed?e?2&s&&f(e,1):(e=km(),e.c(),f(e,1),e.m(t,null)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d()}}}function Cm(r){let t,n;const e=[{slot:"error"},r[1].result??{}];let o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return t=new To({props:o}),{c(){_(t.$$.fragment)},m(s,i){k(t,s,i),n=!0},p(s,i){const a=2&i?Zt(e,[e[0],Ze(s[1].result??{})]):{};t.$set(a)},i(s){n||(f(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){C(t,s)}}}function kz(r){let t,n,e=r[1].phase===$t.error&&Cm(r);return{c(){e&&e.c(),t=dt()},m(o,s){e&&e.m(o,s),S(o,t,s),n=!0},p(o,s){o[1].phase===$t.error?e?(e.p(o,s),2&s&&f(e,1)):(e=Cm(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d(o)}}}function Cz(r){let t,n;return t=new bc({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Sz(r){let t,n;return t=new Ry({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Tz(r){let t,n,e,o;const s=[Sz,Cz],i=[];function a(l,c){return l[0].command==="str_replace"?0:1}return n=a(r),e=i[n]=s[n](r),{c(){t=I("span"),e.c(),T(t,"slot","icon"),Ge(t,"display","contents")},m(l,c){S(l,t,c),i[n].m(t,null),o=!0},p(l,c){let u=n;n=a(l),n!==u&&(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),e=i[n],e||(e=i[n]=s[n](l),e.c()),f(e,1),e.m(t,null))},i(l){o||(f(e),o=!0)},o(l){m(e),o=!1},d(l){l&&v(t),i[n].d()}}}function Mz(r){let t,n;const e=[{slot:"toolName"},ko(r[0])];let o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return t=new e_({props:o}),{c(){_(t.$$.fragment)},m(s,i){k(t,s,i),n=!0},p(s,i){const a=1&i?Zt(e,[e[0],Ze(ko(s[0]))]):{};t.$set(a)},i(s){n||(f(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){C(t,s)}}}function Az(r){let t,n;const e=[{slot:"middleIcon"},{path:r[2]&&r[1].phase===$t.completed?r[3]:void 0},ko(r[0])];let o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return t=new Ko({props:o}),{c(){_(t.$$.fragment)},m(s,i){k(t,s,i),n=!0},p(s,i){const a=15&i?Zt(e,[e[0],14&i&&{path:s[2]&&s[1].phase===$t.completed?s[3]:void 0},1&i&&Ze(ko(s[0]))]):{};t.$set(a)},i(s){n||(f(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){C(t,s)}}}function Lz(r){let t,n;return t=new So({props:{slot:"secondary",filepath:r[3],$$slots:{middleIcon:[Az]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8&o&&(s.filepath=e[3]),1039&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Ez(r){let t,n,e,o,s;return n=new yp({props:{requestId:r[5].requestId}}),o=new rs({}),{c(){t=I("div"),_(n.$$.fragment),e=J(),_(o.$$.fragment),T(t,"slot","toolStatus"),T(t,"class","c-str-replace__tool-status svelte-1oz836m")},m(i,a){S(i,t,a),k(n,t,null),O(t,e),k(o,t,null),s=!0},p(i,a){const l={};32&a&&(l.requestId=i[5].requestId),n.$set(l)},i(i){s||(f(n.$$.fragment,i),f(o.$$.fragment,i),s=!0)},o(i){m(n.$$.fragment,i),m(o.$$.fragment,i),s=!1},d(i){i&&v(t),C(n),C(o)}}}function Bz(r){let t,n;return t=new Te({props:{slot:"header",$$slots:{toolStatus:[Ez],secondary:[Lz],toolName:[Mz],icon:[Tz]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1071&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Sm(r){let t,n;return t=new t_({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Iz(r){let t,n,e=r[1].phase===$t.completed&&Sm();return{c(){t=I("div"),e&&e.c(),T(t,"slot","details"),T(t,"class","c-str-replace__details svelte-1oz836m")},m(o,s){S(o,t,s),e&&e.m(t,null),n=!0},p(o,s){o[1].phase===$t.completed?e?2&s&&f(e,1):(e=Sm(),e.c(),f(e,1),e.m(t,null)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d()}}}function Fz(r){let t,n,e,o;const s=[pz,dz],i=[];function a(l,c){return l[4].enableErgonomicsUpdate?0:1}return t=a(r),n=i[t]=s[t](r),{c(){n.c(),e=dt()},m(l,c){i[t].m(l,c),S(l,e,c),o=!0},p(l,[c]){let u=t;t=a(l),t===u?i[t].p(l,c):(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),n=i[t],n?n.p(l,c):(n=i[t]=s[t](l),n.c()),f(n,1),n.m(e.parentNode,e))},i(l){o||(f(n),o=!0)},o(l){m(n),o=!1},d(l){l&&v(e),i[t].d(l)}}}function ko(r){return r.view_range&&Array.isArray(r.view_range)?{start:r.view_range[0],stop:r.view_range[1]}:{start:0,stop:0}}function Dz(r,t,n){let e,o;const s=Rn();Vt(r,s,h=>n(5,o=h));let i,{toolUseInput:a={}}=t,{toolUseState:l}=t,c=!0;const u=Jt("chatModel");return r.$$set=h=>{"toolUseInput"in h&&n(0,a=h.toolUseInput),"toolUseState"in h&&n(1,l=h.toolUseState)},r.$$.update=()=>{1&r.$$.dirty&&n(3,i=Fe(a.path||a.file_path,""))},n(4,e=u==null?void 0:u.flags),[a,l,c,i,e,o,s,function(h){c=h,n(2,c)},function(h){c=h,n(2,c)}]}class n_ extends nt{constructor(t){super(),rt(this,t,Dz,Fz,ot,{toolUseInput:0,toolUseState:1})}}function Oz(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},r[0]],o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return{c(){t=Bt("svg"),n=new Oe(!0),this.h()},l(s){t=ze(s,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Ne(t);n=Re(i,!0),i.forEach(v),this.h()},h(){n.a=null,Ht(t,o)},m(s,i){Pe(s,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M256 464c7.4 0 27-7.2 47.6-48.4 8.8-17.7 16.4-39.2 22-63.6H186.4c5.6 24.4 13.2 45.9 22 63.6C229 456.8 248.6 464 256 464m-77.5-160h155c1.6-15.3 2.5-31.4 2.5-48s-.9-32.7-2.5-48h-155c-1.6 15.3-2.5 31.4-2.5 48s.9 32.7 2.5 48m7.9-144h139.2c-5.6-24.4-13.2-45.9-22-63.6C283 55.2 263.4 48 256 48s-27 7.2-47.6 48.4c-8.8 17.7-16.4 39.2-22 63.6m195.3 48c1.5 15.5 2.2 31.6 2.2 48s-.8 32.5-2.2 48h76.7c3.6-15.4 5.6-31.5 5.6-48s-1.9-32.6-5.6-48zm58.8-48c-21.4-41.1-56.1-74.1-98.4-93.4 14.1 25.6 25.3 57.5 32.6 93.4h65.9zm-303.3 0c7.3-35.9 18.5-67.7 32.6-93.4-42.3 19.3-77 52.3-98.4 93.4h65.9zm-83.6 48C50 223.4 48 239.5 48 256s1.9 32.6 5.6 48h76.7c-1.5-15.5-2.2-31.6-2.2-48s.8-32.5 2.2-48zm288.5 237.4c42.3-19.3 77-52.3 98.4-93.4h-65.9c-7.3 35.9-18.5 67.7-32.6 93.4zm-172.2 0c-14.1-25.6-25.3-57.5-32.6-93.4H71.4c21.4 41.1 56.1 74.1 98.4 93.4zM256 512a256 256 0 1 1 0-512 256 256 0 1 1 0 512"/>',t)},p(s,[i]){Ht(t,o=Zt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&s[0]]))},i:H,o:H,d(s){s&&v(t)}}}function zz(r,t,n){return r.$$set=e=>{n(0,t=lt(lt({},t),jt(e)))},[t=jt(t)]}class Nz extends nt{constructor(t){super(),rt(this,t,zz,Oz,ot,{})}}function Tm(r){let t,n;return t=new xe({props:{variant:"ghost-block",color:"neutral",size:1,$$slots:{default:[Rz]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Rz(r){let t,n;return t=new la({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Pz(r){let t,n,e,o=r[1]&&Tm(r);return{c(){t=I("span"),o&&o.c(),T(t,"class",n="c-open-link-button c-open-link-button__size--"+r[0]+" svelte-18hs75r")},m(s,i){S(s,t,i),o&&o.m(t,null),e=!0},p(s,[i]){s[1]?o?(o.p(s,i),2&i&&f(o,1)):(o=Tm(s),o.c(),f(o,1),o.m(t,null)):o&&(Y(),m(o,1,1,()=>{o=null}),X()),(!e||1&i&&n!==(n="c-open-link-button c-open-link-button__size--"+s[0]+" svelte-18hs75r"))&&T(t,"class",n)},i(s){e||(f(o),e=!0)},o(s){m(o),e=!1},d(s){s&&v(t),o&&o.d()}}}function Uz(r,t,n){let{size:e=0}=t,{href:o}=t;return r.$$set=s=>{"size"in s&&n(0,e=s.size),"href"in s&&n(1,o=s.href)},[e,o,function(s){s==null||s.preventDefault(),s==null||s.stopPropagation(),xl.postMessage({type:Ee.augmentLink,data:o})}]}class r_ extends nt{constructor(t){super(),rt(this,t,Uz,Pz,ot,{size:0,href:1})}}function qz(r){let t,n;return t=new Nz({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function jz(r){let t,n;return t=new r_({props:{slot:"toolAction",href:r[3]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8&o&&(s.href=e[3]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Wz(r){let t,n;return t=new Te({props:{slot:"header",toolName:r[2],formattedToolArgs:[r[5](r[1].phase,r[4])],$$slots:{toolAction:[jz],icon:[qz]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};4&o&&(s.toolName=e[2]),18&o&&(s.formattedToolArgs=[e[5](e[1].phase,e[4])]),136&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Hz(r){let t,n;return t=new Kr({props:{size:1,class:"c-web-fetch-favicon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Vz(r){let t,n,e,o={ctx:r,current:null,token:null,hasCatch:!1,pending:Yz,then:Zz,catch:Gz,value:6,blocks:[,,,]};return Is(n=Am(r[4]||""),o),{c(){t=dt(),o.block.c()},m(s,i){S(s,t,i),o.block.m(s,o.anchor=i),o.mount=()=>t.parentNode,o.anchor=t,e=!0},p(s,i){r=s,o.ctx=r,16&i&&n!==(n=Am(r[4]||""))&&Is(n,o)||cd(o,r,i)},i(s){e||(f(o.block),e=!0)},o(s){for(let i=0;i<3;i+=1){const a=o.blocks[i];m(a)}e=!1},d(s){s&&v(t),o.block.d(s),o.token=null,o=null}}}function Gz(r){return{c:H,m:H,p:H,i:H,o:H,d:H}}function Zz(r){let t,n,e,o,s;return{c(){t=I("img"),bl(t.src,n=r[6])||T(t,"src",n),T(t,"alt",e="Website favicon "+r[6])},m(i,a){S(i,t,a),o||(s=[Kt(t,"load",onload),Kt(t,"error",onerror)],o=!0)},p(i,a){16&a&&!bl(t.src,n=i[6])&&T(t,"src",n),16&a&&e!==(e="Website favicon "+i[6])&&T(t,"alt",e)},i:H,o:H,d(i){i&&v(t),o=!1,Qr(s)}}}function Yz(r){let t,n;return t=new Kr({props:{size:1,class:"c-web-fetch-favicon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Xz(r){let t,n,e,o,s,i,a,l,c=(r[0].url||"")+"";const u=[Vz,Hz],h=[];function d(p,g){return p[4]?0:1}return e=d(r),o=h[e]=u[e](r),{c(){t=I("div"),n=I("span"),o.c(),s=J(),i=I("span"),a=W(c),T(i,"class","c-web-fetch-url svelte-4xwdpt"),T(n,"class","c-web-fetch-favicon-container svelte-4xwdpt"),T(t,"class","c-web-fetch-container svelte-4xwdpt"),T(t,"slot","details")},m(p,g){S(p,t,g),O(t,n),h[e].m(n,null),O(n,s),O(n,i),O(i,a),l=!0},p(p,g){let $=e;e=d(p),e===$?h[e].p(p,g):(Y(),m(h[$],1,1,()=>{h[$]=null}),X(),o=h[e],o?o.p(p,g):(o=h[e]=u[e](p),o.c()),f(o,1),o.m(n,s)),(!l||1&g)&&c!==(c=(p[0].url||"")+"")&&ht(a,c)},i(p){l||(f(o),l=!0)},o(p){m(o),l=!1},d(p){p&&v(t),h[e].d()}}}function Qz(r){let t,n;return t=new Me({props:{$$slots:{details:[Xz],header:[Wz]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};159&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Mm(r){try{return new URL(r).hostname}catch{return""}}async function Am(r){return new Promise((t,n)=>{const e=new Image,o=`https://www.google.com/s2/favicons?domain=${r}&sz=12`;o?(e.onload=()=>{t(o)},e.onerror=s=>{console.warn(s),n(s)},e.src=o):n(new Error("No favicon URL"))})}function Kz(r,t,n){let e,{toolUseInput:o={}}=t,{toolUseState:s}=t,{toolName:i}=t,a=Mm(e);return r.$$set=l=>{"toolUseInput"in l&&n(0,o=l.toolUseInput),"toolUseState"in l&&n(1,s=l.toolUseState),"toolName"in l&&n(2,i=l.toolName)},r.$$.update=()=>{1&r.$$.dirty&&n(3,e=Fe(o.url,"")),8&r.$$.dirty&&n(4,a=Mm(e))},[o,s,i,e,a,function(l,c){switch(l){case $t.running:return`Getting information from ${c}...`;case $t.error:return"Error";case $t.cancelled:return"Cancelled";case $t.runnable:return`Waiting for user approval to get ${c}`;case $t.completed:default:return""}}]}class o_ extends nt{constructor(t){super(),rt(this,t,Kz,Qz,ot,{toolUseInput:0,toolUseState:1,toolName:2})}}function Jz(r){let t,n;return t=new o_({props:{toolName:"Web Fetch",toolUseInput:r[0],toolUseState:r[1]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};1&o&&(s.toolUseInput=e[0]),2&o&&(s.toolUseState=e[1]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function tN(r,t,n){let{toolUseInput:e={}}=t,{toolUseState:o}=t;return r.$$set=s=>{"toolUseInput"in s&&n(0,e=s.toolUseInput),"toolUseState"in s&&n(1,o=s.toolUseState)},[e,o]}function eN(r){let t,n;return t=new o_({props:{toolName:"Open in Browser",toolUseInput:r[0],toolUseState:r[1]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};1&o&&(s.toolUseInput=e[0]),2&o&&(s.toolUseState=e[1]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function nN(r,t,n){let{toolUseInput:e={}}=t,{toolUseState:o}=t;return r.$$set=s=>{"toolUseInput"in s&&n(0,e=s.toolUseInput),"toolUseState"in s&&n(1,o=s.toolUseState)},[e,o]}function rN(r){let t,n,e;return n=new Mk({}),{c(){t=I("span"),_(n.$$.fragment),T(t,"slot","icon"),T(t,"class","c-tool-codebase-retrieval__header__icon svelte-1j61vah")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p:H,i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function oN(r){let t,n=(r[0].information_request||r[0].query||"")+"";return{c(){t=W(n)},m(e,o){S(e,t,o)},p(e,o){1&o&&n!==(n=(e[0].information_request||e[0].query||"")+"")&&ht(t,n)},d(e){e&&v(t)}}}function sN(r){let t,n,e;return n=new ya({props:{maxHeight:40,showOnHover:!0,overflowThreshold:0,$$slots:{default:[oN]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"slot","secondary"),T(t,"class","c-tool-codebase-retrieval__secondary svelte-1j61vah")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};3&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function iN(r){let t,n;return t=new Te({props:{slot:"header",class:"c-tool-codebase-retrieval__header",toolName:"Augment Context Engine",$$slots:{secondary:[sN],icon:[rN]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};3&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function aN(r){let t,n;return t=new Me({props:{showToolOutput:!1,$$slots:{header:[iN]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};3&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function lN(r,t,n){let{toolUseInput:e={}}=t;return r.$$set=o=>{"toolUseInput"in o&&n(0,e=o.toolUseInput)},[e]}class s_ extends nt{constructor(t){super(),rt(this,t,lN,aN,ot,{toolUseInput:0})}}function Lm(r,t,n){const e=r.slice();return e[2]=t[n],e}function cN(r){let t,n;return t=new ik({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Em(r,t){let n,e,o;return e=new So({props:{filepath:t[2]}}),{key:r,first:null,c(){n=dt(),_(e.$$.fragment),this.first=n},m(s,i){S(s,n,i),k(e,s,i),o=!0},p(s,i){t=s;const a={};1&i&&(a.filepath=t[2]),e.$set(a)},i(s){o||(f(e.$$.fragment,s),o=!0)},o(s){m(e.$$.fragment,s),o=!1},d(s){s&&v(n),C(e,s)}}}function uN(r){let t,n,e=[],o=new Map,s=Gt(r[0]);const i=a=>a[2];for(let a=0;a<s.length;a+=1){let l=Lm(r,s,a),c=i(l);o.set(c,e[a]=Em(c,l))}return{c(){t=I("span");for(let a=0;a<e.length;a+=1)e[a].c();T(t,"slot","secondary")},m(a,l){S(a,t,l);for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(t,null);n=!0},p(a,l){1&l&&(s=Gt(a[0]),Y(),e=rd(e,l,i,1,a,s,o,t,od,Em,null,Lm),X())},i(a){if(!n){for(let l=0;l<s.length;l+=1)f(e[l]);n=!0}},o(a){for(let l=0;l<e.length;l+=1)m(e[l]);n=!1},d(a){a&&v(t);for(let l=0;l<e.length;l+=1)e[l].d()}}}function hN(r){let t,n;return t=new Te({props:{slot:"header",toolName:"Remove",$$slots:{secondary:[uN],icon:[cN]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};33&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function dN(r){let t,n;return t=new Me({props:{showToolOutput:!1,$$slots:{header:[hN]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};33&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function pN(r,t,n){let e,{toolUseInput:o={}}=t;return r.$$set=s=>{"toolUseInput"in s&&n(1,o=s.toolUseInput)},r.$$.update=()=>{2&r.$$.dirty&&n(0,e=Array.isArray(o.file_paths)?o.file_paths.filter(s=>typeof s=="string"):[])},[e,o]}function fN(r){let t,n;return{c(){t=Bt("svg"),n=Bt("path"),T(n,"d","M14.5 3H7.70996L6.85999 2.15002L6.51001 2H1.51001L1.01001 2.5V6.5V13.5L1.51001 14H14.51L15.01 13.5V9V3.5L14.5 3ZM13.99 11.49V13H1.98999V11.49V7.48999V7H6.47998L6.82996 6.84998L7.68994 5.98999H14V7.48999L13.99 11.49ZM13.99 5H7.48999L7.14001 5.15002L6.28003 6.01001H2V3.01001H6.29004L7.14001 3.85999L7.5 4.01001H14L13.99 5Z"),T(n,"fill","#C5C5C5"),T(t,"width","16"),T(t,"height","16"),T(t,"viewBox","0 0 16 16"),T(t,"fill","none"),T(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){S(e,t,o),O(t,n)},p:H,i:H,o:H,d(e){e&&v(t)}}}class gN extends nt{constructor(t){super(),rt(this,t,null,fN,ot,{})}}function mN(r){let t,n,e,o;return{c(){t=W("Read lines "),n=W(r[0]),e=W("-"),o=W(r[1])},m(s,i){S(s,t,i),S(s,n,i),S(s,e,i),S(s,o,i)},p(s,i){1&i&&ht(n,s[0]),2&i&&ht(o,s[1])},d(s){s&&(v(t),v(n),v(e),v(o))}}}function $N(r){let t;return{c(){t=W("Read file")},m(n,e){S(n,t,e)},p:H,d(n){n&&v(t)}}}function yN(r){let t;return{c(){t=W("Read rules file")},m(n,e){S(n,t,e)},p:H,d(n){n&&v(t)}}}function xN(r){let t,n,e,o,s,i=r[4]&&Bm();return{c(){t=W("Search for: "),n=I("code"),e=W(r[3]),o=J(),i&&i.c(),s=dt(),T(n,"class","svelte-foaz2q")},m(a,l){S(a,t,l),S(a,n,l),O(n,e),S(a,o,l),i&&i.m(a,l),S(a,s,l)},p(a,l){8&l&&ht(e,a[3]),a[4]?i||(i=Bm(),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null)},d(a){a&&(v(t),v(n),v(o),v(s)),i&&i.d(a)}}}function bN(r){let t;return{c(){t=W("Read directory")},m(n,e){S(n,t,e)},p:H,d(n){n&&v(t)}}}function wN(r){let t;function n(s,i){return s[3]?CN:s[2]?kN:s[5]?_N:vN}let e=n(r),o=e(r);return{c(){o.c(),t=dt()},m(s,i){o.m(s,i),S(s,t,i)},p(s,i){e!==(e=n(s))&&(o.d(1),o=e(s),o&&(o.c(),o.m(t.parentNode,t)))},d(s){s&&v(t),o.d(s)}}}function Bm(r){let t;return{c(){t=I("span"),t.textContent="(case-sensitive)",T(t,"class","case-sensitive svelte-foaz2q")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function vN(r){let t;return{c(){t=W("Reading file...")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function _N(r){let t;return{c(){t=W("Reading rules file...")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function kN(r){let t;return{c(){t=W("Reading directory...")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function CN(r){let t;return{c(){t=W("Searching for pattern...")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function SN(r){let t;function n(s,i){return s[8].toolUseState.phase<=$t.running?wN:s[2]?bN:s[3]?xN:s[5]?yN:s[0]&&s[1]?mN:$N}let e=n(r),o=e(r);return{c(){o.c(),t=dt()},m(s,i){o.m(s,i),S(s,t,i)},p(s,i){e===(e=n(s))&&o?o.p(s,i):(o.d(1),o=e(s),o&&(o.c(),o.m(t.parentNode,t)))},d(s){s&&v(t),o.d(s)}}}function TN(r){var e;let t,n;return t=new yt({props:{size:(e=r[7])!=null&&e.enableErgonomicsUpdate?1:2,class:"c-strreplace__header__secondary",$$slots:{default:[SN]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(o,s){k(t,o,s),n=!0},p(o,[s]){var a;const i={};128&s&&(i.size=(a=o[7])!=null&&a.enableErgonomicsUpdate?1:2),2367&s&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){C(t,o)}}}function MN(r,t,n){let e,o,s,i=H;r.$$.on_destroy.push(()=>i());const a=Rn();Vt(r,a,$=>n(8,s=$));let{start:l}=t,{stop:c}=t,{isDirectory:u=!1}=t,{searchQueryRegex:h}=t,{caseSensitive:d=!1}=t,{isRulesFile:p=!1}=t;const g=Jt("chatModel");return r.$$set=$=>{"start"in $&&n(0,l=$.start),"stop"in $&&n(1,c=$.stop),"isDirectory"in $&&n(2,u=$.isDirectory),"searchQueryRegex"in $&&n(3,h=$.searchQueryRegex),"caseSensitive"in $&&n(4,d=$.caseSensitive),"isRulesFile"in $&&n(5,p=$.isRulesFile)},n(6,e=g==null?void 0:g.flags),i(),i=An(e,$=>n(7,o=$)),[l,c,u,h,d,p,e,o,s,a]}class AN extends nt{constructor(t){super(),rt(this,t,MN,TN,ot,{start:0,stop:1,isDirectory:2,searchQueryRegex:3,caseSensitive:4,isRulesFile:5})}}function Im(r){let t,n,e,o,s=r[4]&&Fm(r),i=r[0]&&Dm(r);return{c(){t=I("div"),n=I("div"),s&&s.c(),e=J(),i&&i.c(),T(n,"class","c-view-tool-use-details__content svelte-13h89id"),T(t,"class","c-view-tool-use-details svelte-13h89id")},m(a,l){S(a,t,l),O(t,n),s&&s.m(n,null),O(n,e),i&&i.m(n,null),o=!0},p(a,l){a[4]?s?(s.p(a,l),16&l&&f(s,1)):(s=Fm(a),s.c(),f(s,1),s.m(n,e)):s&&(Y(),m(s,1,1,()=>{s=null}),X()),a[0]?i?(i.p(a,l),1&l&&f(i,1)):(i=Dm(a),i.c(),f(i,1),i.m(n,null)):i&&(Y(),m(i,1,1,()=>{i=null}),X())},i(a){o||(f(s),f(i),o=!0)},o(a){m(s),m(i),o=!1},d(a){a&&v(t),s&&s.d(),i&&i.d()}}}function Fm(r){let t,n,e,o,s,i,a,l,c,u,h,d,p,g,$,b;return n=new yt({props:{size:1,color:"secondary",class:"c-view-tool-use-details__label",$$slots:{default:[LN]},$$scope:{ctx:r}}}),l=new yt({props:{size:1,color:"secondary",class:"c-view-tool-use-details__label",$$slots:{default:[EN]},$$scope:{ctx:r}}}),u=new yt({props:{size:1,class:"c-view-tool-use-details__value",$$slots:{default:[BN]},$$scope:{ctx:r}}}),p=new yt({props:{size:1,color:"secondary",class:"c-view-tool-use-details__label",$$slots:{default:[IN]},$$scope:{ctx:r}}}),$=new yt({props:{size:1,class:"c-view-tool-use-details__value",$$slots:{default:[FN]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),e=J(),o=I("code"),s=W(r[4]),i=J(),a=I("div"),_(l.$$.fragment),c=J(),_(u.$$.fragment),h=J(),d=I("div"),_(p.$$.fragment),g=J(),_($.$$.fragment),T(o,"class","c-view-tool-use-details__value svelte-13h89id"),T(t,"class","c-view-tool-use-details__section svelte-13h89id"),T(a,"class","c-view-tool-use-details__section svelte-13h89id"),T(d,"class","c-view-tool-use-details__section svelte-13h89id")},m(y,x){S(y,t,x),k(n,t,null),O(t,e),O(t,o),O(o,s),S(y,i,x),S(y,a,x),k(l,a,null),O(a,c),k(u,a,null),S(y,h,x),S(y,d,x),k(p,d,null),O(d,g),k($,d,null),b=!0},p(y,x){const M={};256&x&&(M.$$scope={dirty:x,ctx:y}),n.$set(M),(!b||16&x)&&ht(s,y[4]);const L={};256&x&&(L.$$scope={dirty:x,ctx:y}),l.$set(L);const A={};264&x&&(A.$$scope={dirty:x,ctx:y}),u.$set(A);const B={};256&x&&(B.$$scope={dirty:x,ctx:y}),p.$set(B);const E={};262&x&&(E.$$scope={dirty:x,ctx:y}),$.$set(E)},i(y){b||(f(n.$$.fragment,y),f(l.$$.fragment,y),f(u.$$.fragment,y),f(p.$$.fragment,y),f($.$$.fragment,y),b=!0)},o(y){m(n.$$.fragment,y),m(l.$$.fragment,y),m(u.$$.fragment,y),m(p.$$.fragment,y),m($.$$.fragment,y),b=!1},d(y){y&&(v(t),v(i),v(a),v(h),v(d)),C(n),C(l),C(u),C(p),C($)}}}function LN(r){let t;return{c(){t=W("Search Pattern")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function EN(r){let t;return{c(){t=W("Case Sensitive")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function BN(r){let t,n=r[3]?"Yes":"No";return{c(){t=W(n)},m(e,o){S(e,t,o)},p(e,o){8&o&&n!==(n=e[3]?"Yes":"No")&&ht(t,n)},d(e){e&&v(t)}}}function IN(r){let t;return{c(){t=W("Context Lines")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function FN(r){let t,n,e,o;return{c(){t=W(r[2]),n=W(" before, "),e=W(r[1]),o=W(" after")},m(s,i){S(s,t,i),S(s,n,i),S(s,e,i),S(s,o,i)},p(s,i){4&i&&ht(t,s[2]),2&i&&ht(e,s[1])},d(s){s&&(v(t),v(n),v(e),v(o))}}}function Dm(r){let t,n,e,o,s;return n=new yt({props:{size:1,color:"secondary",class:"c-view-tool-use-details__label",$$slots:{default:[DN]},$$scope:{ctx:r}}}),o=new yt({props:{size:1,class:"c-view-tool-use-details__value",$$slots:{default:[ON]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),e=J(),_(o.$$.fragment),T(t,"class","c-view-tool-use-details__section svelte-13h89id")},m(i,a){S(i,t,a),k(n,t,null),O(t,e),k(o,t,null),s=!0},p(i,a){const l={};256&a&&(l.$$scope={dirty:a,ctx:i}),n.$set(l);const c={};257&a&&(c.$$scope={dirty:a,ctx:i}),o.$set(c)},i(i){s||(f(n.$$.fragment,i),f(o.$$.fragment,i),s=!0)},o(i){m(n.$$.fragment,i),m(o.$$.fragment,i),s=!1},d(i){i&&v(t),C(n),C(o)}}}function DN(r){let t;return{c(){t=W("View Range")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function ON(r){let t,n,e,o,s=r[0][0]+"",i=(r[0][1]===-1?"end":r[0][1])+"";return{c(){t=W("Lines "),n=W(s),e=W(" to "),o=W(i)},m(a,l){S(a,t,l),S(a,n,l),S(a,e,l),S(a,o,l)},p(a,l){1&l&&s!==(s=a[0][0]+"")&&ht(n,s),1&l&&i!==(i=(a[0][1]===-1?"end":a[0][1])+"")&&ht(o,i)},d(a){a&&(v(t),v(n),v(e),v(o))}}}function zN(r){let t,n,e=(r[4]||r[0])&&Im(r);return{c(){e&&e.c(),t=dt()},m(o,s){e&&e.m(o,s),S(o,t,s),n=!0},p(o,[s]){o[4]||o[0]?e?(e.p(o,s),17&s&&f(e,1)):(e=Im(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d(o)}}}function NN(r,t,n){let e,o,s,i,a,l;const c=Rn();Vt(r,c,h=>n(7,l=h));let{toolUseInput:u=l.toolUseInput}=t;return r.$$set=h=>{"toolUseInput"in h&&n(6,u=h.toolUseInput)},r.$$.update=()=>{64&r.$$.dirty&&n(4,e=typeof u.search_query_regex=="string"?u.search_query_regex:void 0),64&r.$$.dirty&&n(3,o=typeof u.case_sensitive=="boolean"&&u.case_sensitive),64&r.$$.dirty&&n(2,s=typeof u.context_lines_before=="number"?u.context_lines_before:5),64&r.$$.dirty&&n(1,i=typeof u.context_lines_after=="number"?u.context_lines_after:5),64&r.$$.dirty&&n(0,a=u.view_range&&Array.isArray(u.view_range)&&(u.view_range[0]!==0||u.view_range[1]!==0)?u.view_range:void 0)},[a,i,s,o,e,c,u]}class RN extends nt{constructor(t){super(),rt(this,t,NN,zN,ot,{toolUseInput:6})}}const PN="Here's the result of running `cat -n`",UN="Total lines in file:";function Om(r){let t,n;const e=[{slot:"error"},r[1].result??{}];let o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return t=new To({props:o}),{c(){_(t.$$.fragment)},m(s,i){k(t,s,i),n=!0},p(s,i){const a=2&i?Zt(e,[e[0],Ze(s[1].result??{})]):{};t.$set(a)},i(s){n||(f(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){C(t,s)}}}function qN(r){let t,n,e=r[1].phase===$t.error&&Om(r);return{c(){e&&e.c(),t=dt()},m(o,s){e&&e.m(o,s),S(o,t,s),n=!0},p(o,s){o[1].phase===$t.error?e?(e.p(o,s),2&s&&f(e,1)):(e=Om(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d(o)}}}function jN(r){let t,n;return t=new bc({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function WN(r){let t,n;return t=new ak({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function HN(r){let t,n;return t=new gN({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function VN(r){let t,n,e,o;const s=[HN,WN,jN],i=[];function a(l,c){return l[5]?0:l[4]?1:2}return n=a(r),e=i[n]=s[n](r),{c(){t=I("span"),e.c(),T(t,"slot","icon")},m(l,c){S(l,t,c),i[n].m(t,null),o=!0},p(l,c){let u=n;n=a(l),n!==u&&(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),e=i[n],e||(e=i[n]=s[n](l),e.c()),f(e,1),e.m(t,null))},i(l){o||(f(e),o=!0)},o(l){m(e),o=!1},d(l){l&&v(t),i[n].d()}}}function GN(r){let t,n;const e=[{slot:"toolName"},fc(r[0]),{isDirectory:r[5]},{searchQueryRegex:ed(r[0])},{caseSensitive:Nm(r[0])},{isRulesFile:r[2]}];let o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return t=new AN({props:o}),{c(){_(t.$$.fragment)},m(s,i){k(t,s,i),n=!0},p(s,i){const a=37&i?Zt(e,[e[0],1&i&&Ze(fc(s[0])),32&i&&{isDirectory:s[5]},1&i&&{searchQueryRegex:ed(s[0])},1&i&&{caseSensitive:Nm(s[0])},4&i&&{isRulesFile:s[2]}]):{};t.$set(a)},i(s){n||(f(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){C(t,s)}}}function ZN(r){let t,n;return t=new So({props:{slot:"secondary",filepath:r[3]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8&o&&(s.filepath=e[3]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function zm(r){let t,n;const e=[{path:r[6]&&r[1].phase===$t.completed?r[3]:void 0},fc(r[0])];let o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return t=new Ko({props:o}),{c(){_(t.$$.fragment)},m(s,i){k(t,s,i),n=!0},p(s,i){const a=75&i?Zt(e,[74&i&&{path:s[6]&&s[1].phase===$t.completed?s[3]:void 0},1&i&&Ze(fc(s[0]))]):{};t.$set(a)},i(s){n||(f(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){C(t,s)}}}function YN(r){let t,n,e=!r[5]&&zm(r);return{c(){t=I("span"),e&&e.c(),T(t,"slot","toolAction")},m(o,s){S(o,t,s),e&&e.m(t,null),n=!0},p(o,s){o[5]?e&&(Y(),m(e,1,1,()=>{e=null}),X()):e?(e.p(o,s),32&s&&f(e,1)):(e=zm(o),e.c(),f(e,1),e.m(t,null))},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d()}}}function XN(r){let t,n,e;return n=new rs({}),{c(){t=I("div"),_(n.$$.fragment),T(t,"slot","toolStatus"),T(t,"class","c-view__tool-status svelte-1ocgj01")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p:H,i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function QN(r){let t,n;return t=new Te({props:{slot:"header",$$slots:{toolStatus:[XN],toolAction:[YN],secondary:[ZN],toolName:[GN],icon:[VN]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};639&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function KN(r){let t,n;return t=new RN({props:{toolUseInput:r[0]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1&o&&(s.toolUseInput=e[0]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function JN(r){let t,n;return t=new ya({props:{maxHeight:90,$$slots:{default:[tR]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};640&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function tR(r){let t,n;return t=new ld({props:{token:{text:r[7],lang:"text",type:"code",raw:r[7]}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};128&o&&(s.token={text:e[7],lang:"text",type:"code",raw:e[7]}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function eR(r){let t,n,e,o;const s=[JN,KN],i=[];function a(l,c){var u;return l[2]&&((u=l[1].result)!=null&&u.text)?0:1}return n=a(r),e=i[n]=s[n](r),{c(){t=I("div"),e.c(),T(t,"slot","details")},m(l,c){S(l,t,c),i[n].m(t,null),o=!0},p(l,c){let u=n;n=a(l),n===u?i[n].p(l,c):(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),e=i[n],e?e.p(l,c):(e=i[n]=s[n](l),e.c()),f(e,1),e.m(t,null))},i(l){o||(f(e),o=!0)},o(l){m(e),o=!1},d(l){l&&v(t),i[n].d()}}}function nR(r){let t,n,e;function o(i){r[8](i)}let s={showToolOutput:r[4]||r[2],$$slots:{details:[eR],header:[QN],default:[qN]},$$scope:{ctx:r}};return r[6]!==void 0&&(s.collapsed=r[6]),t=new Me({props:s}),Pt.push(()=>re(t,"collapsed",o)),{c(){_(t.$$.fragment)},m(i,a){k(t,i,a),e=!0},p(i,[a]){const l={};20&a&&(l.showToolOutput=i[4]||i[2]),767&a&&(l.$$scope={dirty:a,ctx:i}),!n&&64&a&&(n=!0,l.collapsed=i[6],oe(()=>n=!1)),t.$set(l)},i(i){e||(f(t.$$.fragment,i),e=!0)},o(i){m(t.$$.fragment,i),e=!1},d(i){C(t,i)}}}function fc(r){return r.view_range&&Array.isArray(r.view_range)?{start:r.view_range[0],stop:r.view_range[1]}:{start:0,stop:0}}function ed(r){return typeof r.search_query_regex=="string"?r.search_query_regex:void 0}function Nm(r){return typeof r.case_sensitive=="boolean"&&r.case_sensitive}function rR(r,t,n){let e,o,s,i,a,{toolUseInput:l={}}=t,{toolUseState:c}=t,u=!0;return r.$$set=h=>{"toolUseInput"in h&&n(0,l=h.toolUseInput),"toolUseState"in h&&n(1,c=h.toolUseState)},r.$$.update=()=>{var h;1&r.$$.dirty&&n(3,e=Fe(l.path||l.file_path,"")),1&r.$$.dirty&&n(5,o=l.type==="directory"),1&r.$$.dirty&&n(4,s=ed(l)!==void 0),58&r.$$.dirty&&n(2,i=!o&&!s&&function(d){if(!d)return!1;const p=d.replace(/\\/g,"/"),g=`${Wp}/${Hp}/`,$=`${Wp}\\${Hp}\\`;return p.includes(g)||p.includes($)}(e)&&c.phase===$t.completed),6&r.$$.dirty&&n(7,a=i&&((h=c.result)!=null&&h.text)?function(d){if(!d)return"";const p=d.split(`
`);let g=0,$=p.length;for(let x=0;x<p.length;x++){const M=p[x];if(M.startsWith(PN)&&(g=x+1),M.startsWith(UN)||M.trim()===""){$=x;break}}const b=p.slice(g,$).map(x=>{const M=x.match(/^\s*(\d+)\s+(.*)$/);return M?M[2]:x}),y=b.join(`
`).trim();return b_.extractContent(y)}(c.result.text):"")},[l,c,i,e,s,o,u,a,function(h){u=h,n(6,u)}]}function oR(r){let t,n;return t=new lk({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function sR(r){let t;return{c(){t=I("span"),t.textContent="Render Mermaid",T(t,"slot","toolName")},m(n,e){S(n,t,e)},p:H,d(n){n&&v(t)}}}function iR(r){let t,n;return{c(){t=I("span"),n=W(r[2]),T(t,"slot","secondary")},m(e,o){S(e,t,o),O(t,n)},p(e,o){4&o&&ht(n,e[2])},d(e){e&&v(t)}}}function aR(r){let t,n;return t=new Te({props:{slot:"header",$$slots:{secondary:[iR],toolName:[sR],icon:[oR]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};68&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function lR(r){let t,n,e;return n=new yt({props:{color:"error",$$slots:{default:[hR]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-mermaid-error svelte-ojidja")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};65&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function cR(r){let t,n,e;return n=new yt({props:{$$slots:{default:[dR]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-mermaid-loading svelte-ojidja")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};64&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function uR(r){let t,n,e;return n=new G3({props:{token:r[3],codeblockMetadata:void 0}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-mermaid-wrapper svelte-ojidja")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};8&s&&(i.token=o[3]),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function hR(r){var o;let t,n,e=(((o=r[0].result)==null?void 0:o.text)||"Unknown error")+"";return{c(){t=W("Error rendering Mermaid diagram: "),n=W(e)},m(s,i){S(s,t,i),S(s,n,i)},p(s,i){var a;1&i&&e!==(e=(((a=s[0].result)==null?void 0:a.text)||"Unknown error")+"")&&ht(n,e)},d(s){s&&(v(t),v(n))}}}function dR(r){let t;return{c(){t=W("Rendering Mermaid diagram...")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function pR(r){let t,n,e,o;const s=[uR,cR,lR],i=[];function a(l,c){return l[0].phase===$t.completed&&l[3]?0:l[0].phase===$t.running?1:l[0].phase===$t.error?2:-1}return~(n=a(r))&&(e=i[n]=s[n](r)),{c(){t=I("div"),e&&e.c(),T(t,"slot","details"),T(t,"class","c-mermaid-tool svelte-ojidja")},m(l,c){S(l,t,c),~n&&i[n].m(t,null),o=!0},p(l,c){let u=n;n=a(l),n===u?~n&&i[n].p(l,c):(e&&(Y(),m(i[u],1,1,()=>{i[u]=null}),X()),~n?(e=i[n],e?e.p(l,c):(e=i[n]=s[n](l),e.c()),f(e,1),e.m(t,null)):e=null)},i(l){o||(f(e),o=!0)},o(l){m(e),o=!1},d(l){l&&v(t),~n&&i[n].d()}}}function fR(r){let t,n,e;function o(i){r[5](i)}let s={showToolOutput:!0,$$slots:{details:[pR],header:[aR]},$$scope:{ctx:r}};return r[1]!==void 0&&(s.collapsed=r[1]),t=new Me({props:s}),Pt.push(()=>re(t,"collapsed",o)),{c(){_(t.$$.fragment)},m(i,a){k(t,i,a),e=!0},p(i,[a]){const l={};77&a&&(l.$$scope={dirty:a,ctx:i}),!n&&2&a&&(n=!0,l.collapsed=i[1],oe(()=>n=!1)),t.$set(l)},i(i){e||(f(t.$$.fragment,i),e=!0)},o(i){m(t.$$.fragment,i),e=!1},d(i){C(t,i)}}}function gR(r,t,n){let e,{toolUseInput:o}=t,{toolUseState:s}=t,i=!1,a="Mermaid Diagram";return r.$$set=l=>{"toolUseInput"in l&&n(4,o=l.toolUseInput),"toolUseState"in l&&n(0,s=l.toolUseState)},r.$$.update=()=>{if(16&r.$$.dirty&&o.diagram_definition){const l=o.diagram_definition+"";n(3,e={type:"code",lang:"mermaid",text:l,raw:"```mermaid\n"+l+"\n```"}),n(2,a=o.title||"Mermaid Diagram")}},[s,i,a,e,o,function(l){i=l,n(1,i)}]}function mR(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},r[0]],o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return{c(){t=Bt("svg"),n=new Oe(!0),this.h()},l(s){t=ze(s,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Ne(t);n=Re(i,!0),i.forEach(v),this.h()},h(){n.a=null,Ht(t,o)},m(s,i){Pe(s,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M448 224c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64C28.7 32 0 60.7 0 96v64c0 35.3 28.7 64 64 64zm16 128v64c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16v-64c0-8.8 7.2-16 16-16h384c8.8 0 16 7.2 16 16m48 64v-64c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v64c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64"/>',t)},p(s,[i]){Ht(t,o=Zt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&s[0]]))},i:H,o:H,d(s){s&&v(t)}}}function $R(r,t,n){return r.$$set=e=>{n(0,t=lt(lt({},t),jt(e)))},[t=jt(t)]}class yR extends nt{constructor(t){super(),rt(this,t,$R,mR,ot,{})}}function xR(r){let t,n,e;const o=r[5].default,s=Ot(o,r,r[4],null);return{c(){t=I("div"),s&&s.c(),T(t,"class",n=xo(r[1])+" svelte-1uzel5q"),T(t,"role","status"),T(t,"aria-label",r[0])},m(i,a){S(i,t,a),s&&s.m(t,null),e=!0},p(i,[a]){s&&s.p&&(!e||16&a)&&zt(s,o,i,i[4],e?Rt(o,i[4],a,null):Nt(i[4]),null),(!e||2&a&&n!==(n=xo(i[1])+" svelte-1uzel5q"))&&T(t,"class",n),(!e||1&a)&&T(t,"aria-label",i[0])},i(i){e||(f(s,i),e=!0)},o(i){m(s,i),e=!1},d(i){i&&v(t),s&&s.d(i)}}}function bR(r,t,n){let e,{$$slots:o={},$$scope:s}=t,{color:i="neutral"}=t,{size:a=1}=t,{weight:l="medium"}=t;return r.$$set=c=>{"color"in c&&n(0,i=c.color),"size"in c&&n(2,a=c.size),"weight"in c&&n(3,l=c.weight),"$$scope"in c&&n(4,s=c.$$scope)},r.$$.update=()=>{13&r.$$.dirty&&n(1,e=["c-status-badge",`c-status-badge--${i}`,`c-status-badge--size-${a}`,`c-text--size-${a}`,`c-text--weight-${l}`].join(" "))},[i,e,a,l,s,o]}class nr extends nt{constructor(t){super(),rt(this,t,bR,xR,ot,{color:0,size:2,weight:3})}}const wR=r=>({item:16&r}),Rm=r=>({item:r[4]}),vR=r=>({item:16&r}),Pm=r=>({item:r[4]}),_R=r=>({item:16&r}),Um=r=>({item:r[4]}),kR=r=>({item:16&r}),qm=r=>({item:r[4]});function jm(r){let t,n;const e=r[11].handle,o=Ot(e,r,r[22],qm);return{c(){t=I("div"),o&&o.c(),T(t,"class","c-draggable-list-item__handle svelte-1u76bcr")},m(s,i){S(s,t,i),o&&o.m(t,null),n=!0},p(s,i){o&&o.p&&(!n||4194320&i)&&zt(o,e,s,s[22],n?Rt(e,s[22],i,kR):Nt(s[22]),qm)},i(s){n||(f(o,s),n=!0)},o(s){m(o,s),n=!1},d(s){s&&v(t),o&&o.d(s)}}}function Wm(r){let t,n;return t=new xe({props:{class:"c-draggable-list-item__expand-collapse-button",size:1,variant:"ghost",color:"neutral","aria-expanded":r[0],"aria-label":r[0]?"Collapse":"Expand",$$slots:{default:[TR]},$$scope:{ctx:r}}}),t.$on("click",r[9]),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1&o&&(s["aria-expanded"]=e[0]),1&o&&(s["aria-label"]=e[0]?"Collapse":"Expand"),4194305&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function CR(r){let t,n;return t=new vy({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function SR(r){let t,n;return t=new pd({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function TR(r){let t,n,e,o;const s=[SR,CR],i=[];function a(l,c){return l[0]?0:1}return t=a(r),n=i[t]=s[t](r),{c(){n.c(),e=dt()},m(l,c){i[t].m(l,c),S(l,e,c),o=!0},p(l,c){let u=t;t=a(l),t!==u&&(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),n=i[t],n||(n=i[t]=s[t](l),n.c()),f(n,1),n.m(e.parentNode,e))},i(l){o||(f(n),o=!0)},o(l){m(n),o=!1},d(l){l&&v(e),i[t].d(l)}}}function MR(r){let t,n,e,o,s,i,a,l,c,u,h,d,p,g=r[10].handle&&jm(r),$=r[6]&&Wm(r);const b=r[11]["header-contents"],y=Ot(b,r,r[22],Um),x=r[11].actions,M=Ot(x,r,r[22],Pm),L=r[11].contents,A=Ot(L,r,r[22],Rm);return{c(){t=I("div"),n=I("div"),g&&g.c(),e=J(),$&&$.c(),o=J(),s=I("div"),y&&y.c(),i=J(),a=I("div"),M&&M.c(),l=J(),c=I("div"),A&&A.c(),T(s,"class","c-draggable-list-item__main svelte-1u76bcr"),T(a,"class","c-draggable-list-item__actions"),T(n,"class","c-draggable-list-item__content svelte-1u76bcr"),T(c,"class","c-draggable-list-item__contents"),ut(c,"c-draggable-list-item__show-connectors",r[8]),ut(c,"c-draggable-list-item__has-handle",r[10].handle),T(t,"class",u="c-draggable-list-item "+r[2]+" svelte-1u76bcr"),T(t,"id",r[3]),T(t,"data-item-id",r[3]),T(t,"data-testid","draggable-list-item"),T(t,"tabindex","0"),T(t,"role","button"),ut(t,"is-disabled",r[5]),ut(t,"has-nested-items",r[6]),ut(t,"is-expanded",r[0]),ut(t,"is-selected",r[7])},m(B,E){S(B,t,E),O(t,n),g&&g.m(n,null),O(n,e),$&&$.m(n,null),O(n,o),O(n,s),y&&y.m(s,null),O(n,i),O(n,a),M&&M.m(a,null),O(t,l),O(t,c),A&&A.m(c,null),r[21](t),h=!0,d||(p=[Kt(t,"mousedown",r[12]),Kt(t,"click",r[13]),Kt(t,"keydown",r[14]),Kt(t,"keyup",r[15]),Kt(t,"keypress",r[16]),Kt(t,"focus",r[17]),Kt(t,"blur",r[18]),Kt(t,"focusin",r[19]),Kt(t,"focusout",r[20])],d=!0)},p(B,[E]){B[10].handle?g?(g.p(B,E),1024&E&&f(g,1)):(g=jm(B),g.c(),f(g,1),g.m(n,e)):g&&(Y(),m(g,1,1,()=>{g=null}),X()),B[6]?$?($.p(B,E),64&E&&f($,1)):($=Wm(B),$.c(),f($,1),$.m(n,o)):$&&(Y(),m($,1,1,()=>{$=null}),X()),y&&y.p&&(!h||4194320&E)&&zt(y,b,B,B[22],h?Rt(b,B[22],E,_R):Nt(B[22]),Um),M&&M.p&&(!h||4194320&E)&&zt(M,x,B,B[22],h?Rt(x,B[22],E,vR):Nt(B[22]),Pm),A&&A.p&&(!h||4194320&E)&&zt(A,L,B,B[22],h?Rt(L,B[22],E,wR):Nt(B[22]),Rm),(!h||256&E)&&ut(c,"c-draggable-list-item__show-connectors",B[8]),(!h||1024&E)&&ut(c,"c-draggable-list-item__has-handle",B[10].handle),(!h||4&E&&u!==(u="c-draggable-list-item "+B[2]+" svelte-1u76bcr"))&&T(t,"class",u),(!h||8&E)&&T(t,"id",B[3]),(!h||8&E)&&T(t,"data-item-id",B[3]),(!h||36&E)&&ut(t,"is-disabled",B[5]),(!h||68&E)&&ut(t,"has-nested-items",B[6]),(!h||5&E)&&ut(t,"is-expanded",B[0]),(!h||132&E)&&ut(t,"is-selected",B[7])},i(B){h||(f(g),f($),f(y,B),f(M,B),f(A,B),h=!0)},o(B){m(g),m($),m(y,B),m(M,B),m(A,B),h=!1},d(B){B&&v(t),g&&g.d(),$&&$.d(),y&&y.d(B),M&&M.d(B),A&&A.d(B),r[21](null),d=!1,Qr(p)}}}function AR(r,t,n){let{$$slots:e={},$$scope:o}=t;const s=yc(e);let{class:i=""}=t,{id:a}=t,{item:l}=t,{disabled:c=!1}=t,{hasNestedItems:u=!1}=t,{expanded:h=!0}=t,{selected:d=!1}=t,{showConnectors:p=!0}=t,{element:g}=t;return r.$$set=$=>{"class"in $&&n(2,i=$.class),"id"in $&&n(3,a=$.id),"item"in $&&n(4,l=$.item),"disabled"in $&&n(5,c=$.disabled),"hasNestedItems"in $&&n(6,u=$.hasNestedItems),"expanded"in $&&n(0,h=$.expanded),"selected"in $&&n(7,d=$.selected),"showConnectors"in $&&n(8,p=$.showConnectors),"element"in $&&n(1,g=$.element),"$$scope"in $&&n(22,o=$.$$scope)},[h,g,i,a,l,c,u,d,p,function(){n(0,h=!h)},s,e,function($){me.call(this,r,$)},function($){me.call(this,r,$)},function($){me.call(this,r,$)},function($){me.call(this,r,$)},function($){me.call(this,r,$)},function($){me.call(this,r,$)},function($){me.call(this,r,$)},function($){me.call(this,r,$)},function($){me.call(this,r,$)},function($){Pt[$?"unshift":"push"](()=>{g=$,n(1,g)})},o]}class LR extends nt{constructor(t){super(),rt(this,t,AR,MR,ot,{class:2,id:3,item:4,disabled:5,hasNestedItems:6,expanded:0,selected:7,showConnectors:8,element:1})}}function ER(r){let t,n,e,o,s,i,a;function l(h){r[7](h)}function c(h){r[8](h)}let u={size:1,variant:"surface",placeholder:"Add task description...",disabled:!r[0],rows:1,resize:"vertical"};return r[2]!==void 0&&(u.textInput=r[2]),r[1]!==void 0&&(u.value=r[1]),o=new Ak({props:u}),Pt.push(()=>re(o,"textInput",l)),Pt.push(()=>re(o,"value",c)),o.$on("keydown",r[4]),o.$on("blur",r[3]),{c(){t=I("div"),n=I("div"),e=I("div"),_(o.$$.fragment),T(e,"class","c-task-details__section c-task-details__description-contents svelte-1k3razm"),T(n,"class","c-task-details__content svelte-1k3razm"),T(t,"class","c-task-details svelte-1k3razm")},m(h,d){S(h,t,d),O(t,n),O(n,e),k(o,e,null),a=!0},p(h,[d]){const p={};1&d&&(p.disabled=!h[0]),!s&&4&d&&(s=!0,p.textInput=h[2],oe(()=>s=!1)),!i&&2&d&&(i=!0,p.value=h[1],oe(()=>i=!1)),o.$set(p)},i(h){a||(f(o.$$.fragment,h),a=!0)},o(h){m(o.$$.fragment,h),a=!1},d(h){h&&v(t),C(o)}}}function BR(r,t,n){let e,{task:o}=t,{taskStore:s}=t,{editable:i=!0}=t,a=o.description;function l(){a.trim()!==o.description&&s.updateTask(o.uuid,{description:a.trim()},xn.USER),e==null||e.blur()}return r.$$set=c=>{"task"in c&&n(5,o=c.task),"taskStore"in c&&n(6,s=c.taskStore),"editable"in c&&n(0,i=c.editable)},[i,a,e,l,function(c){c.key!=="Enter"||c.shiftKey||c.ctrlKey||c.metaKey?c.key==="Escape"&&(c.preventDefault(),c.stopPropagation(),n(1,a=o.description),e==null||e.blur()):(c.preventDefault(),c.stopPropagation(),l())},o,s,function(c){e=c,n(2,e)},function(c){a=c,n(1,a)}]}class IR extends nt{constructor(t){super(),rt(this,t,BR,ER,ot,{task:5,taskStore:6,editable:0})}}function FR(r){let t,n,e;var o=r[2];function s(i,a){return{props:{width:i[1],height:i[3]}}}return o&&(n=Nn(o,s(r))),{c(){t=I("span"),n&&_(n.$$.fragment),T(t,"class","c-task-icon svelte-1dmbt8o"),Ge(t,"--icon-color","var(--ds-color-"+Ju(r[0])+"-9)"),Ge(t,"--icon-size",r[1])},m(i,a){S(i,t,a),n&&k(n,t,null),e=!0},p(i,[a]){if(4&a&&o!==(o=i[2])){if(n){Y();const l=n;m(l.$$.fragment,1,0,()=>{C(l,1)}),X()}o?(n=Nn(o,s(i)),_(n.$$.fragment),f(n.$$.fragment,1),k(n,t,null)):n=null}else if(o){const l={};2&a&&(l.width=i[1]),8&a&&(l.height=i[3]),n.$set(l)}(!e||1&a)&&Ge(t,"--icon-color","var(--ds-color-"+Ju(i[0])+"-9)"),(!e||2&a)&&Ge(t,"--icon-size",i[1])},i(i){e||(n&&f(n.$$.fragment,i),e=!0)},o(i){n&&m(n.$$.fragment,i),e=!1},d(i){i&&v(t),n&&C(n)}}}function DR(r,t,n){let e,o,s,{taskState:i}=t,{size:a=1}=t;return r.$$set=l=>{"taskState"in l&&n(0,i=l.taskState),"size"in l&&n(4,a=l.size)},r.$$.update=()=>{16&r.$$.dirty&&n(1,e={1:"14px",2:"16px",3:"18px",4:"20px"}[a]),2&r.$$.dirty&&n(3,o=e),1&r.$$.dirty&&n(2,s=s2(i))},[i,e,s,o,a]}class OR extends nt{constructor(t){super(),rt(this,t,DR,FR,ot,{taskState:0,size:4})}}function Hm(r,t,n){const e=r.slice();return e[26]=t[n],e}function zR(r){let t,n;const e=[{size:r[1]},{variant:"ghost"},{color:r[9]},r[12]];let o={$$slots:{default:[RR]},$$scope:{ctx:r}};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return t=new xe({props:o}),t.$on("click",r[16]),t.$on("keyup",r[17]),t.$on("keydown",r[18]),t.$on("mousedown",r[19]),t.$on("mouseover",r[20]),t.$on("focus",r[21]),t.$on("mouseleave",r[22]),t.$on("blur",r[23]),t.$on("contextmenu",r[24]),{c(){_(t.$$.fragment)},m(s,i){k(t,s,i),n=!0},p(s,i){const a=4610&i?Zt(e,[2&i&&{size:s[1]},e[1],512&i&&{color:s[9]},4096&i&&Ze(s[12])]):{};536871938&i&&(a.$$scope={dirty:i,ctx:s}),t.$set(a)},i(s){n||(f(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){C(t,s)}}}function NR(r){let t,n;return t=new Ie.Root({props:{triggerOn:[Jn.Click],open:r[6],onOpenChange:r[15],$$slots:{default:[VR]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};64&o&&(s.open=e[6]),64&o&&(s.onOpenChange=e[15]),536877043&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function RR(r){let t,n,e;var o=r[10];function s(i,a){return{props:{size:i[1]}}}return o&&(t=Nn(o,s(r))),{c(){t&&_(t.$$.fragment),n=dt()},m(i,a){t&&k(t,i,a),S(i,n,a),e=!0},p(i,a){if(1024&a&&o!==(o=i[10])){if(t){Y();const l=t;m(l.$$.fragment,1,0,()=>{C(l,1)}),X()}o?(t=Nn(o,s(i)),_(t.$$.fragment),f(t.$$.fragment,1),k(t,n.parentNode,n)):t=null}else if(o){const l={};2&a&&(l.size=i[1]),t.$set(l)}},i(i){e||(t&&f(t.$$.fragment,i),e=!0)},o(i){t&&m(t.$$.fragment,i),e=!1},d(i){i&&v(n),t&&C(t,i)}}}function PR(r){let t,n,e;var o=r[10];function s(i,a){return{props:{size:i[1]}}}return o&&(t=Nn(o,s(r))),{c(){t&&_(t.$$.fragment),n=dt()},m(i,a){t&&k(t,i,a),S(i,n,a),e=!0},p(i,a){if(1024&a&&o!==(o=i[10])){if(t){Y();const l=t;m(l.$$.fragment,1,0,()=>{C(l,1)}),X()}o?(t=Nn(o,s(i)),_(t.$$.fragment),f(t.$$.fragment,1),k(t,n.parentNode,n)):t=null}else if(o){const l={};2&a&&(l.size=i[1]),t.$set(l)}},i(i){e||(t&&f(t.$$.fragment,i),e=!0)},o(i){t&&m(t.$$.fragment,i),e=!1},d(i){i&&v(n),t&&C(t,i)}}}function UR(r){let t,n;const e=[{size:r[1]},{variant:"ghost"},{color:r[9]},{disabled:r[5]},r[12]];let o={$$slots:{default:[PR]},$$scope:{ctx:r}};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return t=new xe({props:o}),t.$on("click",r[13]),{c(){_(t.$$.fragment)},m(s,i){k(t,s,i),n=!0},p(s,i){const a=4642&i?Zt(e,[2&i&&{size:s[1]},e[1],512&i&&{color:s[9]},32&i&&{disabled:s[5]},4096&i&&Ze(s[12])]):{};536871938&i&&(a.$$scope={dirty:i,ctx:s}),t.$set(a)},i(s){n||(f(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){C(t,s)}}}function qR(r){let t,n;return t=new he({props:{content:r[8],triggerOn:[Jn.Hover],$$slots:{default:[UR]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};256&o&&(s.content=e[8]),536876642&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function jR(r){let t,n,e=Cf(r[26])+"";return{c(){t=W(e),n=J()},m(o,s){S(o,t,s),S(o,n,s)},p(o,s){128&s&&e!==(e=Cf(o[26])+"")&&ht(t,e)},d(o){o&&(v(t),v(n))}}}function WR(r){let t,n;return t=new OR({props:{slot:"iconLeft",taskState:r[26],size:1}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};128&o&&(s.taskState=e[26]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Vm(r){let t,n;function e(){return r[14](r[26])}return t=new Ie.Item({props:{onSelect:e,highlight:r[26]===r[0],disabled:!r[4]||r[26]===r[0],$$slots:{iconLeft:[WR],default:[jR]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(o,s){k(t,o,s),n=!0},p(o,s){r=o;const i={};128&s&&(i.onSelect=e),129&s&&(i.highlight=r[26]===r[0]),145&s&&(i.disabled=!r[4]||r[26]===r[0]),536871040&s&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){C(t,o)}}}function HR(r){let t,n,e=Gt(r[7]),o=[];for(let i=0;i<e.length;i+=1)o[i]=Vm(Hm(r,e,i));const s=i=>m(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=dt()},m(i,a){for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(i,a);S(i,t,a),n=!0},p(i,a){if(2193&a){let l;for(e=Gt(i[7]),l=0;l<e.length;l+=1){const c=Hm(i,e,l);o[l]?(o[l].p(c,a),f(o[l],1)):(o[l]=Vm(c),o[l].c(),f(o[l],1),o[l].m(t.parentNode,t))}for(Y(),l=e.length;l<o.length;l+=1)s(l);X()}},i(i){if(!n){for(let a=0;a<e.length;a+=1)f(o[a]);n=!0}},o(i){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)m(o[a]);n=!1},d(i){i&&v(t),un(o,i)}}}function VR(r){let t,n,e,o;return t=new Ie.Trigger({props:{$$slots:{default:[qR]},$$scope:{ctx:r}}}),e=new Ie.Content({props:{size:1,side:"bottom",align:"start",$$slots:{default:[HR]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment),n=J(),_(e.$$.fragment)},m(s,i){k(t,s,i),S(s,n,i),k(e,s,i),o=!0},p(s,i){const a={};536876898&i&&(a.$$scope={dirty:i,ctx:s}),t.$set(a);const l={};536871057&i&&(l.$$scope={dirty:i,ctx:s}),e.$set(l)},i(s){o||(f(t.$$.fragment,s),f(e.$$.fragment,s),o=!0)},o(s){m(t.$$.fragment,s),m(e.$$.fragment,s),o=!1},d(s){s&&v(n),C(t,s),C(e,s)}}}function GR(r){let t,n,e,o;const s=[NR,zR],i=[];function a(l,c){return l[4]&&l[2]&&l[3]&&!l[5]?0:1}return t=a(r),n=i[t]=s[t](r),{c(){n.c(),e=dt()},m(l,c){i[t].m(l,c),S(l,e,c),o=!0},p(l,[c]){let u=t;t=a(l),t===u?i[t].p(l,c):(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),n=i[t],n?n.p(l,c):(n=i[t]=s[t](l),n.c()),f(n,1),n.m(e.parentNode,e))},i(l){o||(f(n),o=!0)},o(l){m(n),o=!1},d(l){l&&v(e),i[t].d(l)}}}function ZR(r,t,n){let e,o,s,i;const a=["taskState","size","taskUuid","taskStore","interactive","disabled"];let l=wl(t,a),{taskState:c}=t,{size:u=1}=t,{taskUuid:h}=t,{taskStore:d}=t,{interactive:p=!0}=t,{disabled:g=!1}=t;const $=Jt("chatModel");let b=!1;async function y(x){if(!h||!d||g||x===c)return;const M=Fs(ce(d.rootTask)),L={action:gl.updateTaskStatus,totalTasksCount:M.total,triggeredBy:ml.user},A=$.currentConversationModel.chatHistory,B=A.length>0&&A[A.length-1].request_id||$.currentConversationModel.id;$.currentConversationModel.extensionClient.reportAgentSessionEvent({eventName:$l.taskListUsage,conversationId:B,eventData:{taskListUsageData:L}}),await d.updateTask(h,{state:x},xn.USER),n(6,b=!1)}return r.$$set=x=>{t=lt(lt({},t),jt(x)),n(12,l=wl(t,a)),"taskState"in x&&n(0,c=x.taskState),"size"in x&&n(1,u=x.size),"taskUuid"in x&&n(2,h=x.taskUuid),"taskStore"in x&&n(3,d=x.taskStore),"interactive"in x&&n(4,p=x.interactive),"disabled"in x&&n(5,g=x.disabled)},r.$$.update=()=>{1&r.$$.dirty&&n(10,e=s2(c)),1&r.$$.dirty&&n(9,o=Ju(c))},n(8,s="Change Status"),n(7,i=Object.values(ee)),[c,u,h,d,p,g,b,i,"Change Status",o,e,y,l,()=>n(6,b=!b),x=>y(x),x=>n(6,b=x),function(x){me.call(this,r,x)},function(x){me.call(this,r,x)},function(x){me.call(this,r,x)},function(x){me.call(this,r,x)},function(x){me.call(this,r,x)},function(x){me.call(this,r,x)},function(x){me.call(this,r,x)},function(x){me.call(this,r,x)},function(x){me.call(this,r,x)}]}class YR extends nt{constructor(t){super(),rt(this,t,ZR,GR,ot,{taskState:0,size:1,taskUuid:2,taskStore:3,interactive:4,disabled:5})}}function XR(r){let t,n,e,o,s,i;const a=[{size:r[2]},{variant:r[1]},{color:r[3]},{placeholder:r[0]},r[11]];function l(h){r[18](h)}function c(h){r[19](h)}let u={};for(let h=0;h<a.length;h+=1)u=lt(u,a[h]);return r[7]!==void 0&&(u.textInput=r[7]),r[6]!==void 0&&(u.value=r[6]),n=new w_({props:u}),Pt.push(()=>re(n,"textInput",l)),Pt.push(()=>re(n,"value",c)),n.$on("keydown",r[10]),n.$on("focus",r[9]),n.$on("blur",r[20]),n.$on("keydown",r[21]),n.$on("click",r[22]),n.$on("blur",r[23]),n.$on("focus",r[24]),{c(){t=I("div"),_(n.$$.fragment),T(t,"class",s="c-editable-text "+r[4]+" svelte-jooyia")},m(h,d){S(h,t,d),k(n,t,null),r[25](t),i=!0},p(h,[d]){const p=2063&d?Zt(a,[4&d&&{size:h[2]},2&d&&{variant:h[1]},8&d&&{color:h[3]},1&d&&{placeholder:h[0]},2048&d&&Ze(h[11])]):{};!e&&128&d&&(e=!0,p.textInput=h[7],oe(()=>e=!1)),!o&&64&d&&(o=!0,p.value=h[6],oe(()=>o=!1)),n.$set(p),(!i||16&d&&s!==(s="c-editable-text "+h[4]+" svelte-jooyia"))&&T(t,"class",s)},i(h){i||(f(n.$$.fragment,h),i=!0)},o(h){m(n.$$.fragment,h),i=!1},d(h){h&&v(t),C(n),r[25](null)}}}function QR(r,t,n){const e=["value","disabled","placeholder","clickToEdit","variant","size","color","class","editing","startEdit","acceptEdit","cancelEdit"];let o=wl(t,e);const s=F_();let i,a,{value:l=""}=t,{disabled:c=!1}=t,{placeholder:u=""}=t,{clickToEdit:h=!1}=t,{variant:d="surface"}=t,{size:p=2}=t,{color:g}=t,{class:$=""}=t,{editing:b=!1}=t,y=l;async function x(A){c||!i||b||(n(6,y=l),s("startEdit",{value:l}),i.focus(),A!=null&&A.selectAll&&(await Cy(),i==null||i.select()),n(13,b=!0))}function M(){const A=l,B=y.trim();A!==B?(n(12,l=B),s("acceptEdit",{oldValue:A,newValue:B}),document.activeElement===i&&(i==null||i.blur()),n(13,b=!1)):L()}function L(){n(6,y=l),s("cancelEdit",{value:l}),document.activeElement===i&&(i==null||i.blur()),n(13,b=!1)}return r.$$set=A=>{t=lt(lt({},t),jt(A)),n(11,o=wl(t,e)),"value"in A&&n(12,l=A.value),"disabled"in A&&n(14,c=A.disabled),"placeholder"in A&&n(0,u=A.placeholder),"clickToEdit"in A&&n(15,h=A.clickToEdit),"variant"in A&&n(1,d=A.variant),"size"in A&&n(2,p=A.size),"color"in A&&n(3,g=A.color),"class"in A&&n(4,$=A.class),"editing"in A&&n(13,b=A.editing)},[u,d,p,g,$,M,y,i,a,function(){!h||c||b||x()},function(A){A.key==="Enter"?M():A.key==="Escape"&&L()},o,l,b,c,h,x,L,function(A){i=A,n(7,i)},function(A){y=A,n(6,y)},()=>M(),function(A){me.call(this,r,A)},function(A){me.call(this,r,A)},function(A){me.call(this,r,A)},function(A){me.call(this,r,A)},function(A){Pt[A?"unshift":"push"](()=>{a=A,n(8,a)})}]}class KR extends nt{constructor(t){super(),rt(this,t,QR,XR,ot,{value:12,disabled:14,placeholder:0,clickToEdit:15,variant:1,size:2,color:3,class:4,editing:13,startEdit:16,acceptEdit:5,cancelEdit:17})}get startEdit(){return this.$$.ctx[16]}get acceptEdit(){return this.$$.ctx[5]}get cancelEdit(){return this.$$.ctx[17]}}function JR(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},r[0]],o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return{c(){t=Bt("svg"),n=new Oe(!0),this.h()},l(s){t=ze(s,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Ne(t);n=Re(i,!0),i.forEach(v),this.h()},h(){n.a=null,Ht(t,o)},m(s,i){Pe(s,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="m48 432 288-176L48 80zM24.5 38.1C39.7 29.6 58.2 30 73 39l288 176c14.3 8.7 23 24.2 23 41s-8.7 32.2-23 41L73 473c-14.8 9.1-33.4 9.4-48.5.9S0 449.4 0 432V80c0-17.4 9.4-33.4 24.5-41.9"/>',t)},p(s,[i]){Ht(t,o=Zt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},1&i&&s[0]]))},i:H,o:H,d(s){s&&v(t)}}}function tP(r,t,n){return r.$$set=e=>{n(0,t=lt(lt({},t),jt(e)))},[t=jt(t)]}class eP extends nt{constructor(t){super(),rt(this,t,tP,JR,ot,{})}}function Gm(r){let t,n;return t=new he({props:{content:"Run Task",triggerOn:[Jn.Hover],$$slots:{default:[rP]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1025&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function nP(r){let t,n;return t=new eP({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function rP(r){let t,n;return t=new xe({props:{size:1,variant:"ghost",color:"neutral",disabled:!r[0],class:"c-task-action-button c-task-action-button--play",$$slots:{default:[nP]},$$scope:{ctx:r}}}),t.$on("click",r[4]),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1&o&&(s.disabled=!e[0]),1024&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function oP(r){let t,n;return t=new ck({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function sP(r){let t,n;return t=new xe({props:{size:1,variant:"ghost",color:"error",disabled:!r[0],class:"c-task-action-button c-task-action-button--delete",$$slots:{default:[oP]},$$scope:{ctx:r}}}),t.$on("click",r[3]),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1&o&&(s.disabled=!e[0]),1024&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function iP(r){let t,n,e,o,s=r[1]&&Gm(r);return e=new he({props:{content:"Delete Task",triggerOn:[Jn.Hover],$$slots:{default:[sP]},$$scope:{ctx:r}}}),{c(){t=I("div"),s&&s.c(),n=J(),_(e.$$.fragment),T(t,"class","c-task-action-buttons svelte-55fcbs")},m(i,a){S(i,t,a),s&&s.m(t,null),O(t,n),k(e,t,null),o=!0},p(i,[a]){i[1]?s?(s.p(i,a),2&a&&f(s,1)):(s=Gm(i),s.c(),f(s,1),s.m(t,n)):s&&(Y(),m(s,1,1,()=>{s=null}),X());const l={};1025&a&&(l.$$scope={dirty:a,ctx:i}),e.$set(l)},i(i){o||(f(s),f(e.$$.fragment,i),o=!0)},o(i){m(s),m(e.$$.fragment,i),o=!1},d(i){i&&v(t),s&&s.d(),C(e)}}}function aP(r,t,n){let e,o,s,i,a=H;r.$$.on_destroy.push(()=>a());let{taskUuid:l}=t,{taskStore:c}=t,{editable:u=!0}=t;const h=Jt("chatModel");return r.$$set=d=>{"taskUuid"in d&&n(5,l=d.taskUuid),"taskStore"in d&&n(6,c=d.taskStore),"editable"in d&&n(0,u=d.editable)},r.$$.update=()=>{64&r.$$.dirty&&(n(2,e=c.uuidToTask),a(),a=An(e,d=>n(8,i=d))),288&r.$$.dirty&&n(7,o=i.get(l)),128&r.$$.dirty&&n(1,s=(o==null?void 0:o.state)===ee.NOT_STARTED)},[u,s,e,async function(){if(!u)return;const d=Fs(ce(c.rootTask)),p={action:gl.deleteTask,totalTasksCount:d.total,triggeredBy:ml.user},g=h.currentConversationModel.chatHistory,$=g.length>0&&g[g.length-1].request_id||h.currentConversationModel.id;h.currentConversationModel.extensionClient.reportAgentSessionEvent({eventName:$l.taskListUsage,conversationId:$,eventData:{taskListUsageData:p}}),await c.deleteTask(l)},async function(){if(!o||!u||o.state!==ee.NOT_STARTED)return;const d=Fs(ce(c.rootTask)),p={action:gl.runSingleTask,totalTasksCount:d.total,triggeredBy:ml.user},g=h.currentConversationModel.chatHistory,$=g.length>0&&g[g.length-1].request_id||h.currentConversationModel.id;h.currentConversationModel.extensionClient.reportAgentSessionEvent({eventName:$l.taskListUsage,conversationId:$,eventData:{taskListUsageData:p}}),await c.updateTask(l,{state:ee.IN_PROGRESS},xn.USER),await c.runHydratedTask(o)},l,c,o,i]}class lP extends nt{constructor(t){super(),rt(this,t,aP,iP,ot,{taskUuid:5,taskStore:6,editable:0})}}function xp(r,t=new Set(Object.values(ee))){const n={...r,isVisible:!1,subTasksData:[]};let e=!1;if(r.subTasksData&&r.subTasksData.length>0){const s=[];for(const i of r.subTasksData){const a=xp(i,t);s.push(a),a.isVisible&&(e=!0)}n.subTasksData=s}const o=function(s,i){return i.size!==0&&i.has(s.state)}(r,t);return n.isVisible=o||e,n}function Zm(r,t,n){const e=r.slice();return e[16]=t[n],e}function Ym(r,t,n){const e=r.slice();return e[16]=t[n],e}function cP(r){let t,n,e,o;function s(l){r[12](l)}function i(l){r[13](l)}let a={class:"c-task-tree-item",item:r[0],id:`task-${r[0].uuid}`,hasNestedItems:!!r[0].subTasksData&&r[0].subTasksData.length>0,disabled:!r[2],$$slots:{contents:[pP],actions:[dP],"header-contents":[hP]},$$scope:{ctx:r}};return r[5]!==void 0&&(a.element=r[5]),r[6]!==void 0&&(a.expanded=r[6]),t=new LR({props:a}),Pt.push(()=>re(t,"element",s)),Pt.push(()=>re(t,"expanded",i)),{c(){_(t.$$.fragment)},m(l,c){k(t,l,c),o=!0},p(l,c){const u={};1&c&&(u.item=l[0]),1&c&&(u.id=`task-${l[0].uuid}`),1&c&&(u.hasNestedItems=!!l[0].subTasksData&&l[0].subTasksData.length>0),4&c&&(u.disabled=!l[2]),2097623&c&&(u.$$scope={dirty:c,ctx:l}),!n&&32&c&&(n=!0,u.element=l[5],oe(()=>n=!1)),!e&&64&c&&(e=!0,u.expanded=l[6],oe(()=>e=!1)),t.$set(u)},i(l){o||(f(t.$$.fragment,l),o=!0)},o(l){m(t.$$.fragment,l),o=!1},d(l){C(t,l)}}}function uP(r){let t,n,e=[],o=new Map,s=Gt(r[7]);const i=a=>a[16].uuid;for(let a=0;a<s.length;a+=1){let l=Ym(r,s,a),c=i(l);o.set(c,e[a]=Km(c,l))}return{c(){t=I("div");for(let a=0;a<e.length;a+=1)e[a].c();T(t,"class","c-task-tree-root-children svelte-10aflq0")},m(a,l){S(a,t,l);for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(t,null);n=!0},p(a,l){134&l&&(s=Gt(a[7]),Y(),e=rd(e,l,i,1,a,s,o,t,od,Km,null,Ym),X())},i(a){if(!n){for(let l=0;l<s.length;l+=1)f(e[l]);n=!0}},o(a){for(let l=0;l<e.length;l+=1)m(e[l]);n=!1},d(a){a&&v(t);for(let l=0;l<e.length;l+=1)e[l].d()}}}function hP(r){let t,n,e,o,s,i,a;e=new YR({props:{taskState:r[0].state,taskUuid:r[0].uuid,taskStore:r[1],disabled:!r[2],size:1}});let l={class:"c-task-tree-item__name-editable",value:r[0].name,placeholder:"Name this task...",size:1,disabled:!r[2],clickToEdit:!0};return i=new KR({props:l}),r[11](i),i.$on("keydown",r[10]),i.$on("blur",r[9]),{c(){t=I("div"),n=I("div"),_(e.$$.fragment),o=J(),s=I("div"),_(i.$$.fragment),T(n,"class","c-task-tree-item__status-cell svelte-10aflq0"),T(s,"class","c-task-tree-item__name svelte-10aflq0"),ut(s,"c-task-tree-item__text--cancelled",r[8]),T(t,"slot","header-contents"),T(t,"class","c-task-tree-item__header svelte-10aflq0")},m(c,u){S(c,t,u),O(t,n),k(e,n,null),O(t,o),O(t,s),k(i,s,null),a=!0},p(c,u){const h={};1&u&&(h.taskState=c[0].state),1&u&&(h.taskUuid=c[0].uuid),2&u&&(h.taskStore=c[1]),4&u&&(h.disabled=!c[2]),e.$set(h);const d={};1&u&&(d.value=c[0].name),4&u&&(d.disabled=!c[2]),i.$set(d),(!a||256&u)&&ut(s,"c-task-tree-item__text--cancelled",c[8])},i(c){a||(f(e.$$.fragment,c),f(i.$$.fragment,c),a=!0)},o(c){m(e.$$.fragment,c),m(i.$$.fragment,c),a=!1},d(c){c&&v(t),C(e),r[11](null),C(i)}}}function dP(r){let t,n,e;return n=new lP({props:{taskUuid:r[0].uuid,taskStore:r[1],editable:r[2]}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-task-tree-item__action-buttons svelte-10aflq0"),T(t,"slot","actions")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};1&s&&(i.taskUuid=o[0].uuid),2&s&&(i.taskStore=o[1]),4&s&&(i.editable=o[2]),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function Xm(r){let t,n,e=[],o=new Map,s=Gt(r[7]);const i=a=>a[16].uuid;for(let a=0;a<s.length;a+=1){let l=Zm(r,s,a),c=i(l);o.set(c,e[a]=Qm(c,l))}return{c(){t=I("div");for(let a=0;a<e.length;a+=1)e[a].c();T(t,"class","c-task-tree-item__subtasks")},m(a,l){S(a,t,l);for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(t,null);n=!0},p(a,l){134&l&&(s=Gt(a[7]),Y(),e=rd(e,l,i,1,a,s,o,t,od,Qm,null,Zm),X())},i(a){if(!n){for(let l=0;l<s.length;l+=1)f(e[l]);n=!0}},o(a){for(let l=0;l<e.length;l+=1)m(e[l]);n=!1},d(a){a&&v(t);for(let l=0;l<e.length;l+=1)e[l].d()}}}function Qm(r,t){let n,e,o;return e=new ri({props:{taskStore:t[1],task:t[16],editable:t[2],isRootTask:!1}}),{key:r,first:null,c(){n=dt(),_(e.$$.fragment),this.first=n},m(s,i){S(s,n,i),k(e,s,i),o=!0},p(s,i){t=s;const a={};2&i&&(a.taskStore=t[1]),128&i&&(a.task=t[16]),4&i&&(a.editable=t[2]),e.$set(a)},i(s){o||(f(e.$$.fragment,s),o=!0)},o(s){m(e.$$.fragment,s),o=!1},d(s){s&&v(n),C(e,s)}}}function pP(r){let t,n,e,o,s;n=new IR({props:{task:r[0],taskStore:r[1],editable:r[2]}});let i=r[7]&&r[7].length>0&&r[6]&&Xm(r);return{c(){t=I("div"),_(n.$$.fragment),e=J(),i&&i.c(),o=dt(),T(t,"class","c-task-tree-item__details")},m(a,l){S(a,t,l),k(n,t,null),S(a,e,l),i&&i.m(a,l),S(a,o,l),s=!0},p(a,l){const c={};1&l&&(c.task=a[0]),2&l&&(c.taskStore=a[1]),4&l&&(c.editable=a[2]),n.$set(c),a[7]&&a[7].length>0&&a[6]?i?(i.p(a,l),192&l&&f(i,1)):(i=Xm(a),i.c(),f(i,1),i.m(o.parentNode,o)):i&&(Y(),m(i,1,1,()=>{i=null}),X())},i(a){s||(f(n.$$.fragment,a),f(i),s=!0)},o(a){m(n.$$.fragment,a),m(i),s=!1},d(a){a&&(v(t),v(e),v(o)),C(n),i&&i.d(a)}}}function Km(r,t){let n,e,o;return e=new ri({props:{taskStore:t[1],task:t[16],editable:t[2],isRootTask:!1}}),{key:r,first:null,c(){n=dt(),_(e.$$.fragment),this.first=n},m(s,i){S(s,n,i),k(e,s,i),o=!0},p(s,i){t=s;const a={};2&i&&(a.taskStore=t[1]),128&i&&(a.task=t[16]),4&i&&(a.editable=t[2]),e.$set(a)},i(s){o||(f(e.$$.fragment,s),o=!0)},o(s){m(e.$$.fragment,s),o=!1},d(s){s&&v(n),C(e,s)}}}function fP(r){let t,n,e,o;const s=[uP,cP],i=[];function a(l,c){return l[3]?0:l[0].isVisible?1:-1}return~(t=a(r))&&(n=i[t]=s[t](r)),{c(){n&&n.c(),e=dt()},m(l,c){~t&&i[t].m(l,c),S(l,e,c),o=!0},p(l,[c]){let u=t;t=a(l),t===u?~t&&i[t].p(l,c):(n&&(Y(),m(i[u],1,1,()=>{i[u]=null}),X()),~t?(n=i[t],n?n.p(l,c):(n=i[t]=s[t](l),n.c()),f(n,1),n.m(e.parentNode,e)):n=null)},i(l){o||(f(n),o=!0)},o(l){m(n),o=!1},d(l){l&&v(e),~t&&i[t].d(l)}}}function gP(r,t,n){let e,o,{task:s}=t,{taskStore:i=Jt(Er.key)}=t,{editable:a=!0}=t,{isRootTask:l=!0}=t;const c=Jt("chatModel");let u,h,d;async function p(g){const $=g.trim();if($!==s.name&&$){const b=Fs(ce(i.rootTask)),y={action:gl.updateTaskName,totalTasksCount:b.total,triggeredBy:ml.user},x=c.currentConversationModel.chatHistory,M=x.length>0&&x[x.length-1].request_id||c.currentConversationModel.id;c.currentConversationModel.extensionClient.reportAgentSessionEvent({eventName:$l.taskListUsage,conversationId:M,eventData:{taskListUsageData:y}}),await i.updateTask(s.uuid,{name:$},xn.USER)}}return r.$$set=g=>{"task"in g&&n(0,s=g.task),"taskStore"in g&&n(1,i=g.taskStore),"editable"in g&&n(2,a=g.editable),"isRootTask"in g&&n(3,l=g.isRootTask)},r.$$.update=()=>{1&r.$$.dirty&&n(8,e=s.state===ee.CANCELLED),1&r.$$.dirty&&n(7,o=function(g){var $;return(($=g.subTasksData)==null?void 0:$.filter(b=>b.isVisible))||[]}(s))},[s,i,a,l,u,h,d,o,e,async function(g){var b;const $=(b=g.target)==null?void 0:b.value;await p($||"")},async function(g){var $,b;if(!(g.shiftKey||g.ctrlKey||g.metaKey))switch(g.key){case"Enter":{const y=($=g.target)==null?void 0:$.value;await p(y||"");const x=await i.addNewTaskAfter(s.uuid,{uuid:"new-task",name:"",description:"",state:ee.NOT_STARTED,subTasks:[],lastUpdated:Date.now(),lastUpdatedBy:xn.USER});if(!x)return;await Cy();const M=document.getElementById(`task-${x.uuid}`);if(!M)return;const L=M.querySelector(".c-task-tree-item__name-editable");if(!L)return;const A=L.querySelector("input");if(!A)return;A.focus(),A.select();break}case"Tab":{const y=(b=g.target)==null?void 0:b.value;await p(y||"");break}}},function(g){Pt[g?"unshift":"push"](()=>{u=g,n(4,u)})},function(g){h=g,n(5,h)},function(g){d=g,n(6,d)}]}class ri extends nt{constructor(t){super(),rt(this,t,gP,fP,ot,{task:0,taskStore:1,editable:2,isRootTask:3})}}function mP(r){let t,n,e;return n=new yt({props:{size:1,color:"neutral",$$slots:{default:[yP]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-task-diff-renderer__empty svelte-4xfqt5")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};16&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function $P(r){let t,n,e,o,s=r[0].created.length>0&&Jm(r),i=r[0].updated.length>0&&t$(r),a=r[0].deleted.length>0&&e$(r);return{c(){t=I("div"),s&&s.c(),n=J(),i&&i.c(),e=J(),a&&a.c(),T(t,"class","c-task-diff-renderer svelte-4xfqt5")},m(l,c){S(l,t,c),s&&s.m(t,null),O(t,n),i&&i.m(t,null),O(t,e),a&&a.m(t,null),o=!0},p(l,c){l[0].created.length>0?s?(s.p(l,c),1&c&&f(s,1)):(s=Jm(l),s.c(),f(s,1),s.m(t,n)):s&&(Y(),m(s,1,1,()=>{s=null}),X()),l[0].updated.length>0?i?(i.p(l,c),1&c&&f(i,1)):(i=t$(l),i.c(),f(i,1),i.m(t,e)):i&&(Y(),m(i,1,1,()=>{i=null}),X()),l[0].deleted.length>0?a?(a.p(l,c),1&c&&f(a,1)):(a=e$(l),a.c(),f(a,1),a.m(t,null)):a&&(Y(),m(a,1,1,()=>{a=null}),X())},i(l){o||(f(s),f(i),f(a),o=!0)},o(l){m(s),m(i),m(a),o=!1},d(l){l&&v(t),s&&s.d(),i&&i.d(),a&&a.d()}}}function yP(r){let t;return{c(){t=W("No task changes to display")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function Jm(r){let t,n,e,o,s,i,a;return e=new yt({props:{size:1,weight:"medium",color:"success",$$slots:{default:[xP]},$$scope:{ctx:r}}}),i=new ri({props:{task:r[2](r[0].created,"Created"),taskStore:Er.createReadOnlyStore(void 0),editable:!1}}),{c(){t=I("div"),n=I("div"),_(e.$$.fragment),o=J(),s=I("div"),_(i.$$.fragment),T(n,"class","c-task-diff-renderer__section-header svelte-4xfqt5"),T(s,"class","c-task-diff-renderer__task-list"),T(t,"class","c-task-diff-renderer__section svelte-4xfqt5")},m(l,c){S(l,t,c),O(t,n),k(e,n,null),O(t,o),O(t,s),k(i,s,null),a=!0},p(l,c){const u={};17&c&&(u.$$scope={dirty:c,ctx:l}),e.$set(u);const h={};1&c&&(h.task=l[2](l[0].created,"Created")),i.$set(h)},i(l){a||(f(e.$$.fragment,l),f(i.$$.fragment,l),a=!0)},o(l){m(e.$$.fragment,l),m(i.$$.fragment,l),a=!1},d(l){l&&v(t),C(e),C(i)}}}function xP(r){let t,n,e,o=r[0].created.length+"";return{c(){t=W("Created Tasks ("),n=W(o),e=W(")")},m(s,i){S(s,t,i),S(s,n,i),S(s,e,i)},p(s,i){1&i&&o!==(o=s[0].created.length+"")&&ht(n,o)},d(s){s&&(v(t),v(n),v(e))}}}function t$(r){let t,n,e,o,s,i,a;return e=new yt({props:{size:1,weight:"medium",color:"accent",$$slots:{default:[bP]},$$scope:{ctx:r}}}),i=new ri({props:{task:r[2](r[0].updated,"Updated"),taskStore:Er.createReadOnlyStore(void 0),editable:!1}}),{c(){t=I("div"),n=I("div"),_(e.$$.fragment),o=J(),s=I("div"),_(i.$$.fragment),T(n,"class","c-task-diff-renderer__section-header svelte-4xfqt5"),T(s,"class","c-task-diff-renderer__task-list"),T(t,"class","c-task-diff-renderer__section svelte-4xfqt5")},m(l,c){S(l,t,c),O(t,n),k(e,n,null),O(t,o),O(t,s),k(i,s,null),a=!0},p(l,c){const u={};17&c&&(u.$$scope={dirty:c,ctx:l}),e.$set(u);const h={};1&c&&(h.task=l[2](l[0].updated,"Updated")),i.$set(h)},i(l){a||(f(e.$$.fragment,l),f(i.$$.fragment,l),a=!0)},o(l){m(e.$$.fragment,l),m(i.$$.fragment,l),a=!1},d(l){l&&v(t),C(e),C(i)}}}function bP(r){let t,n,e,o=r[0].updated.length+"";return{c(){t=W("Updated Tasks ("),n=W(o),e=W(")")},m(s,i){S(s,t,i),S(s,n,i),S(s,e,i)},p(s,i){1&i&&o!==(o=s[0].updated.length+"")&&ht(n,o)},d(s){s&&(v(t),v(n),v(e))}}}function e$(r){let t,n,e,o,s,i;return e=new yt({props:{size:1,weight:"medium",color:"error",$$slots:{default:[wP]},$$scope:{ctx:r}}}),s=new ri({props:{task:r[2](r[0].deleted,"Deleted"),taskStore:Er.createReadOnlyStore(void 0),editable:!1}}),{c(){t=I("div"),n=I("div"),_(e.$$.fragment),o=J(),_(s.$$.fragment),T(n,"class","c-task-diff-renderer__section-header svelte-4xfqt5"),T(t,"class","c-task-diff-renderer__section svelte-4xfqt5")},m(a,l){S(a,t,l),O(t,n),k(e,n,null),O(t,o),k(s,t,null),i=!0},p(a,l){const c={};17&l&&(c.$$scope={dirty:l,ctx:a}),e.$set(c);const u={};1&l&&(u.task=a[2](a[0].deleted,"Deleted")),s.$set(u)},i(a){i||(f(e.$$.fragment,a),f(s.$$.fragment,a),i=!0)},o(a){m(e.$$.fragment,a),m(s.$$.fragment,a),i=!1},d(a){a&&v(t),C(e),C(s)}}}function wP(r){let t,n,e,o=r[0].deleted.length+"";return{c(){t=W("Deleted Tasks ("),n=W(o),e=W(")")},m(s,i){S(s,t,i),S(s,n,i),S(s,e,i)},p(s,i){1&i&&o!==(o=s[0].deleted.length+"")&&ht(n,o)},d(s){s&&(v(t),v(n),v(e))}}}function vP(r){let t,n,e,o;const s=[$P,mP],i=[];function a(l,c){return l[1]?0:1}return t=a(r),n=i[t]=s[t](r),{c(){n.c(),e=dt()},m(l,c){i[t].m(l,c),S(l,e,c),o=!0},p(l,[c]){let u=t;t=a(l),t===u?i[t].p(l,c):(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),n=i[t],n?n.p(l,c):(n=i[t]=s[t](l),n.c()),f(n,1),n.m(e.parentNode,e))},i(l){o||(f(n),o=!0)},o(l){m(n),o=!1},d(l){l&&v(e),i[t].d(l)}}}function _P(r,t,n){let e,o,{text:s}=t;return r.$$set=i=>{"text"in i&&n(3,s=i.text)},r.$$.update=()=>{8&r.$$.dirty&&n(0,e=function(i){return r2(o2(i))}(s)),1&r.$$.dirty&&n(1,o=e.created.length>0||e.updated.length>0||e.deleted.length>0)},[e,o,function(i,a){const l=i.map(c=>xp(c));return{uuid:`dummy-root-${a}`,name:`${a} Tasks`,description:`Tasks that were ${a.toLowerCase()}`,state:ee.NOT_STARTED,subTasks:i.map(c=>c.uuid),subTasksData:l,lastUpdated:Date.now(),lastUpdatedBy:xn.AGENT,isVisible:!0}},s]}class bp extends nt{constructor(t){super(),rt(this,t,_P,vP,ot,{text:3})}}function wp(r){let t;return n=>{const e=n.phase;(e===$t.completed||e===$t.error||e===$t.cancelled)&&t!==void 0&&t!==e&&r&&r.refreshTasksThrottled(),t=e}}function n$(r){let t,n;const e=[{slot:"error"},r[0].result??{},{hideDetailedMessage:!0}];let o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return t=new To({props:o}),{c(){_(t.$$.fragment)},m(s,i){k(t,s,i),n=!0},p(s,i){const a=1&i?Zt(e,[e[0],Ze(s[0].result??{}),e[2]]):{};t.$set(a)},i(s){n||(f(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){C(t,s)}}}function kP(r){let t,n,e=r[0].phase===$t.error&&n$(r);return{c(){e&&e.c(),t=dt()},m(o,s){e&&e.m(o,s),S(o,t,s),n=!0},p(o,s){o[0].phase===$t.error?e?(e.p(o,s),1&s&&f(e,1)):(e=n$(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d(o)}}}function CP(r){let t,n;return t=new yR({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function r$(r){let t,n,e,o,s,i=r[1].created>0&&o$(r),a=r[1].updated>0&&s$(r),l=r[1].deleted>0&&i$(r),c=r[1].created===0&&r[1].updated===0&&r[1].deleted===0&&a$(r);return{c(){t=I("div"),i&&i.c(),n=J(),a&&a.c(),e=J(),l&&l.c(),o=J(),c&&c.c(),T(t,"class","c-task-list-tool__counts svelte-1uha2b4")},m(u,h){S(u,t,h),i&&i.m(t,null),O(t,n),a&&a.m(t,null),O(t,e),l&&l.m(t,null),O(t,o),c&&c.m(t,null),s=!0},p(u,h){u[1].created>0?i?(i.p(u,h),2&h&&f(i,1)):(i=o$(u),i.c(),f(i,1),i.m(t,n)):i&&(Y(),m(i,1,1,()=>{i=null}),X()),u[1].updated>0?a?(a.p(u,h),2&h&&f(a,1)):(a=s$(u),a.c(),f(a,1),a.m(t,e)):a&&(Y(),m(a,1,1,()=>{a=null}),X()),u[1].deleted>0?l?(l.p(u,h),2&h&&f(l,1)):(l=i$(u),l.c(),f(l,1),l.m(t,o)):l&&(Y(),m(l,1,1,()=>{l=null}),X()),u[1].created===0&&u[1].updated===0&&u[1].deleted===0?c?2&h&&f(c,1):(c=a$(u),c.c(),f(c,1),c.m(t,null)):c&&(Y(),m(c,1,1,()=>{c=null}),X())},i(u){s||(f(i),f(a),f(l),f(c),s=!0)},o(u){m(i),m(a),m(l),m(c),s=!1},d(u){u&&v(t),i&&i.d(),a&&a.d(),l&&l.d(),c&&c.d()}}}function o$(r){let t,n;return t=new nr({props:{color:"success",size:1,$$slots:{default:[SP]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1026&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function SP(r){let t,n,e=r[1].created+"";return{c(){t=W(e),n=W(" created")},m(o,s){S(o,t,s),S(o,n,s)},p(o,s){2&s&&e!==(e=o[1].created+"")&&ht(t,e)},d(o){o&&(v(t),v(n))}}}function s$(r){let t,n;return t=new nr({props:{color:"info",size:1,$$slots:{default:[TP]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1026&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function TP(r){let t,n,e=r[1].updated+"";return{c(){t=W(e),n=W(" updated")},m(o,s){S(o,t,s),S(o,n,s)},p(o,s){2&s&&e!==(e=o[1].updated+"")&&ht(t,e)},d(o){o&&(v(t),v(n))}}}function i$(r){let t,n;return t=new nr({props:{color:"warning",size:1,$$slots:{default:[MP]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1026&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function MP(r){let t,n,e=r[1].deleted+"";return{c(){t=W(e),n=W(" deleted")},m(o,s){S(o,t,s),S(o,n,s)},p(o,s){2&s&&e!==(e=o[1].deleted+"")&&ht(t,e)},d(o){o&&(v(t),v(n))}}}function a$(r){let t,n;return t=new nr({props:{color:"info",size:1,$$slots:{default:[AP]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function AP(r){let t;return{c(){t=W("No changes")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function LP(r){let t,n,e=r[3]&&r[4]&&r$(r);return{c(){e&&e.c(),t=dt()},m(o,s){e&&e.m(o,s),S(o,t,s),n=!0},p(o,s){o[3]&&o[4]?e?(e.p(o,s),24&s&&f(e,1)):(e=r$(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d(o)}}}function EP(r){let t,n;return t=new Te({props:{slot:"header",toolName:"Update Task List",$$slots:{secondary:[LP],icon:[CP]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1050&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function BP(r){let t,n,e;return n=new yt({props:{size:1,color:"neutral",$$slots:{default:[FP]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-task-list-tool__no-diff svelte-1uha2b4")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};1024&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function IP(r){let t,n;return t=new bp({props:{text:r[2]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};4&o&&(s.text=e[2]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function FP(r){let t;return{c(){t=W("No task changes to display")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function DP(r){let t,n,e,o;const s=[IP,BP],i=[];function a(l,c){return l[3]&&l[5]?0:l[3]&&!l[5]?1:-1}return~(n=a(r))&&(e=i[n]=s[n](r)),{c(){t=I("div"),e&&e.c(),T(t,"slot","details"),T(t,"class","c-task-list-tool__details svelte-1uha2b4")},m(l,c){S(l,t,c),~n&&i[n].m(t,null),o=!0},p(l,c){let u=n;n=a(l),n===u?~n&&i[n].p(l,c):(e&&(Y(),m(i[u],1,1,()=>{i[u]=null}),X()),~n?(e=i[n],e?e.p(l,c):(e=i[n]=s[n](l),e.c()),f(e,1),e.m(t,null)):e=null)},i(l){o||(f(e),o=!0)},o(l){m(e),o=!1},d(l){l&&v(t),~n&&i[n].d()}}}function OP(r){let t,n,e;function o(i){r[7](i)}let s={$$slots:{details:[DP],header:[EP],default:[kP]},$$scope:{ctx:r}};return r[4]!==void 0&&(s.collapsed=r[4]),t=new Me({props:s}),Pt.push(()=>re(t,"collapsed",o)),{c(){_(t.$$.fragment)},m(i,a){k(t,i,a),e=!0},p(i,[a]){const l={};1087&a&&(l.$$scope={dirty:a,ctx:i}),!n&&16&a&&(n=!0,l.collapsed=i[4],oe(()=>n=!1)),t.$set(l)},i(i){e||(f(t.$$.fragment,i),e=!0)},o(i){m(t.$$.fragment,i),e=!1},d(i){C(t,i)}}}function zP(r,t,n){let e,o,s,i,{toolUseState:a}=t,l=!0;const c=wp(Jt(Er.key));return r.$$set=u=>{"toolUseState"in u&&n(0,a=u.toolUseState)},r.$$.update=()=>{var u,h;1&r.$$.dirty&&c(a),1&r.$$.dirty&&n(3,e=((u=a.result)==null?void 0:u.text)&&!a.result.isError),1&r.$$.dirty&&n(2,o=((h=a.result)==null?void 0:h.text)||""),12&r.$$.dirty&&n(1,s=e?$d(o):{created:0,updated:0,deleted:0}),2&r.$$.dirty&&n(5,i=s.created>0||s.updated>0||s.deleted>0)},[a,s,o,e,l,i,{},function(u){l=u,n(4,l)}]}function NP(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},r[0]],o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return{c(){t=Bt("svg"),n=new Oe(!0),this.h()},l(s){t=ze(s,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Ne(t);n=Re(i,!0),i.forEach(v),this.h()},h(){n.a=null,Ht(t,o)},m(s,i){Pe(s,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M153.8 72.1c8.9-9.9 8.1-25-1.8-33.9s-25-8.1-33.9 1.8l-55 61.1L41 79c-9.4-9.3-24.6-9.3-34 0s-9.4 24.6 0 33.9l40 40c4.7 4.7 11 7.2 17.6 7s12.8-3 17.2-7.9l72-80zm0 160c8.9-9.9 8.1-25-1.8-33.9s-25-8.1-33.9 1.8l-55 61.1L41 239c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l40 40c4.7 4.7 11 7.2 17.6 7s12.8-3 17.2-7.9l72-80zM216 120h272c13.3 0 24-10.7 24-24s-10.7-24-24-24H216c-13.3 0-24 10.7-24 24s10.7 24 24 24m-24 136c0 13.3 10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24H216c-13.3 0-24 10.7-24 24m-32 160c0 13.3 10.7 24 24 24h304c13.3 0 24-10.7 24-24s-10.7-24-24-24H184c-13.3 0-24 10.7-24 24m-64 0a32 32 0 1 0-64 0 32 32 0 1 0 64 0"/>',t)},p(s,[i]){Ht(t,o=Zt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&s[0]]))},i:H,o:H,d(s){s&&v(t)}}}function RP(r,t,n){return r.$$set=e=>{n(0,t=lt(lt({},t),jt(e)))},[t=jt(t)]}class PP extends nt{constructor(t){super(),rt(this,t,RP,NP,ot,{})}}function UP(r){let t,n,e;return n=new yt({props:{size:1,color:"neutral",$$slots:{default:[VP]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-task-list-tool-use-details__loading svelte-zbe9gm")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};8192&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function qP(r){let t,n,e;return n=new yt({props:{size:1,color:"neutral",$$slots:{default:[GP]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-task-list-tool-use-details__loading svelte-zbe9gm")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};8192&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function jP(r){let t,n,e,o,s,i,a;return e=new yt({props:{size:1,weight:"medium",color:"primary",$$slots:{default:[ZP]},$$scope:{ctx:r}}}),i=new By({props:{markdown:r[1]}}),{c(){t=I("div"),n=I("div"),_(e.$$.fragment),o=J(),s=I("div"),_(i.$$.fragment),T(n,"class","c-task-list-tool-use-details__section-header svelte-zbe9gm"),T(s,"class","c-task-list-tool-use-details__task-list"),T(t,"class","c-task-list-tool-use-details__section svelte-zbe9gm")},m(l,c){S(l,t,c),O(t,n),k(e,n,null),O(t,o),O(t,s),k(i,s,null),a=!0},p(l,c){const u={};8192&c&&(u.$$scope={dirty:c,ctx:l}),e.$set(u);const h={};2&c&&(h.markdown=l[1]),i.$set(h)},i(l){a||(f(e.$$.fragment,l),f(i.$$.fragment,l),a=!0)},o(l){m(e.$$.fragment,l),m(i.$$.fragment,l),a=!1},d(l){l&&v(t),C(e),C(i)}}}function WP(r){let t,n,e;return n=new yt({props:{size:1,color:"neutral",$$slots:{default:[YP]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-task-list-tool-use-details__empty svelte-zbe9gm")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};8192&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function HP(r){let t,n,e,o,s,i,a;return e=new yt({props:{size:1,weight:"medium",color:"primary",$$slots:{default:[XP]},$$scope:{ctx:r}}}),i=new ri({props:{task:r[4],taskStore:r[5],editable:r[0]}}),{c(){t=I("div"),n=I("div"),_(e.$$.fragment),o=J(),s=I("div"),_(i.$$.fragment),T(n,"class","c-task-list-tool-use-details__section-header svelte-zbe9gm"),T(s,"class","c-task-list-tool-use-details__task-list"),T(t,"class","c-task-list-tool-use-details__section svelte-zbe9gm")},m(l,c){S(l,t,c),O(t,n),k(e,n,null),O(t,o),O(t,s),k(i,s,null),a=!0},p(l,c){const u={};8192&c&&(u.$$scope={dirty:c,ctx:l}),e.$set(u);const h={};16&c&&(h.task=l[4]),32&c&&(h.taskStore=l[5]),1&c&&(h.editable=l[0]),i.$set(h)},i(l){a||(f(e.$$.fragment,l),f(i.$$.fragment,l),a=!0)},o(l){m(e.$$.fragment,l),m(i.$$.fragment,l),a=!1},d(l){l&&v(t),C(e),C(i)}}}function VP(r){let t;return{c(){t=W("Waiting for task list...")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function GP(r){let t;return{c(){t=W("Loading...")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function ZP(r){let t;return{c(){t=W("Task List")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function YP(r){let t;return{c(){t=W("No tasks to display")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function XP(r){let t;return{c(){t=W("Task List")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function QP(r){let t,n,e,o;const s=[HP,WP,jP,qP,UP],i=[];function a(l,c){return l[5]!==void 0&&l[4]!==void 0&&l[4].subTasksData&&l[4].subTasksData.length>0?0:l[5]!==void 0&&l[2]!==void 0?1:l[1]?2:l[3]?3:4}return n=a(r),e=i[n]=s[n](r),{c(){t=I("div"),e.c(),T(t,"class","c-task-list-tool-use-details svelte-zbe9gm")},m(l,c){S(l,t,c),i[n].m(t,null),o=!0},p(l,[c]){let u=n;n=a(l),n===u?i[n].p(l,c):(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),e=i[n],e?e.p(l,c):(e=i[n]=s[n](l),e.c()),f(e,1),e.m(t,null))},i(l){o||(f(e),o=!0)},o(l){m(e),o=!1},d(l){l&&v(t),i[n].d()}}}function KP(r,t,n){let e,o;const s=Rn();Vt(r,s,b=>n(12,o=b));let{toolUseInput:i=o.toolUseInput}=t,{toolUseState:a=o.toolUseState}=t,{requestId:l=o.requestId}=t,{editable:c=!1}=t;const u=o.turnIndex;let h,d,p,g,$=!1;return r.$$set=b=>{"toolUseInput"in b&&n(8,i=b.toolUseInput),"toolUseState"in b&&n(7,a=b.toolUseState),"requestId"in b&&n(9,l=b.requestId),"editable"in b&&n(0,c=b.editable)},r.$$.update=()=>{var b;if(4096&r.$$.dirty&&n(8,i=o.toolUseInput),4096&r.$$.dirty&&n(7,a=o.toolUseState),4096&r.$$.dirty&&n(9,l=o.requestId),128&r.$$.dirty&&n(3,e=a.phase===$t.completed),2190&r.$$.dirty&&e&&!$&&((b=a.result)==null?void 0:b.text)){n(11,$=!0),n(1,h=a.result.text);try{n(2,d=Qu(h)),n(5,g=Er.createReadOnlyStore(d))}catch(y){console.error("Failed to parse task list markdown:",y)}}4&r.$$.dirty&&d&&n(4,p=xp(d))},[c,h,d,e,p,g,s,a,i,l,u,$,o]}class JP extends nt{constructor(t){super(),rt(this,t,KP,QP,ot,{toolUseInput:8,toolUseState:7,requestId:9,editable:0,turnIndex:10})}get turnIndex(){return this.$$.ctx[10]}}function l$(r){let t,n;const e=[{slot:"error"},r[0].result??{},{hideDetailedMessage:!0}];let o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return t=new To({props:o}),{c(){_(t.$$.fragment)},m(s,i){k(t,s,i),n=!0},p(s,i){const a=1&i?Zt(e,[e[0],Ze(s[0].result??{}),e[2]]):{};t.$set(a)},i(s){n||(f(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){C(t,s)}}}function tU(r){let t,n,e=r[0].phase===$t.error&&l$(r);return{c(){e&&e.c(),t=dt()},m(o,s){e&&e.m(o,s),S(o,t,s),n=!0},p(o,s){o[0].phase===$t.error?e?(e.p(o,s),1&s&&f(e,1)):(e=l$(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d(o)}}}function eU(r){let t,n;return t=new PP({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function nU(r){let t,n;return t=new Te({props:{slot:"header",toolName:"View Task List",$$slots:{icon:[eU]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function c$(r){let t,n;return t=new JP({props:{editable:!1}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function rU(r){let t,n,e=r[0].phase===$t.completed&&c$();return{c(){t=I("div"),e&&e.c(),T(t,"slot","details"),T(t,"class","c-view-task-list-tool__details svelte-pzbqz8")},m(o,s){S(o,t,s),e&&e.m(t,null),n=!0},p(o,s){o[0].phase===$t.completed?e?1&s&&f(e,1):(e=c$(),e.c(),f(e,1),e.m(t,null)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d()}}}function oU(r){let t,n,e;function o(i){r[2](i)}let s={showToolOutput:!0,$$slots:{details:[rU],header:[nU],default:[tU]},$$scope:{ctx:r}};return r[1]!==void 0&&(s.collapsed=r[1]),t=new Me({props:s}),Pt.push(()=>re(t,"collapsed",o)),{c(){_(t.$$.fragment)},m(i,a){k(t,i,a),e=!0},p(i,[a]){const l={};9&a&&(l.$$scope={dirty:a,ctx:i}),!n&&2&a&&(n=!0,l.collapsed=i[1],oe(()=>n=!1)),t.$set(l)},i(i){e||(f(t.$$.fragment,i),e=!0)},o(i){m(t.$$.fragment,i),e=!1},d(i){C(t,i)}}}function sU(r,t,n){let{toolUseState:e}=t,o=!0;return r.$$set=s=>{"toolUseState"in s&&n(0,e=s.toolUseState)},[e,o,function(s){o=s,n(1,o)}]}function iU(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},r[0]],o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return{c(){t=Bt("svg"),n=new Oe(!0),this.h()},l(s){t=ze(s,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Ne(t);n=Re(i,!0),i.forEach(v),this.h()},h(){n.a=null,Ht(t,o)},m(s,i){Pe(s,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M136 80c4.4 0 8 3.6 8 8v80c0 4.4-3.6 8-8 8H56c-4.4 0-8-3.6-8-8V88c0-4.4 3.6-8 8-8zM56 32C25.1 32 0 57.1 0 88v80c0 30.9 25.1 56 56 56h80c5.6 0 11.1-.8 16.2-2.4l75.9 101.2c-2.7 6.5-4.1 13.7-4.1 21.2v80c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-80c0-30.9-25.1-56-56-56h-80c-5.6 0-11.1.8-16.2 2.4l-75.9-101.2c2.7-6.5 4.1-13.7 4.1-21.2v-16h192v16c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56V88c0-30.9-25.1-56-56-56h-80c-30.9 0-56 25.1-56 56v16H192V88c0-30.9-25.1-56-56-56zm304 304c4.4 0 8 3.6 8 8v80c0 4.4-3.6 8-8 8h-80c-4.4 0-8-3.6-8-8v-80c0-4.4 3.6-8 8-8zm80-256h80c4.4 0 8 3.6 8 8v80c0 4.4-3.6 8-8 8h-80c-4.4 0-8-3.6-8-8V88c0-4.4 3.6-8 8-8"/>',t)},p(s,[i]){Ht(t,o=Zt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},1&i&&s[0]]))},i:H,o:H,d(s){s&&v(t)}}}function aU(r,t,n){return r.$$set=e=>{n(0,t=lt(lt({},t),jt(e)))},[t=jt(t)]}class lU extends nt{constructor(t){super(),rt(this,t,aU,iU,ot,{})}}function cU(r){let t,n;return t=new lU({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function u$(r){let t,n,e,o,s,i=r[1].created>0&&h$(r),a=r[1].updated>0&&d$(r),l=r[1].deleted>0&&p$(r),c=r[1].created===0&&r[1].updated===0&&r[1].deleted===0&&f$(r);return{c(){t=I("div"),i&&i.c(),n=J(),a&&a.c(),e=J(),l&&l.c(),o=J(),c&&c.c(),T(t,"class","c-reorganize-task-list-tool__counts svelte-ztz22x")},m(u,h){S(u,t,h),i&&i.m(t,null),O(t,n),a&&a.m(t,null),O(t,e),l&&l.m(t,null),O(t,o),c&&c.m(t,null),s=!0},p(u,h){u[1].created>0?i?(i.p(u,h),2&h&&f(i,1)):(i=h$(u),i.c(),f(i,1),i.m(t,n)):i&&(Y(),m(i,1,1,()=>{i=null}),X()),u[1].updated>0?a?(a.p(u,h),2&h&&f(a,1)):(a=d$(u),a.c(),f(a,1),a.m(t,e)):a&&(Y(),m(a,1,1,()=>{a=null}),X()),u[1].deleted>0?l?(l.p(u,h),2&h&&f(l,1)):(l=p$(u),l.c(),f(l,1),l.m(t,o)):l&&(Y(),m(l,1,1,()=>{l=null}),X()),u[1].created===0&&u[1].updated===0&&u[1].deleted===0?c?2&h&&f(c,1):(c=f$(u),c.c(),f(c,1),c.m(t,null)):c&&(Y(),m(c,1,1,()=>{c=null}),X())},i(u){s||(f(i),f(a),f(l),f(c),s=!0)},o(u){m(i),m(a),m(l),m(c),s=!1},d(u){u&&v(t),i&&i.d(),a&&a.d(),l&&l.d(),c&&c.d()}}}function h$(r){let t,n;return t=new nr({props:{color:"success",size:1,$$slots:{default:[uU]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1026&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function uU(r){let t,n,e=r[1].created+"";return{c(){t=W(e),n=W(" created")},m(o,s){S(o,t,s),S(o,n,s)},p(o,s){2&s&&e!==(e=o[1].created+"")&&ht(t,e)},d(o){o&&(v(t),v(n))}}}function d$(r){let t,n;return t=new nr({props:{color:"info",size:1,$$slots:{default:[hU]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1026&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function hU(r){let t,n,e=r[1].updated+"";return{c(){t=W(e),n=W(" updated")},m(o,s){S(o,t,s),S(o,n,s)},p(o,s){2&s&&e!==(e=o[1].updated+"")&&ht(t,e)},d(o){o&&(v(t),v(n))}}}function p$(r){let t,n;return t=new nr({props:{color:"warning",size:1,$$slots:{default:[dU]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1026&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function dU(r){let t,n,e=r[1].deleted+"";return{c(){t=W(e),n=W(" deleted")},m(o,s){S(o,t,s),S(o,n,s)},p(o,s){2&s&&e!==(e=o[1].deleted+"")&&ht(t,e)},d(o){o&&(v(t),v(n))}}}function f$(r){let t,n;return t=new nr({props:{color:"info",size:1,$$slots:{default:[pU]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function pU(r){let t;return{c(){t=W("No changes")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function fU(r){let t,n,e=r[3]&&r[4]&&u$(r);return{c(){e&&e.c(),t=dt()},m(o,s){e&&e.m(o,s),S(o,t,s),n=!0},p(o,s){o[3]&&o[4]?e?(e.p(o,s),24&s&&f(e,1)):(e=u$(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d(o)}}}function gU(r){let t,n;return t=new Te({props:{slot:"header",toolName:"Reorganize Task List",$$slots:{secondary:[fU],icon:[cU]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1050&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function mU(r){let t,n,e;return n=new yt({props:{size:1,color:"neutral",$$slots:{default:[yU]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-reorganize-task-list-tool__no-diff svelte-ztz22x")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};1024&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function $U(r){let t,n;return t=new bp({props:{text:r[2]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};4&o&&(s.text=e[2]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function yU(r){let t;return{c(){t=W("No task changes to display")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function xU(r){let t,n,e,o;const s=[$U,mU],i=[];function a(l,c){return l[3]&&l[5]?0:l[3]&&!l[5]?1:-1}return~(n=a(r))&&(e=i[n]=s[n](r)),{c(){t=I("div"),e&&e.c(),T(t,"slot","details"),T(t,"class","c-reorganize-task-list-tool__details svelte-ztz22x")},m(l,c){S(l,t,c),~n&&i[n].m(t,null),o=!0},p(l,c){let u=n;n=a(l),n===u?~n&&i[n].p(l,c):(e&&(Y(),m(i[u],1,1,()=>{i[u]=null}),X()),~n?(e=i[n],e?e.p(l,c):(e=i[n]=s[n](l),e.c()),f(e,1),e.m(t,null)):e=null)},i(l){o||(f(e),o=!0)},o(l){m(e),o=!1},d(l){l&&v(t),~n&&i[n].d()}}}function bU(r){let t,n;const e=[{slot:"error"},r[0].result??{},{hideDetailedMessage:!0}];let o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return t=new To({props:o}),{c(){_(t.$$.fragment)},m(s,i){k(t,s,i),n=!0},p(s,i){const a=1&i?Zt(e,[e[0],Ze(s[0].result??{}),e[2]]):{};t.$set(a)},i(s){n||(f(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){C(t,s)}}}function wU(r){let t,n,e;function o(i){r[7](i)}let s={$$slots:{error:[bU],details:[xU],header:[gU]},$$scope:{ctx:r}};return r[4]!==void 0&&(s.collapsed=r[4]),t=new Me({props:s}),Pt.push(()=>re(t,"collapsed",o)),{c(){_(t.$$.fragment)},m(i,a){k(t,i,a),e=!0},p(i,[a]){const l={};1087&a&&(l.$$scope={dirty:a,ctx:i}),!n&&16&a&&(n=!0,l.collapsed=i[4],oe(()=>n=!1)),t.$set(l)},i(i){e||(f(t.$$.fragment,i),e=!0)},o(i){m(t.$$.fragment,i),e=!1},d(i){C(t,i)}}}function vU(r,t,n){let e,o,s,i,{toolUseState:a}=t,l=!0;const c=wp(Jt(Er.key));return r.$$set=u=>{"toolUseState"in u&&n(0,a=u.toolUseState)},r.$$.update=()=>{var u,h;1&r.$$.dirty&&c(a),1&r.$$.dirty&&n(3,e=((u=a.result)==null?void 0:u.text)&&!a.result.isError),1&r.$$.dirty&&n(2,o=((h=a.result)==null?void 0:h.text)||""),12&r.$$.dirty&&n(1,s=e?$d(o):{created:0,updated:0,deleted:0}),2&r.$$.dirty&&n(5,i=s.created>0||s.updated>0||s.deleted>0)},[a,s,o,e,l,i,{},function(u){l=u,n(4,l)}]}function _U(r){let t,n;return t=new Py({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function g$(r){let t,n,e,o,s,i=r[1].created>0&&m$(r),a=r[1].updated>0&&$$(r),l=r[1].deleted>0&&y$(r),c=r[1].created===0&&r[1].updated===0&&r[1].deleted===0&&x$(r);return{c(){t=I("div"),i&&i.c(),n=J(),a&&a.c(),e=J(),l&&l.c(),o=J(),c&&c.c(),T(t,"class","c-add-tasks-tool__counts svelte-1ajyjew")},m(u,h){S(u,t,h),i&&i.m(t,null),O(t,n),a&&a.m(t,null),O(t,e),l&&l.m(t,null),O(t,o),c&&c.m(t,null),s=!0},p(u,h){u[1].created>0?i?(i.p(u,h),2&h&&f(i,1)):(i=m$(u),i.c(),f(i,1),i.m(t,n)):i&&(Y(),m(i,1,1,()=>{i=null}),X()),u[1].updated>0?a?(a.p(u,h),2&h&&f(a,1)):(a=$$(u),a.c(),f(a,1),a.m(t,e)):a&&(Y(),m(a,1,1,()=>{a=null}),X()),u[1].deleted>0?l?(l.p(u,h),2&h&&f(l,1)):(l=y$(u),l.c(),f(l,1),l.m(t,o)):l&&(Y(),m(l,1,1,()=>{l=null}),X()),u[1].created===0&&u[1].updated===0&&u[1].deleted===0?c?2&h&&f(c,1):(c=x$(u),c.c(),f(c,1),c.m(t,null)):c&&(Y(),m(c,1,1,()=>{c=null}),X())},i(u){s||(f(i),f(a),f(l),f(c),s=!0)},o(u){m(i),m(a),m(l),m(c),s=!1},d(u){u&&v(t),i&&i.d(),a&&a.d(),l&&l.d(),c&&c.d()}}}function m$(r){let t,n;return t=new nr({props:{color:"success",size:1,$$slots:{default:[kU]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1026&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function kU(r){let t,n,e=r[1].created+"";return{c(){t=W(e),n=W(" created")},m(o,s){S(o,t,s),S(o,n,s)},p(o,s){2&s&&e!==(e=o[1].created+"")&&ht(t,e)},d(o){o&&(v(t),v(n))}}}function $$(r){let t,n;return t=new nr({props:{color:"info",size:1,$$slots:{default:[CU]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1026&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function CU(r){let t,n,e=r[1].updated+"";return{c(){t=W(e),n=W(" updated")},m(o,s){S(o,t,s),S(o,n,s)},p(o,s){2&s&&e!==(e=o[1].updated+"")&&ht(t,e)},d(o){o&&(v(t),v(n))}}}function y$(r){let t,n;return t=new nr({props:{color:"warning",size:1,$$slots:{default:[SU]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1026&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function SU(r){let t,n,e=r[1].deleted+"";return{c(){t=W(e),n=W(" deleted")},m(o,s){S(o,t,s),S(o,n,s)},p(o,s){2&s&&e!==(e=o[1].deleted+"")&&ht(t,e)},d(o){o&&(v(t),v(n))}}}function x$(r){let t,n;return t=new nr({props:{color:"info",size:1,$$slots:{default:[TU]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function TU(r){let t;return{c(){t=W("No changes")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function MU(r){let t,n,e=r[3]&&r[4]&&g$(r);return{c(){e&&e.c(),t=dt()},m(o,s){e&&e.m(o,s),S(o,t,s),n=!0},p(o,s){o[3]&&o[4]?e?(e.p(o,s),24&s&&f(e,1)):(e=g$(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d(o)}}}function AU(r){let t,n;return t=new Te({props:{slot:"header",toolName:"Add Tasks",$$slots:{secondary:[MU],icon:[_U]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1050&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function LU(r){let t,n,e;return n=new yt({props:{size:1,color:"neutral",$$slots:{default:[BU]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-add-tasks-tool__no-diff svelte-1ajyjew")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};1024&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function EU(r){let t,n;return t=new bp({props:{text:r[2]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};4&o&&(s.text=e[2]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function BU(r){let t;return{c(){t=W("No task changes to display")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function IU(r){let t,n,e,o;const s=[EU,LU],i=[];function a(l,c){return l[3]&&l[5]?0:l[3]&&!l[5]?1:-1}return~(n=a(r))&&(e=i[n]=s[n](r)),{c(){t=I("div"),e&&e.c(),T(t,"slot","details"),T(t,"class","c-add-tasks-tool__details svelte-1ajyjew")},m(l,c){S(l,t,c),~n&&i[n].m(t,null),o=!0},p(l,c){let u=n;n=a(l),n===u?~n&&i[n].p(l,c):(e&&(Y(),m(i[u],1,1,()=>{i[u]=null}),X()),~n?(e=i[n],e?e.p(l,c):(e=i[n]=s[n](l),e.c()),f(e,1),e.m(t,null)):e=null)},i(l){o||(f(e),o=!0)},o(l){m(e),o=!1},d(l){l&&v(t),~n&&i[n].d()}}}function FU(r){let t,n;const e=[{slot:"error"},r[0].result??{},{hideDetailedMessage:!0}];let o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return t=new To({props:o}),{c(){_(t.$$.fragment)},m(s,i){k(t,s,i),n=!0},p(s,i){const a=1&i?Zt(e,[e[0],Ze(s[0].result??{}),e[2]]):{};t.$set(a)},i(s){n||(f(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){C(t,s)}}}function DU(r){let t,n,e;function o(i){r[7](i)}let s={$$slots:{error:[FU],details:[IU],header:[AU]},$$scope:{ctx:r}};return r[4]!==void 0&&(s.collapsed=r[4]),t=new Me({props:s}),Pt.push(()=>re(t,"collapsed",o)),{c(){_(t.$$.fragment)},m(i,a){k(t,i,a),e=!0},p(i,[a]){const l={};1087&a&&(l.$$scope={dirty:a,ctx:i}),!n&&16&a&&(n=!0,l.collapsed=i[4],oe(()=>n=!1)),t.$set(l)},i(i){e||(f(t.$$.fragment,i),e=!0)},o(i){m(t.$$.fragment,i),e=!1},d(i){C(t,i)}}}function OU(r,t,n){let e,o,s,i,{toolUseState:a}=t,l=!0;const c=wp(Jt(Er.key));return r.$$set=u=>{"toolUseState"in u&&n(0,a=u.toolUseState)},r.$$.update=()=>{var u,h;1&r.$$.dirty&&c(a),1&r.$$.dirty&&n(3,e=((u=a.result)==null?void 0:u.text)&&!a.result.isError),1&r.$$.dirty&&n(2,o=((h=a.result)==null?void 0:h.text)||""),12&r.$$.dirty&&n(1,s=e?$d(o):{created:0,updated:0,deleted:0}),2&r.$$.dirty&&n(5,i=s.created>0||s.updated>0||s.deleted>0)},[a,s,o,e,l,i,{},function(u){l=u,n(4,l)}]}function zU(r){let t,n;return t=new fd({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function NU(r){let t,n;return t=new Te({props:{slot:"header",toolName:"Grep Search",$$slots:{icon:[zU]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};4&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function RU(r){let t;return{c(){t=I("div"),t.textContent="No search results available",T(t,"class","no-results svelte-rr09pp")},m(n,e){S(n,t,e)},p:H,i:H,o:H,d(n){n&&v(t)}}}function PU(r){let t;return{c(){t=I("div"),t.textContent="Searching...",T(t,"class","searching svelte-rr09pp")},m(n,e){S(n,t,e)},p:H,i:H,o:H,d(n){n&&v(t)}}}function UU(r){let t,n;return t=new ld({props:{token:{text:r[0].result.text,lang:"text",type:"code",raw:r[0].result.text}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1&o&&(s.token={text:e[0].result.text,lang:"text",type:"code",raw:e[0].result.text}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function qU(r){let t,n,e,o;const s=[UU,PU,RU],i=[];function a(l,c){var u,h,d;return(h=(u=l[0])==null?void 0:u.result)!=null&&h.text?0:((d=l[0])==null?void 0:d.phase)==="running"?1:2}return n=a(r),e=i[n]=s[n](r),{c(){t=I("div"),e.c(),T(t,"slot","details"),T(t,"class","tool-content svelte-rr09pp")},m(l,c){S(l,t,c),i[n].m(t,null),o=!0},p(l,c){let u=n;n=a(l),n===u?i[n].p(l,c):(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),e=i[n],e?e.p(l,c):(e=i[n]=s[n](l),e.c()),f(e,1),e.m(t,null))},i(l){o||(f(e),o=!0)},o(l){m(e),o=!1},d(l){l&&v(t),i[n].d()}}}function jU(r){let t,n;return t=new Me({props:{$$slots:{details:[qU],header:[NU]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};5&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function WU(r,t,n){let{toolUseState:e}=t;return r.$$set=o=>{"toolUseState"in o&&n(0,e=o.toolUseState)},[e,{}]}function HU(r){var s;const t=r.slice(),n=i_(t[0].toolUseInput);t[2]=n;const e=a_(t[0].toolUseInput);t[3]=e;const o=function(i){if(!i)return;const a=i.match(/lines \d+-\d+ of (\d+) total lines/);if(a)return parseInt(a[1],10);const l=i.match(/Viewing lines \d+-\d+ \((\d+) total lines\)/);if(l)return parseInt(l[1],10)}((s=t[0].toolUseState.result)==null?void 0:s.text);return t[4]=o,t}function VU(r){let t,n;return t=new _2({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function GU(r){var e;let t,n=ea(Hs((e=r[0].toolUseState.result)==null?void 0:e.text))?"View terminal output range":"View full output range";return{c(){t=W(n)},m(o,s){S(o,t,s)},p(o,s){var i;1&s&&n!==(n=ea(Hs((i=o[0].toolUseState.result)==null?void 0:i.text))?"View terminal output range":"View full output range")&&ht(t,n)},d(o){o&&v(t)}}}function b$(r){let t,n,e,o,s,i,a=r[2]+"",l=r[3]+"",c=r[4]&&w$(r);return{c(){t=I("span"),n=W("View lines "),e=W(a),o=W("-"),s=W(l),i=J(),c&&c.c(),T(t,"class","range-info svelte-gzswvu")},m(u,h){S(u,t,h),O(t,n),O(t,e),O(t,o),O(t,s),O(t,i),c&&c.m(t,null)},p(u,h){1&h&&a!==(a=u[2]+"")&&ht(e,a),1&h&&l!==(l=u[3]+"")&&ht(s,l),u[4]?c?c.p(u,h):(c=w$(u),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},d(u){u&&v(t),c&&c.d()}}}function ZU(r){var e;let t,n=ea(Hs((e=r[0].toolUseState.result)==null?void 0:e.text))?"Reading terminal output range...":"Reading full output range...";return{c(){t=W(n)},m(o,s){S(o,t,s)},p(o,s){var i;1&s&&n!==(n=ea(Hs((i=o[0].toolUseState.result)==null?void 0:i.text))?"Reading terminal output range...":"Reading full output range...")&&ht(t,n)},d(o){o&&v(t)}}}function w$(r){let t,n,e,o,s=r[4]+"";return{c(){t=I("span"),n=W("of "),e=W(s),o=W(" total lines"),T(t,"class","total-info svelte-gzswvu")},m(i,a){S(i,t,a),O(t,n),O(t,e),O(t,o)},p(i,a){1&a&&s!==(s=i[4]+"")&&ht(e,s)},d(i){i&&v(t)}}}function YU(r){let t,n;function e(a,l){return 1&l&&(t=null),a[0].toolUseState.phase<=$t.running?ZU:(t==null&&(t=!(!i_(a[0].toolUseInput)||!a_(a[0].toolUseInput))),t?b$:GU)}function o(a,l){return l===b$?HU(a):a}let s=e(r,-1),i=s(o(r,s));return{c(){i.c(),n=dt()},m(a,l){i.m(a,l),S(a,n,l)},p(a,l){s===(s=e(a,l))&&i?i.p(o(a,s),l):(i.d(1),i=s(o(a,s)),i&&(i.c(),i.m(n.parentNode,n)))},d(a){a&&v(n),i.d(a)}}}function XU(r){let t,n,e;return n=new yt({props:{size:1,class:"c-view-range-untruncated__secondary",$$slots:{default:[YU]},$$scope:{ctx:r}}}),{c(){t=I("span"),_(n.$$.fragment),T(t,"slot","secondary")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};33&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function QU(r){var e;let t,n;return t=new Te({props:{slot:"header",toolName:v$(Hs((e=r[0].toolUseState.result)==null?void 0:e.text)),$$slots:{secondary:[XU],icon:[VU]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(o,s){k(t,o,s),n=!0},p(o,s){var a;const i={};1&s&&(i.toolName=v$(Hs((a=o[0].toolUseState.result)==null?void 0:a.text))),33&s&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){C(t,o)}}}function KU(r){let t,n;return t=new Me({props:{$$slots:{header:[QU]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};33&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function i_(r){return typeof r.start_line=="number"?r.start_line:void 0}function a_(r){return typeof r.end_line=="number"?r.end_line:void 0}function Hs(r){if(!r)return;const t=r.match(/<!-- toolType: ([^>]+) -->/);return t?t[1]:void 0}function ea(r){return r?["launch-process","kill-process","read-process","write-process","list-processes","wait-process"].includes(r):!1}function v$(r){return ea(r)?"View Terminal Output":"View Full Output"}function JU(r,t,n){let e;const o=Rn();return Vt(r,o,s=>n(0,e=s)),[e,o]}function tq(r){let t,n;return t=new fd({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function eq(r){var e;let t,n=na(Vs((e=r[0].toolUseState.result)==null?void 0:e.text))?"Search terminal output":"Search full output";return{c(){t=W(n)},m(o,s){S(o,t,s)},p(o,s){var i;1&s&&n!==(n=na(Vs((i=o[0].toolUseState.result)==null?void 0:i.text))?"Search terminal output":"Search full output")&&ht(t,n)},d(o){o&&v(t)}}}function nq(r){let t,n,e,o,s,i=nd(r[0].toolUseInput)+"",a=gc(r[0].toolUseInput)!==2,l=a&&_$(r);return{c(){t=I("span"),n=W("Search for: "),e=I("code"),o=W(i),s=J(),l&&l.c(),T(e,"class","svelte-133ash6"),T(t,"class","search-info svelte-133ash6")},m(c,u){S(c,t,u),O(t,n),O(t,e),O(e,o),O(t,s),l&&l.m(t,null)},p(c,u){1&u&&i!==(i=nd(c[0].toolUseInput)+"")&&ht(o,i),1&u&&(a=gc(c[0].toolUseInput)!==2),a?l?l.p(c,u):(l=_$(c),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},d(c){c&&v(t),l&&l.d()}}}function rq(r){var e;let t,n=na(Vs((e=r[0].toolUseState.result)==null?void 0:e.text))?"Searching terminal output...":"Searching full output...";return{c(){t=W(n)},m(o,s){S(o,t,s)},p(o,s){var i;1&s&&n!==(n=na(Vs((i=o[0].toolUseState.result)==null?void 0:i.text))?"Searching terminal output...":"Searching full output...")&&ht(t,n)},d(o){o&&v(t)}}}function _$(r){let t,n,e,o,s=gc(r[0].toolUseInput)+"";return{c(){t=I("span"),n=W("("),e=W(s),o=W(" context lines)"),T(t,"class","context-info svelte-133ash6")},m(i,a){S(i,t,a),O(t,n),O(t,e),O(t,o)},p(i,a){1&a&&s!==(s=gc(i[0].toolUseInput)+"")&&ht(e,s)},d(i){i&&v(t)}}}function oq(r){let t,n;function e(i,a){return 1&a&&(t=null),i[0].toolUseState.phase<=$t.running?rq:(t==null&&(t=!!nd(i[0].toolUseInput)),t?nq:eq)}let o=e(r,-1),s=o(r);return{c(){s.c(),n=dt()},m(i,a){s.m(i,a),S(i,n,a)},p(i,a){o===(o=e(i,a))&&s?s.p(i,a):(s.d(1),s=o(i),s&&(s.c(),s.m(n.parentNode,n)))},d(i){i&&v(n),s.d(i)}}}function sq(r){let t,n,e;return n=new yt({props:{size:1,class:"c-search-untruncated__secondary",$$slots:{default:[oq]},$$scope:{ctx:r}}}),{c(){t=I("span"),_(n.$$.fragment),T(t,"slot","secondary")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};5&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function iq(r){var e;let t,n;return t=new Te({props:{slot:"header",toolName:k$(Vs((e=r[0].toolUseState.result)==null?void 0:e.text)),$$slots:{secondary:[sq],icon:[tq]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(o,s){k(t,o,s),n=!0},p(o,s){var a;const i={};1&s&&(i.toolName=k$(Vs((a=o[0].toolUseState.result)==null?void 0:a.text))),5&s&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){C(t,o)}}}function aq(r){let t,n;return t=new Me({props:{$$slots:{header:[iq]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};5&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function nd(r){return typeof r.search_term=="string"?r.search_term:void 0}function gc(r){return typeof r.context_lines=="number"?r.context_lines:2}function Vs(r){if(!r)return;const t=r.match(/<!-- toolType: ([^>]+) -->/);return t?t[1]:void 0}function na(r){return r?["launch-process","kill-process","read-process","write-process","list-processes","wait-process"].includes(r):!1}function k$(r){return na(r)?"Search Terminal Output":"Search Full Output"}function lq(r,t,n){let e;const o=Rn();return Vt(r,o,s=>n(0,e=s)),[e,o]}const C$={[In.shell]:lo,[In.webFetch]:class extends nt{constructor(r){super(),rt(this,r,tN,Jz,ot,{toolUseInput:0,toolUseState:1})}},[In.strReplaceEditor]:n_,[In.codebaseRetrieval]:s_,[In.removeFiles]:class extends nt{constructor(r){super(),rt(this,r,pN,dN,ot,{toolUseInput:1})}},[In.view]:class extends nt{constructor(r){super(),rt(this,r,rR,nR,ot,{toolUseInput:0,toolUseState:1})}},[In.viewTaskList]:class extends nt{constructor(r){super(),rt(this,r,sU,oU,ot,{toolUseState:0})}},[In.reorganizeTaskList]:class extends nt{constructor(r){super(),rt(this,r,vU,wU,ot,{toolUseInput:6,toolUseState:0})}get toolUseInput(){return this.$$.ctx[6]}},[In.updateTasks]:class extends nt{constructor(r){super(),rt(this,r,zP,OP,ot,{toolUseInput:6,toolUseState:0})}get toolUseInput(){return this.$$.ctx[6]}},[In.addTasks]:class extends nt{constructor(r){super(),rt(this,r,OU,DU,ot,{toolUseInput:6,toolUseState:0})}get toolUseInput(){return this.$$.ctx[6]}},[In.renderMermaid]:class extends nt{constructor(r){super(),rt(this,r,gR,fR,ot,{toolUseInput:4,toolUseState:0})}},[In.grepSearch]:class extends nt{constructor(r){super(),rt(this,r,WU,jU,ot,{toolUseInput:1,toolUseState:0})}get toolUseInput(){return this.$$.ctx[1]}},[In.viewRangeUntruncated]:class extends nt{constructor(r){super(),rt(this,r,JU,KU,ot,{})}},[In.searchUntruncated]:class extends nt{constructor(r){super(),rt(this,r,lq,aq,ot,{})}}};function cq(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},r[0]],o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return{c(){t=Bt("svg"),n=new Oe(!0),this.h()},l(s){t=ze(s,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Ne(t);n=Re(i,!0),i.forEach(v),this.h()},h(){n.a=null,Ht(t,o)},m(s,i){Pe(s,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M48 96v320c0 8.8 7.2 16 16 16h320c8.8 0 16-7.2 16-16V170.5c0-4.2-1.7-8.3-4.7-11.3l33.9-33.9c12 12 18.7 28.3 18.7 45.3L448 416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96c0-35.3 28.7-64 64-64h245.5c17 0 33.3 6.7 45.3 18.7l74.5 74.5-33.9 33.9-74.6-74.4-.8-.8V184c0 13.3-10.7 24-24 24H104c-13.3 0-24-10.7-24-24V80H64c-8.8 0-16 7.2-16 16m80-16v80h144V80zm32 240a64 64 0 1 1 128 0 64 64 0 1 1-128 0"/>',t)},p(s,[i]){Ht(t,o=Zt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},1&i&&s[0]]))},i:H,o:H,d(s){s&&v(t)}}}function uq(r,t,n){return r.$$set=e=>{n(0,t=lt(lt({},t),jt(e)))},[t=jt(t)]}class hq extends nt{constructor(t){super(),rt(this,t,uq,cq,ot,{})}}const dq=r=>({}),S$=r=>({}),pq=r=>({}),T$=r=>({});function fq(r){let t;return{c(){t=W(r[0])},m(n,e){S(n,t,e)},p(n,e){1&e&&ht(t,n[0])},d(n){n&&v(t)}}}function M$(r){let t,n,e;function o(i){r[15](i)}let s={onOpenChange:r[11],content:r[8]||"Copy to clipboard",side:"bottom",triggerOn:[Jn.Hover],$$slots:{default:[mq]},$$scope:{ctx:r}};return r[9]!==void 0&&(s.requestClose=r[9]),t=new he({props:s}),Pt.push(()=>re(t,"requestClose",o)),{c(){_(t.$$.fragment)},m(i,a){k(t,i,a),e=!0},p(i,a){const l={};256&a&&(l.content=i[8]||"Copy to clipboard"),262146&a&&(l.$$scope={dirty:a,ctx:i}),!n&&512&a&&(n=!0,l.requestClose=i[9],oe(()=>n=!1)),t.$set(l)},i(i){e||(f(t.$$.fragment,i),e=!0)},o(i){m(t.$$.fragment,i),e=!1},d(i){C(t,i)}}}function gq(r){let t,n;return t=new R_({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function mq(r){let t,n;return t=new xe({props:{variant:"ghost-block",color:"neutral",size:1,disabled:!r[1],$$slots:{default:[gq]},$$scope:{ctx:r}}}),t.$on("click",r[12]),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};2&o&&(s.disabled=!e[1]),262144&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function A$(r){let t,n;return t=new he({props:{content:"View full content in editor",side:"bottom",$$slots:{default:[yq]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};262154&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function $q(r){let t,n;return t=new la({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function yq(r){let t,n;return t=new xe({props:{variant:"ghost-block",color:"neutral",size:1,disabled:!r[1],$$slots:{default:[$q]},$$scope:{ctx:r}}}),t.$on("click",function(){Be(r[3])&&r[3].apply(this,arguments)}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){r=e;const s={};2&o&&(s.disabled=!r[1]),262144&o&&(s.$$scope={dirty:o,ctx:r}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function xq(r){let t,n,e;return n=new yt({props:{size:1,color:"secondary",$$slots:{default:[wq]},$$scope:{ctx:r}}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-monaco-output-block__empty-state svelte-181jf9")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};262144&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function bq(r){let t,n,e,o,s=!r[10]&&L$(r);return e=new Y_.Root({props:{$$slots:{default:[vq]},$$scope:{ctx:r}}}),{c(){t=I("div"),s&&s.c(),n=J(),_(e.$$.fragment),T(t,"class","c-monaco-output-block__monaco-container svelte-181jf9")},m(i,a){S(i,t,a),s&&s.m(t,null),O(t,n),k(e,t,null),o=!0},p(i,a){i[10]?s&&(s.d(1),s=null):s?s.p(i,a):(s=L$(i),s.c(),s.m(t,n));const l={};262294&a&&(l.$$scope={dirty:a,ctx:i}),e.$set(l)},i(i){o||(f(e.$$.fragment,i),o=!0)},o(i){m(e.$$.fragment,i),o=!1},d(i){i&&v(t),s&&s.d(),C(e)}}}function wq(r){let t;return{c(){t=W("No content available.")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function L$(r){let t,n,e;return{c(){t=I("button"),T(t,"class","c-monaco-output-block__overlay svelte-181jf9")},m(o,s){S(o,t,s),n||(e=Kt(t,"click",r[16]),n=!0)},p:H,d(o){o&&v(t),n=!1,e()}}}function vq(r){let t,n,e;function o(i){r[17](i)}let s={height:100,options:r[4],text:r[1],lang:r[2]};return r[7]!==void 0&&(s.editorInstance=r[7]),t=new hd({props:s}),Pt.push(()=>re(t,"editorInstance",o)),{c(){_(t.$$.fragment)},m(i,a){k(t,i,a),e=!0},p(i,a){const l={};16&a&&(l.options=i[4]),2&a&&(l.text=i[1]),4&a&&(l.lang=i[2]),!n&&128&a&&(n=!0,l.editorInstance=i[7],oe(()=>n=!1)),t.$set(l)},i(i){e||(f(t.$$.fragment,i),e=!0)},o(i){m(t.$$.fragment,i),e=!1},d(i){C(t,i)}}}function _q(r){let t,n,e,o,s,i,a,l,c,u;const h=r[14].label,d=Ot(h,r,r[18],T$),p=d||function(A){let B,E;return B=new yt({props:{size:1,weight:"medium",$$slots:{default:[fq]},$$scope:{ctx:A}}}),{c(){_(B.$$.fragment)},m(F,U){k(B,F,U),E=!0},p(F,U){const tt={};262145&U&&(tt.$$scope={dirty:U,ctx:F}),B.$set(tt)},i(F){E||(f(B.$$.fragment,F),E=!0)},o(F){m(B.$$.fragment,F),E=!1},d(F){C(B,F)}}}(r);let g=r[5]&&M$(r),$=r[6]&&A$(r);const b=r[14].actions,y=Ot(b,r,r[18],S$),x=[bq,xq],M=[];function L(A,B){return A[1]?0:1}return l=L(r),c=M[l]=x[l](r),{c(){t=I("div"),n=I("div"),p&&p.c(),e=J(),o=I("div"),g&&g.c(),s=J(),$&&$.c(),i=J(),y&&y.c(),a=J(),c.c(),T(o,"class","c-monaco-output-block__actions svelte-181jf9"),T(n,"class","c-monaco-output-block__header svelte-181jf9"),T(t,"class","c-monaco-output-block svelte-181jf9")},m(A,B){S(A,t,B),O(t,n),p&&p.m(n,null),O(n,e),O(n,o),g&&g.m(o,null),O(o,s),$&&$.m(o,null),O(o,i),y&&y.m(o,null),O(t,a),M[l].m(t,null),u=!0},p(A,[B]){d?d.p&&(!u||262144&B)&&zt(d,h,A,A[18],u?Rt(h,A[18],B,pq):Nt(A[18]),T$):p&&p.p&&(!u||1&B)&&p.p(A,u?B:-1),A[5]?g?(g.p(A,B),32&B&&f(g,1)):(g=M$(A),g.c(),f(g,1),g.m(o,s)):g&&(Y(),m(g,1,1,()=>{g=null}),X()),A[6]?$?($.p(A,B),64&B&&f($,1)):($=A$(A),$.c(),f($,1),$.m(o,i)):$&&(Y(),m($,1,1,()=>{$=null}),X()),y&&y.p&&(!u||262144&B)&&zt(y,b,A,A[18],u?Rt(b,A[18],B,dq):Nt(A[18]),S$);let E=l;l=L(A),l===E?M[l].p(A,B):(Y(),m(M[E],1,1,()=>{M[E]=null}),X(),c=M[l],c?c.p(A,B):(c=M[l]=x[l](A),c.c()),f(c,1),c.m(t,null))},i(A){u||(f(p,A),f(g),f($),f(y,A),f(c),u=!0)},o(A){m(p,A),m(g),m($),m(y,A),m(c),u=!1},d(A){A&&v(t),p&&p.d(A),g&&g.d(),$&&$.d(),y&&y.d(A),M[l].d()}}}function kq(r,t,n){let e,o,s,{$$slots:i={},$$scope:a}=t,{label:l}=t,{content:c}=t,{language:u}=t,{doScrollToBottom:h=!1}=t,{onViewInFile:d}=t,{monacoOptions:p={lineNumbers:"off",wordWrap:"off",lineDecorationsWidth:0,folding:!1,showFoldingControls:"never",readOnly:!0,stickyScroll:{enabled:!1},overviewRulerLanes:0,scrollbar:{vertical:"auto",horizontal:"auto",alwaysConsumeMouseWheel:!1,verticalScrollbarSize:5}}}=t,{showCopyButton:g=!0}=t,{showViewInFileButton:$=!0}=t,b=()=>{},y=!1;return r.$$set=x=>{"label"in x&&n(0,l=x.label),"content"in x&&n(1,c=x.content),"language"in x&&n(2,u=x.language),"doScrollToBottom"in x&&n(13,h=x.doScrollToBottom),"onViewInFile"in x&&n(3,d=x.onViewInFile),"monacoOptions"in x&&n(4,p=x.monacoOptions),"showCopyButton"in x&&n(5,g=x.showCopyButton),"showViewInFileButton"in x&&n(6,$=x.showViewInFileButton),"$$scope"in x&&n(18,a=x.$$scope)},r.$$.update=()=>{8320&r.$$.dirty&&h&&s&&h&&s&&(s==null||s.layout(),s.revealLine(s.getModel().getLineCount())),128&r.$$.dirty&&s&&s&&(s.onDidFocusEditorText(()=>{n(10,y=!0)}),s.onDidBlurEditorText(()=>{n(10,y=!1)}))},[l,c,u,d,p,g,$,s,o,b,y,function(x){x||(e&&clearTimeout(e),e=void 0,n(8,o=void 0))},async function(){if(c){e&&clearTimeout(e);try{await navigator.clipboard.writeText(c),n(8,o="Copied!"),e=setTimeout(b,1500)}catch(x){console.error("Failed to copy:",x),n(8,o="Copy failed"),e=setTimeout(b,1500)}}},h,i,function(x){b=x,n(9,b)},()=>s==null?void 0:s.focus(),function(x){s=x,n(7,s)},a]}class l_ extends nt{constructor(t){super(),rt(this,t,kq,_q,ot,{label:0,content:1,language:2,doScrollToBottom:13,onViewInFile:3,monacoOptions:4,showCopyButton:5,showViewInFileButton:6})}}var Wr=(r=>(r.SUCCESS="SUCCESS",r.SKIPPED="SKIPPED",r.FAILED="FAILED",r))(Wr||{});function Cq(r){let t,n;return{c(){t=Bt("svg"),n=Bt("path"),T(n,"fill-rule","evenodd"),T(n,"clip-rule","evenodd"),T(n,"d","M7.49991 0.877075C3.84222 0.877075 0.877075 3.84222 0.877075 7.49991C0.877075 11.1576 3.84222 14.1227 7.49991 14.1227C11.1576 14.1227 14.1227 11.1576 14.1227 7.49991C14.1227 3.84222 11.1576 0.877075 7.49991 0.877075ZM3.85768 3.15057C4.84311 2.32448 6.11342 1.82708 7.49991 1.82708C10.6329 1.82708 13.1727 4.36689 13.1727 7.49991C13.1727 8.88638 12.6753 10.1567 11.8492 11.1421L3.85768 3.15057ZM3.15057 3.85768C2.32448 4.84311 1.82708 6.11342 1.82708 7.49991C1.82708 10.6329 4.36689 13.1727 7.49991 13.1727C8.88638 13.1727 10.1567 12.6753 11.1421 11.8492L3.15057 3.85768Z"),T(n,"fill","currentColor"),T(t,"width","15"),T(t,"height","15"),T(t,"viewBox","0 0 15 15"),T(t,"fill","none"),T(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){S(e,t,o),O(t,n)},p:H,i:H,o:H,d(e){e&&v(t)}}}class Sq extends nt{constructor(t){super(),rt(this,t,null,Cq,ot,{})}}function Tq(r){let t,n;return t=new Sq({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Mq(r){let t,n;return t=new $p({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Aq(r){let t,n;return t=new dd({}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Lq(r){let t,n;return t=new Kr({props:{size:1}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Eq(r){let t,n,e,o,s;const i=[Lq,Aq,Mq,Tq],a=[];function l(c,u){return c[0]==="loading"?0:c[0]==="success"?1:c[0]==="error"?2:c[0]==="skipped"?3:-1}return~(n=l(r))&&(e=a[n]=i[n](r)),{c(){t=I("div"),e&&e.c(),T(t,"class",o="c-setup-script-command-status c-setup-script-command-status--"+r[0]+" svelte-1azgu93")},m(c,u){S(c,t,u),~n&&a[n].m(t,null),s=!0},p(c,[u]){let h=n;n=l(c),n!==h&&(e&&(Y(),m(a[h],1,1,()=>{a[h]=null}),X()),~n?(e=a[n],e||(e=a[n]=i[n](c),e.c()),f(e,1),e.m(t,null)):e=null),(!s||1&u&&o!==(o="c-setup-script-command-status c-setup-script-command-status--"+c[0]+" svelte-1azgu93"))&&T(t,"class",o)},i(c){s||(f(e),s=!0)},o(c){m(e),s=!1},d(c){c&&v(t),~n&&a[n].d()}}}function Bq(r,t,n){let{commandResult:e}=t;return r.$$set=o=>{"commandResult"in o&&n(0,e=o.commandResult)},[e]}class vp extends nt{constructor(t){super(),rt(this,t,Bq,Eq,ot,{commandResult:0})}}function E$(r,t,n){const e=r.slice();return e[31]=t[n],e}function B$(r,t,n){const e=r.slice();return e[28]=t[n],e}function I$(r,t,n){const e=r.slice();return e[34]=t[n],e}function Iq(r){let t;return{c(){t=W("Setup script created")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function Fq(r){let t,n,e,o;return e=new rs({}),{c(){t=W(r[5]),n=J(),_(e.$$.fragment)},m(s,i){S(s,t,i),S(s,n,i),k(e,s,i),o=!0},p(s,i){(!o||32&i[0])&&ht(t,s[5])},i(s){o||(f(e.$$.fragment,s),o=!0)},o(s){m(e.$$.fragment,s),o=!1},d(s){s&&(v(t),v(n)),C(e,s)}}}function F$(r){let t,n;return t=new l_({props:{label:"Generated script",content:r[7],language:"bash",onViewInFile:r[10],$$slots:{actions:[qq]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};128&o[0]&&(s.content=e[7]),80&o[0]|64&o[1]&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Dq(r){let t;return{c(){t=W("Save")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function Oq(r){let t,n;return t=new hq({props:{slot:"iconLeft"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function zq(r){let t,n,e;return n=new Lr({props:{variant:"ghost-block",color:"neutral",size:1,$$slots:{iconLeft:[Oq],default:[Dq]},$$scope:{ctx:r}}}),n.$on("click",function(){Be(r[4])&&r[4].apply(this,arguments)}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-setup-script-tool__save-button svelte-16hgyhq")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){r=o;const i={};64&s[1]&&(i.$$scope={dirty:s,ctx:r}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function Nq(r){let t,n;return t=new he({props:{content:"Save script",side:"bottom",$$slots:{default:[zq]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};16&o[0]|64&o[1]&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function D$(r){let t,n,e;var o=r[34].endIcon;return o&&(n=Nn(o,{})),{c(){t=I("div"),n&&_(n.$$.fragment),T(t,"class","c-setup-script-tool__save-option-icon svelte-16hgyhq")},m(s,i){S(s,t,i),n&&k(n,t,null),e=!0},p(s,i){if(64&i[0]&&o!==(o=s[34].endIcon)){if(n){Y();const a=n;m(a.$$.fragment,1,0,()=>{C(a,1)}),X()}o?(n=Nn(o,{}),_(n.$$.fragment),f(n.$$.fragment,1),k(n,t,null)):n=null}},i(s){e||(n&&f(n.$$.fragment,s),e=!0)},o(s){n&&m(n.$$.fragment,s),e=!1},d(s){s&&v(t),n&&C(n)}}}function Rq(r){let t,n,e,o,s,i,a=r[34].label+"",l=r[34].endIcon&&D$(r);return{c(){t=I("div"),n=I("span"),e=W(a),o=J(),l&&l.c(),s=J(),T(t,"class","c-setup-script-tool__save-option-container svelte-16hgyhq")},m(c,u){S(c,t,u),O(t,n),O(n,e),O(t,o),l&&l.m(t,null),S(c,s,u),i=!0},p(c,u){(!i||64&u[0])&&a!==(a=c[34].label+"")&&ht(e,a),c[34].endIcon?l?(l.p(c,u),64&u[0]&&f(l,1)):(l=D$(c),l.c(),f(l,1),l.m(t,null)):l&&(Y(),m(l,1,1,()=>{l=null}),X())},i(c){i||(f(l),i=!0)},o(c){m(l),i=!1},d(c){c&&(v(t),v(s)),l&&l.d()}}}function O$(r){let t,n;function e(...o){return r[18](r[34],...o)}return t=new Ie.Item({props:{onSelect:e,$$slots:{default:[Rq]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(o,s){k(t,o,s),n=!0},p(o,s){r=o;const i={};64&s[0]&&(i.onSelect=e),64&s[0]|64&s[1]&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){C(t,o)}}}function Pq(r){let t,n,e=Gt(r[6]),o=[];for(let i=0;i<e.length;i+=1)o[i]=O$(I$(r,e,i));const s=i=>m(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=dt()},m(i,a){for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(i,a);S(i,t,a),n=!0},p(i,a){if(576&a[0]){let l;for(e=Gt(i[6]),l=0;l<e.length;l+=1){const c=I$(i,e,l);o[l]?(o[l].p(c,a),f(o[l],1)):(o[l]=O$(c),o[l].c(),f(o[l],1),o[l].m(t.parentNode,t))}for(Y(),l=e.length;l<o.length;l+=1)s(l);X()}},i(i){if(!n){for(let a=0;a<e.length;a+=1)f(o[a]);n=!0}},o(i){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)m(o[a]);n=!1},d(i){i&&v(t),un(o,i)}}}function Uq(r){let t,n,e,o;return t=new Ie.Trigger({props:{$$slots:{default:[Nq]},$$scope:{ctx:r}}}),e=new Ie.Content({props:{side:"bottom",align:"start",$$slots:{default:[Pq]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment),n=J(),_(e.$$.fragment)},m(s,i){k(t,s,i),S(s,n,i),k(e,s,i),o=!0},p(s,i){const a={};16&i[0]|64&i[1]&&(a.$$scope={dirty:i,ctx:s}),t.$set(a);const l={};64&i[0]|64&i[1]&&(l.$$scope={dirty:i,ctx:s}),e.$set(l)},i(s){o||(f(t.$$.fragment,s),f(e.$$.fragment,s),o=!0)},o(s){m(t.$$.fragment,s),m(e.$$.fragment,s),o=!1},d(s){s&&v(n),C(t,s),C(e,s)}}}function qq(r){let t,n,e,o;function s(a){r[19](a)}let i={$$slots:{default:[Uq]},$$scope:{ctx:r}};return r[4]!==void 0&&(i.requestOpen=r[4]),n=new Ie.Root({props:i}),Pt.push(()=>re(n,"requestOpen",s)),{c(){t=I("div"),_(n.$$.fragment),T(t,"slot","actions")},m(a,l){S(a,t,l),k(n,t,null),o=!0},p(a,l){const c={};80&l[0]|64&l[1]&&(c.$$scope={dirty:l,ctx:a}),!e&&16&l[0]&&(e=!0,c.requestOpen=a[4],oe(()=>e=!1)),n.$set(c)},i(a){o||(f(n.$$.fragment,a),o=!0)},o(a){m(n.$$.fragment,a),o=!1},d(a){a&&v(t),C(n)}}}function z$(r){var o;let t,n,e=((o=r[2])==null?void 0:o.output)&&N$(r);return{c(){e&&e.c(),t=dt()},m(s,i){e&&e.m(s,i),S(s,t,i),n=!0},p(s,i){var a;(a=s[2])!=null&&a.output?e?(e.p(s,i),4&i[0]&&f(e,1)):(e=N$(s),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(s){n||(f(e),n=!0)},o(s){m(e),n=!1},d(s){s&&v(t),e&&e.d(s)}}}function N$(r){let t,n;return t=new l_({props:{content:r[2].output,language:"bash",doScrollToBottom:!0,onViewInFile:r[20],$$slots:{label:[Gq]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};4&o[0]&&(s.content=e[2].output),4&o[0]&&(s.onViewInFile=e[20]),12&o[0]|64&o[1]&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function jq(r){let t;return{c(){t=W("Script failed to run")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function Wq(r){let t;return{c(){t=W("Script ran successfully")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function Hq(r){let t;return{c(){t=W("Running script...")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function Vq(r){let t;function n(s,i){return s[3]?Hq:s[2].status===Wr.SUCCESS?Wq:s[2].status===Wr.FAILED?jq:void 0}let e=n(r),o=e&&e(r);return{c(){o&&o.c(),t=dt()},m(s,i){o&&o.m(s,i),S(s,t,i)},p(s,i){e!==(e=n(s))&&(o&&o.d(1),o=e&&e(s),o&&(o.c(),o.m(t.parentNode,t)))},d(s){s&&v(t),o&&o.d(s)}}}function Gq(r){let t,n,e,o,s,i,a;return e=new vp({props:{commandResult:r[3]?"loading":r[2].status?r[12][r[2].status]:"none"}}),i=new yt({props:{size:1,weight:"medium",$$slots:{default:[Vq]},$$scope:{ctx:r}}}),{c(){t=I("div"),n=I("div"),_(e.$$.fragment),o=J(),s=I("div"),_(i.$$.fragment),T(s,"class","c-setup-script-tool__row__title svelte-16hgyhq"),T(t,"class","c-setup-script-tool__row svelte-16hgyhq"),T(t,"slot","label")},m(l,c){S(l,t,c),O(t,n),k(e,n,null),O(t,o),O(t,s),k(i,s,null),a=!0},p(l,c){const u={};12&c[0]&&(u.commandResult=l[3]?"loading":l[2].status?l[12][l[2].status]:"none"),e.$set(u);const h={};12&c[0]|64&c[1]&&(h.$$scope={dirty:c,ctx:l}),i.$set(h)},i(l){a||(f(e.$$.fragment,l),f(i.$$.fragment,l),a=!0)},o(l){m(e.$$.fragment,l),m(i.$$.fragment,l),a=!1},d(l){l&&v(t),C(e),C(i)}}}function R$(r){let t,n,e,o,s,i;n=new yt({props:{size:1,weight:"medium",class:"c-setup-script-tool__section-header",$$slots:{default:[Zq]},$$scope:{ctx:r}}});const a=[Xq,Yq],l=[];function c(u,h){return u[3]&&u[8].length>0?0:1}return o=c(r),s=l[o]=a[o](r),{c(){t=I("div"),_(n.$$.fragment),e=J(),s.c(),T(t,"class","c-setup-script-tool__section svelte-16hgyhq")},m(u,h){S(u,t,h),k(n,t,null),O(t,e),l[o].m(t,null),i=!0},p(u,h){const d={};64&h[1]&&(d.$$scope={dirty:h,ctx:u}),n.$set(d);let p=o;o=c(u),o===p?l[o].p(u,h):(Y(),m(l[p],1,1,()=>{l[p]=null}),X(),s=l[o],s?s.p(u,h):(s=l[o]=a[o](u),s.c()),f(s,1),s.m(t,null))},i(u){i||(f(n.$$.fragment,u),f(s),i=!0)},o(u){m(n.$$.fragment,u),m(s),i=!1},d(u){u&&v(t),C(n),l[o].d()}}}function Zq(r){let t;return{c(){t=W("Test Results:")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function Yq(r){let t,n,e=Gt(r[1]),o=[];for(let i=0;i<e.length;i+=1)o[i]=P$(E$(r,e,i));const s=i=>m(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=dt()},m(i,a){for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(i,a);S(i,t,a),n=!0},p(i,a){if(6146&a[0]){let l;for(e=Gt(i[1]),l=0;l<e.length;l+=1){const c=E$(i,e,l);o[l]?(o[l].p(c,a),f(o[l],1)):(o[l]=P$(c),o[l].c(),f(o[l],1),o[l].m(t.parentNode,t))}for(Y(),l=e.length;l<o.length;l+=1)s(l);X()}},i(i){if(!n){for(let a=0;a<e.length;a+=1)f(o[a]);n=!0}},o(i){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)m(o[a]);n=!1},d(i){i&&v(t),un(o,i)}}}function Xq(r){let t,n,e=Gt(r[8]),o=[];for(let i=0;i<e.length;i+=1)o[i]=U$(B$(r,e,i));const s=i=>m(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=dt()},m(i,a){for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(i,a);S(i,t,a),n=!0},p(i,a){if(2304&a[0]){let l;for(e=Gt(i[8]),l=0;l<e.length;l+=1){const c=B$(i,e,l);o[l]?(o[l].p(c,a),f(o[l],1)):(o[l]=U$(c),o[l].c(),f(o[l],1),o[l].m(t.parentNode,t))}for(Y(),l=e.length;l<o.length;l+=1)s(l);X()}},i(i){if(!n){for(let a=0;a<e.length;a+=1)f(o[a]);n=!0}},o(i){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)m(o[a]);n=!1},d(i){i&&v(t),un(o,i)}}}function Qq(r){let t,n=r[31].command+"";return{c(){t=W(n)},m(e,o){S(e,t,o)},p(e,o){2&o[0]&&n!==(n=e[31].command+"")&&ht(t,n)},d(e){e&&v(t)}}}function Kq(r){let t,n;return t=new yt({props:{size:1,type:"monospace",$$slots:{default:[Qq]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};2&o[0]|64&o[1]&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Jq(r){let t;return{c(){t=W("View")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function tj(r){let t,n;return t=new la({props:{slot:"iconRight"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function ej(r){let t,n;return t=new Lr({props:{variant:"ghost-block",color:"neutral",size:1,$$slots:{iconRight:[tj],default:[Jq]},$$scope:{ctx:r}}}),t.$on("click",function(){return r[22](r[31])}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){r=e;const s={};64&o[1]&&(s.$$scope={dirty:o,ctx:r}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function P$(r){let t,n,e,o,s,i,a,l,c,u,h;return e=new vp({props:{commandResult:r[31].status?r[12][r[31].status]:"none"}}),i=new he({props:{content:r[31].command,side:"bottom",class:"c-setup-script-tool__row__title__container",$$slots:{default:[Kq]},$$scope:{ctx:r}}}),c=new he({props:{content:"View full test result in editor",side:"bottom",$$slots:{default:[ej]},$$scope:{ctx:r}}}),{c(){t=I("div"),n=I("div"),_(e.$$.fragment),o=J(),s=I("div"),_(i.$$.fragment),a=J(),l=I("div"),_(c.$$.fragment),u=J(),T(n,"class","c-setup-script-tool__row__status svelte-16hgyhq"),T(s,"class","c-setup-script-tool__row__title svelte-16hgyhq"),T(l,"class","c-setup-script-tool__row__actions"),T(t,"class","c-setup-script-tool__row svelte-16hgyhq")},m(d,p){S(d,t,p),O(t,n),k(e,n,null),O(t,o),O(t,s),k(i,s,null),O(t,a),O(t,l),k(c,l,null),O(t,u),h=!0},p(d,p){const g={};2&p[0]&&(g.commandResult=d[31].status?d[12][d[31].status]:"none"),e.$set(g);const $={};2&p[0]&&($.content=d[31].command),2&p[0]|64&p[1]&&($.$$scope={dirty:p,ctx:d}),i.$set($);const b={};2&p[0]|64&p[1]&&(b.$$scope={dirty:p,ctx:d}),c.$set(b)},i(d){h||(f(e.$$.fragment,d),f(i.$$.fragment,d),f(c.$$.fragment,d),h=!0)},o(d){m(e.$$.fragment,d),m(i.$$.fragment,d),m(c.$$.fragment,d),h=!1},d(d){d&&v(t),C(e),C(i),C(c)}}}function nj(r){let t,n=r[28]+"";return{c(){t=W(n)},m(e,o){S(e,t,o)},p(e,o){256&o[0]&&n!==(n=e[28]+"")&&ht(t,n)},d(e){e&&v(t)}}}function rj(r){let t,n;return t=new yt({props:{size:1,weight:"medium",$$slots:{default:[nj]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};256&o[0]|64&o[1]&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function oj(r){let t;return{c(){t=W("View")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function sj(r){let t,n;return t=new la({props:{slot:"iconRight"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function ij(r){let t,n;return t=new Lr({props:{variant:"ghost-block",color:"neutral",size:1,$$slots:{iconRight:[sj],default:[oj]},$$scope:{ctx:r}}}),t.$on("click",function(){return r[21](r[28])}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){r=e;const s={};64&o[1]&&(s.$$scope={dirty:o,ctx:r}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function U$(r){let t,n,e,o,s,i,a,l,c,u;return e=new vp({props:{commandResult:"loading"}}),i=new he({props:{content:r[28],side:"bottom",class:"c-setup-script-tool__row__title__container",$$slots:{default:[rj]},$$scope:{ctx:r}}}),l=new he({props:{content:"View full test result in editor",side:"bottom",$$slots:{default:[ij]},$$scope:{ctx:r}}}),{c(){t=I("div"),n=I("div"),_(e.$$.fragment),o=J(),s=I("div"),_(i.$$.fragment),a=J(),_(l.$$.fragment),c=J(),T(n,"class","c-setup-script-tool__row__status svelte-16hgyhq"),T(s,"class","c-setup-script-tool__row__title svelte-16hgyhq"),T(t,"class","c-setup-script-tool__row svelte-16hgyhq")},m(h,d){S(h,t,d),O(t,n),k(e,n,null),O(t,o),O(t,s),k(i,s,null),O(t,a),k(l,t,null),O(t,c),u=!0},p(h,d){const p={};256&d[0]&&(p.content=h[28]),256&d[0]|64&d[1]&&(p.$$scope={dirty:d,ctx:h}),i.$set(p);const g={};256&d[0]|64&d[1]&&(g.$$scope={dirty:d,ctx:h}),l.$set(g)},i(h){u||(f(e.$$.fragment,h),f(i.$$.fragment,h),f(l.$$.fragment,h),u=!0)},o(h){m(e.$$.fragment,h),m(i.$$.fragment,h),m(l.$$.fragment,h),u=!1},d(h){h&&v(t),C(e),C(i),C(l)}}}function aj(r){let t,n,e,o,s,i,a,l,c,u,h,d,p,g;i=new yt({props:{size:2,weight:"medium",$$slots:{default:[Iq]},$$scope:{ctx:r}}}),c=new yt({props:{size:1,$$slots:{default:[Fq]},$$scope:{ctx:r}}});let $=r[7]&&F$(r),b=(r[2]||r[3])&&z$(r),y=(r[1].length>0||r[3]&&r[8].length>0)&&R$(r);return{c(){t=I("div"),n=I("div"),o=J(),s=I("div"),_(i.$$.fragment),a=J(),l=I("div"),_(c.$$.fragment),u=J(),h=I("div"),$&&$.c(),d=J(),b&&b.c(),p=J(),y&&y.c(),T(n,"class","c-setup-script-tool__id svelte-16hgyhq"),T(n,"data-tool-id",e=r[0].tool_use_id),T(l,"class","c-setup-script-tool__script__actions svelte-16hgyhq"),T(s,"class","c-setup-script-tool__script svelte-16hgyhq"),T(h,"class","c-setup-script-tool__section svelte-16hgyhq"),T(t,"class","c-setup-script-tool svelte-16hgyhq")},m(x,M){S(x,t,M),O(t,n),O(t,o),O(t,s),k(i,s,null),O(s,a),O(s,l),k(c,l,null),O(t,u),O(t,h),$&&$.m(h,null),O(h,d),b&&b.m(h,null),O(t,p),y&&y.m(t,null),g=!0},p(x,M){(!g||1&M[0]&&e!==(e=x[0].tool_use_id))&&T(n,"data-tool-id",e);const L={};64&M[1]&&(L.$$scope={dirty:M,ctx:x}),i.$set(L);const A={};32&M[0]|64&M[1]&&(A.$$scope={dirty:M,ctx:x}),c.$set(A),x[7]?$?($.p(x,M),128&M[0]&&f($,1)):($=F$(x),$.c(),f($,1),$.m(h,d)):$&&(Y(),m($,1,1,()=>{$=null}),X()),x[2]||x[3]?b?(b.p(x,M),12&M[0]&&f(b,1)):(b=z$(x),b.c(),f(b,1),b.m(h,null)):b&&(Y(),m(b,1,1,()=>{b=null}),X()),x[1].length>0||x[3]&&x[8].length>0?y?(y.p(x,M),266&M[0]&&f(y,1)):(y=R$(x),y.c(),f(y,1),y.m(t,null)):y&&(Y(),m(y,1,1,()=>{y=null}),X())},i(x){g||(f(i.$$.fragment,x),f(c.$$.fragment,x),f($),f(b),f(y),g=!0)},o(x){m(i.$$.fragment,x),m(c.$$.fragment,x),m($),m(b),m(y),g=!1},d(x){x&&v(t),C(i),C(c),$&&$.d(),b&&b.d(),y&&y.d()}}}const q$="setup.sh";function lj(r,t,n){let e,o,s,i,a,l,c,u,h,{toolUseState:d}=t,{toolUse:p}=t,g=[],$=()=>{};const b=Jt("chatModel"),y=b==null?void 0:b.extensionClient,x=Jt(Qo.key);async function M(F){try{await y.openFile({repoRoot:"",pathName:F.path,allowOutOfWorkspace:!0,openLocalUri:F.location==="home"})}catch(U){console.error(`Error opening script ${F.path} in editor:`,U)}}async function L(F,U){F.stopPropagation();const tt=g.find(q=>q.location===U);if(tt)try{return void await M(tt)}catch(q){console.error("Error opening existing script:",q)}try{const q=U,N=await x.saveSetupScript(q$,s,q);if(N.success&&N.path){const R={name:q$,path:N.path,content:s,location:q};g.push(R),await M(R)}else console.error("Failed to save script:",N.error)}catch(q){console.error("Error saving script:",q)}await B()}function A(F,U="plaintext"){y.openScratchFile(F,U)}async function B(){try{const F=(await x.listSetupScripts()).filter(U=>U.content.trim()===s.trim());n(15,g=F)}catch(F){console.error("Error checking existing scripts:",F)}}xc(async()=>{await B()});const E={[Wr.SUCCESS]:"success",[Wr.FAILED]:"error",[Wr.SKIPPED]:"skipped"};return r.$$set=F=>{"toolUseState"in F&&n(13,d=F.toolUseState),"toolUse"in F&&n(0,p=F.toolUse)},r.$$.update=()=>{1&r.$$.dirty[0]&&n(16,e=(()=>{try{const F=(p==null?void 0:p.input_json)||"{}";return typeof F=="string"?JSON.parse(F):{}}catch(F){return console.error("Failed to parse tool input JSON:",F),{}}})()),8192&r.$$.dirty[0]&&n(17,o=(()=>{var F;try{const U=((F=d.result)==null?void 0:F.text)||"{}";return typeof U=="string"?JSON.parse(U):U}catch(U){return console.error("Failed to parse tool result:",U),null}})()),65536&r.$$.dirty[0]&&n(7,s=e.script_content||""),131072&r.$$.dirty[0]&&n(2,i=(o==null?void 0:o.script_result)||null),131072&r.$$.dirty[0]&&n(1,a=(o==null?void 0:o.test_results)||[]),8192&r.$$.dirty[0]&&n(3,l=d.phase===$t.running),65544&r.$$.dirty[0]&&n(8,c=(()=>{try{return l&&e.test_commands&&Array.isArray(e.test_commands)?e.test_commands:[]}catch(F){return console.error("Failed to parse test commands:",F),[]}})()),32768&r.$$.dirty[0]&&n(6,u=(()=>{const F=g.some(tt=>tt.location==="git"),U=g.some(tt=>tt.location==="home");return[{id:"home",label:U?"Saved locally (in home directory)":"Save locally (in home directory)",endIcon:U?th:void 0},{id:"git",label:F?"Saved in git repository":"Save in git repository",endIcon:F?th:void 0}]})()),8206&r.$$.dirty[0]&&n(5,h=l?"Running script...":d.phase===$t.completed?"Script ran successfully":d.phase===$t.error?(i==null?void 0:i.status)===Wr.FAILED?"Script failed to run":a.some(F=>F.status===Wr.FAILED)?"Script ran with failed tests":a.some(F=>F.status===Wr.SKIPPED)?"Script ran but skipped tests":"Script failed":d.phase===$t.cancelled?"Script cancelled":d.phase===$t.runnable?"Waiting for user approval to run":"")},[p,a,i,l,$,h,u,s,c,L,async function(F){F.stopPropagation();const U=g.length>0?g[0]:null;try{U?await M(U):y.openScratchFile(s,"shellscript")}catch(tt){console.error("Error opening script in editor:",tt)}},A,E,d,{},g,e,o,(F,U)=>{L(U,F.id)},function(F){$=F,n(4,$)},()=>A(i.output||"No output available","bash"),F=>A(F),F=>A(F.output||"No output available")]}function cj(r){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 640 512"},r[0]],o={};for(let s=0;s<e.length;s+=1)o=lt(o,e[s]);return{c(){t=Bt("svg"),n=new Oe(!0),this.h()},l(s){t=ze(s,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Ne(t);n=Re(i,!0),i.forEach(v),this.h()},h(){n.a=null,Ht(t,o)},m(s,i){Pe(s,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M354.9 121.7c13.8 16 36.5 21.1 55.9 12.5 8.9-3.9 18.7-6.2 29.2-6.2 39.8 0 72 32.2 72 72 0 4-.3 7.9-.9 11.7-3.5 21.6 8.1 42.9 28.1 51.7C570.4 276.9 592 308 592 344c0 46.8-36.6 85.2-82.8 87.8-.6 0-1.3.1-1.9.2H144c-53 0-96-43-96-96 0-41.7 26.6-77.3 64-90.5 19.2-6.8 32-24.9 32-45.3v-.2c0-66.3 53.7-120 120-120 36.3 0 68.8 16.1 90.9 41.7M512 480v-.2c71.4-4.1 128-63.3 128-135.8 0-55.7-33.5-103.7-81.5-124.7 1-6.3 1.5-12.8 1.5-19.3 0-66.3-53.7-120-120-120-17.4 0-33.8 3.7-48.7 10.3C360.4 54.6 314.9 32 264 32c-92.8 0-168 75.2-168 168v.2C40.1 220 0 273.3 0 336c0 79.5 64.5 144 144 144h360zM223 255c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l39-39L296 384c0 13.3 10.7 24 24 24s24-10.7 24-24V249.9l39 39c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-80-80c-9.4-9.4-24.6-9.4-33.9 0z"/>',t)},p(s,[i]){Ht(t,o=Zt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 640 512"},1&i&&s[0]]))},i:H,o:H,d(s){s&&v(t)}}}function uj(r,t,n){return r.$$set=e=>{n(0,t=lt(lt({},t),jt(e)))},[t=jt(t)]}class hj extends nt{constructor(t){super(),rt(this,t,uj,cj,ot,{})}}function dj(r){let t,n;return t=new hj({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function j$(r){let t,n,e;return n=new ca({props:{defaultColor:"neutral",stickyColor:!1,size:0,variant:"ghost-block",tooltip:{neutral:"Go to remote agent",success:"Opening remote agent..."},stateVariant:{success:"soft"},onClick:r[2],icon:!0,$$slots:{iconLeft:[pj]},$$scope:{ctx:r}}}),{c(){t=I("span"),_(n.$$.fragment),T(t,"class","c-go-to-remote-agent-button-container c-go-to-remote-agent-button__size--0 svelte-vypzqz")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};256&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function pj(r){let t,n;return t=new la({props:{slot:"iconLeft"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function fj(r){let t,n,e=r[0]&&j$(r);return{c(){t=I("span"),e&&e.c(),T(t,"slot","toolAction")},m(o,s){S(o,t,s),e&&e.m(t,null),n=!0},p(o,s){o[0]?e?(e.p(o,s),1&s&&f(e,1)):(e=j$(o),e.c(),f(e,1),e.m(t,null)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d()}}}function gj(r){let t,n;return t=new Te({props:{slot:"header",toolName:"Remote Agent",formattedToolArgs:r[1],$$slots:{toolAction:[fj],icon:[dj]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};2&o&&(s.formattedToolArgs=e[1]),257&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function mj(r){let t,n;return t=new Me({props:{$$slots:{header:[gj]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};259&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function $j(r,t,n){let e,o,s,i,{toolUseInput:a={}}=t,{toolUseState:l}=t;const c=Jt(Hy.key);return r.$$set=u=>{"toolUseInput"in u&&n(3,a=u.toolUseInput),"toolUseState"in u&&n(4,l=u.toolUseState)},r.$$.update=()=>{8&r.$$.dirty&&n(6,e=Fe(a.summary,"")),64&r.$$.dirty&&n(1,o=(()=>{const u=[];return e&&u.push(e),u})()),16&r.$$.dirty&&n(5,s=(()=>{var u;if(l.phase===$t.completed&&((u=l.result)!=null&&u.text)&&!l.result.isError)try{const h=JSON.parse(l.result.text);if(h.success&&(h.remoteAgentId||h.remote_agent_id))return h.remoteAgentId||h.remote_agent_id}catch(h){console.error("Failed to parse spawn-sub-agent tool response:",h)}return null})()),32&r.$$.dirty&&n(0,i=!!s)},[i,o,async function(u){var h,d;if((h=u==null?void 0:u.stopPropagation)==null||h.call(u),(d=u==null?void 0:u.preventDefault)==null||d.call(u),s&&c)return c.switchToThread("remoteAgent",s),"success"},a,l,s,e]}const W$={[dn.editFile]:n_,[dn.readFile]:class extends nt{constructor(r){super(),rt(this,r,UD,PD,ot,{toolUseInput:0})}},[dn.saveFile]:class extends nt{constructor(r){super(),rt(this,r,JD,KD,ot,{toolUseInput:0,toolUseState:1})}},[dn.launchProcess]:lo,[dn.killProcess]:lo,[dn.readProcess]:lo,[dn.writeProcess]:lo,[dn.listProcesses]:lo,[dn.waitProcess]:lo,[dn.openBrowser]:class extends nt{constructor(r){super(),rt(this,r,nN,eN,ot,{toolUseInput:0,toolUseState:1})}},[dn.remember]:class extends nt{constructor(r){super(),rt(this,r,iO,sO,ot,{toolUseInput:0})}},[dn.diagnostics]:class extends nt{constructor(r){super(),rt(this,r,null,cO,ot,{})}},[dn.setupScript]:class extends nt{constructor(r){super(),rt(this,r,lj,aj,ot,{toolUseState:13,toolUseInput:14,toolUse:0},null,[-1,-1])}get toolUseInput(){return this.$$.ctx[14]}},[dn.readTerminal]:lo,[dn.gitCommitRetrieval]:s_,[dn.spawnSubAgent]:class extends nt{constructor(r){super(),rt(this,r,$j,mj,ot,{toolUseInput:3,toolUseState:4})}}};function yj(r){let t,n;return t=new uk({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function xj(r){let t,n;return t=new Te({props:{slot:"header",toolName:"Web",formattedToolArgs:[Fe(r[0].query,"")],$$slots:{icon:[yj]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1&o&&(s.formattedToolArgs=[Fe(e[0].query,"")]),2&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function bj(r){let t,n;return t=new Me({props:{showToolOutput:!1,$$slots:{header:[xj]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};3&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function wj(r,t,n){let{toolUseInput:e={}}=t;return r.$$set=o=>{"toolUseInput"in o&&n(0,e=o.toolUseInput)},[e]}class H$ extends nt{constructor(t){super(),rt(this,t,wj,bj,ot,{toolUseInput:0})}}function V$(r={}){const{summary:t,...n}=r;let e=t??n.query;return{formattedToolArgs:e?[e]:void 0,toolUseInput:n}}function G$(r={}){const{href:t}=r;return typeof t=="string"?t:void 0}const vj=r=>({}),Z$=r=>({slot:"icon"});function _j(r){let t;const n=r[5].icon,e=Ot(n,r,r[6],Z$);return{c(){e&&e.c()},m(o,s){e&&e.m(o,s),t=!0},p(o,s){e&&e.p&&(!t||64&s)&&zt(e,n,o,o[6],t?Rt(n,o[6],s,vj):Nt(o[6]),Z$)},i(o){t||(f(e,o),t=!0)},o(o){m(e,o),t=!1},d(o){e&&e.d(o)}}}function kj(r){let t,n;return t=new r_({props:{slot:"toolAction",href:G$(r[3])}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8&o&&(s.href=G$(e[3])),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Cj(r){let t,n;return t=new Te({props:{slot:"header",toolName:r[0],formattedToolArgs:r[2],$$slots:{toolAction:[kj],icon:[_j]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1&o&&(s.toolName=e[0]),4&o&&(s.formattedToolArgs=e[2]),72&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Sj(r){let t,n;return t=new K3({props:{slot:"details",toolUseInput:r[3],toolUseState:r[1].toolUseState}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8&o&&(s.toolUseInput=e[3]),2&o&&(s.toolUseState=e[1].toolUseState),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Tj(r){let t,n;return t=new Me({props:{showToolOutput:!0,$$slots:{details:[Sj],header:[Cj]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};79&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Mj(r,t,n){let e,{$$slots:o={},$$scope:s}=t,{toolName:i}=t;const a=Rn();Vt(r,a,u=>n(1,e=u));let{formattedToolArgs:l,toolUseInput:c}=V$(e.toolUseInput);return r.$$set=u=>{"toolName"in u&&n(0,i=u.toolName),"$$scope"in u&&n(6,s=u.$$scope)},r.$$.update=()=>{if(2&r.$$.dirty){const u=V$(e.toolUseInput);n(2,l=u.formattedToolArgs),n(3,c=u.toolUseInput)}},[i,e,l,c,a,o,s]}class oi extends nt{constructor(t){super(),rt(this,t,Mj,Tj,ot,{toolName:0})}}function Aj(r){let t,n;return t=new hk({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Lj(r){let t,n;return t=new oi({props:{toolName:"GitHub",$$slots:{icon:[Aj]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};1&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Ej(r){let t,n;return t=new dk({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Bj(r){let t,n;return t=new oi({props:{toolName:"Linear",$$slots:{icon:[Ej]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};1&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Ij(r){let t,n;return t=new pk({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Fj(r){let t,n;return t=new oi({props:{toolName:"Notion",$$slots:{icon:[Ij]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};1&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Dj(r){let t,n;return t=new fk({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Oj(r){let t,n;return t=new oi({props:{toolName:"Jira",$$slots:{icon:[Dj]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};1&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function zj(r){let t,n;return t=new gk({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Nj(r){let t,n;return t=new oi({props:{toolName:"Confluence",$$slots:{icon:[zj]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};1&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Rj(r){let t,n;return t=new mk({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Pj(r){let t;return{c(){t=W(r[1])},m(n,e){S(n,t,e)},p(n,e){2&e&&ht(t,n[1])},d(n){n&&v(t)}}}function Uj(r){let t,n,e;return n=new yt({props:{size:1,$$slots:{default:[Pj]},$$scope:{ctx:r}}}),{c(){t=I("span"),_(n.$$.fragment),T(t,"slot","secondary"),T(t,"class","c-supabase-tool__summary svelte-1rsethx")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};6&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function qj(r){let t,n;return t=new Te({props:{slot:"header",toolName:"Supabase",toolUseInput:r[0],$$slots:{secondary:[Uj],icon:[Rj]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};1&o&&(s.toolUseInput=e[0]),6&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function jj(r){let t,n;return t=new Me({props:{showToolOutput:!1,$$slots:{header:[qj]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};7&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Wj(r,t,n){let e,{toolUseInput:o={}}=t;return r.$$set=s=>{"toolUseInput"in s&&n(0,o=s.toolUseInput)},r.$$.update=()=>{1&r.$$.dirty&&n(1,e=o.summary||"")},[o,e]}function Hj(r){let t,n;return t=new $k({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Vj(r){let t,n;return t=new oi({props:{toolName:"Glean",$$slots:{icon:[Hj]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};1&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}const Y$={[Nr.webSearch]:H$,[Nr.webSearchV1]:H$,[Nr.gitHub]:class extends nt{constructor(r){super(),rt(this,r,null,Lj,ot,{})}},[Nr.linear]:class extends nt{constructor(r){super(),rt(this,r,null,Bj,ot,{})}},[Nr.notion]:class extends nt{constructor(r){super(),rt(this,r,null,Fj,ot,{})}},[Nr.jira]:class extends nt{constructor(r){super(),rt(this,r,null,Oj,ot,{})}},[Nr.confluence]:class extends nt{constructor(r){super(),rt(this,r,null,Nj,ot,{})}},[Nr.supabase]:class extends nt{constructor(r){super(),rt(this,r,Wj,jj,ot,{toolUseInput:0})}},[Nr.glean]:class extends nt{constructor(r){super(),rt(this,r,null,Vj,ot,{})}}};function Gj(r){let t,n;return t=new yk({props:{slot:"icon"}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p:H,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Zj(r){let t;return{c(){t=W(r[2])},m(n,e){S(n,t,e)},p(n,e){4&e&&ht(t,n[2])},d(n){n&&v(t)}}}function Yj(r){let t,n,e;return n=new yt({props:{size:1,$$slots:{default:[Zj]},$$scope:{ctx:r}}}),{c(){t=I("span"),_(n.$$.fragment),T(t,"slot","secondary"),T(t,"class","c-mcp-tool__summary svelte-bmoton")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};260&s&&(i.$$scope={dirty:s,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function Xj(r){let t,n;return t=new Te({props:{slot:"header",toolName:r[1],toolUseInput:r[0],$$slots:{secondary:[Yj],icon:[Gj]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};2&o&&(s.toolName=e[1]),1&o&&(s.toolUseInput=e[0]),260&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Qj(r){let t,n;return t=new Me({props:{showToolOutput:!0,$$slots:{header:[Xj]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,[o]){const s={};263&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Kj(r,t,n){let e,o,s,i,{toolUseInput:a={}}=t;const l=Rn();Vt(r,l,h=>n(7,i=h));let c="",u="";return r.$$set=h=>{"toolUseInput"in h&&n(0,a=h.toolUseInput)},r.$$.update=()=>{128&r.$$.dirty&&n(4,e=i.toolUse.tool_name),128&r.$$.dirty&&n(6,o=i.toolUse.mcp_server_name),128&r.$$.dirty&&n(5,s=i.toolUse.mcp_tool_name),112&r.$$.dirty&&(o?(n(1,c=o),n(2,u=s||"")):(n(1,c=s||e||"MCP"),n(2,u="")))},[a,c,u,l,e,s,o,i]}class Jj extends nt{constructor(t){super(),rt(this,t,Kj,Qj,ot,{toolUseInput:0})}}function tW(r){const t=((n=r.tool_name)in W$?W$[n]:void 0)??function(o){return o in Y$?Y$[o]:void 0}(r.tool_name)??function(o){return o in C$?C$[o]:void 0}(r.tool_name);var n;return t||function(o){if(typeof o=="object"&&(o.mcp_server_name||o.mcp_tool_name))return Jj}(r)||Me}function eW(r){let t,n,e;const o=[r[2],{messageListContainer:r[0]}];var s=r[1];function i(a,l){let c={};for(let u=0;u<o.length;u+=1)c=lt(c,o[u]);return l!==void 0&&5&l&&(c=lt(c,Zt(o,[4&l&&Ze(a[2]),1&l&&{messageListContainer:a[0]}]))),{props:c}}return s&&(t=Nn(s,i(r))),{c(){t&&_(t.$$.fragment),n=dt()},m(a,l){t&&k(t,a,l),S(a,n,l),e=!0},p(a,[l]){if(2&l&&s!==(s=a[1])){if(t){Y();const c=t;m(c.$$.fragment,1,0,()=>{C(c,1)}),X()}s?(t=Nn(s,i(a,l)),_(t.$$.fragment),f(t.$$.fragment,1),k(t,n.parentNode,n)):t=null}else if(s){const c=5&l?Zt(o,[4&l&&Ze(a[2]),1&l&&{messageListContainer:a[0]}]):{};t.$set(c)}},i(a){e||(t&&f(t.$$.fragment,a),e=!0)},o(a){t&&m(t.$$.fragment,a),e=!1},d(a){a&&v(n),t&&C(t,a)}}}function nW(r,t,n){let e,o,s,{toolUse:i}=t,{toolUseState:a}=t,{isLastTurn:l}=t,{requestId:c}=t,{onToolRun:u=()=>{}}=t,{onToolCancel:h=()=>{}}=t,{onToolSkip:d=()=>{}}=t,{turnIndex:p=0}=t,{messageListContainer:g}=t;const{readableCtx:$,writableCtx:b}=bI({toolUse:i,toolUseState:a,isLastTurn:l,requestId:c,onToolRun:u,onToolCancel:h,onToolSkip:d,turnIndex:p,messageListContainer:g});return Vt(r,$,y=>n(2,s=y)),Vt(r,b,y=>n(13,o=y)),r.$$set=y=>{"toolUse"in y&&n(5,i=y.toolUse),"toolUseState"in y&&n(6,a=y.toolUseState),"isLastTurn"in y&&n(7,l=y.isLastTurn),"requestId"in y&&n(8,c=y.requestId),"onToolRun"in y&&n(9,u=y.onToolRun),"onToolCancel"in y&&n(10,h=y.onToolCancel),"onToolSkip"in y&&n(11,d=y.onToolSkip),"turnIndex"in y&&n(12,p=y.turnIndex),"messageListContainer"in y&&n(0,g=y.messageListContainer)},r.$$.update=()=>{32&r.$$.dirty&&n(1,e=tW(i)),8161&r.$$.dirty&&id(b,o={toolUse:i,toolUseState:a,isLastTurn:l,requestId:c,onToolRun:u,onToolCancel:h,onToolSkip:d,turnIndex:p,messageListContainer:g},o)},[g,e,s,$,b,i,a,l,c,u,h,d,p]}class c_ extends nt{constructor(t){super(),rt(this,t,nW,eW,ot,{toolUse:5,toolUseState:6,isLastTurn:7,requestId:8,onToolRun:9,onToolCancel:10,onToolSkip:11,turnIndex:12,messageListContainer:0})}}function X$(r,t,n){const e=r.slice();e[12]=t[n];const o=e[12].tool_use;return e[13]=o,e}function Nu(r){var e;const t=r.slice(),n=(e=t[7])!=null&&e.isActive?t[7].getToolUseState(t[13].tool_use_id):t[0].getToolUseState(t[2],t[13].tool_use_id);return t[16]=n,t}function Q$(r){let t,n,e=Gt(ty(r[3])),o=[];for(let i=0;i<e.length;i+=1)o[i]=J$(X$(r,e,i));const s=i=>m(o[i],1,1,()=>{o[i]=null});return{c(){t=I("div");for(let i=0;i<o.length;i+=1)o[i].c();T(t,"class","l-tooluse-list svelte-g3rdh4")},m(i,a){S(i,t,a);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(t,null);n=!0},p(i,a){if(2045&a){let l;for(e=Gt(ty(i[3])),l=0;l<e.length;l+=1){const c=X$(i,e,l);o[l]?(o[l].p(c,a),f(o[l],1)):(o[l]=J$(c),o[l].c(),f(o[l],1),o[l].m(t,null))}for(Y(),l=e.length;l<o.length;l+=1)s(l);X()}},i(i){if(!n){for(let a=0;a<e.length;a+=1)f(o[a]);n=!0}},o(i){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)m(o[a]);n=!1},d(i){i&&v(t),un(o,i)}}}function K$(r){let t,n;return t=new c_({props:{toolUse:r[13],toolUseState:r[16],isLastTurn:r[4],requestId:r[2],onToolRun:r[8],onToolCancel:r[9],onToolSkip:r[10],turnIndex:r[5],messageListContainer:r[6]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8&o&&(s.toolUse=e[13]),141&o&&(s.toolUseState=e[16]),16&o&&(s.isLastTurn=e[4]),4&o&&(s.requestId=e[2]),32&o&&(s.turnIndex=e[5]),64&o&&(s.messageListContainer=e[6]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function J$(r){let t,n,e=r[13]&&K$(Nu(r));return{c(){e&&e.c(),t=dt()},m(o,s){e&&e.m(o,s),S(o,t,s),n=!0},p(o,s){o[13]?e?(e.p(Nu(o),s),8&s&&f(e,1)):(e=K$(Nu(o)),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d(o)}}}function rW(r){let t,n,e=r[3]!==void 0&&r[3].length>0&&Q$(r);return{c(){e&&e.c(),t=dt()},m(o,s){e&&e.m(o,s),S(o,t,s),n=!0},p(o,[s]){o[3]!==void 0&&o[3].length>0?e?(e.p(o,s),8&s&&f(e,1)):(e=Q$(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d(o)}}}function ty(r){return r.length<=1?r:(console.error("Only one tool use is supported, got",r.length),r.slice(0,1))}function oW(r,t,n){let e,o=H,s=()=>(o(),o=An(l,g=>n(7,e=g)),l);r.$$.on_destroy.push(()=>o());let{conversationModel:i}=t,{toolsWebviewModel:a}=t,{remoteAgentsModel:l}=t;s();let{requestId:c}=t,{toolUseNodes:u}=t,{isLastTurn:h}=t,{turnIndex:d=0}=t,{messageListContainer:p}=t;return r.$$set=g=>{"conversationModel"in g&&n(0,i=g.conversationModel),"toolsWebviewModel"in g&&n(11,a=g.toolsWebviewModel),"remoteAgentsModel"in g&&s(n(1,l=g.remoteAgentsModel)),"requestId"in g&&n(2,c=g.requestId),"toolUseNodes"in g&&n(3,u=g.toolUseNodes),"isLastTurn"in g&&n(4,h=g.isLastTurn),"turnIndex"in g&&n(5,d=g.turnIndex),"messageListContainer"in g&&n(6,p=g.messageListContainer)},[i,l,c,u,h,d,p,e,function(g,$,b){a.callTool(g,$.tool_use_id,$.tool_name,b,i.chatHistory.filter(y=>Bi(y)).map(ky),i.id)},function(g,$){a.cancelToolRun(g,$)},function(g,$){a.skipToolRun(g,$)},a]}class sW extends nt{constructor(t){super(),rt(this,t,oW,rW,ot,{conversationModel:0,toolsWebviewModel:11,remoteAgentsModel:1,requestId:2,toolUseNodes:3,isLastTurn:4,turnIndex:5,messageListContainer:6})}}class ey{static generateDiff(t,n,e,o){return P_(t,n,e,o)}static generateDiffs(t){return U_(t)}static getDiffStats(t){return of(t)}static getDiffObjectStats(t){return of(t.diff)}static isNewFile(t){return q_(t)}static isDeletedFile(t){return j_(t)}}function ny(r){return r.replace(/\.git$/,"")}function HH(r){if(!r)return"";const t=r.match(/github\.com\/([^/]+)\/([^/]+)/);if(t)return t[2].replace(/\.git$/,"");const n=r.split("/").filter(Boolean);return(n.length>0?n[n.length-1]:"").replace(/\.git$/,"")}function VH(r){if(!r)return"";const t=r.match(/github\.com\/([^/]+)\/([^/]+)/);if(t)return`${t[1]}/${t[2].replace(/\.git$/,"")}`;const n=r.split("/").filter(Boolean);return n.length>1?`${n[n.length-2]}/${n[n.length-1].replace(/\.git$/,"")}`:n.length>0?n[n.length-1].replace(/\.git$/,""):""}function iW(r){return Do(r,t=>n=>{if(!t)return!0;const e=ny(t),o=ny(function(s){var i,a,l;return((l=(a=(i=s.workspace_setup)==null?void 0:i.starting_files)==null?void 0:a.github_commit_ref)==null?void 0:l.repository_url)||""}(n));return!!o&&!!e&&o!==e})}function ry(r){let t,n;return t=new yt({props:{class:"edit-item__added-lines",size:1,$$slots:{default:[aW]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};5&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function aW(r){let t,n;return{c(){t=W("+"),n=W(r[0])},m(e,o){S(e,t,o),S(e,n,o)},p(e,o){1&o&&ht(n,e[0])},d(e){e&&(v(t),v(n))}}}function oy(r){let t,n;return t=new yt({props:{class:"edit-item__removed-lines",size:1,$$slots:{default:[lW]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};6&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function lW(r){let t,n;return{c(){t=W("-"),n=W(r[1])},m(e,o){S(e,t,o),S(e,n,o)},p(e,o){2&o&&ht(n,e[1])},d(e){e&&(v(t),v(n))}}}function cW(r){let t,n,e,o=r[0]>0&&ry(r),s=r[1]>0&&oy(r);return{c(){t=I("div"),o&&o.c(),n=J(),s&&s.c(),T(t,"class","edit-item__changes svelte-1k8sltp")},m(i,a){S(i,t,a),o&&o.m(t,null),O(t,n),s&&s.m(t,null),e=!0},p(i,[a]){i[0]>0?o?(o.p(i,a),1&a&&f(o,1)):(o=ry(i),o.c(),f(o,1),o.m(t,n)):o&&(Y(),m(o,1,1,()=>{o=null}),X()),i[1]>0?s?(s.p(i,a),2&a&&f(s,1)):(s=oy(i),s.c(),f(s,1),s.m(t,null)):s&&(Y(),m(s,1,1,()=>{s=null}),X())},i(i){e||(f(o),f(s),e=!0)},o(i){m(o),m(s),e=!1},d(i){i&&v(t),o&&o.d(),s&&s.d()}}}function uW(r,t,n){let{totalAddedLines:e=0}=t,{totalRemovedLines:o=0}=t;return r.$$set=s=>{"totalAddedLines"in s&&n(0,e=s.totalAddedLines),"totalRemovedLines"in s&&n(1,o=s.totalRemovedLines)},[e,o]}class hW extends nt{constructor(t){super(),rt(this,t,uW,cW,ot,{totalAddedLines:0,totalRemovedLines:1})}}function sy(r){let t,n,e,o;return e=new he({props:{content:r[6]?sf:"View Diff",$$slots:{default:[pW]},$$scope:{ctx:r}}}),{c(){t=I("div"),n=I("div"),_(e.$$.fragment),T(n,"class","file-changes-header svelte-1g6zm2e"),T(t,"class","file-changes-summary svelte-1g6zm2e")},m(s,i){S(s,t,i),O(t,n),k(e,n,null),o=!0},p(s,i){const a={};64&i&&(a.content=s[6]?sf:"View Diff"),2097275&i&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){o||(f(e.$$.fragment,s),o=!0)},o(s){m(e.$$.fragment,s),o=!1},d(s){s&&v(t),C(e)}}}function dW(r){let t,n,e,o,s,i=r[1]===1?"":"s";return{c(){t=W(r[1]),n=W(" file"),e=W(i),o=W(" changed"),s=W(r[0])},m(a,l){S(a,t,l),S(a,n,l),S(a,e,l),S(a,o,l),S(a,s,l)},p(a,l){2&l&&ht(t,a[1]),2&l&&i!==(i=a[1]===1?"":"s")&&ht(e,i),1&l&&ht(s,a[0])},d(a){a&&(v(t),v(n),v(e),v(o),v(s))}}}function pW(r){let t,n,e,o,s,i,a,l,c,u;return e=new yt({props:{size:1,weight:"medium",truncate:!0,$$slots:{default:[dW]},$$scope:{ctx:r}}}),s=new hW({props:{totalAddedLines:r[4],totalRemovedLines:r[3]}}),a=new fd({}),{c(){t=I("div"),n=I("div"),_(e.$$.fragment),o=J(),_(s.$$.fragment),i=J(),_(a.$$.fragment),T(n,"class","file-changes-info__text svelte-1g6zm2e"),T(t,"class","file-changes-info svelte-1g6zm2e"),T(t,"role","button"),T(t,"tabindex","0"),ut(t,"active",r[5]),ut(t,"disabled",r[6])},m(h,d){S(h,t,d),O(t,n),k(e,n,null),O(n,o),k(s,n,null),O(t,i),k(a,t,null),l=!0,c||(u=[Kt(t,"click",r[10]),Kt(t,"keydown",r[17])],c=!0)},p(h,d){const p={};2097155&d&&(p.$$scope={dirty:d,ctx:h}),e.$set(p);const g={};16&d&&(g.totalAddedLines=h[4]),8&d&&(g.totalRemovedLines=h[3]),s.$set(g),(!l||32&d)&&ut(t,"active",h[5]),(!l||64&d)&&ut(t,"disabled",h[6])},i(h){l||(f(e.$$.fragment,h),f(s.$$.fragment,h),f(a.$$.fragment,h),l=!0)},o(h){m(e.$$.fragment,h),m(s.$$.fragment,h),m(a.$$.fragment,h),l=!1},d(h){h&&v(t),C(e),C(s),C(a),c=!1,Qr(u)}}}function fW(r){let t,n,e=r[2]&&sy(r);return{c(){e&&e.c(),t=dt()},m(o,s){e&&e.m(o,s),S(o,t,s),n=!0},p(o,[s]){o[2]?e?(e.p(o,s),4&s&&f(e,1)):(e=sy(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d(o)}}}function gW(r,t,n){let e,o,s,i,a,l,c,u,h,d,p,{changedFiles:g=[]}=t,{suffix:$=""}=t,{turnIndex:b=-1}=t;const y=Jt(Qo.key);Vt(r,y,E=>n(15,h=E));const x=Jt(Pk);Vt(r,x,E=>n(16,p=E));const M=Jt(Wy.key),L=_e(""),A=iW(L);function B(){var N,R,j,Q,z;if(e)return;if(o)return h.closeRemoteAgentDiffPanel(),void x.set(-1);let E=[],F="",U=!0,tt=-1;g?(E=g,b!==void 0?(tt=b,U=!1,x.set(b),F=ou(((N=h.currentConversation)==null?void 0:N.exchanges)??[],b)):(U=!0,x.set(-1),F=ou(((R=h.currentConversation)==null?void 0:R.exchanges)??[],1))):(E=lf(((j=h.currentConversation)==null?void 0:j.exchanges)??[]),U=!0,x.set(-1),F=ou(((Q=h.currentConversation)==null?void 0:Q.exchanges)??[],1));const q=tt;h.showRemoteAgentDiffPanel({turnIdx:q,changedFiles:E,userPrompt:F,sessionSummary:((z=h.currentAgent)==null?void 0:z.session_summary)??"",isShowingAggregateChanges:U,isAgentFromDifferentRepo:!!h.currentAgent&&d(h.currentAgent)})}return Vt(r,A,E=>n(18,d=E)),xc(async()=>{try{const{remoteUrl:E,error:F}=await M.getRemoteUrl();if(F)return void console.error("Failed to get remote url:",F);L.set(E)}catch(E){console.error("Failed to get current repository URL:",E)}}),r.$$set=E=>{"changedFiles"in E&&n(11,g=E.changedFiles),"suffix"in E&&n(0,$=E.suffix),"turnIndex"in E&&n(12,b=E.turnIndex)},r.$$.update=()=>{var E;2048&r.$$.dirty&&n(6,e=g.length>W_),102400&r.$$.dirty&&n(5,o=h.isDiffPanelOpen&&h.currentAgentId===h.diffPanelAgentId&&(b===void 0&&p===-1||b!==void 0&&p===b)),34816&r.$$.dirty&&n(14,s=g||lf(((E=h.currentConversation)==null?void 0:E.exchanges)??[])),16384&r.$$.dirty&&n(1,i=s.length),16384&r.$$.dirty&&n(13,a=s.map(F=>{const U=ey.generateDiff(F.old_path,F.new_path,F.old_contents||"",F.new_contents||"");return ey.getDiffObjectStats(U)})),8192&r.$$.dirty&&n(4,l=a.reduce((F,U)=>F+U.additions,0)),8192&r.$$.dirty&&n(3,c=a.reduce((F,U)=>F+U.deletions,0)),2&r.$$.dirty&&n(2,u=i>0)},[$,i,u,c,l,o,e,y,x,A,B,g,b,a,s,h,p,E=>E.key==="Enter"&&B()]}class mW extends nt{constructor(t){super(),rt(this,t,gW,fW,ot,{changedFiles:11,suffix:0,turnIndex:12})}}function iy(r){let t,n,e;return n=new mW({props:{changedFiles:r[2],suffix:" in this turn",turnIndex:r[0]}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-message-actions svelte-1ks6di8"),ut(t,"c-message-actions--last",r[1])},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};4&s&&(i.changedFiles=o[2]),1&s&&(i.turnIndex=o[0]),n.$set(i),(!e||2&s)&&ut(t,"c-message-actions--last",o[1])},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function $W(r){let t,n,e=r[3]&&iy(r);return{c(){e&&e.c(),t=dt()},m(o,s){e&&e.m(o,s),S(o,t,s),n=!0},p(o,[s]){o[3]?e?(e.p(o,s),8&s&&f(e,1)):(e=iy(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d(o)}}}function yW(r,t,n){let e,o,s,{turnIndex:i=0}=t,{isLastTurn:a=!1}=t;const l=Jt(Qo.key);return Vt(r,l,c=>n(5,s=c)),r.$$set=c=>{"turnIndex"in c&&n(0,i=c.turnIndex),"isLastTurn"in c&&n(1,a=c.isLastTurn)},r.$$.update=()=>{var c;33&r.$$.dirty&&n(2,e=Sk(((c=s.currentConversation)==null?void 0:c.exchanges)??[],i)),4&r.$$.dirty&&n(3,o=e.length>0)},[i,a,e,o,l,s]}class xW extends nt{constructor(t){super(),rt(this,t,yW,$W,ot,{turnIndex:0,isLastTurn:1})}}function bW(r,t,n){return n!=null&&n.isActive?async()=>{if(n.currentAgentId)try{const e=await n.getConversationUrl(n.currentAgentId);e&&await navigator.clipboard.writeText(e)}catch(e){console.error("Failed to get conversation URL: ",e)}}:async()=>{if(t!=null&&t.id)try{const e=await(r==null?void 0:r.getConversationUrl(t.id));e&&await navigator.clipboard.writeText(e)}catch(e){console.error("Failed to get conversation URL: ",e)}}}function ay(r,t,n){const e=r.slice();e[12]=t[n];const o=e[12].tool_use;return e[13]=o,e}function Ru(r){var e;const t=r.slice(),n=(e=t[7])!=null&&e.isActive?t[7].getToolUseState(t[13].tool_use_id):t[0].getToolUseState(t[12].requestId??t[2],t[13].tool_use_id);return t[16]=n,t}function ly(r){let t,n;return t=new ud({props:{stickyHeader:!1,stickyHeaderTop:0,$$slots:{header:[kW],default:[wW]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};131325&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function cy(r){let t,n;return t=new c_({props:{toolUse:r[13],toolUseState:r[16],isLastTurn:r[4],requestId:r[12].requestId??r[2],onToolRun:r[8],onToolCancel:r[9],onToolSkip:r[10],turnIndex:r[5],messageListContainer:r[6]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8&o&&(s.toolUse=e[13]),141&o&&(s.toolUseState=e[16]),16&o&&(s.isLastTurn=e[4]),12&o&&(s.requestId=e[12].requestId??e[2]),32&o&&(s.turnIndex=e[5]),64&o&&(s.messageListContainer=e[6]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function uy(r){let t,n,e=r[13]&&cy(Ru(r));return{c(){e&&e.c(),t=dt()},m(o,s){e&&e.m(o,s),S(o,t,s),n=!0},p(o,s){o[13]?e?(e.p(Ru(o),s),8&s&&f(e,1)):(e=cy(Ru(o)),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d(o)}}}function wW(r){let t,n,e=Gt(r[3]),o=[];for(let i=0;i<e.length;i+=1)o[i]=uy(ay(r,e,i));const s=i=>m(o[i],1,1,()=>{o[i]=null});return{c(){t=I("div");for(let i=0;i<o.length;i+=1)o[i].c();T(t,"class","l-tooluse-list svelte-1pmhbf0")},m(i,a){S(i,t,a);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(t,null);n=!0},p(i,a){if(2045&a){let l;for(e=Gt(i[3]),l=0;l<e.length;l+=1){const c=ay(i,e,l);o[l]?(o[l].p(c,a),f(o[l],1)):(o[l]=uy(c),o[l].c(),f(o[l],1),o[l].m(t,null))}for(Y(),l=e.length;l<o.length;l+=1)s(l);X()}},i(i){if(!n){for(let a=0;a<e.length;a+=1)f(o[a]);n=!0}},o(i){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)m(o[a]);n=!1},d(i){i&&v(t),un(o,i)}}}function hy(r){let t,n,e,o,s,i,a,l,c;return n=new yt({props:{size:1,weight:"medium",color:"secondary",$$slots:{default:[vW]},$$scope:{ctx:r}}}),i=new yt({props:{size:1,weight:"medium",color:"primary",$$slots:{default:[_W]},$$scope:{ctx:r}}}),l=new Iy({}),{c(){t=I("div"),_(n.$$.fragment),e=J(),o=I("div"),s=I("div"),_(i.$$.fragment),a=J(),_(l.$$.fragment),T(s,"class","l-tooluse-list_count svelte-1pmhbf0"),T(o,"class","l-tooluse-list__container__right svelte-1pmhbf0"),T(t,"class","l-tooluse-list__container svelte-1pmhbf0")},m(u,h){S(u,t,h),k(n,t,null),O(t,e),O(t,o),O(o,s),k(i,s,null),O(o,a),k(l,o,null),c=!0},p(u,h){const d={};131072&h&&(d.$$scope={dirty:h,ctx:u}),n.$set(d);const p={};131080&h&&(p.$$scope={dirty:h,ctx:u}),i.$set(p)},i(u){c||(f(n.$$.fragment,u),f(i.$$.fragment,u),f(l.$$.fragment,u),c=!0)},o(u){m(n.$$.fragment,u),m(i.$$.fragment,u),m(l.$$.fragment,u),c=!1},d(u){u&&v(t),C(n),C(i),C(l)}}}function vW(r){let t;return{c(){t=W("Tools used")},m(n,e){S(n,t,e)},d(n){n&&v(t)}}}function _W(r){let t,n=r[3].length+"";return{c(){t=W(n)},m(e,o){S(e,t,o)},p(e,o){8&o&&n!==(n=e[3].length+"")&&ht(t,n)},d(e){e&&v(t)}}}function kW(r){let t,n,e=r[3].length>1&&hy(r);return{c(){t=I("div"),e&&e.c(),T(t,"slot","header")},m(o,s){S(o,t,s),e&&e.m(t,null),n=!0},p(o,s){o[3].length>1?e?(e.p(o,s),8&s&&f(e,1)):(e=hy(o),e.c(),f(e,1),e.m(t,null)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d()}}}function CW(r){var o;let t,n,e=((o=r[3])==null?void 0:o.length)&&ly(r);return{c(){e&&e.c(),t=dt()},m(s,i){e&&e.m(s,i),S(s,t,i),n=!0},p(s,[i]){var a;(a=s[3])!=null&&a.length?e?(e.p(s,i),8&i&&f(e,1)):(e=ly(s),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(s){n||(f(e),n=!0)},o(s){m(e),n=!1},d(s){s&&v(t),e&&e.d(s)}}}function SW(r,t,n){let e,o=H,s=()=>(o(),o=An(l,g=>n(7,e=g)),l);r.$$.on_destroy.push(()=>o());let{conversationModel:i}=t,{toolsWebviewModel:a}=t,{remoteAgentsModel:l}=t;s();let{requestId:c}=t,{toolUseNodes:u}=t,{isLastTurn:h}=t,{turnIndex:d=0}=t,{messageListContainer:p}=t;return r.$$set=g=>{"conversationModel"in g&&n(0,i=g.conversationModel),"toolsWebviewModel"in g&&n(11,a=g.toolsWebviewModel),"remoteAgentsModel"in g&&s(n(1,l=g.remoteAgentsModel)),"requestId"in g&&n(2,c=g.requestId),"toolUseNodes"in g&&n(3,u=g.toolUseNodes),"isLastTurn"in g&&n(4,h=g.isLastTurn),"turnIndex"in g&&n(5,d=g.turnIndex),"messageListContainer"in g&&n(6,p=g.messageListContainer)},[i,l,c,u,h,d,p,e,function(g,$,b){a.callTool(g,$.tool_use_id,$.tool_name,b,i.chatHistory.filter(y=>Bi(y)).map(ky),i.id)},function(g,$){a.cancelToolRun(g,$)},function(g,$){a.skipToolRun(g,$)},a]}class TW extends nt{constructor(t){super(),rt(this,t,SW,CW,ot,{conversationModel:0,toolsWebviewModel:11,remoteAgentsModel:1,requestId:2,toolUseNodes:3,isLastTurn:4,turnIndex:5,messageListContainer:6})}}function Pu(r){const t=r.slice(),n=t[1].structured_output_nodes.filter(e=>e.type===Ny.TOOL_USE);return t[31]=n,t}function dy(r){let t,n;return t=new By({props:{renderers:{code:_B,codespan:x5,link:F5},markdown:r[3]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};8&o[0]&&(s.markdown=e[3]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function py(r){let t,n,e=r[31].length>0&&r[19]&&fy(r);return{c(){e&&e.c(),t=dt()},m(o,s){e&&e.m(o,s),S(o,t,s),n=!0},p(o,s){o[31].length>0&&o[19]?e?(e.p(o,s),2&s[0]&&f(e,1)):(e=fy(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(Y(),m(e,1,1,()=>{e=null}),X())},i(o){n||(f(e),n=!0)},o(o){m(e),n=!1},d(o){o&&v(t),e&&e.d(o)}}}function fy(r){let t,n,e,o;const s=[AW,MW],i=[];function a(l,c){var u;return(u=l[18])!=null&&u.enableErgonomicsUpdate?0:1}return t=a(r),n=i[t]=s[t](r),{c(){n.c(),e=dt()},m(l,c){i[t].m(l,c),S(l,e,c),o=!0},p(l,c){let u=t;t=a(l),t===u?i[t].p(l,c):(Y(),m(i[u],1,1,()=>{i[u]=null}),X(),n=i[t],n?n.p(l,c):(n=i[t]=s[t](l),n.c()),f(n,1),n.m(e.parentNode,e))},i(l){o||(f(n),o=!0)},o(l){m(n),o=!1},d(l){l&&v(e),i[t].d(l)}}}function MW(r){let t,n;return t=new sW({props:{requestId:r[2],toolsWebviewModel:r[19],remoteAgentsModel:r[20],conversationModel:r[12],toolUseNodes:r[31],isLastTurn:r[5],turnIndex:r[4],messageListContainer:r[7]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};4&o[0]&&(s.requestId=e[2]),4096&o[0]&&(s.conversationModel=e[12]),2&o[0]&&(s.toolUseNodes=e[31]),32&o[0]&&(s.isLastTurn=e[5]),16&o[0]&&(s.turnIndex=e[4]),128&o[0]&&(s.messageListContainer=e[7]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function AW(r){let t,n;return t=new TW({props:{requestId:r[2],toolsWebviewModel:r[19],remoteAgentsModel:r[20],conversationModel:r[12],toolUseNodes:r[31],isLastTurn:r[5],turnIndex:r[4],messageListContainer:r[7]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};4&o[0]&&(s.requestId=e[2]),4096&o[0]&&(s.conversationModel=e[12]),2&o[0]&&(s.toolUseNodes=e[31]),32&o[0]&&(s.isLastTurn=e[5]),16&o[0]&&(s.turnIndex=e[4]),128&o[0]&&(s.messageListContainer=e[7]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function LW(r){let t,n,e,o=r[3].length>0&&dy(r),s=r[12]&&r[1]&&r[10]&&r[2]&&r[1].structured_output_nodes&&py(Pu(r));return{c(){o&&o.c(),t=J(),s&&s.c(),n=dt()},m(i,a){o&&o.m(i,a),S(i,t,a),s&&s.m(i,a),S(i,n,a),e=!0},p(i,a){i[3].length>0?o?(o.p(i,a),8&a[0]&&f(o,1)):(o=dy(i),o.c(),f(o,1),o.m(t.parentNode,t)):o&&(Y(),m(o,1,1,()=>{o=null}),X()),i[12]&&i[1]&&i[10]&&i[2]&&i[1].structured_output_nodes?s?(s.p(Pu(i),a),5126&a[0]&&f(s,1)):(s=py(Pu(i)),s.c(),f(s,1),s.m(n.parentNode,n)):s&&(Y(),m(s,1,1,()=>{s=null}),X())},i(i){e||(f(o),f(s),e=!0)},o(i){m(o),m(s),e=!1},d(i){i&&(v(t),v(n)),o&&o.d(i),s&&s.d(i)}}}function gy(r){let t,n,e;return n=new gI({props:{conversationModel:r[12],turn:{questionsLoaded:!0,questions:r[8],status:r[1].status,request_message:r[1].request_message,request_id:r[1].request_id,chatItemType:yl.summaryResponse},showIntroText:!1}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-aug-msg__suggestions svelte-ct4uuz")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};4096&s[0]&&(i.conversationModel=o[12]),258&s[0]&&(i.turn={questionsLoaded:!0,questions:o[8],status:o[1].status,request_message:o[1].request_message,request_id:o[1].request_id,chatItemType:yl.summaryResponse}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function my(r){let t,n,e,o,s,i;const a=[BW,EW],l=[];function c(d,p){return d[1]&&d[12]&&d[10]&&(d[1].status===an.success||d[1].status===an.failed||d[1].status===an.cancelled)&&d[2]?0:1}function u(d,p){return p===0?function(g){const $=g.slice(),b=$[12].feedbackStates[$[2]];return $[30]=b,$}(d):d}n=c(r),e=l[n]=a[n](u(r,n));let h=r[17].doShowTurnSelector&&$y(r);return{c(){t=I("div"),e.c(),o=J(),h&&h.c(),s=dt(),T(t,"class","c-aug-msg__actions-row svelte-ct4uuz")},m(d,p){S(d,t,p),l[n].m(t,null),S(d,o,p),h&&h.m(d,p),S(d,s,p),i=!0},p(d,p){let g=n;n=c(d),n===g?l[n].p(u(d,n),p):(Y(),m(l[g],1,1,()=>{l[g]=null}),X(),e=l[n],e?e.p(u(d,n),p):(e=l[n]=a[n](u(d,n)),e.c()),f(e,1),e.m(t,null)),d[17].doShowTurnSelector?h?(h.p(d,p),131072&p[0]&&f(h,1)):(h=$y(d),h.c(),f(h,1),h.m(s.parentNode,s)):h&&(Y(),m(h,1,1,()=>{h=null}),X())},i(d){i||(f(e),f(h),i=!0)},o(d){m(e),m(h),i=!1},d(d){d&&(v(t),v(o),v(s)),l[n].d(),h&&h.d(d)}}}function EW(r){let t,n,e;return n=new Z4({props:{items:r[14]}}),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-aug-msg__actions svelte-ct4uuz")},m(o,s){S(o,t,s),k(n,t,null),e=!0},p(o,s){const i={};16384&s[0]&&(i.items=o[14]),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&v(t),C(n)}}}function BW(r){let t,n,e,o;function s(a){r[27](a)}let i={requestId:r[2],feedbackState:r[30],tooltipItems:r[14],reponseText:r[21],onSendUserRating:r[26]};return r[13]!==void 0&&(i.showFeedbackInput=r[13]),n=new cI({props:i}),Pt.push(()=>re(n,"showFeedbackInput",s)),{c(){t=I("div"),_(n.$$.fragment),T(t,"class","c-aug-msg__feedback svelte-ct4uuz"),ut(t,"c-aug-msg__feedback-active",r[13])},m(a,l){S(a,t,l),k(n,t,null),o=!0},p(a,l){const c={};4&l[0]&&(c.requestId=a[2]),4100&l[0]&&(c.feedbackState=a[30]),16384&l[0]&&(c.tooltipItems=a[14]),7168&l[0]&&(c.onSendUserRating=a[26]),!e&&8192&l[0]&&(e=!0,c.showFeedbackInput=a[13],oe(()=>e=!1)),n.$set(c),(!o||8192&l[0])&&ut(t,"c-aug-msg__feedback-active",a[13])},i(a){o||(f(n.$$.fragment,a),o=!0)},o(a){m(n.$$.fragment,a),o=!1},d(a){a&&v(t),C(n)}}}function $y(r){let t,n;return t=new xW({props:{turnIndex:r[4],isLastTurn:r[5]}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};16&o[0]&&(s.turnIndex=e[4]),32&o[0]&&(s.isLastTurn=e[5]),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function IW(r){let t,n,e,o=r[12]&&r[1]&&r[8].length>0&&gy(r),s=r[6]&&r[16]&&my(r);return{c(){t=I("div"),o&&o.c(),n=J(),s&&s.c(),T(t,"class","c-aug-msg__footer svelte-ct4uuz")},m(i,a){S(i,t,a),o&&o.m(t,null),O(t,n),s&&s.m(t,null),e=!0},p(i,a){i[12]&&i[1]&&i[8].length>0?o?(o.p(i,a),4354&a[0]&&f(o,1)):(o=gy(i),o.c(),f(o,1),o.m(t,n)):o&&(Y(),m(o,1,1,()=>{o=null}),X()),i[6]&&i[16]?s?(s.p(i,a),65600&a[0]&&f(s,1)):(s=my(i),s.c(),f(s,1),s.m(t,null)):s&&(Y(),m(s,1,1,()=>{s=null}),X())},i(i){e||(f(o),f(s),e=!0)},o(i){m(o),m(s),e=!1},d(i){i&&v(t),o&&o.d(),s&&s.d()}}}function FW(r){let t,n;return t=new W4({props:{isAugment:!0,$$slots:{footer:[IW],content:[LW]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},m(e,o){k(t,e,o),n=!0},p(e,o){const s={};491006&o[0]|2&o[1]&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function DW(r,t,n){let e,o,s,i,a,l,c,u,h,d,p,g=H,$=()=>(g(),g=An(x,et=>n(10,u=et)),x),b=H,y=H;r.$$.on_destroy.push(()=>g()),r.$$.on_destroy.push(()=>b()),r.$$.on_destroy.push(()=>y());let{chatModel:x}=t;$();let{turn:M}=t,{requestId:L}=t,{markdown:A}=t,{turnIndex:B=0}=t,{isLastTurn:E=!1}=t,{showFooter:F=!0}=t,{messageListContainer:U}=t,{group:tt}=t;const q=Jt("toolsWebviewModel"),N=Jt(Qo.key);Vt(r,N,et=>n(11,h=et));const R=E_(tt),j={share:yI,retry:Cg},Q=_e(L||"");$c("requestId",Q);let z,G=[],K=!1;return r.$$set=et=>{"chatModel"in et&&$(n(0,x=et.chatModel)),"turn"in et&&n(1,M=et.turn),"requestId"in et&&n(2,L=et.requestId),"markdown"in et&&n(3,A=et.markdown),"turnIndex"in et&&n(4,B=et.turnIndex),"isLastTurn"in et&&n(5,E=et.isLastTurn),"showFooter"in et&&n(6,F=et.showFooter),"messageListContainer"in et&&n(7,U=et.messageListContainer),"group"in et&&n(22,tt=et.group)},r.$$.update=()=>{var et;2048&r.$$.dirty[0]&&n(17,e=Uk(h)),1024&r.$$.dirty[0]&&(n(9,o=u==null?void 0:u.currentConversationModel),b(),b=An(o,ct=>n(12,d=ct))),2&r.$$.dirty[0]&&n(16,s=B_(M)),1024&r.$$.dirty[0]&&(n(15,i=u==null?void 0:u.flags),y(),y=An(i,ct=>n(18,p=ct))),7168&r.$$.dirty[0]&&n(25,a=function(ct,st,at){return{tooltipItems:[{label:"Share",action:bW(ct,st,at),id:"share-message",disabled:!(ct!=null&&ct.flags.enableShareService),icon:"share",successMessage:"Link copied!"}]}}(u,d,h)),33554432&r.$$.dirty[0]&&n(24,l=a.tooltipItems),16777762&r.$$.dirty[0]&&n(14,c=[...l.map(ct=>({...ct,icon:j[ct.icon]})),...E&&(M==null?void 0:M.status)===an.failed?[{label:"Retry",action:()=>{o&&M&&o.resendTurn(M)},id:"retry-message",disabled:!1,icon:Cg}]:[]]),4&r.$$.dirty[0]&&L&&Q.set(L),8389926&r.$$.dirty[0]&&(M&&M.status!==an.sent&&L&&E&&M.structured_output_nodes&&M.structured_output_nodes.length>0?(n(8,G=((et=M.structured_output_nodes.find(ct=>ct.type===Ny.SUGGESTED_QUESTIONS))==null?void 0:et.content.split(`
`))??[]),u&&G.length>0&&!K&&(n(23,K=!0),u.extensionClient.reportWebviewClientEvent(Gr.chatDisplaySuggestedQuestions))):n(8,G=[]))},[x,M,L,A,B,E,F,U,G,o,u,h,d,z,c,i,s,e,p,q,N,R,tt,K,l,a,async(et,ct,st)=>{let at=ru.chat;h!=null&&h.isActive?at=ru.remoteAgent:Uu(d)&&(at=ru.agent),await u.extensionClient.sendUserRating(et,at,ct,st)},function(et){z=et,n(13,z)}]}class GH extends nt{constructor(t){super(),rt(this,t,DW,FW,ot,{chatModel:0,turn:1,requestId:2,markdown:3,turnIndex:4,isLastTurn:5,showFooter:6,messageListContainer:7,group:22},null,[-1,-1])}}export{TH as $,UH as A,Di as B,Mr as C,q2 as D,tp as E,$r as F,HM as G,DS as H,FL as I,LT as J,B0 as K,w7 as L,j1 as M,q1 as N,EH as O,SH as P,AH as Q,MH as R,kH as S,Pd as T,It as U,LH as V,CH as W,us as X,IH as Y,BH as Z,w as _,ln as a,Gb as a$,K8 as a0,C7 as a1,Ns as a2,bH as a3,_d as a4,Dc as a5,FH as a6,xH as a7,rw as a8,WM as a9,zH as aA,bL as aB,mL as aC,gL as aD,vA as aE,v7 as aF,qT as aG,jT as aH,Ac as aI,GH as aJ,Dk as aK,$H as aL,Jo as aM,FM as aN,Cw as aO,Bc as aP,Fc as aQ,nc as aR,Tw as aS,kw as aT,xM as aU,Wy as aV,wu as aW,_1 as aX,zn as aY,zi as aZ,V9 as a_,W8 as aa,Q2 as ab,_S as ac,ua as ad,St as ae,At as af,GA as ag,_3 as ah,RH as ai,Iw as aj,cn as ak,ti as al,Fd as am,dL as an,tv as ao,Js as ap,IM as aq,hM as ar,AM as as,Hd as at,P0 as au,BL as av,NH as aw,PH as ax,OH as ay,Tt as az,ES as b,nr as b$,_H as b0,g8 as b1,zd as b2,co as b3,Xi as b4,I1 as b5,Z9 as b6,BM as b7,MM as b8,tM as b9,on as bA,lC as bB,Hy as bC,Ga as bD,gC as bE,l2 as bF,a2 as bG,yd as bH,i4 as bI,Er as bJ,mH as bK,th as bL,Uk as bM,v4 as bN,W4 as bO,Q4 as bP,Z4 as bQ,jH as bR,WH as bS,td as bT,F5 as bU,hW as bV,G5 as bW,Fs as bX,OR as bY,ee as bZ,Cf as b_,Vd as ba,$M as bb,OM as bc,fa as bd,Ks as be,Jl as bf,kM as bg,VL as bh,pa as bi,ec as bj,bM as bk,yw as bl,nM as bm,rM as bn,Fo as bo,i0 as bp,oM as bq,Gd as br,eM as bs,aM as bt,gs as bu,ho as bv,e0 as bw,Zd as bx,bw as by,Yh as bz,LS as c,xp as c0,ri as c1,PP as c2,xd as c3,Wr as c4,Sq as c5,zF as c6,gI as c7,yI as c8,HH as c9,VH as ca,hC as cb,hj as cc,ey as cd,Pk as ce,iW as cf,vp as cg,Cg as ch,I4 as ci,yH as cj,gN as ck,DM as cl,Ic as cm,ge as d,Qs as e,Dw as f,AS as g,Ps as h,Zo as i,fe as j,X2 as k,it as l,Db as m,ha as n,wH as o,vH as p,BS as q,IS as r,MS as s,ET as t,hL as u,kr as v,ZM as w,TS as x,DH as y,qH as z};
